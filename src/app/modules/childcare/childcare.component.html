<div class="flex">
  <nav class="mt-4 flex flex-row border-b border-slate-300 text-xs">
    <button (click)="switchPage(1)" class="tabs-main w-36"
      [class]="pages===1? 'tabs-main-true rounded-t-md' : 'tabs-main-false' ">
      VISIT
    </button>
    <button (click)="switchPage(2)" class="tabs-main w-36"
      [class]="pages===2? 'tabs-main-true rounded-t-md' : 'tabs-main-false' ">
      ECLAIMS
    </button>
  </nav>
  <div class="ml-auto">
    <button type="button" class="btn-end-visit ml-auto mt-5" (click)="toggleModal('end_visit')">
      <fa-icon class="mr-1" [icon]="faDoorClosed"></fa-icon>
      End Visit
    </button>
  </div>
</div>

<nav *ngIf="pages===1" class="mt-2 flex justify-between border-b border-slate-300 text-xs">
  <div class="flex flex-row">
    <button (click)="switchTab(1)" class="tabs-main w-28"
        [class]="module===1? 'tabs-main-true' : 'tabs-main-false' ">
        DETAILS
    </button>
    <button (click)="switchTab(3)" class="tabs-main w-28"
        [class]="module===3? 'tabs-main-true' : 'tabs-main-false' ">
        DIAGNOSIS & PRESCRIPTION
    </button>
    <button (click)="switchTab(4)" class="tabs-main w-28"
        [class]="module===4? 'tabs-main-true' : 'tabs-main-false' ">
        ITEM SUPPLIES
    </button>
    <button (click)="switchTab(2)" class="tabs-main w-28"
        [class]="module===2? 'tabs-main-true' : 'tabs-main-false' ">
        CASE RATE
    </button>
  </div>
</nav>

<div class="my-5 p-5 w-full border border-gray-200 shadow-md rounded-xl" *ngIf="pages === 1 && module === 1">
  <app-first-visit *ngIf="show_form" [ccdev_data]="ccdev_data" [patient_details]="patient_details" [ccdev_data]="ccdev_data" (loadCcDetails)="loadCcDetails()" ></app-first-visit>

  <app-services *ngIf="show_forms" [patient_details]="patient_details"></app-services>
  <app-breastfeeding *ngIf="show_forms" [patient_details]="patient_details"></app-breastfeeding>
</div>

<app-end-visit *ngIf="modals['end_visit']"
  (toggleModal)="toggleModal('end_visit')"
  [consult_id]="consult_id"
  [consult_date]="consult_details[0]?.consult_date"
  [patient_id]="consult_details[0]?.patient.id"
  [pt_group]="consult_details[0]?.pt_group"
></app-end-visit>

<div *ngIf="pages === 1 && show_form">
  <app-caserate *ngIf="module === 2"
    [patient_id]="ccdev_data.patient_id"
    [program_id]="ccdev_data.id"
    [program_name]="'cc'"
    [max_date]="max_date"
  ></app-caserate>

  <div *ngIf="module === 3">
    <app-final-dx [toggle_content]="1"
      [consult_details]="consult_details[0]"
      [have_complaint]="1"
      [allowed_to_edit]="1"
      (loadConsult)="loadConsultDetails($event)"
    ></app-final-dx>
    <app-prescription [toggle_content]="1"
      [consult_details]="consult_details[0]"
      [have_complaint]="1"
      [allowed_to_edit]="1"
      [user_id]="user_id"
      (loadConsult)="loadConsultDetails($event)"
    ></app-prescription>
  </div>

  <app-supplies *ngIf="module === 4"
    [toggle_content]="1"
    [consult_details]="consult_details[0]"
    [allowed_to_edit]="1"
    [user_id]="user_id"
    (loadConsult)="loadConsultDetails($event)"
  ></app-supplies>
</div>

<app-eclaims *ngIf="pages === 2 && show_form"
  [program_id]="ccdev_data.id"
  [program_name]="'cc'"
  [max_date]="max_date"
  [selected_case]="ccdev_data"
></app-eclaims>


