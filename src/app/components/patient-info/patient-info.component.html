<div class="rounded-xl text-gray-600 border border-slate-100" *ngIf="show_form"> <!-- overflow-y-scroll scrollbar-thin  style="height: 38rem;" -->
  <div class="block m-0 relative p-0 divide-y-2 divide-gray-200 divide-solid  scrollbar-thumb-white hover:scrollbar-thumb-blue-300 scrollbar-track-white">
    <div class="flex justify-items-start sticky top-0 bg-white">
      <div class="m-3">
        <!-- <img src="./assets/img/profile_2.jpg" class="rounded-full w-16 h-16 mx-auto m-2" /> -->

        <!-- <div class="overflow-hidden relative w-16 h-16 bg-gray-100 rounded-full dark:bg-gray-600">
          <svg class="absolute left-1 w-14 h-14 text-gray-400" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path></svg>
        </div> -->

        <div class="inline-flex overflow-hidden relative justify-center items-center w-16 h-16 bg-gray-100 rounded-full dark:bg-gray-600">
          <span class="font-medium text-gray-600 dark:text-gray-300">{{ getInitials(patient_info?.first_name+' '+patient_info?.last_name) }}</span>
        </div>
      </div>
      <div class="mt-4 leading-tight">
        <span class="block text-blue-500 font-medium">
          {{ patient_info?.last_name }}, {{ patient_info?.first_name }} {{ patient_info?.middle_name }} {{ patient_info?.suffix_code === "NA" ? "" : patient_info?.suffix_code }}
        </span>

        <span class="block text-xs">
          {{ patient_info?.birthdate | date: 'M/dd/Y' }} [{{ getAge() }}]
        </span>

        <div class="flex pt-2">
          <button type="button">
            <fa-icon class="mx-0 my-0 text-amber-500 mr-2" (click)="editPatient(patient_info?.id)" [icon]="faPenSquare" size="lg"></fa-icon>
          </button>
          <fa-icon class="mx-0 my-0 text-gray-500 mr-2" [icon]="faHeart" size="lg"></fa-icon>
          <fa-icon class="mx-0 my-0 text-gray-500 mr-2" [icon]="faFlask" size="lg"></fa-icon>
          <fa-icon class="mx-0 my-0 text-gray-500 mr-2" [icon]="faNotesMedical" size="lg"></fa-icon>
          <fa-icon class="mx-0 my-0 text-gray-500 mr-2" [icon]="faExclamationCircle" size="lg"></fa-icon>
        </div>
      </div>
    </div>



    <div class="block justify-items-start mx-5 mb-5">
      <div class="mt-4 flex justify-center">
        <button type="button" class="w-48 inline-flex justify-center px-5 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-sky-500 hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500" (click)="toggleModal('module-modal')">Navigate Programs</button>
      </div>


      <div class="mt-4 leading-tight">
        <span class="block text-blue-500 font-medium text-sm">
          ADDRESS
        </span>
        <span class="block text-xs">
          San Rafael, Tarlac City
        </span>
      </div>

      <div class="mt-4 leading-tight">
        <span class="block text-blue-500 font-medium text-sm">
          CONTACT NUMBER
        </span>
        <span class="block text-xs">
          {{ patient_info?.mobile_number }}
        </span>
      </div>

      <div class="mt-4 leading-tight">
        <div class="flex justify-between items-center">
          <span class="block text-blue-500 font-medium text-sm">
            PHILHEALTH
          </span>
          <span>
            <!-- <fa-icon (click)="toggleModal('philhealth-modal')" class="mx-0 my-0 text-green-500 mr-2 hover:cursor-pointer" [icon]="faTableList"></fa-icon> -->
            <!-- <fa-icon (click)="toggleModal('vitals-modal')" class="mx-0 my-0 text-blue-500 mr-2 hover:cursor-pointer" [icon]="faPlusCircle"></fa-icon> -->
          </span>
        </div>
        <span class="block text-xs text-red-500">
          -
        </span>
      </div>
    </div>

    <div class="block pt-4 justify-items-start mx-5 mb-5">
      <div class="flex justify-between items-center">
        <span class="block text-blue-500 font-medium text-sm">
          VITAL SIGNS ({{ latest_vitals?.vitals_date | date : 'M/d/Y hh:mm:ss a' }})
        </span>
        <span>
          <fa-icon (click)="toggleModal('vitals-list-modal')" class="mx-0 my-0 text-green-500 mr-2 hover:cursor-pointer" [icon]="faTableList" *ngIf="latest_vitals" ></fa-icon>
          <fa-icon (click)="toggleModal('vitals-modal')" class="mx-0 my-0 text-blue-500 mr-2 hover:cursor-pointer" [icon]="faPlusCircle"></fa-icon>
        </span>
      </div>

      <div class="block">
        <div class="flex pl-3 justify-between items-center">
          <span class="block font-medium text-xs">
            Weight
          </span>
          <span class="block text-xs">
            {{ latest_vitals?.patient_weight ? latest_vitals?.patient_weight+' kg' : '-' }}
          </span>
        </div>

        <div class="flex pl-3 justify-between items-center">
          <span class="block font-medium text-xs">
            {{ latest_vitals?.patient_weight_for_age || latest_vitals?.patient_height_for_age || latest_vitals?.patient_weight_for_height ? 'Length' : 'Height' }}
          </span>
          <span class="block text-xs">
            {{ latest_vitals?.patient_height ? latest_vitals?.patient_height+' cm' : '-' }}
          </span>
        </div>

        <div *ngIf="!latest_vitals?.patient_weight_for_age" class="flex pl-3 justify-between items-center" [ngClass]="{'text-red-500': latest_vitals?.patient_bmi ? (latest_vitals?.patient_bmi_class !== 'Normal') : false}">
          <span class="block font-medium text-xs" >
            BMI
          </span>
          <span class="block text-xs" >
            {{ latest_vitals?.patient_bmi ? latest_vitals?.patient_bmi : '-' }} {{ latest_vitals?.patient_bmi_class ? '('+latest_vitals?.patient_bmi_class+')' : '' }}
          </span>
        </div>

        <div *ngIf="latest_vitals?.patient_weight_for_age" class="flex pl-3 justify-between items-center" [ngClass]="{'text-red-500': latest_vitals?.patient_weight_for_age ? (latest_vitals?.patient_weight_for_age !== 'Normal') : false}">
          <span class="block font-medium text-xs" >
            Weight for age
          </span>
          <span class="block text-xs" >
            {{ latest_vitals?.patient_weight_for_age ? latest_vitals?.patient_weight_for_age : '' }}
          </span>
        </div>

        <div *ngIf="latest_vitals?.patient_height_for_age" class="flex pl-3 justify-between items-center" [ngClass]="{'text-red-500': latest_vitals?.patient_height_for_age ? (latest_vitals?.patient_height_for_age !== 'Normal') : false}">
          <span class="block font-medium text-xs" >
            Height for age
          </span>
          <span class="block text-xs" >
            {{ latest_vitals?.patient_height_for_age ? latest_vitals?.patient_height_for_age : '' }}
          </span>
        </div>

        <div *ngIf="latest_vitals?.patient_weight_for_height" class="flex pl-3 justify-between items-center" [ngClass]="{'text-red-500': latest_vitals?.patient_weight_for_height ? (latest_vitals?.patient_weight_for_height !== 'Normal') : false}">
          <span class="block font-medium text-xs" >
            Weight for Height
          </span>
          <span class="block text-xs" >
            {{ latest_vitals?.patient_weight_for_height ? latest_vitals?.patient_weight_for_height : '' }}
          </span>
        </div>

        <div *ngIf="latest_vitals?.patient_muac" class="flex pl-3 justify-between items-center">
          <span class="block font-medium text-xs" >
            MUAC
          </span>
          <span class="block text-xs" >
            {{ latest_vitals?.patient_muac ? latest_vitals?.patient_muac+' cm' : '' }}
          </span>
        </div>

        <div *ngIf="latest_vitals?.patient_head_circumference" class="flex pl-3 justify-between items-center">
          <span class="block font-medium text-xs" >
            Head Circumference
          </span>
          <span class="block text-xs" >
            {{ latest_vitals?.patient_head_circumference ? latest_vitals?.patient_head_circumference+' cm' : '' }}
          </span>
        </div>

        <div *ngIf="latest_vitals?.patient_limbs" class="flex pl-3 justify-between items-center">
          <span class="block font-medium text-xs" >
            Limbs
          </span>
          <span class="block text-xs" >
            {{ latest_vitals?.patient_limbs ? latest_vitals?.patient_limbs+' cm' : '' }}
          </span>
        </div>

        <div *ngIf="latest_vitals?.patient_skinfold_thickness" class="flex pl-3 justify-between items-center">
          <span class="block font-medium text-xs" >
            Skinfold Thickness
          </span>
          <span class="block text-xs" >
            {{ latest_vitals?.patient_skinfold_thickness ? latest_vitals?.patient_skinfold_thickness+' cm' : '' }}
          </span>
        </div>

        <div class="flex pl-3 justify-between items-center">
          <span class="block font-medium text-xs">
            Blood Pressure
          </span>
          <span class="block text-xs">
            {{ latest_vitals?.bp_systolic ? latest_vitals?.bp_systolic+'/'+latest_vitals?.bp_diastolic : '-' }}
          </span>
        </div>
        <!-- <div class="flex pl-3 justify-between items-center">
          <span class="block font-medium text-xs">
            BMI
          </span>
          <span class="block text-xs">
            -
          </span>
        </div> -->

        <div class="flex pl-3 justify-between items-center" [ngClass]="{'text-red-500': (latest_vitals?.patient_temp >= 37.6)}">
          <span class="block font-medium text-xs">
            Temperature
          </span>
          <span class="block text-xs">
            {{ latest_vitals?.patient_temp ? latest_vitals?.patient_temp + ' C': '-' }}
          </span>
        </div>

        <div class="flex pl-3 justify-between items-center">
          <span class="block font-medium text-xs">
            Heart Rate
          </span>
          <span class="block text-xs">
            {{ (latest_vitals?.patient_heart_rate ? (latest_vitals?.patient_heart_rate | number: '1.0-0' )  : '-') }}
          </span>
        </div>

        <div class="flex pl-3 justify-between items-center">
          <span class="block font-medium text-xs">
            Respiratory Rate
          </span>
          <span class="block text-xs">
            {{ (latest_vitals?.patient_respiratory_rate ? (latest_vitals?.patient_respiratory_rate | number: '1.0-0') : '-')}}
          </span>
        </div>

        <div class="flex pl-3 justify-between items-center">
          <span class="block font-medium text-xs">
            Pulse Rate
          </span>
          <span class="block text-xs">
            {{ (latest_vitals?.patient_pulse_rate ? (latest_vitals?.patient_pulse_rate | number: '1.0-0') : '-') }}
          </span>
        </div>

        <div class="flex pl-3 justify-between items-center">
          <span class="block font-medium text-xs">
            Waist Circumference
          </span>
          <span class="block text-xs">
            {{ latest_vitals?.patient_waist ? latest_vitals?.patient_waist : '-' }}
          </span>
        </div>
      </div>
    </div>


    <!-- <div class="block pt-4 justify-items-start mx-5 mb-5">
      <div class="flex justify-between items-center">
        <span class="block text-blue-500 font-medium text-sm">
          ALLERGIES
        </span>
        <fa-icon (click)="toggleModal('allergies-modal')" class="mx-0 my-0 text-blue-500 mr-2 hover:cursor-pointer" [icon]="faPlusCircle"></fa-icon>
      </div>

      <div class="block">
        <div class="flex pl-3 justify-between items-center">
          <span class="block font-medium text-xs">
            No Records
          </span>
          <span class="block text-xs">
            -
          </span>
        </div>
      </div>
    </div> -->

    <!-- <div class="block pt-4 justify-items-start mx-5 mb-5">
      <div class="flex justify-between items-center">
        <span class="block text-blue-500 font-medium text-sm">
          MEDICATION
        </span>
        <fa-icon (click)="toggleModal('medication-modal')" class="mx-0 my-0 text-blue-500 mr-2 hover:cursor-pointer" [icon]="faPlusCircle"></fa-icon>
      </div>

      <div class="block">
        <div class="flex pl-3 justify-between items-center">
          <span class="block font-medium text-xs">
            No Records
          </span>
          <span class="block text-xs">

          </span>
        </div>
      </div>
    </div> -->

    <div class="block pt-4 justify-items-start mx-5 mb-5">
      <div class="flex justify-between items-center">
        <span class="block text-blue-500 font-medium text-sm">
          VACCINES
        </span>
        <fa-icon (click)="toggleModal('vaccine-modal')" class="mx-0 my-0 text-blue-500 mr-2 hover:cursor-pointer" [icon]="faPlusCircle"></fa-icon>
      </div>

      <div class="block">
        <div class="flex pl-3 justify-between items-center mb-3 border-b border-b-gray-100" *ngFor="let vaccine of vaccine_list">

          <fa-icon (click)="toggleActionModal('vaccine-action-modal', vaccine)" class="mx-0 my-0 text-amber-400 hover:cursor-pointer flex-none mr-2" [icon]="faPenToSquare"></fa-icon>
          <!-- <fa-icon (click)="toggleModal('delete-vaccine-modal')" class="mx-0 my-0 text-red-400 hover:cursor-pointer flex-none mr-2" [icon]="faTrash"></fa-icon> -->
          <span class="font-medium text-xs flex-auto">
            <span class="font-bold">{{ vaccine.vaccine_id }} - {{ vaccine.dose }} Dose</span> <br />({{ vaccine.status_id === 1 ? 'Done' : (vaccine.status_id === 2 ? 'Done Outside - Private' : 'Done Outside - Public') }})
          </span>
          <span class="italic text-xs flex-auto text-right">
            {{ !vaccine.vaccine_date ? '-' : vaccine.vaccine_date}}
          </span>
        </div>
      </div>
    </div>

    <!-- <div class="block pt-4 justify-items-start mx-5 mb-5">
      <div class="flex justify-between items-center">
        <span class="block text-blue-500 font-medium text-sm">
          MEDICAL HISTORY
        </span>
        <fa-icon (click)="toggleModal('history-modal')" class="mx-0 my-0 text-blue-500 mr-2 hover:cursor-pointer" [icon]="faPlusCircle"></fa-icon>
      </div>

      <div class="block">
        <div class="flex pl-3 justify-between items-center">
          <span class="block font-medium text-xs">
            No Records
          </span>
          <span class="block text-xs">
            -
          </span>
        </div>
      </div>
    </div> -->

    <!-- <div class="block pt-4 justify-items-start mx-5 mb-5">
      <div class="flex justify-between items-center">
        <span class="block text-blue-500 font-medium text-sm">
          FAMILY MEDICAL HISTORY
        </span>
        <fa-icon (click)="toggleModal('fam-history-modal')" class="mx-0 my-0 text-blue-500 mr-2 hover:cursor-pointer" [icon]="faPlusCircle"></fa-icon>
      </div>

      <div class="block">
        <div class="flex pl-3 justify-between items-center">
          <span class="block font-medium text-xs">
            No Records
          </span>
          <span class="block text-xs">

          </span>
        </div>
      </div>
    </div> -->

    <!-- <div class="block pt-4 justify-items-start mx-5 mb-5">
      <div class="flex justify-between items-center">
        <span class="block text-blue-500 font-medium text-sm">
          LIFESTYLE
        </span>
        <fa-icon (click)="toggleModal('lifestyle-modal')" class="mx-0 my-0 text-blue-500 mr-2 hover:cursor-pointer" [icon]="faPlusCircle"></fa-icon>
      </div>

      <div class="block">
        <div class="flex pl-3 justify-between items-center">
          <span class="block font-medium text-xs">
            SMOKER
          </span>
          <span class="block text-xs">
            -
          </span>
        </div>

        <div class="flex pl-3 justify-between items-center">
          <span class="block font-medium text-xs">
            ALCOHOL
          </span>
          <span class="block text-xs">
            -
          </span>
        </div>

        <div class="flex pl-3 justify-between items-center">
          <span class="block font-medium text-xs">
            ILLICIT DRUGS
          </span>
          <span class="block text-xs">
            -
          </span>
        </div>
      </div>
    </div> -->

    <!-- <div class="block pt-4 justify-items-start mx-5 mb-5">
      <div class="flex justify-between items-center">
        <span class="block text-blue-500 font-medium text-sm">
          DEATH RECORD
        </span>
        <fa-icon (click)="toggleModal('death-modal')" class="mx-0 my-0 text-blue-500 mr-2 hover:cursor-pointer" [icon]="faPlusCircle"></fa-icon>
      </div>

      <div class="block">
        <div class="flex pl-3 justify-between items-center">
          <span class="block font-medium text-xs">
            -
          </span>
          <span class="block text-xs">
            -
          </span>
        </div>
      </div>
    </div> -->

  </div>
</div>

<!-- MODALS -->
<div *ngIf="vitalsModal">
  <app-vitals-modal (toggleModal)="toggleModal('vitals-modal')" [patient_age]="patient_age" [patient_info]="patient_info" [vitals_to_edit]="vitals_to_edit"></app-vitals-modal>
</div>

<div *ngIf="vitalsListModal">
  <app-vitals-list-modal (toggleModal)="toggleModal('vitals-list-modal')" (vitalsEdit)="vitalsEdit($event)" [patient_info]="patient_info"></app-vitals-list-modal>
</div>

<div *ngIf="allergiesModal">
  <app-allergies-modal (toggleModal)="toggleModal('allergies-modal')"></app-allergies-modal>
</div>

<div *ngIf="medicationModal">
  <app-medication-modal (toggleModal)="toggleModal('medication-modal')"></app-medication-modal>
</div>

<div *ngIf="vaccineModal">
  <app-vaccine-modal (toggleModal)="toggleModal('vaccine-modal')" [patient_info]="patient_info" [vaccines_given]="vaccines_given"></app-vaccine-modal>
</div>

<div *ngIf="vaccineActionModal">
  <app-vaccine-action-modal (toggleModal)="toggleModal('vaccine-action-modal')" [vaccine_to_edit]="vaccine_to_edit"></app-vaccine-action-modal>
</div>

<div *ngIf="historyModal">
  <app-history-modal (toggleModal)="toggleModal('history-modal')"></app-history-modal>
</div>

<div *ngIf="famHistoryModal">
  <app-fam-history-modal (toggleModal)="toggleModal('fam-history-modal')"></app-fam-history-modal>
</div>

<div *ngIf="lifestyleModal">
  <app-lifestyle-modal (toggleModal)="toggleModal('lifestyle-modal')"></app-lifestyle-modal>
</div>

<div *ngIf="deathRecordModal">
  <app-death-modal (toggleModal)="toggleModal('death-modal')"></app-death-modal>
</div>

<div *ngIf="moduleModal">
  <app-module-modal (toggleModal)="toggleModal('module-modal')" [patient_info]="patient_info" ></app-module-modal>
</div>

<div *ngIf="philhealthModal">
  <app-philhealth-modal (toggleModal)="toggleModal('philhealth-modal')" [patient_info]="patient_info" ></app-philhealth-modal>
</div>

<div *ngIf="philhealthListModal">
  <app-philhealth-list-modal (toggleModal)="toggleModal('philhealth-list-modal')" [patient_info]="patient_info" ></app-philhealth-list-modal>
</div>

