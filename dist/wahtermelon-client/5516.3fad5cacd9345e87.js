"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[5516],{8588:(C,E,d)=>{d.d(E,{i:()=>qe});var g=d(614),c=d(5383),e=d(4438),b=d(3318),y=d(5794),o=d(177),F=d(60),M=d(2101),k=d(1470);function R(a,r){if(1&a&&(e.j41(0,"div",11),e.EFF(1),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.SpI(" ",t.pbef_err_message," ")}}let u=(()=>{class a{constructor(){this.toggleModal=new e.bkB}closeModal(){this.toggleModal.emit("eclaims_guide")}static{this.\u0275fac=function(s){return new(s||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-eclaims-pdf"]],outputs:{toggleModal:"toggleModal"},decls:13,vars:1,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-4xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-orange-400"],[1,"text-sm","font-bold","text-white"],[1,"flex","justify-center","overflow-y-auto","h-[600px]","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],["src",e.wXG`assets/docs/eclaims_guide.pdf`,"width","100%","height","100%",2,"border","none"],["class","flex justify-center my-20",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-gray-400",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"flex","justify-center","my-20"]],template:function(s,i){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e.EFF(5," ECLAIMS GUIDE "),e.k0s()(),e.j41(6,"div",5),e.nrm(7,"iframe",6),e.k0s(),e.DNE(8,R,2,1,"div",7),e.j41(9,"div",8)(10,"button",9),e.bIt("click",function(){return i.closeModal()}),e.EFF(11,"Close"),e.k0s()()()()(),e.nrm(12,"div",10)),2&s&&(e.R7$(8),e.Y8G("ngIf",i.pbef_err_message))},encapsulation:2})}}return a})();var p=d(1410),f=d(345),n=d(9417);function w(a,r){if(1&a&&e.nrm(0,"embed",14),2&a){const t=e.XpG(2);e.Y8G("src",t.pbef_result,e.f$h)}}function j(a,r){if(1&a&&(e.j41(0,"option",22),e.EFF(1),e.k0s()),2&a){const t=r.$implicit;e.Y8G("ngValue",t),e.R7$(),e.Lme("",t.code," - ",t.caserate_code,"")}}function I(a,r){if(1&a){const t=e.RV6();e.j41(0,"div",15)(1,"div",16)(2,"label",17),e.EFF(3,"Caserate"),e.k0s(),e.j41(4,"select",18),e.mxI("ngModelChange",function(i){e.eBV(t);const l=e.XpG(2);return e.DH7(l.caserate_field,i)||(l.caserate_field=i),e.Njj(i)}),e.DNE(5,j,2,3,"option",19),e.k0s()(),e.j41(6,"div",20)(7,"button",21),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.selectCaserate())}),e.EFF(8," Select "),e.k0s()()()}if(2&a){const t=e.XpG(2);e.R7$(4),e.R50("ngModel",t.caserate_field),e.R7$(),e.Y8G("ngForOf",t.caserate_list)}}function T(a,r){if(1&a&&(e.j41(0,"div",23)(1,"div",24),e.nrm(2,"fa-icon",25),e.k0s(),e.j41(3,"div",26),e.EFF(4," Checking PhilHealth Claims Eligibility... "),e.k0s()()),2&a){const t=e.XpG(2);e.R7$(2),e.Y8G("icon",t.faCircleNotch)}}function G(a,r){if(1&a&&(e.j41(0,"div",10),e.DNE(1,w,1,1,"embed",11)(2,I,9,2,"div",12)(3,T,5,1,"div",13),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.show_pdf&&t.selected_caserate&&t.show_form),e.R7$(),e.Y8G("ngIf",!t.selected_caserate),e.R7$(),e.Y8G("ngIf",t.selected_caserate&&!t.show_form)}}function A(a,r){if(1&a&&(e.j41(0,"div",27),e.EFF(1),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.SpI(" ",t.pbef_err_message," ")}}let D=(()=>{class a{exportP(){let t="PBEF_"+this.patient.last_name.toUpperCase()+"_"+this.patient.first_name.toUpperCase()+"_"+(0,o.Yq)(new Date,"yyyyMMdd","en","Asia/Manila");this.pdf_exported=!0,this.exportAsService.save(this.exportAsPdf,t).subscribe(()=>{this.pdf_exported=!1})}selectCaserate(){this.selected_caserate=this.caserate_field,this.getParams()}getParams(){switch(this.show_form=!1,this.program_name){case"ab":this.paramsAb();break;case"tb":this.paramsTb();break;case"cc":this.paramsCc();break;case"mc":this.paramsMc();break;case"fp":this.paramsFp();break;default:{console.log(this.selected_case);let t=(0,o.Yq)(this.selected_caserate.caserate_date,"yyyy-MM-dd","en","Asia/Manila");this.getPbef(t)}}}pbefGenerationError(t){this.toastr.error(t,"PBEF"),this.closeModal()}paramsFp(){if(this.selected_caserate.caserate_date){let t=(0,o.Yq)(this.selected_caserate.caserate_date,"yyyy-MM-dd","en","Asia/Manila");this.getPbef(t)}else this.pbefGenerationError("Caserate date is not set for this case")}paramsAb(){if(this.selected_case.abPostExposure.day0_date){let t=(0,o.Yq)(this.selected_case.abPostExposure.day0_date,"yyyy-MM-dd","en","Asia/Manila");this.getPbef(t)}else this.pbefGenerationError("Day 0 date is not set for this case")}paramsCc(){if(this.selected_case.admission_date){let t=(0,o.Yq)(this.selected_case.admission_date,"MM-dd-yyyy","en","Asia/Manila");this.getPbef(t)}else this.pbefGenerationError("Admission date is not set for this case")}paramsMc(){let t;"ANC01"===this.selected_caserate.code||"ANC02"===this.selected_caserate.code?this.selected_case.prenatal_visit[0].prenatal_date?t=(0,o.Yq)(new Date(this.selected_case.prenatal_visit[0].prenatal_date),"MM-dd-yyyy","en","Asia/Manila"):this.pbefGenerationError("Prenatal date is not set for this case"):this.selected_case.post_registration.admission_date?t=(0,o.Yq)(this.selected_case.post_registration.admission_date,"MM-dd-yyyy","en","Asia/Manila"):this.pbefGenerationError("Admission date is not set for this case"),this.getPbef(t)}paramsTb(){let t;"89222"===this.selected_caserate.code?this.selected_case.case_holding.continuation_start?(t=this.selected_case.case_holding.continuation_start,this.getPbef(t)):this.pbefGenerationError("Continuation start date is not set for this case"):this.selected_case.case_holding.treatment_start?(t=this.selected_case.case_holding.treatment_start,this.getPbef(t)):this.pbefGenerationError("Treatment start date is not set for this case")}getPbef(t,s){let i=(0,o.Yq)(t,"MM-dd-yyyy","en","Asia/Manila");this.show_form=!1;let l={program_code:"cc"===this.program_name||"fp"===this.program_name?"mc":this.program_name,member_pin:"DD"===this.patient_philhealth.membership_type_id?this.patient_philhealth.member_pin:this.patient_philhealth.philhealth_id,member_last_name:"DD"===this.patient_philhealth.membership_type_id?this.patient_philhealth.member_last_name.toUpperCase():this.patient.last_name.toUpperCase(),member_first_name:"DD"===this.patient_philhealth.membership_type_id?this.patient_philhealth.member_first_name.toUpperCase():this.patient.first_name.toUpperCase(),member_middle_name:"DD"===this.patient_philhealth.membership_type_id?this.patient_philhealth.member_middle_name.toUpperCase():this.patient.middle_name.toUpperCase(),member_suffix_name:"DD"===this.patient_philhealth.membership_type_id?"NA"===this.patient_philhealth.member_suffix_name?"":this.patient_philhealth.member_suffix_name.toUpperCase():"NA"===this.patient.suffix_name?"":this.patient.suffix_name.toUpperCase(),member_birthdate:(0,o.Yq)("DD"===this.patient_philhealth.membership_type_id?this.patient_philhealth.member_birthdate:this.patient.birthdate,"MM-dd-yyyy","en","Asia/Manila"),member_gender:"DD"===this.patient_philhealth?this.patient_philhealth.member_gender:this.patient.gender,patient_is:"DD"===this.patient_philhealth.membership_type_id?this.patient_philhealth.member_relation_id:"M",admission_date:i,patient_pin:this.patient_philhealth.philhealth_id,patient_last_name:this.patient.last_name.toUpperCase(),patient_first_name:this.patient.first_name.toUpperCase(),patient_middle_name:this.patient.middle_name.toUpperCase(),patient_suffix_name:"NA"===this.patient.suffix_name?"":this.patient.suffix_name.toUpperCase(),patient_gender:this.patient.gender,patient_birthdate:(0,o.Yq)(this.patient.birthdate,"MM-dd-yyyy","en","Asia/Manila"),membership_type:this.patient_philhealth.membership_type_id};this.http.post("eclaims/check-claim-eligibility",l).subscribe({next:_=>{!1===_.success?(this.toastr.error(_.message,"PBEF"),this.closeModal()):this.generatePBEF(_)},error:_=>{this.pbef_err_message=_.error.message,console.log(_)}})}generatePBEF(t){this.http.post("eclaims/generate-pbef",{program_code:"cc"===this.program_name||"fp"===this.program_name?"mc":this.program_name,referenceno:t.referenceno}).subscribe({next:i=>{this.pbef_result=this.sanitizer.bypassSecurityTrustResourceUrl("data:application/pdf;base64,"+i.result),this.show_pdf=!0,this.show_form=!0},error:i=>{console.log(i.error.message)}})}closeModal(){this.toggleModal.emit("pbef")}constructor(t,s,i,l){this.http=t,this.toastr=s,this.exportAsService=i,this.sanitizer=l,this.toggleModal=new e.bkB,this.faFilePdf=c.O_q,this.faCircleNotch=c.s4k,this.pbef_result=null,this.pdf_exported=!1,this.show_form=!1,this.exportAsPdf={type:"pdf",elementIdOrContent:"mainForm",options:{image:{type:"jpeg",quality:1},html2canvas:{scale:3},margin:[1,1,1,1],pagebreak:{mode:["avoid-all","css","legacy"],before:["#medForm2","#medForm3"]},jsPDF:{orientation:"portrait",format:"a4",precision:16}}},this.show_pdf=!1}ngOnInit(){console.log(this.caserate_list),1===this.caserate_list.length?(this.selected_caserate=this.caserate_list[0],this.getParams()):this.getParams()}static{this.\u0275fac=function(s){return new(s||a)(e.rXU(b.k),e.rXU(y.tw),e.rXU(p.a),e.rXU(f.up))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-pbef"]],inputs:{selected_case:"selected_case",patient:"patient",patient_philhealth:"patient_philhealth",program_name:"program_name",caserate_list:"caserate_list",program_creds:"program_creds"},outputs:{toggleModal:"toggleModal"},standalone:!1,decls:12,vars:2,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-4xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-orange-400"],[1,"text-sm","font-bold","text-white"],["class","flex justify-center overflow-y-auto h-[600px] scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-100",4,"ngIf"],["class","flex justify-center my-20",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-gray-400",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"flex","justify-center","overflow-y-auto","h-[600px]","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],["type","application/pdf","class","w-[210mm] h-full",3,"src",4,"ngIf"],["class","flex w-2/3 mx-auto",4,"ngIf"],["class","flex flex-col justify-center my-20",4,"ngIf"],["type","application/pdf",1,"w-[210mm]","h-full",3,"src"],[1,"flex","w-2/3","mx-auto"],[1,"p-2","w-1/2"],["for","caserate_field"],["name","caserate_field","id","caserate_field",1,"input",3,"ngModelChange","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"mt-8"],["type","button",1,"btn-save",3,"click"],[3,"ngValue"],[1,"flex","flex-col","justify-center","my-20"],[1,"flex","justify-center","text-blue-500"],["animation","spin",3,"icon"],[1,"flex","justify-center"],[1,"flex","justify-center","my-20"]],template:function(s,i){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e.EFF(5," Eligibility "),e.k0s()(),e.DNE(6,G,4,3,"div",5)(7,A,2,1,"div",6),e.j41(8,"div",7)(9,"button",8),e.bIt("click",function(){return i.closeModal()}),e.EFF(10,"Close"),e.k0s()()()()(),e.nrm(11,"div",9)),2&s&&(e.R7$(6),e.Y8G("ngIf",!i.pbef_err_message),e.R7$(),e.Y8G("ngIf",i.pbef_err_message))},dependencies:[o.Sq,o.bT,F.aY,n.xH,n.y7,n.wz,n.BC,n.vS],encapsulation:2})}}return a})();function $(a,r){if(1&a&&(e.j41(0,"div",14),e.nrm(1,"img",15),e.j41(2,"p",16),e.EFF(3),e.nI1(4,"slice"),e.k0s(),e.j41(5,"p",17),e.EFF(6),e.nI1(7,"slice"),e.k0s(),e.j41(8,"p",18),e.EFF(9),e.nI1(10,"slice"),e.k0s(),e.j41(11,"p",19),e.EFF(12),e.k0s(),e.j41(13,"p",20),e.EFF(14),e.k0s(),e.j41(15,"p",21),e.EFF(16),e.k0s(),e.j41(17,"p",22),e.EFF(18),e.k0s(),e.j41(19,"p",23),e.EFF(20),e.nI1(21,"date"),e.k0s(),e.j41(22,"p",24),e.EFF(23),e.nI1(24,"date"),e.k0s(),e.j41(25,"p",25),e.EFF(26),e.nI1(27,"date"),e.k0s()()),2&a){const t=e.XpG();e.R7$(3),e.JRh(e.brH(4,10,t.patient_philhealth.philhealth_id,0,2)),e.R7$(3),e.JRh(e.brH(7,14,t.patient_philhealth.philhealth_id,3,11)),e.R7$(3),e.JRh(e.brH(10,18,t.patient_philhealth.philhealth_id,11,12)),e.R7$(3),e.JRh("MM"===t.patient_philhealth.membership_type_id?t.patient.last_name:t.patient_philhealth.member_last_name),e.R7$(2),e.JRh("MM"===t.patient_philhealth.membership_type_id?t.patient.first_name:t.patient_philhealth.member_first_name),e.R7$(2),e.JRh("MM"===t.patient_philhealth.membership_type_id?"NA"===t.patient.suffix_name?"":t.patient.suffix_name:"NA"===t.patient_philhealth.suffix_name?"":t.patient_philhealth.suffix_name),e.R7$(2),e.JRh("MM"===t.patient_philhealth.membership_type_id?t.patient.middle_name:t.patient_philhealth.member_middle_name),e.R7$(2),e.JRh(e.i5U(21,22,"MM"===t.patient_philhealth.membership_type_id?t.patient.birthdate:t.patient_philhealth.member_birthdate,"MM")),e.R7$(3),e.JRh(e.i5U(24,25,"MM"===t.patient_philhealth.membership_type_id?t.patient.birthdate:t.patient_philhealth.member_birthdate,"dd")),e.R7$(3),e.JRh(e.i5U(27,28,"MM"===t.patient_philhealth.membership_type_id?t.patient.birthdate:t.patient_philhealth.member_birthdate,"yyyy"))}}function Y(a,r){if(1&a&&(e.j41(0,"div",26)(1,"div",27),e.nrm(2,"fa-icon",28),e.k0s(),e.j41(3,"div",29),e.EFF(4," Checking PhilHealth Claims Eligibility... "),e.k0s()()),2&a){const t=e.XpG();e.R7$(2),e.Y8G("icon",t.faCircleNotch)}}let N=(()=>{class a{exportP(){this.pdf_exported=!0,this.exportAsService.save(this.exportAsPdf,"GBV Medical").subscribe(()=>{this.pdf_exported=!1})}getCreds(){this.http.get("settings/philhealth-credentials").subscribe({next:s=>{console.log(s),this.program_creds=s.data[0]},error:s=>console.log(s)})}closeModal(){this.toggleModal.emit("cf1")}constructor(t,s,i){this.http=t,this.toastr=s,this.exportAsService=i,this.toggleModal=new e.bkB,this.faFilePdf=g.O_q,this.faCircleNotch=c.s4k,this.program_code="mc",this.pdf_exported=!1,this.show_form=!0,this.exportAsPdf={type:"pdf",elementIdOrContent:"mainForm",options:{image:{type:"jpeg",quality:1},html2canvas:{scale:3},margin:[1,1,1,1],pagebreak:{mode:["avoid-all","css","legacy"],before:["#medForm2","#medForm3"]},jsPDF:{orientation:"portrait",format:"a4",precision:16}}}}ngOnInit(){console.log(this.patient)}static{this.\u0275fac=function(s){return new(s||a)(e.rXU(b.k),e.rXU(y.tw),e.rXU(p.a))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-cf1"]],inputs:{selected_case:"selected_case",patient:"patient",program_creds:"program_creds",patient_philhealth:"patient_philhealth"},outputs:{toggleModal:"toggleModal"},standalone:!1,decls:16,vars:4,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-4xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-orange-400"],[1,"text-sm","font-bold","text-white"],[1,"bg-white","text-orange-400","rounded-md","px-2","py-1",3,"click","disabled"],[3,"icon"],[1,"overflow-y-auto","h-[500px]","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],["src","./assets/img/philhealth-cf1.jpg","hidden",""],["class","relative text-xs w-[215.9mm] h-[330.2mm]","id","mainForm",4,"ngIf"],["class","grid grid-cols-1 my-20",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-gray-400",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],["id","mainForm",1,"relative","text-xs","w-[215.9mm]","h-[330.2mm]"],["src","./assets/img/philhealth-cf1.jpg"],[1,"absolute","top-[75.4mm]","left-[92.5mm]","tracking-[0.92em]"],[1,"absolute","top-[75.4mm]","left-[103.8mm]","tracking-[0.92em]"],[1,"absolute","top-[75.8mm]","left-[145mm]","tracking-[0.93em]"],[1,"absolute","top-[85.5mm]","left-[10mm]"],[1,"absolute","top-[85.5mm]","left-[50mm]"],[1,"absolute","top-[85.5mm]","left-[95mm]"],[1,"absolute","top-[85.5mm]","left-[128mm]"],[1,"absolute","top-[85.5mm]","left-[163mm]","tracking-[0.87em]"],[1,"absolute","top-[85.5mm]","left-[174mm]","tracking-[0.87em]"],[1,"absolute","top-[85.5mm]","left-[184.7mm]","tracking-[0.86em]"],[1,"grid","grid-cols-1","my-20"],[1,"flex","justify-center","text-blue-500"],["animation","spin",3,"icon"],[1,"flex","justify-center"]],template:function(s,i){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e.EFF(5," Claim Form 1 "),e.k0s(),e.j41(6,"button",5),e.bIt("click",function(){return i.exportP()}),e.nrm(7,"fa-icon",6),e.k0s()(),e.j41(8,"div",7),e.nrm(9,"img",8),e.DNE(10,$,28,31,"div",9)(11,Y,5,1,"div",10),e.k0s(),e.j41(12,"div",11)(13,"button",12),e.bIt("click",function(){return i.closeModal()}),e.EFF(14,"Close"),e.k0s()()()()(),e.nrm(15,"div",13)),2&s&&(e.R7$(6),e.Y8G("disabled",i.pdf_exported),e.R7$(),e.Y8G("icon",i.faFilePdf),e.R7$(3),e.Y8G("ngIf",i.show_form),e.R7$(),e.Y8G("ngIf",!i.show_form))},dependencies:[o.bT,F.aY,o.P9,o.vh],encapsulation:2})}}return a})();function J(a,r){if(1&a&&e.nrm(0,"fa-icon",17),2&a){const t=e.XpG();e.Y8G("icon",t.faCircleNotch)}}function V(a,r){if(1&a&&(e.j41(0,"option",25),e.EFF(1),e.k0s()),2&a){const t=r.$implicit;e.Y8G("ngValue",t),e.R7$(),e.Lme("",t.code," - ",t.caserate_code,"")}}function q(a,r){if(1&a){const t=e.RV6();e.j41(0,"div",18)(1,"div",19)(2,"label",20),e.EFF(3,"Caserate"),e.k0s(),e.j41(4,"select",21),e.mxI("ngModelChange",function(i){e.eBV(t);const l=e.XpG();return e.DH7(l.caserate_field,i)||(l.caserate_field=i),e.Njj(i)}),e.DNE(5,V,2,3,"option",22),e.k0s()(),e.j41(6,"div",23)(7,"button",24),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.selectCaserate())}),e.EFF(8," Select "),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(4),e.R50("ngModel",t.caserate_field),e.R7$(),e.Y8G("ngForOf",t.caserate_list)}}function U(a,r){1&a&&(e.j41(0,"span",70),e.EFF(1,"\u2714"),e.k0s())}function X(a,r){1&a&&(e.j41(0,"span",71),e.EFF(1,"\u2714"),e.k0s())}function S(a,r){1&a&&(e.j41(0,"span",72),e.EFF(1,"\u2714"),e.k0s())}function O(a,r){1&a&&(e.j41(0,"span",73),e.EFF(1,"\u2714"),e.k0s())}function B(a,r){if(1&a&&(e.j41(0,"div")(1,"span",74),e.EFF(2),e.nI1(3,"date"),e.k0s(),e.j41(4,"span",75),e.EFF(5),e.nI1(6,"date"),e.k0s(),e.j41(7,"span",76),e.EFF(8),e.nI1(9,"date"),e.k0s(),e.j41(10,"span",77),e.EFF(11),e.nI1(12,"date"),e.k0s()()),2&a){const t=e.XpG(3);e.R7$(2),e.JRh(e.i5U(3,4,t.eclaimsForm.value.pCheckUpDate1,"MM-dd-yyyy")),e.R7$(3),e.JRh(e.i5U(6,7,t.eclaimsForm.value.pCheckUpDate2,"MM-dd-yyyy")),e.R7$(3),e.JRh(e.i5U(9,10,t.eclaimsForm.value.pCheckUpDate3,"MM-dd-yyyy")),e.R7$(3),e.JRh(e.i5U(12,13,t.eclaimsForm.value.pCheckUpDate4,"MM-dd-yyyy"))}}function H(a,r){if(1&a&&(e.j41(0,"div")(1,"span",78),e.EFF(2),e.nI1(3,"date"),e.k0s(),e.j41(4,"span",79),e.EFF(5),e.nI1(6,"date"),e.k0s(),e.j41(7,"span",80),e.EFF(8),e.nI1(9,"date"),e.k0s(),e.j41(10,"span",81),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"span",82),e.EFF(14),e.nI1(15,"date"),e.k0s()()),2&a){const t=e.XpG(3);e.R7$(2),e.JRh(e.i5U(3,5,t.eclaimsForm.value.pDay0ARV,"MM-dd-yyyy")),e.R7$(3),e.JRh(e.i5U(6,8,t.eclaimsForm.value.pDay3ARV,"MM-dd-yyyy")),e.R7$(3),e.JRh(e.i5U(9,11,t.eclaimsForm.value.pDay7ARV,"MM-dd-yyyy")),e.R7$(3),e.JRh(e.i5U(12,14,t.eclaimsForm.value.pRIG,"MM-dd-yyyy")),e.R7$(3),e.JRh(e.i5U(15,17,t.eclaimsForm.value.pABPOthers,"MM-dd-yyyy"))}}function L(a,r){1&a&&(e.j41(0,"span",85),e.EFF(1,"\u2714"),e.k0s())}function z(a,r){1&a&&(e.j41(0,"span",86),e.EFF(1,"\u2714"),e.k0s())}function W(a,r){if(1&a&&(e.j41(0,"div"),e.DNE(1,L,2,0,"span",83)(2,z,2,0,"span",84),e.k0s()),2&a){const t=e.XpG(3);e.R7$(),e.Y8G("ngIf","89221"===t.eclaimsForm.value.code),e.R7$(),e.Y8G("ngIf","89222"===t.eclaimsForm.value.code)}}function Q(a,r){1&a&&(e.j41(0,"div")(1,"span",87),e.EFF(2,"\u2714"),e.k0s(),e.j41(3,"span",88),e.EFF(4,"\u2714"),e.k0s(),e.j41(5,"span",89),e.EFF(6,"\u2714"),e.k0s(),e.j41(7,"span",90),e.EFF(8,"\u2714"),e.k0s(),e.j41(9,"span",91),e.EFF(10,"\u2714"),e.k0s(),e.j41(11,"span",92),e.EFF(12,"\u2714"),e.k0s(),e.j41(13,"span",93),e.EFF(14,"\u2714"),e.k0s(),e.j41(15,"span",94),e.EFF(16,"\u2714"),e.k0s(),e.j41(17,"span",95),e.EFF(18,"\u2714"),e.k0s()())}function K(a,r){if(1&a&&(e.j41(0,"div")(1,"span",96),e.EFF(2,"\u2714"),e.k0s(),e.j41(3,"span",97),e.EFF(4),e.k0s(),e.j41(5,"span",98),e.EFF(6),e.k0s(),e.j41(7,"span",99),e.EFF(8),e.k0s()()),2&a){const t=e.XpG(3);e.R7$(4),e.JRh("PHP "+t.eclaimsForm.value.hci_fee),e.R7$(2),e.JRh("PHP "+t.eclaimsForm.value.prof_fee),e.R7$(2),e.JRh("PHP "+t.eclaimsForm.value.caserate_fee)}}function Z(a,r){if(1&a&&(e.j41(0,"div")(1,"span",100),e.EFF(2,"\u2714"),e.k0s(),e.j41(3,"span",101),e.EFF(4),e.k0s(),e.j41(5,"span",102),e.EFF(6),e.k0s(),e.j41(7,"span",103),e.EFF(8),e.k0s(),e.j41(9,"span",104),e.EFF(10),e.k0s(),e.j41(11,"span",105),e.EFF(12),e.k0s(),e.j41(13,"span",106),e.EFF(14),e.k0s(),e.j41(15,"span",107),e.EFF(16),e.k0s(),e.j41(17,"span",108),e.EFF(18),e.k0s(),e.j41(19,"span",109),e.EFF(20),e.k0s(),e.j41(21,"span",110),e.EFF(22),e.k0s(),e.j41(23,"span",111),e.EFF(24),e.k0s(),e.j41(25,"span",112),e.EFF(26),e.k0s(),e.j41(27,"span",113),e.EFF(28),e.k0s(),e.j41(29,"span",114),e.EFF(30),e.k0s()()),2&a){const t=e.XpG(3);e.R7$(4),e.JRh("PHP "+t.eclaimsForm.value.hci_pTotalActualCharges),e.R7$(2),e.JRh("PHP "+t.eclaimsForm.value.hci_pDiscount),e.R7$(2),e.JRh("PHP "+t.eclaimsForm.value.hci_pPhilhealthBenefit),e.R7$(2),e.JRh(t.eclaimsForm.value.hci_pTotalAmount),e.R7$(2),e.JRh("PHP "+t.eclaimsForm.value.prof_pTotalActualCharges),e.R7$(2),e.JRh("PHP "+t.eclaimsForm.value.prof_pDiscount),e.R7$(2),e.JRh("PHP "+t.eclaimsForm.value.prof_pPhilhealthBenefit),e.R7$(2),e.JRh(t.eclaimsForm.value.prof_pTotalAmount),e.R7$(2),e.JRh(t.eclaimsForm.value.meds_flag?"\u2714":""),e.R7$(2),e.JRh(t.eclaimsForm.value.meds_flag?"":"\u2714"),e.R7$(2),e.JRh(t.eclaimsForm.value.meds_pDMSTotalAmount),e.R7$(2),e.JRh(t.eclaimsForm.value.meds_pExaminations_flag?"\u2714":""),e.R7$(2),e.JRh(t.eclaimsForm.value.meds_pExaminations_flag?"":"\u2714"),e.R7$(2),e.JRh(t.eclaimsForm.value.meds_pExamTotalAmount)}}function ee(a,r){if(1&a&&(e.j41(0,"div",30),e.nrm(1,"img",31)(2,"img",32),e.j41(3,"span",33),e.EFF(4),e.k0s(),e.j41(5,"span",34),e.EFF(6),e.k0s(),e.j41(7,"span",35),e.EFF(8),e.k0s(),e.j41(9,"span",36),e.EFF(10),e.k0s(),e.j41(11,"span",37),e.EFF(12),e.k0s(),e.j41(13,"span",38),e.EFF(14),e.k0s(),e.j41(15,"span",39),e.EFF(16),e.k0s(),e.j41(17,"span",40),e.EFF(18),e.k0s(),e.j41(19,"span",41),e.EFF(20),e.k0s(),e.j41(21,"span",42),e.EFF(22),e.nI1(23,"date"),e.k0s(),e.j41(24,"span",43),e.EFF(25),e.nI1(26,"date"),e.k0s(),e.j41(27,"span",44),e.EFF(28),e.nI1(29,"date"),e.k0s(),e.j41(30,"span",45),e.EFF(31),e.nI1(32,"slice"),e.k0s(),e.j41(33,"span",46),e.EFF(34),e.nI1(35,"slice"),e.k0s(),e.DNE(36,U,2,0,"span",47),e.nI1(37,"slice"),e.DNE(38,X,2,0,"span",48),e.nI1(39,"slice"),e.j41(40,"span",49),e.EFF(41),e.nI1(42,"date"),e.k0s(),e.j41(43,"span",50),e.EFF(44),e.nI1(45,"date"),e.k0s(),e.j41(46,"span",51),e.EFF(47),e.nI1(48,"date"),e.k0s(),e.j41(49,"span",52),e.EFF(50),e.nI1(51,"slice"),e.k0s(),e.j41(52,"span",53),e.EFF(53),e.nI1(54,"slice"),e.k0s(),e.DNE(55,S,2,0,"span",54),e.nI1(56,"slice"),e.DNE(57,O,2,0,"span",55),e.nI1(58,"slice"),e.j41(59,"span",56),e.EFF(60,"\u2714"),e.k0s(),e.j41(61,"span",57),e.EFF(62),e.k0s(),e.j41(63,"span",58),e.EFF(64),e.k0s(),e.j41(65,"span",59),e.EFF(66),e.k0s(),e.j41(67,"span",60),e.EFF(68),e.nI1(69,"date"),e.k0s(),e.j41(70,"span",61),e.EFF(71),e.k0s(),e.DNE(72,B,13,16,"div",28)(73,H,16,20,"div",28)(74,W,3,2,"div",28)(75,Q,19,0,"div",28),e.j41(76,"span",62),e.EFF(77),e.nI1(78,"slice"),e.k0s(),e.j41(79,"span",63),e.EFF(80),e.nI1(81,"slice"),e.k0s(),e.j41(82,"span",64),e.EFF(83),e.nI1(84,"slice"),e.k0s(),e.j41(85,"span",65),e.EFF(86),e.k0s(),e.j41(87,"span",66),e.EFF(88),e.nI1(89,"date"),e.k0s(),e.j41(90,"span",67),e.EFF(91),e.nI1(92,"date"),e.k0s(),e.j41(93,"span",68),e.EFF(94),e.nI1(95,"date"),e.k0s(),e.j41(96,"span",69),e.EFF(97,"\u2714"),e.k0s(),e.DNE(98,K,9,3,"div",28)(99,Z,31,14,"div",28),e.k0s()),2&a){const t=e.XpG(2);e.R7$(4),e.JRh(null==t.program_creds?null:t.program_creds.accreditation_number),e.R7$(2),e.JRh(null==t.program_creds?null:t.program_creds.facility_name),e.R7$(2),e.JRh(null==t.facility?null:t.facility.barangay.name),e.R7$(2),e.JRh(null==t.facility?null:t.facility.municipality.name),e.R7$(2),e.JRh(null==t.facility?null:t.facility.province.name),e.R7$(2),e.JRh(null==t.patient?null:t.patient.last_name),e.R7$(2),e.JRh(null==t.patient?null:t.patient.first_name),e.R7$(2),e.JRh("NA"!==(null==t.patient?null:t.patient.suffix_name)?null==t.patient?null:t.patient.suffix_name:""),e.R7$(2),e.JRh(null==t.patient?null:t.patient.middle_name),e.R7$(2),e.JRh(e.i5U(23,44,t.eclaimsForm.value.admission_date,"MM")),e.R7$(3),e.JRh(e.i5U(26,47,t.eclaimsForm.value.admission_date,"dd")),e.R7$(3),e.JRh(e.i5U(29,50,t.eclaimsForm.value.admission_date,"yyyy")),e.R7$(3),e.JRh(e.brH(32,53,t.eclaimsForm.value.admission_time,0,2)),e.R7$(3),e.JRh(e.brH(35,57,t.eclaimsForm.value.admission_time,3,5)),e.R7$(2),e.Y8G("ngIf","AM"===e.brH(37,61,t.eclaimsForm.value.admission_time,5,7)),e.R7$(2),e.Y8G("ngIf","PM"===e.brH(39,65,t.eclaimsForm.value.admission_time,5,7)),e.R7$(3),e.JRh(e.i5U(42,69,t.eclaimsForm.value.discharge_date,"MM")),e.R7$(3),e.JRh(e.i5U(45,72,t.eclaimsForm.value.discharge_date,"dd")),e.R7$(3),e.JRh(e.i5U(48,75,t.eclaimsForm.value.discharge_date,"yyyy")),e.R7$(3),e.JRh(e.brH(51,78,t.eclaimsForm.value.discharge_time,0,2)),e.R7$(3),e.JRh(e.brH(54,82,t.eclaimsForm.value.discharge_time,3,5)),e.R7$(2),e.Y8G("ngIf","AM"===e.brH(56,86,t.eclaimsForm.value.discharge_time,5,7)),e.R7$(2),e.Y8G("ngIf","PM"===e.brH(58,90,t.eclaimsForm.value.discharge_time,5,7)),e.R7$(5),e.JRh(t.eclaimsForm.value.admit_dx),e.R7$(2),e.JRh(t.eclaimsForm.value.discharge_dx),e.R7$(2),e.JRh(t.eclaimsForm.value.code),e.R7$(2),e.JRh(e.i5U(69,94,t.eclaimsForm.value.attendant_sign_date,"MM-dd-yyyy")),e.R7$(3),e.JRh(t.eclaimsForm.value.code),e.R7$(),e.Y8G("ngIf","mc"===t.program_name),e.R7$(),e.Y8G("ngIf","ab"===t.program_name),e.R7$(),e.Y8G("ngIf","tb"===t.program_name),e.R7$(),e.Y8G("ngIf","cc"===t.program_name),e.R7$(2),e.JRh(e.brH(78,97,t.eclaimsForm.value.attendant_accreditation_code,0,4)),e.R7$(3),e.JRh(e.brH(81,101,t.eclaimsForm.value.attendant_accreditation_code,5,12)),e.R7$(3),e.JRh(e.brH(84,105,t.eclaimsForm.value.attendant_accreditation_code,13,14)),e.R7$(3),e.LHq("",t.eclaimsForm.value.attendant_last_name,", ",t.eclaimsForm.value.attendant_first_name," ",t.eclaimsForm.value.attendant_middle_name," ","NA"!==t.eclaimsForm.value.attendant_suffix_name?t.eclaimsForm.value.attendant_suffix_name:"",""),e.R7$(2),e.JRh(e.i5U(89,109,t.eclaimsForm.value.attendant_sign_date,"MM")),e.R7$(3),e.JRh(e.i5U(92,112,t.eclaimsForm.value.attendant_sign_date,"dd")),e.R7$(3),e.JRh(e.i5U(95,115,t.eclaimsForm.value.attendant_sign_date,"yyyy")),e.R7$(4),e.Y8G("ngIf",t.eclaimsForm.value.enough_benefit_flag),e.R7$(),e.Y8G("ngIf",!t.eclaimsForm.value.enough_benefit_flag)}}function te(a,r){if(1&a&&(e.j41(0,"li",118),e.EFF(1),e.k0s()),2&a){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.key," is required ")}}function ae(a,r){if(1&a&&(e.j41(0,"ul"),e.DNE(1,te,2,1,"li",117),e.k0s()),2&a){const t=r.$implicit;e.R7$(),e.Y8G("ngIf","INVALID"===t.value.status)}}function ie(a,r){if(1&a&&(e.j41(0,"div")(1,"div",115),e.DNE(2,ae,2,1,"ul",116),e.nI1(3,"keyvalue"),e.k0s()()),2&a){const t=e.XpG(2);e.R7$(2),e.Y8G("ngForOf",e.bMT(3,1,t.eclaimsForm.controls))}}function se(a,r){if(1&a&&(e.j41(0,"ul")(1,"li",118),e.EFF(2),e.nI1(3,"date"),e.k0s()()),2&a){const t=r.$implicit;e.R7$(2),e.Lme(" Trimester ",t.trimester,": ",e.i5U(3,2,t.prenatal_date,"MM-dd-yyyy")," ")}}function ne(a,r){if(1&a&&(e.j41(0,"div")(1,"div",115),e.EFF(2," Maternal care visits invalid or incomplete "),e.DNE(3,se,4,5,"ul",116),e.k0s()()),2&a){const t=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",null==t.selected_case?null:t.selected_case.prenatal_visit)}}function le(a,r){if(1&a&&(e.j41(0,"div",119)(1,"div",120),e.nrm(2,"fa-icon",121),e.k0s(),e.j41(3,"div",122),e.EFF(4," Checking PhilHealth Claims CF2... "),e.k0s()()),2&a){const t=e.XpG(2);e.R7$(2),e.Y8G("icon",t.faCircleNotch)}}function oe(a,r){if(1&a&&(e.j41(0,"div",26),e.DNE(1,ee,100,118,"div",27)(2,ie,4,3,"div",28)(3,ne,4,1,"div",28)(4,le,5,1,"div",29),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.show_form&&t.eclaimsForm.valid),e.R7$(),e.Y8G("ngIf",t.show_form&&t.eclaimsForm.invalid),e.R7$(),e.Y8G("ngIf",t.show_form&&t.mc_error),e.R7$(),e.Y8G("ngIf",!t.show_form)}}let re=(()=>{class a{submitQue(){this.que_form=!0,this.http.post("eclaims/eclaims-xml",this.eclaimsForm.value).subscribe({next:t=>{this.toastr.success("Successfully saved",(this.eclaimsForm.value.transmittalNumber?"Update":"Queue")+" Claim"),this.que_form=!1,this.closeModal()},error:t=>console.log(t)})}paramsTb(){this.f.pTBType.setValidators([n.k0.required]),this.f.pNTPCardNo.setValidators([n.k0.required]);let t={attendant_sign_date:null,pTBType:null,admission_date:null,discharge_date:null};if("89221"===this.selected_caserate.code){if(!this.selected_case.case_holding||!this.selected_case.case_holding.treatment_start||!this.selected_case.case_holding.treatment_end)return void this.showError("Treatment start and end dates are required to proceed.");t.pTBType="I",t.attendant_sign_date=(0,o.Yq)(this.selected_case.case_holding.treatment_start,"yyyy-MM-dd","en","Asia/Manila"),t.admission_date=(0,o.Yq)(this.selected_case.case_holding.treatment_start,"yyyy-MM-dd","en","Asia/Manila");let s=new Date(this.selected_case.case_holding.continuation_start);s.setDate(s.getDate()-1),t.discharge_date=(0,o.Yq)(s,"yyyy-MM-dd","en","Asia/Manila")}if("89222"===this.selected_caserate.code){if(!this.selected_case.case_holding||!this.selected_case.case_holding.continuation_start||!this.selected_case.case_holding.treatment_end)return void this.showError("Continuation start and treatment end dates are required to proceed.");t.pTBType="M",t.attendant_sign_date=(0,o.Yq)(this.selected_case.case_holding.continuation_start,"yyyy-MM-dd","en","Asia/Manila"),t.admission_date=(0,o.Yq)(this.selected_case.case_holding.continuation_start,"yyyy-MM-dd","en","Asia/Manila"),t.discharge_date=(0,o.Yq)(this.selected_case.case_holding.treatment_end,"yyyy-MM-dd","en","Asia/Manila")}this.eclaimsForm.patchValue({attendant_sign_date:t.attendant_sign_date,pTBType:t.pTBType,pNTPCardNo:this.selected_case.case_holding.case_number,admission_date:t.admission_date,admission_time:(0,o.Yq)((new Date).setHours(8),"hh:mma","en","Asia/Manila"),discharge_date:t.discharge_date,discharge_time:(0,o.Yq)((new Date).setHours(8),"hh:mma","en","Asia/Manila")}),this.getCreds()}paramsCc(t){this.f.pEssentialNewbornCare.setValidators([n.k0.required]),this.f.pNewbornHearingScreeningTest.setValidators([n.k0.required]),this.f.pNewbornScreeningTest.setValidators([n.k0.required]),this.f.pFilterCardNo.setValidators([n.k0.required]);let s="N",i=0,l=!1;this.selected_case.consultccdevservices&&Object.entries(this.selected_case.consultccdevservices).forEach(([_,m],h)=>{"HEAR"===m.service_id?s="Y":i+=1}),t&&Object.entries(t).forEach(([_,m],h)=>{if("HEPB"===m.vaccine_id)return l=!0,1}),this.selected_case.admission_date&&this.selected_case.discharge_date?(this.eclaimsForm.patchValue({attendant_sign_date:(0,o.Yq)(this.selected_case.admission_date,"yyyy-MM-dd","en","Asia/Manila"),admission_date:(0,o.Yq)(this.selected_case.admission_date,"yyyy-MM-dd","en","Asia/Manila"),admission_time:(0,o.Yq)(this.selected_case.admission_date,"hh:mma","en","Asia/Manila"),discharge_date:(0,o.Yq)(this.selected_case.discharge_date,"yyyy-MM-dd","en","Asia/Manila"),discharge_time:(0,o.Yq)(this.selected_case.discharge_date,"hh:mma","en","Asia/Manila"),pNewbornHearingScreeningTest:s,pNewbornScreeningTest:this.selected_case.nbs_filter?"Y":"N",pFilterCardNo:this.selected_case.nbs_filter,pEssentialNewbornCare:l?"Y":"N"}),this.getCreds()):this.showError("Admission and Discharge dates are required to proceed.")}paramsAb(){this.f.pDay0ARV.setValidators([n.k0.required]),this.f.pDay3ARV.setValidators([n.k0.required]),this.f.pDay7ARV.setValidators([n.k0.required]),this.f.pRIG.setValidators([n.k0.required]),this.f.pABPOthers.setValidators([n.k0.required]),this.selected_case.abPostExposure.day0_date&&this.selected_case.abPostExposure.day0_date&&this.selected_case.abPostExposure.day7_date&&this.selected_case.abPostExposure.rig_date&&this.selected_case.abPostExposure.other_vacc_date?(this.eclaimsForm.patchValue({pDay0ARV:(0,o.Yq)(this.selected_case.abPostExposure.day0_date,"yyyy-MM-dd","en","Asia/Manila"),pDay3ARV:(0,o.Yq)(this.selected_case.abPostExposure.day3_date,"yyyy-MM-dd","en","Asia/Manila"),pDay7ARV:(0,o.Yq)(this.selected_case.abPostExposure.day7_date,"yyyy-MM-dd","en","Asia/Manila"),pRIG:(0,o.Yq)(this.selected_case.abPostExposure.rig_date,"yyyy-MM-dd","en","Asia/Manila"),pABPOthers:(0,o.Yq)(this.selected_case.abPostExposure.other_vacc_date,"yyyy-MM-dd","en","Asia/Manila"),pABPSpecify:this.selected_case.abPostExposure.other_vacc_desc,attendant_sign_date:(0,o.Yq)(this.selected_case.abPostExposure.day0_date,"yyyy-MM-dd","en","Asia/Manila"),admission_date:(0,o.Yq)(this.selected_case.abPostExposure.day0_date,"yyyy-MM-dd","en","Asia/Manila"),admission_time:(0,o.Yq)((new Date).setHours(8),"hh:mma","en","Asia/Manila"),discharge_date:(0,o.Yq)(this.selected_case.abPostExposure.day7_date,"yyyy-MM-dd","en","Asia/Manila"),discharge_time:(0,o.Yq)((new Date).setHours(8),"hh:mma","en","Asia/Manila")}),this.getCreds()):this.showError("One or more required dates are missing")}paramsMc(){if(this.f.pCheckUpDate1.setValidators([n.k0.required]),this.f.pCheckUpDate2.setValidators([n.k0.required]),this.f.pCheckUpDate3.setValidators([n.k0.required]),this.f.pCheckUpDate4.setValidators([n.k0.required]),Object.keys(this.selected_case.prenatal_visit).length<4&&this.selected_case.prenatal_visit[0].trimester<3)this.mc_error=!0,this.show_form=!0;else{let _,m,h,t=null,s=null,i=null,l=null;Object.entries(this.selected_case.prenatal_visit).reverse().forEach(([Ue,v],x)=>{if(0===x&&!t&&(t=v.prenatal_date),1===x&&!s&&(s=v.prenatal_date),2===x&&!i&&(i=v.prenatal_date),x>2&&!l&&3===v.trimester)return l=v.prenatal_date,!0}),"ANC01"===this.selected_caserate.code||"ANC02"===this.selected_caserate.code?(_=new Date(l),m=new Date(t),h=new Date(l)):(_=this.selected_case.post_registration.admission_date??null,m=this.selected_case.post_registration.admission_date??null,h=this.selected_case.post_registration.discharge_date??null),this.eclaimsForm.patchValue({pCheckUpDate1:t,pCheckUpDate2:s,pCheckUpDate3:i,pCheckUpDate4:l,attendant_sign_date:(0,o.Yq)(_,"yyyy-MM-dd","en","Asia/Manila"),admission_date:(0,o.Yq)(m,"yyyy-MM-dd","en","Asia/Manila"),admission_time:(0,o.Yq)(m,"hh:mma","en","Asia/Manila"),discharge_date:(0,o.Yq)(h,"yyyy-MM-dd","en","Asia/Manila"),discharge_time:(0,o.Yq)(h,"hh:mma","en","Asia/Manila")}),this.getCreds()}}paramsGeneric(){this.f.pICDCode.setValidators([n.k0.required]),this.eclaimsForm.value.caserate_date?this.eclaimsForm.value.icd10_code?(this.eclaimsForm.patchValue({pICDCode:this.eclaimsForm.value.icd10_code,attendant_sign_date:(0,o.Yq)(this.eclaimsForm.value.caserate_date,"yyyy-MM-dd","en","Asia/Manila"),admission_date:(0,o.Yq)(this.eclaimsForm.value.caserate_date,"yyyy-MM-dd","en","Asia/Manila"),admission_time:(0,o.Yq)((new Date).setHours(8),"hh:mma","en","Asia/Manila"),discharge_date:(0,o.Yq)(this.eclaimsForm.value.caserate_date,"yyyy-MM-dd","en","Asia/Manila"),discharge_time:(0,o.Yq)((new Date).setHours(17),"hh:mma","en","Asia/Manila")}),this.getCreds()):this.showError("ICD10 code is required to proceed."):this.showError("Caserate date is required to proceed.")}paramsFp(){this.f.pICDCode.setValidators([n.k0.required]),this.eclaimsForm.value.caserate_date?this.eclaimsForm.value.icd10_code?(this.eclaimsForm.patchValue({pICDCode:this.eclaimsForm.value.icd10_code,attendant_sign_date:(0,o.Yq)(this.eclaimsForm.value.caserate_date,"yyyy-MM-dd","en","Asia/Manila"),admission_date:(0,o.Yq)(this.eclaimsForm.value.caserate_date,"yyyy-MM-dd","en","Asia/Manila"),admission_time:(0,o.Yq)((new Date).setHours(8),"hh:mma","en","Asia/Manila"),discharge_date:(0,o.Yq)(this.eclaimsForm.value.caserate_date,"yyyy-MM-dd","en","Asia/Manila"),discharge_time:(0,o.Yq)((new Date).setHours(17),"hh:mma","en","Asia/Manila")}),this.getCreds()):this.showError("ICD10 code is required to proceed."):this.showError("Caserate date is required to proceed.")}paramsDn(){this.f.pICDCode.setValidators([n.k0.required]),this.eclaimsForm.value.caserate_date?this.eclaimsForm.value.icd10_code?(this.eclaimsForm.patchValue({pICDCode:this.eclaimsForm.value.icd10_code,attendant_sign_date:(0,o.Yq)(this.eclaimsForm.value.caserate_date,"yyyy-MM-dd","en","Asia/Manila"),admission_date:(0,o.Yq)(this.eclaimsForm.value.caserate_date,"yyyy-MM-dd","en","Asia/Manila"),admission_time:(0,o.Yq)((new Date).setHours(8),"hh:mma","en","Asia/Manila"),discharge_date:(0,o.Yq)(this.eclaimsForm.value.caserate_date,"yyyy-MM-dd","en","Asia/Manila"),discharge_time:(0,o.Yq)((new Date).setHours(17),"hh:mma","en","Asia/Manila")}),this.getCreds()):this.showError("ICD10 code is required to proceed."):this.showError("Caserate date is required to proceed.")}getCreds(){if(this.eclaimsForm.invalid&&this.toastr.error("Please fill out all required fields.","Error",{disableTimeOut:!0}),this.eclaimsForm.value.discharge_date){const s=new Date(this.eclaimsForm.value.discharge_date),l=Math.abs((new Date).getTime()-s.getTime());Math.ceil(l/864e5)>60&&this.toastr.error("This claim is now beyond the 60-day filing period.","Warning",{disableTimeOut:!0,positionClass:"toast-top-center"})}this.http.get("settings/philhealth-credentials",{params:{"filter[program_code]":"cc"===this.program_name||"fp"===this.program_name?"mc":this.program_name}}).subscribe({next:s=>{console.log(s),this.program_creds=s.data[0],this.show_form=!0},error:s=>console.log(s)})}getVaccine(){return"Y"}get f(){return this.eclaimsForm.controls}loadCf2Params(){switch(this.program_name){case"tb":this.paramsTb();break;case"cc":this.http.get("patient-vaccines/vaccines-records",{params:{patient_id:this.selected_case.patient_id}}).subscribe({next:s=>{this.paramsCc(s.data)}});break;case"mc":this.paramsMc();break;case"ab":this.paramsAb();break;case"fp":this.paramsFp();break;default:this.paramsGeneric()}}selectCaserate(){this.selected_caserate=this.caserate_field,this.createForm()}exportP(){let t="CF2_"+this.patient.last_name.toUpperCase()+"_"+this.patient.first_name.toUpperCase()+"_"+(0,o.Yq)(new Date,"yyyyMMdd","en","Asia/Manila");this.pdf_exported=!0,this.exportAsService.save(this.exportAsPdf,t).subscribe(()=>{this.pdf_exported=!1})}createForm(){this.show_form=!1,this.eclaimsForm=this.formBuilder.group({patient_id:[null,n.k0.required],facility_code:[this.facility.code,n.k0.required],program_desc:[null,n.k0.required],program_id:[null,n.k0.required],admit_dx:[null,n.k0.required],caserate_date:[null,n.k0.required],caserate_code:[null,n.k0.required],code:[null,n.k0.required],description:[null,n.k0.required],discharge_dx:[null,n.k0.required],icd10_code:[null,n.k0.required],hci_fee:[null,n.k0.required],prof_fee:[null,n.k0.required],caserate_fee:[null,n.k0.required],admission_date:[null,n.k0.required],admission_time:[null,n.k0.required],discharge_date:[null,n.k0.required],discharge_time:[null,n.k0.required],eclaims_caserate_list_id:[null,n.k0.required],attendant_accreditation_code:[null,n.k0.required],attendant_last_name:[null,n.k0.required],attendant_first_name:[null,n.k0.required],attendant_middle_name:[null],attendant_suffix_name:[null],attendant_sign_date:[null,n.k0.required],pTBType:[null],pNTPCardNo:[null],pDay0ARV:[null],pDay3ARV:[null],pDay7ARV:[null],pRIG:[null],pABPOthers:[null],pABPSpecify:[null],pEssentialNewbornCare:[null],pNewbornHearingScreeningTest:[null],pNewbornScreeningTest:[null],pFilterCardNo:[null],pCheckUpDate1:[null],pCheckUpDate2:[null],pCheckUpDate3:[null],pCheckUpDate4:[null],pICDCode:[null],transmittalNumber:[null],enough_benefit_flag:[null],hci_pTotalActualCharges:[null],hci_pDiscount:[null],hci_pPhilhealthBenefit:[null],hci_pTotalAmount:[null],prof_pTotalActualCharges:[null],prof_pDiscount:[null],prof_pPhilhealthBenefit:[null],prof_pTotalAmount:[null],meds_flag:[null],meds_pDMSTotalAmount:[null],meds_pExaminations_flag:[null],meds_pExamTotalAmount:[null],hmo_flag:[null],others_flag:[null]}),this.eclaimsForm.patchValue({...this.selected_caserate}),this.eclaimsForm.patchValue({eclaims_caserate_list_id:this.selected_caserate.id,attendant_accreditation_code:this.selected_caserate.attendant.accreditation_number,attendant_last_name:this.selected_caserate.attendant.last_name,attendant_first_name:this.selected_caserate.attendant.first_name,attendant_middle_name:this.selected_caserate.attendant.middle_name,attendant_suffix_name:"NA"!==this.selected_caserate.attendant.suffix_name?this.selected_caserate.attendant.suffix_name:"",transmittalNumber:this.selected_transmittalNumber??null}),this.loadCf2Params()}showError(t){this.toastr.error(t,"Error",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0})}closeModal(){this.toggleModal.emit("cf2")}constructor(t,s,i,l){this.http=t,this.toastr=s,this.exportAsService=i,this.formBuilder=l,this.toggleModal=new e.bkB,this.faFilePdf=g.O_q,this.faCircleNotch=c.s4k,this.pdf_exported=!1,this.show_form=!0,this.que_form=!1,this.eclaimsForm=function P(){return new n.gE({patient_id:new n.MJ(null),facility_code:new n.MJ(null),program_desc:new n.MJ(null),program_id:new n.MJ(null),admit_dx:new n.MJ(null),caserate_date:new n.MJ(null),caserate_code:new n.MJ(null),code:new n.MJ(null),description:new n.MJ(null),discharge_dx:new n.MJ(null),icd10_code:new n.MJ(null),hci_fee:new n.MJ(null),prof_fee:new n.MJ(null),caserate_fee:new n.MJ(null),admission_date:new n.MJ(null),admission_time:new n.MJ(null),discharge_date:new n.MJ(null),discharge_time:new n.MJ(null),eclaims_caserate_list_id:new n.MJ(null),attendant_accreditation_code:new n.MJ(null),attendant_last_name:new n.MJ(null),attendant_first_name:new n.MJ(null),attendant_middle_name:new n.MJ(null),attendant_suffix_name:new n.MJ(null),attendant_sign_date:new n.MJ(null),pTBType:new n.MJ(null),pNTPCardNo:new n.MJ(null),pDay0ARV:new n.MJ(null),pDay3ARV:new n.MJ(null),pDay7ARV:new n.MJ(null),pRIG:new n.MJ(null),pABPOthers:new n.MJ(null),pABPSpecify:new n.MJ(null),pEssentialNewbornCare:new n.MJ(null),pNewbornHearingScreeningTest:new n.MJ(null),pNewbornScreeningTest:new n.MJ(null),pFilterCardNo:new n.MJ(null),pCheckUpDate1:new n.MJ(null),pCheckUpDate2:new n.MJ(null),pCheckUpDate3:new n.MJ(null),pCheckUpDate4:new n.MJ(null),pICDCode:new n.MJ(null),transmittalNumber:new n.MJ(null),enough_benefit_flag:new n.MJ(null),hci_pTotalActualCharges:new n.MJ(null),hci_pDiscount:new n.MJ(null),hci_pPhilhealthBenefit:new n.MJ(null),hci_pTotalAmount:new n.MJ(null),prof_pTotalActualCharges:new n.MJ(null),prof_pDiscount:new n.MJ(null),prof_pPhilhealthBenefit:new n.MJ(null),prof_pTotalAmount:new n.MJ(null),meds_flag:new n.MJ(null),meds_pDMSTotalAmount:new n.MJ(null),meds_pExaminations_flag:new n.MJ(null),meds_pExamTotalAmount:new n.MJ(null),hmo_flag:new n.MJ(null),others_flag:new n.MJ(null)})}(),this.date_today=(0,o.Yq)(new Date,"yyyy-MM-dd","en","Asia/Manila"),this.mc_error=!1,this.exportAsPdf={type:"pdf",elementIdOrContent:"mainForm",options:{image:{type:"jpeg",quality:1},html2canvas:{scale:2},margin:[0,0,0,0],pagebreak:{mode:["avoid-all","css","legacy"]},jsPDF:{orientation:"portrait",unit:"mm",format:[216,330]}}}}ngOnInit(){this.facility=this.http.getUserFromJSON().facility,1===this.caserate_list.length&&(this.selected_caserate=this.caserate_list[0],this.createForm())}static{this.\u0275fac=function(s){return new(s||a)(e.rXU(b.k),e.rXU(y.tw),e.rXU(p.a),e.rXU(n.ok))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-cf2"]],inputs:{patient:"patient",program_id:"program_id",program_name:"program_name",caserate_list:"caserate_list",selected_case:"selected_case",selected_transmittalNumber:"selected_transmittalNumber"},outputs:{toggleModal:"toggleModal"},standalone:!1,decls:21,vars:7,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-4xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-orange-400"],[1,"text-sm","font-bold","text-white"],[1,"bg-white","text-orange-400","rounded-md","px-2","py-1","mr-3","disabled:opacity-50",3,"click","disabled"],["animation","spin","class","pr-1",3,"icon",4,"ngIf"],[1,"bg-white","text-orange-400","rounded-md","px-2","py-1","disabled:opacity-50",3,"click","disabled"],[3,"icon"],[1,"overflow-y-auto","max-h-[500px]","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],["src","./assets/img/philhealth-cf2-1.jpg","hidden","",1,"w-[216mm]","h-[330mm]"],["src","./assets/img/philhealth-cf2-2.jpg","hidden","",1,"w-[216mm]","h-[330mm]"],["class","flex w-2/3 mx-auto",4,"ngIf"],["class","w-full",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-gray-400",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],["animation","spin",1,"pr-1",3,"icon"],[1,"flex","w-2/3","mx-auto"],[1,"p-2","w-1/2"],["for","caserate_field"],["name","caserate_field","id","caserate_field",1,"input",3,"ngModelChange","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"mt-8"],["type","button",1,"btn-save",3,"click"],[3,"ngValue"],[1,"w-full"],["class","text-sm text-center uppercase font-semibold relative w-[216mm] h-[660mm]","id","mainForm",4,"ngIf"],[4,"ngIf"],["class","grid grid-cols-1 my-20",4,"ngIf"],["id","mainForm",1,"text-sm","text-center","uppercase","font-semibold","relative","w-[216mm]","h-[660mm]"],["src","./assets/img/philhealth-cf2-1.jpg",1,"w-[216mm]","h-[330mm]"],["src","./assets/img/philhealth-cf2-2.jpg",1,"w-[216mm]","h-[330mm]"],[1,"absolute","top-[67.8mm]","left-[117mm]","tracking-[0.45em]"],[1,"absolute","top-[73mm]","left-[61mm]","w-[147mm]"],[1,"absolute","top-[79mm]","left-[28mm]","w-[73mm]"],[1,"absolute","top-[79mm]","left-[104mm]","w-[51mm]"],[1,"absolute","top-[79mm]","left-[159mm]","w-[48mm]"],[1,"absolute","top-[95.3mm]","left-[44mm]","w-[38.5mm]"],[1,"absolute","top-[95.3mm]","left-[87mm]","w-[41.5mm]"],[1,"absolute","top-[95.3mm]","left-[132mm]","w-[29.5mm]"],[1,"absolute","top-[95.3mm]","left-[165mm]","w-[42.2mm]"],[1,"absolute","top-[126mm]","left-[70mm]","w-[8.5mm]","tracking-[0.4em]"],[1,"absolute","top-[126mm]","left-[81.5mm]","w-[8.5mm]","tracking-[0.4em]"],[1,"absolute","top-[126mm]","left-[93.5mm]","w-[17mm]","tracking-[0.55em]"],[1,"absolute","top-[126mm]","left-[139mm]","w-[8.5mm]","tracking-[0.55em]"],[1,"absolute","top-[126mm]","left-[150mm]","w-[8.5mm]","tracking-[0.55em]"],["class","absolute top-[126mm] left-[165mm] w-[8.5mm] tracking-[0.55em]",4,"ngIf"],["class","absolute top-[126mm] left-[180mm] w-[8.5mm] tracking-[0.55em]",4,"ngIf"],[1,"absolute","top-[131.5mm]","left-[70mm]","w-[8.5mm]","tracking-[0.4em]"],[1,"absolute","top-[131.5mm]","left-[81.5mm]","w-[8.5mm]","tracking-[0.4em]"],[1,"absolute","top-[131.5mm]","left-[93.5mm]","w-[17mm]","tracking-[0.55em]"],[1,"absolute","top-[131.5mm]","left-[139mm]","w-[8.5mm]","tracking-[0.55em]"],[1,"absolute","top-[131.5mm]","left-[150mm]","w-[8.5mm]","tracking-[0.55em]"],["class","absolute top-[131.5mm] left-[165mm] w-[8.5mm] tracking-[0.55em]",4,"ngIf"],["class","absolute top-[131.5mm] left-[180mm] w-[8.5mm] tracking-[0.55em]",4,"ngIf"],[1,"absolute","top-[142.6mm]","left-[11.8mm]"],[1,"absolute","top-[176.5mm]","left-[10mm]","w-[196mm]"],[1,"absolute","top-[193.5mm]","left-[15mm]","w-[24.5mm]"],[1,"absolute","top-[193.5mm]","left-[115mm]","w-[20.5mm]"],[1,"absolute","top-[193.5mm]","left-[139.5mm]","w-[22mm]"],[1,"absolute","top-[317.5mm]","left-[60mm]","w-[61mm]"],[1,"absolute","top-[352mm]","left-[35mm]","w-[17mm]","tracking-[0.4em]"],[1,"absolute","top-[352mm]","left-[55mm]","w-[29.8mm]","tracking-[0.5em]"],[1,"absolute","top-[352mm]","left-[87.5mm]","w-[4.5mm]"],[1,"absolute","top-[358.5mm]","left-[20mm]","w-[83mm]"],[1,"absolute","top-[368mm]","left-[44mm]","w-[8.7mm]","tracking-[0.45em]"],[1,"absolute","top-[368mm]","left-[55mm]","w-[8.7mm]","tracking-[0.45em]"],[1,"absolute","top-[368mm]","left-[66.5mm]","w-[17.3mm]","tracking-[0.5em]"],[1,"absolute","top-[358.5mm]","left-[117.5mm]"],[1,"absolute","top-[126mm]","left-[165mm]","w-[8.5mm]","tracking-[0.55em]"],[1,"absolute","top-[126mm]","left-[180mm]","w-[8.5mm]","tracking-[0.55em]"],[1,"absolute","top-[131.5mm]","left-[165mm]","w-[8.5mm]","tracking-[0.55em]"],[1,"absolute","top-[131.5mm]","left-[180mm]","w-[8.5mm]","tracking-[0.55em]"],[1,"absolute","top-[264mm]","left-[17.5mm]","w-[45mm]"],[1,"absolute","top-[264mm]","left-[70mm]","w-[41mm]"],[1,"absolute","top-[264mm]","left-[117.5mm]","w-[37mm]"],[1,"absolute","top-[264mm]","left-[161.5mm]","w-[45mm]"],[1,"absolute","top-[280.5mm]","left-[17mm]","w-[45mm]"],[1,"absolute","top-[280.5mm]","left-[55mm]","w-[45mm]"],[1,"absolute","top-[280.5mm]","left-[97mm]","w-[45mm]"],[1,"absolute","top-[280.5mm]","left-[125mm]","w-[45mm]"],[1,"absolute","top-[280.5mm]","left-[174mm]","w-[45mm]"],["class","absolute top-[270.5mm] left-[46.3mm]",4,"ngIf"],["class","absolute top-[270.5mm] left-[80mm]",4,"ngIf"],[1,"absolute","top-[270.5mm]","left-[46.3mm]"],[1,"absolute","top-[270.5mm]","left-[80mm]"],[1,"absolute","top-[297mm]","left-[15mm]"],[1,"absolute","top-[297mm]","left-[57.7mm]"],[1,"absolute","top-[297mm]","left-[93.5mm]"],[1,"absolute","top-[297mm]","left-[133mm]"],[1,"absolute","top-[297mm]","left-[166.5mm]"],[1,"absolute","top-[302mm]","left-[15mm]"],[1,"absolute","top-[302mm]","left-[57.7mm]"],[1,"absolute","top-[302mm]","left-[93.5mm]"],[1,"absolute","top-[302mm]","left-[133mm]"],[1,"absolute","top-[438.5mm]","left-[12.5mm]"],[1,"absolute","top-[451mm]","left-[113mm]","w-[83.5mm]"],[1,"absolute","top-[456.5mm]","left-[113mm]","w-[83.5mm]"],[1,"absolute","top-[461.5mm]","left-[113mm]","w-[83.5mm]"],[1,"absolute","top-[468mm]","left-[12.5mm]"],[1,"absolute","top-[500mm]","left-[50mm]"],[1,"absolute","top-[500mm]","left-[82mm]"],[1,"absolute","top-[500mm]","left-[117mm]"],[1,"absolute","top-[495mm]","left-[165mm]"],[1,"absolute","top-[520mm]","left-[50mm]"],[1,"absolute","top-[520mm]","left-[82mm]"],[1,"absolute","top-[520mm]","left-[117mm]"],[1,"absolute","top-[512mm]","left-[165mm]"],[1,"absolute","top-[537mm]","left-[148mm]"],[1,"absolute","top-[537mm]","left-[126mm]"],[1,"absolute","top-[537mm]","left-[175mm]"],[1,"absolute","top-[545mm]","left-[148mm]"],[1,"absolute","top-[545mm]","left-[126mm]"],[1,"absolute","top-[545mm]","left-[175mm]"],[1,"border","border-orange-400","bg-orange-50","text-orange-700","rounded-md","m-5","p-3"],[4,"ngFor","ngForOf"],["class","text-sm font-semibold",4,"ngIf"],[1,"text-sm","font-semibold"],[1,"grid","grid-cols-1","my-20"],[1,"flex","justify-center","text-blue-500"],["animation","spin",3,"icon"],[1,"flex","justify-center"]],template:function(s,i){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e.EFF(5," Claim Form 2 "),e.k0s(),e.j41(6,"div")(7,"button",5),e.bIt("click",function(){return i.submitQue()}),e.DNE(8,J,1,1,"fa-icon",6),e.EFF(9),e.k0s(),e.j41(10,"button",7),e.bIt("click",function(){return i.exportP()}),e.nrm(11,"fa-icon",8),e.k0s()()(),e.j41(12,"div",9),e.nrm(13,"img",10)(14,"img",11),e.DNE(15,q,9,2,"div",12)(16,oe,5,4,"div",13),e.k0s(),e.j41(17,"div",14)(18,"button",15),e.bIt("click",function(){return i.closeModal()}),e.EFF(19,"Close"),e.k0s()()()()(),e.nrm(20,"div",16)),2&s&&(e.R7$(7),e.Y8G("disabled",!i.selected_caserate||i.que_form),e.R7$(),e.Y8G("ngIf",i.que_form),e.R7$(),e.SpI(" ",i.eclaimsForm.value.transmittalNumber?"Update":"Queue"," "),e.R7$(),e.Y8G("disabled",!i.selected_caserate||i.pdf_exported||i.que_form),e.R7$(),e.Y8G("icon",i.faFilePdf),e.R7$(4),e.Y8G("ngIf",!i.selected_caserate),e.R7$(),e.Y8G("ngIf",i.selected_caserate))},dependencies:[o.Sq,o.bT,F.aY,n.xH,n.y7,n.wz,n.BC,n.vS,o.P9,o.vh,o.lG],encapsulation:2})}}return a})();var me=d(8917),ce=d(6929);function de(a,r){1&a&&(e.j41(0,"span",20),e.EFF(1," There are no credential for the selected program "),e.k0s())}function _e(a,r){if(1&a){const t=e.RV6();e.j41(0,"button",6),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleModal("pbef"))}),e.EFF(1," PBEF "),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("disabled",!t.program_creds)}}function pe(a,r){if(1&a){const t=e.RV6();e.j41(0,"button",21),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.togglePage(1))}),e.nrm(1,"fa-icon",22),e.EFF(2," Close "),e.k0s()}if(2&a){const t=e.XpG();e.R7$(),e.Y8G("icon",t.faXmark)}}function he(a,r){if(1&a){const t=e.RV6();e.j41(0,"button",23),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleModal("eclaims_guide"))}),e.EFF(1," Eclaims Guide "),e.nrm(2,"fa-icon",22),e.k0s()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("icon",t.faQuestionCircle)}}function ue(a,r){if(1&a){const t=e.RV6();e.j41(0,"button",41),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,l=e.XpG(3);return e.Njj(l.togglePage(2,i))}),e.nrm(1,"fa-icon",22),e.EFF(2," Create ESOA "),e.k0s()}if(2&a){const t=e.XpG(4);e.Y8G("disabled",t.is_refreshing),e.R7$(),e.Y8G("icon",t.faReceipt)}}function fe(a,r){if(1&a){const t=e.RV6();e.j41(0,"button",42),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,l=e.XpG(3);return e.Njj(l.toggleModal("upload-claims",i))}),e.nrm(1,"fa-icon",22),e.EFF(2," Upload Claim "),e.k0s()}if(2&a){const t=e.XpG(4);e.Y8G("disabled",t.is_refreshing),e.R7$(),e.Y8G("icon",t.faUpload)}}function ge(a,r){if(1&a){const t=e.RV6();e.j41(0,"button",42),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,l=e.XpG(3);return e.Njj(l.toggleModal("upload-required-claims",i))}),e.nrm(1,"fa-icon",22),e.EFF(2," Upload Required Docs "),e.k0s()}if(2&a){const t=e.XpG(4);e.Y8G("disabled",t.is_refreshing),e.R7$(),e.Y8G("icon",t.faUpload)}}function be(a,r){if(1&a){const t=e.RV6();e.j41(0,"button",43),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,l=e.XpG(3);return e.Njj(l.reopenCf2("cf2",i))}),e.nrm(1,"fa-icon",22),e.EFF(2," Update CF2 XML "),e.k0s()}if(2&a){const t=e.XpG(4);e.Y8G("disabled",t.is_refreshing),e.R7$(),e.Y8G("icon",t.faPenToSquare)}}function ye(a,r){if(1&a&&e.nrm(0,"fa-icon",22),2&a){const t=e.XpG(5);e.Y8G("icon",t.faReceipt)}}function Fe(a,r){if(1&a&&e.nrm(0,"fa-icon",47),2&a){const t=e.XpG(5);e.Y8G("icon",t.faRotate)}}function ke(a,r){if(1&a){const t=e.RV6();e.j41(0,"button",44),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,l=e.XpG(3);return e.Njj(l.checkSeries(i))}),e.DNE(1,ye,1,1,"fa-icon",45)(2,Fe,1,1,"fa-icon",46),e.EFF(3," Get Series Lhio "),e.k0s()}if(2&a){const t=e.XpG(4);e.Y8G("disabled",t.is_refreshing),e.R7$(),e.Y8G("ngIf",!t.is_refreshing),e.R7$(),e.Y8G("ngIf",t.is_refreshing&&"checking_series"===t.process_name)}}function ve(a,r){if(1&a&&e.nrm(0,"fa-icon",47),2&a){const t=e.XpG(5);e.Y8G("icon",t.faRotate)}}function xe(a,r){if(1&a){const t=e.RV6();e.j41(0,"button",48),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,l=e.XpG(3);return e.Njj(l.exportXML(i))}),e.DNE(1,ve,1,1,"fa-icon",46),e.EFF(2),e.k0s()}if(2&a){const t=e.XpG(4);e.Y8G("disabled",t.is_exporting||t.is_refreshing),e.R7$(),e.Y8G("ngIf",t.is_exporting),e.R7$(),e.SpI(" ",t.is_exporting?"Exporting":"Export"," XML ")}}function Ee(a,r){if(1&a&&e.nrm(0,"fa-icon",47),2&a){const t=e.XpG(5);e.Y8G("icon",t.faRotate)}}function Me(a,r){if(1&a){const t=e.RV6();e.j41(0,"button",44),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,l=e.XpG(3);return e.Njj(l.getClaimStatus(i,i.pStatus))}),e.DNE(1,Ee,1,1,"fa-icon",46),e.EFF(2),e.k0s()}if(2&a){const t=e.XpG().$implicit,s=e.XpG(3);e.Y8G("disabled",s.is_refreshing),e.R7$(),e.Y8G("ngIf",s.is_refreshing&&"checking_claim_status"===s.process_name),e.R7$(),e.SpI(" Check ","DENIED"===t.pStatus?"Reason":"Status"," ")}}function Ce(a,r){if(1&a&&e.nrm(0,"fa-icon",47),2&a){const t=e.XpG(5);e.Y8G("icon",t.faRotate)}}function Re(a,r){if(1&a){const t=e.RV6();e.j41(0,"button",42),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,l=e.XpG(3);return e.Njj(l.getVoucherDetails(i))}),e.DNE(1,Ce,1,1,"fa-icon",46),e.EFF(2," Get Voucher Details "),e.k0s()}if(2&a){const t=e.XpG(4);e.Y8G("disabled",t.is_refreshing),e.R7$(),e.Y8G("ngIf",t.is_refreshing&&"checking_voucher"===t.process_name)}}function we(a,r){if(1&a){const t=e.RV6();e.j41(0,"tr",31)(1,"td"),e.EFF(2),e.nrm(3,"br"),e.EFF(4),e.k0s(),e.j41(5,"td",32),e.EFF(6),e.nrm(7,"br"),e.EFF(8),e.nrm(9,"br"),e.EFF(10),e.k0s(),e.j41(11,"td",33),e.EFF(12),e.k0s(),e.j41(13,"td",33),e.EFF(14),e.k0s(),e.j41(15,"td",33),e.EFF(16),e.k0s(),e.j41(17,"td",34)(18,"button",35),e.bIt("click",function(){const i=e.eBV(t).$implicit,l=e.XpG(3);return e.Njj(l.toggleModal("pbef",i))}),e.EFF(19," PBEF "),e.k0s(),e.DNE(20,ue,3,2,"button",36)(21,fe,3,2,"button",37)(22,ge,3,2,"button",37)(23,be,3,2,"button",38)(24,ke,4,3,"button",39)(25,xe,3,3,"button",40)(26,Me,3,3,"button",39)(27,Re,3,2,"button",37),e.k0s()()}if(2&a){let t,s,i,l,_;const m=r.$implicit,h=e.XpG(3);e.R7$(2),e.SpI(" ",m.caserate.caserate_code," "),e.R7$(2),e.SpI(" ",m.caserate.code," "),e.R7$(2),e.SpI(" 1. ",m.pHospitalTransmittalNo," "),e.R7$(2),e.SpI(" 2. ",null!==(t=m.pReceiptTicketNumber)&&void 0!==t?t:"-"," "),e.R7$(2),e.SpI(" 3. ",null!==(s=m.pClaimSeriesLhio)&&void 0!==s?s:"-"," "),e.R7$(2),e.SpI(" ",null!==(i=m.pTransmissionDate)&&void 0!==i?i:"-"," "),e.R7$(2),e.SpI(" ",null!==(l=m.pStatus)&&void 0!==l?l:"IN QUEUE"," "),e.R7$(2),e.SpI(" ",null!==(_=m.denied_reason)&&void 0!==_?_:"-"," "),e.R7$(2),e.Y8G("disabled",h.is_refreshing),e.R7$(2),e.Y8G("ngIf",(""===m.pStatus||!m.pStatus)&&h.program_id==m.caserate.program_id),e.R7$(),e.Y8G("ngIf",""===m.pStatus||!m.pStatus),e.R7$(),e.Y8G("ngIf","RETURN"===m.pStatus),e.R7$(),e.Y8G("ngIf",!m.pReceiptTicketNumber),e.R7$(),e.Y8G("ngIf",m.pReceiptTicketNumber&&!m.pClaimSeriesLhio),e.R7$(),e.Y8G("ngIf",m.pClaimSeriesLhio),e.R7$(),e.Y8G("ngIf",m.pClaimSeriesLhio&&!m.denied_reason),e.R7$(),e.Y8G("ngIf","WITH VOUCHER"===m.pStatus)}}function je(a,r){1&a&&(e.j41(0,"tr")(1,"td",49),e.EFF(2," No record found "),e.k0s()())}function Ie(a,r){if(1&a&&(e.j41(0,"tbody"),e.DNE(1,we,28,17,"tr",30)(2,je,3,0,"tr",29),e.k0s()),2&a){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.eclaims_list),e.R7$(),e.Y8G("ngIf",0===t.eclaims_list.length)}}function Te(a,r){if(1&a&&(e.j41(0,"tbody")(1,"tr")(2,"td",50)(3,"div",51)(4,"div",52),e.nrm(5,"fa-icon",47),e.k0s(),e.j41(6,"div",53),e.EFF(7," Fetching claims... "),e.k0s()()()()()),2&a){const t=e.XpG(2);e.R7$(5),e.Y8G("icon",t.faCircleNotch)}}function Ge(a,r){if(1&a&&(e.j41(0,"div",24)(1,"table",25)(2,"thead",26)(3,"tr")(4,"th",27),e.EFF(5,"Caserate"),e.k0s(),e.j41(6,"th",28),e.EFF(7," 1. Transmittal Number "),e.nrm(8,"br"),e.EFF(9," 2. Ticket Number "),e.nrm(10,"br"),e.EFF(11," 3. Claim Series Lhio "),e.k0s(),e.j41(12,"th",27),e.EFF(13,"Transmittal Date"),e.k0s(),e.j41(14,"th",27),e.EFF(15,"Claim Status"),e.k0s(),e.j41(16,"th",27),e.EFF(17,"Details"),e.k0s(),e.j41(18,"th",27),e.EFF(19,"Action"),e.k0s()()(),e.DNE(20,Ie,3,2,"tbody",29)(21,Te,8,1,"tbody",29),e.k0s()()),2&a){const t=e.XpG();e.R7$(20),e.Y8G("ngIf",t.show_form),e.R7$(),e.Y8G("ngIf",!t.show_form)}}function Ae(a,r){if(1&a&&(e.j41(0,"div",54),e.nrm(1,"app-esoa",55),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.Y8G("program_id",t.selected_case.id)("caserate_details",t.caserate_details)("transmittal_number",t.transmittal_number)("eclaims_upload_id",t.eclaims_upload_id)}}function De(a,r){if(1&a){const t=e.RV6();e.j41(0,"app-pbef",56),e.bIt("toggleModal",function(i){e.eBV(t);const l=e.XpG();return e.Njj(l.toggleModal(i))}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("patient",t.patient)("patient_philhealth",t.patient_philhealth)("program_name",t.program_name)("program_creds",t.program_creds)("selected_case",t.selected_case)("caserate_list",t.caserate_list)}}function $e(a,r){if(1&a){const t=e.RV6();e.j41(0,"app-cf1",57),e.bIt("toggleModal",function(i){e.eBV(t);const l=e.XpG();return e.Njj(l.toggleModal(i))}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("patient",t.patient)("patient_philhealth",t.patient_philhealth)("program_creds",t.program_creds)}}function Ye(a,r){if(1&a){const t=e.RV6();e.j41(0,"app-cf2",58),e.bIt("toggleModal",function(i){e.eBV(t);const l=e.XpG();return e.Njj(l.toggleModal(i))}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("patient",t.patient)("program_name",t.program_name)("program_id",t.program_id)("caserate_list",t.caserate_list)("selected_case",t.selected_case)("selected_transmittalNumber",t.selected_transmittalNumber)}}function Ne(a,r){if(1&a){const t=e.RV6();e.j41(0,"app-upload-claims",59),e.bIt("modalToggle",function(i){e.eBV(t);const l=e.XpG();return e.Njj(l.toggleModal(i))}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("patient",t.patient)("program_name",t.program_name)("selected_pHospitalTransmittalNo",t.selected_pHospitalTransmittalNo)("caserate_code",t.selected_caserate_code)("selected_ticket_number",t.selected_ticket_number)}}function Pe(a,r){if(1&a){const t=e.RV6();e.j41(0,"app-upload-required-claims",60),e.bIt("modalToggle",function(i){e.eBV(t);const l=e.XpG();return e.Njj(l.toggleModal(i))}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("patient",t.patient)("program_name",t.program_name)("selected_pHospitalTransmittalNo",t.selected_pHospitalTransmittalNo)("caserate_code",t.selected_caserate_code)("selected_ticket_number",t.selected_ticket_number)("selected_series_lhio",t.selected_series_lhio)}}function Je(a,r){if(1&a){const t=e.RV6();e.j41(0,"app-voucher-details",61),e.bIt("toggleModal",function(i){e.eBV(t);const l=e.XpG();return e.Njj(l.toggleModal(i))}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("voucher_details",t.voucher_details)}}function Ve(a,r){if(1&a){const t=e.RV6();e.j41(0,"app-eclaims-pdf",62),e.bIt("toggleModal",function(i){e.eBV(t);const l=e.XpG();return e.Njj(l.toggleModal(i))}),e.k0s()}}let qe=(()=>{class a{togglePage(t,s){this.caserate_details=2===t?s.caserate:null,this.transmittal_number=2===t?s.pHospitalTransmittalNo:null,this.eclaims_upload_id=2===t?s.id:null,this.page=t}getEclaimsList(){this.show_form=!1,this.http.get("eclaims/eclaims-upload",{params:{patient_id:this.patient.id,program_desc:this.program_name,program_code:"cc"===this.program_name||"fp"===this.program_name?"mc":this.program_name}}).subscribe({next:s=>{if(this.eclaims_list=s.data,Object.keys(this.eclaims_list).length>0){let i=[];Object.entries(this.eclaims_list).forEach(([l,_],m)=>{i.push(_.caserate.id)}),this.getCaserate(i)}else this.getCaserate()},error:s=>console.log(s)})}getCaserate(t){let s={program_id:this.program_id,program_desc:this.program_name,program_code:"cc"===this.program_name||"fp"===this.program_name?"mc":this.program_name};s.eclaims_id_arr=t?t.join(","):null,this.http.get("eclaims/eclaims-caserate",{params:s}).subscribe({next:i=>{this.caserate_list=i.data,this.show_cf2=Object.keys(this.caserate_list).length>0,this.show_form=!0},error:i=>console.log(i)})}refreshClaims(){this.is_refreshing=!0}checkSeries(t){this.process_name="checking_series",this.is_refreshing=!0,this.http.post("eclaims/get-claims-map",{receiptTicketNumber:t.pReceiptTicketNumber,program_code:"cc"===this.program_name||"fp"===this.program_name?"mc":this.program_name}).subscribe({next:i=>{!1===i.success?(this.toastr.error("No query result","Series LHIO"),this.stopRefreshing()):(t.pClaimSeriesLhio=i.mapping[0].pclaimSeriesLhio,t.pStatus="IN PROCESS",this.updateUploadClaim(t))},error:i=>{this.toastr.error(i.error.message,"Series LHIO",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0}),this.stopRefreshing()}})}getClaimStatus(t,s){this.process_name="checking_claim_status",this.is_refreshing=!0,this.http.post("eclaims/get-claim-status",{series_lhio:t.pClaimSeriesLhio,program_code:"cc"===this.program_name||"fp"===this.program_name?"mc":this.program_name}).subscribe({next:l=>{this.stopRefreshing(),this.iterateMessage(l,t,l.CLAIM["@attributes"].pStatus)},error:l=>{this.stopRefreshing(),this.http.showError(l.error.message,"eClaims Error")}})}getClaimsMaps(t,s){}iterateMessage(t,s,i){let l;switch(s.pStatus=t.CLAIM["@attributes"].pStatus,i){case"DENIED":s.denied_reason=t.CLAIM.DENIED.REASON["@attributes"].pReason,l="As of: "+t["@attributes"].pAsOf+" "+t["@attributes"].pAsOfTime+"<br />"+t.CLAIM.DENIED.REASON["@attributes"].pReason;break;case"WITH CHEQUE":l="As of: "+t["@attributes"].pAsOf+" "+t["@attributes"].pAsOfTime,Object.entries(t.CLAIM.PAYMENT.PAYEE).forEach(([_,m],h)=>{s.pCheckNo=m["@attributes"].pCheckNo,l+="<br />Voucher No: "+m["@attributes"].pCheckNo,l+="<br />Voucher Date: "+m["@attributes"].pVoucherDate,l+="<br />Claim Amount: "+m["@attributes"].pClaimAmount,l+="<br />Check Amount: "+m["@attributes"].pCheckAmount+"<br />"});break;case"WITH VOUCHER":l="As of: "+t["@attributes"].pAsOf+" "+t["@attributes"].pAsOfTime,Object.entries(t.CLAIM.PAYMENT.PAYEE).forEach(([_,m],h)=>{s.pVoucherNo=m["@attributes"].pVoucherNo,l+="<br />Voucher No: "+m["@attributes"].pVoucherNo,l+="<br />Voucher Date: "+m["@attributes"].pVoucherDate,l+="<br />Claim Amount: "+m["@attributes"].pClaimAmount,l+="<br />Check Amount: "+m["@attributes"].pCheckAmount+"<br />"});break;case"RETURN":s.return_reason=t.CLAIM.RETURN,l="As of: "+t["@attributes"].pAsOf+" "+t["@attributes"].pAsOfTime,Object.entries(t.CLAIM.RETURN.DEFECTS["@attributes"]).forEach(([_,m],h)=>{m.pRequirement||(l+="<br />Deficiency: "+m),m.pRequirement&&(l+="<br />Requirement: "+m.pRequirement)});break;case"IN PROCESS":l="As of: "+t["@attributes"].pAsOf+" "+t["@attributes"].pAsOfTime+"<br />",t.CLAIM.TRAIL&&(t.CLAIM.TRAIL.PROCESS["@attributes"]?l+="<br /><strong>"+t.CLAIM.TRAIL.PROCESS["@attributes"].pProcessDate+":</strong> "+t.CLAIM.TRAIL.PROCESS["@attributes"].pProcessStage:Object.entries(t.CLAIM.TRAIL.PROCESS).forEach(([_,m],h)=>{l+="<br /><strong>"+m["@attributes"].pProcessDate+":</strong> "+m["@attributes"].pProcessStage}));break;default:l="As of: "+t["@attributes"].pAsOf+" "+t["@attributes"].pAsOfTime}this.showInfoToastr(l,t.CLAIM.pStatus),this.updateUploadClaim(s),this.is_refreshing=!1}exportXML(t){this.process_name="exporting_xml",this.is_exporting=!0,this.is_refreshing=!0,this.http.post("eclaims/export-xml",t,{responseType:"blob"}).subscribe({next:s=>{const i=document.createElement("a"),l=URL.createObjectURL(s);i.href=l,i.download=t.pClaimSeriesLhio+".xml.enc",i.click(),URL.revokeObjectURL(l),this.is_exporting=!1,this.stopRefreshing()},error:s=>console.log(s)})}showInfoToastr(t,s){this.toastr.info(t,s,{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0,enableHtml:!0})}getVoucherDetails(t){this.process_name="checking_voucher",this.is_refreshing=!0,this.http.post("eclaims/get-voucher-details",{voucherNo:t.pVoucherNo,program_code:"cc"===t.program_desc||"fp"===t.program_desc?"mc":t.program_desc}).subscribe({next:i=>{i.voucher_details=i.CLAIM,this.updateUploadClaim(i),this.toggleModal("voucher-details",i.voucher_details),this.stopRefreshing()},error:i=>{this.http.showError(i.error.text,"Voucher Details Error"),this.stopRefreshing()}})}stopRefreshing(){this.is_refreshing=!1,this.process_name=null}updateUploadClaim(t){this.http.post("eclaims/eclaims-upload",t).subscribe({next:()=>{this.stopRefreshing()},error:s=>{console.log(s)}})}getCreds(){this.http.get("settings/philhealth-credentials",{params:{"filter[program_code]":"cc"===this.program_name||"fp"===this.program_name?"mc":this.program_name}}).subscribe({next:s=>{s.data[0]&&(this.program_creds=s.data[0]),this.getEclaimsList()},error:s=>console.log(s)})}reopenCf2(t,s){this.caserate_list=[s.caserate],this.selected_transmittalNumber=s.pHospitalTransmittalNo,this.modal[t]=!this.modal[t]}openGuide(){this.show_guide=!this.show_guide}toggleModal(t,s){console.log(t),"voucher-details"===t?this.voucher_details=s:(this.selected_pHospitalTransmittalNo=s?.pHospitalTransmittalNo??null,this.selected_caserate_code=s?.caserate.caserate_code??null,this.selected_ticket_number=s?.pReceiptTicketNumber??null,this.selected_series_lhio=s?.pClaimSeriesLhio??null,s&&(this.caserate_list=[s?.caserate])),this.modal[t]=!this.modal[t],"cf2"===t&&!this.modal.cf2&&this.getEclaimsList(),"upload-claims"===t&&!this.modal["upload-claims"]&&this.getEclaimsList(),"upload-required-claims"===t&&!this.modal["upload-required-claims"]&&this.getEclaimsList()}constructor(t,s){this.http=t,this.toastr=s,this.faRotate=c.BF2,this.faUpload=c.JmV,this.faCircleNotch=c.s4k,this.faReceipt=c.Mf0,this.faClipboardQuestion=c.iFU,this.faPenToSquare=c.LFz,this.faXmark=c.Jyw,this.faQuestionCircle=g.wRm,this.pending_list=[],this.modal=[],this.eclaims_list=[],this.is_refreshing=!1,this.show_form=!1,this.show_cf2=!1,this.page=1,this.is_exporting=!1,this.process_name=null,this.show_guide=!1}ngOnInit(){this.patient=this.http.getPatientInfo(),this.patient_philhealth=this.patient.philhealthLatest,this.patient_philhealth?this.getCreds():(this.http.showError("No PhilHealth Details","eClaims Error"),this.show_form=!0)}static{this.\u0275fac=function(s){return new(s||a)(e.rXU(b.k),e.rXU(y.tw))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-eclaims"]],inputs:{program_id:"program_id",program_name:"program_name",selected_case:"selected_case"},standalone:!1,decls:24,vars:15,consts:[[1,"mb-16","w-full"],[1,"block","shadow","p-4","mt-4","rounded-xl","text-gray-600"],[1,"text-sky-500","font-bold","flex","justify-between","py-2"],["class","flex rounded-md border border-yellow-500 bg-yellow-100 text-yellow-700 text-sm font-normal p-3",4,"ngIf"],[1,"text-sm","font-normal"],["type","button","class","w-32 px-3 py-2 rounded-md bg-blue-500 text-sm text-white ml-auto mr-1 disabled:bg-gray-400",3,"disabled","click",4,"ngIf"],["type","button",1,"w-32","px-3","py-2","rounded-md","bg-blue-500","text-sm","text-white","ml-auto","mr-1","disabled:bg-gray-400",3,"click","disabled"],[1,"border","border-slate-200","shadow-md","rounded-xl"],[1,"w-full","bg-blue-500","text-white","rounded-t-xl","p-3","font-semibold","flex","justify-between"],[3,"click",4,"ngIf"],["class","bg-gray-200 btn-save px-2 text-gray-700",3,"click",4,"ngIf"],["class","w-full p-5 overflow-x-auto",4,"ngIf"],["class","p-3",4,"ngIf"],[3,"patient","patient_philhealth","program_name","program_creds","selected_case","caserate_list","toggleModal",4,"ngIf"],[3,"patient","patient_philhealth","program_creds","toggleModal",4,"ngIf"],[3,"patient","program_name","program_id","caserate_list","selected_case","selected_transmittalNumber","toggleModal",4,"ngIf"],[3,"patient","program_name","selected_pHospitalTransmittalNo","caserate_code","selected_ticket_number","modalToggle",4,"ngIf"],[3,"patient","program_name","selected_pHospitalTransmittalNo","caserate_code","selected_ticket_number","selected_series_lhio","modalToggle",4,"ngIf"],[3,"voucher_details","toggleModal",4,"ngIf"],[3,"toggleModal",4,"ngIf"],[1,"flex","rounded-md","border","border-yellow-500","bg-yellow-100","text-yellow-700","text-sm","font-normal","p-3"],[3,"click"],[3,"icon"],[1,"bg-gray-200","btn-save","px-2","text-gray-700",3,"click"],[1,"w-full","p-5","overflow-x-auto"],[1,"table-fixed","w-full","text-sm","text-left","text-gray-500"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700"],["scope","col",1,"py-3","px-3"],["scope","col",1,"py-3","w-1/5"],[4,"ngIf"],["class","bg-white border-b last:border-0",4,"ngFor","ngForOf"],[1,"bg-white","border-b","last:border-0"],[1,"py-4","px-3","text-xs"],[1,"py-4","px-3"],[1,"py-4","px-3","text-center","grid","grid-cols-1"],["type","button",1,"bg-pink-300","text-white","rounded-md","p-0.5","mb-3","disabled:opacity-75",3,"click","disabled"],["class","bg-sky-500 text-white rounded-md p-0.5 mb-3 disabled:opacity-75","type","button",3,"disabled","click",4,"ngIf"],["class","bg-blue-500 text-white rounded-md p-0.5 mb-3 disabled:opacity-75","type","button",3,"disabled","click",4,"ngIf"],["class","bg-rose-500 text-white rounded-md p-0.5 mb-3 disabled:opacity-75","type","button",3,"disabled","click",4,"ngIf"],["class","bg-green-500 text-white rounded-md p-0.5 mb-3 disabled:opacity-75","type","button",3,"disabled","click",4,"ngIf"],["class","bg-orange-500 text-white rounded-md p-0.5 mb-3 disabled:opacity-75","type","button",3,"disabled","click",4,"ngIf"],["type","button",1,"bg-sky-500","text-white","rounded-md","p-0.5","mb-3","disabled:opacity-75",3,"click","disabled"],["type","button",1,"bg-blue-500","text-white","rounded-md","p-0.5","mb-3","disabled:opacity-75",3,"click","disabled"],["type","button",1,"bg-rose-500","text-white","rounded-md","p-0.5","mb-3","disabled:opacity-75",3,"click","disabled"],["type","button",1,"bg-green-500","text-white","rounded-md","p-0.5","mb-3","disabled:opacity-75",3,"click","disabled"],[3,"icon",4,"ngIf"],["animation","spin",3,"icon",4,"ngIf"],["animation","spin",3,"icon"],["type","button",1,"bg-orange-500","text-white","rounded-md","p-0.5","mb-3","disabled:opacity-75",3,"click","disabled"],["colspan","6",1,"text-center","italic"],["colspan","7"],[1,"grid","grid-cols-1","my-16"],[1,"flex","justify-center","text-blue-500"],[1,"flex","justify-center"],[1,"p-3"],[3,"program_id","caserate_details","transmittal_number","eclaims_upload_id"],[3,"toggleModal","patient","patient_philhealth","program_name","program_creds","selected_case","caserate_list"],[3,"toggleModal","patient","patient_philhealth","program_creds"],[3,"toggleModal","patient","program_name","program_id","caserate_list","selected_case","selected_transmittalNumber"],[3,"modalToggle","patient","program_name","selected_pHospitalTransmittalNo","caserate_code","selected_ticket_number"],[3,"modalToggle","patient","program_name","selected_pHospitalTransmittalNo","caserate_code","selected_ticket_number","selected_series_lhio"],[3,"toggleModal","voucher_details"],[3,"toggleModal"]],template:function(s,i){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"span",2)(3,"div"),e.DNE(4,de,2,0,"span",3),e.k0s(),e.j41(5,"div",4),e.DNE(6,_e,2,1,"button",5),e.j41(7,"button",6),e.bIt("click",function(){return i.toggleModal("cf2")}),e.EFF(8," CF2 "),e.k0s()()(),e.j41(9,"div",7)(10,"div",8)(11,"span"),e.EFF(12),e.k0s(),e.DNE(13,pe,3,1,"button",9)(14,he,3,1,"button",10),e.k0s(),e.DNE(15,Ge,22,2,"div",11)(16,Ae,2,4,"div",12),e.k0s()()(),e.DNE(17,De,1,6,"app-pbef",13)(18,$e,1,3,"app-cf1",14)(19,Ye,1,6,"app-cf2",15)(20,Ne,1,5,"app-upload-claims",16)(21,Pe,1,6,"app-upload-required-claims",17)(22,Je,1,1,"app-voucher-details",18)(23,Ve,1,0,"app-eclaims-pdf",19)),2&s&&(e.R7$(4),e.Y8G("ngIf",i.show_form&&!i.program_creds),e.R7$(2),e.Y8G("ngIf",(null==i.caserate_list?null:i.caserate_list.length)>0),e.R7$(),e.Y8G("disabled",!i.program_creds||0===(null==i.caserate_list?null:i.caserate_list.length)),e.R7$(5),e.JRh(2===i.page?"ESOA":"Eclaims"),e.R7$(),e.Y8G("ngIf",2===i.page),e.R7$(),e.Y8G("ngIf",1===i.page),e.R7$(),e.Y8G("ngIf",1===i.page),e.R7$(),e.Y8G("ngIf",2===i.page),e.R7$(),e.Y8G("ngIf",i.modal.pbef),e.R7$(),e.Y8G("ngIf",i.modal.cf1),e.R7$(),e.Y8G("ngIf",i.modal.cf2),e.R7$(),e.Y8G("ngIf",i.modal["upload-claims"]),e.R7$(),e.Y8G("ngIf",i.modal["upload-required-claims"]),e.R7$(),e.Y8G("ngIf",i.modal["voucher-details"]),e.R7$(),e.Y8G("ngIf",i.modal.eclaims_guide))},dependencies:[o.Sq,o.bT,F.aY,M.U,k.o,u,D,N,re,me.q,ce.L],encapsulation:2})}}return a})()},9217:(C,E,d)=>{d.d(E,{u:()=>M});var g=d(177),c=d(4438),e=d(9417),b=d(60),y=d(3318),o=d(2517),F=d(5794);let M=(()=>{class k{onSubmit(){let u;this.is_saving=!0,u=this.consult_date&&this.pt_group?{patient_id:this.patient_id,consult_date:this.consult_date,pt_group:this.pt_group,consult_done:!0}:{},this.http.update("consultation/records/",this.consult_id,u).subscribe({next:p=>{this.is_saving=!1,this.toastr.info("Visit was ended"),this.router.navigate(["/patient/itr",{id:this.patient_id}])},error:p=>console.log(p)})}constructor(u,p,f){this.http=u,this.router=p,this.toastr=f,this.toggleModal=new c.bkB,this.is_saving=!1}closeModal(){this.toggleModal.emit("end_visit")}static{this.\u0275fac=function(p){return new(p||k)(c.rXU(y.k),c.rXU(o.Ix),c.rXU(F.tw))}}static{this.\u0275cmp=c.VBU({type:k,selectors:[["app-end-visit"]],inputs:{consult_id:"consult_id",consult_date:"consult_date",patient_id:"patient_id",pt_group:"pt_group"},outputs:{toggleModal:"toggleModal"},decls:20,vars:5,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"h-40"],[1,"flex","item-start","flex-wrap","pb-5"],[1,"grid","grid-cols-3","px-3","py-3","mt-10","mx-10","w-full","rounded-lg","text-center"],[1,"col-span-3","text-left","mb-2","pb-2","border-b","border-slate-200","font-semibold","text-lg"],[1,"col-span-3","text-left","mb-2","pb-2","text-sm"],[1,"flex","justify-end","py-2","px-5","space-x-4","rounded-b"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-300","rounded","text-sm","font-medium","my-2","px-6","py-2.5","transition","duration-150","ease-in-out",3,"click"],["type","button",1,"text-white","bg-rose-500","enabled:hover:ring-2","enabled:focus:outline-none","enabled:hover:ring-rose-300","disabled:opacity-75","font-medium","rounded","text-sm","my-2","px-6","py-2.5","text-center","transition","duration-150","ease-in-out",3,"click","disabled"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"]],template:function(p,f){1&p&&(c.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),c.EFF(5," End Visit "),c.k0s()(),c.j41(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),c.EFF(10," Do you really want to end this visit? "),c.k0s(),c.j41(11,"div",9),c.EFF(12),c.nI1(13,"date"),c.k0s()()()(),c.j41(14,"div",10)(15,"button",11),c.bIt("click",function(){return f.closeModal()}),c.EFF(16,"Cancel"),c.k0s(),c.j41(17,"button",12),c.bIt("click",function(){return f.onSubmit()}),c.EFF(18,"End Visit"),c.k0s()()()()(),c.nrm(19,"div",13)),2&p&&(c.R7$(12),c.SpI(" Visit date & time: ",c.i5U(13,2,f.consult_date,"MM/dd/yyyy hh:mm:ss a")," "),c.R7$(5),c.Y8G("disabled",f.is_saving))},dependencies:[b.dX,e.YN,g.MD,g.vh],encapsulation:2,changeDetection:0})}}return k})()}}]);