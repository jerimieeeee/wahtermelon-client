"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[980],{9577:(z,T,s)=>{s.d(T,{Y:()=>K});var p=s(6895),o=s(4006),f=s(3396),d=s(2687),e=s(4650),_=s(2216),g=s(4691),Z=s(7185);function b(r,i){if(1&r&&e._UZ(0,"fa-icon",34),2&r){const t=e.oxw();e.Q6J("icon",t.faCircleNotch)}}const l=function(r,i){return{"border-b-0":r,"border-t-0":i}};function A(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td",42),e._uU(2),e.qZA(),e.TgZ(3,"td",43),e._uU(4),e.qZA(),e.TgZ(5,"td",44),e.NdJ("click",function(){const c=e.CHM(t).$implicit,m=e.oxw(2).$implicit,h=e.oxw();return e.KtG(h.closeModal(m,c))}),e._uU(6),e.qZA(),e.TgZ(7,"td",43),e._uU(8),e.qZA(),e.TgZ(9,"td",43),e._uU(10),e.qZA(),e.TgZ(11,"td",43),e._uU(12),e.qZA(),e.TgZ(13,"td",45),e._uU(14),e.qZA(),e.TgZ(15,"td",45),e._uU(16),e.qZA(),e.TgZ(17,"td",45),e._uU(18),e.qZA(),e.TgZ(19,"td",45),e._uU(20),e.qZA(),e.TgZ(21,"td",45),e._uU(22),e.qZA(),e.TgZ(23,"td",45),e._uU(24),e.qZA(),e.TgZ(25,"td",46),e._uU(26),e.qZA()()}if(2&r){const t=i.$implicit,a=i.last,n=i.first;e.xp6(1),e.Q6J("ngClass",e.WLB(26,l,a,n)),e.xp6(1),e.Oqu(t.pPrimaryHCIFee),e.xp6(1),e.Q6J("ngClass",e.WLB(29,l,a,n)),e.xp6(1),e.Oqu(t.pPrimaryProfFee),e.xp6(1),e.Q6J("ngClass",e.WLB(32,l,a,n)),e.xp6(1),e.Oqu(t.pPrimaryCaseRate),e.xp6(1),e.Q6J("ngClass",e.WLB(35,l,a,n)),e.xp6(1),e.Oqu(t.pSecondaryHCIFee),e.xp6(1),e.Q6J("ngClass",e.WLB(38,l,a,n)),e.xp6(1),e.Oqu(t.pSecondaryProfFee),e.xp6(1),e.Q6J("ngClass",e.WLB(41,l,a,n)),e.xp6(1),e.Oqu(t.pSecondaryCaseRate),e.xp6(1),e.Q6J("ngClass",e.WLB(44,l,a,n)),e.xp6(1),e.Oqu(t.pCheckFacilityH1),e.xp6(1),e.Q6J("ngClass",e.WLB(47,l,a,n)),e.xp6(1),e.Oqu(t.pCheckFacilityH2),e.xp6(1),e.Q6J("ngClass",e.WLB(50,l,a,n)),e.xp6(1),e.Oqu(t.pCheckFacilityH3),e.xp6(1),e.Q6J("ngClass",e.WLB(53,l,a,n)),e.xp6(1),e.Oqu(t.pCheckFacilityASC),e.xp6(1),e.Q6J("ngClass",e.WLB(56,l,a,n)),e.xp6(1),e.Oqu(t.pCheckFacilityPCF),e.xp6(1),e.Q6J("ngClass",e.WLB(59,l,a,n)),e.xp6(1),e.Oqu(t.pCheckFacilityMAT),e.xp6(1),e.Q6J("ngClass",e.WLB(62,l,a,n)),e.xp6(1),e.Oqu(t.pCheckFacilityFSDC)}}function v(r,i){if(1&r&&(e.TgZ(0,"table",40),e.YNc(1,A,27,65,"tr",41),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.AMOUNT)}}function U(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"table",47)(1,"tr",48)(2,"td",49),e._uU(3),e.qZA(),e.TgZ(4,"td",50),e._uU(5),e.qZA(),e.TgZ(6,"td",51),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,c=e.oxw();return e.KtG(c.closeModal(n,n.AMOUNT))}),e._uU(7),e.qZA(),e.TgZ(8,"td",50),e._uU(9),e.qZA(),e.TgZ(10,"td",50),e._uU(11),e.qZA(),e.TgZ(12,"td",50),e._uU(13),e.qZA(),e.TgZ(14,"td",52),e._uU(15),e.qZA(),e.TgZ(16,"td",52),e._uU(17),e.qZA(),e.TgZ(18,"td",52),e._uU(19),e.qZA(),e.TgZ(20,"td",52),e._uU(21),e.qZA(),e.TgZ(22,"td",52),e._uU(23),e.qZA(),e.TgZ(24,"td",52),e._uU(25),e.qZA(),e.TgZ(26,"td",53),e._uU(27),e.qZA()()()}if(2&r){const t=e.oxw().$implicit;e.xp6(3),e.Oqu(t.AMOUNT.pPrimaryHCIFee),e.xp6(2),e.Oqu(t.AMOUNT.pPrimaryProfFee),e.xp6(2),e.Oqu(t.AMOUNT.pPrimaryCaseRate),e.xp6(2),e.Oqu(t.AMOUNT.pSecondaryHCIFee),e.xp6(2),e.Oqu(t.AMOUNT.pSecondaryProfFee),e.xp6(2),e.Oqu(t.AMOUNT.pSecondaryCaseRate),e.xp6(2),e.Oqu(t.AMOUNT.pCheckFacilityH1),e.xp6(2),e.Oqu(t.AMOUNT.pCheckFacilityH2),e.xp6(2),e.Oqu(t.AMOUNT.pCheckFacilityH3),e.xp6(2),e.Oqu(t.AMOUNT.pCheckFacilityASC),e.xp6(2),e.Oqu(t.AMOUNT.pCheckFacilityPCF),e.xp6(2),e.Oqu(t.AMOUNT.pCheckFacilityMAT),e.xp6(2),e.Oqu(t.AMOUNT.pCheckFacilityFSDC)}}function q(r,i){if(1&r&&(e.TgZ(0,"tr",35)(1,"td",36),e._uU(2),e.qZA(),e.TgZ(3,"td",36),e._uU(4),e.qZA(),e.TgZ(5,"td",37),e.YNc(6,v,2,1,"table",38),e.YNc(7,U,28,13,"table",39),e.qZA()()),2&r){const t=i.$implicit;e.xp6(1),e.Q6J("rowSpan",t.AMOUNT.length),e.xp6(1),e.Oqu(t.pItemCode),e.xp6(1),e.Q6J("rowSpan",t.AMOUNT.length),e.xp6(1),e.Oqu(t.pCaseRateDescription),e.xp6(2),e.Q6J("ngIf",t.AMOUNT.length),e.xp6(1),e.Q6J("ngIf",!t.AMOUNT.length)}}let N=(()=>{class r{get f(){return this.searchForm.controls}onSubmit(){this.caserate_result=[],this.is_searching=!0,this.searchForm.patchValue({program_code:"cc"!==this.program_name?this.program_name:"mc"}),this.searchForm.patchValue({rvs:this.searchForm.value.rvs.toUpperCase(),description:this.searchForm.value.description.toUpperCase(),icd10:this.searchForm.value.icd10.toUpperCase()}),this.http.post("eclaims/case-rate",this.searchForm.value).subscribe({next:t=>{this.is_searching=!1,this.caserate_result.push(t.CASERATES),console.log(typeof this.caserate_result,this.caserate_result)},error:t=>{console.log(t),this.is_searching=!1,this.toastr.error(t.error.message,"Caserate error",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0})}})}closeModal(t,a){let n;n=t?{name:"search-caserate",amount:a,data:t}:"search-caserate",this.toggleModal.emit(n)}constructor(t,a,n){this.formBuilder=t,this.http=a,this.toastr=n,this.toggleModal=new e.vpe,this.faSave=f.r6l,this.faCircleNotch=d.IJ7,this.faSearch=d.wn1,this.faMagnifyingGlass=d.Y$T,this.is_searching=!1,this.show_error=!1,this.required_message="Required field",this.searchForm=new o.cw({program_code:new o.NI(""),description:new o.NI(""),icd10:new o.NI(""),rvs:new o.NI("")}),this.caserate_result=[]}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(o.qu),e.Y36(g.O),e.Y36(Z._W))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-search-caserate"]],inputs:{selected_tb_consult:"selected_tb_consult",program_name:"program_name"},outputs:{toggleModal:"toggleModal"},standalone:!0,features:[e.jDz],decls:94,vars:4,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-5xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-orange-400"],[1,"text-sm","font-bold","text-white"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"text-left","text-gray-500","m-5",3,"formGroup","submit"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-4"],["for","description"],["type","text","name","description","id","description","formControlName","description",1,"input"],[1,"col-span-3"],["for","icd10"],["type","text","name","icd10","id","icd10","formControlName","icd10",1,"input"],["for","rvs"],["type","text","name","rvs","id","rvs","formControlName","rvs",1,"input"],[1,"col-span-2","justify-end"],["type","submit",1,"btn-save","mt-6","-py-0.5"],["spin","true",3,"icon",4,"ngIf"],[1,"flex","mx-3","justify-center"],[1,"table-auto","text-xs","border","border-slate-300","border-collapse"],["colspan","15",1,"w-[900px]"],["rowspan","3",1,"border","border-slate-300","w-[70px]"],["rowspan","3",1,"border","border-slate-300","w-[198px]"],["colspan","3",1,"border","border-slate-300","w-[216px]"],["colspan","7",1,"border","border-slate-300","w-[200px]"],["rowspan","2",1,"border","border-slate-300","w-[72px]"],["colspan","3",1,"border","border-slate-300","text-[0.7rem]","w-[100px]"],["rowspan","2",1,"border","border-slate-300"],[1,"border","border-slate-300","text-[0.7rem]"],["class","border border-slate-300",4,"ngFor","ngForOf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-gray-400",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],["spin","true",3,"icon"],[1,"border","border-slate-300"],[1,"border","border-slate-300",3,"rowSpan"],["colspan","13",1,"p-0","m-0"],["class","table-auto p-0 m-0 w-full border-0",4,"ngIf"],["class","table-auto p-0 m-0 w-full",4,"ngIf"],[1,"table-auto","p-0","m-0","w-full","border-0"],[4,"ngFor","ngForOf"],[1,"px-1","border","border-slate-300","w-[72px]","border-l-0",3,"ngClass"],[1,"px-1","border","border-slate-300","w-[72px]",3,"ngClass"],[1,"px-1","border","border-slate-300","w-[72px]","text-blue-500","font-semibold","hover:cursor-pointer",3,"ngClass","click"],[1,"px-1","border","border-slate-300",3,"ngClass"],[1,"px-1","border","border-slate-300","border-r-0",3,"ngClass"],[1,"table-auto","p-0","m-0","w-full"],[1,"h-full","py-8"],[1,"px-1","border","border-slate-300","border-y-0","border-l-0","w-[72px]"],[1,"px-1","border","border-slate-300","border-y-0","w-[72px]"],[1,"px-1","border","border-slate-300","border-y-0","w-[72px]","text-blue-500","font-semibold","hover:cursor-pointer",3,"click"],[1,"px-1","border","border-slate-300","border-y-0"],[1,"px-1","border","border-slate-300","border-y-0","border-r-0"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5," Search Case Rate "),e.qZA()(),e.TgZ(6,"div",5)(7,"form",6),e.NdJ("submit",function(){return a.onSubmit()}),e.TgZ(8,"div",7)(9,"div",8)(10,"label",9),e._uU(11,"Description"),e.qZA(),e._UZ(12,"input",10),e.qZA(),e.TgZ(13,"div",11)(14,"label",12),e._uU(15,"ICD10 Code"),e.qZA(),e._UZ(16,"input",13),e.qZA(),e.TgZ(17,"div",11)(18,"label",14),e._uU(19,"RVS Code"),e.qZA(),e._UZ(20,"input",15),e.qZA(),e.TgZ(21,"div",16)(22,"button",17),e.YNc(23,b,1,1,"fa-icon",18),e._uU(24),e.qZA()()()(),e.TgZ(25,"div",19)(26,"table",20)(27,"thead")(28,"tr")(29,"th",21),e._uU(30,"Case Rate Group"),e.qZA()(),e.TgZ(31,"tr")(32,"th",22),e._uU(33,"ICD10/ "),e._UZ(34,"br"),e._uU(35,"RVS Code"),e.qZA(),e.TgZ(36,"th",23),e._uU(37,"Description"),e.qZA(),e.TgZ(38,"th",24),e._uU(39,"First Case Rate"),e.qZA(),e.TgZ(40,"th",24),e._uU(41,"Second Case Rate"),e.qZA(),e.TgZ(42,"th",25),e._uU(43,"Applicable Health Care Institutions "),e._UZ(44,"br"),e._uU(45,"Note: If licensed and capable to perform the procedure"),e.qZA()(),e.TgZ(46,"tr")(47,"th",26),e._uU(48,"HCI "),e._UZ(49,"br"),e._uU(50," Fee"),e.qZA(),e.TgZ(51,"th",26),e._uU(52,"Prof "),e._UZ(53,"br"),e._uU(54," Fee"),e.qZA(),e.TgZ(55,"th",26),e._uU(56,"Case"),e._UZ(57,"br"),e._uU(58," Rate"),e.qZA(),e.TgZ(59,"th",26),e._uU(60,"HCI "),e._UZ(61,"br"),e._uU(62," Fee"),e.qZA(),e.TgZ(63,"th",26),e._uU(64,"Prof "),e._UZ(65,"br"),e._uU(66," Fee"),e.qZA(),e.TgZ(67,"th",26),e._uU(68,"Case "),e._UZ(69,"br"),e._uU(70," Rate"),e.qZA(),e.TgZ(71,"th",27),e._uU(72,"Level"),e.qZA(),e.TgZ(73,"th",28),e._uU(74,"ASC"),e.qZA(),e.TgZ(75,"th",28),e._uU(76,"PCF"),e.qZA(),e.TgZ(77,"th",28),e._uU(78,"MCP"),e.qZA(),e.TgZ(79,"th",28),e._uU(80,"FSDC"),e.qZA()(),e.TgZ(81,"tr")(82,"th",29),e._uU(83,"1"),e.qZA(),e.TgZ(84,"th",29),e._uU(85,"2"),e.qZA(),e.TgZ(86,"th",29),e._uU(87,"3"),e.qZA()()(),e.TgZ(88,"tbody"),e.YNc(89,q,8,6,"tr",30),e.qZA()()()(),e.TgZ(90,"div",31)(91,"button",32),e.NdJ("click",function(){return a.closeModal()}),e._uU(92,"Close"),e.qZA()()()()(),e._UZ(93,"div",33)),2&t&&(e.xp6(7),e.Q6J("formGroup",a.searchForm),e.xp6(16),e.Q6J("ngIf",a.is_searching),e.xp6(1),e.hij(" ",a.is_searching?"":"Search"," "),e.xp6(65),e.Q6J("ngForOf",a.caserate_result))},dependencies:[p.ez,p.mk,p.sg,p.O5,o.UX,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,_.uH,_.BN]}),r})();var w=s(7272),C=s(9646),y=s(9300),F=s(1884),I=s(8372),x=s(8505),O=s(3900),S=s(262),M=s(4004),J=s(7579),u=s(1079);const E=[{caserate_code:"CR4656",code:"89221",description:"DIRECTLY OBSERVED TREATMENT SHORT-COURSE INTENSIVE PHASE",hci_fee:"2500.00",prof_fee:"0.00",caserate_fee:"2500.00"},{caserate_code:"CR4657",code:"89222",description:"DIRECTLY OBSERVED TREATMENT SHORT-COURSE MAINTENANCE PHASE",hci_fee:"1500.00",prof_fee:"0.00",caserate_fee:"1500.00"}],P=[{caserate_code:"CR4687",code:"99460",description:"EXPANDED NEWBORN CARE PACKAGE",hci_fee:"2450.00",prof_fee:"500.00",caserate_fee:"2950.00"}];function Q(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",14)(1,"div",15)(2,"strong"),e._uU(3),e.qZA(),e._UZ(4,"br"),e._uU(5),e.ALo(6,"date"),e._UZ(7,"br"),e._uU(8),e._UZ(9,"br"),e.qZA(),e.TgZ(10,"div",16)(11,"button",17),e.NdJ("click",function(){const c=e.CHM(t).index,m=e.oxw();return e.KtG(m.selectCaserate(c))}),e._UZ(12,"fa-icon",18),e.qZA()()()}if(2&r){const t=i.$implicit,a=e.oxw();e.xp6(3),e.AsE("",t.code," - ",t.caserate_code,""),e.xp6(2),e.hij(" ",e.Dn7(6,5,t.caserate_date,"MM/dd/yyyy","Asia/Manila")," "),e.xp6(3),e.hij(" ",t.description," "),e.xp6(4),e.Q6J("icon",a.faEdit)}}function k(r,i){if(1&r&&(e.TgZ(0,"option",23),e._uU(1),e.qZA()),2&r){const t=i.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.AsE("",t.caserate_code," - ",t.code,"")}}function H(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",19)(1,"label",20),e._uU(2,"Select preloaded caserate"),e.qZA(),e.TgZ(3,"select",21),e.NdJ("change",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.selectPreloadedCaserate())})("ngModelChange",function(n){e.CHM(t);const c=e.oxw();return e.KtG(c.loaded_caserate=n)}),e.YNc(4,k,2,3,"option",22),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.loaded_caserate),e.xp6(1),e.Q6J("ngForOf",t.preloaded_caserate)}}function B(r,i){if(1&r&&(e.TgZ(0,"div",58)(1,"h5",59)(2,"strong"),e._uU(3),e.qZA(),e._uU(4),e.qZA()()),2&r){const t=i.item,a=i.searchTerm;e.xp6(1),e.Q6J("ngOptionHighlight",a),e.xp6(2),e.hij("",t.icd10_code,":"),e.xp6(1),e.hij(" ",t.icd10_desc,"")}}function R(r,i){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const t=i.item;e.xp6(1),e.AsE(" ",t.icd10_code,": ",t.icd10_desc," ")}}function L(r,i){if(1&r&&(e.TgZ(0,"option",60),e._uU(1),e.qZA()),2&r){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.AsE("",t.last_name,", ",t.first_name,"")}}function Y(r,i){1&r&&(e.TgZ(0,"div")(1,"label",86),e._uU(2,"Medicine Total Amount"),e.qZA(),e._UZ(3,"input",87),e.qZA())}function j(r,i){1&r&&(e.TgZ(0,"div")(1,"label",88),e._uU(2,"Examitation Total Amount"),e.qZA(),e._UZ(3,"input",89),e.qZA())}function W(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"div")(2,"label",61),e._uU(3,"HCI Total Actual Charges"),e.qZA(),e._UZ(4,"input",62),e.qZA(),e.TgZ(5,"div")(6,"label",63),e._uU(7,"Amount after application of HCI Discount"),e.qZA(),e.TgZ(8,"input",64),e.NdJ("change",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.computeTotal("hci_pTotalAmount"))}),e.qZA()(),e.TgZ(9,"div")(10,"label",65),e._uU(11,"HCI Philhealth Benefit"),e.qZA(),e.TgZ(12,"input",66),e.NdJ("change",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.computeTotal("hci_pTotalAmount"))}),e.qZA()(),e.TgZ(13,"fieldset",45)(14,"label",67),e._uU(15,"HCI Total Amount"),e.qZA(),e._UZ(16,"input",68),e.qZA(),e.TgZ(17,"div")(18,"label",69),e._uU(19,"Professional Total Actual Charges"),e.qZA(),e._UZ(20,"input",70),e.qZA(),e.TgZ(21,"div")(22,"label",71),e._uU(23,"Amount after application of Professional Discount"),e.qZA(),e.TgZ(24,"input",72),e.NdJ("change",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.computeTotal("prof_pTotalAmount"))}),e.qZA()(),e.TgZ(25,"div")(26,"label",73),e._uU(27,"Professional Philhealth Benefit"),e.qZA(),e.TgZ(28,"input",74),e.NdJ("change",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.computeTotal("prof_pTotalAmount"))}),e.qZA()(),e.TgZ(29,"fieldset",45)(30,"label",75),e._uU(31,"Professional Total Amount"),e.qZA(),e._UZ(32,"input",76),e.qZA(),e.TgZ(33,"div",77),e._UZ(34,"input",78),e.TgZ(35,"label",79),e._uU(36,"With Medicine?"),e.qZA()(),e.YNc(37,Y,4,0,"div",53),e.TgZ(38,"div",77),e._UZ(39,"input",80),e.TgZ(40,"label",81),e._uU(41,"With Examination"),e.qZA()(),e.YNc(42,j,4,0,"div",53),e.TgZ(43,"div",77),e._UZ(44,"input",82),e.TgZ(45,"label",83),e._uU(46,"With HMO"),e.qZA()(),e.TgZ(47,"div",77),e._UZ(48,"input",84),e.TgZ(49,"label",85),e._uU(50,"Others (i.e., PCSO, Promissory note, etc.)"),e.qZA()()()}if(2&r){const t=e.oxw(2);e.xp6(37),e.Q6J("ngIf",t.caserateForm.value.meds_flag),e.xp6(5),e.Q6J("ngIf",t.caserateForm.value.meds_pExaminations_flag)}}function G(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",24)(1,"div")(2,"label",25),e._uU(3,"Caserate date"),e.qZA(),e._UZ(4,"input",26),e.qZA(),e.TgZ(5,"div")(6,"label",27),e._uU(7,"Admission Diagnosis"),e.qZA(),e._UZ(8,"input",28),e.qZA(),e.TgZ(9,"div")(10,"label",29),e._uU(11,"Discharge Diagnosis"),e.qZA(),e._UZ(12,"input",30),e.qZA(),e.TgZ(13,"div")(14,"label",31),e._uU(15,"ICD10 Code"),e.qZA(),e.TgZ(16,"ng-select",32),e.ALo(17,"async"),e.YNc(18,B,5,3,"ng-template",33),e.YNc(19,R,2,2,"ng-template",34),e.qZA()(),e.TgZ(20,"div")(21,"label",35),e._uU(22,"Case Rate Code"),e.qZA(),e._UZ(23,"input",36),e.qZA(),e.TgZ(24,"div")(25,"label",37),e._uU(26,"RVS Code"),e.qZA(),e._UZ(27,"input",38),e.qZA(),e.TgZ(28,"div")(29,"label",39),e._uU(30,"Description"),e.qZA(),e._UZ(31,"input",40),e.qZA(),e.TgZ(32,"div")(33,"label",41),e._uU(34,"HCI Fee"),e.qZA(),e.TgZ(35,"input",42),e.NdJ("change",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.computeTotal("caserate_fee"))}),e.qZA()(),e.TgZ(36,"div")(37,"label",43),e._uU(38,"Prof Fee"),e.qZA(),e.TgZ(39,"input",44),e.NdJ("change",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.computeTotal("caserate_fee"))}),e.qZA()(),e.TgZ(40,"fieldset",45)(41,"label",46),e._uU(42,"Case Rate Fee"),e.qZA(),e._UZ(43,"input",47),e.qZA(),e.TgZ(44,"div")(45,"label",48),e._uU(46,"Caserate attendant"),e.qZA(),e.TgZ(47,"select",49),e.YNc(48,L,2,3,"option",50),e.qZA()(),e.TgZ(49,"div"),e._UZ(50,"input",51),e.TgZ(51,"label",52),e._uU(52,"With Enough Benefit?"),e.qZA()(),e.YNc(53,W,51,2,"div",53),e.TgZ(54,"div",54)(55,"div",55)(56,"button",56),e._UZ(57,"fa-icon",57),e._uU(58),e.qZA()()()()}if(2&r){const t=e.oxw();e.xp6(16),e.Q6J("items",e.lcZ(17,11,t.fdx$))("multiple",!0)("loading",t.fdxLoading)("typeahead",t.searchInput$)("multiple",!1),e.xp6(32),e.Q6J("ngForOf",t.attendant),e.xp6(5),e.Q6J("ngIf",!t.caserateForm.value.enough_benefit_flag),e.xp6(3),e.Q6J("disabled",t.caserateForm.invalid||t.is_saving),e.xp6(1),e.Q6J("icon",t.is_saving?t.faCircleNotch:t.faSave)("spin",t.is_saving),e.xp6(1),e.hij(" ",t.caserateForm.value.id?t.is_saving?"Updating":"Update":t.is_saving?"Saving":"Save"," ")}}function V(r,i){if(1&r&&(e.TgZ(0,"div",90)(1,"div",91),e._UZ(2,"fa-icon",92),e.qZA(),e.TgZ(3,"div",55),e._uU(4," Fetching caserate details... "),e.qZA()()),2&r){const t=e.oxw();e.xp6(2),e.Q6J("icon",t.faCircleNotch)}}function $(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"app-search-caserate",93),e.NdJ("toggleModal",function(n){e.CHM(t);const c=e.oxw();return e.KtG(c.toggleModal(n))}),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("program_name",t.program_name)}}let K=(()=>{class r{selectPreloadedCaserate(){console.log(this.loaded_caserate),this.caserateForm.patchValue({...this.loaded_caserate})}selectCaserate(t){this.patchData(this.caserate_list[t])}onSubmit(){this.is_saving=!0,this.http.post("eclaims/eclaims-caserate",this.caserateForm.value).subscribe({next:t=>{this.toastr.success("Successfuly recorded.","Caserate"),this.is_saving=!1,this.getCaserate()},error:t=>{console.log(t),this.is_saving=!1}})}getCaserate(){this.show_form=!1,this.http.get("eclaims/eclaims-caserate",{params:{program_id:this.program_id,program_desc:this.program_name}}).subscribe({next:a=>{console.log(a),this.caserate_list=a.data,this.createForm()},error:a=>console.log(a)})}createForm(t){this.caserateForm=this.formBuilder.nonNullable.group({id:[null],patient_id:[this.patient_id],program_desc:[this.program_name],program_id:[this.program_id],caserate_date:[null,o.kI.required],admit_dx:[null,o.kI.required],caserate_code:[null,o.kI.required],code:[null,o.kI.required],description:[null,o.kI.required],discharge_dx:[null,o.kI.required],icd10_code:[null,o.kI.required],hci_fee:[null,o.kI.required],prof_fee:[null,o.kI.required],caserate_fee:[null,o.kI.required],caserate_attendant:[null,o.kI.required],enough_benefit_flag:[!0],hmo_flag:[!1],others_flag:[!1],hci_pTotalActualCharges:[null],hci_pDiscount:[null],hci_pPhilhealthBenefit:[null],hci_pTotalAmount:[null],prof_pTotalActualCharges:[null],prof_pDiscount:[null],prof_pPhilhealthBenefit:[null],prof_pTotalAmount:[null],meds_flag:[!1],meds_pDMSTotalAmount:[null],meds_pExaminations_flag:[!1],meds_pExamTotalAmount:[null]}),t&&this.patchData(t),this.show_form=!0}loadFdx(t){this.fdx$=(0,w.z)((0,C.of)(t),this.searchInput$.pipe((0,y.h)(a=>null!==a&&a.length>=this.minLengthTerm),(0,F.x)(),(0,I.b)(800),(0,x.b)(()=>this.fdxLoading=!0),(0,O.w)(a=>this.getFdx(a).pipe((0,S.K)(()=>(0,C.of)([])),(0,x.b)(()=>this.fdxLoading=!1)))))}getFdx(t=null){return this.http.get("libraries/icd10",{params:{"filter[search]":t}}).pipe((0,M.U)(a=>a.data))}loadSelected(){let t=[],a=[];this.final_dx&&Object.keys(this.final_dx).length>0?(Object.entries(this.final_dx).forEach(([n,c],m)=>{let h=c;t.push(h.icd10_code.toString()),a.push(h.lib_icd10)}),this.loadFdx(a),this.selectedFdx=t):this.loadFdx([])}patchData(t){this.caserateForm.patchValue({...t}),console.log(this.caserateForm.value)}loadContent(t){this.caserateForm.patchValue({id:null,caserate_date:null,admit_dx:"",caserate_code:t.data.pCaseRateCode,code:t.data.pItemCode,description:t.data.pCaseRateDescription,hci_fee:t.amount.pPrimaryHCIFee,prof_fee:t.amount.pPrimaryProfFee,caserate_fee:t.amount.pPrimaryCaseRate,caserate_attendant:""})}toggleModal(t){let a;t.data?(a=t.name,this.loadContent(t)):a=t,this.modals[a]=!this.modals[a]}get f(){return this.caserateForm.controls}loadLibraries(){this.http.get("users",{params:{attendant_flag:this.program_name}}).subscribe({next:t=>{this.attendant=t.data,this.getCaserate()}})}constructor(t,a,n){this.http=t,this.toastr=a,this.formBuilder=n,this.faSave=f.r6l,this.faCircleNotch=d.IJ7,this.faSearch=d.wn1,this.faEdit=f.Xcf,this.modals=[],this.show_form=!1,this.is_saving=!1,this.caserateForm=function D(){return new o.cw({id:new o.NI(""),patient_id:new o.NI(""),program_desc:new o.NI(""),program_id:new o.NI(""),caserate_date:new o.NI(""),admit_dx:new o.NI(""),caserate_code:new o.NI(""),code:new o.NI(""),description:new o.NI(""),discharge_dx:new o.NI(""),icd10_code:new o.NI(""),hci_fee:new o.NI(null),prof_fee:new o.NI(null),caserate_fee:new o.NI(null),caserate_attendant:new o.NI(null),enough_benefit_flag:new o.NI(!1),hmo_flag:new o.NI(!1),others_flag:new o.NI(!1),hci_pTotalActualCharges:new o.NI(null),hci_pDiscount:new o.NI(null),hci_pPhilhealthBenefit:new o.NI(null),hci_pTotalAmount:new o.NI(null),prof_pTotalActualCharges:new o.NI(null),prof_pDiscount:new o.NI(null),prof_pPhilhealthBenefit:new o.NI(null),prof_pTotalAmount:new o.NI(null),meds_flag:new o.NI(!1),meds_pDMSTotalAmount:new o.NI(null),meds_pExaminations_flag:new o.NI(!1),meds_pExamTotalAmount:new o.NI(null)})}(),this.searchInput$=new J.x,this.minLengthTerm=3,this.fdxLoading=!1,this.tb_caserate=E,this.cc_caserate=P}computeTotal(t){"prof_pTotalAmount"===t&&this.caserateForm.patchValue({prof_pTotalAmount:Number(this.caserateForm.value.prof_pDiscount)-Number(this.caserateForm.value.prof_pPhilhealthBenefit)}),"hci_pTotalAmount"===t&&this.caserateForm.patchValue({hci_pTotalAmount:Number(this.caserateForm.value.hci_pDiscount)-Number(this.caserateForm.value.hci_pPhilhealthBenefit)}),"caserate_fee"===t&&this.caserateForm.patchValue({caserate_fee:Number(this.caserateForm.value.hci_fee)+Number(this.caserateForm.value.prof_fee)})}ngOnInit(){switch(this.loadLibraries(),this.loadSelected(),this.program_name){case"tb":this.preloaded_caserate=this.tb_caserate;break;case"cc":this.preloaded_caserate=this.cc_caserate}}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(g.O),e.Y36(Z._W),e.Y36(o.qu))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-caserate"]],inputs:{program_id:"program_id",program_name:"program_name",patient_id:"patient_id"},standalone:!0,features:[e.jDz],decls:20,vars:7,consts:[[1,"grid","grid-cols-3","gap-4","mt-4"],[1,"shadow-md","rounded-md","col-span-1"],[1,"bg-blue-500","text-white","rounded-t-md","p-3","flex","justify-between"],[1,"rounded-b-md","grid","grid-cols-1"],["class","grid grid-cols-6 border-t border-slate-200",4,"ngFor","ngForOf"],[1,"shadow-md","rounded-md","col-span-2"],[1,"bg-gray-100","text-blue-500","px-3","rounded-md",3,"click"],[1,"text-sm","font-semibold",3,"icon"],[1,"rounded-b-md","border-x","border-b","border-slate-200","grid","grid-cols-1"],["class","flex mt-5 mx-5",4,"ngIf"],[1,"m-5",3,"formGroup","ngSubmit"],["class","grid grid-cols-1 gap-2 w-full",4,"ngIf"],["class","grid grid-cols-1 my-20",4,"ngIf"],[3,"program_name","toggleModal",4,"ngIf"],[1,"grid","grid-cols-6","border-t","border-slate-200"],[1,"col-span-5","m-2","text-sm"],[1,"col-span-1","text-orange-500","m-2"],["type","button",3,"click"],[3,"icon"],[1,"flex","mt-5","mx-5"],["for","loaded_caserate",1,"w-1/2","mt-2"],["name","loaded_caserate","id","loaded_caserate",1,"w-1/2","input",3,"ngModel","change","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"grid","grid-cols-1","gap-2","w-full"],["for","caserate_date"],["type","date","name","caserate_date","id","caserate_date","formControlName","caserate_date",1,"input"],["for","admit_dx"],["type","text","name","admit_dx","id","admit_dx","formControlName","admit_dx",1,"input"],["for","discharge_dx"],["type","text","name","discharge_dx","id","discharge_dx","formControlName","discharge_dx",1,"input"],["for","icd10_code"],["placeholder","search","typeToSearchText","search...","formControlName","icd10_code","bindValue","icd10_code","bindLabel","icd10_desc","notFoundText","No records found",1,"select-chips",3,"items","multiple","loading","typeahead"],["ng-option-tmp",""],["ng-label-tmp",""],["for","caserate_code"],["type","text","name","caserate_code","id","caserate_code","formControlName","caserate_code",1,"input"],["for","code"],["type","text","name","code","id","code","formControlName","code",1,"input"],["for","description"],["type","text","name","description","id","description","formControlName","description",1,"input"],["for","hci_fee"],["type","number","name","hci_fee","id","hci_fee","formControlName","hci_fee",1,"input",3,"change"],["for","prof_fee"],["type","number","name","prof_fee","id","prof_fee","formControlName","prof_fee",1,"input",3,"change"],["disabled",""],["for","caserate_fee"],["type","number","name","caserate_fee","id","caserate_fee","formControlName","caserate_fee",1,"input"],["for","caserate_attendant"],["name","caserate_attendant","id","caserate_attendant","formControlName","caserate_attendant",1,"input"],[3,"value",4,"ngFor","ngForOf"],["type","checkbox","name","enough_benefit_flag","id","enough_benefit_flag","formControlName","enough_benefit_flag",1,"input-checkbox"],["for","enough_benefit_flag",1,"pl-2"],[4,"ngIf"],[1,"my-5"],[1,"flex","justify-center"],["type","submit",1,"btn-save","font-semibold","px-10",3,"disabled"],[1,"pr-2",3,"icon","spin"],[1,"whitespace-normal"],[1,"text-gray-700",3,"ngOptionHighlight"],[3,"value"],["for","hci_pTotalActualCharges"],["type","number","name","hci_pTotalActualCharges","id","hci_pTotalActualCharges","formControlName","hci_pTotalActualCharges",1,"input"],["for","hci_pDiscount"],["type","number","name","hci_pDiscount","id","hci_pDiscount","formControlName","hci_pDiscount",1,"input",3,"change"],["for","hci_pPhilhealthBenefit"],["type","number","name","hci_pPhilhealthBenefit","id","hci_pPhilhealthBenefit","formControlName","hci_pPhilhealthBenefit",1,"input",3,"change"],["for","hci_pTotalAmount"],["type","number","name","hci_pTotalAmount","id","hci_pTotalAmount","formControlName","hci_pTotalAmount","disabled","",1,"input"],["for","prof_pTotalActualCharges"],["type","number","name","prof_pTotalActualCharges","id","prof_pTotalActualCharges","formControlName","prof_pTotalActualCharges",1,"input"],["for","prof_pDiscount"],["type","number","name","prof_pDiscount","id","prof_pDiscount","formControlName","prof_pDiscount",1,"input",3,"change"],["for","prof_pPhilhealthBenefit"],["type","number","name","prof_pPhilhealthBenefit","id","prof_pPhilhealthBenefit","formControlName","prof_pPhilhealthBenefit",1,"input",3,"change"],["for","prof_pTotalAmount"],["type","number","name","prof_pTotalAmount","id","prof_pTotalAmount","formControlName","prof_pTotalAmount",1,"input"],[1,"mt-2"],["type","checkbox","name","meds_flag","id","meds_flag","formControlName","meds_flag",1,"input-checkbox"],["for","meds_flag",1,"pl-2"],["type","checkbox","name","meds_pExaminations_flag","id","meds_pExaminations_flag","formControlName","meds_pExaminations_flag",1,"input-checkbox"],["for","meds_pExaminations_flag",1,"pl-2"],["type","checkbox","name","hmo_flag","id","hmo_flag","formControlName","hmo_flag",1,"input-checkbox"],["for","hmo_flag",1,"pl-2"],["type","checkbox","name","others_flag","id","others_flag","formControlName","others_flag",1,"input-checkbox"],["for","others_flag",1,"pl-2"],["for","meds_pDMSTotalAmount"],["type","number","name","meds_pDMSTotalAmount","id","meds_pDMSTotalAmount","formControlName","meds_pDMSTotalAmount",1,"input"],["for","meds_pExamTotalAmount"],["type","number","name","meds_pExamTotalAmount","id","meds_pExamTotalAmount","formControlName","meds_pExamTotalAmount",1,"input"],[1,"grid","grid-cols-1","my-20"],[1,"flex","justify-center","text-blue-500"],["spin","true",3,"icon"],[3,"program_name","toggleModal"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span"),e._uU(4,"Caserate List"),e.qZA()(),e.TgZ(5,"div",3),e.YNc(6,Q,13,9,"div",4),e.qZA()(),e.TgZ(7,"div",5)(8,"div",2)(9,"span"),e._uU(10,"Caserate"),e.qZA(),e.TgZ(11,"button",6),e.NdJ("click",function(){return a.toggleModal("search-caserate")}),e._UZ(12,"fa-icon",7),e._uU(13," search "),e.qZA()(),e.TgZ(14,"div",8),e.YNc(15,H,5,2,"div",9),e.TgZ(16,"form",10),e.NdJ("ngSubmit",function(){return a.onSubmit()}),e.YNc(17,G,59,13,"div",11),e.YNc(18,V,5,1,"div",12),e.qZA()()()(),e.YNc(19,$,1,1,"app-search-caserate",13)),2&t&&(e.xp6(6),e.Q6J("ngForOf",a.caserate_list),e.xp6(6),e.Q6J("icon",a.faSearch),e.xp6(3),e.Q6J("ngIf",a.show_form),e.xp6(1),e.Q6J("formGroup",a.caserateForm),e.xp6(1),e.Q6J("ngIf",a.show_form),e.xp6(1),e.Q6J("ngIf",!a.show_form),e.xp6(1),e.Q6J("ngIf",a.modals["search-caserate"]))},dependencies:[p.ez,p.sg,p.O5,p.Ov,p.uU,o.UX,o._Y,o.YN,o.Kr,o.Fj,o.wV,o.Wl,o.EJ,o.JJ,o.JL,o.sg,o.u,_.uH,_.BN,N,u.A0,u.w9,u.ir,u.mR,o.u5,o.On]}),r})()}}]);