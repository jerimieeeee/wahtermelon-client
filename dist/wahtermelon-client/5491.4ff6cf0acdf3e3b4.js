"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[5491],{5491:(Ot,b,c)=>{c.r(b),c.d(b,{KonsultaModule:()=>At});var _=c(177),x=c(3895),v=c(1626),F=c(614),p=c(5383),y=c(2288),R=c(2578),t=c(4438),h=c(3318),g=c(5794),k=c(1410),d=c(9417),m=c(60);const j=n=>({"bg-gray-50":n});function G(n,o){if(1&n&&t.nrm(0,"fa-icon",19),2&n){const e=t.XpG(2);t.Y8G("icon",e.faCircleCheck)}}function w(n,o){if(1&n&&t.nrm(0,"fa-icon",20),2&n){const e=t.XpG(2);t.Y8G("icon",e.faSpinner)}}function C(n,o){if(1&n&&t.nrm(0,"fa-icon",19),2&n){const e=t.XpG(2);t.Y8G("icon",e.faCircleCheck)}}function E(n,o){if(1&n&&t.nrm(0,"fa-icon",20),2&n){const e=t.XpG(2);t.Y8G("icon",e.faSpinner)}}function $(n,o){if(1&n){const e=t.RV6();t.j41(0,"tr",7)(1,"th",8)(2,"div",9)(3,"div",10)(4,"input",11),t.mxI("ngModelChange",function(i){const s=t.eBV(e).$implicit,r=t.XpG();return t.DH7(r.saving_list[s.patient.id],i)||(r.saving_list[s.patient.id]=i),t.Njj(i)}),t.bIt("change",function(){const i=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.addToSaving(i.patient.id))}),t.k0s()(),t.j41(5,"div",12),t.EFF(6),t.k0s()()(),t.j41(7,"td",13),t.EFF(8),t.nI1(9,"date"),t.nrm(10,"br"),t.EFF(11),t.nI1(12,"date"),t.nrm(13,"br"),t.k0s(),t.j41(14,"td",14),t.EFF(15),t.nI1(16,"date"),t.nrm(17,"br"),t.EFF(18),t.k0s(),t.j41(19,"td",14),t.EFF(20),t.k0s(),t.j41(21,"td",14),t.EFF(22),t.k0s(),t.j41(23,"td",13)(24,"button",15),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.validate(i,0))}),t.DNE(25,G,1,1,"fa-icon",16)(26,w,1,1,"fa-icon",17),t.EFF(27),t.k0s(),t.j41(28,"button",18),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.validate(i,1))}),t.DNE(29,C,1,1,"fa-icon",16)(30,E,1,1,"fa-icon",17),t.EFF(31),t.k0s()()()}if(2&n){const e=o.$implicit,a=o.odd,i=t.XpG();t.Y8G("ngClass",t.eq3(38,j,a)),t.R7$(4),t.Y8G("disabled",!e.validated),t.R50("ngModel",i.saving_list[e.patient.id]),t.R7$(2),t.LHq(" ",e.patient.last_name,", ",e.patient.first_name," ","NA"===e.patient.middle_name?"":e.patient.middle_name," ","NA"===e.patient.suffix_name?"":e.patient.suffix_name," "),t.R7$(),t.HbH(e.enlistment_date<e.konsulta_registration[0].assigned_date?"text-red-500":""),t.R7$(),t.SpI(" ",t.brH(9,26,e.konsulta_registration[0].assigned_date,"MM/dd/yyyy","Asia/Manila")," "),t.R7$(3),t.SpI(" ",t.brH(12,30,e.enlistment_date,"MM/dd/yyyy","Asia/Manila")," "),t.R7$(4),t.SpI(" ",t.brH(16,34,e.patient.birthdate,"MM/dd/yyyy","Asia/Manila")," "),t.R7$(3),t.SpI(" [",e.patient.gender,"] "),t.R7$(2),t.SpI(" ",e.philhealth_id," "),t.R7$(2),t.LHq(" ",e.konsulta_registration[0].last_name,", ",e.konsulta_registration[0].first_name," ","NA"===e.konsulta_registration[0].middle_name?"":e.konsulta_registration[0].middle_name," ","NA"===e.konsulta_registration[0].suffix_name?"":e.konsulta_registration[0].suffix_name," "),t.R7$(2),t.Y8G("disabled",i.validating),t.R7$(),t.Y8G("ngIf",!i.validating),t.R7$(),t.Y8G("ngIf",i.validating),t.R7$(),t.SpI(" ",i.validating?"Loading":"Validate"," "),t.R7$(),t.Y8G("disabled",i.validating),t.R7$(),t.Y8G("ngIf",!i.validating),t.R7$(),t.Y8G("ngIf",i.validating),t.R7$(),t.SpI(" ",i.validating?"Loading":"Save"," ")}}let I=(()=>{class n{validate(e,a){this.validating=!0;let i=new v.Nl({fromObject:{"patient_id[]":[e.patient.id],tranche:this.filter_tranche,revalidate:0,save:a,effectivity_year:this.filter_year}});this.http.get("konsulta/validate-report",{params:i}).subscribe({next:s=>{this.processReturn(s,a,e)},error:s=>{console.log(s),this.http.showError(s.error.message,"Konsulta Validation"),this.validating=!1}})}processReturn(e,a,i){e?e.errors?(this.toastr.error("Record error","Error"),this.returnData(e,a)):e.message&&(this.returnData(e,a),i.validated=!0,this.toastr.success("Record validated/submitted","Success")):(this.loadList.emit(),this.toastr.error("Validation failed","Error")),this.validating=!1}addToSaving(e){!1===this.saving_list[e]&&delete this.saving_list[e],this.addSaving.emit(this.saving_list)}returnData(e,a){this.showReturn.emit({data:e,save:a})}constructor(e,a){this.http=e,this.toastr=a,this.showReturn=new t.bkB,this.addSaving=new t.bkB,this.loadList=new t.bkB,this.faCircleCheck=p.QRE,this.faSpinner=p.z1G,this.faSave=p.hSh,this.saving_list=[],this.is_saving=!1}static{this.\u0275fac=function(a){return new(a||n)(t.rXU(h.k),t.rXU(g.tw))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-for-validation"]],inputs:{konsulta_list:"konsulta_list",filter_tranche:"filter_tranche",validating:"validating",filter_year:"filter_year"},outputs:{showReturn:"showReturn",addSaving:"addSaving",loadList:"loadList"},standalone:!1,decls:21,vars:1,consts:[[1,"w-full","text-sm","text-left","text-gray-500","mb-5"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50"],["scope","col",1,"py-3","px-3","w-4/12","text-center"],["scope","col",1,"py-3","px-3","w-2/12","text-center"],["scope","col",1,"py-3","px-3","w-1/12"],["scope","col",1,"py-3","px-3","w-2/12"],["class","bg-white border-t",3,"ngClass",4,"ngFor","ngForOf"],[1,"bg-white","border-t",3,"ngClass"],["scope","row",1,"py-4","px-3","font-medium"],[1,"grid","grid-cols-12"],[1,"col-span-1","align-middle"],["type","checkbox",1,"input-checkbox","disabled:bg-gray-400",3,"ngModelChange","change","disabled","ngModel"],[1,"col-span-11"],[1,"py-4","px-3","text-center"],[1,"py-4","px-3"],[1,"text-sm","text-white","bg-blue-500","py-1","w-28","rounded-md","px-3","mb-2","hover:opacity-90","disabled:bg-gray-300",3,"click","disabled"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin","class","mr-2",3,"icon",4,"ngIf"],[1,"text-sm","text-white","bg-orange-400","py-1","w-28","rounded-md","px-3","hover:opacity-90","disabled:bg-gray-300",3,"click","disabled"],[1,"mr-2",3,"icon"],["animation","spin",1,"mr-2",3,"icon"]],template:function(a,i){1&a&&(t.j41(0,"table",0)(1,"thead",1)(2,"tr")(3,"th",2),t.EFF(4,"Name"),t.k0s(),t.j41(5,"th",3),t.EFF(6," Registration Date | "),t.nrm(7,"br"),t.EFF(8," Enlistment Date "),t.k0s(),t.j41(9,"th",4),t.EFF(10,"Birthdate "),t.nrm(11,"br"),t.EFF(12," [Gender]"),t.k0s(),t.j41(13,"th",4),t.EFF(14,"Pin"),t.k0s(),t.j41(15,"th",5),t.EFF(16,"Konsulta Registration"),t.k0s(),t.j41(17,"th",3),t.EFF(18,"Actions"),t.k0s()()(),t.j41(19,"tbody"),t.DNE(20,$,32,40,"tr",6),t.k0s()()),2&a&&(t.R7$(20),t.Y8G("ngForOf",i.konsulta_list))},dependencies:[_.YU,_.Sq,_.bT,d.Zm,d.BC,d.vS,m.aY,_.vh],encapsulation:2})}}return n})();const T=n=>({"bg-gray-50":n});function Y(n,o){1&n&&(t.j41(0,"th",2),t.EFF(1,"Konsulta Transaction Number"),t.k0s())}function N(n,o){if(1&n&&(t.j41(0,"td",8),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",e.konsulta_transaction_number," ")}}function L(n,o){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.JRh(null==e.philhealth[0].konsulta_registration[0]?null:e.philhealth[0].konsulta_registration[0].assigned_date)}}function V(n,o){if(1&n&&(t.j41(0,"span",18),t.DNE(1,L,2,1,"span",17),t.k0s()),2&n){const e=o.$implicit;t.R7$(),t.Y8G("ngIf",e.philhealth&&(null==e.philhealth[0]?null:e.philhealth[0].konsulta_registration))}}function X(n,o){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.JRh(null==e.philhealth[0]?null:e.philhealth[0].enlistment_date)}}function M(n,o){if(1&n&&(t.j41(0,"span",18),t.DNE(1,X,2,1,"span",17),t.k0s()),2&n){const e=o.$implicit;t.R7$(),t.Y8G("ngIf",e.philhealth&&(null==e.philhealth[0]?null:e.philhealth[0].enlistment_date))}}function S(n,o){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.nrm(2,"br"),t.k0s()),2&n){const e=o.$implicit;t.R7$(),t.LHq(" ",e.last_name,", ",e.first_name," ",e.middle_name," ","NA"===e.suffix_name?"":e.suffix_name," ")}}function D(n,o){if(1&n&&t.nrm(0,"fa-icon",19),2&n){const e=t.XpG(2);t.Y8G("icon",e.faSpinner)}}function K(n,o){if(1&n&&t.nrm(0,"fa-icon",19),2&n){const e=t.XpG(2);t.Y8G("icon",e.faSpinner)}}function B(n,o){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"button",20),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,s=t.XpG();return t.Njj(s.returnData(i.xml_errors,0))}),t.EFF(2," show errors "),t.k0s()()}}function A(n,o){if(1&n&&t.nrm(0,"fa-icon",24),2&n){const e=t.XpG(3);t.Y8G("icon",e.faCircleCheck)}}function O(n,o){if(1&n&&t.nrm(0,"fa-icon",25),2&n){const e=t.XpG(3);t.Y8G("icon",e.faSpinner)}}function H(n,o){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"button",21),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,s=t.XpG();return t.Njj(s.validate(i))}),t.DNE(2,A,1,1,"fa-icon",22)(3,O,1,1,"fa-icon",23),t.EFF(4),t.k0s()()}if(2&n){const e=t.XpG().$implicit,a=t.XpG();t.R7$(),t.HbH("F"===e.xml_status?"w-44":"w-28"),t.Y8G("disabled",a.validating),t.R7$(),t.Y8G("ngIf",!a.validating),t.R7$(),t.Y8G("ngIf",a.validating),t.R7$(),t.SpI(" ",a.validating?"loading":"revalidate"," ")}}function P(n,o){if(1&n&&t.nrm(0,"fa-icon",24),2&n){const e=t.XpG(3);t.Y8G("icon",e.faCircleCheck)}}function U(n,o){if(1&n&&t.nrm(0,"fa-icon",25),2&n){const e=t.XpG(3);t.Y8G("icon",e.faSpinner)}}function J(n,o){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"button",26),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,s=t.XpG();return t.Njj(s.submit(i.transmittal_number))}),t.DNE(2,P,1,1,"fa-icon",22)(3,U,1,1,"fa-icon",23),t.EFF(4),t.k0s()()}if(2&n){const e=t.XpG(2);t.R7$(),t.Y8G("disabled",e.submitting),t.R7$(),t.Y8G("ngIf",!e.validating),t.R7$(),t.Y8G("ngIf",e.validating),t.R7$(),t.SpI(" ",e.submitting?"loading":"submit"," ")}}function z(n,o){if(1&n){const e=t.RV6();t.j41(0,"tr",7)(1,"td",8),t.EFF(2),t.k0s(),t.DNE(3,N,2,1,"td",9),t.j41(4,"td",10),t.EFF(5),t.k0s(),t.j41(6,"td",10),t.DNE(7,V,2,1,"span",11),t.k0s(),t.j41(8,"td",10),t.DNE(9,M,2,1,"span",11),t.k0s(),t.j41(10,"td",12),t.DNE(11,S,3,4,"span",13),t.k0s(),t.j41(12,"td",14)(13,"div")(14,"button",15),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.downloadXml(i,"enc"))}),t.EFF(15),t.DNE(16,D,1,1,"fa-icon",16),t.k0s()(),t.j41(17,"div")(18,"button",15),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.downloadXml(i,"raw"))}),t.EFF(19),t.DNE(20,K,1,1,"fa-icon",16),t.k0s()(),t.DNE(21,B,3,0,"div",17)(22,H,5,6,"div",17)(23,J,5,4,"div",17),t.k0s()()}if(2&n){const e=o.$implicit,a=o.odd,i=t.XpG();t.Y8G("ngClass",t.eq3(18,T,a)),t.R7$(2),t.SpI(" ",e.transmittal_number," "),t.R7$(),t.Y8G("ngIf","S"===i.filter_status),t.R7$(2),t.E5c(" ",e.total_soap," | ",e.total_profile," | ",e.total_enlistment," "),t.R7$(2),t.Y8G("ngForOf",e.patient),t.R7$(2),t.Y8G("ngForOf",e.patient),t.R7$(2),t.Y8G("ngForOf",e.patient),t.R7$(3),t.Y8G("disabled",i.downloading),t.R7$(),t.SpI(" ",i.downlaoding?"":".enc"," "),t.R7$(),t.Y8G("ngIf",i.downloading),t.R7$(2),t.Y8G("disabled",i.downloading),t.R7$(),t.SpI(" ",i.downlaoding?"":".raw"," "),t.R7$(),t.Y8G("ngIf",i.downloading),t.R7$(),t.Y8G("ngIf","F"===e.xml_status),t.R7$(),t.Y8G("ngIf","F"===e.xml_status),t.R7$(),t.Y8G("ngIf","V"===e.xml_status)}}let q=(()=>{class n{validate(e){this.submitting=!0,this.validating=!0,this.http.get("konsulta/validate-report",{params:{tranche:[this.filter_tranche],revalidate:1,transmittal_number:[e.transmittal_number],save:1,effectivity_year:e.effectivity_year}}).subscribe({next:s=>{this.processReturn(s)},error:s=>console.log(s)})}downloadXml(e,a){this.downloading=!0;let s,i={raw:"raw"===a?1:0};i.transmittal_number=e.transmittal_number,s=this.http.get("konsulta/download-xml","raw"===a?{params:i,responseType:"text/xml"}:{params:i});let r=e.xml_url.split("/"),f=r[r.length-1];s.subscribe({next:l=>{"raw"===a?this.downloadFile(l,"S"===e.xml_status?e.konsulta_transaction_number:e.transmittal_number,"raw","S"===e.xml_status?e.konsulta_transaction_number:e.transmittal_number+".xml"):this.downloadFile(l,"S"===e.xml_status?e.konsulta_transaction_number:e.transmittal_number,"enc",f)},error:l=>console.log(l)})}downloadFile(e,a,i,s){let r;r="raw"===i?e:JSON.stringify(e);let f=new Blob([r],{type:"text/xml"}),l=window.URL.createObjectURL(f),u=document.createElement("a");u.href=l,u.setAttribute("download",s),document.body.appendChild(u),u.click(),this.downloading=!1}submit(e){this.validating=!0,this.submitting=!0,this.http.get("konsulta/submit-xml",{params:{transmittal_number:e}}).subscribe({next:i=>{this.processReturn(i)},error:i=>console.log(i)})}checkPatientList(e){return Object.keys(e).length>0}processReturn(e){if(e){let a=e.data?e.data:e;a.errors?(this.toastr.error("Record error","Error"),this.returnData(a)):a.message&&(this.returnData(a),this.toastr.success("Record validated/submitted","Success"))}else this.toastr.error("Validation failed","Error");this.submitting=!1,this.validating=!1}openList(e){this.showList.emit(e)}returnData(e,a){this.showReturn.emit({data:e,save:a})}constructor(e,a){this.http=e,this.toastr=a,this.showReturn=new t.bkB,this.showList=new t.bkB,this.faSpinner=p.z1G,this.faCircleCheck=p.QRE,this.validating=!1,this.submitting=!1,this.downloading=!1}static{this.\u0275fac=function(a){return new(a||n)(t.rXU(h.k),t.rXU(g.tw))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-validated-list"]],inputs:{konsulta_list:"konsulta_list",filter_tranche:"filter_tranche",filter_status:"filter_status",filter_year:"filter_year"},outputs:{showReturn:"showReturn",showList:"showList"},standalone:!1,decls:18,vars:2,consts:[[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400","mb-5"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-3"],["scope","col","class","py-3 px-3",4,"ngIf"],["scope","col",1,"py-3","px-3","text-center","w-1/12"],["scope","col",1,"py-3","px-3","text-center"],["class","bg-white border-t",3,"ngClass",4,"ngFor","ngForOf"],[1,"bg-white","border-t",3,"ngClass"],["scope","row",1,"py-4","px-3","font-medium","align-top"],["scope","row","class","py-4 px-3 font-medium align-top",4,"ngIf"],[1,"py-4","px-3","align-top","text-center"],["class","flex flex-col",4,"ngFor","ngForOf"],[1,"py-4","px-3","align-top","text-left"],[4,"ngFor","ngForOf"],[1,"py-4","px-3","flex","justify-center"],[1,"text-sm","text-white","bg-blue-500","py-1","font-normal","rounded-md","px-1","mr-2","disabled:bg-gray-300",3,"click","disabled"],["animation","spin",3,"icon",4,"ngIf"],[4,"ngIf"],[1,"flex","flex-col"],["animation","spin",3,"icon"],[1,"text-sm","text-white","bg-red-400","py-1","w-28","rounded-md","px-3","mr-2","disabled:bg-gray-300",3,"click"],[1,"text-sm","text-white","bg-blue-500","py-1","rounded-md","px-3","mr-2","disabled:bg-gray-300",3,"click","disabled"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin","class","mr-2",3,"icon",4,"ngIf"],[1,"mr-2",3,"icon"],["animation","spin",1,"mr-2",3,"icon"],[1,"text-sm","text-white","bg-green-500","py-1","w-28","rounded-md","px-3","mr-2","disabled:bg-gray-300",3,"click","disabled"]],template:function(a,i){1&a&&(t.j41(0,"table",0)(1,"thead",1)(2,"tr")(3,"th",2),t.EFF(4,"Transmittal Number"),t.k0s(),t.DNE(5,Y,2,0,"th",3),t.j41(6,"th",4),t.EFF(7," SOAP | Profile | Enlistment Count "),t.k0s(),t.j41(8,"th",4),t.EFF(9," Konsulta Assignment Date "),t.k0s(),t.j41(10,"th",4),t.EFF(11," Enlistment Date "),t.k0s(),t.j41(12,"th",5),t.EFF(13,"Name"),t.k0s(),t.j41(14,"th",5),t.EFF(15,"Actions"),t.k0s()()(),t.j41(16,"tbody"),t.DNE(17,z,24,20,"tr",6),t.k0s()()),2&a&&(t.R7$(5),t.Y8G("ngIf","S"===i.filter_status),t.R7$(12),t.Y8G("ngForOf",i.konsulta_list))},dependencies:[_.YU,_.Sq,_.bT,m.aY],encapsulation:2})}}return n})();function W(n,o){1&n&&(t.j41(0,"span"),t.EFF(1,"Errors"),t.k0s())}function Q(n,o){if(1&n&&(t.j41(0,"div",17),t.EFF(1),t.k0s()),2&n){const e=o.$implicit;t.R7$(),t.SpI(" ",e.value," ")}}function Z(n,o){if(1&n&&(t.j41(0,"tr")(1,"td",15),t.DNE(2,Q,2,1,"div",16),t.nI1(3,"keyvalue"),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(2),t.Y8G("ngForOf",t.bMT(3,1,null==e.return_value?null:e.return_value.errors))}}function tt(n,o){if(1&n&&(t.j41(0,"td"),t.EFF(1),t.k0s()),2&n){const e=t.XpG(3);t.R7$(),t.SpI(" ",e.return_value.errors," ")}}function et(n,o){if(1&n&&(t.j41(0,"td")(1,"div",19),t.EFF(2),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(2),t.SpI(" ",e.return_value.message," ")}}function nt(n,o){if(1&n&&(t.j41(0,"tr",18),t.DNE(1,tt,2,1,"td",13)(2,et,3,1,"td",13),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.Y8G("ngIf",e.return_value.errors),t.R7$(),t.Y8G("ngIf",e.return_value.message)}}function it(n,o){if(1&n&&(t.j41(0,"div",9)(1,"table",10)(2,"thead",11)(3,"tr")(4,"th",12),t.DNE(5,W,2,0,"span",13),t.k0s()()(),t.j41(6,"tbody"),t.DNE(7,Z,4,3,"tr",13)(8,nt,3,2,"tr",14),t.k0s()()()),2&n){const e=t.XpG();t.R7$(5),t.Y8G("ngIf",!e.return_value.message),t.R7$(2),t.Y8G("ngIf",!0===e.is_error_array),t.R7$(),t.Y8G("ngIf",!1===e.is_error_array)}}let at=(()=>{class n{constructor(){this.showReturn=new t.bkB,this.toggleModal=new t.bkB,this.show_form=!1}closeModal(){this.toggleModal.emit()}ngOnInit(){this.is_error_array=Array.isArray(this.return_value.errors),this.show_form=!0}static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-result-form"]],inputs:{return_value:"return_value"},outputs:{showReturn:"showReturn",toggleModal:"toggleModal"},standalone:!1,decls:11,vars:1,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],["class","overflow-y-auto h-96 scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-100",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"btn-save","bg-gray-400","px-10",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6"],[4,"ngIf"],["class","bg-white border-b",4,"ngIf"],[1,"py-4","px-6"],["class","grid grid-cols-1",4,"ngFor","ngForOf"],[1,"grid","grid-cols-1"],[1,"bg-white","border-b"],[1,"flex","justify-center","mt-20","text-lg","font-semibold"]],template:function(a,i){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.EFF(5," RETURN "),t.k0s()(),t.DNE(6,it,9,3,"div",5),t.j41(7,"div",6)(8,"button",7),t.bIt("click",function(){return i.closeModal()}),t.EFF(9,"Close"),t.k0s()()()()(),t.nrm(10,"div",8)),2&a&&(t.R7$(6),t.Y8G("ngIf",i.show_form))},dependencies:[_.Sq,_.bT,_.lG],encapsulation:2})}}return n})();function st(n,o){if(1&n&&(t.j41(0,"tr",13)(1,"td",14),t.EFF(2),t.k0s()()),2&n){const e=o.$implicit;t.R7$(2),t.LHq(" ",e.last_name,", ",e.first_name," ",e.middle_name," ","NA"!==e.suffix_name?e.suffix_name:""," ")}}let ot=(()=>{class n{constructor(){this.showReturn=new t.bkB,this.toggleList=new t.bkB}closeModal(){this.toggleList.emit()}static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-patient-list"]],inputs:{patient_list:"patient_list"},outputs:{showReturn:"showReturn",toggleList:"toggleList"},standalone:!1,decls:18,vars:1,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6"],["class","bg-white border-b",4,"ngFor","ngForOf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"btn-save","bg-gray-400","px-10",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"bg-white","border-b"],[1,"py-4","px-6"]],template:function(a,i){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.EFF(5," Patient List "),t.k0s()(),t.j41(6,"div",5)(7,"table",6)(8,"thead",7)(9,"tr")(10,"th",8),t.EFF(11,"Name"),t.k0s()()(),t.j41(12,"tbody"),t.DNE(13,st,3,4,"tr",9),t.k0s()()(),t.j41(14,"div",10)(15,"button",11),t.bIt("click",function(){return i.closeModal()}),t.EFF(16,"Close"),t.k0s()()()()(),t.nrm(17,"div",12)),2&a&&(t.R7$(13),t.Y8G("ngForOf",i.patient_list))},dependencies:[_.Sq],encapsulation:2})}}return n})();function rt(n,o){if(1&n){const e=t.RV6();t.j41(0,"select",8),t.mxI("ngModelChange",function(i){t.eBV(e);const s=t.XpG();return t.DH7(s.filter_status,i)||(s.filter_status=i),t.Njj(i)}),t.j41(1,"option",27),t.EFF(2,"Validated"),t.k0s(),t.j41(3,"option",28),t.EFF(4,"Submitted"),t.k0s(),t.j41(5,"option",29),t.EFF(6,"Failed"),t.k0s()()}if(2&n){const e=t.XpG();t.R50("ngModel",e.filter_status)}}function lt(n,o){if(1&n&&(t.j41(0,"option",9),t.EFF(1),t.k0s()),2&n){const e=o.$implicit;t.Y8G("value",e),t.R7$(),t.JRh(e)}}function _t(n,o){if(1&n){const e=t.RV6();t.j41(0,"input",30),t.mxI("ngModelChange",function(i){t.eBV(e);const s=t.XpG();return t.DH7(s.start_date,i)||(s.start_date=i),t.Njj(i)}),t.k0s()}if(2&n){const e=t.XpG();t.R50("ngModel",e.start_date)}}function ct(n,o){if(1&n){const e=t.RV6();t.j41(0,"input",30),t.mxI("ngModelChange",function(i){t.eBV(e);const s=t.XpG();return t.DH7(s.end_date,i)||(s.end_date=i),t.Njj(i)}),t.k0s()}if(2&n){const e=t.XpG();t.R50("ngModel",e.end_date)}}function pt(n,o){if(1&n&&t.nrm(0,"fa-icon",31),2&n){const e=t.XpG();t.Y8G("icon",e.faFilter)}}function dt(n,o){if(1&n&&t.nrm(0,"fa-icon",32),2&n){const e=t.XpG();t.Y8G("icon",e.faCircleNotch)}}function ut(n,o){if(1&n&&(t.j41(0,"div",39),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.SpI(" Printing ",e.total_print_page>0?e.current_print_page+" of "+e.total_print_page+" pages":""," ")}}function ft(n,o){if(1&n&&t.nrm(0,"fa-icon",40),2&n){const e=t.XpG(2);t.Y8G("icon",e.faFileExcel)}}function mt(n,o){if(1&n&&t.nrm(0,"fa-icon",41),2&n){const e=t.XpG(2);t.Y8G("icon",e.faCircleNotch)}}function ht(n,o){if(1&n){const e=t.RV6();t.j41(0,"div",33),t.DNE(1,ut,2,1,"div",34),t.j41(2,"div",35)(3,"button",36),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.getAllList())}),t.DNE(4,ft,1,1,"fa-icon",37)(5,mt,1,1,"fa-icon",38),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.printing||e.total_print_page),t.R7$(2),t.Y8G("disabled",e.excel_exporting),t.R7$(),t.Y8G("ngIf",!e.excel_exporting),t.R7$(),t.Y8G("ngIf",e.excel_exporting)}}function gt(n,o){if(1&n&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&n){const e=o.$implicit;t.R7$(),t.JRh(e.value)}}function bt(n,o){if(1&n&&(t.j41(0,"div",42)(1,"div",43)(2,"ul",44),t.DNE(3,gt,2,1,"li",45),t.nI1(4,"keyvalue"),t.k0s()()()),2&n){const e=t.XpG();t.R7$(3),t.Y8G("ngForOf",t.bMT(4,1,e.submit_error))}}function xt(n,o){if(1&n){const e=t.RV6();t.j41(0,"app-for-validation",46),t.bIt("addSaving",function(i){t.eBV(e);const s=t.XpG();return t.Njj(s.addSaving(i))})("showReturn",function(i){t.eBV(e);const s=t.XpG();return t.Njj(s.showReturn(i))})("loadList",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.loadList())}),t.k0s()}if(2&n){const e=t.XpG();t.Y8G("validating",e.is_saving)("konsulta_list",e.konsulta_list)("filter_tranche",e.filter_tranche)("filter_year",e.filter_year)}}function vt(n,o){if(1&n){const e=t.RV6();t.j41(0,"app-validated-list",47),t.bIt("showReturn",function(i){t.eBV(e);const s=t.XpG();return t.Njj(s.showReturn(i))})("showList",function(i){t.eBV(e);const s=t.XpG();return t.Njj(s.showList(i))}),t.k0s()}if(2&n){const e=t.XpG();t.Y8G("filter_status",e.filter_status)("konsulta_list",e.konsulta_list)("filter_tranche",e.filter_tranche)("filter_year",e.filter_year)}}function yt(n,o){if(1&n&&t.nrm(0,"fa-icon",63),2&n){const e=t.XpG(3);t.Y8G("icon",e.faSave)}}function kt(n,o){if(1&n&&t.nrm(0,"fa-icon",64),2&n){const e=t.XpG(3);t.Y8G("icon",e.faSpinner)}}function Ft(n,o){if(1&n){const e=t.RV6();t.j41(0,"div",59)(1,"button",60),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.validateNewList())}),t.DNE(2,yt,1,1,"fa-icon",61)(3,kt,1,1,"fa-icon",62),t.EFF(4),t.k0s()()}if(2&n){const e=t.XpG(2);t.R7$(),t.Y8G("disabled",0===e.save_list_length||e.is_saving),t.R7$(),t.Y8G("ngIf",!e.is_saving),t.R7$(),t.Y8G("ngIf",e.is_saving),t.R7$(),t.Lme(" ",e.is_saving?"Saving":"Save"," ","("+e.save_list_length+")"," ")}}function Rt(n,o){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"div",48)(2,"div",49)(3,"div")(4,"nav",50)(5,"button",51),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.loadList(1))}),t.nrm(6,"fa-icon",52),t.k0s(),t.j41(7,"button",53),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.loadList(i.current_page-1))}),t.nrm(8,"fa-icon",52),t.EFF(9,"Previous "),t.k0s(),t.j41(10,"button",53),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.loadList(i.current_page+1))}),t.EFF(11," Next"),t.nrm(12,"fa-icon",54),t.k0s(),t.j41(13,"button",55),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.loadList(i.last_page))}),t.nrm(14,"fa-icon",54),t.k0s()()(),t.j41(15,"div")(16,"p",56),t.EFF(17," Showing "),t.j41(18,"span",57),t.EFF(19),t.k0s(),t.EFF(20," to "),t.j41(21,"span",57),t.EFF(22),t.k0s(),t.EFF(23," of "),t.j41(24,"span",57),t.EFF(25),t.k0s(),t.EFF(26," results "),t.k0s()()(),t.DNE(27,Ft,5,5,"div",58),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(5),t.Y8G("disabled",1===e.current_page),t.R7$(),t.Y8G("icon",e.faAnglesLeft),t.R7$(),t.Y8G("disabled",1===e.current_page),t.R7$(),t.Y8G("icon",e.faChevronLeft),t.R7$(2),t.Y8G("disabled",e.current_page===e.last_page),t.R7$(2),t.Y8G("icon",e.faChevronRight),t.R7$(),t.Y8G("disabled",e.current_page===e.last_page),t.R7$(),t.Y8G("icon",e.faAnglesRight),t.R7$(5),t.JRh(e.from),t.R7$(3),t.JRh(e.to),t.R7$(3),t.JRh(e.total),t.R7$(2),t.Y8G("ngIf","1"===e.form_type)}}function jt(n,o){if(1&n&&(t.j41(0,"div",65)(1,"div",66),t.nrm(2,"fa-icon",67),t.k0s(),t.j41(3,"div",68),t.EFF(4," Fetching list... "),t.k0s()()),2&n){const e=t.XpG();t.R7$(2),t.Y8G("icon",e.faCircleNotch)}}function Gt(n,o){if(1&n){const e=t.RV6();t.j41(0,"app-result-form",69),t.bIt("showReturn",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.showReturn())})("toggleModal",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleModal())}),t.k0s()}if(2&n){const e=t.XpG();t.Y8G("return_value",e.return_value)}}function wt(n,o){if(1&n){const e=t.RV6();t.j41(0,"app-patient-list",70),t.bIt("toggleList",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleList())}),t.k0s()}if(2&n){const e=t.XpG();t.Y8G("patient_list",e.patient_list)}}function Ct(n,o){1&n&&(t.j41(0,"th"),t.EFF(1,"Consult Date"),t.k0s())}function Et(n,o){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.nrm(2,"br"),t.k0s()),2&n){const e=o.$implicit;t.R7$(),t.LHq(" ",e.last_name,", ",e.first_name," ",e.middle_name," ","NA"===e.suffix_name?"":e.suffix_name," ")}}function $t(n,o){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.JRh(null==e.philhealth[0]?null:e.philhealth[0].philhealth_id)}}function It(n,o){if(1&n&&(t.j41(0,"span"),t.DNE(1,$t,2,1,"span",22),t.k0s()),2&n){const e=o.$implicit;t.R7$(),t.Y8G("ngIf",e.philhealth)}}function Tt(n,o){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.JRh(null==e.philhealth[0]?null:e.philhealth[0].enlistment_date)}}function Yt(n,o){if(1&n&&(t.j41(0,"span"),t.DNE(1,Tt,2,1,"span",22),t.k0s()),2&n){const e=o.$implicit;t.R7$(),t.Y8G("ngIf",e.philhealth&&(null==e.philhealth[0]?null:e.philhealth[0].enlistment_date))}}function Nt(n,o){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.JRh(null==e.consult[0]?null:e.consult[0].consult_date)}}function Lt(n,o){if(1&n&&(t.j41(0,"span"),t.DNE(1,Nt,2,1,"span",22),t.k0s()),2&n){const e=o.$implicit;t.R7$(),t.Y8G("ngIf",e.consult)}}function Vt(n,o){if(1&n&&(t.j41(0,"td"),t.DNE(1,Lt,2,1,"span",45),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.Y8G("ngForOf",e.patient)}}function Xt(n,o){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.JRh(null==e.philhealth[0].konsulta_registration[0]?null:e.philhealth[0].konsulta_registration[0].assigned_date)}}function Mt(n,o){if(1&n&&(t.j41(0,"span"),t.DNE(1,Xt,2,1,"span",22),t.k0s()),2&n){const e=o.$implicit;t.R7$(),t.Y8G("ngIf",e.philhealth&&(null==e.philhealth[0]?null:e.philhealth[0].konsulta_registration))}}function St(n,o){if(1&n&&(t.j41(0,"tr")(1,"td"),t.DNE(2,Et,3,4,"span",45),t.k0s(),t.j41(3,"td"),t.DNE(4,It,2,1,"span",45),t.k0s(),t.j41(5,"td"),t.DNE(6,Yt,2,1,"span",45),t.k0s(),t.DNE(7,Vt,2,1,"td",22),t.j41(8,"td"),t.EFF(9),t.k0s(),t.j41(10,"td"),t.EFF(11),t.k0s(),t.j41(12,"td"),t.DNE(13,Mt,2,1,"span",45),t.k0s()()),2&n){const e=o.$implicit,a=t.XpG(2);t.R7$(2),t.Y8G("ngForOf",e.patient),t.R7$(2),t.Y8G("ngForOf",e.patient),t.R7$(2),t.Y8G("ngForOf",e.patient),t.R7$(),t.Y8G("ngIf",2===a.filter_tranche),t.R7$(2),t.JRh(e.transmittal_number),t.R7$(2),t.JRh(e.konsulta_transaction_number),t.R7$(2),t.Y8G("ngForOf",e.patient)}}function Dt(n,o){if(1&n&&(t.j41(0,"table",71)(1,"thead")(2,"tr")(3,"th"),t.EFF(4,"Patient Name"),t.k0s(),t.j41(5,"th"),t.EFF(6,"Philhealth No."),t.k0s(),t.j41(7,"th"),t.EFF(8,"Enlistment Date"),t.k0s(),t.DNE(9,Ct,2,0,"th",22),t.j41(10,"th"),t.EFF(11,"Transmittal Number"),t.k0s(),t.j41(12,"th"),t.EFF(13,"Konsulta Transaction Number"),t.k0s(),t.j41(14,"th"),t.EFF(15,"Konsulta Assign Date"),t.k0s()()(),t.j41(16,"tbody"),t.DNE(17,St,14,7,"tr",45),t.k0s()()),2&n){const e=t.XpG();t.R7$(9),t.Y8G("ngIf",2===e.filter_tranche),t.R7$(8),t.Y8G("ngForOf",e.konsulta_list_export)}}const Kt=[{path:"",component:(()=>{class n{loadList(e,a){this.forms=[],this.searching=!0;let i,s={params:{}};e&&(s.params.page=e),s.params.per_page=a?"all":this.per_page,this.search&&(s.params.search=this.search),"1"===this.form_type?(this.filter_tranche&&(s.params.tranche=this.filter_tranche),s.params.effectivity_year=this.filter_year,i=this.http.get("konsulta/generate-data",s)):(this.filter_tranche&&(s.params["filter[tranche]"]=this.filter_tranche),this.filter_status&&(s.params["filter[xml_status]"]=this.filter_status),this.start_date&&(s.params.start_date=this.start_date),this.end_date&&(s.params.end_date=this.end_date),s.params.effectivity_year=this.filter_year,i=this.http.get("konsulta/validated-xml",s)),i.subscribe({next:r=>{a?this.konsulta_list_export=r.data:this.konsulta_list=r.data,"1"===this.form_type?this.forms.for_validation=!0:(this.forms.validated_list=!0,a&&(this.excel_exporting=!0,console.log("test"),setTimeout(()=>{this.exportAsService.save(this.exportAsExcel,"Submitted").subscribe(()=>{this.excel_exporting=!1})}))),this.searching=!1,this.current_page=r.meta.current_page,this.last_page=r.meta.last_page,this.from=r.meta.from,this.to=r.meta.to,this.total=r.meta.total},error:r=>{this.searching=!1,this.toastr.error(r.error.message,"Konsulta List")}})}getAllList(){this.printing=!0;let e={params:{}};this.filter_tranche&&(e.params["filter[tranche]"]=this.filter_tranche),this.filter_status&&(e.params["filter[xml_status]"]=this.filter_status),this.start_date&&(e.params.start_date=this.start_date),this.end_date&&(e.params.end_date=this.end_date),this.search&&(e.params.search=this.search),e.params.effectivity_year=this.filter_year,e.params.per_page=100,e.params.reconcillation=1,this.allListArray=[];let a=0;const i=s=>{e.params.page=s,this.http.get("konsulta/validated-xml",e).subscribe({next:r=>{this.total_print_page=r.meta.last_page,this.current_print_page=s,console.log(r);const f=r.data.map((l,u)=>(a+=1,{"Item No.":a,"Patient Case No":l.case_number,"Last Name":l.patient[0].last_name,"First Name":l.patient[0].first_name,"Middle Name":l.patient[0].middle_name,Suffix:"NA"===l.patient[0].suffix_name?"":l.patient[0].suffix_name,"Patient's PIN":l.philhealth_id,"Registration Date":l.registration_date?(0,_.Yq)(l.registration_date,"MM/dd/yyyy","en"):"","Health and Assessment (FPE) Date":l.fpe_date?(0,_.Yq)(l.fpe_date,"MM/dd/yyyy","en"):"","EKAS Date":l.ekas_date?(0,_.Yq)(l.ekas_date,"MM/dd/yyyy","en"):"","With Lab":l.with_laboratory,"Epress Date":l.epress_date?(0,_.Yq)(l.epress_date,"MM/dd/yyyy","en"):""}));this.allListArray.push(...f),s<r.meta.last_page?i(s+1):(this.exportToExcel(this.allListArray),this.printing=!1)},error:r=>console.log(r)})};i(1)}exportToExcel(e){const a=y.Wp.json_to_sheet(e),i=Object.keys(e[0]||{}).map(f=>({wch:Math.max(f.length,...e.map(u=>u[f]?u[f].toString().length:0))+2}));a["!cols"]=i;const r=y.M9({Sheets:{data:a},SheetNames:["data"]},{bookType:"xlsx",type:"array"});this.saveAsExcelFile(r,"Konsulta Summary Report")}saveAsExcelFile(e,a){const s=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});(0,R.saveAs)(s,`${a}.xlsx`)}createExportList(){this.excel_exporting=!0;let e={params:{}};e.params.per_page="all",e.params.search=this.search??"",this.filter_tranche&&(e.params["filter[tranche]"]=this.filter_tranche),this.filter_status&&(e.params["filter[xml_status]"]=this.filter_status),this.start_date&&(e.params.start_date=this.start_date),this.end_date&&(e.params.end_date=this.end_date),e.params.effectivity_year=this.filter_year,this.http.get("konsulta/validated-xml",e).subscribe({next:a=>{this.konsulta_list_export=a.data,setTimeout(()=>{this.exportAsService.save(this.exportAsExcel,"Submitted").subscribe(()=>{this.excel_exporting=!1})})},error:a=>{this.toastr.error(a.error.message,"Konsulta List"),this.excel_exporting=!1}})}showReturn(e){this.return_value=e.data,this.show_return=!this.show_return,0!==e.save&&this.loadList()}showList(e){this.patient_list=e,this.toggleList()}toggleList(){this.show_list=!this.show_list}toggleModal(){this.show_return=!this.show_return}generateYear(){let e=parseInt(this.current_year);for(let a=e;a>e-5;a--)this.years.push(a)}addSaving(e){this.save_list=e,this.save_list_length=Object.keys(this.save_list).length}validateNewList(){this.is_saving=!0;let e=[];Object.entries(this.save_list).forEach(([i,s],r)=>{e.push(i)});let a=new v.Nl({fromObject:{"patient_id[]":e,tranche:this.filter_tranche,revalidate:0,save:1}});this.http.get("konsulta/validate-report",{params:a}).subscribe({next:i=>{this.is_saving=!1,i.errors?(this.toastr.error("Validation failed","Error"),this.showReturn({data:i})):(this.toastr.success("Success!","Record Validation"),this.showReturn({data:i})),this.loadList()},error:i=>console.log(i)})}constructor(e,a,i){this.http=e,this.toastr=a,this.exportAsService=i,this.faSpinner=p.z1G,this.faChevronLeft=p.Wzs,this.faChevronRight=p.XkK,this.faAnglesLeft=p.rNr,this.faAnglesRight=p.up_,this.faSearch=p.MjD,this.faFilter=p.mRM,this.faSave=p.hSh,this.faCircleNotch=p.s4k,this.faFileExcel=F.fny,this.current_year=(0,_.Yq)(new Date,"yyyy","en","Asia/Manila"),this.years=[],this.per_page=40,this.filter_tranche=1,this.filter_status="V",this.forms=[],this.form_type="1",this.konsulta_list=[],this.konsulta_list_export=[],this.save_list=[],this.save_list_length=0,this.searching=!1,this.show_return=!1,this.show_list=!1,this.is_saving=!1,this.exportAsExcel={type:"xlsx",elementIdOrContent:"submitted",options:{}},this.excel_exporting=!1,this.printing=!1,this.total_print_page=0,this.current_print_page=1}ngOnInit(){this.generateYear(),this.filter_year=this.current_year,this.loadList()}static{this.\u0275fac=function(a){return new(a||n)(t.rXU(h.k),t.rXU(g.tw),t.rXU(k.a))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-konsulta"]],standalone:!1,decls:34,vars:22,consts:[[1,"bg-white","border","border-solid","border-slate-100","rounded-xl","shadow-md"],[1,"border","border-solid","border-slate-100","rounded-t-xl","font-semibold","justify-between"],[1,"flex","border","border-solid","border-slate-100","rounded-t-xl","p-3","font-semibold","justify-between"],[1,"w-full","justify-end","flex"],["type","text","placeholder","Search name",1,"input","rounded-r-none","w-44",3,"ngModelChange","keyup.enter","ngModel"],[1,"input","w-36","rounded-none",3,"ngModelChange","ngModel"],["value","1"],["value","2"],[1,"input","w-28","rounded-none",3,"ngModelChange","ngModel"],[3,"value"],["class","input w-28 rounded-none",3,"ngModel","ngModelChange",4,"ngIf"],[1,"input","w-24","rounded-none",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","input w-36 rounded-none","type","date",3,"ngModel","ngModelChange",4,"ngIf"],["type","button",1,"bg-blue-500","text-white","h-10","px-3","mt-1","rounded-r-md",3,"click","disabled"],["class","",3,"icon",4,"ngIf"],["class","","animation","spin",3,"icon",4,"ngIf"],["class","w-full flex justify-end",4,"ngIf"],["class","col-span-8 bg-red-200 rounded border border-red-300 text-red-900 text-sm",4,"ngIf"],[1,"overflow-x-auto","relative","shadow-md","sm:rounded-lg"],[3,"validating","konsulta_list","filter_tranche","filter_year","addSaving","showReturn","loadList",4,"ngIf"],[3,"filter_status","konsulta_list","filter_tranche","filter_year","showReturn","showList",4,"ngIf"],[4,"ngIf"],["class","grid grid-cols-1 my-20",4,"ngIf"],[3,"return_value","showReturn","toggleModal",4,"ngIf"],[3,"patient_list","toggleList",4,"ngIf"],["id","submitted","hidden","",4,"ngIf"],["value","V"],["value","S"],["value","F"],["type","date",1,"input","w-36","rounded-none",3,"ngModelChange","ngModel"],[1,"",3,"icon"],["animation","spin",1,"",3,"icon"],[1,"w-full","flex","justify-end"],["class","flex justify-center mr-5",4,"ngIf"],[1,"pt-1","mr-5"],["type","button",1,"text-2xl",3,"click","disabled"],["class","text-green-700",3,"icon",4,"ngIf"],["animation","spin","class","text-green-700",3,"icon",4,"ngIf"],[1,"flex","justify-center","mr-5"],[1,"text-green-700",3,"icon"],["animation","spin",1,"text-green-700",3,"icon"],[1,"col-span-8","bg-red-200","rounded","border","border-red-300","text-red-900","text-sm"],[1,"block","p-3","pl-10"],[1,"list-disc"],[4,"ngFor","ngForOf"],[3,"addSaving","showReturn","loadList","validating","konsulta_list","filter_tranche","filter_year"],[3,"showReturn","showList","filter_status","konsulta_list","filter_tranche","filter_year"],[1,"bg-white","px-4","py-3","flex","items-center","justify-between","border-t","border-gray-200","sm:px-6"],[1,"flex-1","flex","items-center","justify-start"],["aria-label","Pagination",1,"relative","z-0","inline-flex","shadow-sm","-space-x-px","mr-5"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","disabled"],[1,"block","h-15","w-15","text-gray-500","pr-1",3,"icon"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","bg-white","text-sm","font-medium","text-gray-700","hover:bg-gray-50",3,"click","disabled"],[1,"h-5","w-5","text-gray-500",3,"icon"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","disabled"],[1,"text-sm","text-gray-700"],[1,"font-medium"],["class","flex justify-end",4,"ngIf"],[1,"flex","justify-end"],["type","button",1,"btn-save","bg-orange-400","px-5","disabled:bg-gray-300",3,"click","disabled"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin","class","mr-2",3,"icon",4,"ngIf"],[1,"mr-2",3,"icon"],["animation","spin",1,"mr-2",3,"icon"],[1,"grid","grid-cols-1","my-20"],[1,"flex","justify-center","text-blue-500"],["animation","spin",3,"icon"],[1,"flex","justify-center"],[3,"showReturn","toggleModal","return_value"],[3,"toggleList","patient_list"],["id","submitted","hidden",""]],template:function(a,i){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),t.mxI("ngModelChange",function(r){return t.DH7(i.search,r)||(i.search=r),r}),t.bIt("keyup.enter",function(){return i.loadList()}),t.k0s(),t.j41(5,"select",5),t.mxI("ngModelChange",function(r){return t.DH7(i.form_type,r)||(i.form_type=r),r}),t.j41(6,"option",6),t.EFF(7,"For Validation"),t.k0s(),t.j41(8,"option",7),t.EFF(9,"Validated List"),t.k0s()(),t.j41(10,"select",8),t.mxI("ngModelChange",function(r){return t.DH7(i.filter_tranche,r)||(i.filter_tranche=r),r}),t.j41(11,"option",9),t.EFF(12,"Tranche 1"),t.k0s(),t.j41(13,"option",9),t.EFF(14,"Tranche 2"),t.k0s()(),t.DNE(15,rt,7,1,"select",10),t.j41(16,"select",11),t.mxI("ngModelChange",function(r){return t.DH7(i.filter_year,r)||(i.filter_year=r),r}),t.DNE(17,lt,2,2,"option",12),t.k0s(),t.DNE(18,_t,1,1,"input",13)(19,ct,1,1,"input",13),t.j41(20,"button",14),t.bIt("click",function(){return i.loadList()}),t.DNE(21,pt,1,1,"fa-icon",15)(22,dt,1,1,"fa-icon",16),t.k0s()()(),t.DNE(23,ht,6,4,"div",17)(24,bt,5,3,"div",18),t.j41(25,"div")(26,"div",19),t.DNE(27,xt,1,4,"app-for-validation",20)(28,vt,1,4,"app-validated-list",21),t.k0s()()(),t.DNE(29,Rt,28,12,"div",22)(30,jt,5,1,"div",23),t.k0s(),t.DNE(31,Gt,1,1,"app-result-form",24)(32,wt,1,1,"app-patient-list",25)(33,Dt,18,2,"table",26)),2&a&&(t.R7$(4),t.R50("ngModel",i.search),t.R7$(),t.R50("ngModel",i.form_type),t.R7$(5),t.R50("ngModel",i.filter_tranche),t.R7$(),t.Y8G("value",1),t.R7$(2),t.Y8G("value",2),t.R7$(2),t.Y8G("ngIf","2"===i.form_type),t.R7$(),t.R50("ngModel",i.filter_year),t.R7$(),t.Y8G("ngForOf",i.years),t.R7$(),t.Y8G("ngIf","2"===i.form_type),t.R7$(),t.Y8G("ngIf","2"===i.form_type),t.R7$(),t.Y8G("disabled",i.searching),t.R7$(),t.Y8G("ngIf",!i.searching),t.R7$(),t.Y8G("ngIf",i.searching),t.R7$(),t.Y8G("ngIf","2"===i.form_type&&"S"===i.filter_status&&i.forms.validated_list),t.R7$(),t.Y8G("ngIf",i.submit_error),t.R7$(3),t.Y8G("ngIf",i.forms.for_validation),t.R7$(),t.Y8G("ngIf",i.forms.validated_list),t.R7$(),t.Y8G("ngIf",(null==i.konsulta_list?null:i.konsulta_list.length)>=1),t.R7$(),t.Y8G("ngIf",i.searching),t.R7$(),t.Y8G("ngIf",i.show_return),t.R7$(),t.Y8G("ngIf",i.show_list),t.R7$(),t.Y8G("ngIf","2"===i.form_type&&"S"===i.filter_status&&i.forms.validated_list))},dependencies:[_.Sq,_.bT,d.xH,d.y7,d.me,d.wz,d.BC,d.vS,m.aY,I,q,at,ot,_.lG],encapsulation:2})}}return n})()}];let Bt=(()=>{class n{static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[x.iI.forChild(Kt),x.iI]})}}return n})(),At=(()=>{class n{static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[_.MD,Bt,d.YN,m.dX,k.x]})}}return n})()}}]);