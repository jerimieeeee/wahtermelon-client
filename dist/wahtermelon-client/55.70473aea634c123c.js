"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[55],{6302:(w,T,r)=>{r.d(T,{j:()=>a});var e=r(6814),t=r(5879),C=r(1449),p=r(590),x=r(265),d=r(2425),_=r(5597),c=r(6223),u=r(3146);function y(n,s){if(1&n){const i=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.getEncryptedXml())}),t._UZ(1,"fa-icon",17),t._uU(2," Upload Claim "),t.qZA()}if(2&n){const i=t.oxw();t.Q6J("disabled",i.is_uploading||!i.show_form||i.show_confirm_form),t.xp6(1),t.Q6J("icon",i.faUpload)}}function h(n,s){if(1&n&&(t.TgZ(0,"option",25),t._uU(1),t.qZA()),2&n){const i=s.$implicit;t.Q6J("value",i.code),t.xp6(1),t.Oqu(i.desc)}}function g(n,s){if(1&n){const i=t.EpF();t.TgZ(0,"div",18)(1,"div")(2,"select",19),t.NdJ("ngModelChange",function(l){t.CHM(i);const f=t.oxw();return t.KtG(f.doc_type=l)}),t.YNc(3,h,2,2,"option",20),t.qZA()(),t.TgZ(4,"div",21)(5,"input",22),t.NdJ("change",function(l){t.CHM(i);const f=t.oxw();return t.KtG(f.readXML(l.target.files[0]))}),t.qZA()(),t.TgZ(6,"div")(7,"button",23),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.uploadDocs(l.file_to_upload))}),t._UZ(8,"fa-icon",24),t._uU(9," Upload Document "),t.qZA()()()}if(2&n){const i=t.oxw();t.xp6(2),t.Q6J("ngModel",i.doc_type),t.xp6(1),t.Q6J("ngForOf",i.doc_list),t.xp6(4),t.Q6J("disabled",!i.file_to_upload||!i.doc_type||i.is_uploading||!i.show_form),t.xp6(1),t.Q6J("icon",i.is_uploading?i.faCircleNotch:i.faFileArrowUp)("spin",i.is_uploading)}}function m(n,s){if(1&n){const i=t.EpF();t.TgZ(0,"tr",34)(1,"td",35),t._uU(2),t.qZA(),t.TgZ(3,"td",36),t._uU(4),t.qZA(),t.TgZ(5,"td",37)(6,"fa-icon",38),t.NdJ("click",function(){const f=t.CHM(i).$implicit,S=t.oxw(3);return t.KtG(S.toggleModal("delete-item",f))}),t.qZA()()()}if(2&n){const i=s.$implicit,o=t.oxw(3);t.xp6(2),t.hij(" ",i.doc_type_code," "),t.xp6(2),t.hij(" ",o.getFileName(i.doc_url)," "),t.xp6(2),t.Q6J("icon",o.faTrash)}}function b(n,s){if(1&n&&(t.TgZ(0,"tbody"),t.YNc(1,m,7,3,"tr",33),t.qZA()),2&n){const i=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",i.uploaded_docs)}}function v(n,s){if(1&n&&(t.TgZ(0,"tbody")(1,"tr")(2,"td",39)(3,"div",40)(4,"div",41),t._UZ(5,"fa-icon",42),t.qZA(),t.TgZ(6,"div",43),t._uU(7," Fetching uploaded documents... "),t.qZA()()()()()),2&n){const i=t.oxw(2);t.xp6(5),t.Q6J("icon",i.faCircleNotch)}}function U(n,s){if(1&n&&(t.TgZ(0,"div",26)(1,"table",27)(2,"thead",28)(3,"tr")(4,"th",29),t._uU(5,"Document Type"),t.qZA(),t.TgZ(6,"th",30),t._uU(7,"Document URL"),t.qZA(),t.TgZ(8,"th",31),t._uU(9,"Action"),t.qZA()()(),t.YNc(10,b,2,1,"tbody",32),t.YNc(11,v,8,1,"tbody",32),t.qZA()()),2&n){const i=t.oxw();t.xp6(10),t.Q6J("ngIf",i.show_form),t.xp6(1),t.Q6J("ngIf",!i.show_form)}}function M(n,s){1&n&&(t.TgZ(0,"span"),t._uU(1,","),t.qZA())}function Z(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.YNc(2,M,2,0,"span",32),t.qZA()),2&n){const i=s.$implicit,o=s.last;t.xp6(1),t.hij(" ",i.doc_type_code,""),t.xp6(1),t.Q6J("ngIf",!o)}}function A(n,s){if(1&n&&t._UZ(0,"fa-icon",50),2&n){const i=t.oxw(2);t.Q6J("icon",i.faCircleNotch)}}function E(n,s){if(1&n){const i=t.EpF();t.TgZ(0,"div",44)(1,"div",45),t._uU(2," Are you sure all required documents have been uploaded and want to proceed on uploading this claim? "),t.qZA(),t.TgZ(3,"div",45)(4,"strong"),t._uU(5,"Uploaded documents:\xa0"),t.qZA(),t.YNc(6,Z,3,2,"span",12),t.qZA(),t.TgZ(7,"div",46)(8,"div")(9,"button",47),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.confirmUpload())}),t._uU(10," Cancel "),t.qZA(),t.TgZ(11,"button",48),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.uploadClaim())}),t.YNc(12,A,1,1,"fa-icon",49),t._uU(13),t.qZA()()()()}if(2&n){const i=t.oxw();t.xp6(6),t.Q6J("ngForOf",i.uploaded_docs),t.xp6(3),t.Q6J("disabled",i.is_uploading_claim),t.xp6(2),t.Q6J("disabled",i.is_uploading_claim),t.xp6(1),t.Q6J("ngIf",i.is_uploading_claim),t.xp6(1),t.hij(" ",i.is_uploading_claim?"Uploading":"Upload"," ")}}function D(n,s){if(1&n&&(t.TgZ(0,"div",51)(1,"div",41),t._UZ(2,"fa-icon",42),t.qZA(),t.TgZ(3,"div",43),t._uU(4," Retrieving XML... "),t.qZA()()),2&n){const i=t.oxw();t.xp6(2),t.Q6J("icon",i.faCircleNotch)}}function O(n,s){1&n&&(t.TgZ(0,"span"),t._uU(1,","),t.qZA())}function F(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.YNc(2,O,2,0,"span",32),t.qZA()),2&n){const i=s.$implicit,o=s.last;t.xp6(1),t.hij(" ",i,""),t.xp6(1),t.Q6J("ngIf",!o)}}function N(n,s){if(1&n){const i=t.EpF();t.TgZ(0,"app-delete-item",52),t.NdJ("toggleModal",function(l){t.CHM(i);const f=t.oxw();return t.KtG(f.toggleModal(l))}),t.qZA()}if(2&n){const i=t.oxw();t.Q6J("url",i.delete_url)("delete_id",i.selected_doc_id)("delete_desc",i.delete_desc)}}let a=(()=>{var n;class s{confirmUpload(){this.show_confirm_form=!this.show_confirm_form}getFileName(o){return o.split("/")[6]}getEncryptedXml(){this.is_retrieving_xml=!0,this.http.post("eclaims/create-enc-xml",{pHospitalTransmittalNo:this.selected_pHospitalTransmittalNo,program_desc:this.program_name}).subscribe({next:l=>{this.is_retrieving_xml=!1,this.confirmUpload(),this.encryptedXml=l.xml},error:l=>console.log(l)})}uploadClaim(){this.is_uploading_claim=!0,this.http.post("eclaims/upload-claim",{encryptedXml:this.encryptedXml,program_code:"cc"===this.program_name||"fp"===this.program_name?"mc":this.program_name}).subscribe({next:l=>{this.updateUploadData(l)},error:l=>{this.is_uploading_claim=!1,this.toastr.error(l.error.message,"Upload Claim",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0})}})}updateUploadData(o){let l={pHospitalTransmittalNo:this.selected_pHospitalTransmittalNo,pTransmissionControlNumber:o.pTransmissionControlNumber,pReceiptTicketNumber:o.pReceiptTicketNumber,pStatus:"IN PROCESS",pTransmissionDate:(0,e.p6)(o.pTransmissionDate,"yyyy-MM-dd","en","Asia/Manila"),pTransmissionTime:(0,e.p6)(new Date,"HH:mm:ss","en","Asia/Manila"),isSuccess:"Y",program_desc:this.program_name};this.http.post("eclaims/eclaims-upload",l).subscribe({next:f=>{this.ticket_number=f.data.pReceiptTicketNumber,this.toastr.success("Ticket Number: "+this.ticket_number,"Claim Uploaded!",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0}),this.is_uploading_claim=!1,this.closeModal()},error:f=>console.log(f)})}deleteDocs(o){}loadDocs(){this.show_form=!1,this.http.get("eclaims/eclaims-doc",{params:{pHospitalTransmittalNo:this.selected_pHospitalTransmittalNo,required:"N"}}).subscribe({next:l=>{this.uploaded_docs=l.data,this.show_form=!0},error:l=>console.log(l)})}uploadDocs(o){this.is_uploading=!0;const l=new FormData;this.file_to_upload.size>2097152?(this.is_uploading=!1,this.toastr.error("File size exceeds the allowed limit 2MB","File Upload",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0})):(l.append("doc",this.file_to_upload),l.append("doc_type_code",this.doc_type),l.append("pHospitalTransmittalNo",this.selected_pHospitalTransmittalNo),l.append("program_desc",this.program_name),l.append("patient_id",this.patient.id),l.append("required","N"),this.http.post("eclaims/eclaims-doc",l).subscribe({next:f=>{this.loadDocs(),this.resetForm(),this.is_uploading=!1,this.toastr.success("Successfully uploaded.","EClaims Docs")},error:f=>console.log(f)}))}resetForm(){this.doc_type=null,this.file_to_upload=null}readXML(o){this.file_to_upload=o}getLibraries(){this.http.get("libraries/eclaims-doc-type").subscribe({next:o=>{this.doc_list=o.data,this.loadDocs()},error:o=>console.log(o)})}closeModal(){this.modalToggle.emit("upload-claims")}toggleModal(o,l){this.selected_doc_id=l?l.id:null,this.delete_desc=this.delete_desc+" "+(l?l.doc_type_code:""),this.modals[o]=!this.modals[o],!1===this.modals["delete-item"]&&this.loadDocs()}constructor(o,l){this.http=o,this.toastr=l,this.modalToggle=new t.vpe,this.faPenToSquare=C.Yai,this.faUpload=p.cf$,this.faTrash=p.$aW,this.faFileArrowUp=p.PQh,this.faCircleNotch=p.IJ7,this.file_to_upload=null,this.doc_type=null,this.is_uploading=!1,this.uploading_claim=!1,this.modals=[],this.arr_CR4652=["CF2","CSF","CF3","SOA w/ CTC"],this.arr_CR4651=["CF2","CSF","CF3","SOA w/ CTC"],this.arr_CR4683=["CF2","CSF","CF3","SOA w/ CTC","Pink Card"],this.arr_CR4684=["CF2","CSF","CF3","SOA w/ CTC","Pink Card"],this.arr_CR4687=["CF2","CSF + NBS Sticker","PMRF","SOA w/ CTC","Birth Certificate"],this.arr_CR4656=["CF2","CSF","Treatment Card","SOA w/ CTC"],this.arr_CR4657=["CF2","CSF","Treatment Card","SOA w/ CTC"],this.arr_CR4658=["CF2","CSF","Treatment Card","SOA w/ CTC","Summary Report"],this.arr_CR4685=["CF2","CSF + Serial Sticker","SOA w/ CTC"],this.arr_CR0385=["CF2","CSF + Serial Number of Box","SOA w/ CTC"],this.arr_CR0456=["CF2","CSF","SOA"],this.arr_CR4655=["CF2","CSF","Smear Test for OMP"],this.is_retrieving_xml=!1,this.confirm_upload=!1,this.show_confirm_form=!1,this.is_uploading_claim=!1,this.show_ticket_number=!1,this.show_form=!1,this.delete_url="eclaims/eclaims-doc/",this.delete_desc="eClaims Document"}ngOnInit(){this.getLibraries(),this.required_docs=this["arr_"+this.caserate_code]}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(x.O),t.Y36(d._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-upload-claims"]],inputs:{selected_pHospitalTransmittalNo:"selected_pHospitalTransmittalNo",program_name:"program_name",patient:"patient",caserate_code:"caserate_code",selected_ticket_number:"selected_ticket_number"},outputs:{modalToggle:"modalToggle"},decls:22,vars:8,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","55"],[1,"relative","p-4","w-full","max-w-4xl","h-full","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],["type","button","class","disabled:bg-gray-400 bg-white px-3 py-1 text-blue-500 rounded-md",3,"disabled","click",4,"ngIf"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],["class","grid grid-cols-3 gap-x-4 mx-5 my-2",4,"ngIf"],["class","shadow-md sm:rounded-lg m-4",4,"ngIf"],["class","grid grid-cols-1 m-8 rounded-md border border-rose-500 bg-rose-100 text-rose-700 p-5",4,"ngIf"],["class","grid grid-cols-1 mt-16",4,"ngIf"],[1,"flex","justify-between","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],[4,"ngFor","ngForOf"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-300","rounded","text-sm","font-medium","px-6","py-2.5","transition","duration-150","ease-in-out","transform","hover:scale-110",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[3,"url","delete_id","delete_desc","toggleModal",4,"ngIf"],["type","button",1,"disabled:bg-gray-400","bg-white","px-3","py-1","text-blue-500","rounded-md",3,"disabled","click"],[1,"pr-2",3,"icon"],[1,"grid","grid-cols-3","gap-x-4","mx-5","my-2"],["id","suffix_name","name","suffix_name",1,"input","mt-5",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","justify-center","mx-auto","py-5"],["type","file","id","formFile",1,"form-control","w-full","px-3","py-1.5","text-base","font-normal","text-gray-700","bg-white","bg-clip-padding","border","border-solid","border-gray-300","rounded-lg","transition","ease-in-out","m-0","focus:text-gray-700","focus:bg-white","focus:border-blue-600","focus:outline-none",3,"change"],["type","button",1,"mt-5","disabled:bg-gray-400","py-2","px-3","mb-5","bg-blue-500","text-white","rounded-lg","text-sm",3,"disabled","click"],[3,"icon","spin"],[3,"value"],[1,"shadow-md","sm:rounded-lg","m-4"],[1,"table-fixed","w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6","text-center","w-3/12"],["scope","col",1,"py-3","px-6","text-center","w-7/12"],["scope","col",1,"py-3","px-6","text-center","w-2/12"],[4,"ngIf"],["class","bg-white border-b",4,"ngFor","ngForOf"],[1,"bg-white","border-b"],[1,"py-4","px-6","text-center","w-3/12"],[1,"py-4","px-6","w-7/12","whitespace-normal"],[1,"py-4","px-6","text-center","w-2/12"],[1,"mx-0","my-0","text-rose-500","hover:cursor-pointer","flex-none","mr-2",3,"icon","click"],["colspan","3"],[1,"grid","grid-cols-1","my-14"],[1,"flex","justify-center","text-blue-500"],["spin","true",3,"icon"],[1,"flex","justify-center"],[1,"grid","grid-cols-1","m-8","rounded-md","border","border-rose-500","bg-rose-100","text-rose-700","p-5"],[1,"flex","mb-5"],[1,"flex","justify-end"],["type","button",1,"btn-save","bg-gray-400",3,"disabled","click"],["type","button",1,"btn-save","bg-rose-500","ml-5",3,"disabled","click"],["spin","true","class","pr-2",3,"icon",4,"ngIf"],["spin","true",1,"pr-2",3,"icon"],[1,"grid","grid-cols-1","mt-16"],[3,"url","delete_id","delete_desc","toggleModal"]],template:function(o,l){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5),t.qZA(),t.TgZ(6,"div"),t.YNc(7,y,3,2,"button",5),t.qZA()(),t.TgZ(8,"div",6),t.YNc(9,g,10,5,"div",7),t.YNc(10,U,12,2,"div",8),t.YNc(11,E,14,5,"div",9),t.YNc(12,D,5,1,"div",10),t.qZA(),t.TgZ(13,"div",11)(14,"div")(15,"strong"),t._uU(16,"Required documents:"),t.qZA(),t.YNc(17,F,3,2,"span",12),t.qZA(),t.TgZ(18,"button",13),t.NdJ("click",function(){return l.closeModal()}),t._uU(19,"Close"),t.qZA()()()()(),t._UZ(20,"div",14),t.YNc(21,N,1,3,"app-delete-item",15)),2&o&&(t.xp6(5),t.hij(" CLAIM: ",l.selected_pHospitalTransmittalNo," "),t.xp6(2),t.Q6J("ngIf",!l.selected_ticket_number),t.xp6(2),t.Q6J("ngIf",!l.is_retrieving_xml&&!l.show_confirm_form),t.xp6(1),t.Q6J("ngIf",!l.is_retrieving_xml&&!l.show_confirm_form),t.xp6(1),t.Q6J("ngIf",!l.is_retrieving_xml&&l.show_confirm_form),t.xp6(1),t.Q6J("ngIf",l.is_retrieving_xml),t.xp6(5),t.Q6J("ngForOf",l.required_docs),t.xp6(4),t.Q6J("ngIf",l.modals["delete-item"]))},dependencies:[e.sg,e.O5,_.BN,c.YN,c.Kr,c.EJ,c.JJ,c.On,u.N]}),s})()},5335:(w,T,r)=>{r.d(T,{W:()=>N});var e=r(5879),t=r(1449),C=r(590),p=r(265),x=r(2425),d=r(6814),_=r(5597),c=r(6223),u=r(3146);function y(a,n){if(1&a&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&a){const s=n.$implicit;e.Q6J("value",s.code),e.xp6(1),e.Oqu(s.desc)}}function h(a,n){if(1&a){const s=e.EpF();e.TgZ(0,"div",17)(1,"div")(2,"select",18),e.NdJ("ngModelChange",function(o){e.CHM(s);const l=e.oxw();return e.KtG(l.doc_type=o)}),e.YNc(3,y,2,2,"option",19),e.qZA()(),e.TgZ(4,"div",20)(5,"input",21),e.NdJ("change",function(o){e.CHM(s);const l=e.oxw();return e.KtG(l.readXML(o.target.files[0]))}),e.qZA()(),e.TgZ(6,"div")(7,"button",22),e.NdJ("click",function(){e.CHM(s);const o=e.oxw();return e.KtG(o.uploadDocs(o.file_to_upload))}),e._UZ(8,"fa-icon",23),e._uU(9," Upload Document "),e.qZA()()()}if(2&a){const s=e.oxw();e.xp6(2),e.Q6J("ngModel",s.doc_type),e.xp6(1),e.Q6J("ngForOf",s.doc_list),e.xp6(4),e.Q6J("disabled",!s.file_to_upload||!s.doc_type||s.is_uploading||!s.show_form),e.xp6(1),e.Q6J("icon",s.is_uploading?s.faCircleNotch:s.faFileArrowUp)("spin",s.is_uploading)}}function g(a,n){if(1&a){const s=e.EpF();e.TgZ(0,"tr",33)(1,"td",34),e._uU(2),e.qZA(),e.TgZ(3,"td",35),e._uU(4),e.qZA(),e.TgZ(5,"td",36)(6,"fa-icon",37),e.NdJ("click",function(){const l=e.CHM(s).$implicit,f=e.oxw(3);return e.KtG(f.toggleModal("delete-item",l))}),e.qZA()()()}if(2&a){const s=n.$implicit,i=e.oxw(3);e.xp6(2),e.hij(" ",s.doc_type_code," "),e.xp6(2),e.hij(" ",i.getFileName(s.doc_url)," "),e.xp6(2),e.Q6J("icon",i.faTrash)}}function m(a,n){if(1&a&&(e.TgZ(0,"tbody"),e.YNc(1,g,7,3,"tr",32),e.qZA()),2&a){const s=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",s.uploaded_docs)}}function b(a,n){if(1&a&&(e.TgZ(0,"tbody")(1,"tr")(2,"td",38)(3,"div",39)(4,"div",40),e._UZ(5,"fa-icon",41),e.qZA(),e.TgZ(6,"div",42),e._uU(7," Fetching uploaded documents... "),e.qZA()()()()()),2&a){const s=e.oxw(2);e.xp6(5),e.Q6J("icon",s.faCircleNotch)}}function v(a,n){if(1&a&&(e.TgZ(0,"div",25)(1,"table",26)(2,"thead",27)(3,"tr")(4,"th",28),e._uU(5,"Document Type"),e.qZA(),e.TgZ(6,"th",29),e._uU(7,"Document URL"),e.qZA(),e.TgZ(8,"th",30),e._uU(9,"Action"),e.qZA()()(),e.YNc(10,m,2,1,"tbody",31),e.YNc(11,b,8,1,"tbody",31),e.qZA()()),2&a){const s=e.oxw();e.xp6(10),e.Q6J("ngIf",s.show_form),e.xp6(1),e.Q6J("ngIf",!s.show_form)}}function U(a,n){1&a&&(e.TgZ(0,"span"),e._uU(1,","),e.qZA())}function M(a,n){if(1&a&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,U,2,0,"span",31),e.qZA()),2&a){const s=n.$implicit,i=n.last;e.xp6(1),e.hij(" ",s.doc_type_code,""),e.xp6(1),e.Q6J("ngIf",!i)}}function Z(a,n){if(1&a&&e._UZ(0,"fa-icon",49),2&a){const s=e.oxw(2);e.Q6J("icon",s.faCircleNotch)}}function A(a,n){if(1&a){const s=e.EpF();e.TgZ(0,"div",43)(1,"div",44),e._uU(2," Are you sure all required documents have been uploaded and want to proceed on uploading this claim? "),e.qZA(),e.TgZ(3,"div",44)(4,"strong"),e._uU(5,"Uploaded documents:\xa0"),e.qZA(),e.YNc(6,M,3,2,"span",13),e.qZA(),e.TgZ(7,"div",45)(8,"div")(9,"button",46),e.NdJ("click",function(){e.CHM(s);const o=e.oxw();return e.KtG(o.confirmUpload())}),e._uU(10," Cancel "),e.qZA(),e.TgZ(11,"button",47),e.NdJ("click",function(){e.CHM(s);const o=e.oxw();return e.KtG(o.uploadClaim())}),e.YNc(12,Z,1,1,"fa-icon",48),e._uU(13),e.qZA()()()()}if(2&a){const s=e.oxw();e.xp6(6),e.Q6J("ngForOf",s.uploaded_docs),e.xp6(3),e.Q6J("disabled",s.is_uploading_claim),e.xp6(2),e.Q6J("disabled",s.is_uploading_claim),e.xp6(1),e.Q6J("ngIf",s.is_uploading_claim),e.xp6(1),e.hij(" ",s.is_uploading_claim?"Uploading":"Upload"," ")}}function E(a,n){if(1&a&&(e.TgZ(0,"div",50)(1,"div",40),e._UZ(2,"fa-icon",41),e.qZA(),e.TgZ(3,"div",42),e._uU(4," Retrieving XML... "),e.qZA()()),2&a){const s=e.oxw();e.xp6(2),e.Q6J("icon",s.faCircleNotch)}}function D(a,n){1&a&&(e.TgZ(0,"span"),e._uU(1,","),e.qZA())}function O(a,n){if(1&a&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,D,2,0,"span",31),e.qZA()),2&a){const s=n.$implicit,i=n.last;e.xp6(1),e.hij(" ",s,""),e.xp6(1),e.Q6J("ngIf",!i)}}function F(a,n){if(1&a){const s=e.EpF();e.TgZ(0,"app-delete-item",51),e.NdJ("toggleModal",function(o){e.CHM(s);const l=e.oxw();return e.KtG(l.toggleModal(o))}),e.qZA()}if(2&a){const s=e.oxw();e.Q6J("url",s.delete_url)("delete_id",s.selected_doc_id)("delete_desc",s.delete_desc)}}let N=(()=>{var a;class n{confirmUpload(){this.show_confirm_form=!this.show_confirm_form}getFileName(i){return i.split("/")[6]}getEncryptedXml(){this.is_retrieving_xml=!0,this.http.post("eclaims/create-required-xml",{pHospitalTransmittalNo:this.selected_pHospitalTransmittalNo,program_desc:this.program_name}).subscribe({next:o=>{this.is_retrieving_xml=!1,this.confirmUpload(),this.encryptedXml=o.xml},error:o=>console.log(o)})}uploadClaim(){this.is_uploading_claim=!0,this.http.post("eclaims/add-required-docs",{encryptedXml:this.encryptedXml,program_code:"cc"===this.program_name||"fp"===this.program_name?"mc":this.program_name,pClaimSeriesLhio:this.selected_series_lhio}).subscribe({next:o=>{this.updateUploadData()},error:o=>{this.is_uploading_claim=!1,this.toastr.error(o.error.message,"Upload Claim",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0})}})}updateUploadData(){this.http.post("eclaims/eclaims-upload",{pHospitalTransmittalNo:this.selected_pHospitalTransmittalNo,pStatus:"IN PROCESS"}).subscribe({next:o=>{this.ticket_number=o.data.pReceiptTicketNumber,this.toastr.success("Ticket Number: "+this.ticket_number,"Claim Uploaded!",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0}),this.is_uploading_claim=!1,this.closeModal()},error:o=>console.log(o)})}deleteDocs(i){}loadDocs(){this.show_form=!1,this.http.get("eclaims/eclaims-doc",{params:{pHospitalTransmittalNo:this.selected_pHospitalTransmittalNo,required:"Y"}}).subscribe({next:o=>{this.uploaded_docs=o.data,this.show_form=!0},error:o=>console.log(o)})}uploadDocs(i){this.is_uploading=!0;const o=new FormData;this.file_to_upload.size>2097152?(this.is_uploading=!1,this.toastr.error("File size exceeds the allowed limit 2MB","File Upload",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0})):(o.append("doc",this.file_to_upload),o.append("doc_type_code",this.doc_type),o.append("pHospitalTransmittalNo",this.selected_pHospitalTransmittalNo),o.append("program_desc",this.program_name),o.append("patient_id",this.patient.id),o.append("required","Y"),this.http.post("eclaims/eclaims-doc",o).subscribe({next:l=>{this.loadDocs(),this.resetForm(),this.is_uploading=!1,this.toastr.success("Successfully uploaded.","EClaims Docs")},error:l=>console.log(l)}))}resetForm(){this.doc_type=null,this.file_to_upload=null}readXML(i){this.file_to_upload=i}getLibraries(){this.http.get("libraries/eclaims-doc-type").subscribe({next:i=>{this.doc_list=i.data,this.loadDocs()},error:i=>console.log(i)})}closeModal(){this.modalToggle.emit("upload-required-claims")}toggleModal(i,o){this.selected_doc_id=o?o.id:null,this.delete_desc=this.delete_desc+" "+(o?o.doc_type_code:""),this.modals[i]=!this.modals[i],!1===this.modals["delete-item"]&&this.loadDocs()}constructor(i,o){this.http=i,this.toastr=o,this.modalToggle=new e.vpe,this.faPenToSquare=t.Yai,this.faUpload=C.cf$,this.faTrash=C.$aW,this.faFileArrowUp=C.PQh,this.faCircleNotch=C.IJ7,this.file_to_upload=null,this.doc_type=null,this.is_uploading=!1,this.uploading_claim=!1,this.modals=[],this.arr_CR4652=["CF2","CSF","CF3","SOA w/ CTC"],this.arr_CR4651=["CF2","CSF","CF3","SOA w/ CTC"],this.arr_CR4683=["CF2","CSF","CF3","SOA w/ CTC","Pink Card"],this.arr_CR4684=["CF2","CSF","CF3","SOA w/ CTC","Pink Card"],this.arr_CR4687=["CF2","CSF + NBS Sticker","PMRF","SOA w/ CTC","Birth Certificate"],this.arr_CR4656=["CF2","CSF","Treatment Card","SOA w/ CTC"],this.arr_CR4657=["CF2","CSF","Treatment Card","SOA w/ CTC"],this.arr_CR4658=["CF2","CSF","Treatment Card","SOA w/ CTC","Summary Report"],this.arr_CR4685=["CF2","CSF + Serial Sticker","SOA w/ CTC"],this.arr_CR0385=["CF2","CSF + Serial Number of Box","SOA w/ CTC"],this.arr_CR0456=["CF2","CSF","SOA"],this.arr_CR4655=["CF2","CSF","Smear Test for OMP"],this.is_retrieving_xml=!1,this.confirm_upload=!1,this.show_confirm_form=!1,this.is_uploading_claim=!1,this.show_ticket_number=!1,this.show_form=!1,this.delete_url="eclaims/eclaims-doc/",this.delete_desc="eClaims Document"}ngOnInit(){this.getLibraries(),this.required_docs=this["arr_"+this.caserate_code]}}return(a=n).\u0275fac=function(i){return new(i||a)(e.Y36(p.O),e.Y36(x._W))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-upload-required-claims"]],inputs:{selected_pHospitalTransmittalNo:"selected_pHospitalTransmittalNo",program_name:"program_name",patient:"patient",caserate_code:"caserate_code",selected_ticket_number:"selected_ticket_number",selected_series_lhio:"selected_series_lhio",selected_transmission_control_no:"selected_transmission_control_no"},outputs:{modalToggle:"modalToggle"},decls:24,vars:9,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","55"],[1,"relative","p-4","w-full","max-w-4xl","h-full","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],["type","button",1,"disabled:bg-gray-400","bg-white","px-3","py-1","text-blue-500","rounded-md",3,"disabled","click"],[1,"pr-2",3,"icon"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],["class","grid grid-cols-3 gap-x-4 mx-5 my-2",4,"ngIf"],["class","shadow-md sm:rounded-lg m-4",4,"ngIf"],["class","grid grid-cols-1 m-8 rounded-md border border-rose-500 bg-rose-100 text-rose-700 p-5",4,"ngIf"],["class","grid grid-cols-1 mt-16",4,"ngIf"],[1,"flex","justify-between","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],[4,"ngFor","ngForOf"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-300","rounded","text-sm","font-medium","px-6","py-2.5","transition","duration-150","ease-in-out","transform","hover:scale-110",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[3,"url","delete_id","delete_desc","toggleModal",4,"ngIf"],[1,"grid","grid-cols-3","gap-x-4","mx-5","my-2"],["id","suffix_name","name","suffix_name",1,"input","mt-5",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","justify-center","mx-auto","py-5"],["type","file","id","formFile",1,"form-control","w-full","px-3","py-1.5","text-base","font-normal","text-gray-700","bg-white","bg-clip-padding","border","border-solid","border-gray-300","rounded-lg","transition","ease-in-out","m-0","focus:text-gray-700","focus:bg-white","focus:border-blue-600","focus:outline-none",3,"change"],["type","button",1,"mt-5","disabled:bg-gray-400","py-2","px-3","mb-5","bg-blue-500","text-white","rounded-lg","text-sm",3,"disabled","click"],[3,"icon","spin"],[3,"value"],[1,"shadow-md","sm:rounded-lg","m-4"],[1,"table-fixed","w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6","text-center","w-3/12"],["scope","col",1,"py-3","px-6","text-center","w-7/12"],["scope","col",1,"py-3","px-6","text-center","w-2/12"],[4,"ngIf"],["class","bg-white border-b",4,"ngFor","ngForOf"],[1,"bg-white","border-b"],[1,"py-4","px-6","text-center","w-3/12"],[1,"py-4","px-6","w-7/12","whitespace-normal"],[1,"py-4","px-6","text-center","w-2/12"],[1,"mx-0","my-0","text-rose-500","hover:cursor-pointer","flex-none","mr-2",3,"icon","click"],["colspan","3"],[1,"grid","grid-cols-1","my-14"],[1,"flex","justify-center","text-blue-500"],["spin","true",3,"icon"],[1,"flex","justify-center"],[1,"grid","grid-cols-1","m-8","rounded-md","border","border-rose-500","bg-rose-100","text-rose-700","p-5"],[1,"flex","mb-5"],[1,"flex","justify-end"],["type","button",1,"btn-save","bg-gray-400",3,"disabled","click"],["type","button",1,"btn-save","bg-rose-500","ml-5",3,"disabled","click"],["spin","true","class","pr-2",3,"icon",4,"ngIf"],["spin","true",1,"pr-2",3,"icon"],[1,"grid","grid-cols-1","mt-16"],[3,"url","delete_id","delete_desc","toggleModal"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5),e.qZA(),e.TgZ(6,"div")(7,"button",5),e.NdJ("click",function(){return o.getEncryptedXml()}),e._UZ(8,"fa-icon",6),e._uU(9," Upload Required Docs "),e.qZA()()(),e.TgZ(10,"div",7),e.YNc(11,h,10,5,"div",8),e.YNc(12,v,12,2,"div",9),e.YNc(13,A,14,5,"div",10),e.YNc(14,E,5,1,"div",11),e.qZA(),e.TgZ(15,"div",12)(16,"div")(17,"strong"),e._uU(18,"Required documents:"),e.qZA(),e.YNc(19,O,3,2,"span",13),e.qZA(),e.TgZ(20,"button",14),e.NdJ("click",function(){return o.closeModal()}),e._uU(21,"Close"),e.qZA()()()()(),e._UZ(22,"div",15),e.YNc(23,F,1,3,"app-delete-item",16)),2&i&&(e.xp6(5),e.hij(" CLAIM: ",o.selected_pHospitalTransmittalNo," "),e.xp6(2),e.Q6J("disabled",o.is_uploading||!o.show_form||o.show_confirm_form),e.xp6(1),e.Q6J("icon",o.faUpload),e.xp6(3),e.Q6J("ngIf",!o.is_retrieving_xml&&!o.show_confirm_form),e.xp6(1),e.Q6J("ngIf",!o.is_retrieving_xml&&!o.show_confirm_form),e.xp6(1),e.Q6J("ngIf",!o.is_retrieving_xml&&o.show_confirm_form),e.xp6(1),e.Q6J("ngIf",o.is_retrieving_xml),e.xp6(5),e.Q6J("ngForOf",o.required_docs),e.xp6(4),e.Q6J("ngIf",o.modals["delete-item"]))},dependencies:[d.sg,d.O5,_.BN,c.YN,c.Kr,c.EJ,c.JJ,c.On,u.N]}),n})()},8048:(w,T,r)=>{r.d(T,{q:()=>y});var e=r(6814),t=r(5597),C=r(6903),p=r(6223),x=r(2982),d=r(4504),_=r(607),c=r(3146),u=r(5879);let y=(()=>{var h;class g{}return(h=g).\u0275fac=function(b){return new(b||h)},h.\u0275mod=u.oAB({type:h}),h.\u0275inj=u.cJS({imports:[e.ez,t.uH,C.X,p.UX,p.u5,x.Tm,d.K,_.a,c.N]}),g})()},3146:(w,T,r)=>{r.d(T,{N:()=>c});var e=r(5879),t=r(6223),C=r(5597),p=r(590),x=r(265),d=r(2425);const _=["confirmCode"];let c=(()=>{var u;class y{generateCode(){this.is_loading=!1,this.confirmation_code=null,this.confirm_code=Math.floor(1e3*Math.random()).toString().padStart(4,"0")}onSubmit(){this.is_loading=!0,this.confirm_code===this.confirmation_code?this.http.delete(this.url,this.delete_id).subscribe({next:()=>{this.is_loading=!1,this.toastr.error("Record was deleted!"),this.closeModal()},error:g=>{console.log(g),this.is_loading=!1,this.generateCode()}}):(this.generateCode(),this.toastr.info("Code mismatch, please try again","Incorrect Code"))}closeModal(){this.toggleModal.emit("delete-item")}constructor(g,m){this.http=g,this.toastr=m,this.toggleModal=new e.vpe,this.faTrash=p.$aW,this.confirm_code="0000",this.is_loading=!1}ngOnChanges(g){this.generateCode()}ngAfterViewInit(){this.inputElement.nativeElement.focus()}}return(u=y).\u0275fac=function(g){return new(g||u)(e.Y36(x.O),e.Y36(d._W))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-delete-item"]],viewQuery:function(g,m){if(1&g&&e.Gf(_,5),2&g){let b;e.iGM(b=e.CRH())&&(m.inputElement=b.first)}},inputs:{url:"url",delete_id:"delete_id",delete_desc:"delete_desc"},outputs:{toggleModal:"toggleModal"},standalone:!0,features:[e.TTD,e.jDz],decls:29,vars:8,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-red-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"flex","item-start","flex-wrap","pb-5"],[1,"grid","grid-cols-3","px-5","py-5","mt-10","mx-10","w-full","bg-red-50","rounded-lg","text-center"],[1,"col-span-3","text-left","mb-2","pb-2","border-b","border-slate-200"],[1,"col-span-1","text-sm","px-5","py-2","mt-2"],[1,"block","mb-3"],[1,"font-bold","text-2xl","select-none"],["for","confirmCode"],["name","confirmCode","type","text",1,"mt-2","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","pl-3","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModel","keyup.enter","ngModelChange"],["confirmCode",""],[1,"col-span-1","mt-11"],["type","button",1,"my-auto","text-white","bg-red-500","enabled:hover:ring-2","enabled:focus:outline-none","enabled:hover:ring-red-300","disabled:bg-gray-300","font-medium","rounded","text-sm","px-6","py-2.5","text-center","transition","duration-150","ease-in-out",3,"disabled","click"],[1,"mx-0","my-0","text-white",3,"icon"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-200","rounded","text-sm","font-medium","my-2","px-6","py-2.5","transition","duration-150","ease-in-out",3,"disabled","click"],[1,"opacity-50","fixed","inset-0","z-[59]","bg-black"]],template:function(g,m){1&g&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5),e.qZA()(),e.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),e._uU(10),e.qZA(),e.TgZ(11,"div",9)(12,"span",10),e._uU(13,"Delete Code"),e.qZA(),e.TgZ(14,"span",11),e._uU(15),e.qZA()(),e.TgZ(16,"div",9)(17,"label",12),e._uU(18,"Enter Code"),e.qZA(),e.TgZ(19,"input",13,14),e.NdJ("keyup.enter",function(){return m.onSubmit()})("ngModelChange",function(v){return m.confirmation_code=v}),e.qZA()(),e.TgZ(21,"div",15)(22,"button",16),e.NdJ("click",function(){return m.onSubmit()}),e._UZ(23,"fa-icon",17),e._uU(24," Delete "),e.qZA()()()()(),e.TgZ(25,"div",18)(26,"button",19),e.NdJ("click",function(){return m.closeModal()}),e._uU(27,"Cancel"),e.qZA()()()()(),e._UZ(28,"div",20)),2&g&&(e.xp6(5),e.AsE(" Delete ",m.delete_desc,": ",m.delete_id," "),e.xp6(5),e.hij(" Your are about to delete a ",m.delete_desc," record for this patient. Please enter the generated delete code in order to proceed. "),e.xp6(5),e.Oqu(m.confirm_code),e.xp6(4),e.Q6J("ngModel",m.confirmation_code),e.xp6(3),e.Q6J("disabled",!m.confirmation_code||m.is_loading),e.xp6(1),e.Q6J("icon",m.faTrash),e.xp6(3),e.Q6J("disabled",m.is_loading))},dependencies:[C.uH,C.BN,t.u5,t.Fj,t.JJ,t.On],changeDetection:0}),y})()},4504:(w,T,r)=>{r.d(T,{I:()=>t,K:()=>C});var e=r(5879);let t=(()=>{class p{constructor(){this._printStyle=[],this.previewOnly=!1,this.useExistingCss=!1,this.printDelay=0,this._styleSheetFile=""}set printStyle(d){for(let _ in d)d.hasOwnProperty(_)&&this._printStyle.push((_+JSON.stringify(d[_])).replace(/['"]+/g,""));this.returnStyleValues()}returnStyleValues(){return`<style> ${this._printStyle.join(" ").replace(/,/g,";")} </style>`}set styleSheetFile(d){let _=function(c){return`<link rel="stylesheet" type="text/css" href="${c}">`};if(-1!==d.indexOf(",")){const c=d.split(",");for(let u of c)this._styleSheetFile=this._styleSheetFile+_(u)}else this._styleSheetFile=_(d)}returnStyleSheetLinkTags(){return this._styleSheetFile}getElementTag(d){const _=[],c=document.getElementsByTagName(d);for(let u=0;u<c.length;u++)_.push(c[u].outerHTML);return _.join("\r\n")}getFormData(d){for(var _=0;_<d.length;_++)d[_].defaultValue=d[_].value,d[_].checked&&(d[_].defaultChecked=!0)}getHtmlContents(){let d=document.getElementById(this.printSectionId),_=d.getElementsByTagName("input");this.getFormData(_);let c=d.getElementsByTagName("textarea");return this.getFormData(c),d.innerHTML}print(){let d,_,c="",u="";const y=this.getElementTag("base");this.useExistingCss&&(c=this.getElementTag("style"),u=this.getElementTag("link")),d=this.getHtmlContents(),_=window.open("","_blank","top=0,left=0,height=auto,width=auto"),_.document.open(),_.document.write(`\n      <html>\n        <head>\n          <title>${this.printTitle?this.printTitle:""}</title>\n          ${y}\n          ${this.returnStyleValues()}\n          ${this.returnStyleSheetLinkTags()}\n          ${c}\n          ${u}\n        </head>\n        <body>\n          ${d}\n          <script defer>\n            function triggerPrint(event) {\n              window.removeEventListener('load', triggerPrint, false);\n              ${this.previewOnly?"":`setTimeout(function() {\n                closeWindow(window.print());\n              }, ${this.printDelay});`}\n            }\n            function closeWindow(){\n                window.close();\n            }\n            window.addEventListener('load', triggerPrint, false);\n          <\/script>\n        </body>\n      </html>`),_.document.close()}}return p.\u0275fac=function(d){return new(d||p)},p.\u0275dir=e.lG2({type:p,selectors:[["button","ngxPrint",""]],hostBindings:function(d,_){1&d&&e.NdJ("click",function(){return _.print()})},inputs:{previewOnly:"previewOnly",printSectionId:"printSectionId",printTitle:"printTitle",useExistingCss:"useExistingCss",printDelay:"printDelay",printStyle:"printStyle",styleSheetFile:"styleSheetFile"}}),p})(),C=(()=>{class p{}return p.\u0275fac=function(d){return new(d||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({}),p})()}}]);