"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[914],{53:(j,y,d)=>{d.d(y,{d:()=>Y});var o=d(5879),c=d(6814),Z=d(5211),h=d(2096),e=d(2181),a=d(3997),b=d(3620),T=d(9397),F=d(4664),U=d(6306),k=d(7398),x=d(8645),m=d(1449),w=d(590),J=d(5597),A=d(8316),C=d(6223),I=d(265),N=d(2425);function Q(g,v){if(1&g&&(o.TgZ(0,"div",18)(1,"h5",19)(2,"strong"),o._uU(3),o.qZA(),o._uU(4),o.qZA()()),2&g){const _=v.item,p=v.searchTerm;o.xp6(1),o.Q6J("ngOptionHighlight",p),o.xp6(2),o.hij("",_.icd10_code,":"),o.xp6(1),o.hij(" ",_.icd10_desc,"")}}function M(g,v){if(1&g&&o._UZ(0,"fa-icon",23),2&g){const _=o.oxw(3);o.Q6J("icon",_.faSpinner)}}function P(g,v){if(1&g&&o._UZ(0,"fa-icon",24),2&g){const _=o.oxw(3);o.Q6J("icon",_.faSave)}}function E(g,v){if(1&g){const _=o.EpF();o.TgZ(0,"button",20),o.NdJ("click",function(){o.CHM(_);const l=o.oxw(2);return o.KtG(l.onSubmit())}),o.YNc(1,M,1,1,"fa-icon",21),o.YNc(2,P,1,1,"fa-icon",22),o._uU(3),o.qZA()}if(2&g){const _=o.oxw(2);o.Q6J("disabled",_.is_saving),o.xp6(1),o.Q6J("ngIf",_.is_saving),o.xp6(1),o.Q6J("ngIf",!_.is_saving),o.xp6(1),o.hij(" ",_.is_saving?"Saving":"Save"," ")}}function L(g,v){if(1&g){const _=o.EpF();o.TgZ(0,"div")(1,"div",8)(2,"button",9),o._UZ(3,"fa-icon",10),o.qZA(),o.TgZ(4,"div",11)(5,"ng-select",12),o.NdJ("ngModelChange",function(l){o.CHM(_);const q=o.oxw();return o.KtG(q.selectedFdx=l)}),o.ALo(6,"async"),o.YNc(7,Q,5,3,"ng-template",13),o.qZA()()(),o.TgZ(8,"div",14)(9,"textarea",15),o.NdJ("ngModelChange",function(l){o.CHM(_);const q=o.oxw();return o.KtG(q.fdx_remarks=l)}),o.qZA()(),o.TgZ(10,"div",16),o.YNc(11,E,4,4,"button",17),o.qZA()()}if(2&g){const _=o.oxw();o.xp6(3),o.Q6J("icon",_.faPlusSquare),o.xp6(2),o.Q6J("items",o.lcZ(6,10,_.fdx$))("multiple",!0)("loading",_.fdxLoading)("typeahead",_.searchInput$)("ngModel",_.selectedFdx)("disabled",_.consult_done||!_.allowed_to_edit),o.xp6(4),o.Q6J("disabled",_.consult_done||!_.allowed_to_edit)("ngModel",_.fdx_remarks),o.xp6(2),o.Q6J("ngIf",!_.consult_done&&_.allowed_to_edit)}}const O=function(g){return{"rounded-b":g}};let Y=(()=>{var g;class v{onSubmit(){this.is_saving=!0,this.http.post("consultation/final-diagnosis",{notes_id:this.consult_details.consult_notes.id,final_diagnosis:this.selectedFdx}).subscribe({next:l=>{this.saveNotes()},error:l=>console.log(l)})}saveNotes(){this.fdx_remarks?this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,fdx_remarks:this.fdx_remarks}).subscribe({next:()=>{this.showToastr(),this.loadConsult.emit()},error:l=>console.log(l)}):this.showToastr()}showToastr(){this.is_saving=!1,this.toastr.success("Successfully updated!","Final Diagnosis")}loadFdx(p){this.fdx$=(0,Z.z)((0,h.of)(p),this.searchInput$.pipe((0,e.h)(l=>null!==l&&l.length>=this.minLengthTerm),(0,a.x)(),(0,b.b)(800),(0,T.b)(()=>this.fdxLoading=!0),(0,F.w)(l=>this.getFdx(l).pipe((0,U.K)(()=>(0,h.of)([])),(0,T.b)(()=>this.fdxLoading=!1)))))}getFdx(p=null){return this.http.get("libraries/icd10",{params:{"filter[search]":p}}).pipe((0,k.U)(l=>l.data))}loadSelected(){let p=[],l=[];this.final_dx&&Object.keys(this.final_dx).length>0?(Object.entries(this.final_dx).forEach(([q,K],S)=>{let D=K;p.push(D.icd10_code.toString()),l.push(D.lib_icd10)}),this.loadFdx(l),this.selectedFdx=p):this.loadFdx([])}ngOnChanges(p){this.show_content=this.toggle_content,this.consult_details&&(this.final_dx=this.consult_details.consult_notes.finaldx,this.fdx_remarks=this.consult_details.consult_notes.fdx_remarks,this.consult_done=this.consult_details.consult_done,this.loadSelected())}constructor(p,l){this.http=p,this.toastr=l,this.loadConsult=new o.vpe,this.faPlusSquare=m.CPW,this.faChevronCircleUp=w._qI,this.faChevronCircleDown=w.yh$,this.faSave=m.r6l,this.faSpinner=w.LM3,this.fdxLoading=!1,this.show_content=!0,this.is_saving=!1,this.consult_done=!1,this.searchInput$=new x.x,this.minLengthTerm=3}}return(g=v).\u0275fac=function(p){return new(p||g)(o.Y36(I.O),o.Y36(N._W))},g.\u0275cmp=o.Xpm({type:g,selectors:[["app-final-dx"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",allowed_to_edit:"allowed_to_edit"},outputs:{loadConsult:"loadConsult"},standalone:!0,features:[o.TTD,o.jDz],decls:10,vars:5,consts:[[1,"grid","grid-cols-10","mt-4"],[1,"col-span-2","pt-2"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[1,"flex","mb-2","p-4"],["type","submit",1,"inline-flex","p-1","items-center","text-gray-50","bg-sky-400","rounded-l-md","border","border-gray-300"],[1,"text-white","fa-xl",3,"icon"],[1,"chips-container"],["placeholder","search","typeToSearchText","search...","bindValue","icd10_code","bindLabel","icd10_desc","notFoundText","No records found",1,"select-chips",3,"items","multiple","loading","typeahead","ngModel","disabled","ngModelChange"],["ng-option-tmp",""],[1,"flex","px-4","pb-4"],["rows","3","id","fdx_remarks","placeholder","Final Diagnosis remarks",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"disabled","ngModel","ngModelChange"],[1,"flex","justify-between"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[1,"whitespace-normal"],[1,"text-gray-700",3,"ngOptionHighlight"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(p,l){1&p&&(o.TgZ(0,"div",0)(1,"div",1),o._uU(2," Final Diagnosis "),o.qZA(),o.TgZ(3,"div",2)(4,"div",3)(5,"span",4),o._uU(6," Final Diagnosis "),o.TgZ(7,"button",5),o.NdJ("click",function(){return l.show_content=!l.show_content}),o._UZ(8,"fa-icon",6),o.qZA()(),o.YNc(9,L,12,12,"div",7),o.qZA()()()),2&p&&(o.xp6(5),o.Q6J("ngClass",o.VKq(3,O,!l.show_content)),o.xp6(3),o.Q6J("icon",l.show_content?l.faChevronCircleUp:l.faChevronCircleDown),o.xp6(1),o.Q6J("ngIf",l.show_content))},dependencies:[c.ez,c.mk,c.O5,c.Ov,J.uH,J.BN,A.A0,A.w9,A.ir,C.u5,C.Fj,C.JJ,C.On,C.UX]}),v})()},8549:(j,y,d)=>{d.d(y,{t:()=>Z});var o=d(6814),c=d(5879);let Z=(()=>{var h;class e{}return(h=e).\u0275fac=function(b){return new(b||h)},h.\u0275cmp=c.Xpm({type:h,selectors:[["app-initial-dx"]],standalone:!0,features:[c.jDz],decls:2,vars:0,template:function(b,T){1&b&&(c.TgZ(0,"p"),c._uU(1,"initial-dx works!"),c.qZA())},dependencies:[o.ez]}),e})()},6094:(j,y,d)=>{d.d(y,{w:()=>Ie});var o=d(6814),c=d(590),Z=d(1449),h=d(5597),e=d(5879),a=d(6223),b=d(265),T=d(2425);function F(i,s){1&i&&(e.TgZ(0,"div",42)(1,"strong"),e._uU(2,"Note: "),e.qZA(),e._uU(3,"Saving this prescription will automatically add new item in your drug list. "),e.qZA())}function U(i,s){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.required_message," ")}}function k(i,s){if(1&i&&(e.TgZ(0,"div",46),e.YNc(1,U,2,1,"div",47),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.f.brand_name.errors?null:t.f.brand_name.errors.required)}}const x=function(i){return{"text-red-500":i}},m=function(i){return{"invalid-input":i}};function w(i,s){if(1&i&&(e.TgZ(0,"div",43)(1,"label",44),e._uU(2,"Brand Name"),e.qZA(),e._UZ(3,"input",45),e.YNc(4,k,2,1,"div",14),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(3,x,t.is_saving&&t.f.brand_name.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(5,m,t.is_saving&&t.f.brand_name.errors)),e.xp6(1),e.Q6J("ngIf",t.is_saving&&t.f.brand_name.errors)}}function J(i,s){if(1&i&&(e.TgZ(0,"div",43)(1,"span",48),e._uU(2,"Drug description:"),e.qZA(),e._uU(3),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.hij(" ",t.selected_drug.konsulta_medicine?t.selected_drug.konsulta_medicine.desc:t.selected_drug.desc," ")}}function A(i,s){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.required_message," ")}}function C(i,s){if(1&i&&(e.TgZ(0,"div",46),e.YNc(1,A,2,1,"div",47),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.f.added_medicine.errors?null:t.f.added_medicine.errors.required)}}function I(i,s){if(1&i&&(e.TgZ(0,"div",30)(1,"label",49),e._uU(2,"Drug name"),e.qZA(),e._UZ(3,"input",50),e.YNc(4,C,2,1,"div",14),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(3,x,t.is_saving&&t.f.added_medicine.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(5,m,t.is_saving&&t.f.added_medicine.errors)),e.xp6(1),e.Q6J("ngIf",t.is_saving&&t.f.added_medicine.errors)}}function N(i,s){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.required_message," ")}}function Q(i,s){if(1&i&&(e.TgZ(0,"div",46),e.YNc(1,N,2,1,"div",47),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.f.dosage_quantity.errors?null:t.f.dosage_quantity.errors.required)}}function M(i,s){if(1&i&&(e.TgZ(0,"option",51),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.desc)}}function P(i,s){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.required_message," ")}}function E(i,s){if(1&i&&(e.TgZ(0,"div",46),e.YNc(1,P,2,1,"div",47),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.f.dosage_uom.errors?null:t.f.dosage_uom.errors.required)}}function L(i,s){if(1&i&&(e.TgZ(0,"option",51),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.desc)}}function O(i,s){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.required_message," ")}}function Y(i,s){if(1&i&&(e.TgZ(0,"div",46),e.YNc(1,O,2,1,"div",47),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.f.dose_regimen.errors?null:t.f.dose_regimen.errors.required)}}function g(i,s){if(1&i&&(e.TgZ(0,"option",51),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.desc)}}function v(i,s){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.required_message," ")}}function _(i,s){if(1&i&&(e.TgZ(0,"div",46),e.YNc(1,v,2,1,"div",47),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.f.medicine_route_code.errors?null:t.f.medicine_route_code.errors.required)}}function p(i,s){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.required_message," ")}}function l(i,s){if(1&i&&(e.TgZ(0,"div",46),e.YNc(1,p,2,1,"div",47),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.f.duration_intake.errors?null:t.f.duration_intake.errors.required)}}function q(i,s){if(1&i&&(e.TgZ(0,"option",51),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.desc)}}function K(i,s){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.required_message," ")}}function S(i,s){if(1&i&&(e.TgZ(0,"div",46),e.YNc(1,K,2,1,"div",47),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.f.duration_frequency.errors?null:t.f.duration_frequency.errors.required)}}function D(i,s){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.required_message," ")}}function B(i,s){if(1&i&&(e.TgZ(0,"div",46),e.YNc(1,D,2,1,"div",47),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.f.quantity.errors?null:t.f.quantity.errors.required)}}function R(i,s){if(1&i&&(e.TgZ(0,"option",51),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.desc)}}function W(i,s){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.required_message," ")}}function H(i,s){if(1&i&&(e.TgZ(0,"div",46),e.YNc(1,W,2,1,"div",47),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.f.quantity_preparation.errors?null:t.f.quantity_preparation.errors.required)}}function $(i,s){if(1&i&&(e.TgZ(0,"option",51),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.desc)}}function G(i,s){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.required_message," ")}}function z(i,s){if(1&i&&(e.TgZ(0,"div",46),e.YNc(1,G,2,1,"div",47),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.f.medicine_purpose.errors?null:t.f.medicine_purpose.errors.required)}}function X(i,s){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.required_message," ")}}function ee(i,s){if(1&i&&(e.TgZ(0,"div",46),e.YNc(1,X,2,1,"div",47),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.f.purpose_other.errors?null:t.f.purpose_other.errors.required)}}function te(i,s){if(1&i&&(e.TgZ(0,"div",30)(1,"label",52),e._uU(2,"Purpose remarks"),e.qZA(),e._UZ(3,"input",53),e.YNc(4,ee,2,1,"div",14),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(3,x,t.is_saving&&t.f.purpose_other.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(5,m,t.is_saving&&t.f.purpose_other.errors)),e.xp6(1),e.Q6J("ngIf",t.is_saving&&t.f.purpose_other.errors)}}function ie(i,s){if(1&i&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.Oqu(t.value)}}function ne(i,s){if(1&i&&(e.TgZ(0,"div",54)(1,"div",55)(2,"ul",56),e.YNc(3,ie,2,1,"li",57),e.ALo(4,"keyvalue"),e.qZA()()()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",e.lcZ(4,1,t.submit_errors))}}let oe=(()=>{var i;class s{get f(){return this.prescriptionForm.controls}closeModal(){this.toggleForm.emit()}onSubmit(){this.is_loading=!0,this.prescriptionForm.valid&&(this.selected_drug.new_drug?this.http.post("medicine/list",this.prescriptionForm.value).subscribe({next:r=>{this.savePrescription()},error:r=>{this.is_loading=!1,this.http.showError(r.error.message,"Medicine List")}}):(this.is_loading=!1,this.savePrescription()))}savePrescription(){let r;r=this.selected_drug&&this.selected_drug.id?this.http.update("medicine/prescriptions/",this.selected_drug.id,this.prescriptionForm.value):this.http.post("medicine/prescriptions",this.prescriptionForm.value),r.subscribe({next:n=>{this.is_loading=!1,this.toastr.success("Successfully added","Prescription"),this.closeModal()},error:n=>{this.is_loading=!1,this.http.showError(n.error.message,"Prescription")}})}loadLibraries(){this.libraries.forEach(r=>{this.http.get("libraries/"+r.location).subscribe({next:n=>{this[r.var_name]=n.data},error:n=>console.log(n),complete:()=>this.show_form=!0})})}constructor(r,n,u){this.http=r,this.toastr=n,this.formBuilder=u,this.toggleForm=new e.vpe,this.faCircleNotch=c.IJ7,this.faSave=Z.r6l,this.is_saving=!1,this.show_form=!1,this.membership_types=[],this.prescriptionForm=new a.cw({brand_name:new a.NI(null),medicine_name:new a.NI(null),medicine_code:new a.NI(null),patient_id:new a.NI(null),prescribed_by:new a.NI(null),consult_id:new a.NI(null),prescription_date:new a.NI(null),konsulta_medicine_code:new a.NI(null),added_medicine:new a.NI(null),dosage_quantity:new a.NI(null),dosage_uom:new a.NI(null),dose_regimen:new a.NI(null),medicine_purpose:new a.NI(null),purpose_other:new a.NI(null),duration_intake:new a.NI(null),duration_frequency:new a.NI(null),quantity:new a.NI(null),quantity_preparation:new a.NI(null),instruction_quantity:new a.NI(null),medicine_route_code:new a.NI(null),remarks:new a.NI(null)}),this.is_loading=!1,this.libraries=[{var_name:"drug_uom",location:"unit-of-measurements"},{var_name:"drug_regimen",location:"dose-regimens"},{var_name:"drug_purpose",location:"purposes"},{var_name:"drug_frequency",location:"duration-frequencies"},{var_name:"drug_preparation",location:"preparations"},{var_name:"drug_route",location:"medicine-route"}],this.add_drug=!1}checkPurpose(){"99"===this.prescriptionForm.value.medicine_purpose?this.prescriptionForm.controls.purpose_other.enable():this.prescriptionForm.controls.purpose_other.disable()}patchValue(){this.prescriptionForm.patchValue({konsulta_medicine_code:this.selected_drug.konsulta_medicine?this.selected_drug.konsulta_medicine.code:null,added_medicine:this.selected_drug.added_medicine?this.selected_drug.added_medicine:null,dosage_quantity:this.selected_drug.dosage_quantity,dosage_uom:this.selected_drug.unit_of_measurement?this.selected_drug.unit_of_measurement.code:null,dose_regimen:this.selected_drug.regimen?this.selected_drug.regimen.code:null,medicine_purpose:this.selected_drug.purpose?this.selected_drug.purpose.code:null,duration_intake:this.selected_drug.duration_intake,duration_frequency:this.selected_drug.frequency?this.selected_drug.frequency.code:null,quantity:this.selected_drug.quantity,quantity_preparation:this.selected_drug.preparation?this.selected_drug.preparation.code:null,instruction_quantity:this.selected_drug.instruction_quantity??1,medicine_route_code:this.selected_drug.medicine_route?this.selected_drug.medicine_route.code:null,remarks:this.selected_drug.remarks}),this.selected_drug&&this.selected_drug.new_drug&&this.prescriptionForm.patchValue({konsulta_medicine_code:this.selected_drug.code}),this.selected_drug.konsulta_medicine?this.prescriptionForm.controls.added_medicine.disable():this.selected_drug.added_medicine&&(this.prescriptionForm.controls.added_medicine.enable(),this.prescriptionForm.controls.konsulta_medicine_code.disable()),this.checkPurpose()}ngOnChanges(r){this.prescriptionForm=this.formBuilder.nonNullable.group({brand_name:[null],patient_id:[this.consult_details.patient.id],prescribed_by:[this.user_id,[a.kI.required]],consult_id:[this.consult_details.id,[a.kI.required]],prescription_date:[(0,o.p6)(this.consult_details.consult_date,"yyyy-MM-dd","en","Asia/Manila"),[a.kI.required]],konsulta_medicine_code:[null,[a.kI.required]],added_medicine:[null],dosage_quantity:[null,[a.kI.required]],dosage_uom:[null,[a.kI.required]],dose_regimen:[null,[a.kI.required]],medicine_purpose:[null,[a.kI.required]],purpose_other:[null,[a.kI.required]],duration_intake:[null,[a.kI.required]],duration_frequency:[null,[a.kI.required]],quantity:[null,[a.kI.required]],quantity_preparation:[null,[a.kI.required]],instruction_quantity:[1],medicine_route_code:[null,[a.kI.required]],remarks:[null]}),this.selected_drug?this.patchValue():this.prescriptionForm.controls.konsulta_medicine_code.disable()}}return(i=s).\u0275fac=function(r){return new(r||i)(e.Y36(b.O),e.Y36(T._W),e.Y36(a.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-drug-form"]],inputs:{selected_drug:"selected_drug",consult_details:"consult_details",drug_uom:"drug_uom",drug_regimen:"drug_regimen",drug_purpose:"drug_purpose",drug_frequency:"drug_frequency",drug_preparation:"drug_preparation",drug_route:"drug_route",user_id:"user_id"},outputs:{toggleForm:"toggleForm"},standalone:!0,features:[e.TTD,e.jDz],decls:77,vars:87,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white","pl-5"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"w-full","max-w-3xl","text-left","text-gray-500","dark:text-gray-400",3,"formGroup"],[1,"grid","grid-cols-3","gap-4","pb-5","px-10"],["class","col-span-3 mt-5 mx-5 px-5 py-3 rounded-md border border-yellow-500 bg-yellow-100",4,"ngIf"],["class","col-span-3 mt-5 mx-5",4,"ngIf"],["class","col-span-3 text-sm ",4,"ngIf"],[1,"col-span-1","text-sm"],["for","dosage_quantity",1,"font-semibold",3,"ngClass"],["name","dosage_quantity","id","dosage_quantity","formControlName","dosage_quantity","type","number",1,"input",3,"ngClass"],["class","invalid-alert",4,"ngIf"],["for","dosage_uom",1,"font-semibold",3,"ngClass"],["name","dosage_uom","id","dosage_uom","formControlName","dosage_uom",1,"input",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["for","dose_regimen",1,"font-semibold",3,"ngClass"],["name","dose_regimen","id","dose_regimen","formControlName","dose_regimen",1,"input",3,"ngClass"],["for","medicine_route_code",1,"font-semibold",3,"ngClass"],["name","route","id","medicine_route_code","formControlName","medicine_route_code",1,"input",3,"ngClass"],["for","duration_intake",1,"font-semibold",3,"ngClass"],["name","duration_intake","id","duration_intake","formControlName","duration_intake","type","number",1,"input",3,"ngClass"],["for","duration_frequency",1,"font-semibold",3,"ngClass"],["name","duration_frequency","id","duration_frequency","formControlName","duration_frequency",1,"input",3,"ngClass"],["for","quantity",1,"font-semibold",3,"ngClass"],["name","quantity","id","quantity","formControlName","quantity","type","number",1,"input",3,"ngClass"],["for","quantity_preparation",1,"font-semibold",3,"ngClass"],["name","quantity_preparation","id","quantity_preparation","formControlName","quantity_preparation",1,"input",3,"ngClass"],[1,"col-span-3","text-sm"],["for","medicine_purpose",1,"font-semibold",3,"ngClass"],["name","medicine_purpose","id","medicine_purpose","formControlName","medicine_purpose",1,"input",3,"ngClass","change"],["class","col-span-3 text-sm",4,"ngIf"],["for","remarks",1,"font-semibold",3,"ngClass"],["name","remarks","id","remarks","formControlName","remarks","type","text",1,"input",3,"ngClass"],["id","show_errors","class","relative mx-10 col-span-8 bg-red-200 rounded border border-red-300 text-red-900 text-sm mb-5",4,"ngIf"],[1,"flex","justify-end","mr-10","py-3","rounded-b"],["type","button",1,"btn-save","px-10","bg-gray-400","mr-5",3,"disabled","click"],["type","button",1,"btn-save","px-10","disabled:bg-gray-300",3,"disabled","click"],[3,"icon","spin"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"col-span-3","mt-5","mx-5","px-5","py-3","rounded-md","border","border-yellow-500","bg-yellow-100"],[1,"col-span-3","mt-5","mx-5"],["for","brand_name",1,"font-semibold",3,"ngClass"],["name","brand_name","id","brand_name","formControlName","brand_name","type","text",1,"input",3,"ngClass"],[1,"invalid-alert"],[4,"ngIf"],[1,"font-semibold"],["for","added_medicine",1,"font-semibold",3,"ngClass"],["name","added_medicine","id","added_medicine","formControlName","added_medicine","type","text",1,"input",3,"ngClass"],[3,"value"],["for","purpose_other",1,"font-semibold",3,"ngClass"],["name","purpose_other","id","purpose_other","formControlName","purpose_other","type","text",1,"input",3,"ngClass"],["id","show_errors",1,"relative","mx-10","col-span-8","bg-red-200","rounded","border","border-red-300","text-red-900","text-sm","mb-5"],[1,"block","p-3","pl-10"],[1,"list-disc"],[4,"ngFor","ngForOf"]],template:function(r,n){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5," Prescribe medicine "),e.qZA()(),e.TgZ(6,"div",5)(7,"form",6)(8,"div",7),e.YNc(9,F,4,0,"div",8),e.YNc(10,w,5,7,"div",9),e.YNc(11,J,4,1,"div",9),e.YNc(12,I,5,7,"div",10),e.TgZ(13,"div",11)(14,"label",12),e._uU(15,"Dosage Qty."),e.qZA(),e._UZ(16,"input",13),e.YNc(17,Q,2,1,"div",14),e.qZA(),e.TgZ(18,"div",11)(19,"label",15),e._uU(20,"Dosage unit"),e.qZA(),e.TgZ(21,"select",16),e.YNc(22,M,2,2,"option",17),e.qZA(),e.YNc(23,E,2,1,"div",14),e.qZA(),e.TgZ(24,"div",11)(25,"label",18),e._uU(26,"Dosage regimen"),e.qZA(),e.TgZ(27,"select",19),e.YNc(28,L,2,2,"option",17),e.qZA(),e.YNc(29,Y,2,1,"div",14),e.qZA(),e.TgZ(30,"div",11)(31,"label",20),e._uU(32,"Medicine Route"),e.qZA(),e.TgZ(33,"select",21),e.YNc(34,g,2,2,"option",17),e.qZA(),e.YNc(35,_,2,1,"div",14),e.qZA(),e.TgZ(36,"div",11)(37,"label",22),e._uU(38,"Duration"),e.qZA(),e._UZ(39,"input",23),e.YNc(40,l,2,1,"div",14),e.qZA(),e.TgZ(41,"div",11)(42,"label",24),e._uU(43,"Duration frequency"),e.qZA(),e.TgZ(44,"select",25),e.YNc(45,q,2,2,"option",17),e.qZA(),e.YNc(46,S,2,1,"div",14),e.qZA(),e.TgZ(47,"div",11)(48,"label",26),e._uU(49,"Quantity"),e.qZA(),e._UZ(50,"input",27),e.YNc(51,B,2,1,"div",14),e.qZA(),e.TgZ(52,"div",11)(53,"label",28),e._uU(54,"Preparation"),e.qZA(),e.TgZ(55,"select",29),e.YNc(56,R,2,2,"option",17),e.qZA(),e.YNc(57,H,2,1,"div",14),e.qZA(),e.TgZ(58,"div",30)(59,"label",31),e._uU(60,"Medicine purpose"),e.qZA(),e.TgZ(61,"select",32),e.NdJ("change",function(){return n.checkPurpose()}),e.YNc(62,$,2,2,"option",17),e.qZA(),e.YNc(63,z,2,1,"div",14),e.qZA(),e.YNc(64,te,5,7,"div",33),e.TgZ(65,"div",30)(66,"label",34),e._uU(67,"Remarks"),e.qZA(),e._UZ(68,"input",35),e.qZA()(),e.YNc(69,ne,5,3,"div",36),e.qZA()(),e.TgZ(70,"div",37)(71,"button",38),e.NdJ("click",function(){return n.closeModal()}),e._uU(72,"Close"),e.qZA(),e.TgZ(73,"button",39),e.NdJ("click",function(){return n.onSubmit()}),e._UZ(74,"fa-icon",40),e._uU(75),e.qZA()()()()(),e._UZ(76,"div",41)),2&r&&(e.xp6(7),e.Q6J("formGroup",n.prescriptionForm),e.xp6(2),e.Q6J("ngIf",n.selected_drug.new_drug),e.xp6(1),e.Q6J("ngIf",n.selected_drug.new_drug),e.xp6(1),e.Q6J("ngIf",!n.add_drug&&!n.f.added_medicine.value),e.xp6(1),e.Q6J("ngIf",n.f.added_medicine.value),e.xp6(2),e.Q6J("ngClass",e.VKq(47,x,n.is_saving&&n.f.dosage_quantity.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(49,m,n.is_saving&&n.f.dosage_quantity.errors)),e.xp6(1),e.Q6J("ngIf",n.is_saving&&n.f.dosage_quantity.errors),e.xp6(2),e.Q6J("ngClass",e.VKq(51,x,n.is_saving&&n.f.dosage_uom.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(53,m,n.is_saving&&n.f.dosage_uom.errors)),e.xp6(1),e.Q6J("ngForOf",n.drug_uom),e.xp6(1),e.Q6J("ngIf",n.is_saving&&n.f.dosage_uom.errors),e.xp6(2),e.Q6J("ngClass",e.VKq(55,x,n.is_saving&&n.f.dose_regimen.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(57,m,n.is_saving&&n.f.dose_regimen.errors)),e.xp6(1),e.Q6J("ngForOf",n.drug_regimen),e.xp6(1),e.Q6J("ngIf",n.is_saving&&n.f.dose_regimen.errors),e.xp6(2),e.Q6J("ngClass",e.VKq(59,x,n.is_saving&&n.f.medicine_route_code.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(61,m,n.is_saving&&n.f.medicine_route_code.errors)),e.xp6(1),e.Q6J("ngForOf",n.drug_route),e.xp6(1),e.Q6J("ngIf",n.is_saving&&n.f.medicine_route_code.errors),e.xp6(2),e.Q6J("ngClass",e.VKq(63,x,n.is_saving&&n.f.duration.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(65,m,n.is_saving&&n.f.duration_intake.errors)),e.xp6(1),e.Q6J("ngIf",n.is_saving&&n.f.duration_intake.errors),e.xp6(2),e.Q6J("ngClass",e.VKq(67,x,n.is_saving&&n.f.duration_frequency.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(69,m,n.is_saving&&n.f.duration_frequency.errors)),e.xp6(1),e.Q6J("ngForOf",n.drug_frequency),e.xp6(1),e.Q6J("ngIf",n.is_saving&&n.f.duration_frequency.errors),e.xp6(2),e.Q6J("ngClass",e.VKq(71,x,n.is_saving&&n.f.quantity.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(73,m,n.is_saving&&n.f.quantity.errors)),e.xp6(1),e.Q6J("ngIf",n.is_saving&&n.f.quantity.errors),e.xp6(2),e.Q6J("ngClass",e.VKq(75,x,n.is_saving&&n.f.quantity_preparation.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(77,m,n.is_saving&&n.f.quantity_preparation.errors)),e.xp6(1),e.Q6J("ngForOf",n.drug_preparation),e.xp6(1),e.Q6J("ngIf",n.is_saving&&n.f.quantity_preparation.errors),e.xp6(2),e.Q6J("ngClass",e.VKq(79,x,n.is_saving&&n.f.medicine_purpose.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(81,m,n.is_saving&&n.f.medicine_purpose.errors)),e.xp6(1),e.Q6J("ngForOf",n.drug_purpose),e.xp6(1),e.Q6J("ngIf",n.is_saving&&n.f.medicine_purpose.errors),e.xp6(1),e.Q6J("ngIf","99"===n.prescriptionForm.value.medicine_purpose),e.xp6(2),e.Q6J("ngClass",e.VKq(83,x,n.is_saving&&n.f.remarks.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(85,m,n.is_saving&&n.f.remarks.errors)),e.xp6(1),e.Q6J("ngIf",n.submit_errors),e.xp6(2),e.Q6J("disabled",n.is_loading),e.xp6(2),e.Q6J("disabled",n.is_loading||n.prescriptionForm.invalid),e.xp6(1),e.Q6J("icon",n.is_loading?n.faCircleNotch:n.faSave)("spin",n.is_loading),e.xp6(1),e.hij(" ",n.is_loading?"Saving":"Save"," "))},dependencies:[o.ez,o.mk,o.sg,o.O5,o.Nd,h.uH,h.BN,a.u5,a._Y,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.UX,a.sg,a.u]}),s})();function re(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",27)(1,"button",28),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.showLibDrugs())}),e._uU(2," Show Library "),e.qZA()()}}function se(i,s){if(1&i&&(e.TgZ(0,"tr")(1,"td",23)(2,"div",24)(3,"div",25),e._uU(4," No records found... "),e.qZA(),e.YNc(5,re,3,0,"div",26),e.qZA()()()),2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",!t.lib_drug_table)}}function ae(i,s){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e._UZ(2,"br"),e._uU(3),e._UZ(4,"br"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.konsulta_medicine?t.konsulta_medicine.generic.desc:""," "),e.xp6(2),e.hij(" ",t.konsulta_medicine?t.konsulta_medicine.desc:""," ")}}function de(i,s){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e._UZ(2,"br"),e.qZA()),2&i){const t=e.oxw().$implicit;let r;e.xp6(1),e.hij("",null!==(r=t.added_medicine)&&void 0!==r?r:""," ")}}function _e(i,s){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.generic_desc," ")}}function le(i,s){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.lnq(" ",t.dosage_quantity," ",t.unit_of_measurement.desc," (",t.unit_of_measurement.code,") ")}}function ue(i,s){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.desc," ")}}function ce(i,s){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e._UZ(2,"br"),e._uU(3),e._UZ(4,"br"),e._uU(5),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.regimen.desc," "),e.xp6(2),e.AsE(" ",t.duration_intake," ",t.frequency.desc," "),e.xp6(2),e.AsE(" ",t.quantity," ",t.preparation.desc," ")}}function pe(i,s){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e._UZ(2,"br"),e._uU(3),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.AsE(" ",t.unit_desc," ",t.package_desc," "),e.xp6(2),e.hij(" ",t.form_desc," ")}}const ge=function(i){return{"bg-gray-50":i}};function me(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"tr",29),e.NdJ("click",function(){const u=e.CHM(t).$implicit,f=e.oxw();return e.KtG(f.selectDrugs(u))}),e.TgZ(1,"th",30)(2,"span"),e._uU(3),e._UZ(4,"br"),e.qZA(),e.YNc(5,ae,5,2,"span",18),e.YNc(6,de,3,1,"span",18),e.YNc(7,_e,2,1,"span",18),e.qZA(),e.TgZ(8,"td",31),e.YNc(9,le,2,3,"span",18),e.YNc(10,ue,2,1,"span",18),e.qZA(),e.TgZ(11,"td",31),e.YNc(12,ce,6,5,"span",18),e.YNc(13,pe,4,3,"span",18),e.qZA(),e._UZ(14,"td",31),e.qZA()}if(2&i){const t=s.$implicit;e.Q6J("ngClass",e.VKq(9,ge,s.odd)),e.xp6(3),e.Oqu(t.brand_name),e.xp6(2),e.Q6J("ngIf",t.konsulta_medicine),e.xp6(1),e.Q6J("ngIf",t.added_medicine),e.xp6(1),e.Q6J("ngIf",!t.id),e.xp6(2),e.Q6J("ngIf",t.id),e.xp6(1),e.Q6J("ngIf",!t.id),e.xp6(2),e.Q6J("ngIf",t.id),e.xp6(1),e.Q6J("ngIf",!t.id)}}function fe(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",32)(1,"div",33)(2,"div",34)(3,"p",35),e._uU(4," Showing "),e.TgZ(5,"span",36),e._uU(6),e.qZA(),e._uU(7," to "),e.TgZ(8,"span",36),e._uU(9),e.qZA(),e._uU(10," of "),e.TgZ(11,"span",36),e._uU(12),e.qZA(),e._uU(13," results "),e.qZA()(),e.TgZ(14,"div")(15,"nav",37)(16,"button",38),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.loadMedicineList(1))}),e._UZ(17,"fa-icon",39),e.qZA(),e.TgZ(18,"button",40),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.loadMedicineList(n.current_page-1))}),e._UZ(19,"fa-icon",39),e._uU(20,"Previous "),e.qZA(),e.TgZ(21,"button",40),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.loadMedicineList(n.current_page+1))}),e._uU(22," Next"),e._UZ(23,"fa-icon",41),e.qZA(),e.TgZ(24,"button",42),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.loadMedicineList(n.last_page))}),e._UZ(25,"fa-icon",41),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(6),e.Oqu(t.from),e.xp6(3),e.Oqu(t.to),e.xp6(3),e.Oqu(t.total),e.xp6(4),e.Q6J("disabled",1===t.current_page),e.xp6(1),e.Q6J("icon",t.faAnglesLeft),e.xp6(1),e.Q6J("disabled",1===t.current_page),e.xp6(1),e.Q6J("icon",t.faChevronLeft),e.xp6(2),e.Q6J("disabled",t.current_page===t.last_page),e.xp6(2),e.Q6J("icon",t.faChevronRight),e.xp6(1),e.Q6J("disabled",t.current_page===t.last_page),e.xp6(1),e.Q6J("icon",t.faAnglesRight)}}let he=(()=>{var i;class s{selectDrugs(r){delete r.id,r.new_drug=this.lib_drug_table,this.openAddForm.emit(r),this.toggleList.emit()}closeModal(){this.toggleList.emit()}showLibDrugs(){this.lib_drug_table=!0,this.loadMedicineList(1)}addNewDrug(r){this.openAddForm.emit(r),this.toggleList.emit()}loadMedicineList(r){let n=this.lib_drug_table?"libraries/konsulta-medicines":"medicine/list",u={params:{}};this.search_item&&(u.params["filter[search]"]=this.search_item),r&&(u.params.page=r),u.params.per_page=this.per_page,this.http.get(n,u).subscribe({next:f=>{this.drug_list=f.data,this.current_page=f.meta.current_page,this.last_page=f.meta.last_page,this.from=f.meta.from,this.to=f.meta.to,this.total=f.meta.total},error:f=>console.log(f)})}constructor(r){this.http=r,this.openAddForm=new e.vpe,this.toggleList=new e.vpe,this.faAnglesLeft=c._Wx,this.faChevronLeft=c.A35,this.faChevronRight=c._tD,this.faAnglesRight=c.ccb,this.faSearch=c.wn1,this.faEdit=c.Xcf,this.faAdd=c.XSk,this.faCircleXmark=c.WA2,this.is_updating=!1,this.show_lib_drug=!1,this.per_page=10,this.lib_drug_table=!1}ngOnInit(){this.loadMedicineList()}}return(i=s).\u0275fac=function(r){return new(r||i)(e.Y36(b.O))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-drug-list"]],outputs:{openAddForm:"openAddForm",toggleList:"toggleList"},standalone:!0,features:[e.jDz],decls:30,vars:6,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-5xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"flex","justify-end"],[1,"border","border-gray-400","rounded-md","bg-white"],["type","text","placeholder","Search drugs",1,"form-input","border-0","text-sm","p-1","m-1","border-r","border-gray-400",3,"ngModel","ngModelChange","keyup.enter"],["type","button",1,"text-blue-500","w-9","h-9",3,"click"],[1,"-ml-1",3,"icon"],["type","button",1,"text-white","w-9","h-9",3,"click"],[1,"-mr-4",3,"icon"],[1,"h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"overflow-x-auto","relative","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400","mb-5"],[1,"sticky","top-0","text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6"],[1,"overflow-y-auto"],[4,"ngIf"],["class","bg-white border-t","class","hover:bg-blue-200 cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"flex","justify-end","py-4","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["class","bg-white py-3 flex items-center justify-between sm:px-6",4,"ngIf"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],["colspan","9"],[1,"grid","grid-cols-1","w-full","mt-10"],[1,"text-center","italic"],["class","flex justify-center mt-3",4,"ngIf"],[1,"flex","justify-center","mt-3"],["type","button",1,"btn-save",3,"click"],[1,"hover:bg-blue-200","cursor-pointer",3,"ngClass","click"],["scope","row",1,"py-4","px-6","font-medium","whitespace-nowrap"],[1,"py-4","px-6"],[1,"bg-white","py-3","flex","items-center","justify-between","sm:px-6"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"mr-3"],[1,"text-sm","text-gray-700"],[1,"font-medium"],["aria-label","Pagination",1,"relative","z-0","inline-flex","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"disabled","click"],[1,"block","h-15","w-15","text-gray-500","pr-1",3,"icon"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","bg-white","text-sm","font-medium","text-gray-700","hover:bg-gray-50",3,"disabled","click"],[1,"h-5","w-5","text-gray-500",3,"icon"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"disabled","click"]],template:function(r,n){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5," Drugs library "),e.qZA(),e.TgZ(6,"div",5)(7,"div",6)(8,"input",7),e.NdJ("ngModelChange",function(f){return n.search_item=f})("keyup.enter",function(){return n.loadMedicineList()}),e.qZA(),e.TgZ(9,"button",8),e.NdJ("click",function(){return n.loadMedicineList()}),e._UZ(10,"fa-icon",9),e.qZA()(),e.TgZ(11,"button",10),e.NdJ("click",function(){return n.closeModal()}),e._UZ(12,"fa-icon",11),e.qZA()()(),e.TgZ(13,"div",12)(14,"div",13)(15,"table",14)(16,"thead",15)(17,"tr")(18,"th",16),e._uU(19,"Drug Name"),e.qZA(),e.TgZ(20,"th",16),e._uU(21,"Dosage"),e.qZA(),e.TgZ(22,"th",16),e._uU(23,"Package"),e.qZA()()(),e.TgZ(24,"tbody",17),e.YNc(25,se,6,1,"tr",18),e.YNc(26,me,15,11,"tr",19),e.qZA()()()(),e.TgZ(27,"div",20),e.YNc(28,fe,26,11,"div",21),e.qZA()()()(),e._UZ(29,"div",22)),2&r&&(e.xp6(8),e.Q6J("ngModel",n.search_item),e.xp6(2),e.Q6J("icon",n.faSearch),e.xp6(2),e.Q6J("icon",n.faCircleXmark),e.xp6(13),e.Q6J("ngIf",0===(null==n.drug_list?null:n.drug_list.length)||!n.drug_list),e.xp6(1),e.Q6J("ngForOf",n.drug_list),e.xp6(2),e.Q6J("ngIf",(null==n.drug_list?null:n.drug_list.length)>=1))},dependencies:[o.ez,o.mk,o.sg,o.O5,h.uH,h.BN,a.u5,a.Fj,a.JJ,a.On]}),s})();var xe=d(3146),ve=d(3602);function be(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.toggleModal())}),e._UZ(1,"fa-icon",20),e._uU(2," epress "),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("icon",t.faReceipt)}}function Ze(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.navigateTo("dispensing"))}),e._UZ(1,"fa-icon",20),e._uU(2," dispensing "),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("icon",t.faPrescriptionBottleMedical)}}function Ce(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.toggleList())}),e._UZ(1,"fa-icon",20),e._uU(2," add drugs "),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("icon",t.faAdd)}}function qe(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"tr",29)(1,"td",30),e._uU(2),e._UZ(3,"br")(4,"br"),e.qZA(),e.TgZ(5,"td",31),e._uU(6),e._UZ(7,"br")(8,"br"),e._uU(9),e.qZA(),e.TgZ(10,"td",31),e._uU(11),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"td",31),e._uU(14),e.qZA(),e.TgZ(15,"td",31),e._uU(16),e.qZA(),e.TgZ(17,"td",32)(18,"button",33),e.NdJ("click",function(){const u=e.CHM(t).$implicit,f=e.oxw(2);return e.KtG(f.openAddForm(u))}),e._UZ(19,"fa-icon",34),e.qZA(),e.TgZ(20,"button",35),e.NdJ("click",function(){const u=e.CHM(t).$implicit,f=e.oxw(2);return e.KtG(f.toggleModal("delete-item",u))}),e._UZ(21,"fa-icon",36),e.qZA()()()}if(2&i){const t=s.$implicit,r=e.oxw(2);e.xp6(2),e.AsE(" ",t.konsulta_medicine?t.konsulta_medicine.desc:t.added_medicine," ",t.medicine?t.medicine.gen_name:""," "),e.xp6(4),e.xDo(" ",t.dosage_quantity," ",t.unit_of_measurement.desc," ",t.regimen.desc," ",t.duration_intake," ",t.frequency.desc," "),e.xp6(3),e.hij(" Remarks: ",t.remarks," "),e.xp6(2),e.hij(" ",e.Dn7(12,13,t.prescription_date,"MM/dd/yyyy","Asia/Manila")," "),e.xp6(3),e.hij(" ",t.quantity," "),e.xp6(2),e.hij(" ",t.preparation.desc," "),e.xp6(3),e.Q6J("icon",r.faEdit),e.xp6(2),e.Q6J("icon",r.faTrashCan)}}function Te(i,s){if(1&i&&(e.TgZ(0,"table",23)(1,"thead")(2,"tr",24)(3,"th",25),e._uU(4,"Medicine"),e.qZA(),e.TgZ(5,"th",25),e._uU(6,"Intake"),e.qZA(),e.TgZ(7,"th",26),e._uU(8,"Prescription Date"),e.qZA(),e.TgZ(9,"th",26),e._uU(10,"Quantity"),e.qZA(),e.TgZ(11,"th",26),e._uU(12,"Unit of Measurement"),e.qZA(),e.TgZ(13,"th",27),e._uU(14,"Action"),e.qZA()()(),e.TgZ(15,"tbody"),e.YNc(16,qe,22,17,"tr",28),e.qZA()()),2&i){const t=e.oxw();e.xp6(16),e.Q6J("ngForOf",t.prescriptions)("ngForTrackBy",t.identify)}}function ye(i,s){if(1&i&&e._UZ(0,"fa-icon",44),2&i){const t=e.oxw(3);e.Q6J("icon",t.faSpinner)}}function we(i,s){if(1&i&&e._UZ(0,"fa-icon",45),2&i){const t=e.oxw(3);e.Q6J("icon",t.faSave)}}function Ae(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onSubmit())}),e.YNc(1,ye,1,1,"fa-icon",42),e.YNc(2,we,1,1,"fa-icon",43),e._uU(3),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.is_saving),e.xp6(1),e.Q6J("ngIf",t.is_saving),e.xp6(1),e.Q6J("ngIf",!t.is_saving),e.xp6(1),e.hij(" ",t.is_saving?"Saving":"Save"," ")}}function Je(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",37)(2,"textarea",38),e.NdJ("ngModelChange",function(n){e.CHM(t);const u=e.oxw();return e.KtG(u.consult_notes.plan=n)}),e.qZA()(),e.TgZ(3,"div",39),e.YNc(4,Ae,4,4,"button",40),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("disabled",t.consult_done||!t.allowed_to_edit)("ngModel",t.consult_notes.plan),e.xp6(2),e.Q6J("ngIf",!t.consult_done&&t.allowed_to_edit)}}function De(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"app-drug-list",46),e.NdJ("openAddForm",function(n){e.CHM(t);const u=e.oxw();return e.KtG(u.openAddForm(n))})("toggleList",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.toggleList())}),e.qZA()}}function Fe(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"app-drug-form",47),e.NdJ("toggleForm",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.toggleForm())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("selected_drug",t.selected_drug)("consult_details",t.consult_details)("drug_uom",t.drug_uom)("drug_regimen",t.drug_regimen)("drug_purpose",t.drug_purpose)("drug_frequency",t.drug_frequency)("drug_preparation",t.drug_preparation)("drug_route",t.drug_route)("user_id",t.user_id)}}function Ue(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"app-epres",48),e.NdJ("toggleModal",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.toggleModal())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("prescriptions",t.prescriptions)("consult_details",t.consult_details)}}function ke(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"app-delete-item",49),e.NdJ("toggleModal",function(n){e.CHM(t);const u=e.oxw();return e.KtG(u.toggleModal(n))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("delete_id",t.delete_id)("delete_desc",t.delete_desc)("url",t.url)}}const V=function(i){return{"rounded-b":i}};let Ie=(()=>{var i;class s{navigateTo(r){this.router.navigate(["/patient/"+r,{id:this.consult_details.patient.id,consult_id:this.consult_details.id}])}openDeleteForm(r){this.selected_drug=r,this.toggleDeleteForm()}onSubmit(){this.is_saving=!0,this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,plan:this.consult_notes.plan}).subscribe({next:n=>{this.is_saving=!1,this.showToastr()},error:n=>{this.http.showError(n.error.message,"Prescription")}})}showToastr(){this.toastr.success("Successfully recorded!","Treatment plan")}openEditForm(r){this.selected_drug=r}openAddForm(r){this.selected_drug=r,this.toggleForm()}openDeleteModal(r){this.delete_id=r.id,this.modal["delete-item"]=!this.modal["delete-item"]}toggleDeleteForm(){this.show_delete_form=!this.show_delete_form,!1===this.show_delete_form&&this.loadPrescriptions()}toggleForm(){this.drug_uom&&this.drug_uom&&this.drug_purpose&&this.drug_frequency&&this.drug_preparation?this.show_form=!this.show_form:this.loadLibraries(),!1===this.show_form&&this.loadPrescriptions()}ngOnChanges(r){this.show_content=this.toggle_content,this.show_content_tx=this.toggle_content,!1===this.consult_details.consult_done&&(this.show_actions=!0),this.consult_details&&(this.consult_notes=this.consult_details.consult_notes,this.consult_done=this.consult_details.consult_done)}loadLibraries(){this.libraries.forEach((r,n)=>{this.http.get("libraries/"+r.location).subscribe({next:u=>{this[r.var_name]=u.data,this.libraries.length-1===n&&(this.show_form=!0)},error:u=>{this.http.showError(u.error.message,r.var_name+" Library")}})})}toggleModal(r,n){r?(n&&(this.delete_id=n.id),this.modal[r]=!this.modal[r],this.loadPrescriptions()):this.show_epress=!this.show_epress}toggleList(){this.show_list=!this.show_list}identify(r,n){return n.id}loadPrescriptions(){this.http.get("medicine/prescriptions",{params:{sort:"-prescription_date",consult_id:this.consult_details.id}}).subscribe({next:n=>{n.data.length>0&&(this.prescriptions=n.data)},error:n=>{this.http.showError(n.error.message,"Prescription Library")}})}constructor(r,n,u){this.http=r,this.toastr=n,this.router=u,this.show_content=!0,this.show_list=!1,this.show_form=!1,this.show_delete_form=!1,this.show_actions=!1,this.show_content_tx=!1,this.is_saving=!1,this.consult_done=!1,this.faChevronCircleUp=c._qI,this.faChevronCircleDown=c.yh$,this.faAdd=c.XSk,this.faSave=Z.r6l,this.faSpinner=c.LM3,this.faEdit=Z.Xcf,this.faTrash=c.$aW,this.faPrescriptionBottleMedical=c.v0s,this.faReceipt=c.dLy,this.faTrashCan=Z.Vui,this.consult_notes={plan:null},this.modal=[],this.delete_desc="Prescription",this.url="medicine/prescriptions/",this.libraries=[{var_name:"drug_uom",location:"unit-of-measurements"},{var_name:"drug_regimen",location:"dose-regimens"},{var_name:"drug_purpose",location:"purposes"},{var_name:"drug_frequency",location:"duration-frequencies"},{var_name:"drug_preparation",location:"preparations"},{var_name:"drug_route",location:"medicine-route"}],this.show_epress=!1}ngOnInit(){this.loadPrescriptions()}}return(i=s).\u0275fac=function(r){return new(r||i)(e.Y36(b.O),e.Y36(T._W),e.Y36(ve.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-prescription"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",with_credentials:"with_credentials",allowed_to_edit:"allowed_to_edit",user_id:"user_id"},standalone:!0,features:[e.TTD,e.jDz],decls:23,vars:16,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","flex","justify-between"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-amber-500","flex","justify-between",3,"ngClass"],["type","button","class","ml-3 text-sm bg-white text-green-500 px-3 rounded-full",3,"click",4,"ngIf"],["type","button","class","text-sm bg-white text-amber-500 px-3 rounded-full",3,"click",4,"ngIf"],["type","button","class","ml-3 text-sm bg-white text-blue-500 px-3 rounded-full",3,"click",4,"ngIf"],["class","w-full table-auto p-5",4,"ngIf"],[1,"rounded-md","border","border-solid","border-gray-300","mt-5"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[3,"openAddForm","toggleList",4,"ngIf"],[3,"selected_drug","consult_details","drug_uom","drug_regimen","drug_purpose","drug_frequency","drug_preparation","drug_route","user_id","toggleForm",4,"ngIf"],[3,"prescriptions","consult_details","toggleModal",4,"ngIf"],[3,"delete_id","delete_desc","url","toggleModal",4,"ngIf"],["type","button",1,"ml-3","text-sm","bg-white","text-green-500","px-3","rounded-full",3,"click"],[1,"pr-1",3,"icon"],["type","button",1,"text-sm","bg-white","text-amber-500","px-3","rounded-full",3,"click"],["type","button",1,"ml-3","text-sm","bg-white","text-blue-500","px-3","rounded-full",3,"click"],[1,"w-full","table-auto","p-5"],[1,"align-top"],["scope","col",1,"text-center","py-3","px-3","w-3/12"],["scope","col",1,"text-center","py-3","px-3","w-1/12"],["scope","col",1,"text-center","py-3","px-3","w-2/12"],["class","bg-white border-b last:border-0 text-sm align-top",4,"ngFor","ngForOf","ngForTrackBy"],[1,"bg-white","border-b","last:border-0","text-sm","align-top"],[1,"py-4","px-3"],["scope","row",1,"py-4","px-3","font-medium","text-gray-900"],[1,"text-sm","text-center","mb-5","align-middle"],[1,"mr-3",3,"click"],[1,"text-amber-500",3,"icon"],[3,"click"],[1,"text-rose-500",3,"icon"],[1,"grid","grid-cols-1","px-4","pb-4","mt-4"],["rows","3","id","plan","placeholder","Treatment plan",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"disabled","ngModel","ngModelChange"],[1,"flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"],[3,"openAddForm","toggleList"],[3,"selected_drug","consult_details","drug_uom","drug_regimen","drug_purpose","drug_frequency","drug_preparation","drug_route","user_id","toggleForm"],[3,"prescriptions","consult_details","toggleModal"],[3,"delete_id","delete_desc","url","toggleModal"]],template:function(r,n){1&r&&(e._UZ(0,"hr",0),e.TgZ(1,"div",1)(2,"div",2),e._uU(3," Prescription "),e.qZA(),e.TgZ(4,"div",3)(5,"div",4)(6,"span",5),e._uU(7," Prescriptions "),e.TgZ(8,"div"),e.YNc(9,be,3,1,"button",6),e.YNc(10,Ze,3,1,"button",7),e.YNc(11,Ce,3,1,"button",8),e.qZA()(),e.YNc(12,Te,17,2,"table",9),e.qZA(),e.TgZ(13,"div",10)(14,"span",11),e._uU(15," Treatment Plan "),e.TgZ(16,"button",12),e.NdJ("click",function(){return n.show_content_tx=!n.show_content_tx}),e._UZ(17,"fa-icon",13),e.qZA()(),e.YNc(18,Je,5,3,"div",14),e.qZA()()(),e.YNc(19,De,1,0,"app-drug-list",15),e.YNc(20,Fe,1,9,"app-drug-form",16),e.YNc(21,Ue,1,2,"app-epres",17),e.YNc(22,ke,1,3,"app-delete-item",18)),2&r&&(e.xp6(6),e.Q6J("ngClass",e.VKq(12,V,!n.show_content)),e.xp6(3),e.Q6J("ngIf",(null==n.consult_details?null:n.consult_details.is_konsulta)&&n.with_credentials&&n.prescriptions),e.xp6(1),e.Q6J("ngIf",n.prescriptions),e.xp6(1),e.Q6J("ngIf",n.show_actions),e.xp6(1),e.Q6J("ngIf",n.show_content),e.xp6(2),e.Q6J("ngClass",e.VKq(14,V,!n.show_content_tx)),e.xp6(3),e.Q6J("icon",n.show_content_tx?n.faChevronCircleUp:n.faChevronCircleDown),e.xp6(1),e.Q6J("ngIf",n.show_content_tx),e.xp6(1),e.Q6J("ngIf",n.show_list),e.xp6(1),e.Q6J("ngIf",n.show_form),e.xp6(1),e.Q6J("ngIf",n.show_epress),e.xp6(1),e.Q6J("ngIf",n.modal["delete-item"]))},dependencies:[o.ez,o.mk,o.sg,o.O5,o.uU,h.uH,h.BN,oe,he,a.u5,a.Fj,a.JJ,a.On,xe.N]}),s})()}}]);