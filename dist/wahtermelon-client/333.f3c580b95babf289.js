"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[333],{1333:(hi,A,p)=>{p.r(A),p.d(A,{ConsultationModule:()=>ui});var d=p(6814),b=p(3602),_=p(590),v=p(6825),t=p(5879),k=p(6903);function j(n,s){if(1&n&&(t.TgZ(0,"div",7)(1,"div",8),t._UZ(2,"apx-chart",9),t.qZA()()),2&n){const e=t.oxw(3);t.xp6(2),t.Q6J("series",null==e.chartOptions?null:e.chartOptions.series)("chart",null==e.chartOptions?null:e.chartOptions.chart)("xaxis",null==e.chartOptions?null:e.chartOptions.xaxis)("stroke",null==e.chartOptions?null:e.chartOptions.stroke)("tooltip",null==e.chartOptions?null:e.chartOptions.tooltip)("dataLabels",null==e.chartOptions?null:e.chartOptions.dataLabels)("title",null==e.chartOptions?null:e.chartOptions.title)}}function K(n,s){if(1&n&&(t.TgZ(0,"div",10)(1,"div",11),t._UZ(2,"apx-chart",9),t.qZA()()),2&n){const e=t.oxw(3);t.xp6(2),t.Q6J("series",null==e.WeightChart?null:e.WeightChart.series)("chart",null==e.WeightChart?null:e.WeightChart.chart)("xaxis",null==e.WeightChart?null:e.WeightChart.xaxis)("stroke",null==e.WeightChart?null:e.WeightChart.stroke)("tooltip",null==e.WeightChart?null:e.WeightChart.tooltip)("dataLabels",null==e.WeightChart?null:e.WeightChart.dataLabels)("title",null==e.WeightChart?null:e.WeightChart.title)}}function G(n,s){if(1&n&&(t.TgZ(0,"div",10)(1,"div",12),t._UZ(2,"apx-chart",9),t.qZA()()),2&n){const e=t.oxw(3);t.xp6(2),t.Q6J("series",null==e.BmiChart?null:e.BmiChart.series)("chart",null==e.BmiChart?null:e.BmiChart.chart)("xaxis",null==e.BmiChart?null:e.BmiChart.xaxis)("stroke",null==e.BmiChart?null:e.BmiChart.stroke)("tooltip",null==e.BmiChart?null:e.BmiChart.tooltip)("dataLabels",null==e.BmiChart?null:e.BmiChart.dataLabels)("title",null==e.BmiChart?null:e.BmiChart.title)}}function L(n,s){if(1&n&&(t.TgZ(0,"div",4),t.YNc(1,j,3,7,"div",5),t.YNc(2,K,3,7,"div",6),t.YNc(3,G,3,7,"div",6),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.show_bp),t.xp6(1),t.Q6J("ngIf",e.show_weight),t.xp6(1),t.Q6J("ngIf",e.show_bmi)}}function $(n,s){if(1&n&&(t.TgZ(0,"div",1),t._UZ(1,"div",2),t.YNc(2,L,4,3,"div",3),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.show_graphs)}}let V=(()=>{var n;class s{patientVitals(o){this.vitals_graph.systolic=[],this.vitals_graph.diastolic=[],this.vitals_graph.bp_date=[],this.vitals_graph.weight=[],this.vitals_graph.weight_date=[],Object.entries(o).forEach(([i,a],r)=>{let c=a;c.bp_systolic&&(this.vitals_graph.systolic.push(c.bp_systolic),this.vitals_graph.diastolic.push(c.bp_diastolic),this.vitals_graph.bp_date.push(c.vitals_date)),c.patient_weight&&(this.vitals_graph.weight.push(c.patient_weight),this.vitals_graph.weight_date.push(c.vitals_date)),c.patient_bmi&&(this.vitals_graph.bmi.push(c.patient_bmi),this.vitals_graph.bmi_date.push(c.vitals_date))}),this.vitals_graph.systolic.length>0||this.vitals_graph.diastolic.length>0||this.vitals_graph.weight.length>0||this.vitals_graph.bmi.length>0?(this.selected_chart="all_chart",this.loadChart(this.selected_chart)):this.showChart=!1,this.generateAllChart()}generateBPChart(){this.chartOptions={series:[{name:"Systolic",data:this.vitals_graph.systolic},{name:"Diastolic",data:this.vitals_graph.diastolic}],chart:{height:200,type:"area"},dataLabels:{enabled:!1},stroke:{curve:"smooth"},title:{text:"Blood Pressure History"},xaxis:{type:"datetime",categories:this.vitals_graph.bp_date},tooltip:{x:{format:"MM/dd/yyyy HH:mm"}}}}generateWeightChart(){this.WeightChart={series:[{name:"Weight",data:this.vitals_graph.weight}],chart:{height:200,type:"line"},dataLabels:{enabled:!1},stroke:{curve:"smooth"},title:{text:"Weight History"},xaxis:{type:"datetime",categories:this.vitals_graph.weight_date},tooltip:{x:{format:"MM/dd/yyyy HH:mm"}}}}generateBMIChart(){this.BmiChart={series:[{name:"BMI",data:this.vitals_graph.bmi}],chart:{height:200,type:"line"},dataLabels:{enabled:!1},stroke:{curve:"smooth"},title:{text:"BMI History"},xaxis:{type:"datetime",categories:this.vitals_graph.bmi_date},tooltip:{x:{format:"MM/dd/yyyy HH:mm"}}}}loadChart(o){switch(this.show_bmi=!1,this.show_bp=!1,this.show_weight=!1,o){case"bp_chart":this.show_bp=!0;break;case"weight_chart":this.show_weight=!0;break;case"bmi_chart":this.show_bmi=!0;break;case"bmi_weight_chart":this.show_weight=!0,this.show_bmi=!0;break;case"bp_weight_chart":this.show_bp=!0,this.show_weight=!0;break;case"all_chart":this.show_bp=!0,this.show_weight=!0,this.show_bmi=!0}this.showChart=!0}generateAllChart(){this.generateBPChart(),this.generateWeightChart(),this.generateBMIChart()}constructor(o){this.router=o,this.showChart=!1,this.show_bmi=!1,this.show_bp=!1,this.show_weight=!1,this.show_graphs=!0,this.vitals_graph={systolic:[],diastolic:[],bp_date:[],weight:[],weight_date:[],bmi:[],bmi_date:[]}}ngOnChanges(o){this.vitals&&this.patientVitals(this.vitals)}ngOnInit(){}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(b.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-graphs"]],inputs:{vitals:"vitals"},features:[t.TTD],decls:1,vars:1,consts:[["class","grid grid-cols-1 w-full h-auto",4,"ngIf"],[1,"grid","grid-cols-1","w-full","h-auto"],[1,"w-full","flex","ml-5","font-semibold"],["class","cols-span-1 flex w-full mt-3",4,"ngIf"],[1,"cols-span-1","flex","w-full","mt-3"],["class","w-1/3 shadow px-2 mr-2 py-4 rounded-xl text-gray-600 border border-slate-100",4,"ngIf"],["class","w-1/3 shadow px-2 ml-2  py-4 rounded-xl text-gray-600 border border-slate-100",4,"ngIf"],[1,"w-1/3","shadow","px-2","mr-2","py-4","rounded-xl","text-gray-600","border","border-slate-100"],["id","bp-chart"],[3,"series","chart","xaxis","stroke","tooltip","dataLabels","title"],[1,"w-1/3","shadow","px-2","ml-2","py-4","rounded-xl","text-gray-600","border","border-slate-100"],["id","weight-chart"],["id","bmi-chart"]],template:function(o,i){1&o&&t.YNc(0,$,3,1,"div",0),2&o&&t.Q6J("ngIf",i.showChart)},dependencies:[d.O5,k.x],data:{animation:[(0,v.X$)("openCloseAccordion",[(0,v.eR)(":enter",[(0,v.oB)({height:0,opacity:0}),(0,v.jt)("200ms",(0,v.oB)({height:"100%",opacity:"100%"}))]),(0,v.eR)(":leave",[(0,v.jt)("200ms",(0,v.oB)({height:0,opacity:0}))])])]}}),s})();var w=p(2181),y=p(9397),T=p(1449),g=p(265),h=p(2425),m=p(5597),q=p(2756),U=p(4504);function R(n,s){if(1&n&&(t.TgZ(0,"span",65),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.konsulta_medicine.category," ")}}function B(n,s){if(1&n&&(t.TgZ(0,"span",65),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.purpose.desc," ")}}function z(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.konsulta_medicine.desc)}}function W(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.lnq("",e.added_medicine," ",e.dosage_quantity," ",e.unit_of_measurement.code,"")}}function X(n,s){if(1&n&&(t.TgZ(0,"td",66)(1,"div"),t._UZ(2,"br")(3,"br")(4,"br"),t.TgZ(5,"strong"),t._uU(6),t.qZA(),t._UZ(7,"br"),t._uU(8," Signature over printed name "),t._UZ(9,"br"),t._uU(10," License #: ________________ "),t.qZA()()),2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.Q6J("rowSpan",o.prescription_length),t.xp6(6),t.lnq("",e.prescriber.first_name," ",e.prescriber.middle_name," ",e.prescriber.last_name,"")}}function tt(n,s){1&n&&(t.TgZ(0,"span"),t._uU(1," \u2714 "),t.qZA())}function et(n,s){1&n&&(t.TgZ(0,"span"),t._uU(1," X "),t.qZA())}function nt(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.dispensing[0].dispensing_date," ")}}function it(n,s){if(1&n&&(t.TgZ(0,"td",66),t._UZ(1,"br")(2,"br")(3,"br"),t.TgZ(4,"strong"),t._uU(5),t.qZA(),t._UZ(6,"br"),t._uU(7," Signature over printed name "),t._UZ(8,"br"),t._uU(9," Name of Dispensing Facility: "),t._UZ(10,"br"),t._uU(11),t.qZA()),2&n){const e=t.oxw(3);t.Q6J("rowSpan",e.prescription_length),t.xp6(5),t.lnq("",null==e.dispensed_personnel?null:e.dispensed_personnel.first_name," ",null==e.dispensed_personnel?null:e.dispensed_personnel.middle_name," ",null==e.dispensed_personnel?null:e.dispensed_personnel.last_name,""),t.xp6(6),t.hij("",null==e.facility?null:e.facility.konsulta_credential.facility_name," ")}}function ot(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td",60),t.YNc(2,R,2,1,"span",61),t.YNc(3,B,2,1,"span",61),t.qZA(),t.TgZ(4,"td",60),t.YNc(5,z,2,1,"span",62),t.YNc(6,W,2,3,"span",62),t.qZA(),t.TgZ(7,"td",63),t._uU(8),t.qZA(),t.YNc(9,X,11,4,"td",64),t.TgZ(10,"td",63),t.YNc(11,tt,2,0,"span",62),t.YNc(12,et,2,0,"span",62),t.qZA(),t.TgZ(13,"td",60),t.YNc(14,nt,2,1,"span",62),t.qZA(),t.YNc(15,it,12,5,"td",64),t.qZA()),2&n){const e=s.$implicit,o=s.first;t.xp6(2),t.Q6J("ngIf",e.konsulta_medicine),t.xp6(1),t.Q6J("ngIf",e.added_medicine),t.xp6(2),t.Q6J("ngIf",e.konsulta_medicine),t.xp6(1),t.Q6J("ngIf",!e.konsulta_medicine),t.xp6(2),t.hij(" ",e.quantity," "),t.xp6(1),t.Q6J("ngIf",o),t.xp6(2),t.Q6J("ngIf",e.dispensing),t.xp6(1),t.Q6J("ngIf",!e.dispensing),t.xp6(2),t.Q6J("ngIf",e.dispensing),t.xp6(1),t.Q6J("ngIf",o)}}function st(n,s){if(1&n&&(t.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15),t._uU(4," ANNEX G: Electronic Prescription Slip (ePresS) "),t.qZA(),t.TgZ(5,"div",16),t._uU(6," Electronic Prescription Slip (ePresS) - proof of availment of medicines by the eligible beneficiary. This will be generated by the PhilHealth Konsulta facility for every patient encounter and to be submitted to PhilHealth. "),t.qZA(),t.TgZ(7,"div",17)(8,"div",18),t._UZ(9,"img",19),t.TgZ(10,"span",20),t._uU(11,"ELECTRONIC PRESCRIPTION SLIP (ePresS)"),t.qZA()(),t.TgZ(12,"div",21)(13,"div",22)(14,"div",23),t._uU(15," HCI Name: "),t.TgZ(16,"span",24),t._uU(17),t.qZA()(),t.TgZ(18,"div",23),t._uU(19," Case No.: "),t.TgZ(20,"span",24),t._uU(21),t.qZA()(),t.TgZ(22,"div",23),t._uU(23," HCI Accreditation No: "),t.TgZ(24,"span",24),t._uU(25),t.qZA()(),t.TgZ(26,"div",23),t._uU(27," Transaction No.: "),t.TgZ(28,"span",24),t._uU(29),t.qZA()()(),t.TgZ(30,"div",25)(31,"div",26)(32,"span",27),t._uU(33,"Patient name (pangalan ng pasyente): "),t.qZA(),t.TgZ(34,"span",24),t._uU(35),t.qZA()(),t.TgZ(36,"div",28)(37,"span",27),t._uU(38,"Age (Edad): "),t.qZA(),t.TgZ(39,"span",29),t._uU(40),t.qZA()(),t.TgZ(41,"div",28)(42,"span",27),t._uU(43,"Contact No.: "),t.qZA(),t.TgZ(44,"span",24),t._uU(45),t.qZA()()(),t.TgZ(46,"div",30)(47,"div",31)(48,"span",27),t._uU(49,"PIN (PhilHealth Identification No.): "),t.qZA(),t.TgZ(50,"span",24),t._uU(51),t.qZA()(),t.TgZ(52,"div",32)(53,"span",27),t._uU(54,"Membership Category: "),t.qZA(),t._UZ(55,"span",24),t.qZA(),t.TgZ(56,"div",33)(57,"span",27),t._uU(58,"Membership type: "),t.qZA(),t.TgZ(59,"span",34)(60,"span",35),t._uU(61),t.qZA(),t._uU(62,"Member "),t.TgZ(63,"span",35),t._uU(64),t.qZA(),t._uU(65,"Dependent "),t.qZA()()()(),t.TgZ(66,"div",36),t._uU(67," To be filled out by the facility (pupunuan ng pasilidad) "),t.qZA(),t.TgZ(68,"div",37)(69,"table",38)(70,"thead")(71,"tr")(72,"th",39),t._uU(73," Category "),t._UZ(74,"br"),t._uU(75," (Kategorya) "),t.qZA(),t.TgZ(76,"th",40),t._uU(77," Medicine Strength/ Form/ Volume "),t._UZ(78,"br"),t._uU(79," (Gamot/ Anyo/ Dami) "),t.qZA(),t.TgZ(80,"th",40),t._uU(81," Quantity"),t._UZ(82,"br"),t._uU(83," (Bilang) "),t.qZA(),t.TgZ(84,"th",41),t._uU(85," Name of the Prescribing Physician "),t._UZ(86,"br"),t._uU(87," (Pangalan ng nagresetang doktor) "),t.qZA(),t.TgZ(88,"th",40)(89,"span",35),t._uU(90,"\u2714"),t.qZA(),t._uU(91," Dispensed "),t._UZ(92,"br"),t._uU(93," (Naibigay) "),t._UZ(94,"br"),t.TgZ(95,"span",35),t._uU(96,"X"),t.qZA(),t._uU(97," Not dispensed "),t._UZ(98,"br"),t._uU(99," (Hindi naibigay) "),t.qZA(),t.TgZ(100,"th",40),t._uU(101," Date dispensed (Petsa kung kelan naibigay) "),t.qZA(),t.TgZ(102,"th",41),t._uU(103," Name of the Dispensing Personnel "),t._UZ(104,"br"),t._uU(105," (Pangalan ng nagbigay) "),t.qZA()()(),t.TgZ(106,"tbody"),t.YNc(107,ot,16,10,"tr",42),t.qZA()()(),t.TgZ(108,"div",36),t._uU(109," To be filled out by the patient (pupunuan ng pasyente) "),t.qZA(),t.TgZ(110,"div",43)(111,"div",44)(112,"div",45),t._uU(113," Did you receive the above mentioned medicines? __ Yes __ No "),t.qZA(),t.TgZ(114,"div",45),t._uU(115," (Natanggap mo ba ang mga gamot na nabanggit?) "),t.qZA()(),t.TgZ(116,"div",46)(117,"div",47)(118,"span"),t._uU(119,"Are you satisfied with the medicines you received?"),t.qZA(),t.TgZ(120,"span"),t._uU(121,"(Nasiyahan ka ba sa mga gamot na natanggap mo?)"),t.qZA()(),t.TgZ(122,"div",26),t._UZ(123,"div",48)(124,"fa-icon",49)(125,"div",48)(126,"fa-icon",50)(127,"div",48)(128,"fa-icon",51),t.qZA()(),t.TgZ(129,"div",52)(130,"div",45),t._uU(131," For your comment, suggestion or complaint: "),t.qZA(),t.TgZ(132,"div",45),t._uU(133," (Para sa iyong komento, mungkahi o reklamo) "),t.qZA(),t._UZ(134,"div",53),t.qZA(),t.TgZ(135,"div",54)(136,"div",45),t._uU(137," Under the penalty of law, I attest that the information I provided in this slip are true and accurate. "),t.qZA(),t.TgZ(138,"div",45),t._uU(139," (Sa ilalim ng batas, pinatutunayan ko na ang impormasyong ibinigay ko ay totoo at tama) "),t.qZA()()(),t.TgZ(140,"div",55)(141,"div",56)(142,"div",57),t._uU(143," ________________________________________ "),t._UZ(144,"br"),t._uU(145," Signature over printed name of patient "),t._UZ(146,"br"),t._uU(147," (Lagda sa nakalimbag na pangalan ng pasyente) "),t.qZA(),t.TgZ(148,"div",58),t._uU(149," Next Dispensing Date: _____________________ "),t._UZ(150,"br"),t._uU(151," (Petsa ng susunod na bigay ng gamot) "),t.qZA()(),t.TgZ(152,"div",59)(153,"div",57),t._uU(154," Note: "),t._UZ(155,"br"),t._uU(156," Accomplished form shall be submitted to PhilHealth "),t._UZ(157,"br"),t._uU(158," (Ang kumpletong form ay dapat isumite sa PhilHealth) "),t.qZA()()()()()()()),2&n){const e=t.oxw();t.xp6(17),t.Oqu(null==e.facility?null:e.facility.konsulta_credential.facility_name),t.xp6(4),t.Oqu(null==e.patient_info?null:e.patient_info.case_number),t.xp6(4),t.Oqu(null==e.facility?null:e.facility.konsulta_credential.accreditation_number),t.xp6(4),t.Oqu("S"+(null==e.consult_details?null:e.consult_details.transaction_number)),t.xp6(6),t.HOy(" ",null==e.patient_info?null:e.patient_info.last_name,", ",null==e.patient_info?null:e.patient_info.first_name," ",null==e.patient_info?null:e.patient_info.middle_name," ","NA"===(null==e.patient_info?null:e.patient_info.suffix_name)?"":null==e.patient_info?null:e.patient_info.suffix_name," "),t.xp6(5),t.hij("",e.patient_age," "),t.xp6(5),t.Oqu(null==e.patient_info?null:e.patient_info.mobile_number),t.xp6(6),t.Oqu(null==e.patient_philhealth?null:e.patient_philhealth.philhealth_id),t.xp6(10),t.hij("","MM"===(null==e.patient_philhealth?null:e.patient_philhealth.membership_type_id)?"\u2714":"\xa0\xa0"," "),t.xp6(3),t.hij("","DD"===(null==e.patient_philhealth?null:e.patient_philhealth.membership_type_id)?"\u2714":"\xa0\xa0"," "),t.xp6(43),t.Q6J("ngForOf",e.prescriptions),t.xp6(17),t.Q6J("icon",e.faFaceSmile),t.xp6(2),t.Q6J("icon",e.faFaceMeh),t.xp6(2),t.Q6J("icon",e.faFaceFrown)}}function at(n,s){if(1&n&&(t.TgZ(0,"div",67),t._UZ(1,"fa-icon",68),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faCircleNotch)}}let J=(()=>{var n;class s{closeModal(){this.toggleModal.emit("epres")}iteratePrescription(){this.prescriptions&&this.prescriptions[0].dispensing&&this.http.get("users/"+this.prescriptions[0].dispensing[0].user_id).subscribe({next:o=>{this.dispensed_personnel=o.data,this.getAge()},error:o=>console.log(o)})}getAge(){this.http.get("patient-philhealth/philhealth",{params:{"filter[patient_id]":this.patient_info.id,per_page:"1",sort:"-enlistment_date"}}).subscribe({next:o=>{this.philhealth_info=o.data[0];let i={date_from:this.dateHelper.dateFormat(this.patient_info.birthdate),date_to:o.data[0].enlistment_date};this.http.post("konsulta/generate-age",i).subscribe({next:a=>{console.log(a),this.patient_age=a.data,this.show_form=!0},error:a=>console.log(a)})},error:o=>console.log(o)})}constructor(o,i){this.http=o,this.dateHelper=i,this.toggleModal=new t.vpe,this.faPrint=_.wf8,this.faFaceSmile=_.pkM,this.faFaceMeh=_.FRD,this.faFaceFrown=_.qfV,this.faCircleNotch=_.IJ7,this.show_form=!1}ngOnInit(){this.patient_info=this.http.getPatientInfo(),this.patient_philhealth=this.http.getPhilhealhtInfo(),this.facility=this.http.getUserFromJSON(),this.prescription_length=Object.keys(this.prescriptions).length,console.log(this.prescriptions),this.iteratePrescription()}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(g.O),t.Y36(q.Y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-epres"]],inputs:{prescriptions:"prescriptions",consult_details:"consult_details"},outputs:{toggleModal:"toggleModal"},decls:14,vars:4,consts:[["id","defaultModal","tabindex","-1","aria-hidden","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","max-w-4xl","h-full","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],["type","button","printSectionId","philhealth_form","ngxPrint","",1,"bg-white","text-blue-500","hover:bg-gray-100","hover:text-blue-400","px-2","py-1","rounded-md",3,"useExistingCss"],[3,"icon"],["class","overflow-y-auto scrollbar-thin h-96 scrollbar-thumb-gray-400 scrollbar-track-gray-100",4,"ngIf"],["class","h-96 flex justify-center align-middle w-full",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"text-white","bg-orange-500","hover:ring-2","focus:outline-none","hover:ring-orange-300","rounded","text-sm","font-medium","px-6","py-2.5","transition","duration-150","ease-in-out","transform","hover:scale-110",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"overflow-y-auto","scrollbar-thin","h-96","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"w-[210mm]","h-[297mm]","flex","justify-center","align-middle","bg-white"],["id","philhealth_form",1,"w-[195mm]","h-[272mm]","mt-[12.5mm]"],[1,"border","border-black","w-full","p-1","font-semibold"],[1,"text-xs","my-5"],[1,"border-2","border-sky-700"],[1,"flex","align-middle","h-14","p-1"],["src","./assets/img/philhealth_logo.png",1,"w-12","h-14"],[1,"underline","font-semibold","mt-3"],[1,"p-1"],[1,"grid","grid-cols-4","text-xs"],[1,"col-span-2","flex","text-[.75em]"],[1,"underline","flex-1","w-full","text-[.8em]"],[1,"grid","grid-cols-4","text-xs","mt-2"],[1,"col-span-2","flex"],[1,"text-[.75em]"],[1,"col-span-1","flex"],[1,"underline","flex-1","w-full","text-[.75em]"],[1,"grid","grid-cols-12","text-xs"],[1,"col-span-4","flex"],[1,"col-span-3","flex","ml-3"],[1,"col-span-5","flex"],[1,"flex-1","w-full","text-[.8em]"],[1,"underline"],[1,"w-full","border","border-black","bg-gray-300","text-xs","my-5","p-1","py-0"],[1,"w-full","text-xs"],[1,"border","border-slate-600","border-collapse","mx-2"],[1,"w-2/12","border","border-slate-700","text-[.8em]"],[1,"w-1/12","border","border-slate-700","text-[.8em]"],[1,"w-3/12","border","border-slate-700","text-[.8em]"],[4,"ngFor","ngForOf"],[1,"w-full","p-1","text-xs"],[1,"grid","grid-cols-1"],[1,"flex","text-[.8em]"],[1,"grid","grid-cols-4","mt-3"],[1,"col-span-2","grid","grid-cols-1","text-[.8em]"],[1,"w-2","h-2","border","border-slate-700","mt-5","mr-2"],[1,"text-3xl","text-green-600","mr-3",3,"icon"],[1,"text-3xl","text-yellow-500","mr-3",3,"icon"],[1,"text-3xl","text-red-600",3,"icon"],[1,"grid","grid-cols-1","mt-3"],[1,"w-full","border-y","border-black","h-5","mt-5"],[1,"grid","grid-cols-1","mt-2"],[1,"w-full","p-1","text-xs","mt-7","mb-5"],[1,"grid","grid-cols-12"],[1,"col-span-7","text-[.8em]"],[1,"col-span-5","text-[.8em]"],[1,"grid","grid-cols-12","mt-3"],[1,"border","border-slate-700","text-[.8em]"],["class","uppercase",4,"ngIf"],[4,"ngIf"],[1,"border","border-slate-700","text-center","text-[.8em]"],["class","border border-slate-700 text-[0.65rem] font-normal align-bottom",3,"rowSpan",4,"ngIf"],[1,"uppercase"],[1,"border","border-slate-700","text-[0.65rem]","font-normal","align-bottom",3,"rowSpan"],[1,"h-96","flex","justify-center","align-middle","w-full"],["spin","true","size","2xl",1,"mt-20","text-blue-500",3,"icon"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5," electronic Prescription Slip (ePresS) "),t.qZA(),t.TgZ(6,"button",5),t._UZ(7,"fa-icon",6),t.qZA()(),t.YNc(8,st,159,17,"div",7),t.YNc(9,at,2,1,"div",8),t.TgZ(10,"div",9)(11,"button",10),t.NdJ("click",function(){return i.closeModal()}),t._uU(12,"Close"),t.qZA()()()()(),t._UZ(13,"div",11)),2&o&&(t.xp6(6),t.Q6J("useExistingCss",!0),t.xp6(1),t.Q6J("icon",i.faPrint),t.xp6(1),t.Q6J("ngIf",i.show_form),t.xp6(1),t.Q6J("ngIf",!i.show_form))},dependencies:[d.sg,d.O5,m.BN,U.I],styles:["@page{size:auto;size:A4;margin:7mm}"]}),s})();var lt=p(8789),rt=p(6603);function _t(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td",39),t._uU(2),t.qZA(),t.TgZ(3,"td",40),t._uU(4),t.qZA(),t.TgZ(5,"td",39),t._uU(6),t.qZA(),t.TgZ(7,"td",39),t._uU(8),t.qZA()()),2&n){const e=s.$implicit;t.xp6(2),t.Oqu(e.laboratory.desc),t.xp6(2),t.hij(" ",e.result?"\u2714":"X"," "),t.xp6(2),t.hij(" ",e.result?e.result.laboratory_date:"-"," "),t.xp6(2),t.hij(" ",e.result?e.result.user:"-"," ")}}function dt(n,s){if(1&n&&(t.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15),t._uU(4," ANNEX G: Electronic Konsulta Availment Slip (eKAS) "),t.qZA(),t.TgZ(5,"div",16),t._uU(6," Electronic Konsulta Availment Slip (eKAS) \u2013 proof of availment of services by the eligible beneficiary. This will be generated by the PhilHealth Konsulta facility for every patient encounter and to be submitted to PhilHealth. "),t.qZA(),t.TgZ(7,"div",17)(8,"div",18),t._UZ(9,"img",19),t.TgZ(10,"span",20),t._uU(11,"ELECTRONIC KONSULTA AVAILMENT SLIP (eKAS)"),t.qZA()(),t.TgZ(12,"div",21)(13,"div",22)(14,"div",23)(15,"span",24),t._uU(16,"HCI Name:"),t.qZA(),t.TgZ(17,"span",25),t._uU(18),t.qZA()(),t.TgZ(19,"div",23)(20,"span"),t._uU(21,"HCI Accreditation No:"),t.qZA(),t.TgZ(22,"span",25),t._uU(23),t.qZA()(),t.TgZ(24,"div",23)(25,"span",24),t._uU(26,"Case No.:"),t.qZA(),t.TgZ(27,"span",26),t._uU(28),t.qZA()(),t.TgZ(29,"div",23)(30,"span",24),t._uU(31,"Transaction No.:"),t.qZA(),t.TgZ(32,"span",26),t._uU(33),t.qZA()()(),t.TgZ(34,"div",27)(35,"div",23)(36,"span",24),t._uU(37,"Patient name (pangalan ng pasyente): "),t.qZA(),t.TgZ(38,"span",26),t._uU(39),t.qZA()(),t.TgZ(40,"div",28)(41,"span",24),t._uU(42,"Age (Edad): "),t.qZA(),t.TgZ(43,"span",29),t._uU(44),t.qZA()(),t.TgZ(45,"div",28)(46,"span",24),t._uU(47,"Contact No.: "),t.qZA(),t.TgZ(48,"span",26),t._uU(49),t.qZA()()(),t.TgZ(50,"div",22)(51,"div",23)(52,"span",24),t._uU(53,"PIN (PhilHealth Identification No.): "),t.qZA(),t.TgZ(54,"span",26),t._uU(55),t.qZA()(),t.TgZ(56,"div",23)(57,"span",24),t._uU(58,"Membership Category: "),t.qZA(),t._UZ(59,"span",26),t.qZA()(),t.TgZ(60,"div",22)(61,"div",23)(62,"span",24),t._uU(63,"Membership type: "),t.qZA(),t.TgZ(64,"span",30)(65,"span",31),t._uU(66),t.qZA(),t._uU(67,"Member "),t.TgZ(68,"span",31),t._uU(69),t.qZA(),t._uU(70,"Dependent "),t.qZA()(),t.TgZ(71,"div",23)(72,"span",24),t._uU(73,"Authorization Transaction Code (ATC):"),t.qZA(),t.TgZ(74,"span",26),t._uU(75),t.qZA()()()(),t.TgZ(76,"div",32),t._uU(77," To be filled out by the facility (pupunuan ng pasilidad) "),t.qZA(),t.TgZ(78,"div",33)(79,"table",34)(80,"thead")(81,"tr")(82,"th",35),t._uU(83,"Konsulta Services"),t.qZA(),t.TgZ(84,"th",36)(85,"span",31),t._uU(86,"\u2714"),t.qZA(),t._uU(87," Performed "),t.TgZ(88,"span",37),t._uU(89,"(nagawa)"),t.qZA(),t._UZ(90,"br"),t.TgZ(91,"span",31),t._uU(92,"X"),t.qZA(),t._uU(93," Not performed "),t.TgZ(94,"span",37),t._uU(95,"(hindi nagawa)"),t.qZA(),t._UZ(96,"br"),t.qZA(),t.TgZ(97,"th",38),t._uU(98," Date Performed "),t._UZ(99,"br"),t._uU(100," (Petsa kung kelan ginawa) "),t.qZA(),t.TgZ(101,"th",38),t._uU(102," Performed by "),t._UZ(103,"br"),t._uU(104," (Ginawa ni) "),t._UZ(105,"br"),t._uU(106," (Initial/Signature of Health Care Provider/Technician)"),t._UZ(107,"br"),t._uU(108," (Initial o Lagda ng Health Care Provider/Technician) "),t.qZA()()(),t.TgZ(109,"tbody")(110,"tr")(111,"td",39),t._uU(112,"History and physical examination (vitals, anthropometrics)"),t.qZA(),t.TgZ(113,"td",40),t._uU(114,"\u2714"),t.qZA(),t.TgZ(115,"td",39),t._uU(116),t.ALo(117,"date"),t.qZA(),t.TgZ(118,"td",39),t._uU(119),t.qZA()(),t.TgZ(120,"tr")(121,"td",39),t._uU(122,"Consultation"),t.qZA(),t.TgZ(123,"td",40),t._uU(124,"\u2714"),t.qZA(),t.TgZ(125,"td",39),t._uU(126),t.ALo(127,"date"),t.qZA(),t.TgZ(128,"td",39),t._uU(129),t.qZA()(),t.YNc(130,_t,9,4,"tr",41),t.qZA()()(),t.TgZ(131,"div",42),t._uU(132," To be filled out by the patient (pupunuan ng pasyente) "),t.qZA(),t.TgZ(133,"div",43)(134,"div",44)(135,"div",45),t._uU(136," Have you received the above-mentioned essential services? __ Yes __ No "),t.qZA(),t.TgZ(137,"div",45),t._uU(138," (Natanggap mo ba ang mga essential services na nabanggit?) "),t.qZA()(),t.TgZ(139,"div",46)(140,"div",47)(141,"span"),t._uU(142,"How satisfied are you with the services provided?"),t.qZA(),t.TgZ(143,"span"),t._uU(144,"(Gaano ka nasiyahan sa natanggap mong serbisyo?)"),t.qZA()(),t.TgZ(145,"div",23),t._UZ(146,"div",48)(147,"fa-icon",49)(148,"div",48)(149,"fa-icon",50)(150,"div",48)(151,"fa-icon",51),t.qZA()(),t.TgZ(152,"div",52)(153,"div",45),t._uU(154," For your comment, suggestion or complaint: "),t.qZA(),t.TgZ(155,"div",45),t._uU(156," (Para sa iyong komento, mungkahi o reklamo) "),t.qZA(),t._UZ(157,"div",53),t.qZA(),t.TgZ(158,"div",52)(159,"div",45),t._uU(160," Under the penalty of law, I attest that the information I provided in this slip are true and accurate. "),t.qZA(),t.TgZ(161,"div",45),t._uU(162," (Sa ilalim ng batas, pinatutunayan ko na ang impormasyong ibinigay ko ay totoo at tama) "),t.qZA()()(),t.TgZ(163,"div",54)(164,"div",55)(165,"div",56),t._uU(166," ________________________________________ "),t._UZ(167,"br"),t._uU(168," Signature over printed name of patient "),t._UZ(169,"br"),t._uU(170," (Lagda sa nakalimbag na pangalan ng pasyente) "),t.qZA(),t.TgZ(171,"div",57),t._uU(172," Next Consultation Date: _____________________ "),t._UZ(173,"br"),t._uU(174," (Petsa ng susunod na bigay ng gamot) "),t.qZA()(),t.TgZ(175,"div",58)(176,"div",56),t._uU(177," Note: "),t._UZ(178,"br"),t._uU(179," Accomplished form shall be submitted to PhilHealth "),t._UZ(180,"br"),t._uU(181," (Ang kumpletong form ay dapat isumite sa PhilHealth) "),t.qZA()()()()()()()),2&n){const e=t.oxw();t.xp6(18),t.Oqu(null==e.facility?null:e.facility.konsulta_credential.facility_name),t.xp6(5),t.Oqu(null==e.facility?null:e.facility.konsulta_credential.accreditation_number),t.xp6(5),t.Oqu(null==e.patient_info?null:e.patient_info.case_number),t.xp6(5),t.Oqu("S"+(null==e.consult_details?null:e.consult_details.transaction_number)),t.xp6(6),t.HOy(" ",null==e.patient_info?null:e.patient_info.last_name,", ",null==e.patient_info?null:e.patient_info.first_name," ",null==e.patient_info?null:e.patient_info.middle_name," ","NA"===(null==e.patient_info?null:e.patient_info.suffix_name)?"":null==e.patient_info?null:e.patient_info.suffix_name," "),t.xp6(5),t.Oqu(e.patient_age),t.xp6(5),t.Oqu(null==e.patient_info?null:e.patient_info.mobile_number),t.xp6(6),t.Oqu(null==e.patient_philhealth?null:e.patient_philhealth.philhealth_id),t.xp6(11),t.hij("","MM"===(null==e.patient_philhealth?null:e.patient_philhealth.membership_type_id)?"\u2714":"\xa0\xa0"," "),t.xp6(3),t.hij("","DD"===(null==e.patient_philhealth?null:e.patient_philhealth.membership_type_id)?"\u2714":"\xa0\xa0"," "),t.xp6(6),t.Oqu(!0===(null==e.consult_details?null:e.consult_details.walkedin_status)?"WALKEDIN":null!=e.consult_details&&e.consult_details.authorization_transaction_code?null==e.consult_details?null:e.consult_details.authorization_transaction_code:"WALKEDIN"),t.xp6(41),t.hij(" ",t.xi3(117,26,e.consult_details.consult_date,"yyyy-MM-dd")," "),t.xp6(3),t.lnq(" ",e.consult_details.user.first_name," ",e.consult_details.user.middle_name," ",e.consult_details.user.last_name," "),t.xp6(7),t.hij(" ",t.xi3(127,29,e.consult_details.consult_date,"yyyy-MM-dd")," "),t.xp6(3),t.lnq(" ",e.consult_details.user.first_name," ",e.consult_details.user.middle_name," ",e.consult_details.user.last_name," "),t.xp6(1),t.Q6J("ngForOf",e.lab_list),t.xp6(17),t.Q6J("icon",e.faFaceSmile),t.xp6(2),t.Q6J("icon",e.faFaceMeh),t.xp6(2),t.Q6J("icon",e.faFaceFrown)}}function ct(n,s){if(1&n&&(t.TgZ(0,"div",59),t._UZ(1,"fa-icon",60),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faCircleNotch)}}let M=(()=>{var n;class s{getResults(){Object.entries(this.lab_list).forEach(([o,i],a)=>{let r=i,c=this.nameService.getURL(r.laboratory.code);""!==c&&this.http.get(c,{params:{request_id:r.id}}).subscribe({next:u=>{this.lab_list[o].result=u.data[0]},error:u=>console.log(u)})}),this.getAge(),console.log(this.lab_list)}getAge(){this.http.get("patient-philhealth/philhealth",{params:{"filter[patient_id]":this.patient_info.id,per_page:"1",sort:"-enlistment_date"}}).subscribe({next:o=>{this.philhealth_info=o.data[0];let i={date_from:this.dateHelper.dateFormat(this.patient_info.birthdate),date_to:o.data[0].enlistment_date};this.http.post("konsulta/generate-age",i).subscribe({next:a=>{console.log(a),this.show_form=!0,this.patient_age=a.data},error:a=>console.log(a)})},error:o=>console.log(o)})}closeModal(){this.toggleModal.emit("ekas")}constructor(o,i,a,r){this.http=o,this.ageService=i,this.nameService=a,this.dateHelper=r,this.toggleModal=new t.vpe,this.faPrint=_.wf8,this.faFaceSmile=_.pkM,this.faFaceMeh=_.FRD,this.faFaceFrown=_.qfV,this.faCircleNotch=_.IJ7,this.show_form=!1}ngOnInit(){this.patient_info=this.http.getPatientInfo(),this.patient_philhealth=this.http.getPhilhealhtInfo(),this.facility=this.http.getUserFromJSON(),console.log(this.consult_details),this.getResults()}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(g.O),t.Y36(lt.J),t.Y36(rt.y),t.Y36(q.Y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-ekas"]],inputs:{lab_list:"lab_list",consult_details:"consult_details"},outputs:{toggleModal:"toggleModal"},decls:14,vars:4,consts:[["id","defaultModal","tabindex","-1","aria-hidden","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","max-w-4xl","h-full","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],["type","button","printSectionId","philhealth_form","ngxPrint","",1,"bg-white","text-blue-500","hover:bg-gray-100","hover:text-blue-400","px-2","py-1","rounded-md",3,"useExistingCss"],[3,"icon"],["class","overflow-y-auto scrollbar-thin h-96 scrollbar-thumb-gray-400 scrollbar-track-gray-100",4,"ngIf"],["class","h-96 flex justify-center align-middle w-full",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"text-white","bg-orange-500","hover:ring-2","focus:outline-none","hover:ring-orange-300","rounded","text-sm","font-medium","px-6","py-2.5","transition","duration-150","ease-in-out","transform","hover:scale-110",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"overflow-y-auto","scrollbar-thin","h-96","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"w-[210mm]","h-[297mm]","flex","justify-center","align-middle","bg-white"],["id","philhealth_form",1,"w-[195mm]","h-[272mm]","mt-[12.5mm]"],[1,"border","border-black","w-full","p-1","font-semibold"],[1,"text-xs","my-5"],[1,"border-2","border-sky-700"],[1,"flex","align-middle","h-14","p-1"],["src","./assets/img/philhealth_logo.png",1,"w-12","h-14"],[1,"underline","font-semibold","mt-3"],[1,"p-1"],[1,"grid","grid-cols-4","text-xs"],[1,"col-span-2","flex"],[1,"text-[.75em]"],[1,"underline","flex-1","w-full"],[1,"underline","flex-1","w-full","text-[.8em]"],[1,"grid","grid-cols-4","text-xs","mt-2"],[1,"col-span-1","flex"],[1,"underline","flex-1","w-full","text-[.75em]"],[1,"flex-1","w-full","text-[.8em]"],[1,"underline"],[1,"w-full","border","border-black","bg-gray-300","text-xs","my-5","p-1","py-0"],[1,"w-full","text-xs"],[1,"border","border-slate-600","border-collapse","mx-1"],[1,"w-4/12","border","border-slate-700","text-[.8em]"],[1,"w-2/12","border","border-slate-700","text-[.8em]"],[1,"text-[.7em]"],[1,"w-3/12","border","border-slate-700","text-[.8em]"],[1,"border","border-slate-700","[.8em]"],[1,"border","border-slate-700","text-center","[.8em]"],[4,"ngFor","ngForOf"],[1,"w-full","border","border-black","bg-gray-300","text-xs","my-3","p-1","py-0","text-[.8em]"],[1,"w-full","pl-1","text-xs"],[1,"grid","grid-cols-1"],[1,"flex","text-[.8em]"],[1,"grid","grid-cols-4","mt-3"],[1,"col-span-2","grid","grid-cols-1","text-[.8em]"],[1,"w-2","h-2","border","border-slate-700","mt-5","mr-2"],[1,"text-3xl","text-green-600","mr-3",3,"icon"],[1,"text-3xl","text-yellow-500","mr-3",3,"icon"],[1,"text-3xl","text-red-600",3,"icon"],[1,"grid","grid-cols-1","mt-3"],[1,"w-full","border-y","border-black","h-5","mt-5"],[1,"w-full","p-1","text-xs","mt-7","mb-5"],[1,"grid","grid-cols-12"],[1,"col-span-7","text-[.8em]"],[1,"col-span-5","text-[.8em]"],[1,"grid","grid-cols-12","mt-4"],[1,"h-96","flex","justify-center","align-middle","w-full"],["spin","true","size","2xl",1,"mt-20","text-blue-500",3,"icon"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5," electronic Konsulta Availment Slip (eKAS) "),t.qZA(),t.TgZ(6,"button",5),t._UZ(7,"fa-icon",6),t.qZA()(),t.YNc(8,dt,182,32,"div",7),t.YNc(9,ct,2,1,"div",8),t.TgZ(10,"div",9)(11,"button",10),t.NdJ("click",function(){return i.closeModal()}),t._uU(12,"Close"),t.qZA()()()()(),t._UZ(13,"div",11)),2&o&&(t.xp6(6),t.Q6J("useExistingCss",!0),t.xp6(1),t.Q6J("icon",i.faPrint),t.xp6(1),t.Q6J("ngIf",i.show_form),t.xp6(1),t.Q6J("ngIf",!i.show_form))},dependencies:[d.sg,d.O5,m.BN,U.I,d.uU],styles:["@page{size:auto;size:A4;margin:7mm}"]}),s})();function pt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr",16)(1,"td",17)(2,"fa-icon",18),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.toggleModal("delete",a))}),t.qZA(),t._uU(3),t.qZA(),t.TgZ(4,"th",19),t._uU(5),t.qZA(),t.TgZ(6,"td",17)(7,"fa-icon",20),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.toggleModal("add",a))}),t.qZA()()()}if(2&n){const e=s.$implicit,o=t.oxw();t.xp6(2),t.Q6J("icon",o.faXmark),t.xp6(1),t.hij(" ",e.type," "),t.xp6(2),t.hij(" ",e.date_requested," "),t.xp6(2),t.Q6J("icon",o.faEdit)}}function ut(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-ekas",21),t.NdJ("toggleModal",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.toggleModal(i))}),t.qZA()}}function gt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-epres",21),t.NdJ("toggleModal",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.toggleModal(i))}),t.qZA()}}let mt=(()=>{var n;class s{toggleModal(o){console.log(o),this.modal[o]=!this.modal[o]}loadDetails(){}constructor(o){this.http=o,this.faPrint=_.wf8,this.pending_list=[],this.modal=[]}ngOnInit(){this.active_loc_id=this.http.getUrlParams,this.patient_id=this.active_loc_id.patient_id,this.consult_id=this.active_loc_id.consult_id,this.loadDetails()}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(g.O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-konsulta"]],inputs:{consult_details:"consult_details"},decls:28,vars:3,consts:[[1,"mb-16","w-full"],[1,"block","shadow","p-4","mt-4","rounded-xl","text-gray-600"],[1,"text-sky-500","font-bold","flex","justify-between","py-2"],[1,"flex"],[1,"mt-2"],[1,"text-gray-500","text-sm"],["type","button",1,"px-3","py-2","rounded-md","bg-blue-500","text-sm","text-white","ml-auto","mr-3",3,"click"],["type","button",1,"px-3","py-2","rounded-md","bg-blue-500","text-sm","text-white","ml-auto",3,"click"],[1,"border","border-slate-200","shadow-md","rounded-xl"],[1,"w-full","bg-green-500","text-white","rounded-t-xl","p-3","font-semibold"],[1,"w-full","p-5"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6"],["class","bg-white border-b last:border-0",4,"ngFor","ngForOf"],[3,"toggleModal",4,"ngIf"],[1,"bg-white","border-b","last:border-0"],[1,"w-1/3","py-4","px-6"],["size","lg",1,"mx-0","my-0","text-rose-400","hover:cursor-pointer","flex-none","mr-2",3,"icon","click"],["scope","row",1,"w-1/3","py-4","px-6","font-medium","text-gray-900","whitespace-nowrap"],["size","lg",1,"mx-0","my-0","text-blue-500","hover:cursor-pointer","flex-none","mr-2",3,"icon","click"],[3,"toggleModal"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span",2)(3,"span",3)(4,"span",4),t._UZ(5,"span",5),t.qZA()(),t.TgZ(6,"div")(7,"button",6),t.NdJ("click",function(){return i.toggleModal("epres")}),t._uU(8," ePresS "),t.qZA(),t.TgZ(9,"button",7),t.NdJ("click",function(){return i.toggleModal("ekas")}),t._uU(10," eKas "),t.qZA()()(),t.TgZ(11,"div",8)(12,"div",9),t._uU(13," Konsulta visits "),t.qZA(),t.TgZ(14,"div",10)(15,"table",11)(16,"thead",12)(17,"tr")(18,"th",13),t._uU(19,"Lab type"),t.qZA(),t.TgZ(20,"th",13),t._uU(21,"Date requested"),t.qZA(),t.TgZ(22,"th",13),t._uU(23,"Action"),t.qZA()()(),t.TgZ(24,"tbody"),t.YNc(25,pt,8,4,"tr",14),t.qZA()()()()()(),t.YNc(26,ut,1,0,"app-ekas",15),t.YNc(27,gt,1,0,"app-epres",15)),2&o&&(t.xp6(25),t.Q6J("ngForOf",i.pending_list),t.xp6(1),t.Q6J("ngIf",i.modal.ekas),t.xp6(1),t.Q6J("ngIf",i.modal.epres))},dependencies:[d.sg,d.O5,m.BN,J,M]}),s})();var ht=p(3316),l=p(6223),N=p(279);let I=(()=>{var n;class s{onSubmit(){let o;this.is_saving=!0,o=this.consult_date&&this.pt_group?{patient_id:this.patient_id,consult_date:this.consult_date,pt_group:this.pt_group,consult_done:!1}:{},this.http.update("consultation/records/",this.consult_id,o).subscribe({next:i=>{console.log(i),this.is_saving=!1,this.toastr.info("Visit was reopened"),this.closeModal()},error:i=>console.log(i)})}constructor(o,i,a){this.http=o,this.router=i,this.toastr=a,this.toggleModal=new t.vpe,this.is_saving=!1}closeModal(){this.toggleModal.emit("end_visit")}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(g.O),t.Y36(b.F0),t.Y36(h._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-open-consult"]],inputs:{consult_id:"consult_id",consult_date:"consult_date",patient_id:"patient_id",pt_group:"pt_group"},outputs:{toggleModal:"toggleModal"},standalone:!0,features:[t.jDz],decls:20,vars:5,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"h-40"],[1,"flex","item-start","flex-wrap","pb-5"],[1,"grid","grid-cols-3","px-3","py-3","mt-10","mx-10","w-full","rounded-lg","text-center"],[1,"col-span-3","text-left","mb-2","pb-2","border-b","border-slate-200","font-semibold","text-lg"],[1,"col-span-3","text-left","mb-2","pb-2","text-sm"],[1,"flex","justify-end","py-2","px-5","space-x-4","rounded-b"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-300","rounded","text-sm","font-medium","my-2","px-6","py-2.5","transition","duration-150","ease-in-out",3,"click"],["type","button",1,"text-white","bg-green-500","enabled:hover:ring-2","enabled:focus:outline-none","enabled:hover:ring-rose-300","disabled:opacity-75","font-medium","rounded","text-sm","my-2","px-6","py-2.5","text-center","transition","duration-150","ease-in-out",3,"disabled","click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5," End Visit "),t.qZA()(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),t._uU(10," Do you really want to open this visit? "),t.qZA(),t.TgZ(11,"div",9),t._uU(12),t.ALo(13,"date"),t.qZA()()()(),t.TgZ(14,"div",10)(15,"button",11),t.NdJ("click",function(){return i.closeModal()}),t._uU(16,"Cancel"),t.qZA(),t.TgZ(17,"button",12),t.NdJ("click",function(){return i.onSubmit()}),t._uU(18,"Open Visit"),t.qZA()()()()(),t._UZ(19,"div",13)),2&o&&(t.xp6(12),t.hij(" Visit date & time: ",t.xi3(13,2,i.consult_date,"MM/dd/yyyy hh:mm:ss a")," "),t.xp6(5),t.Q6J("disabled",i.is_saving))},dependencies:[d.ez,d.uU]}),s})();var Q=p(5211),C=p(2096),F=p(3997),D=p(3620),O=p(4664),Y=p(6306),S=p(7398),P=p(8645),Z=p(8316);function ft(n,s){if(1&n&&t._UZ(0,"fa-icon",21),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSpinner)}}function xt(n,s){if(1&n&&t._UZ(0,"fa-icon",22),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSave)}}function bt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onSubmit())}),t.YNc(1,ft,1,1,"fa-icon",19),t.YNc(2,xt,1,1,"fa-icon",20),t._uU(3),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("ngIf",e.is_saving),t.xp6(1),t.Q6J("ngIf",!e.is_saving),t.xp6(1),t.hij(" ",e.is_saving?"Saving":"Save"," ")}}function vt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",9)(2,"button",10),t._UZ(3,"fa-icon",11),t.qZA(),t.TgZ(4,"div",12)(5,"ng-select",13),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.selectedIdx=i)}),t.ALo(6,"async"),t.qZA()()(),t.TgZ(7,"div",14)(8,"textarea",15),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.idx_remarks=i)}),t.qZA()(),t.TgZ(9,"div",16),t.YNc(10,bt,4,4,"button",17),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("icon",e.faPlusSquare),t.xp6(2),t.Q6J("items",t.lcZ(6,10,e.idx$))("multiple",!0)("loading",e.idxLoading)("typeahead",e.searchInput$)("ngModel",e.selectedIdx)("disabled",e.consult_done||!e.allowed_to_edit),t.xp6(3),t.Q6J("disabled",e.consult_done||!e.allowed_to_edit)("ngModel",e.idx_remarks),t.xp6(2),t.Q6J("ngIf",!e.consult_done&&e.allowed_to_edit)}}const Zt=function(n){return{"rounded-b":n}};let yt=(()=>{var n;class s{onSubmit(){this.is_saving=!0,this.selectedIdx&&Object.keys(this.selectedIdx).length>0?this.http.post("consultation/initial-diagnosis",{notes_id:this.consult_details.consult_notes.id,initial_diagnosis:this.selectedIdx}).subscribe({next:i=>{this.saveNotes()},error:i=>console.log(i)}):this.saveNotes()}saveNotes(){this.idx_remarks?this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,idx_remarks:this.idx_remarks}).subscribe({next:i=>{this.showToastr(),this.is_saving=!1},error:i=>console.log(i)}):(this.showToastr(),this.is_saving=!1)}showToastr(){this.toastr.success("Successfully updated!","Initial Diagnosis")}loadIdx(o){this.idx$=(0,Q.z)((0,C.of)(o),this.searchInput$.pipe((0,w.h)(i=>null!==i&&i.length>=this.minLengthTerm),(0,F.x)(),(0,D.b)(400),(0,y.b)(()=>this.idxLoading=!0),(0,O.w)(i=>this.getIdx(i).pipe((0,Y.K)(()=>(0,C.of)([])),(0,y.b)(()=>this.idxLoading=!1)))))}getIdx(o=null){return this.http.get("libraries/diagnosis",{params:{"filter[search]":o}}).pipe((0,S.U)(i=>i.data))}loadSelected(){let o=[],i=[];this.initial_dx&&Object.keys(this.initial_dx).length>0?(Object.entries(this.initial_dx).forEach(([a,r],c)=>{let u=r;o.push(u.class_id.toString()),i.push(u.diagnosis)}),this.loadIdx(i),this.selectedIdx=o):this.loadIdx([])}ngOnChanges(o){this.show_content=this.toggle_content,this.consult_details&&(this.initial_dx=this.consult_details.consult_notes.initialdx,this.idx_remarks=this.consult_details.consult_notes.idx_remarks,this.consult_done=this.consult_details.consult_done,this.loadSelected())}constructor(o,i){this.http=o,this.toastr=i,this.faPlusSquare=_.CPW,this.faSave=_.r6l,this.faChevronCircleUp=_._qI,this.faChevronCircleDown=_.yh$,this.faSpinner=_.LM3,this.toastr_message=null,this.toastr_type=null,this.idxLoading=!1,this.show_content=!0,this.is_saving=!1,this.consult_done=!1,this.searchInput$=new P.x,this.minLengthTerm=3}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(g.O),t.Y36(h._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-initial-dx"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",allowed_to_edit:"allowed_to_edit"},features:[t.TTD],decls:11,vars:5,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[1,"flex","mb-2","p-4"],["type","submit",1,"inline-flex","p-1","items-center","text-gray-50","bg-sky-400","rounded-l-md","border","border-gray-300"],[1,"text-white","fa-xl",3,"icon"],[1,"chips-container"],["placeholder","search","typeToSearchText","search...","bindValue","class_id","bindLabel","class_name","notFoundText","No records found",1,"select-chips",3,"items","multiple","loading","typeahead","ngModel","disabled","ngModelChange"],[1,"flex","px-4","pb-4"],["rows","3","id","idx_remarks","placeholder","Initial Diagnosis remarks",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"disabled","ngModel","ngModelChange"],[1,"flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(o,i){1&o&&(t._UZ(0,"hr",0),t.TgZ(1,"div",1)(2,"div",2),t._uU(3," Diagnosis "),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"span",5),t._uU(7," Initial Diagnosis "),t.TgZ(8,"button",6),t.NdJ("click",function(){return i.show_content=!i.show_content}),t._UZ(9,"fa-icon",7),t.qZA()(),t.YNc(10,vt,11,12,"div",8),t.qZA()()()),2&o&&(t.xp6(6),t.Q6J("ngClass",t.VKq(3,Zt,!i.show_content)),t.xp6(3),t.Q6J("icon",i.show_content?i.faChevronCircleUp:i.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",i.show_content))},dependencies:[d.mk,d.O5,m.BN,Z.w9,l.Fj,l.JJ,l.On,d.Ov]}),s})();function Ct(n,s){if(1&n&&(t.TgZ(0,"div",18)(1,"h5",19)(2,"strong"),t._uU(3),t.qZA(),t._uU(4),t.qZA()()),2&n){const e=s.item,o=s.searchTerm;t.xp6(1),t.Q6J("ngOptionHighlight",o),t.xp6(2),t.hij("",e.icd10_code,":"),t.xp6(1),t.hij(" ",e.icd10_desc,"")}}function wt(n,s){if(1&n&&t._UZ(0,"fa-icon",23),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSpinner)}}function Tt(n,s){if(1&n&&t._UZ(0,"fa-icon",24),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSave)}}function qt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onSubmit())}),t.YNc(1,wt,1,1,"fa-icon",21),t.YNc(2,Tt,1,1,"fa-icon",22),t._uU(3),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("ngIf",e.is_saving),t.xp6(1),t.Q6J("ngIf",!e.is_saving),t.xp6(1),t.hij(" ",e.is_saving?"Saving":"Save"," ")}}function At(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",8)(2,"button",9),t._UZ(3,"fa-icon",10),t.qZA(),t.TgZ(4,"div",11)(5,"ng-select",12),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.selectedFdx=i)}),t.ALo(6,"async"),t.YNc(7,Ct,5,3,"ng-template",13),t.qZA()()(),t.TgZ(8,"div",14)(9,"textarea",15),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.fdx_remarks=i)}),t.qZA()(),t.TgZ(10,"div",16),t.YNc(11,qt,4,4,"button",17),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("icon",e.faPlusSquare),t.xp6(2),t.Q6J("items",t.lcZ(6,10,e.fdx$))("multiple",!0)("loading",e.fdxLoading)("typeahead",e.searchInput$)("ngModel",e.selectedFdx)("disabled",e.consult_done||!e.allowed_to_edit),t.xp6(4),t.Q6J("disabled",e.consult_done||!e.allowed_to_edit)("ngModel",e.fdx_remarks),t.xp6(2),t.Q6J("ngIf",!e.consult_done&&e.allowed_to_edit)}}const kt=function(n){return{"rounded-b":n}};let Ut=(()=>{var n;class s{onSubmit(){this.is_saving=!0,this.selectedFdx&&Object.keys(this.selectedFdx).length>0?this.http.post("consultation/final-diagnosis",{notes_id:this.consult_details.consult_notes.id,final_diagnosis:this.selectedFdx}).subscribe({next:i=>{this.saveNotes()},error:i=>console.log(i)}):this.saveNotes()}saveNotes(){this.fdx_remarks?this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,fdx_remarks:this.fdx_remarks}).subscribe({next:i=>{this.showToastr()},error:i=>console.log(i)}):this.showToastr()}showToastr(){this.is_saving=!1,this.toastr.success("Successfully updated!","Final Diagnosis")}loadFdx(o){this.fdx$=(0,Q.z)((0,C.of)(o),this.searchInput$.pipe((0,w.h)(i=>null!==i&&i.length>=this.minLengthTerm),(0,F.x)(),(0,D.b)(800),(0,y.b)(()=>this.fdxLoading=!0),(0,O.w)(i=>this.getFdx(i).pipe((0,Y.K)(()=>(0,C.of)([])),(0,y.b)(()=>this.fdxLoading=!1)))))}getFdx(o=null){return this.http.get("libraries/icd10",{params:{"filter[search]":o}}).pipe((0,S.U)(i=>i.data))}loadSelected(){let o=[],i=[];this.final_dx&&Object.keys(this.final_dx).length>0?(Object.entries(this.final_dx).forEach(([a,r],c)=>{let u=r;o.push(u.icd10_code.toString()),i.push(u.lib_icd10)}),this.loadFdx(i),this.selectedFdx=o):this.loadFdx([])}ngOnChanges(o){this.show_content=this.toggle_content,this.consult_details&&(this.final_dx=this.consult_details.consult_notes.finaldx,this.fdx_remarks=this.consult_details.consult_notes.fdx_remarks,this.consult_done=this.consult_details.consult_done,this.loadSelected())}constructor(o,i){this.http=o,this.toastr=i,this.faPlusSquare=T.CPW,this.faChevronCircleUp=_._qI,this.faChevronCircleDown=_.yh$,this.faSave=_.r6l,this.faSpinner=_.LM3,this.fdxLoading=!1,this.show_content=!0,this.is_saving=!1,this.consult_done=!1,this.searchInput$=new P.x,this.minLengthTerm=3}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(g.O),t.Y36(h._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-final-dx"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",allowed_to_edit:"allowed_to_edit"},features:[t.TTD],decls:9,vars:5,consts:[[1,"grid","grid-cols-10","mt-4"],[1,"col-span-2","pt-2"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[1,"flex","mb-2","p-4"],["type","submit",1,"inline-flex","p-1","items-center","text-gray-50","bg-sky-400","rounded-l-md","border","border-gray-300"],[1,"text-white","fa-xl",3,"icon"],[1,"chips-container"],["placeholder","search","typeToSearchText","search...","bindValue","icd10_code","bindLabel","icd10_desc","notFoundText","No records found",1,"select-chips",3,"items","multiple","loading","typeahead","ngModel","disabled","ngModelChange"],["ng-option-tmp",""],[1,"flex","px-4","pb-4"],["rows","3","id","fdx_remarks","placeholder","Final Diagnosis remarks",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"disabled","ngModel","ngModelChange"],[1,"flex","justify-between"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[1,"whitespace-normal"],[1,"text-gray-700",3,"ngOptionHighlight"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0),t._UZ(1,"div",1),t.TgZ(2,"div",2)(3,"div",3)(4,"span",4),t._uU(5," Final Diagnosis "),t.TgZ(6,"button",5),t.NdJ("click",function(){return i.show_content=!i.show_content}),t._UZ(7,"fa-icon",6),t.qZA()(),t.YNc(8,At,12,12,"div",7),t.qZA()()()),2&o&&(t.xp6(4),t.Q6J("ngClass",t.VKq(3,kt,!i.show_content)),t.xp6(3),t.Q6J("icon",i.show_content?i.faChevronCircleUp:i.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",i.show_content))},dependencies:[d.mk,d.O5,m.BN,Z.w9,Z.ir,l.Fj,l.JJ,l.On,d.Ov]}),s})();function Jt(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.key))}}function Mt(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.key))}}const Nt=function(n){return{"text-blue-500":n}};function It(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"input",22),t.NdJ("ngModelChange",function(i){const r=t.CHM(e).$implicit,c=t.oxw(4);return t.KtG(c.physical_codes[r.pe_id]=i)}),t.qZA(),t.TgZ(2,"span",23),t._uU(3),t.qZA()()}if(2&n){const e=s.$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("disabled",o.consult_done||!o.allowed_to_edit)("ngModel",o.physical_codes[e.pe_id]),t.xp6(1),t.Q6J("ngClass",t.VKq(4,Nt,1===e.konsulta_library_status)),t.xp6(1),t.Oqu(e.pe_desc)}}function Qt(n,s){if(1&n&&(t.TgZ(0,"div",20),t.YNc(1,It,4,6,"div",21),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.value)}}function Ft(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",24)(1,"span",25),t._uU(2,"Remarks: "),t.qZA(),t.TgZ(3,"input",26),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.physical_remarks[a.key+"_remarks"]=i)}),t.qZA()()}if(2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(3),t.Q6J("disabled",o.consult_done||!o.allowed_to_edit)("ngModel",o.physical_remarks[e.key+"_remarks"])}}function Dt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",15)(1,"div",16)(2,"button",6),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.toggleItems(a.key))}),t._UZ(3,"fa-icon",17),t.qZA(),t.YNc(4,Jt,3,3,"span",8),t.YNc(5,Mt,3,3,"span",8),t.qZA(),t.YNc(6,Qt,2,1,"div",18),t.YNc(7,Ft,4,2,"div",19),t.qZA()}if(2&n){const e=s.$implicit,o=t.oxw(2);t.xp6(3),t.Q6J("icon",o.pe_item[e.key]?o.faChevronUp:o.faChevronDown),t.xp6(1),t.Q6J("ngIf","heent"!==e.key),t.xp6(1),t.Q6J("ngIf","heent"===e.key),t.xp6(1),t.Q6J("ngIf",void 0!==o.pe_item[e.key]&&o.pe_item[e.key]),t.xp6(1),t.Q6J("ngIf",void 0!==o.pe_item[e.key]&&o.pe_item[e.key])}}function Ot(n,s){if(1&n&&t._UZ(0,"fa-icon",30),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSpinner)}}function Yt(n,s){if(1&n&&t._UZ(0,"fa-icon",31),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSave)}}function St(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onSubmit())}),t.YNc(1,Ot,1,1,"fa-icon",28),t.YNc(2,Yt,1,1,"fa-icon",29),t._uU(3),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("ngIf",e.is_saving),t.xp6(1),t.Q6J("ngIf",!e.is_saving),t.xp6(1),t.hij(" ",e.is_saving?"Saving":"Save"," ")}}function Pt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",9),t.YNc(2,Dt,8,5,"div",10),t.ALo(3,"keyvalue"),t.TgZ(4,"div")(5,"label",11),t._uU(6,"PE Remarks"),t.qZA(),t.TgZ(7,"input",12),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.physical_remarks.remarks=i)}),t.qZA()()(),t.TgZ(8,"div",13),t.YNc(9,St,4,4,"button",14),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",t.lcZ(3,3,e.pe_grouped)),t.xp6(5),t.Q6J("ngModel",e.physical_remarks.remarks),t.xp6(2),t.Q6J("ngIf",!e.consult_done&&e.allowed_to_edit)}}const Ht=function(n){return{"rounded-b":n}};let Et=(()=>{var n;class s{toggleItems(o){this.pe_item[o]=!this.pe_item[o]}onSubmit(){if(this.is_saving=!0,Object.keys(this.physical_codes).length>0){let o=[];Object.entries(this.physical_codes).forEach(([i,a],r)=>{!0===a&&o.push(i)}),this.saveCodes(o)}else this.saveNotes()}saveCodes(o){this.http.post("consultation/physical-exam",{notes_id:this.consult_notes.id,physical_exam:o}).subscribe({next:a=>{this.saveNotes()},error:a=>console.log(a)})}saveNotes(){let o;this.physical_remarks.notes_id=this.consult_notes.id,this.physical_remarks.patient_id=this.consult_details.patient.id,console.log(this.physical_remarks),o=null===this.physical_remarks.id?this.http.post("consultation/physical-exam-remarks",this.physical_remarks):this.http.update("consultation/physical-exam-remarks/",this.physical_remarks.id,this.physical_remarks),o.subscribe({next:i=>{this.is_saving=!1,this.showToastr()},error:i=>console.log(i)})}showToastr(){this.toastr.success("Successfully updated!","Physical exam")}loadLibraries(){this.http.get("libraries/pe").subscribe(o=>{const a=o.data.reduce((r,c)=>{const u=r[c.category_id.toLowerCase()]||[];return u.push(c),r[c.category_id.toLowerCase()]=u,r},{});this.pe_grouped=a})}loadSelected(){Object.keys(this.consult_notes.physical_exam).length>0&&Object.entries(this.consult_notes.physical_exam).forEach(([o,i],a)=>{this.physical_codes[i.pe_id]=!0})}ngOnChanges(o){this.show_content=this.toggle_content,this.consult_details&&(this.consult_notes=this.consult_details.consult_notes,this.consult_done=this.consult_details.consult_done,this.loadSelected(),this.consult_notes.physical_exam_remarks&&(this.physical_remarks=this.consult_notes.physical_exam_remarks))}constructor(o,i){this.http=o,this.toastr=i,this.faSave=_.r6l,this.faChevronCircleUp=_._qI,this.faChevronCircleDown=_.yh$,this.faSpinner=_.LM3,this.faChevronDown=_.ptq,this.faChevronUp=_.mTx,this.pe_grouped=[],this.physical_codes=[],this.physical_remarks={id:null,abdomen_remarks:null,breast_remarks:null,chest_remarks:null,extremities_remarks:null,genitourinary_remarks:null,heart_remarks:null,heent_remarks:null,neuro_remarks:null,pelvic_remarks:null,rectal_remarks:null,skin_remarks:null,remarks:null},this.show_content=!1,this.consult_done=!1,this.is_saving=!1,this.pe_item=[]}ngOnInit(){this.loadLibraries()}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(g.O),t.Y36(h._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-physical-exam"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",allowed_to_edit:"allowed_to_edit"},features:[t.TTD],decls:11,vars:5,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[1,"w-full","p-5"],["class","grid grid-cols-1 gap-3 mb-3 border-b border-slate-200 pb-3 last:border-b-0",4,"ngFor","ngForOf"],["for",""],["type","text",1,"input",3,"ngModel","ngModelChange"],[1,"flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[1,"grid","grid-cols-1","gap-3","mb-3","border-b","border-slate-200","pb-3","last:border-b-0"],[1,"col-span-1","font-bold"],["size","md",1,"pr-2",3,"icon"],["class","col-span-1 grid grid-cols-2 gap-y-2",4,"ngIf"],["class","flex col-span-1",4,"ngIf"],[1,"col-span-1","grid","grid-cols-2","gap-y-2"],[4,"ngFor","ngForOf"],["type","checkbox",1,"rounded-md","border","border-gray-400","p-2",3,"disabled","ngModel","ngModelChange"],[1,"pl-2",3,"ngClass"],[1,"flex","col-span-1"],[1,"font-semibold","mt-3","mr-2","text-sm"],["rows","2","type","textarea","placeholder","remarks",1,"input","placeholder-slate-400","placeholder:italic",3,"disabled","ngModel","ngModelChange"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(o,i){1&o&&(t._UZ(0,"hr",0),t.TgZ(1,"div",1)(2,"div",2),t._uU(3," Physical Exam "),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"span",5),t._uU(7," Observations "),t.TgZ(8,"button",6),t.NdJ("click",function(){return i.show_content=!i.show_content}),t._UZ(9,"fa-icon",7),t.qZA()(),t.YNc(10,Pt,10,5,"div",8),t.qZA()()()),2&o&&(t.xp6(6),t.Q6J("ngClass",t.VKq(3,Ht,!i.show_content)),t.xp6(3),t.Q6J("icon",i.show_content?i.faChevronCircleUp:i.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",i.show_content))},dependencies:[d.mk,d.sg,d.O5,m.BN,l.Fj,l.Wl,l.JJ,l.On,d.gd,d.rS,d.Nd]}),s})();var H=p(3146);function jt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",23)(2,"div",24)(3,"div",25),t._uU(4," No records found... "),t.qZA(),t.TgZ(5,"div",26)(6,"button",27),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.showAdd())}),t._UZ(7,"fa-icon",28),t._uU(8," Add "),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(7),t.Q6J("icon",e.faAdd)}}const Kt=function(n){return{"bg-gray-50":n}};function Gt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr",29),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.selectDrugs(a))}),t.TgZ(1,"th",30),t._uU(2),t.qZA(),t.TgZ(3,"td",31),t._uU(4),t.qZA(),t.TgZ(5,"td",31),t._uU(6),t.qZA(),t._UZ(7,"td",31),t.qZA()}if(2&n){const e=s.$implicit;t.Q6J("ngClass",t.VKq(4,Kt,s.odd)),t.xp6(2),t.hij(" ",e.desc," "),t.xp6(2),t.hij(" ",e.unit_desc," "),t.xp6(2),t.hij(" ",e.package_desc," ")}}function Lt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",32)(1,"div",33)(2,"div",34)(3,"p",35),t._uU(4," Showing "),t.TgZ(5,"span",36),t._uU(6),t.qZA(),t._uU(7," to "),t.TgZ(8,"span",36),t._uU(9),t.qZA(),t._uU(10," of "),t.TgZ(11,"span",36),t._uU(12),t.qZA(),t._uU(13," results "),t.qZA()(),t.TgZ(14,"div")(15,"nav",37)(16,"button",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.loadDrugs(1))}),t._UZ(17,"fa-icon",39),t.qZA(),t.TgZ(18,"button",40),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.loadDrugs(i.current_page-1))}),t._UZ(19,"fa-icon",39),t._uU(20,"Previous "),t.qZA(),t.TgZ(21,"button",40),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.loadDrugs(i.current_page+1))}),t._uU(22," Next"),t._UZ(23,"fa-icon",41),t.qZA(),t.TgZ(24,"button",42),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.loadDrugs(i.last_page))}),t._UZ(25,"fa-icon",41),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(6),t.Oqu(e.from),t.xp6(3),t.Oqu(e.to),t.xp6(3),t.Oqu(e.total),t.xp6(4),t.Q6J("disabled",1===e.current_page),t.xp6(1),t.Q6J("icon",e.faAnglesLeft),t.xp6(1),t.Q6J("disabled",1===e.current_page),t.xp6(1),t.Q6J("icon",e.faChevronLeft),t.xp6(2),t.Q6J("disabled",e.current_page===e.last_page),t.xp6(2),t.Q6J("icon",e.faChevronRight),t.xp6(1),t.Q6J("disabled",e.current_page===e.last_page),t.xp6(1),t.Q6J("icon",e.faAnglesRight)}}let $t=(()=>{var n;class s{selectDrugs(o){this.openAddForm.emit(o),this.toggleList.emit()}closeModal(){this.toggleList.emit()}showAdd(){this.openAddForm.emit(),this.toggleList.emit()}loadDrugs(o){let i={params:{}};this.search_item&&(i.params["filter[desc]"]=this.search_item),o&&(i.params.page=o),i.params.per_page=this.per_page,this.http.get("libraries/konsulta-medicines",i).subscribe({next:a=>{this.drug_list=a.data,this.current_page=a.meta.current_page,this.last_page=a.meta.last_page,this.from=a.meta.from,this.to=a.meta.to,this.total=a.meta.total},error:a=>console.log(a)})}constructor(o){this.http=o,this.openAddForm=new t.vpe,this.toggleList=new t.vpe,this.faAnglesLeft=_._Wx,this.faChevronLeft=_.A35,this.faChevronRight=_._tD,this.faAnglesRight=_.ccb,this.faSearch=_.wn1,this.faEdit=_.Xcf,this.faAdd=_.XSk,this.faCircleXmark=_.WA2,this.is_updating=!1,this.show_lib_drug=!1,this.per_page=10}ngOnInit(){this.loadDrugs()}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(g.O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-drug-list"]],outputs:{openAddForm:"openAddForm",toggleList:"toggleList"},decls:30,vars:6,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-5xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"flex","justify-end"],[1,"border","border-gray-400","rounded-md","bg-white"],["type","text","placeholder","Search drugs",1,"form-input","border-0","text-sm","p-1","m-1","border-r","border-gray-400",3,"ngModel","ngModelChange","keyup.enter"],["type","button",1,"text-blue-500","w-9","h-9",3,"click"],[1,"-ml-1",3,"icon"],["type","button",1,"text-white","w-9","h-9",3,"click"],[1,"-mr-4",3,"icon"],[1,"h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"overflow-x-auto","relative","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400","mb-5"],[1,"sticky","top-0","text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6"],[1,"overflow-y-auto"],[4,"ngIf"],["class","bg-white border-t","class","hover:bg-blue-200 cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"flex","justify-end","py-4","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["class","bg-white py-3 flex items-center justify-between sm:px-6",4,"ngIf"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],["colspan","9"],[1,"grid","grid-cols-1","w-full","mt-10"],[1,"text-center","italic"],[1,"flex","justify-center","mt-3"],["type","button",1,"btn-save",3,"click"],[1,"mr-1","text-white",3,"icon"],[1,"hover:bg-blue-200","cursor-pointer",3,"ngClass","click"],["scope","row",1,"py-4","px-6","font-medium","whitespace-nowrap"],[1,"py-4","px-6"],[1,"bg-white","py-3","flex","items-center","justify-between","sm:px-6"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"mr-3"],[1,"text-sm","text-gray-700"],[1,"font-medium"],["aria-label","Pagination",1,"relative","z-0","inline-flex","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"disabled","click"],[1,"block","h-15","w-15","text-gray-500","pr-1",3,"icon"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","bg-white","text-sm","font-medium","text-gray-700","hover:bg-gray-50",3,"disabled","click"],[1,"h-5","w-5","text-gray-500",3,"icon"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"disabled","click"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5," Drugs library "),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"input",7),t.NdJ("ngModelChange",function(r){return i.search_item=r})("keyup.enter",function(){return i.loadDrugs()}),t.qZA(),t.TgZ(9,"button",8),t.NdJ("click",function(){return i.loadDrugs()}),t._UZ(10,"fa-icon",9),t.qZA()(),t.TgZ(11,"button",10),t.NdJ("click",function(){return i.closeModal()}),t._UZ(12,"fa-icon",11),t.qZA()()(),t.TgZ(13,"div",12)(14,"div",13)(15,"table",14)(16,"thead",15)(17,"tr")(18,"th",16),t._uU(19,"Drug description"),t.qZA(),t.TgZ(20,"th",16),t._uU(21,"Unit"),t.qZA(),t.TgZ(22,"th",16),t._uU(23,"Package"),t.qZA()()(),t.TgZ(24,"tbody",17),t.YNc(25,jt,9,1,"tr",18),t.YNc(26,Gt,8,6,"tr",19),t.qZA()()()(),t.TgZ(27,"div",20),t.YNc(28,Lt,26,11,"div",21),t.qZA()()()(),t._UZ(29,"div",22)),2&o&&(t.xp6(8),t.Q6J("ngModel",i.search_item),t.xp6(2),t.Q6J("icon",i.faSearch),t.xp6(2),t.Q6J("icon",i.faCircleXmark),t.xp6(13),t.Q6J("ngIf",0===(null==i.drug_list?null:i.drug_list.length)||!i.drug_list),t.xp6(1),t.Q6J("ngForOf",i.drug_list),t.xp6(2),t.Q6J("ngIf",(null==i.drug_list?null:i.drug_list.length)>=1))},dependencies:[d.mk,d.sg,d.O5,m.BN,l.Fj,l.JJ,l.On]}),s})();function Vt(n,s){if(1&n&&(t.TgZ(0,"div",40)(1,"span",41),t._uU(2,"Drug description:"),t.qZA(),t._uU(3),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.hij(" ",e.selected_drug.konsulta_medicine?e.selected_drug.konsulta_medicine.desc:e.selected_drug.desc," ")}}function Rt(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.required_message," ")}}function Bt(n,s){if(1&n&&(t.TgZ(0,"div",44),t.YNc(1,Rt,2,1,"div",45),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.f.added_medicine.errors?null:e.f.added_medicine.errors.required)}}const f=function(n){return{"text-red-500":n}},x=function(n){return{"invalid-input":n}};function zt(n,s){if(1&n&&(t.TgZ(0,"div",31)(1,"label",42),t._uU(2,"Drug name"),t.qZA(),t._UZ(3,"input",43),t.YNc(4,Bt,2,1,"div",13),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(3,f,e.is_saving&&e.f.added_medicine.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(5,x,e.is_saving&&e.f.added_medicine.errors)),t.xp6(1),t.Q6J("ngIf",e.is_saving&&e.f.added_medicine.errors)}}function Wt(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function Xt(n,s){if(1&n&&(t.TgZ(0,"div",44),t.YNc(1,Wt,2,1,"div",45),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.dosage_quantity.errors?null:e.f.dosage_quantity.errors.required)}}function te(n,s){if(1&n&&(t.TgZ(0,"option",46),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function ee(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function ne(n,s){if(1&n&&(t.TgZ(0,"div",44),t.YNc(1,ee,2,1,"div",45),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.dosage_uom.errors?null:e.f.dosage_uom.errors.required)}}function ie(n,s){if(1&n&&(t.TgZ(0,"option",46),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function oe(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function se(n,s){if(1&n&&(t.TgZ(0,"div",44),t.YNc(1,oe,2,1,"div",45),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.dose_regimen.errors?null:e.f.dose_regimen.errors.required)}}function ae(n,s){if(1&n&&(t.TgZ(0,"option",46),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function le(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function re(n,s){if(1&n&&(t.TgZ(0,"div",44),t.YNc(1,le,2,1,"div",45),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.medicine_route_code.errors?null:e.f.medicine_route_code.errors.required)}}function _e(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function de(n,s){if(1&n&&(t.TgZ(0,"div",44),t.YNc(1,_e,2,1,"div",45),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.duration_intake.errors?null:e.f.duration_intake.errors.required)}}function ce(n,s){if(1&n&&(t.TgZ(0,"option",46),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function pe(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function ue(n,s){if(1&n&&(t.TgZ(0,"div",44),t.YNc(1,pe,2,1,"div",45),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.duration_frequency.errors?null:e.f.duration_frequency.errors.required)}}function ge(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function me(n,s){if(1&n&&(t.TgZ(0,"div",44),t.YNc(1,ge,2,1,"div",45),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.quantity.errors?null:e.f.quantity.errors.required)}}function he(n,s){if(1&n&&(t.TgZ(0,"option",46),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function fe(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function xe(n,s){if(1&n&&(t.TgZ(0,"div",44),t.YNc(1,fe,2,1,"div",45),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.quantity_preparation.errors?null:e.f.quantity_preparation.errors.required)}}function be(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function ve(n,s){if(1&n&&(t.TgZ(0,"div",44),t.YNc(1,be,2,1,"div",45),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.instruction_quantity.errors?null:e.f.instruction_quantity.errors.required)}}function Ze(n,s){if(1&n&&(t.TgZ(0,"option",46),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function ye(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function Ce(n,s){if(1&n&&(t.TgZ(0,"div",44),t.YNc(1,ye,2,1,"div",45),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.medicine_purpose.errors?null:e.f.medicine_purpose.errors.required)}}function we(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.required_message," ")}}function Te(n,s){if(1&n&&(t.TgZ(0,"div",44),t.YNc(1,we,2,1,"div",45),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.f.purpose_other.errors?null:e.f.purpose_other.errors.required)}}function qe(n,s){if(1&n&&(t.TgZ(0,"div",31)(1,"label",47),t._uU(2,"Purpose remarks"),t.qZA(),t._UZ(3,"input",48),t.YNc(4,Te,2,1,"div",13),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(3,f,e.is_saving&&e.f.purpose_other.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(5,x,e.is_saving&&e.f.purpose_other.errors)),t.xp6(1),t.Q6J("ngIf",e.is_saving&&e.f.purpose_other.errors)}}function Ae(n,s){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.Oqu(e.value)}}function ke(n,s){if(1&n&&(t.TgZ(0,"div",49)(1,"div",50)(2,"ul",51),t.YNc(3,Ae,2,1,"li",52),t.ALo(4,"keyvalue"),t.qZA()()()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",t.lcZ(4,1,e.submit_errors))}}let Ue=(()=>{var n;class s{get f(){return this.prescriptionForm.controls}closeModal(){this.toggleForm.emit()}onSubmit(){if(this.prescriptionForm.valid){let o;o=this.selected_drug&&this.selected_drug.id?this.http.update("medicine/prescriptions/",this.selected_drug.id,this.prescriptionForm.value):this.http.post("medicine/prescriptions",this.prescriptionForm.value),o.subscribe({next:i=>{this.toastr.success("Successfully added","Prescription"),this.closeModal()},error:i=>console.log(i)})}}loadLibraries(){this.libraries.forEach(o=>{this.http.get("libraries/"+o.location).subscribe({next:i=>{this[o.var_name]=i.data,console.log(i.data)},error:i=>console.log(i),complete:()=>this.show_form=!0})})}constructor(o,i,a){this.http=o,this.toastr=i,this.formBuilder=a,this.toggleForm=new t.vpe,this.is_saving=!1,this.show_form=!1,this.membership_types=[],this.prescriptionForm=new l.cw({patient_id:new l.NI(null),prescribed_by:new l.NI(null),consult_id:new l.NI(null),prescription_date:new l.NI(null),konsulta_medicine_code:new l.NI(null),added_medicine:new l.NI(null),dosage_quantity:new l.NI(null),dosage_uom:new l.NI(null),dose_regimen:new l.NI(null),medicine_purpose:new l.NI(null),purpose_other:new l.NI(null),duration_intake:new l.NI(null),duration_frequency:new l.NI(null),quantity:new l.NI(null),quantity_preparation:new l.NI(null),instruction_quantity:new l.NI(null),medicine_route_code:new l.NI(null)}),this.libraries=[{var_name:"drug_uom",location:"unit-of-measurements"},{var_name:"drug_regimen",location:"dose-regimens"},{var_name:"drug_purpose",location:"purposes"},{var_name:"drug_frequency",location:"duration-frequencies"},{var_name:"drug_preparation",location:"preparations"},{var_name:"drug_route",location:"medicine-route"}],this.add_drug=!1}checkPurpose(){"99"===this.prescriptionForm.value.medicine_purpose?this.prescriptionForm.controls.purpose_other.enable():this.prescriptionForm.controls.purpose_other.disable()}ngOnChanges(o){this.prescriptionForm=this.formBuilder.nonNullable.group({patient_id:[this.consult_details.patient.id],prescribed_by:[this.consult_details.physician.id,[l.kI.required]],consult_id:[this.consult_details.id,[l.kI.required]],prescription_date:[(0,d.p6)(this.consult_details.consult_date,"yyyy-MM-dd","en","Asia/Manila"),[l.kI.required]],konsulta_medicine_code:[null,[l.kI.required]],added_medicine:[null,[l.kI.required]],dosage_quantity:[null,[l.kI.required]],dosage_uom:[null,[l.kI.required]],dose_regimen:[null,[l.kI.required]],medicine_purpose:[null,[l.kI.required]],purpose_other:[null,[l.kI.required]],duration_intake:[null,[l.kI.required]],duration_frequency:[null,[l.kI.required]],quantity:[null,[l.kI.required]],quantity_preparation:[null,[l.kI.required]],instruction_quantity:[null,[l.kI.required]],medicine_route_code:[null,[l.kI.required]]}),this.selected_drug?this.selected_drug.id?(this.prescriptionForm.patchValue({konsulta_medicine_code:this.selected_drug.konsulta_medicine?this.selected_drug.konsulta_medicine.code:null,added_medicine:this.selected_drug.added_medicine?this.selected_drug.added_medicine:null,dosage_quantity:this.selected_drug.dosage_quantity,dosage_uom:this.selected_drug.unit_of_measurement.code,dose_regimen:this.selected_drug.regimen.code,medicine_purpose:this.selected_drug.purpose.code,duration_intake:this.selected_drug.duration_intake,duration_frequency:this.selected_drug.frequency.code,quantity:this.selected_drug.quantity,quantity_preparation:this.selected_drug.preparation.code,instruction_quantity:this.selected_drug.instruction_quantity,medicine_route_code:this.selected_drug.medicine_route?this.selected_drug.medicine_route.code:null}),this.selected_drug.konsulta_medicine?this.prescriptionForm.controls.added_medicine.disable():(this.add_drug=!0,this.prescriptionForm.controls.added_medicine.enable(),this.prescriptionForm.controls.konsulta_medicine_code.disable()),this.checkPurpose()):(this.prescriptionForm.patchValue({konsulta_medicine_code:this.selected_drug.code}),this.prescriptionForm.controls.added_medicine.disable()):(this.add_drug=!0,this.prescriptionForm.controls.konsulta_medicine_code.disable())}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(g.O),t.Y36(h._W),t.Y36(l.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-drug-form"]],inputs:{selected_drug:"selected_drug",consult_details:"consult_details",drug_uom:"drug_uom",drug_regimen:"drug_regimen",drug_purpose:"drug_purpose",drug_frequency:"drug_frequency",drug_preparation:"drug_preparation",drug_route:"drug_route"},outputs:{toggleForm:"toggleForm"},features:[t.TTD],decls:75,vars:82,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white","pl-5"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"w-full","max-w-3xl","text-left","text-gray-500","dark:text-gray-400",3,"formGroup"],[1,"grid","grid-cols-3","gap-4","pb-5","px-10"],["class","col-span-3 mt-5 mx-5",4,"ngIf"],["class","col-span-3 text-sm ",4,"ngIf"],[1,"col-span-1","text-sm"],["for","dosage_quantity",1,"font-semibold",3,"ngClass"],["name","dosage_quantity","id","dosage_quantity","formControlName","dosage_quantity","type","number",1,"input",3,"ngClass"],["class","invalid-alert",4,"ngIf"],["for","dosage_uom",1,"font-semibold",3,"ngClass"],["name","dosage_uom","id","dosage_uom","formControlName","dosage_uom",1,"input",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["for","dose_regimen",1,"font-semibold",3,"ngClass"],["name","dose_regimen","id","dose_regimen","formControlName","dose_regimen",1,"input",3,"ngClass"],["for","medicine_route_code",1,"font-semibold",3,"ngClass"],["name","route","id","medicine_route_code","formControlName","medicine_route_code",1,"input",3,"ngClass"],["for","duration_intake",1,"font-semibold",3,"ngClass"],["name","duration_intake","id","duration_intake","formControlName","duration_intake","type","number",1,"input",3,"ngClass"],["for","duration_frequency",1,"font-semibold",3,"ngClass"],["name","duration_frequency","id","duration_frequency","formControlName","duration_frequency",1,"input",3,"ngClass"],["for","quantity",1,"font-semibold",3,"ngClass"],["name","quantity","id","quantity","formControlName","quantity","type","number",1,"input",3,"ngClass"],["for","quantity_preparation",1,"font-semibold",3,"ngClass"],["name","quantity_preparation","id","quantity_preparation","formControlName","quantity_preparation",1,"input",3,"ngClass"],["for","instruction_quantity",1,"font-semibold",3,"ngClass"],["name","instruction_quantity","id","instruction_quantity","formControlName","instruction_quantity","type","number",1,"input",3,"ngClass"],[1,"col-span-3","text-sm"],["for","medicine_purpose",1,"font-semibold",3,"ngClass"],["name","medicine_purpose","id","medicine_purpose","formControlName","medicine_purpose",1,"input",3,"ngClass","change"],["class","col-span-3 text-sm",4,"ngIf"],["id","show_errors","class","relative mx-10 col-span-8 bg-red-200 rounded border border-red-300 text-red-900 text-sm mb-5",4,"ngIf"],[1,"flex","justify-end","mr-10","py-3","rounded-b"],["type","button",1,"btn-save","px-10","bg-gray-400","mr-5",3,"click"],["type","button",1,"btn-save","px-10","disabled:bg-gray-300",3,"disabled","click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"col-span-3","mt-5","mx-5"],[1,"font-semibold"],["for","added_medicine",1,"font-semibold",3,"ngClass"],["name","added_medicine","id","added_medicine","formControlName","added_medicine","type","text",1,"input",3,"ngClass"],[1,"invalid-alert"],[4,"ngIf"],[3,"value"],["for","purpose_other",1,"font-semibold",3,"ngClass"],["name","purpose_other","id","purpose_other","formControlName","purpose_other","type","text",1,"input",3,"ngClass"],["id","show_errors",1,"relative","mx-10","col-span-8","bg-red-200","rounded","border","border-red-300","text-red-900","text-sm","mb-5"],[1,"block","p-3","pl-10"],[1,"list-disc"],[4,"ngFor","ngForOf"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5," Prescribe medicine "),t.qZA()(),t.TgZ(6,"div",5)(7,"form",6)(8,"div",7),t.YNc(9,Vt,4,1,"div",8),t.YNc(10,zt,5,7,"div",9),t.TgZ(11,"div",10)(12,"label",11),t._uU(13,"Dosage Qty."),t.qZA(),t._UZ(14,"input",12),t.YNc(15,Xt,2,1,"div",13),t.qZA(),t.TgZ(16,"div",10)(17,"label",14),t._uU(18,"Dosage unit"),t.qZA(),t.TgZ(19,"select",15),t.YNc(20,te,2,2,"option",16),t.qZA(),t.YNc(21,ne,2,1,"div",13),t.qZA(),t.TgZ(22,"div",10)(23,"label",17),t._uU(24,"Dosage regimen"),t.qZA(),t.TgZ(25,"select",18),t.YNc(26,ie,2,2,"option",16),t.qZA(),t.YNc(27,se,2,1,"div",13),t.qZA(),t.TgZ(28,"div",10)(29,"label",19),t._uU(30,"Medicine Route"),t.qZA(),t.TgZ(31,"select",20),t.YNc(32,ae,2,2,"option",16),t.qZA(),t.YNc(33,re,2,1,"div",13),t.qZA(),t.TgZ(34,"div",10)(35,"label",21),t._uU(36,"Duration"),t.qZA(),t._UZ(37,"input",22),t.YNc(38,de,2,1,"div",13),t.qZA(),t.TgZ(39,"div",10)(40,"label",23),t._uU(41,"Duration frequency"),t.qZA(),t.TgZ(42,"select",24),t.YNc(43,ce,2,2,"option",16),t.qZA(),t.YNc(44,ue,2,1,"div",13),t.qZA(),t.TgZ(45,"div",10)(46,"label",25),t._uU(47,"Quantity"),t.qZA(),t._UZ(48,"input",26),t.YNc(49,me,2,1,"div",13),t.qZA(),t.TgZ(50,"div",10)(51,"label",27),t._uU(52,"Preparation"),t.qZA(),t.TgZ(53,"select",28),t.YNc(54,he,2,2,"option",16),t.qZA(),t.YNc(55,xe,2,1,"div",13),t.qZA(),t.TgZ(56,"div",10)(57,"label",29),t._uU(58,"Instruction Qty."),t.qZA(),t._UZ(59,"input",30),t.YNc(60,ve,2,1,"div",13),t.qZA(),t.TgZ(61,"div",31)(62,"label",32),t._uU(63,"Medicine purpose"),t.qZA(),t.TgZ(64,"select",33),t.NdJ("change",function(){return i.checkPurpose()}),t.YNc(65,Ze,2,2,"option",16),t.qZA(),t.YNc(66,Ce,2,1,"div",13),t.qZA(),t.YNc(67,qe,5,7,"div",34),t.qZA(),t.YNc(68,ke,5,3,"div",35),t.qZA()(),t.TgZ(69,"div",36)(70,"button",37),t.NdJ("click",function(){return i.closeModal()}),t._uU(71,"Close"),t.qZA(),t.TgZ(72,"button",38),t.NdJ("click",function(){return i.onSubmit()}),t._uU(73,"Save"),t.qZA()()()()(),t._UZ(74,"div",39)),2&o&&(t.xp6(7),t.Q6J("formGroup",i.prescriptionForm),t.xp6(2),t.Q6J("ngIf",!i.add_drug),t.xp6(1),t.Q6J("ngIf",i.add_drug),t.xp6(2),t.Q6J("ngClass",t.VKq(42,f,i.is_saving&&i.f.dosage_quantity.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(44,x,i.is_saving&&i.f.dosage_quantity.errors)),t.xp6(1),t.Q6J("ngIf",i.is_saving&&i.f.dosage_quantity.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(46,f,i.is_saving&&i.f.dosage_uom.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(48,x,i.is_saving&&i.f.dosage_uom.errors)),t.xp6(1),t.Q6J("ngForOf",i.drug_uom),t.xp6(1),t.Q6J("ngIf",i.is_saving&&i.f.dosage_uom.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(50,f,i.is_saving&&i.f.dose_regimen.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(52,x,i.is_saving&&i.f.dose_regimen.errors)),t.xp6(1),t.Q6J("ngForOf",i.drug_regimen),t.xp6(1),t.Q6J("ngIf",i.is_saving&&i.f.dose_regimen.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(54,f,i.is_saving&&i.f.medicine_route_code.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(56,x,i.is_saving&&i.f.medicine_route_code.errors)),t.xp6(1),t.Q6J("ngForOf",i.drug_route),t.xp6(1),t.Q6J("ngIf",i.is_saving&&i.f.medicine_route_code.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(58,f,i.is_saving&&i.f.duration.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(60,x,i.is_saving&&i.f.duration_intake.errors)),t.xp6(1),t.Q6J("ngIf",i.is_saving&&i.f.duration_intake.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(62,f,i.is_saving&&i.f.duration_frequency.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(64,x,i.is_saving&&i.f.duration_frequency.errors)),t.xp6(1),t.Q6J("ngForOf",i.drug_frequency),t.xp6(1),t.Q6J("ngIf",i.is_saving&&i.f.duration_frequency.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(66,f,i.is_saving&&i.f.quantity.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(68,x,i.is_saving&&i.f.quantity.errors)),t.xp6(1),t.Q6J("ngIf",i.is_saving&&i.f.quantity.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(70,f,i.is_saving&&i.f.quantity_preparation.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(72,x,i.is_saving&&i.f.quantity_preparation.errors)),t.xp6(1),t.Q6J("ngForOf",i.drug_preparation),t.xp6(1),t.Q6J("ngIf",i.is_saving&&i.f.quantity_preparation.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(74,f,i.is_saving&&i.f.instruction_quantity.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(76,x,i.is_saving&&i.f.instruction_quantity.errors)),t.xp6(1),t.Q6J("ngIf",i.is_saving&&i.f.instruction_quantity.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(78,f,i.is_saving&&i.f.medicine_purpose.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(80,x,i.is_saving&&i.f.medicine_purpose.errors)),t.xp6(1),t.Q6J("ngForOf",i.drug_purpose),t.xp6(1),t.Q6J("ngIf",i.is_saving&&i.f.medicine_purpose.errors),t.xp6(1),t.Q6J("ngIf","99"===i.prescriptionForm.value.medicine_purpose),t.xp6(1),t.Q6J("ngIf",i.submit_errors),t.xp6(4),t.Q6J("disabled",i.prescriptionForm.invalid))},dependencies:[d.mk,d.sg,d.O5,l._Y,l.YN,l.Kr,l.Fj,l.wV,l.EJ,l.JJ,l.JL,l.sg,l.u,d.Nd]}),s})();function Je(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleModal())}),t._UZ(1,"fa-icon",20),t._uU(2," epress "),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faReceipt)}}function Me(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.navigateTo("dispensing"))}),t._UZ(1,"fa-icon",20),t._uU(2," dispensing "),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faPrescriptionBottleMedical)}}function Ne(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleList())}),t._UZ(1,"fa-icon",20),t._uU(2," add drugs "),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faAdd)}}function Ie(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr",29)(1,"td",30),t._uU(2),t._UZ(3,"br"),t.qZA(),t.TgZ(4,"td",31),t._uU(5),t._UZ(6,"br")(7,"br"),t._uU(8),t.qZA(),t.TgZ(9,"td",31),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"td",31),t._uU(13),t.qZA(),t.TgZ(14,"td",31),t._uU(15),t.qZA(),t.TgZ(16,"td",32)(17,"button",33),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.openAddForm(a))}),t._UZ(18,"fa-icon",34),t.qZA(),t.TgZ(19,"button",35),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.toggleModal("delete-item",a))}),t._UZ(20,"fa-icon",36),t.qZA()()()}if(2&n){const e=s.$implicit,o=t.oxw(2);t.xp6(2),t.AsE(" ",e.konsulta_medicine?e.konsulta_medicine.desc:e.added_medicine," ",e.medicine?e.medicine.gen_name:""," "),t.xp6(3),t.xDo(" ",e.dosage_quantity," ",e.unit_of_measurement.desc," ",e.regimen.desc," ",e.duration_intake," ",e.frequency.desc," "),t.xp6(3),t.hij(" Instruction Qty: ",e.instruction_quantity," "),t.xp6(2),t.hij(" ",t.Dn7(11,13,e.prescription_date,"MM/dd/yyyy","Asia/Manila")," "),t.xp6(3),t.hij(" ",e.quantity," "),t.xp6(2),t.hij(" ",e.preparation.desc," "),t.xp6(3),t.Q6J("icon",o.faEdit),t.xp6(2),t.Q6J("icon",o.faTrashCan)}}function Qe(n,s){if(1&n&&(t.TgZ(0,"table",23)(1,"thead")(2,"tr",24)(3,"th",25),t._uU(4,"Medicine"),t.qZA(),t.TgZ(5,"th",25),t._uU(6,"Intake"),t.qZA(),t.TgZ(7,"th",26),t._uU(8,"Prescription Date"),t.qZA(),t.TgZ(9,"th",26),t._uU(10,"Quantity"),t.qZA(),t.TgZ(11,"th",26),t._uU(12,"Unit of Measurement"),t.qZA(),t.TgZ(13,"th",27),t._uU(14,"Action"),t.qZA()()(),t.TgZ(15,"tbody"),t.YNc(16,Ie,21,17,"tr",28),t.qZA()()),2&n){const e=t.oxw();t.xp6(16),t.Q6J("ngForOf",e.prescriptions)("ngForTrackBy",e.identify)}}function Fe(n,s){if(1&n&&t._UZ(0,"fa-icon",44),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSpinner)}}function De(n,s){if(1&n&&t._UZ(0,"fa-icon",45),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSave)}}function Oe(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",41),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onSubmit())}),t.YNc(1,Fe,1,1,"fa-icon",42),t.YNc(2,De,1,1,"fa-icon",43),t._uU(3),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("ngIf",e.is_saving),t.xp6(1),t.Q6J("ngIf",!e.is_saving),t.xp6(1),t.hij(" ",e.is_saving?"Saving":"Save"," ")}}function Ye(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",37)(2,"textarea",38),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.consult_notes.plan=i)}),t.qZA()(),t.TgZ(3,"div",39),t.YNc(4,Oe,4,4,"button",40),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("disabled",e.consult_done||!e.allowed_to_edit)("ngModel",e.consult_notes.plan),t.xp6(2),t.Q6J("ngIf",!e.consult_done&&e.allowed_to_edit)}}function Se(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-drug-list",46),t.NdJ("openAddForm",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.openAddForm(i))})("toggleList",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleList())}),t.qZA()}}function Pe(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-drug-form",47),t.NdJ("toggleForm",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleForm())}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("selected_drug",e.selected_drug)("consult_details",e.consult_details)("drug_uom",e.drug_uom)("drug_regimen",e.drug_regimen)("drug_purpose",e.drug_purpose)("drug_frequency",e.drug_frequency)("drug_preparation",e.drug_preparation)("drug_route",e.drug_route)}}function He(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-epres",48),t.NdJ("toggleModal",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleModal())}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("prescriptions",e.prescriptions)("consult_details",e.consult_details)}}function Ee(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-delete-item",49),t.NdJ("toggleModal",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.toggleModal(i))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("delete_id",e.delete_id)("delete_desc",e.delete_desc)("url",e.url)}}const E=function(n){return{"rounded-b":n}};let je=(()=>{var n;class s{navigateTo(o){this.router.navigate(["/patient/"+o,{id:this.consult_details.patient.id,consult_id:this.consult_details.id}])}openDeleteForm(o){this.selected_drug=o,this.toggleDeleteForm()}onSubmit(){this.is_saving=!0,this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,plan:this.consult_notes.plan}).subscribe({next:i=>{this.is_saving=!1,this.showToastr()},error:i=>console.log(i)})}showToastr(){this.toastr.success("Successfully recorded!","Treatment plan")}openEditForm(o){this.selected_drug=o}openAddForm(o){this.selected_drug=o,this.toggleForm()}openDeleteModal(o){this.delete_id=o.id,this.modal["delete-item"]=!this.modal["delete-item"]}toggleDeleteForm(){this.show_delete_form=!this.show_delete_form,!1===this.show_delete_form&&this.loadPrescriptions()}toggleForm(){this.drug_uom&&this.drug_uom&&this.drug_purpose&&this.drug_frequency&&this.drug_preparation?this.show_form=!this.show_form:this.loadLibraries(),!1===this.show_form&&this.loadPrescriptions()}ngOnChanges(o){this.show_content=this.toggle_content,this.show_content_tx=this.toggle_content,!1===this.consult_details.consult_done&&(this.show_actions=!0),this.consult_details&&(this.consult_notes=this.consult_details.consult_notes,this.consult_done=this.consult_details.consult_done)}loadLibraries(){this.libraries.forEach((o,i)=>{this.http.get("libraries/"+o.location).subscribe({next:a=>{this[o.var_name]=a.data,this.libraries.length-1===i&&(this.show_form=!0)},error:a=>console.log(a)})})}toggleModal(o,i){o?(i&&(this.delete_id=i.id),this.modal[o]=!this.modal[o],this.loadPrescriptions()):this.show_epress=!this.show_epress}toggleList(){this.show_list=!this.show_list}identify(o,i){return i.id}loadPrescriptions(){this.http.get("medicine/prescriptions",{params:{sort:"-prescription_date",consult_id:this.consult_details.id}}).subscribe({next:i=>{i.data.length>0&&(this.prescriptions=i.data)},error:i=>console.log(i)})}constructor(o,i,a){this.http=o,this.toastr=i,this.router=a,this.show_content=!0,this.show_list=!1,this.show_form=!1,this.show_delete_form=!1,this.show_actions=!1,this.show_content_tx=!1,this.is_saving=!1,this.consult_done=!1,this.faChevronCircleUp=_._qI,this.faChevronCircleDown=_.yh$,this.faAdd=_.XSk,this.faSave=_.r6l,this.faSpinner=_.LM3,this.faEdit=_.Xcf,this.faTrash=_.$aW,this.faPrescriptionBottleMedical=_.v0s,this.faReceipt=_.dLy,this.faTrashCan=_.Vui,this.consult_notes={plan:null},this.modal=[],this.delete_desc="Prescription",this.url="medicine/prescriptions/",this.libraries=[{var_name:"drug_uom",location:"unit-of-measurements"},{var_name:"drug_regimen",location:"dose-regimens"},{var_name:"drug_purpose",location:"purposes"},{var_name:"drug_frequency",location:"duration-frequencies"},{var_name:"drug_preparation",location:"preparations"},{var_name:"drug_route",location:"medicine-route"}],this.show_epress=!1}ngOnInit(){this.loadPrescriptions()}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(g.O),t.Y36(h._W),t.Y36(b.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-prescription"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",with_credentials:"with_credentials",allowed_to_edit:"allowed_to_edit"},features:[t.TTD],decls:23,vars:16,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","flex","justify-between"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-amber-500","flex","justify-between",3,"ngClass"],["type","button","class","ml-3 text-sm bg-white text-green-500 px-3 rounded-full",3,"click",4,"ngIf"],["type","button","class","text-sm bg-white text-amber-500 px-3 rounded-full",3,"click",4,"ngIf"],["type","button","class","ml-3 text-sm bg-white text-blue-500 px-3 rounded-full",3,"click",4,"ngIf"],["class","w-full table-auto p-5",4,"ngIf"],[1,"rounded-md","border","border-solid","border-gray-300","mt-5"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[3,"openAddForm","toggleList",4,"ngIf"],[3,"selected_drug","consult_details","drug_uom","drug_regimen","drug_purpose","drug_frequency","drug_preparation","drug_route","toggleForm",4,"ngIf"],[3,"prescriptions","consult_details","toggleModal",4,"ngIf"],[3,"delete_id","delete_desc","url","toggleModal",4,"ngIf"],["type","button",1,"ml-3","text-sm","bg-white","text-green-500","px-3","rounded-full",3,"click"],[1,"pr-1",3,"icon"],["type","button",1,"text-sm","bg-white","text-amber-500","px-3","rounded-full",3,"click"],["type","button",1,"ml-3","text-sm","bg-white","text-blue-500","px-3","rounded-full",3,"click"],[1,"w-full","table-auto","p-5"],[1,"align-top"],["scope","col",1,"text-center","py-3","px-3","w-3/12"],["scope","col",1,"text-center","py-3","px-3","w-1/12"],["scope","col",1,"text-center","py-3","px-3","w-2/12"],["class","bg-white border-b last:border-0 text-sm align-top",4,"ngFor","ngForOf","ngForTrackBy"],[1,"bg-white","border-b","last:border-0","text-sm","align-top"],[1,"py-4","px-3"],["scope","row",1,"py-4","px-3","font-medium","text-gray-900"],[1,"text-sm","text-center","mb-5","align-middle"],[1,"mr-3",3,"click"],[1,"text-amber-500",3,"icon"],[3,"click"],[1,"text-rose-500",3,"icon"],[1,"grid","grid-cols-1","px-4","pb-4","mt-4"],["rows","3","id","plan","placeholder","Treatment plan",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"disabled","ngModel","ngModelChange"],[1,"flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"],[3,"openAddForm","toggleList"],[3,"selected_drug","consult_details","drug_uom","drug_regimen","drug_purpose","drug_frequency","drug_preparation","drug_route","toggleForm"],[3,"prescriptions","consult_details","toggleModal"],[3,"delete_id","delete_desc","url","toggleModal"]],template:function(o,i){1&o&&(t._UZ(0,"hr",0),t.TgZ(1,"div",1)(2,"div",2),t._uU(3," Prescription "),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"span",5),t._uU(7," Prescriptions "),t.TgZ(8,"div"),t.YNc(9,Je,3,1,"button",6),t.YNc(10,Me,3,1,"button",7),t.YNc(11,Ne,3,1,"button",8),t.qZA()(),t.YNc(12,Qe,17,2,"table",9),t.qZA(),t.TgZ(13,"div",10)(14,"span",11),t._uU(15," Treatment Plan "),t.TgZ(16,"button",12),t.NdJ("click",function(){return i.show_content_tx=!i.show_content_tx}),t._UZ(17,"fa-icon",13),t.qZA()(),t.YNc(18,Ye,5,3,"div",14),t.qZA()()(),t.YNc(19,Se,1,0,"app-drug-list",15),t.YNc(20,Pe,1,8,"app-drug-form",16),t.YNc(21,He,1,2,"app-epres",17),t.YNc(22,Ee,1,3,"app-delete-item",18)),2&o&&(t.xp6(6),t.Q6J("ngClass",t.VKq(12,E,!i.show_content)),t.xp6(3),t.Q6J("ngIf",(null==i.consult_details?null:i.consult_details.is_konsulta)&&i.with_credentials&&i.prescriptions),t.xp6(1),t.Q6J("ngIf",i.prescriptions),t.xp6(1),t.Q6J("ngIf",i.show_actions),t.xp6(1),t.Q6J("ngIf",i.show_content),t.xp6(2),t.Q6J("ngClass",t.VKq(14,E,!i.show_content_tx)),t.xp6(3),t.Q6J("icon",i.show_content_tx?i.faChevronCircleUp:i.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",i.show_content_tx),t.xp6(1),t.Q6J("ngIf",i.show_list),t.xp6(1),t.Q6J("ngIf",i.show_form),t.xp6(1),t.Q6J("ngIf",i.show_epress),t.xp6(1),t.Q6J("ngIf",i.modal["delete-item"]))},dependencies:[d.mk,d.sg,d.O5,J,m.BN,l.Fj,l.JJ,l.On,H.N,$t,Ue,d.uU]}),s})();var Ke=p(9315);function Ge(n,s){if(1&n&&(t.TgZ(0,"option",28),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.facility.code),t.xp6(1),t.AsE("",e.last_name,", ",e.first_name,"")}}function Le(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"input",29),t.NdJ("ngModelChange",function(i){const r=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.patient_complaints[r.complaint_id]=i)}),t.qZA(),t.TgZ(2,"label",30),t._uU(3),t.qZA()()}if(2&n){const e=s.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngModel",o.patient_complaints[e.complaint_id]),t.xp6(2),t.Oqu(e.complaint_desc)}}function $e(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"input",29),t.NdJ("ngModelChange",function(i){const r=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.patient_behavior[r.id]=i)}),t.qZA(),t.TgZ(2,"label",30),t._uU(3),t.qZA()()}if(2&n){const e=s.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngModel",o.patient_behavior[e.id]),t.xp6(2),t.Oqu(e.desc)}}function Ve(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"input",29),t.NdJ("ngModelChange",function(i){const r=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.patient_neglect[r.id]=i)}),t.qZA(),t.TgZ(2,"label",30),t._uU(3),t.qZA()()}if(2&n){const e=s.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngModel",o.patient_neglect[e.id]),t.xp6(2),t.Oqu(e.desc)}}function Re(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"label",15),t._uU(4,"Date"),t.qZA(),t.TgZ(5,"input",16),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.patient_gbv.gbv_date=i)}),t.qZA()(),t.TgZ(6,"div",14)(7,"label",17),t._uU(8,"Refer to"),t.qZA(),t.TgZ(9,"select",18),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.patient_gbv.referral_facility_code=i)}),t.YNc(10,Ge,2,3,"option",19),t.qZA()(),t.TgZ(11,"div",20),t._uU(12," Complaints "),t.qZA(),t.TgZ(13,"div",21),t.YNc(14,Le,4,2,"div",22),t.qZA(),t.TgZ(15,"div",23)(16,"label",24),t._uU(17,"Remarks"),t.qZA(),t.TgZ(18,"input",25),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.patient_gbv.gbv_complaint_remarks=i)}),t.qZA()(),t.TgZ(19,"div",20),t._uU(20," Behavioral Changes "),t.qZA(),t.TgZ(21,"div",21),t.YNc(22,$e,4,2,"div",22),t.qZA(),t.TgZ(23,"div",23)(24,"label",24),t._uU(25,"Remarks"),t.qZA(),t.TgZ(26,"input",26),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.patient_gbv.gbv_behavioral_remarks=i)}),t.qZA()(),t.TgZ(27,"div",20),t._uU(28," Neglects "),t.qZA(),t.TgZ(29,"div",21),t.YNc(30,Ve,4,2,"div",22),t.qZA(),t.TgZ(31,"div",23)(32,"label",24),t._uU(33,"Remarks"),t.qZA(),t.TgZ(34,"input",27),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.patient_gbv.gbv_neglect_remarks=i)}),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(5),t.Q6J("ngModel",e.patient_gbv.gbv_date),t.xp6(4),t.Q6J("ngModel",e.patient_gbv.referral_facility_code),t.xp6(1),t.Q6J("ngForOf",e.gbv_mdts),t.xp6(4),t.Q6J("ngForOf",e.complaints),t.xp6(4),t.Q6J("ngModel",e.patient_gbv.gbv_complaint_remarks),t.xp6(4),t.Q6J("ngForOf",e.behavioral_changes),t.xp6(4),t.Q6J("ngModel",e.patient_gbv.gbv_behavioral_remarks),t.xp6(4),t.Q6J("ngForOf",e.neglects),t.xp6(4),t.Q6J("ngModel",e.patient_gbv.gbv_neglect_remarks)}}function Be(n,s){if(1&n&&(t.TgZ(0,"div",31)(1,"div",32),t._UZ(2,"fa-icon",33),t.qZA(),t.TgZ(3,"div",34),t._uU(4," Loading... "),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("icon",e.faCircleNotch)}}let ze=(()=>{var n;class s{onSubmit(){let o=[],i=[],a=[];this.patient_gbv.patient_id=this.patient_id,this.patient_gbv.referral_date=this.patient_gbv.gbv_date,Object.entries(this.patient_complaints).forEach(([r,c],u)=>{!0===c&&o.push({complaint_id:r})}),Object.entries(this.patient_behavior).forEach(([r,c],u)=>{!0===c&&i.push({behavioral_id:r})}),Object.entries(this.patient_neglect).forEach(([r,c],u)=>{!0===c&&a.push({neglect_id:r})}),this.patient_gbv.complaint=o,this.patient_gbv.behavior=i,this.patient_gbv.neglect=a,console.log(this.patient_gbv),this.http.post("gender-based-violence/patient-gbv",this.patient_gbv).subscribe({next:r=>{console.log(r),this.toastr.success("Successfully recorded!","GBV Referral"),this.closeModal()},error:r=>console.log(r)})}loadLibraries(){const o=this.http.get("libraries/gbv-neglect"),i=this.http.get("libraries/gbv-behavioral"),a=this.http.get("libraries/complaint",{params:{query_type:"gbv_complaints"}}),r=this.http.get("gender-based-violence/patient-gbv-user",{params:{per_page:"all"}});(0,Ke.D)([o,i,a,r]).subscribe({next:([c,u,gi,mi])=>{this.neglects=c.data,this.behavioral_changes=u.data,this.complaints=gi.data,this.gbv_mdts=mi.data,this.loadDefaultComplaint(),this.show_form=!0},error:c=>console.log(c)})}loadDefaultComplaint(){this.gbv_complaints&&Object.entries(this.gbv_complaints).forEach(([o,i],a)=>{this.patient_complaints[i]=!0})}closeModal(){this.toggleModal.emit("gbv_referral")}constructor(o,i){this.http=o,this.toastr=i,this.getPatientTbHistory=new t.vpe,this.toggleModal=new t.vpe,this.switchPage=new t.vpe,this.faSave=T.r6l,this.faCircleNotch=_.IJ7,this.is_saving=!1,this.show_form=!1,this.gbv_mdts=[],this.patient_complaints=[],this.patient_behavior=[],this.patient_neglect=[],this.patient_gbv={patient_id:"",gbv_date:"",gbv_complaint_remarks:"",gbv_behavioral_remarks:"",gbv_neglect_remarks:"",referral_facility_code:"",referral_reason:"For GBV Assessment",service_remarks:"",referral_remarks:"",referral_date:"",complaint:[],behavior:[],neglect:[]}}ngOnInit(){this.loadLibraries()}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(g.O),t.Y36(h._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-gbv-referral"]],inputs:{patient_id:"patient_id",max_date:"max_date",gbv_complaints:"gbv_complaints"},outputs:{getPatientTbHistory:"getPatientTbHistory",toggleModal:"toggleModal",switchPage:"switchPage"},decls:15,vars:3,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-sky-500"],[1,"text-sm","font-bold","text-white"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],["class","text-left text-gray-500 m-5",4,"ngIf"],["class","grid grid-cols-1 mt-20",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-gray-400",3,"click"],["type","submit",1,"btn-save","px-10","disabled:bg-gray-300",3,"disabled","click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"text-left","text-gray-500","m-5"],[1,"grid","grid-cols-4","gap-4"],[1,"col-span-2"],["for","gbv_date"],["type","date","name","gbv_date","id","gbv_date",1,"input",3,"ngModel","ngModelChange"],["for","case_number"],[1,"input",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-span-4"],[1,"col-span-4","grid","grid-cols-2","gap-4"],[4,"ngFor","ngForOf"],[1,"col-span-4","flex"],[1,"mt-2","pr-3"],["type","text","name","gbv_complaint_remarks","id","gbv_complaint_remarks",1,"input",3,"ngModel","ngModelChange"],["type","text","name","gbv_behavioral_remarks","id","gbv_behavioral_remarks",1,"input",3,"ngModel","ngModelChange"],["type","text","name","gbv_neglect_remarks","id","gbv_neglect_remarks",1,"input",3,"ngModel","ngModelChange"],[3,"value"],["type","checkbox",1,"input-checkbox",3,"ngModel","ngModelChange"],[1,"pl-3","py-0.5"],[1,"grid","grid-cols-1","mt-20"],[1,"flex","justify-center","text-blue-500"],["spin","true",3,"icon"],[1,"flex","justify-center"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5," Referral "),t.qZA()(),t.TgZ(6,"div",5),t.YNc(7,Re,35,9,"div",6),t.YNc(8,Be,5,1,"div",7),t.qZA(),t.TgZ(9,"div",8)(10,"button",9),t.NdJ("click",function(){return i.closeModal()}),t._uU(11,"Close"),t.qZA(),t.TgZ(12,"button",10),t.NdJ("click",function(){return i.onSubmit()}),t._uU(13," Refer "),t.qZA()()()()(),t._UZ(14,"div",11)),2&o&&(t.xp6(7),t.Q6J("ngIf",i.show_form),t.xp6(1),t.Q6J("ngIf",!i.show_form),t.xp6(4),t.Q6J("disabled",i.is_saving||!i.patient_gbv.gbv_date||!i.patient_gbv.referral_facility_code))},dependencies:[d.sg,d.O5,m.BN,l.YN,l.Kr,l.Fj,l.Wl,l.EJ,l.JJ,l.On]}),s})();function We(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"span",22)(1,"span")(2,"fa-icon",23),t.NdJ("click",function(){const i=t.CHM(e);return t.KtG((0,i.clear)(i.item))}),t.qZA()(),t.TgZ(3,"span"),t._uU(4),t.qZA()()}if(2&n){const e=s.item,o=t.oxw(2);t.xp6(2),t.Q6J("icon",o.faXmark),t.xp6(2),t.Oqu(e.complaint_desc)}}function Xe(n,s){if(1&n&&(t.TgZ(0,"div",24)(1,"div")(2,"h5",25),t._uU(3),t.qZA()()()),2&n){const e=s.item,o=s.searchTerm;t.xp6(2),t.Q6J("ngOptionHighlight",o),t.xp6(1),t.Oqu(e.complaint_desc)}}function tn(n,s){if(1&n&&t._UZ(0,"fa-icon",29),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSpinner)}}function en(n,s){if(1&n&&t._UZ(0,"fa-icon",30),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSave)}}function nn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onSubmit())}),t.YNc(1,tn,1,1,"fa-icon",27),t.YNc(2,en,1,1,"fa-icon",28),t._uU(3),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("ngIf",e.is_saving),t.xp6(1),t.Q6J("ngIf",!e.is_saving),t.xp6(1),t.hij(" ",e.is_saving?"Saving":"Save"," ")}}function on(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",9)(2,"button",10),t._UZ(3,"fa-icon",11),t.qZA(),t.TgZ(4,"div",12)(5,"ng-select",13),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.selectedComplaint=i)}),t.YNc(6,We,5,2,"ng-template",14),t.YNc(7,Xe,4,2,"ng-template",15),t.qZA()()(),t.TgZ(8,"div",16)(9,"label",17),t._uU(10,"Complaint notes"),t.qZA(),t.TgZ(11,"textarea",18),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.consult_notes.complaint=i)}),t.qZA()(),t.TgZ(12,"div",16)(13,"label",17),t._uU(14,"History notes"),t.qZA(),t.TgZ(15,"textarea",19),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.consult_notes.history=i)}),t.qZA()(),t.TgZ(16,"div",20),t.YNc(17,nn,4,4,"button",21),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("icon",e.faPlusSquare),t.xp6(2),t.Q6J("disabled",e.consult_done||!e.allowed_to_edit)("items",e.complaints)("multiple",!0)("closeOnSelect",!1)("hideSelected",!0)("clearable",!1)("ngModel",e.selectedComplaint),t.xp6(6),t.Q6J("disabled",e.consult_done||!e.allowed_to_edit)("ngModel",e.consult_notes.complaint),t.xp6(4),t.Q6J("disabled",e.consult_done||!e.allowed_to_edit)("ngModel",e.consult_notes.history),t.xp6(2),t.Q6J("ngIf",!e.consult_done&&e.allowed_to_edit)}}function sn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-gbv-referral",31),t.NdJ("toggleModal",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.toggleModal(i))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("gbv_complaints",e.gbv_complaints)("patient_id",e.consult_details.patient.id)}}const an=function(n){return{"rounded-b":n}};let ln=(()=>{var n;class s{onSubmit(){this.is_saving=!0,this.selectedComplaint&&Object.keys(this.selectedComplaint).length>0?this.http.post("consultation/complaint",{notes_id:this.consult_details.consult_notes.id,consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,complaints:this.selectedComplaint}).subscribe({next:i=>{this.saveNotes()},error:i=>console.log(i)}):this.saveNotes()}saveNotes(){this.consult_notes.complaint||this.consult_notes.history?this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,complaint:this.consult_notes.complaint,history:this.consult_notes.history}).subscribe({next:i=>{this.is_saving=!1,this.showToastr(),this.loadConsult.emit()},error:i=>console.log(i)}):(this.is_saving=!1,this.showToastr(),this.loadConsult.emit())}checkGbvCoplaint(){}showToastr(){this.toastr.success("Successfully updated!","Complaint")}loadLib(){this.http.get("libraries/complaint").subscribe(o=>{this.complaints=o.data,this.show_form=!0})}loadSelected(){this.gbv_complaints=[],this.show_gbv_form=!1,this.possible_gbv_case=!1,this.have_open_gbv=!1;let o=[];this.consult_details.consult_notes&&this.consult_details.consult_notes.complaints&&Object.entries(this.consult_details.consult_notes.complaints).forEach(([i,a],r)=>{let c=a;o.push(c.complaint_id),1===c.lib_complaints.gbv_library_status&&(this.possible_gbv_case=!0,this.gbv_complaints.push(c.complaint_id)),Object.keys(this.consult_details.consult_notes.complaints).length-1===r&&this.possible_gbv_case&&this.getPatientGbv()}),this.selectedComplaint=o}getPatientGbv(){this.http.get("gender-based-violence/patient-gbv",{params:{patient_id:this.consult_details.patient.id}}).subscribe({next:i=>{i.data.length>0&&!i.data[0].outcome_date&&(this.have_open_gbv=!0),this.show_gbv_form=!0},error:i=>console.log(i)})}ngOnChanges(o){this.show_content=this.toggle_content,this.consult_details&&(this.complaints&&this.loadSelected(),this.consult_notes=this.consult_details.consult_notes,this.consult_done=this.consult_details.consult_done)}toggleModal(o){this.modals[o]=!this.modals[o],"gbv_referral"===o&&this.getPatientGbv()}constructor(o,i){this.http=o,this.toastr=i,this.loadConsult=new t.vpe,this.faPlusSquare=_.CPW,this.faSave=_.r6l,this.faChevronCircleUp=_._qI,this.faChevronCircleDown=_.yh$,this.faSpinner=_.LM3,this.faXmark=_.g82,this.selectedComplaint=[],this.consult_notes={complaint:null,history:null},this.modals=[],this.show_content=!0,this.is_saving=!1,this.consult_done=!1,this.show_form=!1,this.possible_gbv_case=!1,this.enable_edit=!1,this.show_gbv_form=!1,this.have_open_gbv=!1}ngOnInit(){this.loadLib()}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(g.O),t.Y36(h._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-complaint-history"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",have_complaint:"have_complaint",allowed_to_edit:"allowed_to_edit"},outputs:{loadConsult:"loadConsult"},features:[t.TTD],decls:11,vars:6,consts:[[1,"grid","grid-cols-10","mb-5"],[1,"col-span-2","pt-2","pr-5","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[3,"gbv_complaints","patient_id","toggleModal",4,"ngIf"],[1,"flex","mb-2","p-4"],["type","submit",1,"inline-flex","p-1","items-center","text-gray-50","bg-sky-400","rounded-l-md","border","border-gray-300"],[1,"text-white","fa-xl",3,"icon"],[1,"chips-container"],["placeholder","search","bindLabel","complaint_desc","bindValue","complaint_id","placeholder","Select Complaint",1,"select-chips",3,"disabled","items","multiple","closeOnSelect","hideSelected","clearable","ngModel","ngModelChange"],["ng-label-tmp",""],["ng-option-tmp",""],[1,"grid","grid-cols-1","px-4","pb-4"],["for","complaint_notes",1,"font-semibold","pl-1"],["rows","3","id","complaint_notes","placeholder","Complaint Notes",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"disabled","ngModel","ngModelChange"],["rows","3","id","history_notes","placeholder","History of Current Illness",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"disabled","ngModel","ngModelChange"],[1,"flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[1,"px-2","py-1","rounded-md","text-sm"],[1,"text-xs","mr-1","hover:text-slate-100","hover:cursor-pointer",3,"icon","click"],[1,"grid","grid-flow-col","auto-cols-max"],[3,"ngOptionHighlight"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"],[3,"gbv_complaints","patient_id","toggleModal"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2," Chief Complaint and History of Current Illness "),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"span",4),t._uU(6," Complaints "),t.TgZ(7,"button",5),t.NdJ("click",function(){return i.show_content=!i.show_content}),t._UZ(8,"fa-icon",6),t.qZA()(),t.YNc(9,on,18,13,"div",7),t.qZA()()(),t.YNc(10,sn,1,2,"app-gbv-referral",8)),2&o&&(t.xp6(5),t.Q6J("ngClass",t.VKq(4,an,!i.show_content)),t.xp6(3),t.Q6J("icon",i.show_content?i.faChevronCircleUp:i.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",i.show_content&&i.show_form),t.xp6(1),t.Q6J("ngIf",i.modals.gbv_referral))},dependencies:[d.mk,d.O5,m.BN,Z.w9,Z.ir,Z.mR,l.Fj,l.JJ,l.On,ze]}),s})();function rn(n,s){if(1&n&&(t.TgZ(0,"ul",28)(1,"li"),t._uU(2),t.qZA()()),2&n){const e=s.$implicit;t.xp6(2),t.Oqu(null==e.lib_complaints?null:e.lib_complaints.complaint_desc)}}function _n(n,s){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.hij(" ",e.diagnosis.class_name," ")}}function dn(n,s){if(1&n&&(t.TgZ(0,"div",29)(1,"span",30),t._uU(2,"remarks:"),t.qZA(),t._uU(3),t.qZA()),2&n){const e=t.oxw().$implicit;let o;t.xp6(3),t.hij(" ",null!==(o=e.consult_notes.idx_remarks)&&void 0!==o?o:"-"," ")}}function cn(n,s){if(1&n&&(t.TgZ(0,"li")(1,"span",31),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&n){const e=s.$implicit;t.xp6(2),t.hij("",e.lib_icd10.icd10_code,":"),t.xp6(1),t.hij(" ",e.lib_icd10.icd10_desc," ")}}function pn(n,s){if(1&n&&(t.TgZ(0,"div",29)(1,"span",30),t._uU(2,"remarks:"),t.qZA(),t._uU(3),t.qZA()),2&n){const e=t.oxw().$implicit;let o;t.xp6(3),t.hij(" ",null!==(o=e.consult_notes.fdx_remarks)&&void 0!==o?o:"-"," ")}}function un(n,s){if(1&n&&(t.TgZ(0,"tr",13)(1,"td",14)(2,"div",15)(3,"span",16),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"span",17),t._uU(7),t.ALo(8,"date"),t.qZA()()(),t.TgZ(9,"td",18)(10,"div",15)(11,"span",19)(12,"span",20),t._uU(13,"Complaint notes:"),t.qZA(),t._uU(14),t.qZA(),t.YNc(15,rn,3,1,"ul",21),t.TgZ(16,"span",22)(17,"span",20),t._uU(18,"History notes:"),t.qZA(),t._uU(19),t.qZA()(),t.TgZ(20,"div",23)(21,"span",20),t._uU(22,"Initial Diagnosis:"),t.qZA(),t.TgZ(23,"ul",24),t.YNc(24,_n,2,1,"li",25),t.qZA(),t.YNc(25,dn,4,1,"div",26),t.qZA(),t.TgZ(26,"div",27)(27,"span",20),t._uU(28,"Final Diagnosis:"),t.qZA(),t.TgZ(29,"ul",24),t.YNc(30,cn,4,2,"li",25),t.qZA(),t.YNc(31,pn,4,1,"div",26),t.qZA(),t.TgZ(32,"div",27)(33,"span",19)(34,"span",20),t._uU(35,"Treatment Plan:"),t.qZA(),t._uU(36),t.qZA()()()()),2&n){const e=s.$implicit;let o,i,a;t.xp6(4),t.Oqu(t.Dn7(5,10,e.consult_date,"MM/dd/yyyy","Asia/Manila")),t.xp6(3),t.Oqu(t.xi3(8,14,e.consult_date,"hh:mm:ss a")),t.xp6(7),t.hij(" ",null!==(o=e.consult_notes.complaint)&&void 0!==o?o:"-"," "),t.xp6(1),t.Q6J("ngForOf",e.consult_notes.complaints),t.xp6(4),t.hij(" ",null!==(i=e.consult_notes.history)&&void 0!==i?i:"-"," "),t.xp6(5),t.Q6J("ngForOf",e.consult_notes.initialdx),t.xp6(1),t.Q6J("ngIf",e.consult_notes.idx_remarks),t.xp6(5),t.Q6J("ngForOf",e.consult_notes.finaldx),t.xp6(1),t.Q6J("ngIf",e.consult_notes.fdx_remarks),t.xp6(5),t.hij(" ",null!==(a=e.consult_notes.plan)&&void 0!==a?a:"-"," ")}}function gn(n,s){if(1&n&&(t.TgZ(0,"table",10)(1,"thead")(2,"tr",11)(3,"th"),t._uU(4,"Date"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Details"),t.qZA()()(),t.TgZ(7,"tbody"),t.YNc(8,un,37,17,"tr",12),t.qZA()()),2&n){const e=t.oxw();t.xp6(8),t.Q6J("ngForOf",e.visit_list)}}function mn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",32)(2,"div",33)(3,"div")(4,"p",34),t._uU(5," Showing "),t.TgZ(6,"span",35),t._uU(7),t.qZA(),t._uU(8," to "),t.TgZ(9,"span",35),t._uU(10),t.qZA(),t._uU(11," of "),t.TgZ(12,"span",35),t._uU(13),t.qZA(),t._uU(14," results "),t.qZA()(),t.TgZ(15,"div")(16,"nav",36)(17,"button",37),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.loadPreviousVisit(1))}),t._UZ(18,"fa-icon",38),t.qZA(),t.TgZ(19,"button",39),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.loadPreviousVisit(i.current_page-1))}),t._UZ(20,"fa-icon",38),t._uU(21,"Previous "),t.qZA(),t.TgZ(22,"button",39),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.loadPreviousVisit(i.current_page+1))}),t._uU(23," Next"),t._UZ(24,"fa-icon",40),t.qZA(),t.TgZ(25,"button",41),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.loadPreviousVisit(i.last_page))}),t._UZ(26,"fa-icon",40),t.qZA()()()()()()}if(2&n){const e=t.oxw();t.xp6(7),t.Oqu(e.from),t.xp6(3),t.Oqu(e.to-1),t.xp6(3),t.Oqu(e.total-1),t.xp6(4),t.Q6J("disabled",1===e.current_page),t.xp6(1),t.Q6J("icon",e.faAnglesLeft),t.xp6(1),t.Q6J("disabled",1===e.current_page),t.xp6(1),t.Q6J("icon",e.faChevronLeft),t.xp6(2),t.Q6J("disabled",e.current_page===e.last_page),t.xp6(2),t.Q6J("icon",e.faChevronRight),t.xp6(1),t.Q6J("disabled",e.current_page===e.last_page),t.xp6(1),t.Q6J("icon",e.faAnglesRight)}}const hn=function(n){return{"rounded-b":n}};let fn=(()=>{var n;class s{loadPreviousVisit(o){this.http.get("consultation/records",{params:{patient_id:this.patient_id,per_page:this.per_page,sort:"-consult_date",pt_group:"cn",page:o}}).subscribe({next:a=>{this.visit_list=a.data,console.log(a.data),this.current_page=a.meta.current_page,this.last_page=a.meta.last_page,this.from=a.meta.from,this.to=a.meta.to,this.total=a.meta.total},error:a=>console.log(a)})}ngOnChanges(o){this.show_content=this.toggle_content}constructor(o,i){this.route=o,this.http=i,this.show_content=!1,this.faChevronCircleUp=_._qI,this.faChevronCircleDown=_.yh$,this.faChevronLeft=_.A35,this.faChevronRight=_._tD,this.faAnglesLeft=_._Wx,this.faAnglesRight=_.ccb,this.per_page=5}ngOnInit(){this.patient_id=this.route.snapshot.paramMap.get("id"),this.consult_id=this.route.snapshot.paramMap.get("consult_id"),this.loadPreviousVisit(1)}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(b.gz),t.Y36(g.O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-consult-history"]],inputs:{toggle_content:"toggle_content",allowed_to_edit:"allowed_to_edit"},features:[t.TTD],decls:12,vars:6,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-green-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],["class","w-full table-auto",4,"ngIf"],[4,"ngIf"],[1,"w-full","table-auto"],[1,"border-b","border-solid","border-gray-200"],["class","text-left mt-3 align-top border-t border-slate-200 text-sm",4,"ngFor","ngForOf"],[1,"text-left","mt-3","align-top","border-t","border-slate-200","text-sm"],[1,"p-3","w-2/12"],[1,"grid","grid-cols-1"],[1,"font-semibold","w-full"],[1,"text-sm","w-full"],[1,"p-3","w-7/12"],[1,"w-full","mb-3"],[1,"font-semibold"],["class","list-disc last:mb-3 ml-10",4,"ngFor","ngForOf"],[1,"w-full","my-2","py-2"],[1,"grid","grid-cols-1","text-left"],[1,"list-disc","ml-10"],[4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],[1,"grid","grid-cols-1","text-left","mt-2","pt-2"],[1,"list-disc","last:mb-3","ml-10"],[1,"mt-2"],[1,"text-sm","italic"],[1,"font-semibold","text-sm"],[1,"bg-white","px-4","py-4","flex","items-center","justify-between","border-t","border-gray-200","sm:px-6"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"text-sm","text-gray-700"],[1,"font-medium"],["aria-label","Pagination",1,"relative","z-0","inline-flex","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"disabled","click"],[1,"block","h-15","w-15","text-gray-500","pr-1",3,"icon"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","bg-white","text-sm","font-medium","text-gray-700","hover:bg-gray-50",3,"disabled","click"],[1,"h-5","w-5","text-gray-500",3,"icon"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"disabled","click"]],template:function(o,i){1&o&&(t._UZ(0,"hr",0),t.TgZ(1,"div",1)(2,"div",2),t._uU(3," Diagnosis History "),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"span",5),t._uU(7," Previous History "),t.TgZ(8,"button",6),t.NdJ("click",function(){return i.show_content=!i.show_content}),t._UZ(9,"fa-icon",7),t.qZA()(),t.YNc(10,gn,9,1,"table",8),t.YNc(11,mn,27,11,"div",9),t.qZA()()()),2&o&&(t.xp6(6),t.Q6J("ngClass",t.VKq(4,hn,!i.show_content)),t.xp6(3),t.Q6J("icon",i.show_content?i.faChevronCircleUp:i.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",i.show_content),t.xp6(1),t.Q6J("ngIf",(null==i.visit_list?null:i.visit_list.length)>=6))},dependencies:[d.mk,d.sg,d.O5,m.BN,d.uU]}),s})(),xn=(()=>{var n;class s{constructor(){}ngOnInit(){}}return(n=s).\u0275fac=function(o){return new(o||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-consult-summary"]],decls:34,vars:0,consts:[[1,"flex","justify-center"],[1,"w-4/6"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between"],[1,"grid","grid-cols-5","m-5"],[1,"col-span-1","font-semibold"],[1,"col-span-4","ml-5"],[1,"col-span-1","font-semibold","mt-5"],[1,"col-span-4","mt-5","ml-5"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),t._uU(4," Consultation Summary (Date here) "),t.qZA(),t.TgZ(5,"div",4)(6,"div",5),t._uU(7," Chief Complaint: "),t.qZA(),t.TgZ(8,"div",6),t._uU(9," test "),t.qZA(),t.TgZ(10,"div",7),t._uU(11," Complaint Notes: "),t.qZA(),t.TgZ(12,"div",8),t._uU(13," test "),t.qZA(),t.TgZ(14,"div",7),t._uU(15," History of Current Illness "),t.qZA(),t.TgZ(16,"div",8),t._uU(17," test "),t.qZA(),t.TgZ(18,"div",7),t._uU(19," Physical Exam "),t.qZA(),t.TgZ(20,"div",8),t._uU(21," test "),t.qZA(),t.TgZ(22,"div",7),t._uU(23," Initial Diagnosis "),t.qZA(),t.TgZ(24,"div",8),t._uU(25," test "),t.qZA(),t.TgZ(26,"div",7),t._uU(27," Final Diagnosis "),t.qZA(),t.TgZ(28,"div",8),t._uU(29," test "),t.qZA(),t.TgZ(30,"div",7),t._uU(31," Prescription "),t.qZA(),t.TgZ(32,"div",8),t._uU(33," test "),t.qZA()()()()())}}),s})();function bn(n,s){if(1&n&&(t.TgZ(0,"option",17),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function vn(n,s){if(1&n&&t._UZ(0,"fa-icon",21),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSpinner)}}function Zn(n,s){if(1&n&&t._UZ(0,"fa-icon",22),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSave)}}function yn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onSubmit())}),t.YNc(1,vn,1,1,"fa-icon",19),t.YNc(2,Zn,1,1,"fa-icon",20),t._uU(3),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("ngIf",e.is_saving),t.xp6(1),t.Q6J("ngIf",!e.is_saving),t.xp6(1),t.hij(" ",e.is_saving?"Saving":"Save"," ")}}function Cn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"label",11),t._uU(4,"General Survey"),t.qZA(),t.TgZ(5,"select",12),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.general_survey_code=i)}),t.YNc(6,bn,2,2,"option",13),t.qZA()(),t.TgZ(7,"div",10)(8,"label",11),t._uU(9,"Remarks"),t.qZA(),t.TgZ(10,"input",14),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.general_survey_remarks=i)}),t.qZA()()(),t.TgZ(11,"div",15),t.YNc(12,yn,4,4,"button",16),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(5),t.Q6J("disabled",e.consult_done||!e.allowed_to_edit)("ngModel",e.general_survey_code),t.xp6(1),t.Q6J("ngForOf",e.survey_list),t.xp6(4),t.Q6J("disabled",e.consult_done||!e.allowed_to_edit)("ngModel",e.general_survey_remarks),t.xp6(2),t.Q6J("ngIf",!e.consult_done&&e.allowed_to_edit)}}const wn=function(n){return{"rounded-b":n}};let Tn=(()=>{var n;class s{onSubmit(){this.general_survey_code?this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,general_survey_code:this.general_survey_code,general_survey_remarks:this.general_survey_remarks}).subscribe({next:i=>{this.toastr.success("Successfully recorded!","General Survey")}}):this.toastr.error("Missing general survey!")}loadLib(){this.http.get("libraries/general-survey").subscribe(o=>{this.survey_list=o.data})}constructor(o,i){this.http=o,this.toastr=i,this.loadConsult=new t.vpe,this.faSave=_.r6l,this.faChevronCircleUp=_._qI,this.faChevronCircleDown=_.yh$,this.faSpinner=_.LM3,this.show_content=!0,this.is_saving=!1,this.consult_done=!1}ngOnInit(){this.loadLib()}ngOnChanges(o){this.show_content=this.toggle_content,this.consult_details&&(this.consult_notes=this.consult_details.consult_notes,this.consult_done=this.consult_details.consult_done,this.general_survey_code=this.consult_notes.general_survey_code,this.general_survey_remarks=this.consult_notes.general_survey_remarks)}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(g.O),t.Y36(h._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-general-survey"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",allowed_to_edit:"allowed_to_edit"},outputs:{loadConsult:"loadConsult"},features:[t.TTD],decls:10,vars:5,consts:[[1,"grid","grid-cols-10","my-5","pt-5","border-t","border-slate-200"],[1,"col-span-2","pt-2","pr-5","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-blue-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],["class","grid grid-cols-1",4,"ngIf"],[1,"grid","grid-cols-1"],[1,"col-span-1","flex","mt-3"],[1,"w-1/2","grid","grid-cols-1","px-4","pb-4"],["for","complaint_notes",1,"font-semibold","pl-1"],["rows","3","id","general_survey_code",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["rows","3","id","general_survey_remarks","type","text","placeholder","General Survey Remarks",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"disabled","ngModel","ngModelChange"],[1,"col-span-1","flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[3,"value"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2," General Survey "),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"span",4),t._uU(6," General Survey "),t.TgZ(7,"button",5),t.NdJ("click",function(){return i.show_content=!i.show_content}),t._UZ(8,"fa-icon",6),t.qZA()(),t.YNc(9,Cn,13,6,"div",7),t.qZA()()()),2&o&&(t.xp6(5),t.Q6J("ngClass",t.VKq(3,wn,!i.show_content)),t.xp6(3),t.Q6J("icon",i.show_content?i.faChevronCircleUp:i.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",i.show_content))},dependencies:[d.mk,d.sg,d.O5,m.BN,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On]}),s})();function qn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",13)(2,"input",14),t.NdJ("ngModelChange",function(i){const r=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.management_list.management_code[r.code]=i)}),t.qZA(),t.TgZ(3,"label",15),t._uU(4),t.qZA()(),t.TgZ(5,"div",16)(6,"input",17),t.NdJ("ngModelChange",function(i){const r=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.management_list.remarks[r.code]=i)}),t.qZA()()()}if(2&n){const e=s.$implicit,o=t.oxw(2);t.xp6(2),t.Q2q("id","management_list",e.code,""),t.Q6J("disabled",o.consult_done||!o.allowed_to_edit)("ngModel",o.management_list.management_code[e.code]),t.xp6(1),t.Q2q("for","management_list",e.code,""),t.xp6(1),t.Oqu(e.desc),t.xp6(2),t.Q6J("disabled",!o.management_list.management_code[e.code])("ngModel",o.management_list.remarks[e.code])}}function An(n,s){if(1&n&&t._UZ(0,"fa-icon",21),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSpinner)}}function kn(n,s){if(1&n&&t._UZ(0,"fa-icon",22),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSave)}}function Un(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onSubmit())}),t.YNc(1,An,1,1,"fa-icon",19),t.YNc(2,kn,1,1,"fa-icon",20),t._uU(3),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("ngIf",e.is_saving),t.xp6(1),t.Q6J("ngIf",!e.is_saving),t.xp6(1),t.hij(" ",e.is_saving?"Saving":"Save"," ")}}function Jn(n,s){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,qn,7,7,"div",9),t.TgZ(2,"div",10),t.YNc(3,Un,4,4,"button",11),t.qZA()()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.management_codes),t.xp6(2),t.Q6J("ngIf",!e.consult_done&&e.allowed_to_edit)}}const Mn=function(n){return{"rounded-b":n}};let Nn=(()=>{var n;class s{onSubmit(){this.is_saving=!0;var o=[];Object.entries(this.management_list.management_code).forEach(([a,r],c)=>{!0===r&&o.push({management_code:a,remarks:this.management_list.remarks[a]?this.management_list.remarks[a]:null})}),o.length>0&&this.http.post("consultation/management",{notes_id:this.consult_notes.id,patient_id:this.consult_details.patient.id,management:o}).subscribe({next:a=>{this.is_saving=!1,this.toastr.success("Successfully recorded!","Management record")},error:a=>console.log(a)})}loadLibraries(){this.http.get("libraries/management").subscribe({next:o=>{this.management_codes=o.data},error:o=>console.log(o)})}patchData(){this.consult_management&&Object.entries(this.consult_management).forEach(([o,i],a)=>{let r=i;this.management_list.management_code[r.management_code]=!0,r.remarks&&(this.management_list.remarks[r.management_code]=r.remarks)})}ngOnChanges(o){this.show_content=this.toggle_content,this.consult_details&&(this.consult_notes=this.consult_details.consult_notes,this.consult_done=this.consult_details.consult_done,this.consult_management=this.consult_details.management,this.patchData())}constructor(o,i){this.http=o,this.toastr=i,this.faChevronCircleUp=_._qI,this.faChevronCircleDown=_.yh$,this.faSpinner=_.LM3,this.faSave=_.r6l,this.show_content=!1,this.is_saving=!1,this.management_list={management_code:[],remarks:[]}}ngOnInit(){this.loadLibraries()}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(g.O),t.Y36(h._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-management"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",allowed_to_edit:"allowed_to_edit"},features:[t.TTD],decls:11,vars:5,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],["class","flex item-start flex-wrap pt-3 px-5 first:mt-5 last:mb-10",4,"ngFor","ngForOf"],[1,"flex","text-right","mt-5"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[1,"flex","item-start","flex-wrap","pt-3","px-5","first:mt-5","last:mb-10"],[1,"w-4/12","flex","mb-2"],["type","checkbox",1,"disabled:bg-gray-300","flex-none","mt-2","mr-2","border","border-gray-300","sm:text-sm","rounded-md","focus:ring-blue-500","focus:border-blue-500","block","p-2.5",3,"disabled","ngModel","ngModelChange"],[1,"flex-1","mt-2","text-gray-800"],[1,"w-8/12"],["type","text",1,"input","disabled:bg-gray-300",3,"disabled","ngModel","ngModelChange"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(o,i){1&o&&(t._UZ(0,"hr",0),t.TgZ(1,"div",1)(2,"div",2),t._uU(3," Management "),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"span",5),t._uU(7," Management/Counselling "),t.TgZ(8,"button",6),t.NdJ("click",function(){return i.show_content=!i.show_content}),t._UZ(9,"fa-icon",7),t.qZA()(),t.YNc(10,Jn,4,2,"div",8),t.qZA()()()),2&o&&(t.xp6(6),t.Q6J("ngClass",t.VKq(3,Mn,!i.show_content)),t.xp6(3),t.Q6J("icon",i.show_content?i.faChevronCircleUp:i.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",i.show_content))},dependencies:[d.mk,d.sg,d.O5,m.BN,l.Fj,l.Wl,l.JJ,l.On]}),s})();function In(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",20)(1,"input",26),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.is_walk_in=i)}),t.qZA(),t.TgZ(2,"label",27),t._uU(3,"Check if patient is Walk-in"),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.is_checking_atc)("ngModel",e.is_walk_in)}}function Qn(n,s){1&n&&(t.TgZ(0,"div",37),t._uU(1," Please check if the ATC is valid before you proceed. Invalid ATC will not be saved. "),t.qZA())}function Fn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",28)(1,"div",29)(2,"label",30),t._uU(3,"Konsulta ATC"),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"input",31),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.pATC=i)}),t.qZA(),t.TgZ(6,"input",32),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.pATC_date=i)}),t.ALo(7,"date"),t.qZA()(),t.TgZ(8,"div",33)(9,"button",34),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.isATCValid())}),t._UZ(10,"fa-icon",35),t._uU(11,"Check ATC "),t.qZA()(),t.YNc(12,Qn,2,0,"div",36),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(5),t.Q6J("ngModel",e.pATC),t.xp6(1),t.s9C("max",t.xi3(7,7,e.date,"yyyy-MM-dd HH:mm:ss")),t.Q6J("ngModel",e.pATC_date),t.xp6(3),t.Q6J("disabled",!e.pATC||!e.pATC_date||e.is_saving||e.is_checking_atc),t.xp6(1),t.Q6J("icon",e.is_checking_atc?e.faSpinner:e.faCheck)("spin",e.is_checking_atc),t.xp6(2),t.Q6J("ngIf",e.pATC&&!e.is_atc_valid)}}const Dn=function(n){return{"bg-red-100 text-red-900":n}};function On(n,s){if(1&n&&(t.TgZ(0,"div",38),t._UZ(1,"fa-icon",39),t._uU(2),t.qZA()),2&n){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(3,Dn,!e.is_atc_valid)),t.xp6(1),t.Q6J("icon",e.faCircleInfo),t.xp6(1),t.hij(" ",e.is_atc_valid?"ATC is valid":"ATC is not valid"," ")}}function Yn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",19)(1,"div",20)(2,"input",21),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.is_konsulta=i)}),t.qZA(),t.TgZ(3,"label",22),t._uU(4,"Check if this visit is for Konsulta"),t.qZA()(),t.YNc(5,In,4,2,"div",23),t.YNc(6,Fn,13,10,"div",24),t.YNc(7,On,3,5,"div",25),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("disabled",e.is_checking_atc)("ngModel",e.is_konsulta),t.xp6(3),t.Q6J("ngIf",e.is_konsulta&&"cn"===e.consult_details.pt_group),t.xp6(1),t.Q6J("ngIf",!e.is_walk_in),t.xp6(1),t.Q6J("ngIf",void 0!==e.is_atc_valid)}}function Sn(n,s){1&n&&(t.TgZ(0,"div",40)(1,"div",41),t._uU(2," ATC checking is not available. Philhealth pin not found. "),t.qZA()())}let Pn=(()=>{var n;class s{isATCValid(){this.is_checking_atc=!0;let o={pPIN:this.philhealth_details.philhealth_id,pATC:this.pATC,pEffectivityDate:(0,d.p6)(this.pATC_date,"MM/dd/yyyy","en","Asia/Manila")};this.http.get("konsulta/check-atc",{params:o}).subscribe({next:i=>{this.is_checking_atc=!1,this.is_atc_valid="YES"===i.return},error:i=>console.log(i)})}getPhilhealth(){this.http.get("patient-philhealth/philhealth",{params:{"filter[patient_id]":this.consult_details.patient.id,per_page:"1",sort:"-enlistment_date"}}).subscribe({next:o=>{console.log(o),this.philhealth_details=o.data[0]},error:o=>console.log(o)})}onSubmit(){this.is_saving=!0;let o={patient_id:this.consult_details.patient.id,user_id:this.consult_details.user_id,consult_date:this.consult_date+" "+this.consult_time,consult_done:this.consult_details.consult_done,pt_group:this.consult_details.pt_group,authorization_transaction_code:this.is_atc_valid?this.is_walk_in?"WALKEDIN":this.pATC||""!==this.pATC?this.pATC:"WALKEDIN":"WALKEDIN",walkedin_status:!this.is_atc_valid,is_konsulta:this.is_konsulta};console.log(o.consult_date),this.http.update("consultation/records/",this.consult_details.id,o).subscribe({next:i=>{this.toastr.success("Successfully updated!","Consultation"),this.closeModal()},error:i=>console.log(i.error.message)})}closeModal(){this.is_saving=!1,this.toggleModal.emit("update_date")}constructor(o,i,a,r){this.router=o,this.http=i,this.toastr=a,this.dateHelper=r,this.toggleModal=new t.vpe,this.faCircleInfo=_.DBf,this.faCheck=_.LEp,this.faSpinner=_.LM3,this.is_saving=!1,this.show_form=!1,this.is_checking_atc=!1,this.selected_module="",this.is_konsulta=!1}ngOnInit(){this.getPhilhealth(),this.max_date=this.dateHelper.dateFormat(new Date),this.consult_date=this.dateHelper.dateFormat(this.consult_details.consult_date),this.consult_time=this.dateHelper.timeFormat(this.consult_details.consult_date),this.is_walk_in="WALKEDIN"===this.consult_details.authorization_transaction_code,this.pATC="WALKEDIN"===this.consult_details.authorization_transaction_code?null:this.consult_details.authorization_transaction_code,this.is_konsulta=this.consult_details.is_konsulta,console.log(this.consult_time)}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(b.F0),t.Y36(g.O),t.Y36(h._W),t.Y36(q.Y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-update-date"]],inputs:{patient_info:"patient_info",patient_age:"patient_age",consult_details:"consult_details"},outputs:{toggleModal:"toggleModal"},decls:24,vars:7,consts:[[1,"overflow-x-hidden","overflow-y-auto","fixed","inset-0","z-50","outline-none","focus:outline-none","justify-center","items-center","flex"],["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"overflow-y-auto","overflow-x-hidden","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"grid","grid-cols-1","item-start","flex-wrap","pb-5"],[1,"flex","flex-col"],[1,"flex","justify-start","pb-3","w-full","ml-10"],["for","consult_date",1,"input-label","pr-5","inline-block","align-middle","pt-3","w-1/4"],["type","date","name","consult_date","id","consult_date","placeholder","mm/dd/yyyy",1,"input","w-52",3,"max","ngModel","ngModelChange"],["type","time","name","consult_time","id","consult_time","placeholder","hh:mm AM/PM",1,"input","w-52",3,"ngModel","ngModelChange"],["class","border border-slate-200 rounded-md mx-10 shadow-md",4,"ngIf"],["class","border border-yellow-400 text-yellow-700 rounded-md mx-10 bg-yellow-100",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"btn-save","px-5","bg-gray-400",3,"disabled","click"],[1,"btn-save",3,"disabled","click"],[1,"opacity-25","fixed","inset-0","z-40","bg-black"],[1,"border","border-slate-200","rounded-md","mx-10","shadow-md"],[1,"flex","justify-start","w-full","ml-5","my-3"],["id","is_konsulta","type","checkbox",1,"border","border-gray-400","rounded-md","h-5","w-5","mr-2","disabled:bg-gray-300",3,"disabled","ngModel","ngModelChange"],["for","is_konsulta"],["class","flex justify-start w-full ml-5 my-3",4,"ngIf"],["class","grid grid-cols-1 w-full mb-3",4,"ngIf"],["class","flex mx-16 my-3 p-2 rounded-md bg-green-100 text-green-900 shadow-sm",3,"ngClass",4,"ngIf"],["id","is_walk_in","type","checkbox",1,"border","border-gray-400","rounded-md","h-5","w-5","mr-2","disabled:bg-gray-300",3,"disabled","ngModel","ngModelChange"],["for","is_walk_in"],[1,"grid","grid-cols-1","w-full","mb-3"],[1,"flex","justify-center","mx-5","mb-3"],["for","pATC",1,"input-label","pr-5","inline-block","align-middle","pt-3","w-1/4"],["type","text","name","pATC","id","pATC","placeholder","Patient ATC",1,"input","w-52",3,"ngModel","ngModelChange"],["type","date","name","pATC_date","id","pATC_date","placeholder","mm/dd/yyyy",1,"input","w-52",3,"max","ngModel","ngModelChange"],[1,"align-middle","text-center"],["type","button",1,"btn-save","w-44",3,"disabled","click"],[1,"py-1","px-2",3,"icon","spin"],["class","flex-1 flex text-xs text-red-500 italic text-center",4,"ngIf"],[1,"flex-1","flex","text-xs","text-red-500","italic","text-center"],[1,"flex","mx-16","my-3","p-2","rounded-md","bg-green-100","text-green-900","shadow-sm",3,"ngClass"],["size","lg",1,"flex-none","my-0","m-2",3,"icon"],[1,"border","border-yellow-400","text-yellow-700","rounded-md","mx-10","bg-yellow-100"],[1,"p-3"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),t._uU(6," Update Consultation Date and ATC "),t.qZA()(),t.TgZ(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"label",10),t._uU(12,"Consultation Date"),t.qZA(),t._UZ(13,"br"),t.TgZ(14,"input",11),t.NdJ("ngModelChange",function(r){return i.consult_date=r}),t.qZA(),t.TgZ(15,"input",12),t.NdJ("ngModelChange",function(r){return i.consult_time=r}),t.qZA()(),t.YNc(16,Yn,8,5,"div",13),t.YNc(17,Sn,3,0,"div",14),t.qZA()()(),t.TgZ(18,"div",15)(19,"button",16),t.NdJ("click",function(){return i.closeModal()}),t._uU(20,"Close"),t.qZA(),t.TgZ(21,"button",17),t.NdJ("click",function(){return i.onSubmit()}),t._uU(22,"Update"),t.qZA()()()()()(),t._UZ(23,"div",18)),2&o&&(t.xp6(14),t.Q6J("max",i.max_date)("ngModel",i.consult_date),t.xp6(1),t.Q6J("ngModel",i.consult_time),t.xp6(1),t.Q6J("ngIf",i.philhealth_details),t.xp6(1),t.Q6J("ngIf",!i.philhealth_details),t.xp6(2),t.Q6J("disabled",i.is_saving),t.xp6(2),t.Q6J("disabled",i.is_saving))},dependencies:[d.mk,d.O5,m.BN,l.Fj,l.Wl,l.JJ,l.On,d.uU]}),s})();function Hn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.openEkas())}),t._UZ(1,"fa-icon",11),t._uU(2," eKAS "),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faFile)}}function En(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleModal("show_end"))}),t._UZ(1,"fa-icon",11),t._uU(2," End Visit "),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faDoorClosed)}}function jn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleModal("show_open"))}),t._uU(1," Open Visit "),t.qZA()}}function Kn(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" | ATC: ",null==e.consult_details?null:e.consult_details.authorization_transaction_code,"")}}function Gn(n,s){if(1&n&&(t.TgZ(0,"option",29),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.lnq("",e.last_name,", ",e.first_name," ",e.middle_name,"")}}const Ln=function(n){return{"bg-orange-500 hover:ring-orange-400":n}};function $n(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",24)(1,"div",25)(2,"select",26),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.referred_to.id=i)}),t.YNc(3,Gn,2,4,"option",27),t.qZA(),t.TgZ(4,"button",28),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.referTo())}),t._uU(5),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("disabled",e.enable_edit)("ngModel",e.referred_to.id),t.xp6(1),t.Q6J("ngForOf",e.physicians),t.xp6(1),t.Q6J("disabled",!e.referred_to.id)("ngClass",t.VKq(6,Ln,e.enable_edit)),t.xp6(1),t.hij(" ",e.enable_edit?"Update":"Refer"," ")}}function Vn(n,s){if(1&n&&t._UZ(0,"app-physical-exam",31),2&n){const e=t.oxw(3);t.Q6J("allowed_to_edit",e.allowed_to_edit)("toggle_content",e.toggle_content)("consult_details",e.consult_details)}}function Rn(n,s){if(1&n&&t._UZ(0,"app-management",31),2&n){const e=t.oxw(3);t.Q6J("allowed_to_edit",e.allowed_to_edit)("toggle_content",e.toggle_content)("consult_details",e.consult_details)}}function Bn(n,s){if(1&n&&t._UZ(0,"app-initial-dx",31),2&n){const e=t.oxw(3);t.Q6J("allowed_to_edit",e.allowed_to_edit)("toggle_content",e.toggle_content)("consult_details",e.consult_details)}}function zn(n,s){if(1&n&&t._UZ(0,"app-final-dx",31),2&n){const e=t.oxw(3);t.Q6J("allowed_to_edit",e.allowed_to_edit)("toggle_content",e.toggle_content)("consult_details",e.consult_details)}}function Wn(n,s){if(1&n&&t._UZ(0,"app-prescription",36),2&n){const e=t.oxw(3);t.Q6J("allowed_to_edit",e.allowed_to_edit)("toggle_content",e.toggle_content)("consult_details",e.consult_details)("with_credentials",e.with_credentials)}}function Xn(n,s){if(1&n&&(t.TgZ(0,"option",29),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.lnq("",e.last_name,", ",e.first_name," ",e.middle_name,"")}}function ti(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",37)(1,"div",38)(2,"label",39),t._uU(3,"To open final diagnosis & prescription you must refer this patient to a physician"),t.qZA(),t.TgZ(4,"select",40),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw(3);return t.KtG(a.referred_to.id=i)}),t.YNc(5,Xn,2,4,"option",27),t.qZA(),t.TgZ(6,"div",41)(7,"button",42),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.referTo())}),t._uU(8),t.qZA()()()()}if(2&n){const e=t.oxw(3);t.xp6(4),t.Q6J("disabled",e.enable_edit)("ngModel",e.referred_to.id),t.xp6(1),t.Q6J("ngForOf",e.physicians),t.xp6(2),t.Q6J("disabled",!e.referred_to.id),t.xp6(1),t.hij(" ",e.enable_edit?"Update":"Refer"," ")}}function ei(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"app-complaint-history",30),t.NdJ("loadConsult",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.loadConsult())}),t.qZA(),t._UZ(2,"app-general-survey",31),t.YNc(3,Vn,1,3,"app-physical-exam",32),t.YNc(4,Rn,1,3,"app-management",32),t._UZ(5,"app-consult-history",33),t.YNc(6,Bn,1,3,"app-initial-dx",32),t.YNc(7,zn,1,3,"app-final-dx",32),t.YNc(8,Wn,1,4,"app-prescription",34),t.YNc(9,ti,9,5,"div",35),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("allowed_to_edit",e.allowed_to_edit)("toggle_content",e.toggle_content)("consult_details",e.consult_details)("have_complaint",e.have_complaint),t.xp6(1),t.Q6J("allowed_to_edit",e.allowed_to_edit)("toggle_content",e.toggle_content)("consult_details",e.consult_details),t.xp6(1),t.Q6J("ngIf",e.have_complaint),t.xp6(1),t.Q6J("ngIf",e.have_complaint),t.xp6(1),t.Q6J("toggle_content",e.toggle_content),t.xp6(1),t.Q6J("ngIf",e.have_complaint),t.xp6(1),t.Q6J("ngIf",e.have_complaint&&e.consult_details.physician),t.xp6(1),t.Q6J("ngIf",e.have_complaint&&e.consult_details.physician),t.xp6(1),t.Q6J("ngIf",!(null!=e.consult_details&&e.consult_details.consult_done)&&e.have_complaint&&!e.consult_details.physician&&e.allowed_to_edit)}}function ni(n,s){1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-consult-summary"),t.qZA())}function ii(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"span",13)(2,"span",14)(3,"div",15)(4,"button",16),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleAll())}),t._UZ(5,"fa-icon",17),t.qZA(),t.TgZ(6,"span",18),t._uU(7," CONSULTATION "),t.TgZ(8,"span",19),t._uU(9),t.ALo(10,"date"),t.YNc(11,Kn,2,1,"span",6),t._uU(12,") "),t.TgZ(13,"button",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleModal("update_date"))}),t._UZ(14,"fa-icon",21),t.qZA()()(),t._UZ(15,"br"),t.TgZ(16,"span",22),t._uU(17),t.qZA()(),t.YNc(18,$n,6,8,"div",23),t.qZA()(),t.YNc(19,ei,10,14,"div",6),t.YNc(20,ni,2,0,"div",6),t.qZA()}if(2&n){const e=t.oxw();t.xp6(5),t.Q6J("icon",e.toggle_content?e.faChevronUp:e.faChevronDown),t.xp6(4),t.AsE(" (",t.xi3(10,9,null==e.consult_details?null:e.consult_details.consult_date,"MM/dd/yyyy hh:mm a")," | ID:",null==e.consult_details?null:e.consult_details.id,""),t.xp6(2),t.Q6J("ngIf",null==e.consult_details?null:e.consult_details.is_konsulta),t.xp6(3),t.Q6J("icon",e.faEdit),t.xp6(3),t.hij("Facilty: ",null==e.consult_details||null==e.consult_details.facility?null:e.consult_details.facility.facility_name,""),t.xp6(1),t.Q6J("ngIf",e.consult_details&&e.open_consult&&e.have_complaint&&!(null!=e.consult_details&&e.consult_details.consult_done)&&e.allowed_to_edit),t.xp6(1),t.Q6J("ngIf",e.consult_details&&e.open_consult),t.xp6(1),t.Q6J("ngIf",e.consult_details&&!e.open_consult)}}function oi(n,s){1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-konsulta"),t.qZA())}function si(n,s){1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-eclaims"),t.qZA())}function ai(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-end-visit",43),t.NdJ("toggleModal",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleModal("show_end"))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("consult_id",null==e.consult_details?null:e.consult_details.id)("consult_date",null==e.consult_details?null:e.consult_details.consult_date)("patient_id",null==e.consult_details?null:e.consult_details.patient.id)("pt_group","cn")}}function li(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-open-consult",43),t.NdJ("toggleModal",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleModal("show_open"))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("consult_id",null==e.consult_details?null:e.consult_details.id)("consult_date",null==e.consult_details?null:e.consult_details.consult_date)("patient_id",null==e.consult_details?null:e.consult_details.patient.id)("pt_group","cn")}}function ri(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-update-date",44),t.NdJ("toggleModal",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleModal("update_date"))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("consult_details",e.consult_details)}}function _i(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-ekas",45),t.NdJ("toggleModal",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleEkas())}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("lab_list",e.lab_list)("consult_details",e.consult_details)}}const di=[{path:"",component:(()=>{var n;class s{switchTabs(o){this.modules=0,this.modules=o}toggleAll(){this.toggle_content=!this.toggle_content}patientVitals(o){this.graph.patientVitals(o)}patientInfo(o){this.patient_details=o}toggleModal(o){console.log(o),this[o]=!this[o],("show_open"===o&&!this.show_open||"update_date"===o&&!this.update_date)&&this.loadConsult()}openEkas(){this.http.get("laboratory/consult-laboratories",{params:{patient_id:this.patient_id,sort:"-request_date",include:"laboratory"}}).subscribe({next:i=>{this.lab_list=i.data,this.show_ekas=!this.show_ekas},error:i=>console.log(i)})}toggleEkas(){this.show_ekas=!this.show_ekas}loadVisitHistory(){this.http.get("consultation/records",{params:{patient_id:this.patient_id,per_page:"all",sort:"-consult_date"}}).subscribe({next:o=>{this.visit_list=o.data,console.log(o.data)},error:o=>console.log(o)})}loadConsult(){this.consult_id=this.route.snapshot.paramMap.get("consult_id"),this.http.get("consultation/records",{params:{id:this.consult_id,pt_group:"cn",disable_filter:1}}).subscribe({next:a=>{console.log(a),this.consult_details=a.data[0],this.allowed_to_edit=this.http.getUserFacility()===this.consult_details.facility.code,(this.consult_details.consult_notes.complaint||this.consult_details.consult_notes.complaints.length>0||this.consult_details.consult_notes.history)&&(this.have_complaint=!0,this.consult_details.physician&&(this.referred_to=this.consult_details.physician,this.enable_edit=!0))},error:a=>console.log(a)});let i=this.http.getUserFromJSON();this.with_credentials=!!i.konsulta_credential}referTo(){this.enable_edit?this.enable_edit=!1:this.http.update("consultation/records/",this.consult_details.id,{patient_id:this.consult_details.patient.id,consult_date:this.consult_details.consult_date,pt_group:"cn",consult_done:!1,physician_id:this.referred_to.id}).subscribe({next:i=>{this.toastr.success("Patient was referred","Referral"),this.consult_details.physician=this.referred_to},error:i=>console.log(i)})}loadUsers(){this.http.get("users",{params:{per_page:"all",designation_code:"MD"}}).subscribe({next:o=>{this.physicians=o.data},error:o=>console.log(o)})}constructor(o,i,a,r){this.http=o,this.route=i,this.toastr=a,this.router=r,this.faChevronUp=_.mTx,this.faChevronDown=_.ptq,this.faDoorClosed=_.TH0,this.faFile=_.gMD,this.faEdit=T.Xcf,this.is_saving=!1,this.show_item=!0,this.toggle_content=!0,this.open_consult=!0,this.have_complaint=!1,this.show_end=!1,this.show_open=!1,this.enable_edit=!1,this.show_ekas=!1,this.update_date=!1,this.referred_to={id:""},this.with_credentials=!1,this.allowed_to_edit=!1,this.navigationEnd$=this.router.events.pipe((0,w.h)(c=>c instanceof b.m2),(0,y.b)(()=>{this.loadConsult()}))}ngOnInit(){this.patient_id=this.route.snapshot.paramMap.get("id"),this.modules=1,this.loadUsers(),this.loadConsult(),this.navigationEnd$.subscribe()}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(g.O),t.Y36(b.gz),t.Y36(h._W),t.Y36(b.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-consultation"]],viewQuery:function(o,i){if(1&o&&t.Gf(V,5),2&o){let a;t.iGM(a=t.CRH())&&(i.graph=a.first)}},decls:16,vars:12,consts:[[1,"block","shadow","p-4","mt-4","rounded-xl","text-gray-600","border","border-slate-100"],[1,"flex"],[1,"flex","justify-between","text-sm","w-full"],[1,"text-gray-600","border-b-2","border-gray-200","block","hover:text-blue-500","hover:border-blue-500","mr-6","pb-2",3,"click"],["type","button","class","btn-end-visit bg-green-500 mr-3 hover:ring-green-400",3,"click",4,"ngIf"],["type","button","class","btn-end-visit ml-auto",3,"click",4,"ngIf"],[4,"ngIf"],[3,"consult_id","consult_date","patient_id","pt_group","toggleModal",4,"ngIf"],[3,"consult_details","toggleModal",4,"ngIf"],[3,"lab_list","consult_details","toggleModal",4,"ngIf"],["type","button",1,"btn-end-visit","bg-green-500","mr-3","hover:ring-green-400",3,"click"],[1,"mr-1",3,"icon"],["type","button",1,"btn-end-visit","ml-auto",3,"click"],[1,"text-sky-500","flex","justify-between","py-2"],[1,"flex","justify-between","w-full"],[1,"w-2/3","mt-2"],["type","button",1,"font-normal","text-sky-500","px-2","py-1","text-sm","mr-2",3,"click"],["size","lg",3,"icon"],[1,"mt-2","font-bold"],[1,"text-gray-500","text-sm"],["type","button",1,"text-orange-400",3,"click"],[3,"icon"],[1,"text-gray-500","text-sm","font-semibold"],["class","w-1/3 flex justify-end",4,"ngIf"],[1,"w-1/3","flex","justify-end"],[1,"flex","text-gray-700"],[1,"input","px-2","mr-3","disabled:bg-gray-300",3,"disabled","ngModel","ngModelChange"],["class","pr-3",3,"value",4,"ngFor","ngForOf"],[1,"disabled:bg-gray-300","bg-blue-500","text-xs","text-white","px-5","py-1","rounded-md","hover:ring-2","hover:ring-blue-400","h-10","mt-1","w-24",3,"disabled","ngClass","click"],[1,"pr-3",3,"value"],[3,"allowed_to_edit","toggle_content","consult_details","have_complaint","loadConsult"],[3,"allowed_to_edit","toggle_content","consult_details"],[3,"allowed_to_edit","toggle_content","consult_details",4,"ngIf"],[3,"toggle_content"],[3,"allowed_to_edit","toggle_content","consult_details","with_credentials",4,"ngIf"],["class","grid grid-cols-10",4,"ngIf"],[3,"allowed_to_edit","toggle_content","consult_details","with_credentials"],[1,"grid","grid-cols-10"],[1,"col-start-3","col-span-8","text-gray-700","p-10","border","border-slate-300","shadow-md","rounded-md","mt-5"],["for","referred_to"],["name","referred_to",1,"input","px-2","mr-3","disabled:bg-gray-300","mb-3",3,"disabled","ngModel","ngModelChange"],[1,"w-full","text-right"],[1,"btn-save","px-5","disabled:bg-gray-300",3,"disabled","click"],[3,"consult_id","consult_date","patient_id","pt_group","toggleModal"],[3,"consult_details","toggleModal"],[3,"lab_list","consult_details","toggleModal"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"nav",2)(3,"button",3),t.NdJ("click",function(){return i.switchTabs(1)}),t._uU(4," CONSULTATION "),t.qZA(),t.TgZ(5,"div"),t.YNc(6,Hn,3,1,"button",4),t.YNc(7,En,3,1,"button",5),t.YNc(8,jn,2,0,"button",5),t.qZA()()(),t.YNc(9,ii,21,12,"div",6),t.YNc(10,oi,2,0,"div",6),t.YNc(11,si,2,0,"div",6),t.qZA(),t.YNc(12,ai,1,4,"app-end-visit",7),t.YNc(13,li,1,4,"app-open-consult",7),t.YNc(14,ri,1,1,"app-update-date",8),t.YNc(15,_i,1,2,"app-ekas",9)),2&o&&(t.xp6(3),t.Tol(1===i.modules?"text-blue-500 border-b-2 border-blue-500 font-bold":"hover:-translate-y-1 hover:scale-110 transition ease-in-out delay-400 duration-300"),t.xp6(3),t.Q6J("ngIf",(null==i.consult_details?null:i.consult_details.is_konsulta)&&i.consult_details&&i.with_credentials),t.xp6(1),t.Q6J("ngIf",!(null!=i.consult_details&&i.consult_details.consult_done)&&i.allowed_to_edit),t.xp6(1),t.Q6J("ngIf",(null==i.consult_details?null:i.consult_details.consult_done)&&i.allowed_to_edit),t.xp6(1),t.Q6J("ngIf",1===i.modules),t.xp6(1),t.Q6J("ngIf",2===i.modules),t.xp6(1),t.Q6J("ngIf",3===i.modules),t.xp6(1),t.Q6J("ngIf",i.show_end),t.xp6(1),t.Q6J("ngIf",i.show_open),t.xp6(1),t.Q6J("ngIf",i.update_date),t.xp6(1),t.Q6J("ngIf",i.show_ekas))},dependencies:[d.mk,d.sg,d.O5,mt,ht.h,M,m.BN,l.YN,l.Kr,l.EJ,l.JJ,l.On,N.F,I,yt,Ut,Et,je,ln,fn,xn,Tn,Nn,Pn,d.uU],styles:["td[_ngcontent-%COMP%]{padding:1em 0}"]}),s})()}];let ci=(()=>{var n;class s{}return(n=s).\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[b.Bz.forChild(di),b.Bz]}),s})();var pi=p(8048);let ui=(()=>{var n;class s{}return(n=s).\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.ez,ci,pi.q,k.X,m.uH,Z.A0,l.u5,l.UX,H.N,N.F,I]}),s})()}}]);