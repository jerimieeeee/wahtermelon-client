<div class="my-5 border border-solid border-gray-200 rounded-lg">
  <div class="bg-blue-500 w-full text-white p-3 rounded-t-lg justify-between flex">
    <span>Surgical History</span>
  </div>

  <div class="flex flex-col justify-center">
    <form [formGroup]="surgicalHistoryForm" (submit)="onSubmit()">
      <fieldset class="grid grid-cols-5 m-3 p-3 gap-x-3 border border-slate-300 shadow-md rounded-md bg-slate-100">
        <legend>Surgery Details</legend>
        <div class="col-span-2">
          <label for="operation_date">Date of Operation</label>
          <input id="operation_date" type="date" class="input" formControlName="operation_date" placeholder="admission date" />
        </div>

        <div class="col-span-3">
          <label for="operation">Operation</label>
          <input id="operation" type="text" class="input" formControlName="operation" placeholder="Operation"/>
        </div>

        <div class="col-span-5 flex justify-end mt-3">
          <button [disabled]="surgicalHistoryForm.invalid || is_saving" type="submit" class="btn-save text-xs">
            <fa-icon class="mr-2" [icon]="faPlus" *ngIf="!is_saving"></fa-icon>
            <fa-icon class="mr-2" [icon]="faCircleNotch" *ngIf="is_saving" [animation]="'spin'"></fa-icon>
            {{ is_saving ? 'Saving' : 'Add' }}
          </button>
        </div>
      </fieldset>
    </form>
    <table class="table-auto w-11/12 text-center m-5 mx-auto border border-slate-300 rounded-lg shadow-md">
      <thead class="border-b">
        <tr>
          <th class="px-3">Operation Done</th>
          <th class="px-3">Operation Date</th>
          <th class="px-3">Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of selected_visit?.dentalSurgicalHistory">
          <td>{{ item.operation }}</td>
          <td>{{ item.operation_date | date: 'MM/dd/yyyy'}}</td>
          <td>
            <!-- <button type="button" class="text-orange-500" (click)="editHistory(item)">
              <fa-icon [icon]="faEdit"></fa-icon>
            </button> -->
            <button type="button" class="text-red-500" (click)="toggleModal('delete-item', item)">
              <fa-icon [icon]="faTrash"></fa-icon>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<app-delete-item *ngIf="modals['delete-item']"
  [url]="url"
  [delete_id]="delete_id"
  [delete_desc]="delete_desc"
  (toggleModal)="toggleModal($event)"
></app-delete-item>
