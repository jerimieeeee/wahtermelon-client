"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[798],{1798:(N,w,c)=>{c.r(w),c.d(w,{DentalModule:()=>Fi});var a=c(6814),u=c(3602),d=c(590),t=c(5879),f=c(265),g=c(5597),h=c(1449),Z=c(8316),r=c(6223),v=c(2425);function T(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"span",21)(1,"span")(2,"fa-icon",22),t.NdJ("click",function(){const o=t.CHM(e);return t.KtG((0,o.clear)(o.item))}),t.qZA()(),t.TgZ(3,"span"),t._uU(4),t.qZA()()}if(2&i){const e=s.item,n=t.oxw(2);t.xp6(2),t.Q6J("icon",n.faXmark),t.xp6(2),t.Oqu(e.complaint_desc)}}function m(i,s){if(1&i&&(t.TgZ(0,"div",23)(1,"div")(2,"h5",24),t._uU(3),t.qZA()()()),2&i){const e=s.item,n=s.searchTerm;t.xp6(2),t.Q6J("ngOptionHighlight",n),t.xp6(1),t.Oqu(e.complaint_desc)}}function p(i,s){if(1&i&&t._UZ(0,"fa-icon",28),2&i){const e=t.oxw(3);t.Q6J("icon",e.faCircleNotch)}}function C(i,s){if(1&i&&t._UZ(0,"fa-icon",29),2&i){const e=t.oxw(3);t.Q6J("icon",e.faSave)}}function J(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.onSubmit())}),t.YNc(1,p,1,1,"fa-icon",26),t.YNc(2,C,1,1,"fa-icon",27),t._uU(3),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("ngIf",e.is_saving),t.xp6(1),t.Q6J("ngIf",!e.is_saving),t.xp6(1),t.hij(" ",e.is_saving?"Saving":"Save"," ")}}function E(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"div",8)(2,"button",9),t._UZ(3,"fa-icon",10),t.qZA(),t.TgZ(4,"div",11)(5,"ng-select",12),t.NdJ("ngModelChange",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.selectedComplaint=o)}),t.YNc(6,T,5,2,"ng-template",13),t.YNc(7,m,4,2,"ng-template",14),t.qZA()()(),t.TgZ(8,"div",15)(9,"label",16),t._uU(10,"Complaint notes"),t.qZA(),t.TgZ(11,"textarea",17),t.NdJ("ngModelChange",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.consult_notes.complaint=o)}),t.qZA()(),t.TgZ(12,"div",15)(13,"label",16),t._uU(14,"History notes"),t.qZA(),t.TgZ(15,"textarea",18),t.NdJ("ngModelChange",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.consult_notes.history=o)}),t.qZA()(),t.TgZ(16,"div",19),t.YNc(17,J,4,4,"button",20),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(3),t.Q6J("icon",e.faPlusSquare),t.xp6(2),t.Q6J("disabled",e.consult_done||!e.allowed_to_edit)("items",e.complaints)("multiple",!0)("closeOnSelect",!1)("hideSelected",!0)("clearable",!1)("ngModel",e.selectedComplaint),t.xp6(6),t.Q6J("ngModel",e.consult_notes.complaint),t.xp6(4),t.Q6J("ngModel",e.consult_notes.history),t.xp6(2),t.Q6J("ngIf",!e.consult_done&&e.allowed_to_edit)}}const j=function(i){return{"rounded-b":i}};let U=(()=>{var i;class s{onSubmit(){this.is_saving=!0,this.http.post("consultation/complaint",{notes_id:this.consult_details.consult_notes.id,consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,complaints:this.selectedComplaint}).subscribe({next:o=>{this.saveNotes()},error:o=>{this.http.showError(o.error.message,"Complaint History")}})}saveNotes(){this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,complaint:this.consult_notes.complaint,history:this.consult_notes.history}).subscribe({next:()=>{this.is_saving=!1,this.showToastr(),this.loadConsult.emit()},error:o=>{this.http.showError(o.error.message,"Complaint History")}})}showToastr(){this.toastr.success("Successfully updated!","Complaint")}loadLib(){this.http.get("libraries/complaint").subscribe(n=>{this.complaints=n.data,this.loadSelected(),this.show_form=!0})}loadSelected(){this.gbv_complaints=[],this.show_gbv_form=!1,this.have_open_gbv=!1;let n=[];this.consult_details.consult_notes&&this.consult_details.consult_notes.complaints&&Object.entries(this.consult_details.consult_notes.complaints).forEach(([o,l],_)=>{n.push(l.complaint_id)}),this.selectedComplaint=n}getPatientGbv(){this.http.get("gender-based-violence/patient-gbv",{params:{patient_id:this.consult_details.patient.id}}).subscribe({next:o=>{o.data.length>0&&!o.data[0].outcome_date&&(this.have_open_gbv=!0),this.show_gbv_form=!0},error:o=>console.log(o)})}ngOnChanges(n){this.show_content=this.toggle_content,this.consult_details&&(this.complaints&&this.loadSelected(),this.consult_notes=this.consult_details.consult_notes,this.consult_done=this.consult_details.consult_done)}toggleModal(n){this.modals[n]=!this.modals[n],"gbv_referral"===n&&this.getPatientGbv()}constructor(n,o){this.http=n,this.toastr=o,this.loadConsult=new t.vpe,this.faPlusSquare=h.CPW,this.faSave=h.r6l,this.faChevronCircleUp=d._qI,this.faChevronCircleDown=d.yh$,this.faCircleNotch=d.IJ7,this.faXmark=d.g82,this.selectedComplaint=[],this.consult_notes={complaint:null,history:null},this.modals=[],this.show_content=!0,this.is_saving=!1,this.consult_done=!1,this.show_form=!1,this.enable_edit=!1,this.show_gbv_form=!1,this.have_open_gbv=!1}ngOnInit(){this.loadLib(),this.allowed_to_edit=!0}}return(i=s).\u0275fac=function(n){return new(n||i)(t.Y36(f.O),t.Y36(v._W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-complaint-history"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",have_complaint:"have_complaint",allowed_to_edit:"allowed_to_edit"},outputs:{loadConsult:"loadConsult"},standalone:!0,features:[t.TTD,t.jDz],decls:10,vars:5,consts:[[1,"grid","grid-cols-10","mb-5"],[1,"col-span-2","pt-2","pr-5","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[1,"flex","mb-2","p-4"],["type","submit",1,"inline-flex","p-1","items-center","text-gray-50","bg-sky-400","rounded-l-md","border","border-gray-300"],[1,"text-white","fa-xl",3,"icon"],[1,"chips-container"],["placeholder","search","bindLabel","complaint_desc","bindValue","complaint_id","placeholder","Select Complaint",1,"select-chips",3,"disabled","items","multiple","closeOnSelect","hideSelected","clearable","ngModel","ngModelChange"],["ng-label-tmp",""],["ng-option-tmp",""],[1,"grid","grid-cols-1","px-4","pb-4"],["for","complaint_notes",1,"font-semibold","pl-1"],["rows","3","id","complaint_notes","placeholder","Complaint Notes",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"ngModel","ngModelChange"],["rows","3","id","history_notes","placeholder","History of Current Illness",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"ngModel","ngModelChange"],[1,"flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[1,"px-2","py-1","rounded-md","text-sm"],[1,"text-xs","mr-1","hover:text-slate-100","hover:cursor-pointer",3,"icon","click"],[1,"grid","grid-flow-col","auto-cols-max"],[3,"ngOptionHighlight"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2," Chief Complaint and History of Current Illness "),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"span",4),t._uU(6," Complaints "),t.TgZ(7,"button",5),t.NdJ("click",function(){return o.show_content=!o.show_content}),t._UZ(8,"fa-icon",6),t.qZA()(),t.YNc(9,E,18,11,"div",7),t.qZA()()()),2&n&&(t.xp6(5),t.Q6J("ngClass",t.VKq(3,j,!o.show_content)),t.xp6(3),t.Q6J("icon",o.show_content?o.faChevronCircleUp:o.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",o.show_content&&o.show_form))},dependencies:[a.ez,a.mk,a.O5,g.uH,g.BN,Z.A0,Z.w9,Z.ir,Z.mR,r.u5,r.Fj,r.JJ,r.On]}),s})();function L(i,s){if(1&i&&(t.TgZ(0,"ul",28)(1,"li"),t._uU(2),t.qZA()()),2&i){const e=s.$implicit;t.xp6(2),t.Oqu(null==e.lib_complaints?null:e.lib_complaints.complaint_desc)}}function P(i,s){if(1&i&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.xp6(1),t.hij(" ",e.diagnosis.class_name," ")}}function K(i,s){if(1&i&&(t.TgZ(0,"div",29)(1,"span",30),t._uU(2,"remarks:"),t.qZA(),t._uU(3),t.qZA()),2&i){const e=t.oxw().$implicit;let n;t.xp6(3),t.hij(" ",null!==(n=e.consult_notes.idx_remarks)&&void 0!==n?n:"-"," ")}}function G(i,s){if(1&i&&(t.TgZ(0,"li")(1,"span",31),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&i){const e=s.$implicit;t.xp6(2),t.hij("",e.lib_icd10.icd10_code,":"),t.xp6(1),t.hij(" ",e.lib_icd10.icd10_desc," ")}}function $(i,s){if(1&i&&(t.TgZ(0,"div",29)(1,"span",30),t._uU(2,"remarks:"),t.qZA(),t._uU(3),t.qZA()),2&i){const e=t.oxw().$implicit;let n;t.xp6(3),t.hij(" ",null!==(n=e.consult_notes.fdx_remarks)&&void 0!==n?n:"-"," ")}}function z(i,s){if(1&i&&(t.TgZ(0,"tr",13)(1,"td",14)(2,"div",15)(3,"span",16),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"span",17),t._uU(7),t.ALo(8,"date"),t.qZA()()(),t.TgZ(9,"td",18)(10,"div",15)(11,"span",19)(12,"span",20),t._uU(13,"Complaint notes:"),t.qZA(),t._uU(14),t.qZA(),t.YNc(15,L,3,1,"ul",21),t.TgZ(16,"span",22)(17,"span",20),t._uU(18,"History notes:"),t.qZA(),t._uU(19),t.qZA()(),t.TgZ(20,"div",23)(21,"span",20),t._uU(22,"Initial Diagnosis:"),t.qZA(),t.TgZ(23,"ul",24),t.YNc(24,P,2,1,"li",25),t.qZA(),t.YNc(25,K,4,1,"div",26),t.qZA(),t.TgZ(26,"div",27)(27,"span",20),t._uU(28,"Final Diagnosis:"),t.qZA(),t.TgZ(29,"ul",24),t.YNc(30,G,4,2,"li",25),t.qZA(),t.YNc(31,$,4,1,"div",26),t.qZA(),t.TgZ(32,"div",27)(33,"span",19)(34,"span",20),t._uU(35,"Treatment Plan:"),t.qZA(),t._uU(36),t.qZA()()()()),2&i){const e=s.$implicit;let n,o,l;t.xp6(4),t.Oqu(t.Dn7(5,10,e.consult_date,"MM/dd/yyyy","Asia/Manila")),t.xp6(3),t.Oqu(t.xi3(8,14,e.consult_date,"hh:mm:ss a")),t.xp6(7),t.hij(" ",null!==(n=e.consult_notes.complaint)&&void 0!==n?n:"-"," "),t.xp6(1),t.Q6J("ngForOf",e.consult_notes.complaints),t.xp6(4),t.hij(" ",null!==(o=e.consult_notes.history)&&void 0!==o?o:"-"," "),t.xp6(5),t.Q6J("ngForOf",e.consult_notes.initialdx),t.xp6(1),t.Q6J("ngIf",e.consult_notes.idx_remarks),t.xp6(5),t.Q6J("ngForOf",e.consult_notes.finaldx),t.xp6(1),t.Q6J("ngIf",e.consult_notes.fdx_remarks),t.xp6(5),t.hij(" ",null!==(l=e.consult_notes.plan)&&void 0!==l?l:"-"," ")}}function V(i,s){if(1&i&&(t.TgZ(0,"table",10)(1,"thead")(2,"tr",11)(3,"th"),t._uU(4,"Date"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Details"),t.qZA()()(),t.TgZ(7,"tbody"),t.YNc(8,z,37,17,"tr",12),t.qZA()()),2&i){const e=t.oxw();t.xp6(8),t.Q6J("ngForOf",e.visit_list)}}function B(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"nav",36)(2,"button",37),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.loadPreviousVisit(1))}),t._UZ(3,"fa-icon",38),t.qZA(),t.TgZ(4,"button",39),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.loadPreviousVisit(o.current_page-1))}),t._UZ(5,"fa-icon",38),t._uU(6,"Previous "),t.qZA(),t.TgZ(7,"button",39),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.loadPreviousVisit(o.current_page+1))}),t._uU(8," Next"),t._UZ(9,"fa-icon",40),t.qZA(),t.TgZ(10,"button",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.loadPreviousVisit(o.last_page))}),t._UZ(11,"fa-icon",40),t.qZA()()()}if(2&i){const e=t.oxw(2);t.xp6(2),t.Q6J("disabled",1===e.current_page),t.xp6(1),t.Q6J("icon",e.faAnglesLeft),t.xp6(1),t.Q6J("disabled",1===e.current_page),t.xp6(1),t.Q6J("icon",e.faChevronLeft),t.xp6(2),t.Q6J("disabled",e.current_page===e.last_page),t.xp6(2),t.Q6J("icon",e.faChevronRight),t.xp6(1),t.Q6J("disabled",e.current_page===e.last_page),t.xp6(1),t.Q6J("icon",e.faAnglesRight)}}function R(i,s){if(1&i&&(t.TgZ(0,"div")(1,"div",32)(2,"div",33)(3,"div")(4,"p",34),t._uU(5," Showing "),t.TgZ(6,"span",35),t._uU(7),t.qZA(),t._uU(8," to "),t.TgZ(9,"span",35),t._uU(10),t.qZA(),t._uU(11," of "),t.TgZ(12,"span",35),t._uU(13),t.qZA(),t._uU(14," results "),t.qZA()(),t.YNc(15,B,12,8,"div",9),t.qZA()()()),2&i){const e=t.oxw();t.xp6(7),t.Oqu(e.from),t.xp6(3),t.Oqu(e.to),t.xp6(3),t.Oqu(e.total),t.xp6(2),t.Q6J("ngIf",e.total>=6)}}const W=function(i){return{"rounded-b":i}};let I=(()=>{var i;class s{loadPreviousVisit(n){this.http.get("consultation/records",{params:{patient_id:this.patient_id,per_page:this.per_page,sort:"-consult_date",pt_group:this.pt_group,page:n,not_consult_id:this.consult_id}}).subscribe({next:l=>{this.visit_list=l.data,this.current_page=l.meta.current_page,this.last_page=l.meta.last_page,this.from=l.meta.from,this.to=l.meta.to,this.total=l.meta.total},error:l=>console.log(l)})}constructor(n,o){this.route=n,this.http=o,this.show_content=!1,this.faChevronCircleUp=d._qI,this.faChevronCircleDown=d.yh$,this.faChevronLeft=d.A35,this.faChevronRight=d._tD,this.faAnglesLeft=d._Wx,this.faAnglesRight=d.ccb,this.per_page=5}ngOnInit(){this.patient_id=this.route.snapshot.paramMap.get("id"),this.consult_id=this.route.snapshot.paramMap.get("consult_id"),this.show_content=!0,this.loadPreviousVisit(1)}}return(i=s).\u0275fac=function(n){return new(n||i)(t.Y36(u.gz),t.Y36(f.O))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-consult-history"]],inputs:{toggle_content:"toggle_content",allowed_to_edit:"allowed_to_edit",pt_group:"pt_group"},standalone:!0,features:[t.jDz],decls:12,vars:6,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-green-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],["class","w-full table-auto",4,"ngIf"],[4,"ngIf"],[1,"w-full","table-auto"],[1,"border-b","border-solid","border-gray-200"],["class","text-left mt-3 align-top border-t border-slate-200 text-sm",4,"ngFor","ngForOf"],[1,"text-left","mt-3","align-top","border-t","border-slate-200","text-sm"],[1,"p-3","w-2/12"],[1,"grid","grid-cols-1"],[1,"font-semibold","w-full"],[1,"text-sm","w-full"],[1,"p-3","w-7/12"],[1,"w-full","mb-3"],[1,"font-semibold"],["class","list-disc last:mb-3 ml-10",4,"ngFor","ngForOf"],[1,"w-full","my-2","py-2"],[1,"grid","grid-cols-1","text-left"],[1,"list-disc","ml-10"],[4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],[1,"grid","grid-cols-1","text-left","mt-2","pt-2"],[1,"list-disc","last:mb-3","ml-10"],[1,"mt-2"],[1,"text-sm","italic"],[1,"font-semibold","text-sm"],[1,"bg-white","px-4","py-4","flex","items-center","justify-between","border-t","border-gray-200","sm:px-6"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"text-sm","text-gray-700"],[1,"font-medium"],["aria-label","Pagination",1,"relative","z-0","inline-flex","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"disabled","click"],[1,"block","h-15","w-15","text-gray-500","pr-1",3,"icon"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","bg-white","text-sm","font-medium","text-gray-700","hover:bg-gray-50",3,"disabled","click"],[1,"h-5","w-5","text-gray-500",3,"icon"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"disabled","click"]],template:function(n,o){1&n&&(t._UZ(0,"hr",0),t.TgZ(1,"div",1)(2,"div",2),t._uU(3," Diagnosis History "),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"span",5),t._uU(7," Previous History "),t.TgZ(8,"button",6),t.NdJ("click",function(){return o.show_content=!o.show_content}),t._UZ(9,"fa-icon",7),t.qZA()(),t.YNc(10,V,9,1,"table",8),t.YNc(11,R,16,4,"div",9),t.qZA()()()),2&n&&(t.xp6(6),t.Q6J("ngClass",t.VKq(4,W,!o.show_content)),t.xp6(3),t.Q6J("icon",o.show_content?o.faChevronCircleUp:o.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",o.show_content),t.xp6(1),t.Q6J("ngIf",o.total>=1))},dependencies:[a.ez,a.mk,a.sg,a.O5,a.uU,g.uH,g.BN]}),s})();var X=c(5211),k=c(2096),tt=c(2181),et=c(3997),it=c(3620),F=c(9397),ot=c(4664),nt=c(6306),st=c(7398),rt=c(8645);function lt(i,s){if(1&i&&(t.TgZ(0,"div",18)(1,"h5",19)(2,"strong"),t._uU(3),t.qZA(),t._uU(4),t.qZA()()),2&i){const e=s.item,n=s.searchTerm;t.xp6(1),t.Q6J("ngOptionHighlight",n),t.xp6(2),t.hij("",e.icd10_code,":"),t.xp6(1),t.hij(" ",e.icd10_desc,"")}}function at(i,s){if(1&i&&t._UZ(0,"fa-icon",23),2&i){const e=t.oxw(3);t.Q6J("icon",e.faSpinner)}}function dt(i,s){if(1&i&&t._UZ(0,"fa-icon",24),2&i){const e=t.oxw(3);t.Q6J("icon",e.faSave)}}function _t(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.onSubmit())}),t.YNc(1,at,1,1,"fa-icon",21),t.YNc(2,dt,1,1,"fa-icon",22),t._uU(3),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("ngIf",e.is_saving),t.xp6(1),t.Q6J("ngIf",!e.is_saving),t.xp6(1),t.hij(" ",e.is_saving?"Saving":"Save"," ")}}function ct(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"div",8)(2,"button",9),t._UZ(3,"fa-icon",10),t.qZA(),t.TgZ(4,"div",11)(5,"ng-select",12),t.NdJ("ngModelChange",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.selectedFdx=o)}),t.ALo(6,"async"),t.YNc(7,lt,5,3,"ng-template",13),t.qZA()()(),t.TgZ(8,"div",14)(9,"textarea",15),t.NdJ("ngModelChange",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.fdx_remarks=o)}),t.qZA()(),t.TgZ(10,"div",16),t.YNc(11,_t,4,4,"button",17),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(3),t.Q6J("icon",e.faPlusSquare),t.xp6(2),t.Q6J("items",t.lcZ(6,10,e.fdx$))("multiple",!0)("loading",e.fdxLoading)("typeahead",e.searchInput$)("ngModel",e.selectedFdx)("disabled",e.consult_done||!e.allowed_to_edit),t.xp6(4),t.Q6J("disabled",e.consult_done||!e.allowed_to_edit)("ngModel",e.fdx_remarks),t.xp6(2),t.Q6J("ngIf",!e.consult_done&&e.allowed_to_edit)}}const ut=function(i){return{"rounded-b":i}};let M=(()=>{var i;class s{onSubmit(){this.is_saving=!0,this.http.post("consultation/final-diagnosis",{notes_id:this.consult_details.consult_notes.id,final_diagnosis:this.selectedFdx}).subscribe({next:o=>{this.saveNotes()},error:o=>console.log(o)})}saveNotes(){this.fdx_remarks?this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,fdx_remarks:this.fdx_remarks}).subscribe({next:()=>{this.showToastr(),this.loadConsult.emit()},error:o=>console.log(o)}):this.showToastr()}showToastr(){this.is_saving=!1,this.toastr.success("Successfully updated!","Final Diagnosis")}loadFdx(n){this.fdx$=(0,X.z)((0,k.of)(n),this.searchInput$.pipe((0,tt.h)(o=>null!==o&&o.length>=this.minLengthTerm),(0,et.x)(),(0,it.b)(800),(0,F.b)(()=>this.fdxLoading=!0),(0,ot.w)(o=>this.getFdx(o).pipe((0,nt.K)(()=>(0,k.of)([])),(0,F.b)(()=>this.fdxLoading=!1)))))}getFdx(n=null){return this.http.get("libraries/icd10",{params:{"filter[search]":n}}).pipe((0,st.U)(o=>o.data))}loadSelected(){let n=[],o=[];this.final_dx&&Object.keys(this.final_dx).length>0?(Object.entries(this.final_dx).forEach(([l,_],y)=>{let A=_;n.push(A.icd10_code.toString()),o.push(A.lib_icd10)}),this.loadFdx(o),this.selectedFdx=n):this.loadFdx([])}ngOnChanges(n){this.show_content=this.toggle_content,this.consult_details&&(this.final_dx=this.consult_details.consult_notes.finaldx,this.fdx_remarks=this.consult_details.consult_notes.fdx_remarks,this.consult_done=this.consult_details.consult_done,this.loadSelected())}constructor(n,o){this.http=n,this.toastr=o,this.loadConsult=new t.vpe,this.faPlusSquare=h.CPW,this.faChevronCircleUp=d._qI,this.faChevronCircleDown=d.yh$,this.faSave=h.r6l,this.faSpinner=d.LM3,this.fdxLoading=!1,this.show_content=!0,this.is_saving=!1,this.consult_done=!1,this.searchInput$=new rt.x,this.minLengthTerm=3}}return(i=s).\u0275fac=function(n){return new(n||i)(t.Y36(f.O),t.Y36(v._W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-final-dx"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",allowed_to_edit:"allowed_to_edit"},outputs:{loadConsult:"loadConsult"},standalone:!0,features:[t.TTD,t.jDz],decls:10,vars:5,consts:[[1,"grid","grid-cols-10","mt-4"],[1,"col-span-2","pt-2"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[1,"flex","mb-2","p-4"],["type","submit",1,"inline-flex","p-1","items-center","text-gray-50","bg-sky-400","rounded-l-md","border","border-gray-300"],[1,"text-white","fa-xl",3,"icon"],[1,"chips-container"],["placeholder","search","typeToSearchText","search...","bindValue","icd10_code","bindLabel","icd10_desc","notFoundText","No records found",1,"select-chips",3,"items","multiple","loading","typeahead","ngModel","disabled","ngModelChange"],["ng-option-tmp",""],[1,"flex","px-4","pb-4"],["rows","3","id","fdx_remarks","placeholder","Final Diagnosis remarks",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"disabled","ngModel","ngModelChange"],[1,"flex","justify-between"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[1,"whitespace-normal"],[1,"text-gray-700",3,"ngOptionHighlight"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2," Final Diagnosis "),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"span",4),t._uU(6," Final Diagnosis "),t.TgZ(7,"button",5),t.NdJ("click",function(){return o.show_content=!o.show_content}),t._UZ(8,"fa-icon",6),t.qZA()(),t.YNc(9,ct,12,12,"div",7),t.qZA()()()),2&n&&(t.xp6(5),t.Q6J("ngClass",t.VKq(3,ut,!o.show_content)),t.xp6(3),t.Q6J("icon",o.show_content?o.faChevronCircleUp:o.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",o.show_content))},dependencies:[a.ez,a.mk,a.O5,a.Ov,g.uH,g.BN,Z.A0,Z.w9,Z.ir,r.u5,r.Fj,r.JJ,r.On,r.UX]}),s})();function pt(i,s){1&i&&(t.TgZ(0,"div",42)(1,"strong"),t._uU(2,"Note: "),t.qZA(),t._uU(3,"Saving this prescription will automatically add new item in your drug list. "),t.qZA())}function mt(i,s){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.required_message," ")}}function gt(i,s){if(1&i&&(t.TgZ(0,"div",46),t.YNc(1,mt,2,1,"div",47),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.f.brand_name.errors?null:e.f.brand_name.errors.required)}}const b=function(i){return{"text-red-500":i}},x=function(i){return{"invalid-input":i}};function ft(i,s){if(1&i&&(t.TgZ(0,"div",43)(1,"label",44),t._uU(2,"Brand Name"),t.qZA(),t._UZ(3,"input",45),t.YNc(4,gt,2,1,"div",14),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(3,b,e.is_saving&&e.f.brand_name.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(5,x,e.is_saving&&e.f.brand_name.errors)),t.xp6(1),t.Q6J("ngIf",e.is_saving&&e.f.brand_name.errors)}}function ht(i,s){if(1&i&&(t.TgZ(0,"div",43)(1,"span",48),t._uU(2,"Drug description:"),t.qZA(),t._uU(3),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.hij(" ",e.selected_drug.konsulta_medicine?e.selected_drug.konsulta_medicine.desc:e.selected_drug.desc," ")}}function vt(i,s){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.required_message," ")}}function bt(i,s){if(1&i&&(t.TgZ(0,"div",46),t.YNc(1,vt,2,1,"div",47),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.f.added_medicine.errors?null:e.f.added_medicine.errors.required)}}function xt(i,s){if(1&i&&(t.TgZ(0,"div",30)(1,"label",49),t._uU(2,"Drug name"),t.qZA(),t._UZ(3,"input",50),t.YNc(4,bt,2,1,"div",14),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(3,b,e.is_saving&&e.f.added_medicine.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(5,x,e.is_saving&&e.f.added_medicine.errors)),t.xp6(1),t.Q6J("ngIf",e.is_saving&&e.f.added_medicine.errors)}}function Ct(i,s){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function Zt(i,s){if(1&i&&(t.TgZ(0,"div",46),t.YNc(1,Ct,2,1,"div",47),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.dosage_quantity.errors?null:e.f.dosage_quantity.errors.required)}}function yt(i,s){if(1&i&&(t.TgZ(0,"option",51),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function Tt(i,s){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function wt(i,s){if(1&i&&(t.TgZ(0,"div",46),t.YNc(1,Tt,2,1,"div",47),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.dosage_uom.errors?null:e.f.dosage_uom.errors.required)}}function qt(i,s){if(1&i&&(t.TgZ(0,"option",51),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function At(i,s){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function Jt(i,s){if(1&i&&(t.TgZ(0,"div",46),t.YNc(1,At,2,1,"div",47),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.dose_regimen.errors?null:e.f.dose_regimen.errors.required)}}function Nt(i,s){if(1&i&&(t.TgZ(0,"option",51),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function Ut(i,s){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function It(i,s){if(1&i&&(t.TgZ(0,"div",46),t.YNc(1,Ut,2,1,"div",47),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.medicine_route_code.errors?null:e.f.medicine_route_code.errors.required)}}function kt(i,s){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function Ft(i,s){if(1&i&&(t.TgZ(0,"div",46),t.YNc(1,kt,2,1,"div",47),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.duration_intake.errors?null:e.f.duration_intake.errors.required)}}function Mt(i,s){if(1&i&&(t.TgZ(0,"option",51),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function Qt(i,s){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function Dt(i,s){if(1&i&&(t.TgZ(0,"div",46),t.YNc(1,Qt,2,1,"div",47),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.duration_frequency.errors?null:e.f.duration_frequency.errors.required)}}function St(i,s){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function Ot(i,s){if(1&i&&(t.TgZ(0,"div",46),t.YNc(1,St,2,1,"div",47),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.quantity.errors?null:e.f.quantity.errors.required)}}function Ht(i,s){if(1&i&&(t.TgZ(0,"option",51),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function Yt(i,s){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function Et(i,s){if(1&i&&(t.TgZ(0,"div",46),t.YNc(1,Yt,2,1,"div",47),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.quantity_preparation.errors?null:e.f.quantity_preparation.errors.required)}}function jt(i,s){if(1&i&&(t.TgZ(0,"option",51),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function Lt(i,s){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function Pt(i,s){if(1&i&&(t.TgZ(0,"div",46),t.YNc(1,Lt,2,1,"div",47),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.medicine_purpose.errors?null:e.f.medicine_purpose.errors.required)}}function Kt(i,s){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.required_message," ")}}function Gt(i,s){if(1&i&&(t.TgZ(0,"div",46),t.YNc(1,Kt,2,1,"div",47),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.f.purpose_other.errors?null:e.f.purpose_other.errors.required)}}function $t(i,s){if(1&i&&(t.TgZ(0,"div",30)(1,"label",52),t._uU(2,"Purpose remarks"),t.qZA(),t._UZ(3,"input",53),t.YNc(4,Gt,2,1,"div",14),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(3,b,e.is_saving&&e.f.purpose_other.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(5,x,e.is_saving&&e.f.purpose_other.errors)),t.xp6(1),t.Q6J("ngIf",e.is_saving&&e.f.purpose_other.errors)}}function zt(i,s){if(1&i&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.xp6(1),t.Oqu(e.value)}}function Vt(i,s){if(1&i&&(t.TgZ(0,"div",54)(1,"div",55)(2,"ul",56),t.YNc(3,zt,2,1,"li",57),t.ALo(4,"keyvalue"),t.qZA()()()),2&i){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",t.lcZ(4,1,e.submit_errors))}}let Bt=(()=>{var i;class s{get f(){return this.prescriptionForm.controls}closeModal(){this.toggleForm.emit()}onSubmit(){this.is_loading=!0,console.log(this.prescriptionForm),this.prescriptionForm.valid&&(this.selected_drug.new_drug?this.http.post("medicine/list",this.prescriptionForm.value).subscribe({next:n=>{this.savePrescription()},error:n=>{this.is_loading=!1,this.http.showError(n.error.message,"Medicine List")}}):(this.is_loading=!1,this.savePrescription()))}savePrescription(){let n;n=this.selected_drug&&this.selected_drug.id?this.http.update("medicine/prescriptions/",this.selected_drug.id,this.prescriptionForm.value):this.http.post("medicine/prescriptions",this.prescriptionForm.value),n.subscribe({next:o=>{this.is_loading=!1,this.toastr.success("Successfully added","Prescription"),this.closeModal()},error:o=>{this.is_loading=!1,this.http.showError(o.error.message,"Prescription")}})}loadLibraries(){this.libraries.forEach(n=>{this.http.get("libraries/"+n.location).subscribe({next:o=>{this[n.var_name]=o.data},error:o=>console.log(o),complete:()=>this.show_form=!0})})}constructor(n,o,l){this.http=n,this.toastr=o,this.formBuilder=l,this.toggleForm=new t.vpe,this.faCircleNotch=d.IJ7,this.faSave=h.r6l,this.is_saving=!1,this.show_form=!1,this.membership_types=[],this.prescriptionForm=new r.cw({brand_name:new r.NI(null),medicine_name:new r.NI(null),medicine_code:new r.NI(null),patient_id:new r.NI(null),prescribed_by:new r.NI(null),consult_id:new r.NI(null),prescription_date:new r.NI(null),konsulta_medicine_code:new r.NI(null),added_medicine:new r.NI(null),dosage_quantity:new r.NI(null),dosage_uom:new r.NI(null),dose_regimen:new r.NI(null),medicine_purpose:new r.NI(null),purpose_other:new r.NI(null),duration_intake:new r.NI(null),duration_frequency:new r.NI(null),quantity:new r.NI(null),quantity_preparation:new r.NI(null),instruction_quantity:new r.NI(null),medicine_route_code:new r.NI(null),remarks:new r.NI(null)}),this.is_loading=!1,this.libraries=[{var_name:"drug_uom",location:"unit-of-measurements"},{var_name:"drug_regimen",location:"dose-regimens"},{var_name:"drug_purpose",location:"purposes"},{var_name:"drug_frequency",location:"duration-frequencies"},{var_name:"drug_preparation",location:"preparations"},{var_name:"drug_route",location:"medicine-route"}],this.add_drug=!1}checkPurpose(){"99"===this.prescriptionForm.value.medicine_purpose?this.prescriptionForm.controls.purpose_other.enable():this.prescriptionForm.controls.purpose_other.disable()}patchValue(){this.prescriptionForm.patchValue({konsulta_medicine_code:this.selected_drug.konsulta_medicine?this.selected_drug.konsulta_medicine.code:null,added_medicine:this.selected_drug.added_medicine?this.selected_drug.added_medicine:null,dosage_quantity:this.selected_drug.dosage_quantity,dosage_uom:this.selected_drug.unit_of_measurement?this.selected_drug.unit_of_measurement.code:null,dose_regimen:this.selected_drug.regimen?this.selected_drug.regimen.code:null,medicine_purpose:this.selected_drug.purpose?this.selected_drug.purpose.code:null,duration_intake:this.selected_drug.duration_intake,duration_frequency:this.selected_drug.frequency?this.selected_drug.frequency.code:null,quantity:this.selected_drug.quantity,quantity_preparation:this.selected_drug.preparation?this.selected_drug.preparation.code:null,instruction_quantity:this.selected_drug.instruction_quantity??1,medicine_route_code:this.selected_drug.medicine_route?this.selected_drug.medicine_route.code:null,remarks:this.selected_drug.remarks}),this.selected_drug&&this.selected_drug.new_drug&&this.prescriptionForm.patchValue({konsulta_medicine_code:this.selected_drug.code}),this.selected_drug.konsulta_medicine?this.prescriptionForm.controls.added_medicine.disable():this.selected_drug.added_medicine&&(this.prescriptionForm.controls.added_medicine.enable(),this.prescriptionForm.controls.konsulta_medicine_code.disable()),this.checkPurpose()}ngOnChanges(n){this.prescriptionForm=this.formBuilder.nonNullable.group({brand_name:[null],patient_id:[this.consult_details.patient.id],prescribed_by:[this.user_id,[r.kI.required]],consult_id:[this.consult_details.id,[r.kI.required]],prescription_date:[(0,a.p6)(this.consult_details.consult_date,"yyyy-MM-dd","en","Asia/Manila"),[r.kI.required]],konsulta_medicine_code:[null,[r.kI.required]],added_medicine:[null],dosage_quantity:[null,[r.kI.required]],dosage_uom:[null,[r.kI.required]],dose_regimen:[null,[r.kI.required]],medicine_purpose:[null,[r.kI.required]],purpose_other:[null,[r.kI.required]],duration_intake:[null,[r.kI.required]],duration_frequency:[null,[r.kI.required]],quantity:[null,[r.kI.required]],quantity_preparation:[null,[r.kI.required]],instruction_quantity:[1],medicine_route_code:[null,[r.kI.required]],remarks:[null]}),this.selected_drug?this.patchValue():this.prescriptionForm.controls.konsulta_medicine_code.disable()}}return(i=s).\u0275fac=function(n){return new(n||i)(t.Y36(f.O),t.Y36(v._W),t.Y36(r.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-drug-form"]],inputs:{selected_drug:"selected_drug",consult_details:"consult_details",drug_uom:"drug_uom",drug_regimen:"drug_regimen",drug_purpose:"drug_purpose",drug_frequency:"drug_frequency",drug_preparation:"drug_preparation",drug_route:"drug_route",user_id:"user_id"},outputs:{toggleForm:"toggleForm"},standalone:!0,features:[t.TTD,t.jDz],decls:77,vars:87,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white","pl-5"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"w-full","max-w-3xl","text-left","text-gray-500","dark:text-gray-400",3,"formGroup"],[1,"grid","grid-cols-3","gap-4","pb-5","px-10"],["class","col-span-3 mt-5 mx-5 px-5 py-3 rounded-md border border-yellow-500 bg-yellow-100",4,"ngIf"],["class","col-span-3 mt-5 mx-5",4,"ngIf"],["class","col-span-3 text-sm ",4,"ngIf"],[1,"col-span-1","text-sm"],["for","dosage_quantity",1,"font-semibold",3,"ngClass"],["name","dosage_quantity","id","dosage_quantity","formControlName","dosage_quantity","type","number",1,"input",3,"ngClass"],["class","invalid-alert",4,"ngIf"],["for","dosage_uom",1,"font-semibold",3,"ngClass"],["name","dosage_uom","id","dosage_uom","formControlName","dosage_uom",1,"input",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["for","dose_regimen",1,"font-semibold",3,"ngClass"],["name","dose_regimen","id","dose_regimen","formControlName","dose_regimen",1,"input",3,"ngClass"],["for","medicine_route_code",1,"font-semibold",3,"ngClass"],["name","route","id","medicine_route_code","formControlName","medicine_route_code",1,"input",3,"ngClass"],["for","duration_intake",1,"font-semibold",3,"ngClass"],["name","duration_intake","id","duration_intake","formControlName","duration_intake","type","number",1,"input",3,"ngClass"],["for","duration_frequency",1,"font-semibold",3,"ngClass"],["name","duration_frequency","id","duration_frequency","formControlName","duration_frequency",1,"input",3,"ngClass"],["for","quantity",1,"font-semibold",3,"ngClass"],["name","quantity","id","quantity","formControlName","quantity","type","number",1,"input",3,"ngClass"],["for","quantity_preparation",1,"font-semibold",3,"ngClass"],["name","quantity_preparation","id","quantity_preparation","formControlName","quantity_preparation",1,"input",3,"ngClass"],[1,"col-span-3","text-sm"],["for","medicine_purpose",1,"font-semibold",3,"ngClass"],["name","medicine_purpose","id","medicine_purpose","formControlName","medicine_purpose",1,"input",3,"ngClass","change"],["class","col-span-3 text-sm",4,"ngIf"],["for","remarks",1,"font-semibold",3,"ngClass"],["name","remarks","id","remarks","formControlName","remarks","type","text",1,"input",3,"ngClass"],["id","show_errors","class","relative mx-10 col-span-8 bg-red-200 rounded border border-red-300 text-red-900 text-sm mb-5",4,"ngIf"],[1,"flex","justify-end","mr-10","py-3","rounded-b"],["type","button",1,"btn-save","px-10","bg-gray-400","mr-5",3,"disabled","click"],["type","button",1,"btn-save","px-10","disabled:bg-gray-300",3,"disabled","click"],[3,"icon","spin"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"col-span-3","mt-5","mx-5","px-5","py-3","rounded-md","border","border-yellow-500","bg-yellow-100"],[1,"col-span-3","mt-5","mx-5"],["for","brand_name",1,"font-semibold",3,"ngClass"],["name","brand_name","id","brand_name","formControlName","brand_name","type","text",1,"input",3,"ngClass"],[1,"invalid-alert"],[4,"ngIf"],[1,"font-semibold"],["for","added_medicine",1,"font-semibold",3,"ngClass"],["name","added_medicine","id","added_medicine","formControlName","added_medicine","type","text",1,"input",3,"ngClass"],[3,"value"],["for","purpose_other",1,"font-semibold",3,"ngClass"],["name","purpose_other","id","purpose_other","formControlName","purpose_other","type","text",1,"input",3,"ngClass"],["id","show_errors",1,"relative","mx-10","col-span-8","bg-red-200","rounded","border","border-red-300","text-red-900","text-sm","mb-5"],[1,"block","p-3","pl-10"],[1,"list-disc"],[4,"ngFor","ngForOf"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5," Prescribe medicine "),t.qZA()(),t.TgZ(6,"div",5)(7,"form",6)(8,"div",7),t.YNc(9,pt,4,0,"div",8),t.YNc(10,ft,5,7,"div",9),t.YNc(11,ht,4,1,"div",9),t.YNc(12,xt,5,7,"div",10),t.TgZ(13,"div",11)(14,"label",12),t._uU(15,"Dosage Qty."),t.qZA(),t._UZ(16,"input",13),t.YNc(17,Zt,2,1,"div",14),t.qZA(),t.TgZ(18,"div",11)(19,"label",15),t._uU(20,"Dosage unit"),t.qZA(),t.TgZ(21,"select",16),t.YNc(22,yt,2,2,"option",17),t.qZA(),t.YNc(23,wt,2,1,"div",14),t.qZA(),t.TgZ(24,"div",11)(25,"label",18),t._uU(26,"Dosage regimen"),t.qZA(),t.TgZ(27,"select",19),t.YNc(28,qt,2,2,"option",17),t.qZA(),t.YNc(29,Jt,2,1,"div",14),t.qZA(),t.TgZ(30,"div",11)(31,"label",20),t._uU(32,"Medicine Route"),t.qZA(),t.TgZ(33,"select",21),t.YNc(34,Nt,2,2,"option",17),t.qZA(),t.YNc(35,It,2,1,"div",14),t.qZA(),t.TgZ(36,"div",11)(37,"label",22),t._uU(38,"Duration"),t.qZA(),t._UZ(39,"input",23),t.YNc(40,Ft,2,1,"div",14),t.qZA(),t.TgZ(41,"div",11)(42,"label",24),t._uU(43,"Duration frequency"),t.qZA(),t.TgZ(44,"select",25),t.YNc(45,Mt,2,2,"option",17),t.qZA(),t.YNc(46,Dt,2,1,"div",14),t.qZA(),t.TgZ(47,"div",11)(48,"label",26),t._uU(49,"Quantity"),t.qZA(),t._UZ(50,"input",27),t.YNc(51,Ot,2,1,"div",14),t.qZA(),t.TgZ(52,"div",11)(53,"label",28),t._uU(54,"Preparation"),t.qZA(),t.TgZ(55,"select",29),t.YNc(56,Ht,2,2,"option",17),t.qZA(),t.YNc(57,Et,2,1,"div",14),t.qZA(),t.TgZ(58,"div",30)(59,"label",31),t._uU(60,"Medicine purpose"),t.qZA(),t.TgZ(61,"select",32),t.NdJ("change",function(){return o.checkPurpose()}),t.YNc(62,jt,2,2,"option",17),t.qZA(),t.YNc(63,Pt,2,1,"div",14),t.qZA(),t.YNc(64,$t,5,7,"div",33),t.TgZ(65,"div",30)(66,"label",34),t._uU(67,"Remarks"),t.qZA(),t._UZ(68,"input",35),t.qZA()(),t.YNc(69,Vt,5,3,"div",36),t.qZA()(),t.TgZ(70,"div",37)(71,"button",38),t.NdJ("click",function(){return o.closeModal()}),t._uU(72,"Close"),t.qZA(),t.TgZ(73,"button",39),t.NdJ("click",function(){return o.onSubmit()}),t._UZ(74,"fa-icon",40),t._uU(75),t.qZA()()()()(),t._UZ(76,"div",41)),2&n&&(t.xp6(7),t.Q6J("formGroup",o.prescriptionForm),t.xp6(2),t.Q6J("ngIf",o.selected_drug.new_drug),t.xp6(1),t.Q6J("ngIf",o.selected_drug.new_drug),t.xp6(1),t.Q6J("ngIf",!o.add_drug&&!o.f.added_medicine.value),t.xp6(1),t.Q6J("ngIf",o.f.added_medicine.value),t.xp6(2),t.Q6J("ngClass",t.VKq(47,b,o.is_saving&&o.f.dosage_quantity.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(49,x,o.is_saving&&o.f.dosage_quantity.errors)),t.xp6(1),t.Q6J("ngIf",o.is_saving&&o.f.dosage_quantity.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(51,b,o.is_saving&&o.f.dosage_uom.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(53,x,o.is_saving&&o.f.dosage_uom.errors)),t.xp6(1),t.Q6J("ngForOf",o.drug_uom),t.xp6(1),t.Q6J("ngIf",o.is_saving&&o.f.dosage_uom.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(55,b,o.is_saving&&o.f.dose_regimen.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(57,x,o.is_saving&&o.f.dose_regimen.errors)),t.xp6(1),t.Q6J("ngForOf",o.drug_regimen),t.xp6(1),t.Q6J("ngIf",o.is_saving&&o.f.dose_regimen.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(59,b,o.is_saving&&o.f.medicine_route_code.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(61,x,o.is_saving&&o.f.medicine_route_code.errors)),t.xp6(1),t.Q6J("ngForOf",o.drug_route),t.xp6(1),t.Q6J("ngIf",o.is_saving&&o.f.medicine_route_code.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(63,b,o.is_saving&&o.f.duration.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(65,x,o.is_saving&&o.f.duration_intake.errors)),t.xp6(1),t.Q6J("ngIf",o.is_saving&&o.f.duration_intake.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(67,b,o.is_saving&&o.f.duration_frequency.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(69,x,o.is_saving&&o.f.duration_frequency.errors)),t.xp6(1),t.Q6J("ngForOf",o.drug_frequency),t.xp6(1),t.Q6J("ngIf",o.is_saving&&o.f.duration_frequency.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(71,b,o.is_saving&&o.f.quantity.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(73,x,o.is_saving&&o.f.quantity.errors)),t.xp6(1),t.Q6J("ngIf",o.is_saving&&o.f.quantity.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(75,b,o.is_saving&&o.f.quantity_preparation.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(77,x,o.is_saving&&o.f.quantity_preparation.errors)),t.xp6(1),t.Q6J("ngForOf",o.drug_preparation),t.xp6(1),t.Q6J("ngIf",o.is_saving&&o.f.quantity_preparation.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(79,b,o.is_saving&&o.f.medicine_purpose.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(81,x,o.is_saving&&o.f.medicine_purpose.errors)),t.xp6(1),t.Q6J("ngForOf",o.drug_purpose),t.xp6(1),t.Q6J("ngIf",o.is_saving&&o.f.medicine_purpose.errors),t.xp6(1),t.Q6J("ngIf","99"===o.prescriptionForm.value.medicine_purpose),t.xp6(2),t.Q6J("ngClass",t.VKq(83,b,o.is_saving&&o.f.remarks.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(85,x,o.is_saving&&o.f.remarks.errors)),t.xp6(1),t.Q6J("ngIf",o.submit_errors),t.xp6(2),t.Q6J("disabled",o.is_loading),t.xp6(2),t.Q6J("disabled",o.is_loading||o.prescriptionForm.invalid),t.xp6(1),t.Q6J("icon",o.is_loading?o.faCircleNotch:o.faSave)("spin",o.is_loading),t.xp6(1),t.hij(" ",o.is_loading?"Saving":"Save"," "))},dependencies:[a.ez,a.mk,a.sg,a.O5,a.Nd,g.uH,g.BN,r.u5,r._Y,r.YN,r.Kr,r.Fj,r.wV,r.EJ,r.JJ,r.JL,r.UX,r.sg,r.u]}),s})();function Rt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",27)(1,"button",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.showLibDrugs())}),t._uU(2," Show Library "),t.qZA()()}}function Wt(i,s){if(1&i&&(t.TgZ(0,"tr")(1,"td",23)(2,"div",24)(3,"div",25),t._uU(4," No records found... "),t.qZA(),t.YNc(5,Rt,3,0,"div",26),t.qZA()()()),2&i){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",!e.lib_drug_table)}}function Xt(i,s){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t._UZ(2,"br"),t._uU(3),t._UZ(4,"br"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.konsulta_medicine?e.konsulta_medicine.generic.desc:""," "),t.xp6(2),t.hij(" ",e.konsulta_medicine?e.konsulta_medicine.desc:""," ")}}function te(i,s){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t._UZ(2,"br"),t.qZA()),2&i){const e=t.oxw().$implicit;let n;t.xp6(1),t.hij("",null!==(n=e.added_medicine)&&void 0!==n?n:""," ")}}function ee(i,s){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.generic_desc," ")}}function ie(i,s){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.lnq(" ",e.dosage_quantity," ",e.unit_of_measurement.desc," (",e.unit_of_measurement.code,") ")}}function oe(i,s){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.desc," ")}}function ne(i,s){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t._UZ(2,"br"),t._uU(3),t._UZ(4,"br"),t._uU(5),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.regimen.desc," "),t.xp6(2),t.AsE(" ",e.duration_intake," ",e.frequency.desc," "),t.xp6(2),t.AsE(" ",e.quantity," ",e.preparation.desc," ")}}function se(i,s){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t._UZ(2,"br"),t._uU(3),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.AsE(" ",e.unit_desc," ",e.package_desc," "),t.xp6(2),t.hij(" ",e.form_desc," ")}}const re=function(i){return{"bg-gray-50":i}};function le(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"tr",29),t.NdJ("click",function(){const l=t.CHM(e).$implicit,_=t.oxw();return t.KtG(_.selectDrugs(l))}),t.TgZ(1,"th",30)(2,"span"),t._uU(3),t._UZ(4,"br"),t.qZA(),t.YNc(5,Xt,5,2,"span",18),t.YNc(6,te,3,1,"span",18),t.YNc(7,ee,2,1,"span",18),t.qZA(),t.TgZ(8,"td",31),t.YNc(9,ie,2,3,"span",18),t.YNc(10,oe,2,1,"span",18),t.qZA(),t.TgZ(11,"td",31),t.YNc(12,ne,6,5,"span",18),t.YNc(13,se,4,3,"span",18),t.qZA(),t._UZ(14,"td",31),t.qZA()}if(2&i){const e=s.$implicit;t.Q6J("ngClass",t.VKq(9,re,s.odd)),t.xp6(3),t.Oqu(e.brand_name),t.xp6(2),t.Q6J("ngIf",e.konsulta_medicine),t.xp6(1),t.Q6J("ngIf",e.added_medicine),t.xp6(1),t.Q6J("ngIf",!e.id),t.xp6(2),t.Q6J("ngIf",e.id),t.xp6(1),t.Q6J("ngIf",!e.id),t.xp6(2),t.Q6J("ngIf",e.id),t.xp6(1),t.Q6J("ngIf",!e.id)}}function ae(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",32)(1,"div",33)(2,"div",34)(3,"p",35),t._uU(4," Showing "),t.TgZ(5,"span",36),t._uU(6),t.qZA(),t._uU(7," to "),t.TgZ(8,"span",36),t._uU(9),t.qZA(),t._uU(10," of "),t.TgZ(11,"span",36),t._uU(12),t.qZA(),t._uU(13," results "),t.qZA()(),t.TgZ(14,"div")(15,"nav",37)(16,"button",38),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.loadMedicineList(1))}),t._UZ(17,"fa-icon",39),t.qZA(),t.TgZ(18,"button",40),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.loadMedicineList(o.current_page-1))}),t._UZ(19,"fa-icon",39),t._uU(20,"Previous "),t.qZA(),t.TgZ(21,"button",40),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.loadMedicineList(o.current_page+1))}),t._uU(22," Next"),t._UZ(23,"fa-icon",41),t.qZA(),t.TgZ(24,"button",42),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.loadMedicineList(o.last_page))}),t._UZ(25,"fa-icon",41),t.qZA()()()()()}if(2&i){const e=t.oxw();t.xp6(6),t.Oqu(e.from),t.xp6(3),t.Oqu(e.to),t.xp6(3),t.Oqu(e.total),t.xp6(4),t.Q6J("disabled",1===e.current_page),t.xp6(1),t.Q6J("icon",e.faAnglesLeft),t.xp6(1),t.Q6J("disabled",1===e.current_page),t.xp6(1),t.Q6J("icon",e.faChevronLeft),t.xp6(2),t.Q6J("disabled",e.current_page===e.last_page),t.xp6(2),t.Q6J("icon",e.faChevronRight),t.xp6(1),t.Q6J("disabled",e.current_page===e.last_page),t.xp6(1),t.Q6J("icon",e.faAnglesRight)}}let de=(()=>{var i;class s{selectDrugs(n){delete n.id,n.new_drug=this.lib_drug_table,this.openAddForm.emit(n),this.toggleList.emit()}closeModal(){this.toggleList.emit()}showLibDrugs(){this.lib_drug_table=!0,this.loadMedicineList(1)}addNewDrug(n){this.openAddForm.emit(n),this.toggleList.emit()}loadMedicineList(n){let o=this.lib_drug_table?"libraries/konsulta-medicines":"medicine/list",l={params:{}};this.search_item&&(l.params["filter[search]"]=this.search_item),n&&(l.params.page=n),l.params.per_page=this.per_page,this.http.get(o,l).subscribe({next:_=>{this.drug_list=_.data,this.current_page=_.meta.current_page,this.last_page=_.meta.last_page,this.from=_.meta.from,this.to=_.meta.to,this.total=_.meta.total},error:_=>console.log(_)})}constructor(n){this.http=n,this.openAddForm=new t.vpe,this.toggleList=new t.vpe,this.faAnglesLeft=d._Wx,this.faChevronLeft=d.A35,this.faChevronRight=d._tD,this.faAnglesRight=d.ccb,this.faSearch=d.wn1,this.faEdit=d.Xcf,this.faAdd=d.XSk,this.faCircleXmark=d.WA2,this.is_updating=!1,this.show_lib_drug=!1,this.per_page=10,this.lib_drug_table=!1}ngOnInit(){this.loadMedicineList()}}return(i=s).\u0275fac=function(n){return new(n||i)(t.Y36(f.O))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-drug-list"]],outputs:{openAddForm:"openAddForm",toggleList:"toggleList"},standalone:!0,features:[t.jDz],decls:30,vars:6,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-5xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"flex","justify-end"],[1,"border","border-gray-400","rounded-md","bg-white"],["type","text","placeholder","Search drugs",1,"form-input","border-0","text-sm","p-1","m-1","border-r","border-gray-400",3,"ngModel","ngModelChange","keyup.enter"],["type","button",1,"text-blue-500","w-9","h-9",3,"click"],[1,"-ml-1",3,"icon"],["type","button",1,"text-white","w-9","h-9",3,"click"],[1,"-mr-4",3,"icon"],[1,"h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"overflow-x-auto","relative","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400","mb-5"],[1,"sticky","top-0","text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6"],[1,"overflow-y-auto"],[4,"ngIf"],["class","bg-white border-t","class","hover:bg-blue-200 cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"flex","justify-end","py-4","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["class","bg-white py-3 flex items-center justify-between sm:px-6",4,"ngIf"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],["colspan","9"],[1,"grid","grid-cols-1","w-full","mt-10"],[1,"text-center","italic"],["class","flex justify-center mt-3",4,"ngIf"],[1,"flex","justify-center","mt-3"],["type","button",1,"btn-save",3,"click"],[1,"hover:bg-blue-200","cursor-pointer",3,"ngClass","click"],["scope","row",1,"py-4","px-6","font-medium","whitespace-nowrap"],[1,"py-4","px-6"],[1,"bg-white","py-3","flex","items-center","justify-between","sm:px-6"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"mr-3"],[1,"text-sm","text-gray-700"],[1,"font-medium"],["aria-label","Pagination",1,"relative","z-0","inline-flex","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"disabled","click"],[1,"block","h-15","w-15","text-gray-500","pr-1",3,"icon"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","bg-white","text-sm","font-medium","text-gray-700","hover:bg-gray-50",3,"disabled","click"],[1,"h-5","w-5","text-gray-500",3,"icon"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"disabled","click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5," Drugs library "),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"input",7),t.NdJ("ngModelChange",function(_){return o.search_item=_})("keyup.enter",function(){return o.loadMedicineList()}),t.qZA(),t.TgZ(9,"button",8),t.NdJ("click",function(){return o.loadMedicineList()}),t._UZ(10,"fa-icon",9),t.qZA()(),t.TgZ(11,"button",10),t.NdJ("click",function(){return o.closeModal()}),t._UZ(12,"fa-icon",11),t.qZA()()(),t.TgZ(13,"div",12)(14,"div",13)(15,"table",14)(16,"thead",15)(17,"tr")(18,"th",16),t._uU(19,"Drug Name"),t.qZA(),t.TgZ(20,"th",16),t._uU(21,"Dosage"),t.qZA(),t.TgZ(22,"th",16),t._uU(23,"Package"),t.qZA()()(),t.TgZ(24,"tbody",17),t.YNc(25,Wt,6,1,"tr",18),t.YNc(26,le,15,11,"tr",19),t.qZA()()()(),t.TgZ(27,"div",20),t.YNc(28,ae,26,11,"div",21),t.qZA()()()(),t._UZ(29,"div",22)),2&n&&(t.xp6(8),t.Q6J("ngModel",o.search_item),t.xp6(2),t.Q6J("icon",o.faSearch),t.xp6(2),t.Q6J("icon",o.faCircleXmark),t.xp6(13),t.Q6J("ngIf",0===(null==o.drug_list?null:o.drug_list.length)||!o.drug_list),t.xp6(1),t.Q6J("ngForOf",o.drug_list),t.xp6(2),t.Q6J("ngIf",(null==o.drug_list?null:o.drug_list.length)>=1))},dependencies:[a.ez,a.mk,a.sg,a.O5,g.uH,g.BN,r.u5,r.Fj,r.JJ,r.On]}),s})();function _e(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.toggleModal())}),t._UZ(1,"fa-icon",20),t._uU(2," epress "),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faReceipt)}}function ce(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.navigateTo("dispensing"))}),t._UZ(1,"fa-icon",20),t._uU(2," dispensing "),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faPrescriptionBottleMedical)}}function ue(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.toggleList())}),t._UZ(1,"fa-icon",20),t._uU(2," add drugs "),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faAdd)}}function pe(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"tr",29)(1,"td",30),t._uU(2),t._UZ(3,"br")(4,"br"),t.qZA(),t.TgZ(5,"td",31),t._uU(6),t._UZ(7,"br")(8,"br"),t._uU(9),t.qZA(),t.TgZ(10,"td",31),t._uU(11),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"td",31),t._uU(14),t.qZA(),t.TgZ(15,"td",31),t._uU(16),t.qZA(),t.TgZ(17,"td",32)(18,"button",33),t.NdJ("click",function(){const l=t.CHM(e).$implicit,_=t.oxw(2);return t.KtG(_.openAddForm(l))}),t._UZ(19,"fa-icon",34),t.qZA(),t.TgZ(20,"button",35),t.NdJ("click",function(){const l=t.CHM(e).$implicit,_=t.oxw(2);return t.KtG(_.toggleModal("delete-item",l))}),t._UZ(21,"fa-icon",36),t.qZA()()()}if(2&i){const e=s.$implicit,n=t.oxw(2);t.xp6(2),t.AsE(" ",e.konsulta_medicine?e.konsulta_medicine.desc:e.added_medicine," ",e.medicine?e.medicine.gen_name:""," "),t.xp6(4),t.xDo(" ",e.dosage_quantity," ",e.unit_of_measurement.desc," ",e.regimen.desc," ",e.duration_intake," ",e.frequency.desc," "),t.xp6(3),t.hij(" Remarks: ",e.remarks," "),t.xp6(2),t.hij(" ",t.Dn7(12,13,e.prescription_date,"MM/dd/yyyy","Asia/Manila")," "),t.xp6(3),t.hij(" ",e.quantity," "),t.xp6(2),t.hij(" ",e.preparation.desc," "),t.xp6(3),t.Q6J("icon",n.faEdit),t.xp6(2),t.Q6J("icon",n.faTrashCan)}}function me(i,s){if(1&i&&(t.TgZ(0,"table",23)(1,"thead")(2,"tr",24)(3,"th",25),t._uU(4,"Medicine"),t.qZA(),t.TgZ(5,"th",25),t._uU(6,"Intake"),t.qZA(),t.TgZ(7,"th",26),t._uU(8,"Prescription Date"),t.qZA(),t.TgZ(9,"th",26),t._uU(10,"Quantity"),t.qZA(),t.TgZ(11,"th",26),t._uU(12,"Unit of Measurement"),t.qZA(),t.TgZ(13,"th",27),t._uU(14,"Action"),t.qZA()()(),t.TgZ(15,"tbody"),t.YNc(16,pe,22,17,"tr",28),t.qZA()()),2&i){const e=t.oxw();t.xp6(16),t.Q6J("ngForOf",e.prescriptions)("ngForTrackBy",e.identify)}}function ge(i,s){if(1&i&&t._UZ(0,"fa-icon",44),2&i){const e=t.oxw(3);t.Q6J("icon",e.faSpinner)}}function fe(i,s){if(1&i&&t._UZ(0,"fa-icon",45),2&i){const e=t.oxw(3);t.Q6J("icon",e.faSave)}}function he(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.onSubmit())}),t.YNc(1,ge,1,1,"fa-icon",42),t.YNc(2,fe,1,1,"fa-icon",43),t._uU(3),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("ngIf",e.is_saving),t.xp6(1),t.Q6J("ngIf",!e.is_saving),t.xp6(1),t.hij(" ",e.is_saving?"Saving":"Save"," ")}}function ve(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"div",37)(2,"textarea",38),t.NdJ("ngModelChange",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.consult_notes.plan=o)}),t.qZA()(),t.TgZ(3,"div",39),t.YNc(4,he,4,4,"button",40),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(2),t.Q6J("disabled",e.consult_done||!e.allowed_to_edit)("ngModel",e.consult_notes.plan),t.xp6(2),t.Q6J("ngIf",!e.consult_done&&e.allowed_to_edit)}}function be(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"app-drug-list",46),t.NdJ("openAddForm",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.openAddForm(o))})("toggleList",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.toggleList())}),t.qZA()}}function xe(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"app-drug-form",47),t.NdJ("toggleForm",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.toggleForm())}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("selected_drug",e.selected_drug)("consult_details",e.consult_details)("drug_uom",e.drug_uom)("drug_regimen",e.drug_regimen)("drug_purpose",e.drug_purpose)("drug_frequency",e.drug_frequency)("drug_preparation",e.drug_preparation)("drug_route",e.drug_route)("user_id",e.user_id)}}function Ce(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"app-epres",48),t.NdJ("toggleModal",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.toggleModal())}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("prescriptions",e.prescriptions)("consult_details",e.consult_details)}}function Ze(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"app-delete-item",49),t.NdJ("toggleModal",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.toggleModal(o))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("delete_id",e.delete_id)("delete_desc",e.delete_desc)("url",e.url)}}const Q=function(i){return{"rounded-b":i}};let D=(()=>{var i;class s{navigateTo(n){this.router.navigate(["/patient/"+n,{id:this.consult_details.patient.id,consult_id:this.consult_details.id}])}openDeleteForm(n){this.selected_drug=n,this.toggleDeleteForm()}onSubmit(){this.is_saving=!0,this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,plan:this.consult_notes.plan}).subscribe({next:o=>{this.is_saving=!1,this.showToastr()},error:o=>{this.http.showError(o.error.message,"Prescription")}})}showToastr(){this.toastr.success("Successfully recorded!","Treatment plan")}openEditForm(n){this.selected_drug=n}openAddForm(n){this.selected_drug=n,this.toggleForm()}openDeleteModal(n){this.delete_id=n.id,this.modal["delete-item"]=!this.modal["delete-item"]}toggleDeleteForm(){this.show_delete_form=!this.show_delete_form,!1===this.show_delete_form&&this.loadPrescriptions()}toggleForm(){this.drug_uom&&this.drug_uom&&this.drug_purpose&&this.drug_frequency&&this.drug_preparation?this.show_form=!this.show_form:this.loadLibraries(),!1===this.show_form&&this.loadPrescriptions()}ngOnChanges(n){this.show_content=this.toggle_content,this.show_content_tx=this.toggle_content,!1===this.consult_details.consult_done&&(this.show_actions=!0),this.consult_details&&(this.consult_notes=this.consult_details.consult_notes,this.consult_done=this.consult_details.consult_done)}loadLibraries(){this.libraries.forEach((n,o)=>{this.http.get("libraries/"+n.location).subscribe({next:l=>{this[n.var_name]=l.data,this.libraries.length-1===o&&(this.show_form=!0)},error:l=>{this.http.showError(l.error.message,n.var_name+" Library")}})})}toggleModal(n,o){n?(o&&(this.delete_id=o.id),this.modal[n]=!this.modal[n],this.loadPrescriptions()):this.show_epress=!this.show_epress}toggleList(){this.show_list=!this.show_list}identify(n,o){return o.id}loadPrescriptions(){this.http.get("medicine/prescriptions",{params:{sort:"-prescription_date",consult_id:this.consult_details.id}}).subscribe({next:o=>{o.data.length>0&&(this.prescriptions=o.data)},error:o=>{this.http.showError(o.error.message,"Prescription Library")}})}constructor(n,o,l){this.http=n,this.toastr=o,this.router=l,this.show_content=!0,this.show_list=!1,this.show_form=!1,this.show_delete_form=!1,this.show_actions=!1,this.show_content_tx=!1,this.is_saving=!1,this.consult_done=!1,this.faChevronCircleUp=d._qI,this.faChevronCircleDown=d.yh$,this.faAdd=d.XSk,this.faSave=h.r6l,this.faSpinner=d.LM3,this.faEdit=h.Xcf,this.faTrash=d.$aW,this.faPrescriptionBottleMedical=d.v0s,this.faReceipt=d.dLy,this.faTrashCan=h.Vui,this.consult_notes={plan:null},this.modal=[],this.delete_desc="Prescription",this.url="medicine/prescriptions/",this.libraries=[{var_name:"drug_uom",location:"unit-of-measurements"},{var_name:"drug_regimen",location:"dose-regimens"},{var_name:"drug_purpose",location:"purposes"},{var_name:"drug_frequency",location:"duration-frequencies"},{var_name:"drug_preparation",location:"preparations"},{var_name:"drug_route",location:"medicine-route"}],this.show_epress=!1}ngOnInit(){this.loadPrescriptions()}}return(i=s).\u0275fac=function(n){return new(n||i)(t.Y36(f.O),t.Y36(v._W),t.Y36(u.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-prescription"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",with_credentials:"with_credentials",allowed_to_edit:"allowed_to_edit",user_id:"user_id"},standalone:!0,features:[t.TTD,t.jDz],decls:23,vars:16,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","flex","justify-between"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-amber-500","flex","justify-between",3,"ngClass"],["type","button","class","ml-3 text-sm bg-white text-green-500 px-3 rounded-full",3,"click",4,"ngIf"],["type","button","class","text-sm bg-white text-amber-500 px-3 rounded-full",3,"click",4,"ngIf"],["type","button","class","ml-3 text-sm bg-white text-blue-500 px-3 rounded-full",3,"click",4,"ngIf"],["class","w-full table-auto p-5",4,"ngIf"],[1,"rounded-md","border","border-solid","border-gray-300","mt-5"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[3,"openAddForm","toggleList",4,"ngIf"],[3,"selected_drug","consult_details","drug_uom","drug_regimen","drug_purpose","drug_frequency","drug_preparation","drug_route","user_id","toggleForm",4,"ngIf"],[3,"prescriptions","consult_details","toggleModal",4,"ngIf"],[3,"delete_id","delete_desc","url","toggleModal",4,"ngIf"],["type","button",1,"ml-3","text-sm","bg-white","text-green-500","px-3","rounded-full",3,"click"],[1,"pr-1",3,"icon"],["type","button",1,"text-sm","bg-white","text-amber-500","px-3","rounded-full",3,"click"],["type","button",1,"ml-3","text-sm","bg-white","text-blue-500","px-3","rounded-full",3,"click"],[1,"w-full","table-auto","p-5"],[1,"align-top"],["scope","col",1,"text-center","py-3","px-3","w-3/12"],["scope","col",1,"text-center","py-3","px-3","w-1/12"],["scope","col",1,"text-center","py-3","px-3","w-2/12"],["class","bg-white border-b last:border-0 text-sm align-top",4,"ngFor","ngForOf","ngForTrackBy"],[1,"bg-white","border-b","last:border-0","text-sm","align-top"],[1,"py-4","px-3"],["scope","row",1,"py-4","px-3","font-medium","text-gray-900"],[1,"text-sm","text-center","mb-5","align-middle"],[1,"mr-3",3,"click"],[1,"text-amber-500",3,"icon"],[3,"click"],[1,"text-rose-500",3,"icon"],[1,"grid","grid-cols-1","px-4","pb-4","mt-4"],["rows","3","id","plan","placeholder","Treatment plan",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"disabled","ngModel","ngModelChange"],[1,"flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"],[3,"openAddForm","toggleList"],[3,"selected_drug","consult_details","drug_uom","drug_regimen","drug_purpose","drug_frequency","drug_preparation","drug_route","user_id","toggleForm"],[3,"prescriptions","consult_details","toggleModal"],[3,"delete_id","delete_desc","url","toggleModal"]],template:function(n,o){1&n&&(t._UZ(0,"hr",0),t.TgZ(1,"div",1)(2,"div",2),t._uU(3," Prescription "),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"span",5),t._uU(7," Prescriptions "),t.TgZ(8,"div"),t.YNc(9,_e,3,1,"button",6),t.YNc(10,ce,3,1,"button",7),t.YNc(11,ue,3,1,"button",8),t.qZA()(),t.YNc(12,me,17,2,"table",9),t.qZA(),t.TgZ(13,"div",10)(14,"span",11),t._uU(15," Treatment Plan "),t.TgZ(16,"button",12),t.NdJ("click",function(){return o.show_content_tx=!o.show_content_tx}),t._UZ(17,"fa-icon",13),t.qZA()(),t.YNc(18,ve,5,3,"div",14),t.qZA()()(),t.YNc(19,be,1,0,"app-drug-list",15),t.YNc(20,xe,1,9,"app-drug-form",16),t.YNc(21,Ce,1,2,"app-epres",17),t.YNc(22,Ze,1,3,"app-delete-item",18)),2&n&&(t.xp6(6),t.Q6J("ngClass",t.VKq(12,Q,!o.show_content)),t.xp6(3),t.Q6J("ngIf",(null==o.consult_details?null:o.consult_details.is_konsulta)&&o.with_credentials&&o.prescriptions),t.xp6(1),t.Q6J("ngIf",o.prescriptions),t.xp6(1),t.Q6J("ngIf",o.show_actions),t.xp6(1),t.Q6J("ngIf",o.show_content),t.xp6(2),t.Q6J("ngClass",t.VKq(14,Q,!o.show_content_tx)),t.xp6(3),t.Q6J("icon",o.show_content_tx?o.faChevronCircleUp:o.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",o.show_content_tx),t.xp6(1),t.Q6J("ngIf",o.show_list),t.xp6(1),t.Q6J("ngIf",o.show_form),t.xp6(1),t.Q6J("ngIf",o.show_epress),t.xp6(1),t.Q6J("ngIf",o.modal["delete-item"]))},dependencies:[a.ez,a.mk,a.sg,a.O5,a.uU,g.uH,g.BN,Bt,de]}),s})();var S=c(279),O=c(9315);function Te(i,s){if(1&i&&(t.TgZ(0,"div",14),t._UZ(1,"input",15),t.TgZ(2,"label",16),t._uU(3),t.qZA()()),2&i){const e=s.$implicit;t.xp6(1),t.Q6J("formControlName",e.column_name),t.uIk("id",e.column_name),t.xp6(1),t.uIk("for",e.column_name),t.xp6(1),t.Oqu(e.desc)}}function we(i,s){if(1&i&&(t.TgZ(0,"div",14),t._UZ(1,"input",15),t.TgZ(2,"label",16),t._uU(3),t.qZA()()),2&i){const e=s.$implicit;t.xp6(1),t.Q6J("formControlName",e.column_name),t.xp6(2),t.Oqu(e.desc)}}let qe=(()=>{var i;class s{onSubmit(){this.is_saving=!0,this.http.post("dental/medical-social",this.medicalSocialForm.value).subscribe({next:n=>{this.toastr.success("Successfully "+(this.medicalSocialForm.value.id?"updated":"recorded"),"Medical & Social History"),this.loadSelectedConsult.emit(),this.is_saving=!1},error:n=>{this.http.showError(n.error.message,"Dental Medical and Social History")}})}loadLibraries(){const n=this.http.get("libraries/dental-medical-history"),o=this.http.get("libraries/dental-social-history");(0,O.D)([n,o]).subscribe({next:([l,_])=>{this.lib_medical_history=l.data,this.lib_social_history=_.data,this.show_form=!0},error:l=>{this.http.showError(l.error.message,"Dental History Library")}}),this.patchData()}patchData(){this.medicalSocialForm.patchValue(this.selected_visit.dentalMedicalSocials?{...this.selected_visit.dentalMedicalSocials}:{patient_id:this.selected_visit.patient.id})}addHospHistory(){}constructor(n,o){this.http=n,this.toastr=o,this.loadSelectedConsult=new t.vpe,this.faSpinner=d.LM3,this.faSave=h.r6l,this.faPlus=d.r8p,this.is_saving=!1,this.show_form=!1,this.medicalSocialForm=function ye(){return new r.cw({id:new r.NI(null),patient_id:new r.NI(null),allergies_flag:new r.NI(!1),hypertension_flag:new r.NI(!1),diabetes_flag:new r.NI(!1),blood_disorder_flag:new r.NI(!1),heart_disease_flag:new r.NI(!1),thyroid_flag:new r.NI(!1),hepatitis_flag:new r.NI(!1),malignancy_flag:new r.NI(!1),blood_transfusion_flag:new r.NI(!1),tattoo_flag:new r.NI(!1),medical_others_flag:new r.NI(!1),medical_remarks:new r.NI(""),sweet_flag:new r.NI(!1),tabacco_flag:new r.NI(!1),alcohol_flag:new r.NI(!1),nut_flag:new r.NI(!1),social_others_flag:new r.NI(!1),social_remarks:new r.NI("")})}()}ngOnInit(){this.loadLibraries()}}return(i=s).\u0275fac=function(n){return new(n||i)(t.Y36(f.O),t.Y36(v._W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-history"]],inputs:{selected_visit:"selected_visit"},outputs:{loadSelectedConsult:"loadSelectedConsult"},decls:23,vars:7,consts:[[1,"pt-5"],[1,"border","border-solid","border-gray-200","rounded-lg"],[1,"bg-blue-500","w-full","text-white","p-3","rounded-t-lg","font-semibold"],[3,"formGroup","ngSubmit"],[1,"col-span-1","px-5"],[1,"border-b","border-slate-200","my-3","text-gray-800","uppercase","text-sm"],[1,"grid","grid-cols-3","pl-3"],["class","col-span-1 mb-2",4,"ngFor","ngForOf"],[1,"block","m-3"],["rows","2","id","medical_remarks","formControlName","medical_remarks","placeholder","Remarks",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50"],["rows","2","id","social_remarks","formControlName","social_remarks","placeholder","Remarks",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50"],[1,"text-right","m-5"],["type","submit",1,"btn-save",3,"disabled"],[1,"mr-3",3,"icon","spin"],[1,"col-span-1","mb-2"],["type","checkbox",1,"input-checkbox",3,"formControlName"],[1,"pl-2","text-sm"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3," History "),t.qZA(),t.TgZ(4,"form",3),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(5,"div",4)(6,"div",5),t._uU(7," Medical History "),t.qZA(),t.TgZ(8,"div",6),t.YNc(9,Te,4,4,"div",7),t.qZA(),t.TgZ(10,"div",8),t._UZ(11,"textarea",9),t.qZA()(),t.TgZ(12,"div",4)(13,"div",5),t._uU(14," Dietary/Social History "),t.qZA(),t.TgZ(15,"div",6),t.YNc(16,we,4,2,"div",7),t.qZA(),t.TgZ(17,"div",8),t._UZ(18,"textarea",10),t.qZA()(),t.TgZ(19,"div",11)(20,"button",12),t._UZ(21,"fa-icon",13),t._uU(22),t.qZA()()()()()),2&n&&(t.xp6(4),t.Q6J("formGroup",o.medicalSocialForm),t.xp6(5),t.Q6J("ngForOf",o.lib_medical_history),t.xp6(7),t.Q6J("ngForOf",o.lib_social_history),t.xp6(4),t.Q6J("disabled",o.is_saving),t.xp6(1),t.Q6J("icon",o.is_saving?o.faSpinner:o.faSave)("spin",o.is_saving),t.xp6(1),t.hij(" ",o.is_saving?"Saving":"Save"," "))},dependencies:[a.sg,g.BN,r._Y,r.Fj,r.Wl,r.JJ,r.JL,r.sg,r.u]}),s})();const Ae=[11,12,13,14,15,16,17,18,21,22,23,24,25,26,27,28,31,32,33,34,35,36,37,38,41,42,43,44,45,46,47,48],Je=[51,52,53,54,55,61,62,63,64,65,71,72,73,74,75,81,82,83,84,85],Ne=[{id:"D",desc:"Decayed"},{id:"F",desc:"Filled"},{id:"JC",desc:"Jacket Crown"},{id:"M",desc:"Missing"},{id:"P",desc:"Pontic"},{id:"S",desc:"Supernumerary"},{id:"Un",desc:"Unerupted"},{id:"Dx",desc:"For Extraction"},{id:"Y",desc:"Sound/Sealed"}],H=[[{tooth_number:18,condition:null},{tooth_number:17,condition:null},{tooth_number:16,condition:null},{tooth_number:15,condition:null},{tooth_number:14,condition:null},{tooth_number:13,condition:null},{tooth_number:12,condition:null},{tooth_number:11,condition:null},{tooth_number:21,condition:null},{tooth_number:22,condition:null},{tooth_number:23,condition:null},{tooth_number:24,condition:null},{tooth_number:25,condition:null},{tooth_number:26,condition:null},{tooth_number:27,condition:null},{tooth_number:28,condition:null}],[{tooth_number:48,condition:null},{tooth_number:47,condition:null},{tooth_number:46,condition:null},{tooth_number:45,condition:null},{tooth_number:44,condition:null},{tooth_number:43,condition:null},{tooth_number:42,condition:null},{tooth_number:41,condition:null},{tooth_number:31,condition:null},{tooth_number:32,condition:null},{tooth_number:33,condition:null},{tooth_number:34,condition:null},{tooth_number:35,condition:null},{tooth_number:36,condition:null},{tooth_number:37,condition:null},{tooth_number:38,condition:null}]],Y=[[{tooth_number:55,condition:null},{tooth_number:54,condition:null},{tooth_number:53,condition:null},{tooth_number:52,condition:null},{tooth_number:51,condition:null},{tooth_number:61,condition:null},{tooth_number:62,condition:null},{tooth_number:63,condition:null},{tooth_number:64,condition:null},{tooth_number:65,condition:null}],[{tooth_number:85,condition:null},{tooth_number:84,condition:null},{tooth_number:83,condition:null},{tooth_number:82,condition:null},{tooth_number:81,condition:null},{tooth_number:71,condition:null},{tooth_number:72,condition:null},{tooth_number:73,condition:null},{tooth_number:74,condition:null},{tooth_number:75,condition:null}]];var q=c(3146);function Ie(i,s){if(1&i&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}let ke=(()=>{var i;class s{get f(){return this.toothServiceForm.controls}onSubmit(){this.is_saving=!0,this.http.post("dental/tooth-service",this.toothServiceForm.value).subscribe({next:n=>{this.toastr.success("Successfully recorded","Tooth Service"),this.is_saving=!1,this.closeModal()},error:n=>{this.http.showError(n.error.message,"Tooth Service")}})}createForm(){this.toothServiceForm=this.formBuilder.nonNullable.group({id:[""],consult_id:[this.selected_visit.id,[r.kI.required]],patient_id:[this.selected_visit.patient.id,[r.kI.required]],tooth_number:[this.selected_tooth.tooth_number,[r.kI.required]],service_code:[null,[r.kI.required]],remarks:[null]})}loadLibraries(){this.http.get("libraries/dental-tooth-service").subscribe({next:n=>{this.tooth_services=n.data,this.createForm()},error:n=>{this.http.showError(n.error.message,"Tooth Services Library")}})}closeModal(){this.toggleModal.emit("tooth_services")}constructor(n,o,l){this.http=n,this.toastr=o,this.formBuilder=l,this.toggleModal=new t.vpe,this.faSave=h.r6l,this.faCircleNotch=d.IJ7,this.tooth_services=[],this.is_saving=!1,this.toothServiceForm=new r.cw({consult_id:new r.NI(""),patient_id:new r.NI(""),tooth_number:new r.NI(null),service_code:new r.NI(null),remarks:new r.NI(null)})}ngOnInit(){this.loadLibraries()}}return(i=s).\u0275fac=function(n){return new(n||i)(t.Y36(f.O),t.Y36(v._W),t.Y36(r.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-tooth-services"]],inputs:{selected_tooth:"selected_tooth",selected_visit:"selected_visit"},outputs:{toggleModal:"toggleModal"},decls:25,vars:7,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"overflow-y-auto","h-auto","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"w-full","max-w-3xl","text-left","text-gray-500","dark:text-gray-400"],[3,"formGroup","submit"],[1,"m-5"],["for","service_code"],["id","service_code","formControlName","service_code",1,"input"],[3,"value",4,"ngFor","ngForOf"],["for","remarks"],["type","text","id","remarks","formControlName","remarks",1,"input"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"btn-save","bg-gray-400",3,"click"],["type","button h-10",1,"btn-save",3,"disabled","click"],[3,"icon","spin"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[3,"value"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5),t.qZA()(),t.TgZ(6,"div",5)(7,"div",6)(8,"form",7),t.NdJ("submit",function(){return o.onSubmit()}),t.TgZ(9,"div",8)(10,"label",9),t._uU(11,"Service Done"),t.qZA(),t.TgZ(12,"select",10),t.YNc(13,Ie,2,2,"option",11),t.qZA()(),t.TgZ(14,"div",8)(15,"label",12),t._uU(16,"Remarks"),t.qZA(),t._UZ(17,"input",13),t.qZA()()()(),t.TgZ(18,"div",14)(19,"button",15),t.NdJ("click",function(){return o.closeModal()}),t._uU(20,"Cancel"),t.qZA(),t.TgZ(21,"button",16),t.NdJ("click",function(){return o.onSubmit()}),t._UZ(22,"fa-icon",17),t._uU(23),t.qZA()()()()(),t._UZ(24,"div",18)),2&n&&(t.xp6(5),t.hij(" Service for Tooth (#",o.selected_tooth.tooth_number,") "),t.xp6(3),t.Q6J("formGroup",o.toothServiceForm),t.xp6(5),t.Q6J("ngForOf",o.tooth_services),t.xp6(8),t.Q6J("disabled",o.toothServiceForm.invalid||o.is_saving),t.xp6(1),t.Q6J("icon",o.is_saving?o.faCircleNotch:o.faSave)("spin",o.is_saving),t.xp6(1),t.hij(" ",o.is_saving?"Saving":"Save"," "))},dependencies:[a.sg,g.BN,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.sg,r.u]}),s})();function Fe(i,s){1&i&&(t.TgZ(0,"span",34),t._uU(1," (from previous visit) "),t.qZA())}function Me(i,s){if(1&i&&(t.TgZ(0,"option",43),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.desc)}}function Qe(i,s){if(1&i&&(t.TgZ(0,"option",43),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ","Y"===e.id?"\u2713":e.id," ")}}function De(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",52)(1,"button",53),t.NdJ("click",function(o){t.CHM(e);const l=t.oxw(2).$implicit,_=t.oxw(4);return t.KtG(_.toggleModal("tooth_services",l,o))}),t._UZ(2,"fa-icon",54),t.qZA()()}if(2&i){const e=t.oxw(6);t.xp6(2),t.Q6J("icon",e.faAdd)}}function Se(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"button",55),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,l=t.oxw(6);return t.KtG(l.toggleModal("delete-service",o))}),t._UZ(2,"fa-icon",56),t.qZA(),t._uU(3),t.qZA()}if(2&i){const e=t.oxw().$implicit,n=t.oxw(6);t.xp6(2),t.Q6J("icon",n.faTrash),t.xp6(1),t.hij(" ",e.service_code," ")}}function Oe(i,s){1&i&&t._UZ(0,"br")}function He(i,s){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Se,4,2,"div",33),t.YNc(2,Oe,1,0,"br",33),t.qZA()),2&i){const e=s.$implicit,n=s.last;t.xp6(1),t.Q6J("ngIf",e),t.xp6(1),t.Q6J("ngIf",!n)}}function Ye(i,s){if(1&i&&(t.TgZ(0,"div",50),t.YNc(1,De,3,1,"div",51),t.YNc(2,He,3,2,"div",6),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw(4);t.xp6(1),t.Q6J("ngIf",!n.current_services[e.tooth_number]),t.xp6(1),t.Q6J("ngForOf",n.current_services[e.tooth_number])}}function Ee(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",46)(1,"span",47),t._uU(2),t.qZA(),t.TgZ(3,"div")(4,"select",48),t.NdJ("ngModelChange",function(o){const _=t.CHM(e).$implicit,y=t.oxw(4);return t.KtG(y.tooth_condition[_.tooth_number]=o)}),t.YNc(5,Qe,2,2,"option",38),t.qZA()(),t.YNc(6,Ye,3,2,"div",49),t.qZA()}if(2&i){const e=s.$implicit,n=t.oxw(4);t.xp6(2),t.Oqu(e.tooth_number),t.xp6(2),t.Q6J("ngModel",n.tooth_condition[e.tooth_number]),t.xp6(1),t.Q6J("ngForOf",n.tooth_condition_legend),t.xp6(1),t.Q6J("ngIf",n.consultCondition)}}function je(i,s){if(1&i&&(t.TgZ(0,"div",44),t.YNc(1,Ee,7,4,"div",45),t.qZA()),2&i){const e=s.$implicit;t.xp6(1),t.Q6J("ngForOf",e)}}function Le(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"div",35)(2,"span",36),t._uU(3,"Tooth Condition"),t.qZA(),t.TgZ(4,"select",37),t.NdJ("ngModelChange",function(o){t.CHM(e);const l=t.oxw().$implicit,_=t.oxw();return t.KtG(_.condition[l.title]=o)})("change",function(){t.CHM(e);const o=t.oxw().$implicit,l=t.oxw();return t.KtG(l.updateConditions(o.title))}),t.YNc(5,Me,2,2,"option",38),t.qZA()(),t.YNc(6,je,2,1,"div",39),t.TgZ(7,"div",40)(8,"button",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,l=t.oxw();return t.KtG(l.onSubmit(o.title))}),t._UZ(9,"fa-icon",42),t._uU(10),t.qZA()()()}if(2&i){const e=t.oxw().$implicit,n=t.oxw();t.xp6(4),t.Q6J("ngModel",n.condition[e.title]),t.xp6(1),t.Q6J("ngForOf",n.tooth_condition_legend),t.xp6(1),t.Q6J("ngForOf",e.chart),t.xp6(2),t.Q6J("disabled",n.is_saving),t.xp6(1),t.Q6J("icon",n.is_saving?n.faCircleNotch:n.faSave)("spin",n.is_saving),t.xp6(1),t.hij(" ",n.is_saving?"Saving ":"Save "," Tooth Condition ")}}function Pe(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"fieldset",28)(1,"legend",29)(2,"button",30),t.NdJ("click",function(){const l=t.CHM(e).$implicit,_=t.oxw();return t.KtG(_.toggleChart(l.title))}),t._UZ(3,"fa-icon",31),t.qZA(),t._uU(4),t.YNc(5,Fe,2,0,"span",32),t.qZA(),t.YNc(6,Le,11,7,"div",33),t.qZA()}if(2&i){const e=s.$implicit,n=t.oxw();t.xp6(3),t.Q6J("icon",n.show_chart[e.title]?n.faChevronCircleUp:n.faChevronCircleDown),t.xp6(1),t.hij(" ",e.title," TOOTH CHART "),t.xp6(1),t.Q6J("ngIf",!n.consultCondition),t.xp6(1),t.Q6J("ngIf",n.show_chart[e.title])}}function Ke(i,s){if(1&i&&(t.TgZ(0,"div",57)(1,"strong"),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&i){const e=s.$implicit;t.xp6(2),t.Oqu("Y"===e.id?"\u2713":e.id),t.xp6(1),t.hij(": ",e.desc," ")}}function Ge(i,s){if(1&i&&(t.TgZ(0,"div")(1,"strong"),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&i){const e=s.$implicit;t.xp6(2),t.Oqu(e.code),t.xp6(1),t.hij(": ",e.desc," ")}}function $e(i,s){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.tooth_number," ")}}function ze(i,s){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.consult.consult_date,"MM/dd/yyyy"))}}function Ve(i,s){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.tooth_service.desc)}}function Be(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"td")(1,"button",58),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,l=t.oxw();return t.KtG(l.toggleModal("delete-service",o))}),t._UZ(2,"fa-icon",54),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(2),t.Q6J("icon",e.faTrash)}}function Re(i,s){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,$e,2,1,"td",33),t.YNc(2,ze,3,4,"td",33),t.YNc(3,Ve,2,1,"td",33),t.YNc(4,Be,3,1,"td",33),t.qZA()),2&i){const e=s.$implicit,n=t.oxw();t.Tol(e.consult_id===n.selected_visit.id?"bg-yellow-100":""),t.xp6(1),t.Q6J("ngIf",e),t.xp6(1),t.Q6J("ngIf",e),t.xp6(1),t.Q6J("ngIf",e),t.xp6(1),t.Q6J("ngIf",e)}}function We(i,s){if(1&i&&(t.TgZ(0,"div",59),t._UZ(1,"input",60),t.TgZ(2,"label",61),t._uU(3),t.qZA()()),2&i){const e=s.$implicit;t.xp6(1),t.Q6J("formControlName",e.column_name),t.uIk("id",e.column_name),t.xp6(1),t.uIk("for",e.column_name),t.xp6(1),t.Oqu(e.desc)}}function Xe(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"app-delete-item",62),t.NdJ("toggleModal",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.toggleModal("delete-service"))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("url",e.url)("delete_id",e.delete_id)("delete_desc",e.delete_desc)}}function ti(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"app-tooth-services",63),t.NdJ("toggleModal",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.toggleModal(o))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("selected_tooth",e.selected_tooth)("selected_visit",e.selected_visit)}}let ei=(()=>{var i;class s{toggleChart(n){this.show_chart[n]=!this.show_chart[n]}submitCondition(){this.saving_oralCondition=!0,this.http.post("dental/oral-condition",this.oralConditionForm.value).subscribe({next:()=>{this.saving_oralCondition=!1,this.loadSelectedConsult.emit(),this.toastr.success("Successfully Recorded","Oral Health Condition")},error:n=>{this.http.showError(n.error.message,"Oral Health Condition")}})}onSubmit(n){this.is_saving=!0;let o=[];("adult"===n?this.adult_tooth_arr:this.temp_tooth_arr).forEach(y=>{o.push({tooth_number:y,tooth_condition:this.tooth_condition[y]})}),this.http.post("dental/tooth-condition",{patient_id:this.selected_visit.patient.id,consult_id:this.selected_visit.id,tooth_arr:o}).subscribe({next:()=>{this.is_saving=!1,this.loadSelectedConsult.emit(),this.toastr.success("Successfully Recorded","Tooth Condition")},error:y=>{this.http.showError(y.error.message,"Tooth Condition"),this.is_saving=!1}})}patchToothCondition(){this.consultCondition=Object.keys(this.selected_visit.consultToothCondition).length>0,Object.entries(this.consultCondition?this.selected_visit.consultToothCondition:this.selected_visit.latestToothCondition).forEach(([o,l],_)=>{this.tooth_condition[l.tooth_number]=l.tooth_condition}),this.selected_visit.dentalOralHealthCondition&&this.oralConditionForm.patchValue({...this.selected_visit.dentalOralHealthCondition})}toggleModal(n,o,l){l&&l.preventDefault(),"delete-service"===n&&o&&(this.url="dental/tooth-service/",this.delete_desc="Tooth Service",this.delete_id=o.id),this.selected_tooth=o,this.modals[n]=!this.modals[n],this.modals[n]||this.loadSelectedConsult.emit()}iterateServices(n){this.service_list=this.selected_visit.dentalToothService,this.current_services=[],Object.keys(this.selected_visit.dentalToothService).length>0&&Object.entries(this.selected_visit.dentalToothService).forEach(([o,l],_)=>{this.selected_visit.id===l.consult_id&&(this.current_services[l.tooth_number]?this.current_services[l.tooth_number].push({service_code:l.service_code,id:l.id}):this.current_services[l.tooth_number]=[{service_code:l.service_code,id:l.id}])}),this.createForm()}createForm(){this.oralConditionForm=this.formBuilder.nonNullable.group({patient_id:[this.selected_visit.patient.id,[r.kI.required]],consult_id:[this.selected_visit.id,[r.kI.required]],healthy_gums_flag:[!1],orally_fit_flag:[!1],oral_rehab_flag:[!1],dental_caries_flag:[!1],gingivitis_flag:[!1],periodontal_flag:[!1],debris_flag:[!1],calculus_flag:[!1],abnormal_growth_flag:[!1],cleft_lip_flag:[!1],supernumerary_flag:[!1],dento_facial_flag:[!1],others_flag:[!1],remarks:[null]}),this.patchToothCondition()}loadLibraries(){const n=this.http.get("libraries/dental-tooth-service"),o=this.http.get("libraries/dental-oral-condition");(0,O.D)([n,o]).subscribe({next:([l,_])=>{this.tooth_service_legend=l.data,this.oral_health_condition=_.data,this.iterateServices(!1)},error:l=>{this.http.showError(l.error.message,"Condition and Service Library")}})}updateConditions(n){("adult"===n?this.adult_tooth_arr:this.temp_tooth_arr).forEach(l=>{delete this.tooth_condition[l],this.tooth_condition[l]||(this.tooth_condition[l]=this.condition[n])})}constructor(n,o,l){this.http=n,this.toastr=o,this.formBuilder=l,this.loadSelectedConsult=new t.vpe,this.oralConditionForm=function Ue(){return new r.cw({id:new r.NI(null),patient_id:new r.NI(null),consult_id:new r.NI(null),healthy_gums_flag:new r.NI(!1),orally_fit_flag:new r.NI(!1),oral_rehab_flag:new r.NI(!1),dental_caries_flag:new r.NI(!1),gingivitis_flag:new r.NI(!1),periodontal_flag:new r.NI(!1),debris_flag:new r.NI(!1),calculus_flag:new r.NI(!1),abnormal_growth_flag:new r.NI(!1),cleft_lip_flag:new r.NI(!1),supernumerary_flag:new r.NI(!1),dento_facial_flag:new r.NI(""),others_flag:new r.NI(""),remarks:new r.NI("")})}(),this.adult_tooth_conditions=H,this.temp_tooth_condition=Y,this.adult_tooth_arr=Ae,this.temp_tooth_arr=Je,this.tooth_condition_legend=Ne,this.faTrash=d.$aW,this.faAdd=d.XSk,this.faCheck=d.LEp,this.faSave=h.r6l,this.faCircleNotch=d.IJ7,this.faChevronCircleDown=d.yh$,this.faChevronCircleUp=d._qI,this.modals=[],this.condition=[],this.service_list=[],this.current_services=[],this.tooth_condition=[],this.tooth_service_legend=[],this.is_saving=!1,this.show_form=!1,this.consultCondition=!1,this.show_chart={adult:!0,temporary:!0},this.tooth_chart=[{chart:H,title:"adult"},{chart:Y,title:"temporary"}],this.saving_oralCondition=!1}ngOnChanges(n){this.iterateServices(!0)}ngOnInit(){this.loadLibraries()}}return(i=s).\u0275fac=function(n){return new(n||i)(t.Y36(f.O),t.Y36(v._W),t.Y36(r.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-condition"]],inputs:{selected_visit:"selected_visit"},outputs:{loadSelectedConsult:"loadSelectedConsult"},features:[t.TTD],decls:45,vars:12,consts:[["class","border border-slate-200 w-full rounded-md my-2",4,"ngFor","ngForOf"],[1,"border","border-slate-200","w-full","rounded-md","mb-2"],[1,"ml-5","font-semibold","text-xs"],[1,"grid","grid-cols-3","m-5","text-sm"],["class","flex",4,"ngFor","ngForOf"],[1,"border","border-slate-200","w-full","rounded-md"],[4,"ngFor","ngForOf"],[1,"mt-5","border","border-solid","border-gray-200","rounded-lg"],[1,"bg-blue-500","w-full","text-white","p-3","rounded-t-lg","justify-between","flex"],[1,"flex","flex-col","justify-center"],[1,"table-auto","w-11/12","text-center","m-5","mx-auto","border","border-slate-300","rounded-lg","shadow-md"],[1,"border-b"],[1,"px-3"],[3,"class",4,"ngFor","ngForOf"],[1,"pt-5"],[1,"border","border-solid","border-gray-200","rounded-lg"],[1,"bg-blue-500","w-full","text-white","p-3","rounded-t-lg","font-semibold"],[3,"formGroup","ngSubmit"],[1,"col-span-1","p-3"],[1,"grid","grid-cols-3","pl-3"],["class","col-span-1 mb-1",4,"ngFor","ngForOf"],[1,"block","m-3"],["rows","2","id","remarks","formControlName","remarks","placeholder","Remarks",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50"],[1,"text-right","m-5"],["type","submit",1,"btn-save",3,"disabled"],[1,"mr-3",3,"icon","animation"],[3,"url","delete_id","delete_desc","toggleModal",4,"ngIf"],[3,"selected_tooth","selected_visit","toggleModal",4,"ngIf"],[1,"border","border-slate-200","w-full","rounded-md","my-2"],[1,"ml-3","text-sm","bg-blue-200","px-5","py-1","rounded-md","uppercase"],["type","button",3,"click"],[1,"mr-1","text-blue-500",3,"icon"],["class","text-red-500 text-sm lowercase",4,"ngIf"],[4,"ngIf"],[1,"text-red-500","text-sm","lowercase"],[1,"flex","justify-center","w-full","mt-3"],[1,"text-sm","mt-3"],[1,"input","w-32","mx-3",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["class","flex flex-wrap justify-center my-3 first:mt-24 mx-auto",4,"ngFor","ngForOf"],[1,"flex","justify-center","w-full","mb-3"],[1,"btn-save","h-9","mt-1",3,"disabled","click"],[3,"icon","spin"],[3,"value"],[1,"flex","flex-wrap","justify-center","my-3","first:mt-24","mx-auto"],["class","w-14",4,"ngFor","ngForOf"],[1,"w-14"],[1,"ml-5"],[1,"input",3,"ngModel","ngModelChange"],["class","text-xs bg-gray-100 w-full border border-gray-300 px-0.5 mt-1",4,"ngIf"],[1,"text-xs","bg-gray-100","w-full","border","border-gray-300","px-0.5","mt-1"],["class","flex justify-center",4,"ngIf"],[1,"flex","justify-center"],["type","button",1,"text-xs","bg-blue-400","text-white","w-5","m-0.5","pb-0.5","rounded-full",3,"click"],[3,"icon"],[3,"click"],[1,"text-red-500",3,"icon"],[1,"flex"],["type","button",1,"text-red-500",3,"click"],[1,"col-span-1","mb-1"],["type","checkbox",1,"input-checkbox",3,"formControlName"],[1,"pl-2","text-sm"],[3,"url","delete_id","delete_desc","toggleModal"],[3,"selected_tooth","selected_visit","toggleModal"]],template:function(n,o){1&n&&(t.YNc(0,Pe,7,4,"fieldset",0),t.TgZ(1,"fieldset",1)(2,"legend",2),t._uU(3,"TOOTH CONDITION LEGEND"),t.qZA(),t.TgZ(4,"div",3),t.YNc(5,Ke,4,2,"div",4),t.qZA()(),t.TgZ(6,"fieldset",5)(7,"legend",2),t._uU(8,"TOOTH SERVICE LEGEND"),t.qZA(),t.TgZ(9,"div",3),t.YNc(10,Ge,4,2,"div",6),t.qZA()(),t.TgZ(11,"div",7)(12,"div",8)(13,"span"),t._uU(14,"Tooth Services"),t.qZA()(),t.TgZ(15,"div",9)(16,"table",10)(17,"thead",11)(18,"tr")(19,"th",12),t._uU(20,"Tooth Number"),t.qZA(),t.TgZ(21,"th",12),t._uU(22,"Date of Service"),t.qZA(),t.TgZ(23,"th",12),t._uU(24,"Service Done"),t.qZA(),t.TgZ(25,"th",12),t._uU(26,"Action"),t.qZA()()(),t.TgZ(27,"tbody"),t.YNc(28,Re,5,6,"tr",13),t.qZA()()()(),t.TgZ(29,"div",14)(30,"div",15)(31,"div",16),t._uU(32," Oral Health Condition "),t.qZA(),t.TgZ(33,"form",17),t.NdJ("ngSubmit",function(){return o.submitCondition()}),t.TgZ(34,"div",18)(35,"div",19),t.YNc(36,We,4,4,"div",20),t.qZA(),t.TgZ(37,"div",21),t._UZ(38,"textarea",22),t.qZA()(),t.TgZ(39,"div",23)(40,"button",24),t._UZ(41,"fa-icon",25),t._uU(42),t.qZA()()()()(),t.YNc(43,Xe,1,3,"app-delete-item",26),t.YNc(44,ti,1,2,"app-tooth-services",27)),2&n&&(t.Q6J("ngForOf",o.tooth_chart),t.xp6(5),t.Q6J("ngForOf",o.tooth_condition_legend),t.xp6(5),t.Q6J("ngForOf",o.tooth_service_legend),t.xp6(18),t.Q6J("ngForOf",o.service_list),t.xp6(5),t.Q6J("formGroup",o.oralConditionForm),t.xp6(3),t.Q6J("ngForOf",o.oral_health_condition),t.xp6(4),t.Q6J("disabled",o.saving_oralCondition),t.xp6(1),t.Q6J("icon",o.saving_oralCondition?o.faCircleNotch:o.faSave)("animation",o.saving_oralCondition?"spin":""),t.xp6(1),t.hij(" ",o.saving_oralCondition?"Saving":"Save"," "),t.xp6(1),t.Q6J("ngIf",o.modals["delete-service"]),t.xp6(1),t.Q6J("ngIf",o.modals.tooth_services))},dependencies:[a.sg,a.O5,g.BN,r._Y,r.YN,r.Kr,r.Fj,r.Wl,r.EJ,r.JJ,r.JL,r.On,r.sg,r.u,q.N,ke,a.uU]}),s})();function ii(i,s){if(1&i&&(t.TgZ(0,"option",20),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.desc)}}function oi(i,s){if(1&i&&(t.TgZ(0,"span"),t._UZ(1,"br"),t._uU(2),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.remarks)}}function ni(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.YNc(3,oi,3,1,"span",21),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"date"),t.qZA(),t.TgZ(7,"td")(8,"button",22),t.NdJ("click",function(){const l=t.CHM(e).$implicit,_=t.oxw();return t.KtG(_.toggleModal("delete-item",l))}),t._UZ(9,"fa-icon",23),t.qZA()()()}if(2&i){const e=s.$implicit,n=t.oxw();t.xp6(2),t.hij(" ",e.service.desc," "),t.xp6(1),t.Q6J("ngIf",e.remarks),t.xp6(2),t.Oqu(t.xi3(6,4,e.service_date,"MM/dd/yyyy")),t.xp6(4),t.Q6J("icon",n.faTrash)}}function si(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"app-delete-item",24),t.NdJ("toggleModal",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.toggleModal(o))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("url",e.url)("delete_id",e.delete_id)("delete_desc",e.delete_desc)}}let ri=(()=>{var i;class s{onSubmit(){this.is_saving=!0,this.http.post("dental/service",this.dentalServiceForm.value).subscribe({next:n=>{this.is_saving=!1,this.loadSelectedConsult.emit(),this.createForm(),this.toastr.success("Successfully "+(this.dentalServiceForm.value.id?"updated":"recorded"),"Dental Service")},error:n=>{this.http.showError(n.error.message,"Dental Service"),this.is_saving=!1}})}createForm(){this.dentalServiceForm=this.formBuilder.nonNullable.group({id:[""],consult_id:[this.selected_visit.id,[r.kI.required]],patient_id:[this.selected_visit.patient.id,[r.kI.required]],service_date:["",[r.kI.required]],service_id:["",[r.kI.required]]})}toggleModal(n,o){o&&(this.delete_id=o.id),this.modals[n]=!this.modals[n],!1===this.modals[n]&&this.loadSelectedConsult.emit()}loadLibraries(){this.http.get("libraries/dental-service").subscribe({next:n=>{this.service_list=n.data,this.createForm()},error:n=>{this.http.showError(n.error.message,"Dental Services")}})}constructor(n,o,l){this.http=n,this.toastr=o,this.formBuilder=l,this.loadSelectedConsult=new t.vpe,this.faCircleNotch=d.IJ7,this.faPlus=d.r8p,this.faTrash=d.$aW,this.is_saving=!1,this.modals=[],this.url="dental/service/",this.delete_desc="Dental Service",this.dentalServiceForm=new r.cw({id:new r.NI(null),consult_id:new r.NI(null),patient_id:new r.NI(null),service_date:new r.NI(null),service_id:new r.NI(null)}),this.service_list=[]}ngOnInit(){this.loadLibraries()}}return(i=s).\u0275fac=function(n){return new(n||i)(t.Y36(f.O),t.Y36(v._W),t.Y36(r.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-services"]],inputs:{selected_visit:"selected_visit"},outputs:{loadSelectedConsult:"loadSelectedConsult"},decls:34,vars:8,consts:[[1,"mt-5","border","border-solid","border-gray-200","rounded-lg"],[1,"bg-blue-500","w-full","text-white","p-3","rounded-t-lg","justify-between","flex"],[1,"flex","flex-col","justify-center"],[3,"formGroup","submit"],[1,"grid","grid-cols-5","m-3","p-3","gap-x-3","border","border-slate-300","shadow-md","rounded-md","bg-slate-100"],[1,"col-span-2"],["for","service_date"],["id","service_date","type","date","formControlName","service_date","placeholder","Service date",1,"input"],[1,"col-span-3"],["for","service_id"],["id","service_id","type","text","formControlName","service_id","placeholder","service",1,"input"],[3,"value",4,"ngFor","ngForOf"],[1,"col-span-5","flex","justify-end","mt-3"],["type","submit",1,"btn-save","text-xs",3,"disabled"],[1,"mr-2",3,"icon","spin"],[1,"table-auto","w-11/12","text-center","m-5","mx-auto","border","border-slate-300","rounded-lg","shadow-md"],[1,"border-b"],[1,"px-3"],[4,"ngFor","ngForOf"],[3,"url","delete_id","delete_desc","toggleModal",4,"ngIf"],[3,"value"],[4,"ngIf"],["type","button",1,"text-red-500",3,"click"],[3,"icon"],[3,"url","delete_id","delete_desc","toggleModal"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span"),t._uU(3,"Dental Services"),t.qZA()(),t.TgZ(4,"div",2)(5,"form",3),t.NdJ("submit",function(){return o.onSubmit()}),t.TgZ(6,"fieldset",4)(7,"legend"),t._uU(8,"New service detail"),t.qZA(),t.TgZ(9,"div",5)(10,"label",6),t._uU(11,"Service Date"),t.qZA(),t._UZ(12,"input",7),t.qZA(),t.TgZ(13,"div",8)(14,"label",9),t._uU(15,"Service done"),t.qZA(),t.TgZ(16,"select",10),t.YNc(17,ii,2,2,"option",11),t.qZA()(),t.TgZ(18,"div",12)(19,"button",13),t._UZ(20,"fa-icon",14),t._uU(21),t.qZA()()()(),t.TgZ(22,"table",15)(23,"thead",16)(24,"tr")(25,"th",17),t._uU(26,"Dental Service"),t.qZA(),t.TgZ(27,"th",17),t._uU(28,"Date of Service"),t.qZA(),t.TgZ(29,"th",17),t._uU(30,"Action"),t.qZA()()(),t.TgZ(31,"tbody"),t.YNc(32,ni,10,7,"tr",18),t.qZA()()()(),t.YNc(33,si,1,3,"app-delete-item",19)),2&n&&(t.xp6(5),t.Q6J("formGroup",o.dentalServiceForm),t.xp6(12),t.Q6J("ngForOf",o.service_list),t.xp6(2),t.Q6J("disabled",o.dentalServiceForm.invalid||o.is_saving),t.xp6(1),t.Q6J("icon",o.is_saving?o.faCircleNotch:o.faPlus)("spin",o.is_saving),t.xp6(1),t.hij(" ",o.is_saving?"Saving":"Add"," "),t.xp6(11),t.Q6J("ngForOf",null==o.selected_visit?null:o.selected_visit.dentalService),t.xp6(1),t.Q6J("ngIf",o.modals["delete-item"]))},dependencies:[a.sg,a.O5,g.BN,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.sg,r.u,q.N,a.uU]}),s})();function li(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"date"),t.qZA(),t.TgZ(9,"td")(10,"button",20),t.NdJ("click",function(){const l=t.CHM(e).$implicit,_=t.oxw();return t.KtG(_.toggleModal("delete-item",l))}),t._UZ(11,"fa-icon",21),t.qZA()()()}if(2&i){const e=s.$implicit,n=t.oxw();t.xp6(2),t.Oqu(e.cause),t.xp6(2),t.Oqu(t.xi3(5,4,e.admission_date,"MM/dd/yyyy")),t.xp6(3),t.Oqu(t.xi3(8,7,e.discharge_date,"MM/dd/yyyy")),t.xp6(4),t.Q6J("icon",n.faTrash)}}function ai(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"app-delete-item",22),t.NdJ("toggleModal",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.toggleModal(o))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("url",e.url)("delete_id",e.delete_id)("delete_desc",e.delete_desc)}}let di=(()=>{var i;class s{onSubmit(){this.is_saving=!0,this.http.post("patient-hospitalizaion-history/history",this.hospitalizationHistoryForm.value).subscribe({next:n=>{this.is_saving=!1,this.loadSelectedConsult.emit(),this.createForm(),this.toastr.success("Successfully "+(this.hospitalizationHistoryForm.value.id?"updated":"recorded"),"Hospitalization History")},error:n=>{this.http.showError(n.error.message,"Hospitalization History"),this.is_saving=!1}})}toggleModal(n,o){o&&(this.delete_id=o.id),this.modals[n]=!this.modals[n],!1===this.modals[n]&&this.loadSelectedConsult.emit()}createForm(){this.hospitalizationHistoryForm=this.formBuilder.nonNullable.group({id:[""],patient_id:[this.selected_visit.patient.id,[r.kI.required]],admission_date:["",[r.kI.required]],discharge_date:["",[r.kI.required]],cause:["",[r.kI.required,r.kI.minLength(3)]]})}constructor(n,o,l){this.http=n,this.toastr=o,this.formBuilder=l,this.loadSelectedConsult=new t.vpe,this.faPlus=d.r8p,this.faCircleNotch=d.IJ7,this.faSave=h.r6l,this.faTrash=d.$aW,this.modals=[],this.is_saving=!1,this.hospitalizationHistoryForm=new r.cw({id:new r.NI(null),patient_id:new r.NI(null),admission_date:new r.NI(null),discharge_date:new r.NI(null),cause:new r.NI(null)}),this.url="patient-hospitalizaion-history/history/",this.delete_desc="Hospitalization history"}ngOnInit(){this.createForm()}}return(i=s).\u0275fac=function(n){return new(n||i)(t.Y36(f.O),t.Y36(v._W),t.Y36(r.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-hospitalization-history"]],inputs:{selected_visit:"selected_visit"},outputs:{loadSelectedConsult:"loadSelectedConsult"},decls:39,vars:7,consts:[[1,"mt-5","border","border-solid","border-gray-200","rounded-lg"],[1,"bg-blue-500","w-full","text-white","p-3","rounded-t-lg","justify-between","flex"],[1,"flex","flex-col","justify-center"],[3,"formGroup","submit"],[1,"grid","grid-cols-2","m-3","p-3","gap-x-3","border","border-slate-300","shadow-md","rounded-md","bg-slate-100"],["for","admission_date"],["id","admission_date","type","date","formControlName","admission_date","placeholder","admission date",1,"input"],["for","discharge_date"],["id","discharge_date","type","date","formControlName","discharge_date","placeholder","discharge date",1,"input"],[1,"col-span-2"],["for","cause"],["id","cause","type","text","formControlName","cause","placeholder","Cause",1,"input"],[1,"col-span-2","flex","justify-end","mt-3"],["type","submit",1,"btn-save","text-xs",3,"disabled"],[1,"mr-2",3,"icon","spin"],[1,"table-auto","w-11/12","text-center","m-5","mx-auto","border","border-slate-300","rounded-lg","shadow-md"],[1,"border-b"],[1,"px-3"],[4,"ngFor","ngForOf"],[3,"url","delete_id","delete_desc","toggleModal",4,"ngIf"],["type","button",1,"text-red-500",3,"click"],[3,"icon"],[3,"url","delete_id","delete_desc","toggleModal"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span"),t._uU(3,"Hospitalization History"),t.qZA()(),t.TgZ(4,"div",2)(5,"form",3),t.NdJ("submit",function(){return o.onSubmit()}),t.TgZ(6,"fieldset",4)(7,"legend"),t._uU(8,"Hopitalization Details"),t.qZA(),t.TgZ(9,"div")(10,"label",5),t._uU(11,"Admission Date"),t.qZA(),t._UZ(12,"input",6),t.qZA(),t.TgZ(13,"div")(14,"label",7),t._uU(15,"Discharge Date"),t.qZA(),t._UZ(16,"input",8),t.qZA(),t.TgZ(17,"div",9)(18,"label",10),t._uU(19,"Cause of hospitalization"),t.qZA(),t._UZ(20,"input",11),t.qZA(),t.TgZ(21,"div",12)(22,"button",13),t._UZ(23,"fa-icon",14),t._uU(24),t.qZA()()()(),t.TgZ(25,"table",15)(26,"thead",16)(27,"tr")(28,"th",17),t._uU(29,"Cause of hospitalization"),t.qZA(),t.TgZ(30,"th",17),t._uU(31,"Admission date"),t.qZA(),t.TgZ(32,"th",17),t._uU(33,"Discharge date"),t.qZA(),t.TgZ(34,"th",17),t._uU(35,"Action"),t.qZA()()(),t.TgZ(36,"tbody"),t.YNc(37,li,12,10,"tr",18),t.qZA()()()(),t.YNc(38,ai,1,3,"app-delete-item",19)),2&n&&(t.xp6(5),t.Q6J("formGroup",o.hospitalizationHistoryForm),t.xp6(17),t.Q6J("disabled",o.hospitalizationHistoryForm.invalid||o.is_saving),t.xp6(1),t.Q6J("icon",o.is_saving?o.faCircleNotch:o.faPlus)("spin",o.is_saving),t.xp6(1),t.hij(" ",o.is_saving?"Saving":"Add"," "),t.xp6(13),t.Q6J("ngForOf",null==o.selected_visit?null:o.selected_visit.dentalHospitalizationHistory),t.xp6(1),t.Q6J("ngIf",o.modals["delete-item"]))},dependencies:[a.sg,a.O5,g.BN,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,q.N,a.uU]}),s})();function _i(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td")(7,"button",19),t.NdJ("click",function(){const l=t.CHM(e).$implicit,_=t.oxw();return t.KtG(_.toggleModal("delete-item",l))}),t._UZ(8,"fa-icon",20),t.qZA()()()}if(2&i){const e=s.$implicit,n=t.oxw();t.xp6(2),t.Oqu(e.operation),t.xp6(2),t.Oqu(t.xi3(5,3,e.operation_date,"MM/dd/yyyy")),t.xp6(4),t.Q6J("icon",n.faTrash)}}function ci(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"app-delete-item",21),t.NdJ("toggleModal",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.toggleModal(o))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("url",e.url)("delete_id",e.delete_id)("delete_desc",e.delete_desc)}}let ui=(()=>{var i;class s{onSubmit(){this.is_saving=!0,this.http.post("patient-surgical-history/history",this.surgicalHistoryForm.value).subscribe({next:n=>{this.is_saving=!1,this.loadSelectedConsult.emit(),this.createForm(),this.toastr.success("Successfully "+(this.surgicalHistoryForm.value.id?"updated":"recorded"),"Surgical History")},error:n=>{this.http.showError(n.error.message,"Surgical History"),this.is_saving=!1}})}get f(){return this.surgicalHistoryForm.controls}toggleModal(n,o){o&&(this.delete_id=o.id),this.modals[n]=!this.modals[n],!1===this.modals[n]&&this.loadSelectedConsult.emit()}createForm(){this.surgicalHistoryForm=this.formBuilder.nonNullable.group({id:[""],patient_id:[this.selected_visit.patient.id,[r.kI.required,r.kI.minLength(2)]],operation_date:["",[r.kI.required,r.kI.minLength(2)]],operation:["",[r.kI.required,r.kI.minLength(2)]]})}constructor(n,o,l){this.http=n,this.toastr=o,this.formBuilder=l,this.loadSelectedConsult=new t.vpe,this.faEdit=h.Xcf,this.faPlus=d.r8p,this.faTrash=d.$aW,this.faCircleNotch=d.IJ7,this.modals=[],this.is_saving=!1,this.surgicalHistoryForm=new r.cw({id:new r.NI(null),patient_id:new r.NI(null),operation_date:new r.NI(null),operation:new r.NI(null)}),this.url="patient-surgical-history/history/",this.delete_desc="Surgical history"}ngOnInit(){this.createForm()}}return(i=s).\u0275fac=function(n){return new(n||i)(t.Y36(f.O),t.Y36(v._W),t.Y36(r.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-surgical-history"]],inputs:{selected_visit:"selected_visit"},outputs:{loadSelectedConsult:"loadSelectedConsult"},decls:33,vars:7,consts:[[1,"my-5","border","border-solid","border-gray-200","rounded-lg"],[1,"bg-blue-500","w-full","text-white","p-3","rounded-t-lg","justify-between","flex"],[1,"flex","flex-col","justify-center"],[3,"formGroup","submit"],[1,"grid","grid-cols-5","m-3","p-3","gap-x-3","border","border-slate-300","shadow-md","rounded-md","bg-slate-100"],[1,"col-span-2"],["for","operation_date"],["id","operation_date","type","date","formControlName","operation_date","placeholder","admission date",1,"input"],[1,"col-span-3"],["for","operation"],["id","operation","type","text","formControlName","operation","placeholder","Operation",1,"input"],[1,"col-span-5","flex","justify-end","mt-3"],["type","submit",1,"btn-save","text-xs",3,"disabled"],[1,"mr-2",3,"icon","spin"],[1,"table-auto","w-11/12","text-center","m-5","mx-auto","border","border-slate-300","rounded-lg","shadow-md"],[1,"border-b"],[1,"px-3"],[4,"ngFor","ngForOf"],[3,"url","delete_id","delete_desc","toggleModal",4,"ngIf"],["type","button",1,"text-red-500",3,"click"],[3,"icon"],[3,"url","delete_id","delete_desc","toggleModal"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span"),t._uU(3,"Surgical History"),t.qZA()(),t.TgZ(4,"div",2)(5,"form",3),t.NdJ("submit",function(){return o.onSubmit()}),t.TgZ(6,"fieldset",4)(7,"legend"),t._uU(8,"Surgery Details"),t.qZA(),t.TgZ(9,"div",5)(10,"label",6),t._uU(11,"Date of Operation"),t.qZA(),t._UZ(12,"input",7),t.qZA(),t.TgZ(13,"div",8)(14,"label",9),t._uU(15,"Operation"),t.qZA(),t._UZ(16,"input",10),t.qZA(),t.TgZ(17,"div",11)(18,"button",12),t._UZ(19,"fa-icon",13),t._uU(20),t.qZA()()()(),t.TgZ(21,"table",14)(22,"thead",15)(23,"tr")(24,"th",16),t._uU(25,"Operation Done"),t.qZA(),t.TgZ(26,"th",16),t._uU(27,"Operation Date"),t.qZA(),t.TgZ(28,"th",16),t._uU(29,"Action"),t.qZA()()(),t.TgZ(30,"tbody"),t.YNc(31,_i,9,6,"tr",17),t.qZA()()()(),t.YNc(32,ci,1,3,"app-delete-item",18)),2&n&&(t.xp6(5),t.Q6J("formGroup",o.surgicalHistoryForm),t.xp6(13),t.Q6J("disabled",o.surgicalHistoryForm.invalid||o.is_saving),t.xp6(1),t.Q6J("icon",o.is_saving?o.faCircleNotch:o.faPlus)("spin",o.is_saving),t.xp6(1),t.hij(" ",o.is_saving?"Saving":"Add"," "),t.xp6(11),t.Q6J("ngForOf",null==o.selected_visit?null:o.selected_visit.dentalSurgicalHistory),t.xp6(1),t.Q6J("ngIf",o.modals["delete-item"]))},dependencies:[a.sg,a.O5,g.BN,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,q.N,a.uU]}),s})();function pi(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",2),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.switchPage(1))}),t._uU(1," VISIT DETAILS "),t.qZA()}if(2&i){const e=t.oxw();t.Tol(2===e.pages?"tabs-main-true rounded-t-md":"tabs-main-false")}}function mi(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.toggleModal("end_visit"))}),t._UZ(1,"fa-icon",12),t._uU(2," End Visit "),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faDoorClosed)}}function gi(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"nav",13)(1,"div",14)(2,"button",15),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.switchTab(1))}),t._uU(3," COMPLAINTS "),t.qZA(),t.TgZ(4,"button",15),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.switchTab(2))}),t._uU(5," HISTORY "),t.qZA(),t.TgZ(6,"button",15),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.switchTab(3))}),t._uU(7," TOOTH CONDITION & SERVICES "),t.qZA(),t.TgZ(8,"button",15),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.switchTab(4))}),t._uU(9," DIAGNOSIS & TREATMENT "),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(2),t.Tol(1===e.module?"tabs-main-true":"tabs-main-false"),t.xp6(2),t.Tol(2===e.module?"tabs-main-true":"tabs-main-false"),t.xp6(2),t.Tol(3===e.module?"tabs-main-true":"tabs-main-false"),t.xp6(2),t.Tol(4===e.module?"tabs-main-true":"tabs-main-false")}}function fi(i,s){1&i&&(t.TgZ(0,"div",20),t._uU(1," There is an ongoing TB treatment for this patient on another facility. You are not allowed to create a new treatment or view previous treatment from other facilities. "),t.qZA())}function hi(i,s){if(1&i&&(t.TgZ(0,"div",21)(1,"div",22),t._UZ(2,"fa-icon",23),t.qZA(),t.TgZ(3,"div",24),t._uU(4,"Fetching history..."),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(2),t.Q6J("icon",e.faCircleNotch)}}function vi(i,s){1&i&&(t.TgZ(0,"td",33)(1,"div",34),t._uU(2," No records to show... "),t.qZA()())}function bi(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(),l=o.$implicit,_=o.index,y=t.oxw(3);return t.KtG(y.switchPage(2,l,_))}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.consult_done?"View":"Open"," ")}}function xi(i,s){if(1&i&&(t.TgZ(0,"tr",29),t.YNc(1,vi,3,0,"td",30),t.TgZ(2,"td",31),t._uU(3),t.ALo(4,"date"),t.qZA(),t.TgZ(5,"td",31),t._uU(6),t.qZA(),t.TgZ(7,"td",31),t.YNc(8,bi,2,1,"button",32),t.qZA()()),2&i){const e=s.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("ngIf",!n.consult_details),t.xp6(2),t.hij(" ",t.Dn7(4,4,e.consult_date,"MM/dd/yyyy","Asia/Manila")," "),t.xp6(3),t.hij(" ",e.consult_done?"Done":"Ongoing"," "),t.xp6(2),t.Q6J("ngIf",n.user_facility===e.facility.code)}}function Ci(i,s){if(1&i&&(t.TgZ(0,"table",25)(1,"thead",26)(2,"tr")(3,"th",27),t._uU(4,"Consult Date"),t.qZA(),t.TgZ(5,"th",27),t._uU(6,"Status"),t.qZA(),t.TgZ(7,"th",27),t._uU(8,"Action"),t.qZA()()(),t.TgZ(9,"tbody"),t.YNc(10,xi,9,8,"tr",28),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(10),t.Q6J("ngForOf",e.consult_details)}}function Zi(i,s){if(1&i&&(t.TgZ(0,"div",16),t.YNc(1,fi,2,0,"div",17),t.YNc(2,hi,5,1,"div",18),t.YNc(3,Ci,11,1,"table",19),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.selected_dental_consult&&(null==e.selected_dental_consult?null:e.selected_dental_consult.facility_code)!==e.user_facility),t.xp6(1),t.Q6J("ngIf",e.fetching_history),t.xp6(1),t.Q6J("ngIf",!e.fetching_history&&e.patient_dental_history)}}function yi(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",36)(1,"app-complaint-history",37),t.NdJ("loadConsult",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.loadSelectedConsult(o))}),t.qZA(),t._UZ(2,"app-consult-history",38),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("toggle_content",e.toggle_content)("consult_details",e.selected_visit)("have_complaint",e.have_complaint)("allowed_to_edit",e.allowed_to_edit),t.xp6(1),t.Q6J("pt_group","dn")}}function Ti(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"app-history",39),t.NdJ("loadSelectedConsult",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.loadSelectedConsult(o))}),t.qZA(),t.TgZ(2,"app-hospitalization-history",39),t.NdJ("loadSelectedConsult",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.loadSelectedConsult(o))}),t.qZA(),t.TgZ(3,"app-surgical-history",39),t.NdJ("loadSelectedConsult",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.loadSelectedConsult(o))}),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("selected_visit",e.selected_visit),t.xp6(1),t.Q6J("selected_visit",e.selected_visit),t.xp6(1),t.Q6J("selected_visit",e.selected_visit)}}function wi(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"app-condition",39),t.NdJ("loadSelectedConsult",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.loadSelectedConsult(o))}),t.qZA(),t.TgZ(2,"app-services",39),t.NdJ("loadSelectedConsult",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.loadSelectedConsult(o))}),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("selected_visit",e.selected_visit),t.xp6(1),t.Q6J("selected_visit",e.selected_visit)}}function qi(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"app-final-dx",37),t.NdJ("loadConsult",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.loadSelectedConsult(o))}),t.qZA(),t.TgZ(2,"app-prescription",40),t.NdJ("loadConsult",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.loadSelectedConsult(o))}),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("toggle_content",e.toggle_content)("consult_details",e.selected_visit)("have_complaint",e.have_complaint)("allowed_to_edit",e.allowed_to_edit),t.xp6(1),t.Q6J("toggle_content",e.toggle_content)("consult_details",e.selected_visit)("have_complaint",e.have_complaint)("allowed_to_edit",e.allowed_to_edit)("user_id",e.user_id)}}function Ai(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"app-end-visit",41),t.NdJ("toggleModal",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.toggleModal(o))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("consult_id",null==e.selected_visit?null:e.selected_visit.id)("consult_date",null==e.selected_visit?null:e.selected_visit.consult_date)("patient_id",null==e.selected_visit?null:e.selected_visit.patient.id)("pt_group","tb")}}const Ji=[{path:"",component:(()=>{var i;class s{loadSelectedConsult(){this.http.get("consultation/records",{params:{id:this.selected_visit.id,pt_group:"dn",disable_filter:1}}).subscribe({next:o=>{this.consult_details[this.item_index]=o.data[0],this.selected_visit=o.data[0]},error:o=>{this.http.showError(o.error.message,"Dental Consult")}})}loadConsult(){let o={pt_group:"dn",disable_filter:1,patient_id:this.route.snapshot.paramMap.get("id"),sort:"-consult_date"};this.http.get("consultation/records",{params:o}).subscribe({next:l=>{this.consult_details=l.data},error:l=>{this.http.showError(l.error.message,"Dental Consult")}})}toggleModal(n){this.modals[n]=!this.modals[n]}switchPage(n,o,l){2===n?(this.item_index=l,this.router.navigate(["/patient/dn",{id:o.patient.id,consult_id:o.id}])):this.module=1,this.pages=n,this.selected_visit=o||null}switchTab(n){this.module=n}constructor(n,o,l){this.http=n,this.router=o,this.route=l,this.selected_visit=null,this.pages=1,this.module=1,this.faDoorClosed=d.TH0,this.faCircleNotch=d.IJ7,this.patient_dental_history=[],this.enable_edit=!1,this.allowed_to_edit=!0,this.have_complaint=!1,this.toggle_content=!0,this.modals=[],this.item_index=null}ngOnInit(){this.user_id=this.http.getUserID(),this.module=1,this.loadConsult(),this.user_facility=this.http.getUserFacility()}}return(i=s).\u0275fac=function(n){return new(n||i)(t.Y36(f.O),t.Y36(u.F0),t.Y36(u.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-dental"]],decls:14,vars:11,consts:[[1,"flex"],[1,"mt-4","flex","flex-row","border-b","border-slate-300","text-xs"],[1,"tabs-main","w-36",3,"click"],["class","tabs-main w-36",3,"class","click",4,"ngIf"],[1,"ml-auto"],["type","button","class","btn-end-visit ml-auto mt-5",3,"click",4,"ngIf"],["class","mt-2 flex justify-between border-b border-slate-300 text-xs",4,"ngIf"],["class","my-5 w-full border border-gray-200 shadow-md rounded-xl",4,"ngIf"],["class","m-3",4,"ngIf"],[4,"ngIf"],[3,"consult_id","consult_date","patient_id","pt_group","toggleModal",4,"ngIf"],["type","button",1,"btn-end-visit","ml-auto","mt-5",3,"click"],[1,"mr-1",3,"icon"],[1,"mt-2","flex","justify-between","border-b","border-slate-300","text-xs"],[1,"flex","flex-row"],[1,"tabs-main","px-3",3,"click"],[1,"my-5","w-full","border","border-gray-200","shadow-md","rounded-xl"],["class","text-orange-800 border border-orange-400 bg-orange-100 rounded-md p-3 mb-2 w-full",4,"ngIf"],["class","flex flex-col",4,"ngIf"],["class","w-full text-sm text-left",4,"ngIf"],[1,"text-orange-800","border","border-orange-400","bg-orange-100","rounded-md","p-3","mb-2","w-full"],[1,"flex","flex-col"],[1,"w-full","flex","justify-center"],["spin","true",1,"pt-10",3,"icon"],[1,"w-full","flex","justify-center","pb-10","font-semibold"],[1,"w-full","text-sm","text-left"],[1,"text-xs","text-white","uppercase","bg-blue-500"],["scope","col",1,"py-3","px-6"],["class","bg-white border-b",4,"ngFor","ngForOf"],[1,"bg-white","border-b"],["colspan","3",4,"ngIf"],[1,"py-4","px-6"],["type","button","class","rounded-md bg-blue-500 text-white py-1 px-2",3,"click",4,"ngIf"],["colspan","3"],[1,"text-center"],["type","button",1,"rounded-md","bg-blue-500","text-white","py-1","px-2",3,"click"],[1,"m-3"],[3,"toggle_content","consult_details","have_complaint","allowed_to_edit","loadConsult"],[3,"pt_group"],[3,"selected_visit","loadSelectedConsult"],[3,"toggle_content","consult_details","have_complaint","allowed_to_edit","user_id","loadConsult"],[3,"consult_id","consult_date","patient_id","pt_group","toggleModal"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"nav",1)(2,"button",2),t.NdJ("click",function(){return o.switchPage(1)}),t._uU(3," DENTAL VISITS "),t.qZA(),t.YNc(4,pi,2,2,"button",3),t.qZA(),t.TgZ(5,"div",4),t.YNc(6,mi,3,1,"button",5),t.qZA()(),t.YNc(7,gi,10,8,"nav",6),t.YNc(8,Zi,4,3,"div",7),t.YNc(9,yi,3,5,"div",8),t.YNc(10,Ti,4,3,"div",9),t.YNc(11,wi,3,2,"div",9),t.YNc(12,qi,3,9,"div",9),t.YNc(13,Ai,1,4,"app-end-visit",10)),2&n&&(t.xp6(2),t.Tol(1===o.pages?"tabs-main-true rounded-t-md":"tabs-main-false"),t.xp6(2),t.Q6J("ngIf",o.selected_visit||(null==o.selected_visit||null==o.selected_visit.facility?null:o.selected_visit.facility.code)===o.user_facility),t.xp6(2),t.Q6J("ngIf",o.selected_visit&&!(null!=o.selected_visit&&o.selected_visit.consult_done)),t.xp6(1),t.Q6J("ngIf",2===o.pages),t.xp6(1),t.Q6J("ngIf",1===o.pages),t.xp6(1),t.Q6J("ngIf",2===o.pages&&1===o.module),t.xp6(1),t.Q6J("ngIf",2===o.pages&&2===o.module),t.xp6(1),t.Q6J("ngIf",2===o.pages&&3===o.module),t.xp6(1),t.Q6J("ngIf",2===o.pages&&4===o.module),t.xp6(1),t.Q6J("ngIf",o.modals.end_visit))},dependencies:[a.sg,a.O5,g.BN,U,I,M,D,S.F,qe,ei,ri,di,ui,a.uU]}),s})()}];let Ni=(()=>{var i;class s{}return(i=s).\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[u.Bz.forChild(Ji),u.Bz]}),s})(),Ui=(()=>{var i;class s{}return(i=s).\u0275fac=function(n){return new(n||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-general-survey"]],standalone:!0,features:[t.jDz],decls:2,vars:0,template:function(n,o){1&n&&(t.TgZ(0,"p"),t._uU(1,"general-survey works!"),t.qZA())},dependencies:[a.ez]}),s})(),Ii=(()=>{var i;class s{}return(i=s).\u0275fac=function(n){return new(n||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-initial-dx"]],standalone:!0,features:[t.jDz],decls:2,vars:0,template:function(n,o){1&n&&(t.TgZ(0,"p"),t._uU(1,"initial-dx works!"),t.qZA())},dependencies:[a.ez]}),s})(),ki=(()=>{var i;class s{}return(i=s).\u0275fac=function(n){return new(n||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-management"]],standalone:!0,features:[t.jDz],decls:2,vars:0,template:function(n,o){1&n&&(t.TgZ(0,"p"),t._uU(1,"management works!"),t.qZA())},dependencies:[a.ez]}),s})(),Fi=(()=>{var i;class s{}return(i=s).\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[a.ez,Ni,g.uH,r.u5,r.UX,U,I,M,D,Ui,Ii,ki,q.N,S.F]}),s})()},3146:(N,w,c)=>{c.d(w,{N:()=>Z});var a=c(5879),u=c(6223),d=c(5597),t=c(590),f=c(265),g=c(2425);const h=["confirmCode"];let Z=(()=>{var r;class v{generateCode(){this.is_loading=!1,this.confirmation_code=null,this.confirm_code=Math.floor(1e3*Math.random()).toString().padStart(4,"0")}onSubmit(){this.is_loading=!0,this.confirm_code===this.confirmation_code?this.http.delete(this.url,this.delete_id).subscribe({next:()=>{this.is_loading=!1,this.toastr.error("Record was deleted!"),this.closeModal()},error:m=>{console.log(m),this.is_loading=!1,this.generateCode()}}):(this.generateCode(),this.toastr.info("Code mismatch, please try again","Incorrect Code"))}closeModal(){this.toggleModal.emit("delete-item")}constructor(m,p){this.http=m,this.toastr=p,this.toggleModal=new a.vpe,this.faTrash=t.$aW,this.confirm_code="0000",this.is_loading=!1}ngOnChanges(m){this.generateCode()}ngAfterViewInit(){this.inputElement.nativeElement.focus()}}return(r=v).\u0275fac=function(m){return new(m||r)(a.Y36(f.O),a.Y36(g._W))},r.\u0275cmp=a.Xpm({type:r,selectors:[["app-delete-item"]],viewQuery:function(m,p){if(1&m&&a.Gf(h,5),2&m){let C;a.iGM(C=a.CRH())&&(p.inputElement=C.first)}},inputs:{url:"url",delete_id:"delete_id",delete_desc:"delete_desc"},outputs:{toggleModal:"toggleModal"},standalone:!0,features:[a.TTD,a.jDz],decls:29,vars:8,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-red-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"flex","item-start","flex-wrap","pb-5"],[1,"grid","grid-cols-3","px-5","py-5","mt-10","mx-10","w-full","bg-red-50","rounded-lg","text-center"],[1,"col-span-3","text-left","mb-2","pb-2","border-b","border-slate-200"],[1,"col-span-1","text-sm","px-5","py-2","mt-2"],[1,"block","mb-3"],[1,"font-bold","text-2xl","select-none"],["for","confirmCode"],["name","confirmCode","type","text",1,"mt-2","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","pl-3","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModel","keyup.enter","ngModelChange"],["confirmCode",""],[1,"col-span-1","mt-11"],["type","button",1,"my-auto","text-white","bg-red-500","enabled:hover:ring-2","enabled:focus:outline-none","enabled:hover:ring-red-300","disabled:bg-gray-300","font-medium","rounded","text-sm","px-6","py-2.5","text-center","transition","duration-150","ease-in-out",3,"disabled","click"],[1,"mx-0","my-0","text-white",3,"icon"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-200","rounded","text-sm","font-medium","my-2","px-6","py-2.5","transition","duration-150","ease-in-out",3,"disabled","click"],[1,"opacity-50","fixed","inset-0","z-[59]","bg-black"]],template:function(m,p){1&m&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),a._uU(5),a.qZA()(),a.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),a._uU(10),a.qZA(),a.TgZ(11,"div",9)(12,"span",10),a._uU(13,"Delete Code"),a.qZA(),a.TgZ(14,"span",11),a._uU(15),a.qZA()(),a.TgZ(16,"div",9)(17,"label",12),a._uU(18,"Enter Code"),a.qZA(),a.TgZ(19,"input",13,14),a.NdJ("keyup.enter",function(){return p.onSubmit()})("ngModelChange",function(J){return p.confirmation_code=J}),a.qZA()(),a.TgZ(21,"div",15)(22,"button",16),a.NdJ("click",function(){return p.onSubmit()}),a._UZ(23,"fa-icon",17),a._uU(24," Delete "),a.qZA()()()()(),a.TgZ(25,"div",18)(26,"button",19),a.NdJ("click",function(){return p.closeModal()}),a._uU(27,"Cancel"),a.qZA()()()()(),a._UZ(28,"div",20)),2&m&&(a.xp6(5),a.AsE(" Delete ",p.delete_desc,": ",p.delete_id," "),a.xp6(5),a.hij(" Your are about to delete a ",p.delete_desc," record for this patient. Please enter the generated delete code in order to proceed. "),a.xp6(5),a.Oqu(p.confirm_code),a.xp6(4),a.Q6J("ngModel",p.confirmation_code),a.xp6(3),a.Q6J("disabled",!p.confirmation_code||p.is_loading),a.xp6(1),a.Q6J("icon",p.faTrash),a.xp6(3),a.Q6J("disabled",p.is_loading))},dependencies:[d.uH,d.BN,u.u5,u.Fj,u.JJ,u.On],changeDetection:0}),v})()},279:(N,w,c)=>{c.d(w,{F:()=>Z});var a=c(6814),u=c(5879),d=c(6223),t=c(5597),f=c(265),g=c(3602),h=c(2425);let Z=(()=>{var r;class v{onSubmit(){let m;this.is_saving=!0,m=this.consult_date&&this.pt_group?{patient_id:this.patient_id,consult_date:this.consult_date,pt_group:this.pt_group,consult_done:!0}:{},this.http.update("consultation/records/",this.consult_id,m).subscribe({next:p=>{this.is_saving=!1,this.toastr.info("Visit was ended"),this.router.navigate(["/patient/itr",{id:this.patient_id}])},error:p=>console.log(p)})}constructor(m,p,C){this.http=m,this.router=p,this.toastr=C,this.toggleModal=new u.vpe,this.is_saving=!1}closeModal(){this.toggleModal.emit("end_visit")}}return(r=v).\u0275fac=function(m){return new(m||r)(u.Y36(f.O),u.Y36(g.F0),u.Y36(h._W))},r.\u0275cmp=u.Xpm({type:r,selectors:[["app-end-visit"]],inputs:{consult_id:"consult_id",consult_date:"consult_date",patient_id:"patient_id",pt_group:"pt_group"},outputs:{toggleModal:"toggleModal"},standalone:!0,features:[u.jDz],decls:20,vars:5,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"h-40"],[1,"flex","item-start","flex-wrap","pb-5"],[1,"grid","grid-cols-3","px-3","py-3","mt-10","mx-10","w-full","rounded-lg","text-center"],[1,"col-span-3","text-left","mb-2","pb-2","border-b","border-slate-200","font-semibold","text-lg"],[1,"col-span-3","text-left","mb-2","pb-2","text-sm"],[1,"flex","justify-end","py-2","px-5","space-x-4","rounded-b"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-300","rounded","text-sm","font-medium","my-2","px-6","py-2.5","transition","duration-150","ease-in-out",3,"click"],["type","button",1,"text-white","bg-rose-500","enabled:hover:ring-2","enabled:focus:outline-none","enabled:hover:ring-rose-300","disabled:opacity-75","font-medium","rounded","text-sm","my-2","px-6","py-2.5","text-center","transition","duration-150","ease-in-out",3,"disabled","click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"]],template:function(m,p){1&m&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),u._uU(5," End Visit "),u.qZA()(),u.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),u._uU(10," Do you really want to end this visit? "),u.qZA(),u.TgZ(11,"div",9),u._uU(12),u.ALo(13,"date"),u.qZA()()()(),u.TgZ(14,"div",10)(15,"button",11),u.NdJ("click",function(){return p.closeModal()}),u._uU(16,"Cancel"),u.qZA(),u.TgZ(17,"button",12),u.NdJ("click",function(){return p.onSubmit()}),u._uU(18,"End Visit"),u.qZA()()()()(),u._UZ(19,"div",13)),2&m&&(u.xp6(12),u.hij(" Visit date & time: ",u.xi3(13,2,p.consult_date,"MM/dd/yyyy hh:mm:ss a")," "),u.xp6(5),u.Q6J("disabled",p.is_saving))},dependencies:[t.uH,d.u5,a.ez,a.uU],changeDetection:0}),v})()}}]);