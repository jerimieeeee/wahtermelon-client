"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[9741],{9741:(w,p,a)=>{a.r(p),a.d(p,{AccountListModule:()=>G});var l=a(177),m=a(5237),d=a(5383),t=a(4438),h=a(3318),g=a(60),u=a(9417);const x=o=>({"bg-gray-50":o}),y=o=>({"text-red-500":o}),_=o=>({"peer-checked:bg-gray-600":o});function v(o,c){if(1&o&&(t.j41(0,"button",17),t.nrm(1,"fa-icon",18),t.EFF(2," Updating "),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.Y8G("icon",e.faSpinner)}}function k(o,c){if(1&o&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&o){const e=c.$implicit;t.R7$(),t.JRh(e.value)}}function F(o,c){if(1&o&&(t.j41(0,"div",19)(1,"div",20)(2,"ul",21),t.DNE(3,k,2,1,"li",22),t.nI1(4,"keyvalue"),t.k0s()()()),2&o){const e=t.XpG();t.R7$(3),t.Y8G("ngForOf",t.bMT(4,1,e.submit_error))}}function j(o,c){if(1&o){const e=t.RV6();t.j41(0,"tr",23)(1,"th",24),t.EFF(2),t.k0s(),t.j41(3,"td",25),t.EFF(4),t.nI1(5,"date"),t.k0s(),t.j41(6,"td",25),t.EFF(7),t.k0s(),t.j41(8,"td",25),t.EFF(9),t.k0s(),t.j41(10,"td",25),t.EFF(11),t.k0s(),t.j41(12,"td",26)(13,"div")(14,"input",27),t.mxI("ngModelChange",function(n){const i=t.eBV(e).index,s=t.XpG();return t.DH7(s.account_list[i].reports_flag,n)||(s.account_list[i].reports_flag=n),t.Njj(n)}),t.bIt("change",function(){const n=t.eBV(e).index,i=t.XpG();return t.Njj(i.updateActive(i.account_list[n],n))}),t.k0s(),t.nrm(15,"label",28),t.k0s()(),t.j41(16,"td",26)(17,"label",29)(18,"input",30),t.mxI("ngModelChange",function(n){const i=t.eBV(e).index,s=t.XpG();return t.DH7(s.account_list[i].is_active,n)||(s.account_list[i].is_active=n),t.Njj(n)}),t.bIt("change",function(){const n=t.eBV(e).index,i=t.XpG();return t.Njj(i.updateActive(i.account_list[n],n))}),t.k0s(),t.nrm(19,"div",31),t.k0s()()()}if(2&o){const e=c.$implicit,r=c.odd,n=c.index,i=t.XpG();t.Y8G("ngClass",t.eq3(20,x,r))("ngClass",t.eq3(22,y,!e.employer)),t.R7$(2),t.LHq(" ",e.last_name,", ",e.first_name," ","NA"===e.middle_name?"":e.middle_name," ","NA"===e.suffix_name?"":e.suffix_name," "),t.R7$(2),t.SpI(" ",t.brH(5,16,e.birtdate,"MM/dd/yyyy","Asia/Manila")," "),t.R7$(3),t.SpI(" ",e.gender," "),t.R7$(2),t.SpI(" ",e.contact_number," "),t.R7$(2),t.SpI(" ",e.email," "),t.R7$(3),t.R50("ngModel",i.account_list[n].reports_flag),t.Y8G("disabled",i.is_updating||!i.account_list[n].is_active),t.R7$(),t.Y8G("ngClass",t.eq3(24,_,i.is_updating)),t.R7$(3),t.R50("ngModel",i.account_list[n].is_active),t.Y8G("disabled",i.is_updating),t.R7$(),t.Y8G("ngClass",t.eq3(26,_,i.is_updating))}}function C(o,c){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"div",32)(2,"div",33)(3,"div")(4,"p",34),t.EFF(5," Showing "),t.j41(6,"span",35),t.EFF(7),t.k0s(),t.EFF(8," to "),t.j41(9,"span",35),t.EFF(10),t.k0s(),t.EFF(11," of "),t.j41(12,"span",35),t.EFF(13),t.k0s(),t.EFF(14," results "),t.k0s()(),t.j41(15,"div")(16,"nav",36)(17,"button",37),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.loadAccount(1))}),t.nrm(18,"fa-icon",38),t.k0s(),t.j41(19,"button",39),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.loadAccount(n.current_page-1))}),t.nrm(20,"fa-icon",38),t.EFF(21,"Previous "),t.k0s(),t.j41(22,"button",39),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.loadAccount(n.current_page+1))}),t.EFF(23," Next"),t.nrm(24,"fa-icon",40),t.k0s(),t.j41(25,"button",41),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.loadAccount(n.last_page))}),t.nrm(26,"fa-icon",40),t.k0s()()()()()()}if(2&o){const e=t.XpG();t.R7$(7),t.JRh(e.from),t.R7$(3),t.JRh(e.to),t.R7$(3),t.JRh(e.total),t.R7$(4),t.Y8G("disabled",1===e.current_page),t.R7$(),t.Y8G("icon",e.faAnglesLeft),t.R7$(),t.Y8G("disabled",1===e.current_page),t.R7$(),t.Y8G("icon",e.faChevronLeft),t.R7$(2),t.Y8G("disabled",e.current_page===e.last_page),t.R7$(2),t.Y8G("icon",e.faChevronRight),t.R7$(),t.Y8G("disabled",e.current_page===e.last_page),t.R7$(),t.Y8G("icon",e.faAnglesRight)}}const R=[{path:"",component:(()=>{class o{loadAccount(e){let r={params:{}};this.search_item&&(r.params["filter[search]"]=this.search_item),e&&(r.params.page=e),r.params.per_page=this.per_page,this.http.get("users",r).subscribe({next:n=>{console.log(n.data),this.account_list=n.data,this.current_page=n.meta.current_page,this.last_page=n.meta.last_page,this.from=n.meta.from,this.to=n.meta.to,this.total=n.meta.total},error:n=>console.log(n)})}updateReports(e,r){}updateActive(e,r,n){this.is_updating=!0;let i=e;const s=i.id,b=i.email;i.birthdate=(0,l.Yq)(i.birthdate,"yyyy-MM-dd","en","Asia/Manila"),i.employer_code=i.employer?i.employer.code:null,i.designation_code=i.designation?i.designation.code:null,i.facility_code=i.facility?i.facility.code:null,delete i.email,delete i.id,this.http.update("users/",s,i).subscribe({next:f=>{this.is_updating=!1,i.email=b,i.id=s},error:f=>{"status"===n&&(this.account_list[r].is_active=!i.is_active),"reports"===n&&(this.account_list[r].reports_flag=!i.reports_flag),this.submit_error=f.error.errors,i.email=b,this.is_updating=!1}})}constructor(e){this.http=e,this.faSpinner=d.z1G,this.faChevronLeft=d.Wzs,this.faChevronRight=d.XkK,this.faAnglesLeft=d.rNr,this.faAnglesRight=d.up_,this.faSearch=d.MjD,this.is_updating=!1,this.per_page=10}ngOnInit(){this.loadAccount()}static{this.\u0275fac=function(r){return new(r||o)(t.rXU(h.k))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-account-list"]],standalone:!1,decls:38,vars:6,consts:[[1,"bg-white","border","border-solid","border-slate-100","rounded-xl","shadow-md"],[1,"border","border-solid","border-slate-100","rounded-t-xl","font-semibold","justify-between"],[1,"flex","border","border-solid","border-slate-100","rounded-t-xl","p-3","font-semibold","justify-between"],[1,"text-blue-500","text-lg","pt-2","pl-5"],["class","text-white-500 bg-amber-500 active:bg-amber-300 hover:bg-amber-600 text-sm px-4 py-2 rounded hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150","type","button",4,"ngIf"],[1,"border","border-gray-400","rounded-md"],["type","text","placeholder","Search family",1,"form-input","border-0","text-sm","p-1","m-1","border-r","border-gray-400",3,"ngModelChange","keyup.enter","ngModel"],["type","button",1,"text-blue-500","w-9","h-9",3,"click"],[1,"-ml-1",3,"icon"],["class","col-span-8 bg-red-200 rounded border border-red-300 text-red-900 text-sm",4,"ngIf"],[1,"overflow-x-auto","relative","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400","mb-5"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6"],["scope","col",1,"py-3","px-6","text-center"],["class","bg-white border-t",3,"ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],["type","button",1,"text-white-500","bg-amber-500","active:bg-amber-300","hover:bg-amber-600","text-sm","px-4","py-2","rounded","hover:shadow-lg","outline-none","focus:outline-none","mr-1","mb-1","ease-linear","transition-all","duration-150"],["animation","spin",1,"mr-3",3,"icon"],[1,"col-span-8","bg-red-200","rounded","border","border-red-300","text-red-900","text-sm"],[1,"block","p-3","pl-10"],[1,"list-disc"],[4,"ngFor","ngForOf"],[1,"bg-white","border-t",3,"ngClass"],["scope","row",1,"py-4","px-6","font-medium","whitespace-nowrap"],[1,"py-4","px-6"],[1,"py-4","px-6","text-center"],["type","checkbox",1,"input-checkbox",3,"ngModelChange","change","ngModel","disabled"],[1,"",3,"ngClass"],[1,"inline-flex","relative","items-center","cursor-pointer"],["type","checkbox",1,"sr-only","peer",3,"ngModelChange","change","ngModel","disabled"],[1,"w-14","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-blue-300","rounded-full","peer","peer-checked:after:translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:left-[8px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","peer-checked:bg-blue-600","disabled:opacity-7",3,"ngClass"],[1,"bg-white","px-4","py-3","flex","items-center","justify-between","border-t","border-gray-200","sm:px-6"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"text-sm","text-gray-700"],[1,"font-medium"],["aria-label","Pagination",1,"relative","z-0","inline-flex","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","disabled"],[1,"block","h-15","w-15","text-gray-500","pr-1",3,"icon"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","bg-white","text-sm","font-medium","text-gray-700","hover:bg-gray-50",3,"click","disabled"],[1,"h-5","w-5","text-gray-500",3,"icon"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","disabled"]],template:function(r,n){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.EFF(4," User accounts "),t.k0s(),t.j41(5,"div"),t.DNE(6,v,3,1,"button",4),t.k0s(),t.j41(7,"div",5)(8,"input",6),t.mxI("ngModelChange",function(s){return t.DH7(n.search_item,s)||(n.search_item=s),s}),t.bIt("keyup.enter",function(){return n.loadAccount()}),t.k0s(),t.j41(9,"button",7),t.bIt("click",function(){return n.loadAccount()}),t.nrm(10,"fa-icon",8),t.k0s()()(),t.DNE(11,F,5,3,"div",9),t.j41(12,"div")(13,"div",10)(14,"table",11)(15,"thead",12)(16,"tr")(17,"th",13),t.EFF(18,"Name"),t.k0s(),t.j41(19,"th",13),t.EFF(20,"Birthdate"),t.k0s(),t.j41(21,"th",13),t.EFF(22,"Gender"),t.k0s(),t.j41(23,"th",13),t.EFF(24,"Contact Number"),t.k0s(),t.j41(25,"th",13),t.EFF(26,"Email Address"),t.k0s(),t.j41(27,"th",14),t.EFF(28,"Provincial "),t.nrm(29,"br"),t.EFF(30," Report"),t.k0s(),t.j41(31,"th",14),t.EFF(32,"Active "),t.nrm(33,"br"),t.EFF(34," Status"),t.k0s()()(),t.j41(35,"tbody"),t.DNE(36,j,20,28,"tr",15),t.k0s()()()()(),t.DNE(37,C,27,11,"div",16),t.k0s()),2&r&&(t.R7$(6),t.Y8G("ngIf",n.is_updating),t.R7$(2),t.R50("ngModel",n.search_item),t.R7$(2),t.Y8G("icon",n.faSearch),t.R7$(),t.Y8G("ngIf",n.submit_error),t.R7$(25),t.Y8G("ngForOf",n.account_list),t.R7$(),t.Y8G("ngIf",(null==n.account_list?null:n.account_list.length)>=1))},dependencies:[l.YU,l.Sq,l.bT,g.aY,u.me,u.Zm,u.BC,u.vS,l.vh,l.lG],encapsulation:2})}}return o})()}];let A=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[m.iI.forChild(R),m.iI]})}}return o})(),G=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[l.MD,A,g.dX,u.YN]})}}return o})()}}]);