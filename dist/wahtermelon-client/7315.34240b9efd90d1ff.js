"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[7315],{7315:(Xi,G,_)=>{_.r(G),_.d(G,{ConsultationModule:()=>Ni});var c=_(177),b=_(3895),d=_(5383),x=_(9969),t=_(4438),E=_(4626);function U(n,a){if(1&n&&(t.j41(0,"div",7)(1,"div",8),t.nrm(2,"apx-chart",9),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(2),t.Y8G("series",null==e.chartOptions?null:e.chartOptions.series)("chart",null==e.chartOptions?null:e.chartOptions.chart)("xaxis",null==e.chartOptions?null:e.chartOptions.xaxis)("stroke",null==e.chartOptions?null:e.chartOptions.stroke)("tooltip",null==e.chartOptions?null:e.chartOptions.tooltip)("dataLabels",null==e.chartOptions?null:e.chartOptions.dataLabels)("title",null==e.chartOptions?null:e.chartOptions.title)}}function L(n,a){if(1&n&&(t.j41(0,"div",10)(1,"div",11),t.nrm(2,"apx-chart",9),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(2),t.Y8G("series",null==e.WeightChart?null:e.WeightChart.series)("chart",null==e.WeightChart?null:e.WeightChart.chart)("xaxis",null==e.WeightChart?null:e.WeightChart.xaxis)("stroke",null==e.WeightChart?null:e.WeightChart.stroke)("tooltip",null==e.WeightChart?null:e.WeightChart.tooltip)("dataLabels",null==e.WeightChart?null:e.WeightChart.dataLabels)("title",null==e.WeightChart?null:e.WeightChart.title)}}function H(n,a){if(1&n&&(t.j41(0,"div",10)(1,"div",12),t.nrm(2,"apx-chart",9),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(2),t.Y8G("series",null==e.BmiChart?null:e.BmiChart.series)("chart",null==e.BmiChart?null:e.BmiChart.chart)("xaxis",null==e.BmiChart?null:e.BmiChart.xaxis)("stroke",null==e.BmiChart?null:e.BmiChart.stroke)("tooltip",null==e.BmiChart?null:e.BmiChart.tooltip)("dataLabels",null==e.BmiChart?null:e.BmiChart.dataLabels)("title",null==e.BmiChart?null:e.BmiChart.title)}}function J(n,a){if(1&n&&(t.j41(0,"div",4),t.DNE(1,U,3,7,"div",5)(2,L,3,7,"div",6)(3,H,3,7,"div",6),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.Y8G("ngIf",e.show_bp),t.R7$(),t.Y8G("ngIf",e.show_weight),t.R7$(),t.Y8G("ngIf",e.show_bmi)}}function z(n,a){if(1&n&&(t.j41(0,"div",1),t.nrm(1,"div",2),t.DNE(2,J,4,3,"div",3),t.k0s()),2&n){const e=t.XpG();t.R7$(2),t.Y8G("ngIf",e.show_graphs)}}let K=(()=>{class n{patientVitals(e){this.vitals_graph.systolic=[],this.vitals_graph.diastolic=[],this.vitals_graph.bp_date=[],this.vitals_graph.weight=[],this.vitals_graph.weight_date=[],Object.entries(e).forEach(([s,i],o)=>{let r=i;r.bp_systolic&&(this.vitals_graph.systolic.push(r.bp_systolic),this.vitals_graph.diastolic.push(r.bp_diastolic),this.vitals_graph.bp_date.push(r.vitals_date)),r.patient_weight&&(this.vitals_graph.weight.push(r.patient_weight),this.vitals_graph.weight_date.push(r.vitals_date)),r.patient_bmi&&(this.vitals_graph.bmi.push(r.patient_bmi),this.vitals_graph.bmi_date.push(r.vitals_date))}),this.vitals_graph.systolic.length>0||this.vitals_graph.diastolic.length>0||this.vitals_graph.weight.length>0||this.vitals_graph.bmi.length>0?(this.selected_chart="all_chart",this.loadChart(this.selected_chart)):this.showChart=!1,this.generateAllChart()}generateBPChart(){this.chartOptions={series:[{name:"Systolic",data:this.vitals_graph.systolic},{name:"Diastolic",data:this.vitals_graph.diastolic}],chart:{height:200,type:"area"},dataLabels:{enabled:!1},stroke:{curve:"smooth"},title:{text:"Blood Pressure History"},xaxis:{type:"datetime",categories:this.vitals_graph.bp_date},tooltip:{x:{format:"MM/dd/yyyy HH:mm"}}}}generateWeightChart(){this.WeightChart={series:[{name:"Weight",data:this.vitals_graph.weight}],chart:{height:200,type:"line"},dataLabels:{enabled:!1},stroke:{curve:"smooth"},title:{text:"Weight History"},xaxis:{type:"datetime",categories:this.vitals_graph.weight_date},tooltip:{x:{format:"MM/dd/yyyy HH:mm"}}}}generateBMIChart(){this.BmiChart={series:[{name:"BMI",data:this.vitals_graph.bmi}],chart:{height:200,type:"line"},dataLabels:{enabled:!1},stroke:{curve:"smooth"},title:{text:"BMI History"},xaxis:{type:"datetime",categories:this.vitals_graph.bmi_date},tooltip:{x:{format:"MM/dd/yyyy HH:mm"}}}}loadChart(e){switch(this.show_bmi=!1,this.show_bp=!1,this.show_weight=!1,e){case"bp_chart":this.show_bp=!0;break;case"weight_chart":this.show_weight=!0;break;case"bmi_chart":this.show_bmi=!0;break;case"bmi_weight_chart":this.show_weight=!0,this.show_bmi=!0;break;case"bp_weight_chart":this.show_bp=!0,this.show_weight=!0;break;case"all_chart":this.show_bp=!0,this.show_weight=!0,this.show_bmi=!0}this.showChart=!0}generateAllChart(){this.generateBPChart(),this.generateWeightChart(),this.generateBMIChart()}constructor(e){this.router=e,this.showChart=!1,this.show_bmi=!1,this.show_bp=!1,this.show_weight=!1,this.show_graphs=!0,this.vitals_graph={systolic:[],diastolic:[],bp_date:[],weight:[],weight_date:[],bmi:[],bmi_date:[]}}ngOnChanges(e){this.vitals&&this.patientVitals(this.vitals)}ngOnInit(){}static{this.\u0275fac=function(s){return new(s||n)(t.rXU(b.Ix))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-graphs"]],inputs:{vitals:"vitals"},standalone:!1,features:[t.OA$],decls:1,vars:1,consts:[["class","grid grid-cols-1 w-full h-auto",4,"ngIf"],[1,"grid","grid-cols-1","w-full","h-auto"],[1,"w-full","flex","ml-5","font-semibold"],["class","cols-span-1 flex w-full mt-3",4,"ngIf"],[1,"cols-span-1","flex","w-full","mt-3"],["class","w-1/3 shadow px-2 mr-2 py-4 rounded-xl text-gray-600 border border-slate-100",4,"ngIf"],["class","w-1/3 shadow px-2 ml-2  py-4 rounded-xl text-gray-600 border border-slate-100",4,"ngIf"],[1,"w-1/3","shadow","px-2","mr-2","py-4","rounded-xl","text-gray-600","border","border-slate-100"],["id","bp-chart"],[3,"series","chart","xaxis","stroke","tooltip","dataLabels","title"],[1,"w-1/3","shadow","px-2","ml-2","py-4","rounded-xl","text-gray-600","border","border-slate-100"],["id","weight-chart"],["id","bmi-chart"]],template:function(s,i){1&s&&t.DNE(0,z,3,1,"div",0),2&s&&t.Y8G("ngIf",i.showChart)},dependencies:[c.bT,E.Q],encapsulation:2,data:{animation:[(0,x.hZ)("openCloseAccordion",[(0,x.kY)(":enter",[(0,x.iF)({height:0,opacity:0}),(0,x.i0)("200ms",(0,x.iF)({height:"100%",opacity:"100%"}))]),(0,x.kY)(":leave",[(0,x.i0)("200ms",(0,x.iF)({height:0,opacity:0}))])])]}})}}return n})();var w=_(5964),y=_(8141),v=_(614),u=_(3318),f=_(5794),p=_(60),R=_(1757),F=_(9726);function W(n,a){if(1&n&&(t.j41(0,"span",22),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.konsulta_medicine.desc)}}function Q(n,a){if(1&n&&(t.j41(0,"span",22),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.E5c("",e.added_medicine," ",e.dosage_quantity," ",e.unit_of_measurement.code,"")}}function Z(n,a){if(1&n&&(t.j41(0,"span",55)(1,"div",56),t.DNE(2,W,2,1,"span",57)(3,Q,2,3,"span",57),t.j41(4,"span"),t.EFF(5),t.k0s(),t.nrm(6,"br"),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.Y8G("ngIf",e.konsulta_medicine),t.R7$(),t.Y8G("ngIf",!e.konsulta_medicine),t.R7$(2),t.Lme("",e.quantity," ",e.preparation.desc+(e.quantity>1?"s":""),"")}}function tt(n,a){if(1&n&&(t.j41(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"div",16),t.nrm(5,"img",17),t.j41(6,"span",18),t.EFF(7,"ELECTRONIC PRESCRIPTION SLIP (EPRESS)"),t.k0s()(),t.j41(8,"div",19),t.EFF(9," To be filled-out by the facility (Pupunuan ng Pasilidad) "),t.k0s(),t.j41(10,"table",20)(11,"tbody")(12,"tr")(13,"td",21)(14,"span",22),t.EFF(15,"HCI NAME:"),t.k0s(),t.nrm(16,"br"),t.EFF(17),t.k0s(),t.j41(18,"td",23)(19,"span",22),t.EFF(20,"Case No:"),t.k0s(),t.nrm(21,"br"),t.EFF(22),t.k0s(),t.j41(23,"td",23)(24,"span",24),t.EFF(25,"HCI Accreditation No.:"),t.k0s(),t.nrm(26,"br"),t.EFF(27),t.k0s(),t.j41(28,"td",23)(29,"span",25),t.EFF(30,"Transaction No.:"),t.k0s(),t.nrm(31,"br"),t.EFF(32),t.k0s()(),t.j41(33,"tr")(34,"td",26)(35,"span",22),t.EFF(36,"PIN (PhilHealth Identification No.):"),t.k0s(),t.nrm(37,"br"),t.EFF(38),t.k0s(),t.j41(39,"td",26)(40,"span",22),t.EFF(41,"Membership Category:"),t.k0s(),t.nrm(42,"br"),t.EFF(43," \xa0 "),t.k0s(),t.j41(44,"td",26)(45,"span",22),t.EFF(46,"Membership Type:"),t.k0s(),t.nrm(47,"br"),t.j41(48,"div",27)(49,"div"),t.nrm(50,"input",28),t.j41(51,"label"),t.EFF(52,"Member"),t.k0s()(),t.j41(53,"div",29),t.nrm(54,"input",28),t.j41(55,"label"),t.EFF(56,"Dependent"),t.k0s()()()()(),t.j41(57,"tr")(58,"td",21)(59,"span",22),t.EFF(60,"Patient Name (Pangalan ng Pasyente):"),t.k0s(),t.nrm(61,"br"),t.EFF(62),t.k0s(),t.j41(63,"td",30)(64,"span",22),t.EFF(65,"Age (Edad):"),t.k0s(),t.nrm(66,"br"),t.EFF(67),t.k0s(),t.j41(68,"td",30)(69,"span",22),t.EFF(70,"Contact No. (Numero ng Telepono):"),t.k0s(),t.nrm(71,"br"),t.EFF(72),t.k0s()()()(),t.j41(73,"div",31)(74,"div",32)(75,"div",33),t.nrm(76,"fa-icon",6),t.k0s(),t.j41(77,"div",34),t.EFF(78,"USE GENERIC NAME"),t.k0s(),t.nrm(79,"div"),t.k0s(),t.j41(80,"div",35)(81,"div"),t.DNE(82,Z,7,4,"span",36),t.k0s()(),t.j41(83,"div",37)(84,"div",38)(85,"div",39),t.EFF(86," Next Dispensing Date: ___________________ "),t.nrm(87,"br"),t.EFF(88," (Petsa ng susunod na bigay ng gamot) "),t.k0s()(),t.j41(89,"div",40)(90,"div",41)(91,"div"),t.EFF(92,"Physician: "),t.j41(93,"span",42),t.EFF(94),t.k0s()(),t.j41(95,"div"),t.EFF(96,"PRC LIC No.: "),t.j41(97,"span",42),t.EFF(98),t.k0s()(),t.j41(99,"div"),t.EFF(100,"PTR No.: __________________________________"),t.k0s(),t.j41(101,"div"),t.EFF(102,"S2 No.: ___________________________________"),t.k0s()()()()(),t.j41(103,"div",43),t.EFF(104," Note: "),t.nrm(105,"br"),t.EFF(106," \xa0 "),t.k0s(),t.j41(107,"div",44)(108,"div",45),t.EFF(109," Did you received the above-mentioned medicines?"),t.nrm(110,"br"),t.EFF(111," (Natanggap mo ba ang mga gamot na nabanggit?) "),t.k0s(),t.j41(112,"div",46),t.EFF(113," __Yes (Oo) __No (Hindi) "),t.k0s()(),t.j41(114,"div",44)(115,"div",45),t.EFF(116," Are you satisfied with the medicines you received?"),t.nrm(117,"br"),t.EFF(118," (Nasiyahan ka ba sa mga gamot na natanggap mo?) "),t.k0s(),t.j41(119,"div",47),t.nrm(120,"input",48),t.j41(121,"div",49),t.nrm(122,"fa-icon",50)(123,"br"),t.EFF(124," HAPPY "),t.k0s()(),t.j41(125,"div",47),t.nrm(126,"input",48),t.j41(127,"div",49),t.nrm(128,"fa-icon",50)(129,"br"),t.EFF(130," NEUTRAL "),t.k0s()(),t.j41(131,"div",47),t.nrm(132,"input",48),t.j41(133,"div",49),t.nrm(134,"fa-icon",50)(135,"br"),t.EFF(136," SAD "),t.k0s()()(),t.j41(137,"div",51)(138,"div",45),t.EFF(139," For your comment, suggestion or complaint:"),t.nrm(140,"br"),t.EFF(141," (Para sa iyong komento, mungkahi o reklamo): "),t.k0s()(),t.nrm(142,"div",51),t.j41(143,"div",52)(144,"div",45),t.EFF(145," Note:"),t.nrm(146,"br"),t.EFF(147," Accomplished form shall be submitted to Konsulta Provider"),t.nrm(148,"br"),t.EFF(149," (Ang kumpletong form ay dapat Isumite sa tagapagbigay ng Konsulta) "),t.k0s(),t.j41(150,"div",53)(151,"div",54),t.EFF(152," Philhealth Identification Number of Patient: "),t.j41(153,"span",42),t.EFF(154),t.k0s()()()()()()()()),2&n){const e=t.XpG();t.R7$(17),t.SpI(" ",null==e.facility?null:e.facility.konsulta_credential.facility_name," "),t.R7$(5),t.SpI(" ",null==e.patient_info?null:e.patient_info.case_number," "),t.R7$(5),t.SpI(" ",null==e.facility?null:e.facility.konsulta_credential.accreditation_number," "),t.R7$(5),t.SpI(" ","S"+(null==e.consult_details?null:e.consult_details.transaction_number)," "),t.R7$(6),t.SpI(" ",null==e.patient_philhealth?null:e.patient_philhealth.philhealth_id," "),t.R7$(12),t.Y8G("checked","MM"===(null==e.patient_philhealth?null:e.patient_philhealth.membership_type_id)),t.R7$(4),t.Y8G("checked","DD"===(null==e.patient_philhealth?null:e.patient_philhealth.membership_type_id)),t.R7$(8),t.LHq(" ",null==e.patient_info?null:e.patient_info.last_name,", ",null==e.patient_info?null:e.patient_info.first_name," ",null==e.patient_info?null:e.patient_info.middle_name," ","NA"===(null==e.patient_info?null:e.patient_info.suffix_name)?"":null==e.patient_info?null:e.patient_info.suffix_name," "),t.R7$(5),t.SpI(" ",e.patient_age," "),t.R7$(5),t.SpI(" ",null==e.patient_info?null:e.patient_info.mobile_number," "),t.R7$(4),t.Y8G("icon",e.faPrescription),t.R7$(6),t.Y8G("ngForOf",e.prescriptions),t.R7$(12),t.LHq(" ",e.prescriptions[0].prescriber.first_name," ","N/A"!==e.prescriptions[0].prescriber.middle_name?e.prescriptions[0].prescriber.middle_name:""," ",e.prescriptions[0].prescriber.last_name," ","NA"===e.prescriptions[0].prescriber.suffix_name?"":e.prescriptions[0].prescriber.suffix_name,""),t.R7$(4),t.JRh(e.prescriptions[0].prescriber.prc_number),t.R7$(24),t.Y8G("icon",e.faFaceSmile),t.R7$(6),t.Y8G("icon",e.faFaceMeh),t.R7$(6),t.Y8G("icon",e.faFaceFrown),t.R7$(20),t.JRh(null==e.patient_philhealth?null:e.patient_philhealth.philhealth_id)}}function et(n,a){if(1&n&&(t.j41(0,"div",58),t.nrm(1,"fa-icon",59),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("icon",e.faCircleNotch)}}let I=(()=>{class n{closeModal(){this.toggleModal.emit("epres")}getAge(){this.http.get("patient-philhealth/philhealth",{params:{"filter[patient_id]":this.patient_info.id,per_page:"1",sort:"-enlistment_date"}}).subscribe({next:e=>{this.philhealth_info=e.data[0];let s={date_from:this.dateHelper.dateFormat(this.patient_info.birthdate),date_to:e.data[0].enlistment_date};this.http.post("konsulta/generate-age",s).subscribe({next:i=>{this.patient_age=i.data,this.show_form=!0},error:i=>console.log(i)})},error:e=>console.log(e)})}constructor(e,s){this.http=e,this.dateHelper=s,this.toggleModal=new t.bkB,this.faPrint=d.JxU,this.faFaceSmile=v.H82,this.faFaceMeh=v.Lz9,this.faFaceFrown=v.HoF,this.faCircleNotch=d.s4k,this.faPrescription=d.es,this.show_form=!1}ngOnInit(){console.log(this.prescriptions),this.patient_info=this.http.getPatientInfo(),this.patient_philhealth=this.http.getPhilhealhtInfo(),this.facility=this.http.getUserFromJSON(),this.prescription_length=Object.keys(this.prescriptions).length,this.getAge()}static{this.\u0275fac=function(s){return new(s||n)(t.rXU(u.k),t.rXU(R.F))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-epres"]],inputs:{prescriptions:"prescriptions",consult_details:"consult_details"},outputs:{toggleModal:"toggleModal"},standalone:!1,decls:14,vars:4,consts:[["id","defaultModal","tabindex","-1","aria-hidden","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","max-w-4xl","h-full","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],["type","button","printSectionId","philhealth_form","ngxPrint","",1,"bg-white","text-blue-500","hover:bg-gray-100","hover:text-blue-400","px-2","py-1","rounded-md",3,"useExistingCss"],[3,"icon"],["class","overflow-y-auto scrollbar-thin h-96 scrollbar-thumb-gray-400 scrollbar-track-gray-100",4,"ngIf"],["class","h-96 flex justify-center align-middle w-full",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"text-white","bg-orange-500","hover:ring-2","focus:outline-none","hover:ring-orange-300","rounded","text-sm","font-medium","px-6","py-2.5","transition","duration-150","ease-in-out","transform","hover:scale-110",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"overflow-y-auto","scrollbar-thin","h-96","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"w-[210mm]","h-[297mm]","flex","justify-center","align-middle","bg-white"],["id","philhealth_form",1,"w-[195mm]","h-[272mm]","mt-[12.5mm]"],[1,"border-2","border-gray-400"],[1,"flex","justify-center","h-16","p-1"],["src","./assets/img/philhealth_logo_with_name.png",1,"h-16"],[1,"font-semibold","mt-4","ml-5","text-xl"],[1,"m-1","font-semibold","mt-3"],[1,"table-auto","border","border-gray-400","p-1","w-full","mb-5"],["colspan","6",1,"text-xs","border","border-gray-400"],[1,"font-semibold"],["colspan","2",1,"text-xs","border","border-gray-400"],[1,"font-semibold","text-xs"],[1,"font-semibold","text-sm"],["colspan","4",1,"text-xs","border","border-gray-400"],[1,"flex","justify-end"],["type","checkbox","disabled","",1,"input-checkbox","disabled:bg-gray-400","checked:bg-gray-400",3,"checked"],[1,"ml-3"],["colspan","3",1,"text-xs","border","border-gray-400"],[1,"h-fit","border","border-gray-400","flex","flex-col","w-full"],[1,"flex-none","grid","grid-cols-3"],[1,"ml-4","mt-2","text-2xl"],[1,"flex","text-center","text-xl","font-bold"],[1,"grow","text-sm","grid","grid-cols-1","h-96"],["class","flex justify-center",4,"ngFor","ngForOf"],[1,"flex-none","grid","grid-cols-2"],[1,"relative","text-xs"],[1,"absolute","inset-x-0","bottom-0"],[1,"flex","justify-end","text-xs"],[1,"flex","flex-col"],[1,"underline"],[1,"text-[.6em]","border-b-2","border-dashed","border-gray-400","w-full","p-2"],[1,"flex","p-2","border-b-2","border-dotted","border-gray-400","w-full"],[1,"w-7/12","text-[.65em]"],[1,"text-[.65em]","mt-3","ml-5"],[1,"text-[.65em]","ml-5","flex","text-center"],["type","checkbox",1,"input-checkbox","mt-3"],[1,"ml-2"],[1,"text-xl",3,"icon"],[1,"flex","p-2","border-b-2","border-gray-400","w-full"],[1,"flex","p-1","w-full"],[1,"relative","text-[.65em]","w-5/12"],[1,"absolute","bottom-0","right-0"],[1,"flex","justify-center"],[1,"flex","flex-col","text-center"],["class","font-semibold",4,"ngIf"],[1,"h-96","flex","justify-center","align-middle","w-full"],["animation","spin","size","2xl",1,"mt-20","text-blue-500",3,"icon"]],template:function(s,i){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.EFF(5," electronic Prescription Slip (ePresS) "),t.k0s(),t.j41(6,"button",5),t.nrm(7,"fa-icon",6),t.k0s()(),t.DNE(8,tt,155,24,"div",7)(9,et,2,1,"div",8),t.j41(10,"div",9)(11,"button",10),t.bIt("click",function(){return i.closeModal()}),t.EFF(12,"Close"),t.k0s()()()()(),t.nrm(13,"div",11)),2&s&&(t.R7$(6),t.Y8G("useExistingCss",!0),t.R7$(),t.Y8G("icon",i.faPrint),t.R7$(),t.Y8G("ngIf",i.show_form),t.R7$(),t.Y8G("ngIf",!i.show_form))},dependencies:[c.Sq,c.bT,p.aY,F.GV],styles:["@page{size:auto;size:A4;margin:7mm}"]})}}return n})();var nt=_(1196);function it(n,a){if(1&n&&(t.j41(0,"tr")(1,"td",48),t.EFF(2),t.k0s(),t.j41(3,"td",49),t.nrm(4,"fa-icon",6),t.k0s(),t.j41(5,"td",50),t.EFF(6),t.nI1(7,"date"),t.k0s(),t.j41(8,"td",50),t.EFF(9),t.k0s()()),2&n){const e=a.$implicit,s=t.XpG(2);t.R7$(2),t.SpI(" ",e.value.desc," "),t.R7$(2),t.Y8G("icon",e.value.with_result?s.faCheck:s.faXmark),t.R7$(2),t.SpI(" ",e.value.with_result?t.i5U(7,4,e.value.with_result.laboratory_date,"MM/dd/yyyy"):"-"," "),t.R7$(3),t.SpI(" ",e.value.with_result?e.value.with_result.user:"-"," ")}}function st(n,a){if(1&n&&(t.j41(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"div",16),t.nrm(5,"img",17),t.j41(6,"span",18),t.EFF(7,"ELECTRONIC KONSULTA AVAILMENT SLIP (EKAS)"),t.k0s()(),t.j41(8,"div",19),t.EFF(9," To be filled-out by the facility (Pupunuan ng Pasilidad) "),t.k0s(),t.j41(10,"table",20)(11,"tbody")(12,"tr")(13,"td",21)(14,"span",22),t.EFF(15,"HCI NAME:"),t.k0s(),t.nrm(16,"br"),t.EFF(17),t.k0s(),t.j41(18,"td",23)(19,"span",22),t.EFF(20,"Case No:"),t.k0s(),t.nrm(21,"br"),t.EFF(22),t.k0s(),t.j41(23,"td",23)(24,"span",24),t.EFF(25,"HCI Accreditation No.:"),t.k0s(),t.nrm(26,"br"),t.EFF(27),t.k0s(),t.j41(28,"td",23)(29,"span",25),t.EFF(30,"Transaction No.:"),t.k0s(),t.nrm(31,"br"),t.EFF(32),t.k0s()(),t.j41(33,"tr")(34,"td",21)(35,"span",22),t.EFF(36,"PIN (PhilHealth Identification No.):"),t.k0s(),t.nrm(37,"br"),t.EFF(38),t.k0s(),t.j41(39,"td",21)(40,"span",22),t.EFF(41,"Membership Category (Kategorya ng Miyembro):"),t.k0s(),t.nrm(42,"br"),t.EFF(43," \xa0 "),t.k0s()(),t.j41(44,"tr")(45,"td",21)(46,"span",22),t.EFF(47,"Patient Name (Pangalan ng Pasyente):"),t.k0s(),t.nrm(48,"br"),t.EFF(49),t.k0s(),t.j41(50,"td",26)(51,"span",22),t.EFF(52,"Age (Edad):"),t.k0s(),t.nrm(53,"br"),t.EFF(54),t.k0s(),t.j41(55,"td",26)(56,"span",22),t.EFF(57,"Contact No. (Numero ng Telepono):"),t.k0s(),t.nrm(58,"br"),t.EFF(59),t.k0s()(),t.j41(60,"tr")(61,"td",21)(62,"span",22),t.EFF(63,"Membership Type:"),t.k0s(),t.nrm(64,"br"),t.j41(65,"div",27)(66,"div"),t.nrm(67,"input",28),t.j41(68,"label"),t.EFF(69,"Member"),t.k0s()(),t.j41(70,"div",29),t.nrm(71,"input",28),t.j41(72,"label"),t.EFF(73,"Dependent"),t.k0s()()()(),t.j41(74,"td",21)(75,"span",22),t.EFF(76,"Authorization Transaction Code (ATC):"),t.k0s(),t.nrm(77,"br"),t.EFF(78),t.k0s()()()(),t.j41(79,"table",30)(80,"thead")(81,"tr")(82,"th",31),t.EFF(83," Konsulta Services "),t.k0s(),t.j41(84,"th",32),t.EFF(85," Performed "),t.nrm(86,"br")(87,"fa-icon"),t.k0s(),t.j41(88,"th",33),t.EFF(89," Date Performed "),t.k0s(),t.j41(90,"th",34),t.EFF(91," Performed by "),t.k0s()()(),t.j41(92,"tbody"),t.DNE(93,it,10,7,"tr",35),t.nI1(94,"keyvalue"),t.k0s()(),t.j41(95,"div",36),t.EFF(96," Note: "),t.nrm(97,"br"),t.EFF(98," This form shall be provided to the Konsulta beneficiary "),t.k0s(),t.j41(99,"div",37)(100,"div",38),t.EFF(101," Have you received the above-mentioned essential services?"),t.nrm(102,"br"),t.EFF(103," (Natanggap mo ba ang mga pangunahing serbisyo na nabanggit?) "),t.k0s(),t.j41(104,"div",39),t.EFF(105," __Yes (Oo) __No (Hindi) "),t.k0s()(),t.j41(106,"div",37)(107,"div",38),t.EFF(108," How satisfied are you with the services provided?"),t.nrm(109,"br"),t.EFF(110," (Gaano ka nasiyahan sa natanggap na serbisyo?) "),t.k0s(),t.j41(111,"div",40),t.nrm(112,"input",41),t.j41(113,"div",42),t.nrm(114,"fa-icon",43)(115,"br"),t.EFF(116," HAPPY "),t.k0s()(),t.j41(117,"div",40),t.nrm(118,"input",41),t.j41(119,"div",42),t.nrm(120,"fa-icon",43)(121,"br"),t.EFF(122," NEUTRAL "),t.k0s()(),t.j41(123,"div",40),t.nrm(124,"input",41),t.j41(125,"div",42),t.nrm(126,"fa-icon",43)(127,"br"),t.EFF(128," SAD "),t.k0s()()(),t.j41(129,"div",44)(130,"div",38),t.EFF(131," For your comment, suggestion or complaint:"),t.nrm(132,"br"),t.EFF(133," (Para sa iyong komento, mungkahi o reklamo): "),t.k0s()(),t.nrm(134,"div",44),t.j41(135,"div",45)(136,"div",38),t.EFF(137," Note:"),t.nrm(138,"br"),t.EFF(139," Accomplished form shall be submitted to Konsulta Provider"),t.nrm(140,"br"),t.EFF(141," (Ang kumpletong form ay dapat Isumite sa tagapagbigay ng Konsulta) "),t.k0s(),t.j41(142,"div",46),t.EFF(143," Philhealth Identification Number of Patient: "),t.j41(144,"span",47),t.EFF(145),t.k0s()()()()()()()),2&n){const e=t.XpG();t.R7$(17),t.SpI(" ",null==e.facility?null:e.facility.konsulta_credential.facility_name," "),t.R7$(5),t.SpI(" ",null==e.patient_info?null:e.patient_info.case_number," "),t.R7$(5),t.SpI(" ",null==e.facility?null:e.facility.konsulta_credential.accreditation_number," "),t.R7$(5),t.SpI(" ","S"+(null==e.consult_details?null:e.consult_details.transaction_number)," "),t.R7$(6),t.SpI(" ",null==e.patient_philhealth?null:e.patient_philhealth.philhealth_id," "),t.R7$(11),t.LHq(" ",null==e.patient_info?null:e.patient_info.last_name,", ",null==e.patient_info?null:e.patient_info.first_name," ",null==e.patient_info?null:e.patient_info.middle_name," ","NA"===(null==e.patient_info?null:e.patient_info.suffix_name)?"":null==e.patient_info?null:e.patient_info.suffix_name," "),t.R7$(5),t.SpI(" ",e.patient_age," "),t.R7$(5),t.SpI(" ",null==e.patient_info?null:e.patient_info.mobile_number," "),t.R7$(8),t.Y8G("checked","MM"===(null==e.patient_philhealth?null:e.patient_philhealth.membership_type_id)),t.R7$(4),t.Y8G("checked","DD"===(null==e.patient_philhealth?null:e.patient_philhealth.membership_type_id)),t.R7$(7),t.SpI(" ",!0===(null==e.consult_details?null:e.consult_details.walkedin_status)?"WALKEDIN":null!=e.consult_details&&e.consult_details.authorization_transaction_code?null==e.consult_details?null:e.consult_details.authorization_transaction_code:"WALKEDIN"," "),t.R7$(15),t.Y8G("ngForOf",t.bMT(94,19,e.lab_arr)),t.R7$(21),t.Y8G("icon",e.faFaceSmile),t.R7$(6),t.Y8G("icon",e.faFaceMeh),t.R7$(6),t.Y8G("icon",e.faFaceFrown),t.R7$(19),t.JRh(null==e.patient_philhealth?null:e.patient_philhealth.philhealth_id)}}function ot(n,a){if(1&n&&(t.j41(0,"div",51),t.nrm(1,"fa-icon",52),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("icon",e.faCircleNotch)}}let $=(()=>{class n{getResults(){Object.entries(this.lab_list).forEach(([e,s],i)=>{let o=this.nameService.getURL(s.laboratory.code);""!==o&&this.http.get(o,{params:{request_id:s.id}}).subscribe({next:r=>{r.data[0]&&this.lab_arr[s.laboratory.code]&&(this.lab_arr[s.laboratory.code].with_result=r.data[0])},error:r=>console.log(r)})}),this.getAge()}getAge(){this.http.get("patient-philhealth/philhealth",{params:{"filter[patient_id]":this.patient_info.id,per_page:"1",sort:"-enlistment_date"}}).subscribe({next:e=>{this.philhealth_info=e.data[0];let s={date_from:this.dateHelper.dateFormat(this.patient_info.birthdate),date_to:e.data[0].enlistment_date};this.http.post("konsulta/generate-age",s).subscribe({next:i=>{this.show_form=!0,this.patient_age=i.data},error:i=>console.log(i)})},error:e=>console.log(e)})}closeModal(){this.toggleModal.emit("ekas")}constructor(e,s,i){this.http=e,this.nameService=s,this.dateHelper=i,this.toggleModal=new t.bkB,this.faPrint=d.JxU,this.faFaceSmile=v.H82,this.faFaceMeh=v.Lz9,this.faFaceFrown=v.HoF,this.faCircleNotch=d.s4k,this.faCheck=d.e68,this.faXmark=d.Jyw,this.show_form=!1,this.lab_arr={CBC:{desc:"Complete Blood Count (CBC) w/ platelet count",with_result:null},LPFL:{desc:"Lipid profile (Total Cholesterol, Triglycerides, HDL Cholesterol, LDL Cholesterol)",with_result:null},FBS:{desc:"Fasting Blood Sugar (FBS)",with_result:null},OGTT:{desc:"Oral Glucose Tolerance Test",with_result:null},HBA:{desc:"Glycosylated Hemoglobin (HbA1c)",with_result:null},CRTN:{desc:"Creatinine",with_result:null},CXRAY:{desc:"Chest X-Ray",with_result:null},SPTM:{desc:"Sputum Microscopy",with_result:null},ECG:{desc:"Electrocardiogram (ECG)",with_result:null},URN:{desc:"Urinalysis",with_result:null},PSMR:{desc:"Pap smear",with_result:null},FCAL:{desc:"Fecalysis",with_result:null},FOBT:{desc:"Fecal Occult Blood Test",with_result:null}},this.lab_list_arr=[]}ngOnInit(){this.patient_info=this.http.getPatientInfo(),this.patient_philhealth=this.http.getPhilhealhtInfo(),this.facility=this.http.getUserFromJSON(),this.getResults()}static{this.\u0275fac=function(s){return new(s||n)(t.rXU(u.k),t.rXU(nt.j),t.rXU(R.F))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-ekas"]],inputs:{lab_list:"lab_list",consult_details:"consult_details"},outputs:{toggleModal:"toggleModal"},standalone:!1,decls:14,vars:4,consts:[["id","defaultModal","tabindex","-1","aria-hidden","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","max-w-4xl","h-full","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],["type","button","printSectionId","philhealth_form","ngxPrint","",1,"bg-white","text-blue-500","hover:bg-gray-100","hover:text-blue-400","px-2","py-1","rounded-md",3,"useExistingCss"],[3,"icon"],["class","overflow-y-auto scrollbar-thin h-96 scrollbar-thumb-gray-400 scrollbar-track-gray-100",4,"ngIf"],["class","h-96 flex justify-center align-middle w-full",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"text-white","bg-orange-500","hover:ring-2","focus:outline-none","hover:ring-orange-300","rounded","text-sm","font-medium","px-6","py-2.5","transition","duration-150","ease-in-out","transform","hover:scale-110",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"overflow-y-auto","scrollbar-thin","h-96","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"w-[210mm]","h-[297mm]","flex","justify-center","align-middle","bg-white"],["id","philhealth_form",1,"w-[195mm]","h-[272mm]","mt-[12.5mm]"],[1,"border-2","border-gray-400"],[1,"flex","justify-center","h-16","p-1"],["src","./assets/img/philhealth_logo_with_name.png",1,"h-16"],[1,"font-semibold","mt-4","ml-5","text-xl"],[1,"m-1","font-semibold","mt-3"],[1,"table-auto","border","border-gray-400","p-1","w-full"],["colspan","6",1,"text-xs","border","border-gray-400"],[1,"font-semibold"],["colspan","2",1,"text-xs","border","border-gray-400"],[1,"font-semibold","text-xs"],[1,"font-semibold","text-sm"],["colspan","3",1,"text-xs","border","border-gray-400"],[1,"flex","justify-end"],["type","checkbox","disabled","",1,"input-checkbox","disabled:bg-gray-400","checked:bg-gray-400",3,"checked"],[1,"ml-3"],[1,"table-auto","border","border-gray-400","border-collapse","w-full"],[1,"w-6/12","border","border-slate-700","text-[.8em]"],[1,"w-1/12","border","border-slate-700","text-[.8em]"],[1,"w-3/12","border","border-slate-700","text-[.8em]"],[1,"w-2/12","border","border-slate-700","text-[.8em]"],[4,"ngFor","ngForOf"],[1,"text-[.6em]","border-b-2","border-dashed","border-gray-400","w-full","p-2"],[1,"flex","p-2","border-b-2","border-dotted","border-gray-400","w-full"],[1,"w-7/12","text-[.65em]"],[1,"text-[.65em]","mt-3","ml-5"],[1,"text-[.65em]","ml-5","flex","text-center"],["type","checkbox",1,"input-checkbox","mt-3"],[1,"ml-2"],[1,"text-xl",3,"icon"],[1,"flex","p-2","border-b-2","border-gray-400","w-full"],[1,"flex","p-1","w-full"],[1,"text-[.65em]","mt-3","ml-5","align-bottom","justify-end","flex","mt-5"],[1,"underline"],[1,"border","border-slate-700","[.8em]"],[1,"border","border-slate-700","text-center","[.8em]"],[1,"border","border-slate-700","[.8em]","text-center"],[1,"h-96","flex","justify-center","align-middle","w-full"],["animation","spin","size","2xl",1,"mt-20","text-blue-500",3,"icon"]],template:function(s,i){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.EFF(5," electronic Konsulta Availment Slip (eKAS) "),t.k0s(),t.j41(6,"button",5),t.nrm(7,"fa-icon",6),t.k0s()(),t.DNE(8,st,146,21,"div",7)(9,ot,2,1,"div",8),t.j41(10,"div",9)(11,"button",10),t.bIt("click",function(){return i.closeModal()}),t.EFF(12,"Close"),t.k0s()()()()(),t.nrm(13,"div",11)),2&s&&(t.R7$(6),t.Y8G("useExistingCss",!0),t.R7$(),t.Y8G("icon",i.faPrint),t.R7$(),t.Y8G("ngIf",i.show_form),t.R7$(),t.Y8G("ngIf",!i.show_form))},dependencies:[c.Sq,c.bT,p.aY,F.GV,c.vh,c.lG],styles:["@page{size:auto;size:A4;margin:7mm}"]})}}return n})();function at(n,a){if(1&n){const e=t.RV6();t.j41(0,"tr",16)(1,"td",17)(2,"fa-icon",18),t.bIt("click",function(){const i=t.eBV(e).$implicit,o=t.XpG();return t.Njj(o.toggleModal("delete",i))}),t.k0s(),t.EFF(3),t.k0s(),t.j41(4,"th",19),t.EFF(5),t.k0s(),t.j41(6,"td",17)(7,"fa-icon",20),t.bIt("click",function(){const i=t.eBV(e).$implicit,o=t.XpG();return t.Njj(o.toggleModal("add",i))}),t.k0s()()()}if(2&n){const e=a.$implicit,s=t.XpG();t.R7$(2),t.Y8G("icon",s.faXmark),t.R7$(),t.SpI(" ",e.type," "),t.R7$(2),t.SpI(" ",e.date_requested," "),t.R7$(2),t.Y8G("icon",s.faEdit)}}function lt(n,a){if(1&n){const e=t.RV6();t.j41(0,"app-ekas",21),t.bIt("toggleModal",function(i){t.eBV(e);const o=t.XpG();return t.Njj(o.toggleModal(i))}),t.k0s()}}function rt(n,a){if(1&n){const e=t.RV6();t.j41(0,"app-epres",21),t.bIt("toggleModal",function(i){t.eBV(e);const o=t.XpG();return t.Njj(o.toggleModal(i))}),t.k0s()}}let dt=(()=>{class n{toggleModal(e){console.log(e),this.modal[e]=!this.modal[e]}loadDetails(){}constructor(e){this.http=e,this.faPrint=d.JxU,this.pending_list=[],this.modal=[]}ngOnInit(){this.active_loc_id=this.http.getUrlParams,this.patient_id=this.active_loc_id.patient_id,this.consult_id=this.active_loc_id.consult_id,this.loadDetails()}static{this.\u0275fac=function(s){return new(s||n)(t.rXU(u.k))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-konsulta"]],inputs:{consult_details:"consult_details"},standalone:!1,decls:28,vars:3,consts:[[1,"mb-16","w-full"],[1,"block","shadow","p-4","mt-4","rounded-xl","text-gray-600"],[1,"text-sky-500","font-bold","flex","justify-between","py-2"],[1,"flex"],[1,"mt-2"],[1,"text-gray-500","text-sm"],["type","button",1,"px-3","py-2","rounded-md","bg-blue-500","text-sm","text-white","ml-auto","mr-3",3,"click"],["type","button",1,"px-3","py-2","rounded-md","bg-blue-500","text-sm","text-white","ml-auto",3,"click"],[1,"border","border-slate-200","shadow-md","rounded-xl"],[1,"w-full","bg-green-500","text-white","rounded-t-xl","p-3","font-semibold"],[1,"w-full","p-5"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6"],["class","bg-white border-b last:border-0",4,"ngFor","ngForOf"],[3,"toggleModal",4,"ngIf"],[1,"bg-white","border-b","last:border-0"],[1,"w-1/3","py-4","px-6"],["size","lg",1,"mx-0","my-0","text-rose-400","hover:cursor-pointer","flex-none","mr-2",3,"click","icon"],["scope","row",1,"w-1/3","py-4","px-6","font-medium","text-gray-900","whitespace-nowrap"],["size","lg",1,"mx-0","my-0","text-blue-500","hover:cursor-pointer","flex-none","mr-2",3,"click","icon"],[3,"toggleModal"]],template:function(s,i){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"span",2)(3,"span",3)(4,"span",4),t.nrm(5,"span",5),t.k0s()(),t.j41(6,"div")(7,"button",6),t.bIt("click",function(){return i.toggleModal("epres")}),t.EFF(8," ePresS "),t.k0s(),t.j41(9,"button",7),t.bIt("click",function(){return i.toggleModal("ekas")}),t.EFF(10," eKas "),t.k0s()()(),t.j41(11,"div",8)(12,"div",9),t.EFF(13," Konsulta visits "),t.k0s(),t.j41(14,"div",10)(15,"table",11)(16,"thead",12)(17,"tr")(18,"th",13),t.EFF(19,"Lab type"),t.k0s(),t.j41(20,"th",13),t.EFF(21,"Date requested"),t.k0s(),t.j41(22,"th",13),t.EFF(23,"Action"),t.k0s()()(),t.j41(24,"tbody"),t.DNE(25,at,8,4,"tr",14),t.k0s()()()()()(),t.DNE(26,lt,1,0,"app-ekas",15)(27,rt,1,0,"app-epres",15)),2&s&&(t.R7$(25),t.Y8G("ngForOf",i.pending_list),t.R7$(),t.Y8G("ngIf",i.modal.ekas),t.R7$(),t.Y8G("ngIf",i.modal.epres))},dependencies:[c.Sq,c.bT,p.aY,I,$],encapsulation:2})}}return n})();var ct=_(9206),l=_(9417),T=_(9217);let M=(()=>{class n{onSubmit(){let e;this.is_saving=!0,e=this.consult_date&&this.pt_group?{patient_id:this.patient_id,consult_date:this.consult_date,pt_group:this.pt_group,consult_done:!1}:{},this.http.update("consultation/records/",this.consult_id,e).subscribe({next:s=>{console.log(s),this.is_saving=!1,this.toastr.info("Visit was reopened"),this.closeModal()},error:s=>console.log(s)})}constructor(e,s,i){this.http=e,this.router=s,this.toastr=i,this.toggleModal=new t.bkB,this.is_saving=!1}closeModal(){this.toggleModal.emit("end_visit")}static{this.\u0275fac=function(s){return new(s||n)(t.rXU(u.k),t.rXU(b.Ix),t.rXU(f.tw))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-open-consult"]],inputs:{consult_id:"consult_id",consult_date:"consult_date",patient_id:"patient_id",pt_group:"pt_group"},outputs:{toggleModal:"toggleModal"},decls:20,vars:5,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"h-40"],[1,"flex","item-start","flex-wrap","pb-5"],[1,"grid","grid-cols-3","px-3","py-3","mt-10","mx-10","w-full","rounded-lg","text-center"],[1,"col-span-3","text-left","mb-2","pb-2","border-b","border-slate-200","font-semibold","text-lg"],[1,"col-span-3","text-left","mb-2","pb-2","text-sm"],[1,"flex","justify-end","py-2","px-5","space-x-4","rounded-b"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-300","rounded","text-sm","font-medium","my-2","px-6","py-2.5","transition","duration-150","ease-in-out",3,"click"],["type","button",1,"text-white","bg-green-500","enabled:hover:ring-2","enabled:focus:outline-none","enabled:hover:ring-rose-300","disabled:opacity-75","font-medium","rounded","text-sm","my-2","px-6","py-2.5","text-center","transition","duration-150","ease-in-out",3,"click","disabled"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"]],template:function(s,i){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.EFF(5," End Visit "),t.k0s()(),t.j41(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),t.EFF(10," Do you really want to open this visit? "),t.k0s(),t.j41(11,"div",9),t.EFF(12),t.nI1(13,"date"),t.k0s()()()(),t.j41(14,"div",10)(15,"button",11),t.bIt("click",function(){return i.closeModal()}),t.EFF(16,"Cancel"),t.k0s(),t.j41(17,"button",12),t.bIt("click",function(){return i.onSubmit()}),t.EFF(18,"Open Visit"),t.k0s()()()()(),t.nrm(19,"div",13)),2&s&&(t.R7$(12),t.SpI(" Visit date & time: ",t.i5U(13,2,i.consult_date,"MM/dd/yyyy hh:mm:ss a")," "),t.R7$(5),t.Y8G("disabled",i.is_saving))},dependencies:[c.MD,c.vh],encapsulation:2})}}return n})();var Y=_(943),D=_(8793),C=_(7673),N=_(3294),S=_(152),X=_(5558),P=_(9437),V=_(6354),B=_(1413),k=_(8761);const _t=n=>({"rounded-b":n});function pt(n,a){if(1&n&&t.nrm(0,"fa-icon",21),2&n){const e=t.XpG(3);t.Y8G("icon",e.faSpinner)}}function ut(n,a){if(1&n&&t.nrm(0,"fa-icon",22),2&n){const e=t.XpG(3);t.Y8G("icon",e.faSave)}}function mt(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",18),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onSubmit())}),t.DNE(1,pt,1,1,"fa-icon",19)(2,ut,1,1,"fa-icon",20),t.EFF(3),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("disabled",e.is_saving),t.R7$(),t.Y8G("ngIf",e.is_saving),t.R7$(),t.Y8G("ngIf",!e.is_saving),t.R7$(),t.SpI(" ",e.is_saving?"Saving":"Save"," ")}}function gt(n,a){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"div",9)(2,"button",10),t.nrm(3,"fa-icon",11),t.k0s(),t.j41(4,"div",12)(5,"ng-select",13),t.nI1(6,"async"),t.mxI("ngModelChange",function(i){t.eBV(e);const o=t.XpG();return t.DH7(o.selectedIdx,i)||(o.selectedIdx=i),t.Njj(i)}),t.k0s()()(),t.j41(7,"div",14)(8,"textarea",15),t.mxI("ngModelChange",function(i){t.eBV(e);const o=t.XpG();return t.DH7(o.idx_remarks,i)||(o.idx_remarks=i),t.Njj(i)}),t.k0s()(),t.j41(9,"div",16),t.DNE(10,mt,4,4,"button",17),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(3),t.Y8G("icon",e.faPlusSquare),t.R7$(2),t.Y8G("items",t.bMT(6,10,e.idx$))("multiple",!0)("loading",e.idxLoading)("typeahead",e.searchInput$),t.R50("ngModel",e.selectedIdx),t.Y8G("disabled",e.consult_done||!e.allowed_to_edit),t.R7$(3),t.Y8G("disabled",e.consult_done||!e.allowed_to_edit),t.R50("ngModel",e.idx_remarks),t.R7$(2),t.Y8G("ngIf",!e.consult_done&&e.allowed_to_edit)}}let ht=(()=>{class n{onSubmit(){this.is_saving=!0,this.selectedIdx&&Object.keys(this.selectedIdx).length>0?this.http.post("consultation/initial-diagnosis",{notes_id:this.consult_details.consult_notes.id,initial_diagnosis:this.selectedIdx}).subscribe({next:s=>{this.saveNotes()},error:s=>console.log(s)}):this.saveNotes()}saveNotes(){this.idx_remarks?this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,idx_remarks:this.idx_remarks}).subscribe({next:s=>{this.showToastr(),this.is_saving=!1},error:s=>console.log(s)}):(this.showToastr(),this.is_saving=!1)}showToastr(){this.toastr.success("Successfully updated!","Initial Diagnosis")}loadIdx(e){this.idx$=(0,D.x)((0,C.of)(e),this.searchInput$.pipe((0,w.p)(s=>null!==s&&s.length>=this.minLengthTerm),(0,N.F)(),(0,S.B)(400),(0,y.M)(()=>this.idxLoading=!0),(0,X.n)(s=>this.getIdx(s).pipe((0,P.W)(()=>(0,C.of)([])),(0,y.M)(()=>this.idxLoading=!1)))))}getIdx(e=null){return this.http.get("libraries/diagnosis",{params:{"filter[search]":e}}).pipe((0,V.T)(s=>s.data))}loadSelected(){let e=[],s=[];this.initial_dx&&Object.keys(this.initial_dx).length>0?(Object.entries(this.initial_dx).forEach(([i,o],r)=>{let m=o;e.push(m.class_id.toString()),s.push(m.diagnosis)}),this.loadIdx(s),this.selectedIdx=e):this.loadIdx([])}ngOnChanges(e){this.show_content=this.toggle_content,this.consult_details&&(this.initial_dx=this.consult_details.consult_notes.initialdx,this.idx_remarks=this.consult_details.consult_notes.idx_remarks,this.consult_done=this.consult_details.consult_done,this.loadSelected())}constructor(e,s){this.http=e,this.toastr=s,this.faPlusSquare=d.CHJ,this.faSave=d.hSh,this.faChevronCircleUp=d.AeV,this.faChevronCircleDown=d.DqM,this.faSpinner=d.z1G,this.toastr_message=null,this.toastr_type=null,this.idxLoading=!1,this.show_content=!0,this.is_saving=!1,this.consult_done=!1,this.searchInput$=new B.B,this.minLengthTerm=3}static{this.\u0275fac=function(s){return new(s||n)(t.rXU(u.k),t.rXU(f.tw))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-initial-dx"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",allowed_to_edit:"allowed_to_edit"},standalone:!1,features:[t.OA$],decls:11,vars:5,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[1,"flex","mb-2","p-4"],["type","submit",1,"inline-flex","p-1","items-center","text-gray-50","bg-sky-400","rounded-l-md","border","border-gray-300"],[1,"text-white","fa-xl",3,"icon"],[1,"chips-container"],["placeholder","search","typeToSearchText","search...","bindValue","class_id","bindLabel","class_name","notFoundText","No records found",1,"select-chips",3,"ngModelChange","items","multiple","loading","typeahead","ngModel","disabled"],[1,"flex","px-4","pb-4"],["rows","3","id","idx_remarks","placeholder","Initial Diagnosis remarks",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"ngModelChange","disabled","ngModel"],[1,"flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"click","disabled"],["class","mr-2","animation","spin",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(s,i){1&s&&(t.nrm(0,"hr",0),t.j41(1,"div",1)(2,"div",2),t.EFF(3," Diagnosis "),t.k0s(),t.j41(4,"div",3)(5,"div",4)(6,"span",5),t.EFF(7," Initial Diagnosis "),t.j41(8,"button",6),t.bIt("click",function(){return i.show_content=!i.show_content}),t.nrm(9,"fa-icon",7),t.k0s()(),t.DNE(10,gt,11,12,"div",8),t.k0s()()()),2&s&&(t.R7$(6),t.Y8G("ngClass",t.eq3(3,_t,!i.show_content)),t.R7$(3),t.Y8G("icon",i.show_content?i.faChevronCircleUp:i.faChevronCircleDown),t.R7$(),t.Y8G("ngIf",i.show_content))},dependencies:[c.YU,c.bT,p.aY,k.vr,l.me,l.BC,l.vS,c.Jj],encapsulation:2})}}return n})();const ft=n=>({"rounded-b":n});function bt(n,a){if(1&n&&(t.j41(0,"div",19)(1,"h5",20)(2,"strong"),t.EFF(3),t.k0s(),t.EFF(4),t.k0s()()),2&n){const e=a.item;t.R7$(3),t.SpI("",e.icd10_code,":"),t.R7$(),t.SpI(" ",e.icd10_desc,"")}}function vt(n,a){if(1&n&&(t.j41(0,"div",19)(1,"h5",21)(2,"strong"),t.EFF(3),t.k0s(),t.EFF(4),t.k0s()()),2&n){const e=a.item,s=a.searchTerm;t.R7$(),t.Y8G("ngOptionHighlight",s),t.R7$(2),t.SpI("",e.icd10_code,":"),t.R7$(),t.SpI(" ",e.icd10_desc,"")}}function xt(n,a){if(1&n&&t.nrm(0,"fa-icon",25),2&n){const e=t.XpG(3);t.Y8G("icon",e.faSpinner)}}function kt(n,a){if(1&n&&t.nrm(0,"fa-icon",26),2&n){const e=t.XpG(3);t.Y8G("icon",e.faSave)}}function yt(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",22),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onSubmit())}),t.DNE(1,xt,1,1,"fa-icon",23)(2,kt,1,1,"fa-icon",24),t.EFF(3),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("disabled",e.is_saving),t.R7$(),t.Y8G("ngIf",e.is_saving),t.R7$(),t.Y8G("ngIf",!e.is_saving),t.R7$(),t.SpI(" ",e.is_saving?"Saving":"Save"," ")}}function Ft(n,a){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"div",8)(2,"button",9),t.nrm(3,"fa-icon",10),t.k0s(),t.j41(4,"div",11)(5,"ng-select",12),t.nI1(6,"async"),t.mxI("ngModelChange",function(i){t.eBV(e);const o=t.XpG();return t.DH7(o.selectedFdx,i)||(o.selectedFdx=i),t.Njj(i)}),t.DNE(7,bt,5,2,"ng-template",13)(8,vt,5,3,"ng-template",14),t.k0s()()(),t.j41(9,"div",15)(10,"textarea",16),t.mxI("ngModelChange",function(i){t.eBV(e);const o=t.XpG();return t.DH7(o.fdx_remarks,i)||(o.fdx_remarks=i),t.Njj(i)}),t.k0s()(),t.j41(11,"div",17),t.DNE(12,yt,4,4,"button",18),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(3),t.Y8G("icon",e.faPlusSquare),t.R7$(2),t.Y8G("items",t.bMT(6,10,e.fdx$))("multiple",!0)("loading",e.fdxLoading)("typeahead",e.searchInput$),t.R50("ngModel",e.selectedFdx),t.Y8G("disabled",e.consult_done||!e.allowed_to_edit),t.R7$(5),t.Y8G("disabled",e.consult_done||!e.allowed_to_edit),t.R50("ngModel",e.fdx_remarks),t.R7$(2),t.Y8G("ngIf",!e.consult_done&&e.allowed_to_edit)}}let Ct=(()=>{class n{onSubmit(){this.is_saving=!0,this.selectedFdx&&Object.keys(this.selectedFdx).length>0?this.http.post("consultation/final-diagnosis",{notes_id:this.consult_details.consult_notes.id,final_diagnosis:this.selectedFdx}).subscribe({next:s=>{this.saveNotes()},error:s=>console.log(s)}):this.saveNotes()}saveNotes(){this.fdx_remarks?this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,fdx_remarks:this.fdx_remarks}).subscribe({next:s=>{this.showToastr()},error:s=>console.log(s)}):this.showToastr()}showToastr(){this.is_saving=!1,this.toastr.success("Successfully updated!","Final Diagnosis")}loadFdx(e){this.fdx$=(0,D.x)((0,C.of)(e),this.searchInput$.pipe((0,w.p)(s=>null!==s&&s.length>=this.minLengthTerm),(0,N.F)(),(0,S.B)(800),(0,y.M)(()=>this.fdxLoading=!0),(0,X.n)(s=>this.getFdx(s).pipe((0,P.W)(()=>(0,C.of)([])),(0,y.M)(()=>this.fdxLoading=!1)))))}getFdx(e=null){return this.http.get("libraries/icd10",{params:{"filter[search]":e}}).pipe((0,V.T)(s=>s.data))}loadSelected(){let e=[],s=[];this.final_dx&&Object.keys(this.final_dx).length>0?(Object.entries(this.final_dx).forEach(([i,o],r)=>{let m=o;e.push(m.icd10_code.toString()),s.push(m.lib_icd10)}),this.loadFdx(s),this.selectedFdx=e):this.loadFdx([])}ngOnChanges(e){this.show_content=this.toggle_content,this.consult_details&&(this.final_dx=this.consult_details.consult_notes.finaldx,this.fdx_remarks=this.consult_details.consult_notes.fdx_remarks,this.consult_done=this.consult_details.consult_done,this.loadSelected())}constructor(e,s){this.http=e,this.toastr=s,this.faPlusSquare=v.CHJ,this.faChevronCircleUp=d.AeV,this.faChevronCircleDown=d.DqM,this.faSave=d.hSh,this.faSpinner=d.z1G,this.fdxLoading=!1,this.show_content=!0,this.is_saving=!1,this.consult_done=!1,this.searchInput$=new B.B,this.minLengthTerm=3}static{this.\u0275fac=function(s){return new(s||n)(t.rXU(u.k),t.rXU(f.tw))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-final-dx"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",allowed_to_edit:"allowed_to_edit"},standalone:!1,features:[t.OA$],decls:9,vars:5,consts:[[1,"grid","grid-cols-10","mt-4"],[1,"col-span-2","pt-2"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[1,"flex","mb-2","p-4"],["type","submit",1,"inline-flex","p-1","items-center","text-gray-50","bg-sky-400","rounded-l-md","border","border-gray-300"],[1,"text-white","fa-xl",3,"icon"],[1,"chips-container"],["placeholder","search","typeToSearchText","search...","bindValue","icd10_code","bindLabel","icd10_desc","notFoundText","No records found",1,"select-chips",3,"ngModelChange","items","multiple","loading","typeahead","ngModel","disabled"],["ng-label-tmp",""],["ng-option-tmp",""],[1,"flex","px-4","pb-4"],["rows","3","id","fdx_remarks","placeholder","Final Diagnosis remarks",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"ngModelChange","disabled","ngModel"],[1,"flex","justify-between"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[1,"whitespace-normal"],[1,"text-gray-700"],[1,"text-gray-700",3,"ngOptionHighlight"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"click","disabled"],["class","mr-2","animation","spin",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(s,i){1&s&&(t.j41(0,"div",0),t.nrm(1,"div",1),t.j41(2,"div",2)(3,"div",3)(4,"span",4),t.EFF(5," Final Diagnosis "),t.j41(6,"button",5),t.bIt("click",function(){return i.show_content=!i.show_content}),t.nrm(7,"fa-icon",6),t.k0s()(),t.DNE(8,Ft,13,12,"div",7),t.k0s()()()),2&s&&(t.R7$(4),t.Y8G("ngClass",t.eq3(3,ft,!i.show_content)),t.R7$(3),t.Y8G("icon",i.show_content?i.faChevronCircleUp:i.faChevronCircleDown),t.R7$(),t.Y8G("ngIf",i.show_content))},dependencies:[c.YU,c.bT,p.aY,k.vr,k.Uq,k.ZZ,l.me,l.BC,l.vS,c.Jj],encapsulation:2})}}return n})();const jt=n=>({"rounded-b":n}),wt=n=>({"text-blue-500":n});function Rt(n,a){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"titlecase"),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.JRh(t.bMT(2,1,e.key))}}function Gt(n,a){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"uppercase"),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.JRh(t.bMT(2,1,e.key))}}function Et(n,a){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"input",25),t.mxI("ngModelChange",function(i){const o=t.eBV(e).$implicit,r=t.XpG(4);return t.DH7(r.physical_codes[o.pe_id],i)||(r.physical_codes[o.pe_id]=i),t.Njj(i)}),t.bIt("change",function(){t.eBV(e);const i=t.XpG(4);return t.Njj(i.checkIsNormal())}),t.k0s(),t.j41(2,"label",26),t.EFF(3),t.k0s()()}if(2&n){const e=a.$implicit,s=t.XpG(4);t.R7$(),t.Y8G("disabled",s.consult_done||!s.allowed_to_edit),t.R50("ngModel",s.physical_codes[e.pe_id]),t.BMQ("id",e.pe_id),t.R7$(),t.Y8G("ngClass",t.eq3(6,wt,1===e.konsulta_library_status)),t.BMQ("for",e.pe_id),t.R7$(),t.JRh(e.pe_desc)}}function It(n,a){if(1&n&&(t.j41(0,"div",23),t.DNE(1,Et,4,8,"div",24),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.Y8G("ngForOf",e.value)}}function $t(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",27)(1,"span",28),t.EFF(2,"Remarks: "),t.k0s(),t.j41(3,"input",29),t.mxI("ngModelChange",function(i){t.eBV(e);const o=t.XpG().$implicit,r=t.XpG(2);return t.DH7(r.physical_remarks[o.key+"_remarks"],i)||(r.physical_remarks[o.key+"_remarks"]=i),t.Njj(i)}),t.k0s()()}if(2&n){const e=t.XpG().$implicit,s=t.XpG(2);t.R7$(3),t.Y8G("disabled",s.consult_done||!s.allowed_to_edit),t.R50("ngModel",s.physical_remarks[e.key+"_remarks"])}}function Tt(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",18)(1,"div",19)(2,"button",6),t.bIt("click",function(){const i=t.eBV(e).$implicit,o=t.XpG(2);return t.Njj(o.toggleItems(i.key))}),t.nrm(3,"fa-icon",20),t.DNE(4,Rt,3,3,"span",8)(5,Gt,3,3,"span",8),t.k0s()(),t.DNE(6,It,2,1,"div",21)(7,$t,4,2,"div",22),t.k0s()}if(2&n){const e=a.$implicit,s=t.XpG(2);t.R7$(3),t.Y8G("icon",s.pe_item[e.key]?s.faChevronUp:s.faChevronDown),t.R7$(),t.Y8G("ngIf","heent"!==e.key),t.R7$(),t.Y8G("ngIf","heent"===e.key),t.R7$(),t.Y8G("ngIf",void 0!==s.pe_item[e.key]&&s.pe_item[e.key]),t.R7$(),t.Y8G("ngIf",void 0!==s.pe_item[e.key]&&s.pe_item[e.key])}}function Mt(n,a){if(1&n&&t.nrm(0,"fa-icon",33),2&n){const e=t.XpG(3);t.Y8G("icon",e.faSpinner)}}function Yt(n,a){if(1&n&&t.nrm(0,"fa-icon",34),2&n){const e=t.XpG(3);t.Y8G("icon",e.faSave)}}function Dt(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",30),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onSubmit())}),t.DNE(1,Mt,1,1,"fa-icon",31)(2,Yt,1,1,"fa-icon",32),t.EFF(3),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("disabled",e.is_saving),t.R7$(),t.Y8G("ngIf",e.is_saving),t.R7$(),t.Y8G("ngIf",!e.is_saving),t.R7$(),t.SpI(" ",e.is_saving?"Saving":"Save"," ")}}function Nt(n,a){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"div",9)(2,"div",10)(3,"input",11),t.mxI("ngModelChange",function(i){t.eBV(e);const o=t.XpG();return t.DH7(o.is_normal,i)||(o.is_normal=i),t.Njj(i)}),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleNormal())}),t.k0s(),t.j41(4,"label",12),t.EFF(5,"Essentially Normal"),t.k0s()(),t.DNE(6,Tt,8,5,"div",13),t.nI1(7,"keyvalue"),t.j41(8,"div")(9,"label",14),t.EFF(10,"PE Remarks"),t.k0s(),t.j41(11,"input",15),t.mxI("ngModelChange",function(i){t.eBV(e);const o=t.XpG();return t.DH7(o.physical_remarks.remarks,i)||(o.physical_remarks.remarks=i),t.Njj(i)}),t.k0s()()(),t.j41(12,"div",16),t.DNE(13,Dt,4,4,"button",17),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(3),t.R50("ngModel",e.is_normal),t.R7$(3),t.Y8G("ngForOf",t.bMT(7,4,e.pe_grouped)),t.R7$(5),t.R50("ngModel",e.physical_remarks.remarks),t.R7$(2),t.Y8G("ngIf",!e.consult_done&&e.allowed_to_edit)}}let St=(()=>{class n{toggleItems(e){this.pe_item[e]=!this.pe_item[e]}toggleNormal(){this.is_normal=!this.is_normal,this.physical_codes=[],this.physical_codes={ABDOMEN12:this.is_normal,CHEST06:this.is_normal,GENITOURINARY01:this.is_normal,HEART05:this.is_normal,HEENT11:this.is_normal,NEURO06:this.is_normal,RECTAL01:this.is_normal,SKIN15:this.is_normal}}onSubmit(){if(this.is_saving=!0,Object.keys(this.physical_codes).length>0){let e=[];Object.entries(this.physical_codes).forEach(([s,i],o)=>{!0===i&&e.push(s)}),this.saveCodes(e)}else this.saveNotes()}saveCodes(e){this.http.post("consultation/physical-exam",{notes_id:this.consult_notes.id,physical_exam:e}).subscribe({next:i=>{this.saveNotes()},error:i=>console.log(i)})}saveNotes(){let e;this.physical_remarks.notes_id=this.consult_notes.id,this.physical_remarks.patient_id=this.consult_details.patient.id,e=null===this.physical_remarks.id?this.http.post("consultation/physical-exam-remarks",this.physical_remarks):this.http.update("consultation/physical-exam-remarks/",this.physical_remarks.id,this.physical_remarks),e.subscribe({next:s=>{this.is_saving=!1,this.showToastr()},error:s=>console.log(s)})}showToastr(){this.toastr.success("Successfully updated!","Physical exam")}loadLibraries(){this.http.get("libraries/pe").subscribe(e=>{const i=e.data.reduce((o,r)=>{let m=!0;if(("BARTHOLINS"===r.category_id||"SPECULUM"===r.category_id)&&"M"===this.consult_details.patient.gender&&(m=!1),m){const j=o[r.category_id.toLowerCase()]||[];j.push(r),o[r.category_id.toLowerCase()]=j}return o},{});this.pe_grouped=i})}loadSelected(){Object.keys(this.consult_notes.physical_exam).length>0&&(Object.entries(this.consult_notes.physical_exam).forEach(([e,s],i)=>{this.physical_codes[s.pe_id]=!0}),this.checkIsNormal())}checkIsNormal(){this.is_normal=!!(this.physical_codes.ABDOMEN12&&this.physical_codes.CHEST06&&this.physical_codes.GENITOURINARY01&&this.physical_codes.HEART05&&this.physical_codes.HEENT11&&this.physical_codes.NEURO06&&this.physical_codes.RECTAL01&&this.physical_codes.SKIN15)}ngOnChanges(e){this.show_content=this.toggle_content,this.consult_details&&(this.consult_notes=this.consult_details.consult_notes,this.consult_done=this.consult_details.consult_done,this.loadSelected(),this.consult_notes.physical_exam_remarks&&(this.physical_remarks=this.consult_notes.physical_exam_remarks))}constructor(e,s){this.http=e,this.toastr=s,this.faSave=d.hSh,this.faChevronCircleUp=d.AeV,this.faChevronCircleDown=d.DqM,this.faSpinner=d.z1G,this.faChevronDown=d.Jt$,this.faChevronUp=d.w2A,this.pe_grouped={},this.physical_codes=[],this.pe_item=[],this.physical_remarks={id:null,abdomen_remarks:null,breast_remarks:null,chest_remarks:null,extremities_remarks:null,genitourinary_remarks:null,heart_remarks:null,heent_remarks:null,neuro_remarks:null,pelvic_remarks:null,rectal_remarks:null,skin_remarks:null,remarks:null},this.show_content=!1,this.consult_done=!1,this.is_saving=!1,this.is_normal=!1}ngOnInit(){this.loadLibraries()}static{this.\u0275fac=function(s){return new(s||n)(t.rXU(u.k),t.rXU(f.tw))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-physical-exam"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",allowed_to_edit:"allowed_to_edit"},standalone:!1,features:[t.OA$],decls:11,vars:5,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[1,"w-full","p-5"],[1,"mb-2"],["id","is_normal","type","checkbox",1,"input-checkbox",3,"ngModelChange","click","ngModel"],["for","is_normal",1,"pl-1","font-semibold"],["class","grid grid-cols-1 gap-3 mb-3 border-b border-slate-200 pb-3 last:border-b-0",4,"ngFor","ngForOf"],["for",""],["type","text",1,"input",3,"ngModelChange","ngModel"],[1,"flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[1,"grid","grid-cols-1","gap-3","mb-3","border-b","border-slate-200","pb-3","last:border-b-0"],[1,"col-span-1","font-bold"],["size","md",1,"pr-2",3,"icon"],["class","col-span-1 grid grid-cols-2 gap-y-2",4,"ngIf"],["class","flex col-span-1",4,"ngIf"],[1,"col-span-1","grid","grid-cols-2","gap-y-2"],[4,"ngFor","ngForOf"],["type","checkbox",1,"rounded-md","border","border-gray-400","p-2",3,"ngModelChange","change","disabled","ngModel"],[1,"pl-2",3,"ngClass"],[1,"flex","col-span-1"],[1,"font-semibold","mt-3","mr-2","text-sm"],["rows","2","type","textarea","placeholder","remarks",1,"input","placeholder-slate-400","placeholder:italic",3,"ngModelChange","disabled","ngModel"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"click","disabled"],["class","mr-2","animation","spin",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(s,i){1&s&&(t.nrm(0,"hr",0),t.j41(1,"div",1)(2,"div",2),t.EFF(3," Physical Exam "),t.k0s(),t.j41(4,"div",3)(5,"div",4)(6,"span",5),t.EFF(7," Observations "),t.j41(8,"button",6),t.bIt("click",function(){return i.show_content=!i.show_content}),t.nrm(9,"fa-icon",7),t.k0s()(),t.DNE(10,Nt,14,6,"div",8),t.k0s()()()),2&s&&(t.R7$(6),t.Y8G("ngClass",t.eq3(3,jt,!i.show_content)),t.R7$(3),t.Y8G("icon",i.show_content?i.faChevronCircleUp:i.faChevronCircleDown),t.R7$(),t.Y8G("ngIf",i.show_content))},dependencies:[c.YU,c.Sq,c.bT,p.aY,l.me,l.Zm,l.BC,l.vS,c.Pc,c.PV,c.lG],encapsulation:2})}}return n})();var q=_(3825),Xt=_(41);function Pt(n,a){if(1&n&&(t.j41(0,"span",35),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.medicine.drug_name)}}function Vt(n,a){if(1&n&&(t.j41(0,"span",35),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.konsulta_medicine.desc)}}function Bt(n,a){if(1&n&&(t.j41(0,"span",35),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.E5c("",e.added_medicine," ",e.dosage_quantity," ",e.unit_of_measurement.code,"")}}function qt(n,a){if(1&n&&(t.j41(0,"span",33)(1,"div",31),t.DNE(2,Pt,2,1,"span",34)(3,Vt,2,1,"span",34)(4,Bt,2,3,"span",34),t.j41(5,"span"),t.EFF(6),t.k0s(),t.j41(7,"span"),t.EFF(8),t.k0s(),t.j41(9,"span",35),t.EFF(10,"Remarks:"),t.k0s(),t.j41(11,"span"),t.EFF(12),t.k0s(),t.nrm(13,"br"),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.Y8G("ngIf",e.medicine),t.R7$(),t.Y8G("ngIf",e.konsulta_medicine),t.R7$(),t.Y8G("ngIf",!e.konsulta_medicine&&!e.medicine),t.R7$(2),t.SjE("",e.dosage_quantity," ",e.unit_of_measurement.desc," ",e.regimen.desc," - ",e.duration_intake," ",e.frequency.desc+(e.duration_intake>1?"s":""),""),t.R7$(2),t.Lme("",e.quantity," ",e.preparation.desc+(e.quantity>1?"s":""),""),t.R7$(4),t.JRh(e.remarks)}}function At(n,a){if(1&n&&(t.j41(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"div"),t.EFF(5," REPUBLIC OF THE PHILIPPINES "),t.nrm(6,"br"),t.EFF(7),t.nrm(8,"br"),t.j41(9,"span",16),t.EFF(10),t.k0s()(),t.j41(11,"div",17)(12,"span",16),t.EFF(13),t.k0s()()(),t.j41(14,"table",18)(15,"tbody")(16,"tr")(17,"td",19)(18,"span",20),t.EFF(19,"NAME:"),t.k0s(),t.EFF(20),t.k0s(),t.j41(21,"td",21)(22,"span",20),t.EFF(23,"Age:"),t.k0s(),t.EFF(24),t.k0s(),t.j41(25,"td",21)(26,"span",20),t.EFF(27,"Gender:"),t.k0s(),t.EFF(28),t.k0s()(),t.j41(29,"tr")(30,"td",19)(31,"span",20),t.EFF(32,"Address:"),t.k0s(),t.EFF(33),t.k0s(),t.j41(34,"td",19)(35,"span",20),t.EFF(36,"Date:"),t.k0s(),t.EFF(37),t.nI1(38,"date"),t.k0s()()()(),t.j41(39,"div",22)(40,"div",23)(41,"div",24),t.nrm(42,"fa-icon",6),t.k0s(),t.nrm(43,"div"),t.k0s(),t.j41(44,"div",25)(45,"div"),t.DNE(46,qt,14,11,"span",26),t.k0s()()(),t.j41(47,"div",27)(48,"div",28)(49,"div",29),t.EFF(50," Follow-up check on: ___________________ "),t.k0s()(),t.j41(51,"div",30)(52,"div",31)(53,"div"),t.EFF(54,"Physician: "),t.j41(55,"span",32),t.EFF(56),t.k0s()(),t.j41(57,"div"),t.EFF(58,"PRC LIC No.: "),t.j41(59,"span",32),t.EFF(60),t.k0s()()()()()()()()),2&n){const e=t.XpG();t.R7$(7),t.SpI(" Province of ",e.facility_info.province.name," "),t.R7$(3),t.SpI("MUNICIPALITY OF ",e.facility_info.municipality.name,""),t.R7$(3),t.JRh(e.facility_info.facility_name),t.R7$(7),t.LHq(" ",null==e.patient_info?null:e.patient_info.first_name," ",null==e.patient_info?null:e.patient_info.middle_name," ","NA"===(null==e.patient_info?null:e.patient_info.suffix_name)?"":null==e.patient_info?null:e.patient_info.suffix_name," ",null==e.patient_info?null:e.patient_info.last_name," "),t.R7$(4),t.SpI(" ",e.patient_age," "),t.R7$(4),t.SpI(" ",null==e.patient_info?null:e.patient_info.gender," "),t.R7$(5),t.Lme(" ",null==e.patient_info?null:e.patient_info.household_folder.barangay.name,", ",null==e.patient_info?null:e.patient_info.household_folder.barangay.municipality.name," "),t.R7$(4),t.SpI(" ",t.i5U(38,19,null==e.consult_details?null:e.consult_details.consult_date,"MMM dd, yyyy")," "),t.R7$(5),t.Y8G("icon",e.faPrescription),t.R7$(4),t.Y8G("ngForOf",e.prescriptions),t.R7$(10),t.LHq(" ",e.prescriptions[0].prescriber.first_name," ","N/A"!==e.prescriptions[0].prescriber.middle_name?e.prescriptions[0].prescriber.middle_name:""," ",e.prescriptions[0].prescriber.last_name," ","NA"===e.prescriptions[0].prescriber.suffix_name?"":e.prescriptions[0].prescriber.suffix_name,""),t.R7$(4),t.JRh(e.prescriptions[0].prescriber.prc_number)}}function Ot(n,a){if(1&n&&(t.j41(0,"div",36),t.nrm(1,"fa-icon",37),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("icon",e.faCircleNotch)}}let A=(()=>{class n{getAge(){if(this.patient_info&&this.patient_info.birthdate){let e=this.ageService.calcuateAge(this.patient_info.birthdate);console.log(e),this.patient_age=e,this.patient_age=Math.round(e.age)+" "+e.type+(e.age>1?"s old":" old")}}closeModal(){this.toggleModal.emit("eprescription")}constructor(e,s){this.http=e,this.ageService=s,this.toggleModal=new t.bkB,this.faPrint=d.JxU,this.faPrescription=d.es,this.faCircleNotch=d.s4k,this.show_form=!0,this.facility_info=[],this.patient_info=[]}ngOnChanges(e){this.facility_info=this.http.getUserFromJSON().facility,this.patient_info=this.http.getPatientInfo(),this.getAge(),console.log(this.facility_info),console.log(this.patient_info),console.log(this.prescriptions,"prescription ituu"),console.log(this.consult_details)}static{this.\u0275fac=function(s){return new(s||n)(t.rXU(u.k),t.rXU(Xt.V))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-eprescription"]],inputs:{prescriptions:"prescriptions",consult_details:"consult_details"},outputs:{toggleModal:"toggleModal"},features:[t.OA$],decls:14,vars:4,consts:[["id","defaultModal","tabindex","-1","aria-hidden","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","max-w-4xl","h-full","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],["type","button","printSectionId","philhealth_form","ngxPrint","",1,"bg-white","text-blue-500","hover:bg-gray-100","hover:text-blue-400","px-2","py-1","rounded-md",3,"useExistingCss"],[3,"icon"],["class","overflow-y-auto scrollbar-thin h-96 scrollbar-thumb-gray-400 scrollbar-track-gray-100",4,"ngIf"],["class","h-96 flex justify-center align-middle w-full",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"text-white","bg-orange-500","hover:ring-2","focus:outline-none","hover:ring-orange-300","rounded","text-sm","font-medium","px-6","py-2.5","transition","duration-150","ease-in-out","transform","hover:scale-110",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"overflow-y-auto","scrollbar-thin","h-96","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"w-[210mm]","h-[297mm]","flex","justify-center","align-middle","bg-white"],["id","philhealth_form",1,"w-[195mm]","h-[272mm]","mt-[12.5mm]","flex","flex-col"],[1,"flex","flex-col","text-center","p-1","text-sm","my-3","border-b-2","border-gray-800"],[1,"uppercase"],[1,"font-semibold","ml-5","text-xl"],[1,"table-auto","p-1","w-full","mb-5","text-sm"],["colspan","2",1,""],[1,"font-semibold"],[1,""],[1,"h-auto","flex","flex-col","w-full"],[1,"flex-none","grid","grid-cols-3"],[1,"ml-4","mt-2","text-4xl"],[1,"grow","text-sm","grid","grid-cols-1","h-96","mt-10","ml-10"],["class","flex text-sm",4,"ngFor","ngForOf"],["id","footer",1,"mt-auto","grid","grid-cols-2","text-xs"],[1,"relative","text-xs"],[1,"absolute","inset-x-0","bottom-0"],[1,"flex","justify-end","text-xs"],[1,"flex","flex-col"],[1,"underline"],[1,"flex","text-sm"],["class","text-base font-semibold",4,"ngIf"],[1,"text-base","font-semibold"],[1,"h-96","flex","justify-center","align-middle","w-full"],["animation","spin","size","2xl",1,"mt-20","text-blue-500",3,"icon"]],template:function(s,i){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.EFF(5," e-Prescription "),t.k0s(),t.j41(6,"button",5),t.nrm(7,"fa-icon",6),t.k0s()(),t.DNE(8,At,61,22,"div",7)(9,Ot,2,1,"div",8),t.j41(10,"div",9)(11,"button",10),t.bIt("click",function(){return i.closeModal()}),t.EFF(12,"Close"),t.k0s()()()()(),t.nrm(13,"div",11)),2&s&&(t.R7$(6),t.Y8G("useExistingCss",!0),t.R7$(),t.Y8G("icon",i.faPrint),t.R7$(),t.Y8G("ngIf",i.show_form),t.R7$(),t.Y8G("ngIf",!i.show_form))},dependencies:[p.dX,p.aY,F.jN,F.GV,c.MD,c.Sq,c.bT,c.vh],encapsulation:2})}}return n})();const Ut=n=>({"bg-gray-50":n});function Lt(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",27)(1,"button",28),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.showLibDrugs())}),t.EFF(2," Show Library "),t.k0s()()}}function Ht(n,a){if(1&n&&(t.j41(0,"tr")(1,"td",23)(2,"div",24)(3,"div",25),t.EFF(4," No records found... "),t.k0s(),t.DNE(5,Lt,3,0,"div",26),t.k0s()()()),2&n){const e=t.XpG();t.R7$(5),t.Y8G("ngIf",!e.lib_drug_table)}}function Jt(n,a){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.nrm(2,"br"),t.EFF(3),t.nrm(4,"br"),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",e.konsulta_medicine?e.konsulta_medicine.generic.desc:""," "),t.R7$(2),t.SpI(" ",e.konsulta_medicine?e.konsulta_medicine.desc:""," ")}}function zt(n,a){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.nrm(2,"br"),t.k0s()),2&n){let e;const s=t.XpG().$implicit;t.R7$(),t.SpI("",null!==(e=s.added_medicine)&&void 0!==e?e:""," ")}}function Kt(n,a){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",e.generic_desc," ")}}function Wt(n,a){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.E5c(" ",e.dosage_quantity," ",e.unit_of_measurement.desc," (",e.unit_of_measurement.code,") ")}}function Qt(n,a){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",e.desc," ")}}function Zt(n,a){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.nrm(2,"br"),t.EFF(3),t.nrm(4,"br"),t.EFF(5),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",e.regimen.desc," "),t.R7$(2),t.Lme(" ",e.duration_intake," ",e.frequency.desc," "),t.R7$(2),t.Lme(" ",e.quantity," ",e.preparation.desc," ")}}function te(n,a){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.nrm(2,"br"),t.EFF(3),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.Lme(" ",e.unit_desc," ",e.package_desc," "),t.R7$(2),t.SpI(" ",e.form_desc," ")}}function ee(n,a){if(1&n){const e=t.RV6();t.j41(0,"tr",29),t.bIt("click",function(){const i=t.eBV(e).$implicit,o=t.XpG();return t.Njj(o.selectDrugs(i))}),t.j41(1,"th",30)(2,"span"),t.EFF(3),t.nrm(4,"br"),t.k0s(),t.DNE(5,Jt,5,2,"span",18)(6,zt,3,1,"span",18)(7,Kt,2,1,"span",18),t.k0s(),t.j41(8,"td",31),t.DNE(9,Wt,2,3,"span",18)(10,Qt,2,1,"span",18),t.k0s(),t.j41(11,"td",31),t.DNE(12,Zt,6,5,"span",18)(13,te,4,3,"span",18),t.k0s(),t.nrm(14,"td",31),t.k0s()}if(2&n){const e=a.$implicit;t.Y8G("ngClass",t.eq3(9,Ut,a.odd)),t.R7$(3),t.JRh(e.brand_name),t.R7$(2),t.Y8G("ngIf",e.konsulta_medicine),t.R7$(),t.Y8G("ngIf",e.added_medicine),t.R7$(),t.Y8G("ngIf",!e.id),t.R7$(2),t.Y8G("ngIf",e.id),t.R7$(),t.Y8G("ngIf",!e.id),t.R7$(2),t.Y8G("ngIf",e.id),t.R7$(),t.Y8G("ngIf",!e.id)}}function ne(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",32)(1,"div",33)(2,"div",34)(3,"p",35),t.EFF(4," Showing "),t.j41(5,"span",36),t.EFF(6),t.k0s(),t.EFF(7," to "),t.j41(8,"span",36),t.EFF(9),t.k0s(),t.EFF(10," of "),t.j41(11,"span",36),t.EFF(12),t.k0s(),t.EFF(13," results "),t.k0s()(),t.j41(14,"div")(15,"nav",37)(16,"button",38),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.loadMedicineList(1))}),t.nrm(17,"fa-icon",39),t.k0s(),t.j41(18,"button",40),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.loadMedicineList(i.current_page-1))}),t.nrm(19,"fa-icon",39),t.EFF(20,"Previous "),t.k0s(),t.j41(21,"button",40),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.loadMedicineList(i.current_page+1))}),t.EFF(22," Next"),t.nrm(23,"fa-icon",41),t.k0s(),t.j41(24,"button",42),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.loadMedicineList(i.last_page))}),t.nrm(25,"fa-icon",41),t.k0s()()()()()}if(2&n){const e=t.XpG();t.R7$(6),t.JRh(e.from),t.R7$(3),t.JRh(e.to),t.R7$(3),t.JRh(e.total),t.R7$(4),t.Y8G("disabled",1===e.current_page),t.R7$(),t.Y8G("icon",e.faAnglesLeft),t.R7$(),t.Y8G("disabled",1===e.current_page),t.R7$(),t.Y8G("icon",e.faChevronLeft),t.R7$(2),t.Y8G("disabled",e.current_page===e.last_page),t.R7$(2),t.Y8G("icon",e.faChevronRight),t.R7$(),t.Y8G("disabled",e.current_page===e.last_page),t.R7$(),t.Y8G("icon",e.faAnglesRight)}}let ie=(()=>{class n{selectDrugs(e){delete e.id,e.new_drug=this.lib_drug_table,this.openAddForm.emit(e),this.toggleList.emit()}closeModal(){this.toggleList.emit()}showLibDrugs(){this.lib_drug_table=!0,this.loadMedicineList(1)}addNewDrug(e){this.openAddForm.emit(e),this.toggleList.emit()}loadMedicineList(e){let s=this.lib_drug_table?"libraries/konsulta-medicines":"medicine/list",i={params:{}};this.search_item&&(i.params["filter[search]"]=this.search_item),e&&(i.params.page=e),i.params.per_page=this.per_page,this.http.get(s,i).subscribe({next:o=>{this.drug_list=o.data,this.current_page=o.meta.current_page,this.last_page=o.meta.last_page,this.from=o.meta.from,this.to=o.meta.to,this.total=o.meta.total},error:o=>console.log(o)})}constructor(e){this.http=e,this.openAddForm=new t.bkB,this.toggleList=new t.bkB,this.faAnglesLeft=d.rNr,this.faChevronLeft=d.Wzs,this.faChevronRight=d.XkK,this.faAnglesRight=d.up_,this.faSearch=d.MjD,this.faEdit=d.MT7,this.faAdd=d.vkJ,this.faCircleXmark=d.bnw,this.is_updating=!1,this.show_lib_drug=!1,this.per_page=10,this.lib_drug_table=!1}ngOnInit(){this.loadMedicineList()}static{this.\u0275fac=function(s){return new(s||n)(t.rXU(u.k))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-drug-list"]],outputs:{openAddForm:"openAddForm",toggleList:"toggleList"},standalone:!1,decls:30,vars:6,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-5xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"flex","justify-end"],[1,"border","border-gray-400","rounded-md","bg-white"],["type","text","placeholder","Search drugs",1,"form-input","border-0","text-sm","p-1","m-1","border-r","border-gray-400",3,"ngModelChange","keyup.enter","ngModel"],["type","button",1,"text-blue-500","w-9","h-9",3,"click"],[1,"-ml-1",3,"icon"],["type","button",1,"text-white","w-9","h-9",3,"click"],[1,"-mr-4",3,"icon"],[1,"h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"overflow-x-auto","relative","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400","mb-5"],[1,"sticky","top-0","text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6"],[1,"overflow-y-auto"],[4,"ngIf"],["class","hover:bg-blue-200 cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"flex","justify-end","py-4","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["class","bg-white py-3 flex items-center justify-between sm:px-6",4,"ngIf"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],["colspan","9"],[1,"grid","grid-cols-1","w-full","mt-10"],[1,"text-center","italic"],["class","flex justify-center mt-3",4,"ngIf"],[1,"flex","justify-center","mt-3"],["type","button",1,"btn-save",3,"click"],[1,"hover:bg-blue-200","cursor-pointer",3,"click","ngClass"],["scope","row",1,"py-4","px-6","font-medium","whitespace-nowrap"],[1,"py-4","px-6"],[1,"bg-white","py-3","flex","items-center","justify-between","sm:px-6"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"mr-3"],[1,"text-sm","text-gray-700"],[1,"font-medium"],["aria-label","Pagination",1,"relative","z-0","inline-flex","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","disabled"],[1,"block","h-15","w-15","text-gray-500","pr-1",3,"icon"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","bg-white","text-sm","font-medium","text-gray-700","hover:bg-gray-50",3,"click","disabled"],[1,"h-5","w-5","text-gray-500",3,"icon"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","disabled"]],template:function(s,i){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.EFF(5," Drugs library "),t.k0s(),t.j41(6,"div",5)(7,"div",6)(8,"input",7),t.mxI("ngModelChange",function(r){return t.DH7(i.search_item,r)||(i.search_item=r),r}),t.bIt("keyup.enter",function(){return i.loadMedicineList()}),t.k0s(),t.j41(9,"button",8),t.bIt("click",function(){return i.loadMedicineList()}),t.nrm(10,"fa-icon",9),t.k0s()(),t.j41(11,"button",10),t.bIt("click",function(){return i.closeModal()}),t.nrm(12,"fa-icon",11),t.k0s()()(),t.j41(13,"div",12)(14,"div",13)(15,"table",14)(16,"thead",15)(17,"tr")(18,"th",16),t.EFF(19,"Drug Name"),t.k0s(),t.j41(20,"th",16),t.EFF(21,"Dosage"),t.k0s(),t.j41(22,"th",16),t.EFF(23,"Package"),t.k0s()()(),t.j41(24,"tbody",17),t.DNE(25,Ht,6,1,"tr",18)(26,ee,15,11,"tr",19),t.k0s()()()(),t.j41(27,"div",20),t.DNE(28,ne,26,11,"div",21),t.k0s()()()(),t.nrm(29,"div",22)),2&s&&(t.R7$(8),t.R50("ngModel",i.search_item),t.R7$(2),t.Y8G("icon",i.faSearch),t.R7$(2),t.Y8G("icon",i.faCircleXmark),t.R7$(13),t.Y8G("ngIf",0===(null==i.drug_list?null:i.drug_list.length)||!i.drug_list),t.R7$(),t.Y8G("ngForOf",i.drug_list),t.R7$(2),t.Y8G("ngIf",(null==i.drug_list?null:i.drug_list.length)>=1))},dependencies:[c.YU,c.Sq,c.bT,p.aY,l.me,l.BC,l.vS],encapsulation:2})}}return n})();const g=n=>({"text-red-500":n}),h=n=>({"invalid-input":n});function se(n,a){1&n&&(t.j41(0,"div",43)(1,"strong"),t.EFF(2,"Note: "),t.k0s(),t.EFF(3,"Saving this prescription will automatically add new item in your drug list. "),t.k0s())}function oe(n,a){if(1&n&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&n){const e=t.XpG(3);t.R7$(),t.SpI(" ",e.required_message," ")}}function ae(n,a){if(1&n&&(t.j41(0,"div",47),t.DNE(1,oe,2,1,"div",48),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.Y8G("ngIf",null==e.f.brand_name.errors?null:e.f.brand_name.errors.required)}}function le(n,a){if(1&n&&(t.j41(0,"div",44)(1,"label",45),t.EFF(2,"Brand Name"),t.k0s(),t.nrm(3,"input",46),t.DNE(4,ae,2,1,"div",14),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("ngClass",t.eq3(3,g,e.is_saving&&e.f.brand_name.errors)),t.R7$(2),t.Y8G("ngClass",t.eq3(5,h,e.is_saving&&e.f.brand_name.errors)),t.R7$(),t.Y8G("ngIf",e.is_saving&&e.f.brand_name.errors)}}function re(n,a){if(1&n&&(t.j41(0,"div",44)(1,"span",49),t.EFF(2,"Drug description:"),t.k0s(),t.EFF(3),t.k0s()),2&n){const e=t.XpG();t.R7$(3),t.SpI(" ",e.selected_drug.konsulta_medicine?e.selected_drug.konsulta_medicine.desc:e.selected_drug.desc," ")}}function de(n,a){if(1&n&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&n){const e=t.XpG(3);t.R7$(),t.SpI(" ",e.required_message," ")}}function ce(n,a){if(1&n&&(t.j41(0,"div",47),t.DNE(1,de,2,1,"div",48),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.Y8G("ngIf",null==e.f.added_medicine.errors?null:e.f.added_medicine.errors.required)}}function _e(n,a){if(1&n&&(t.j41(0,"div",30)(1,"label",50),t.EFF(2,"Drug name"),t.k0s(),t.nrm(3,"input",51),t.DNE(4,ce,2,1,"div",14),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("ngClass",t.eq3(3,g,e.is_saving&&e.f.added_medicine.errors)),t.R7$(2),t.Y8G("ngClass",t.eq3(5,h,e.is_saving&&e.f.added_medicine.errors)),t.R7$(),t.Y8G("ngIf",e.is_saving&&e.f.added_medicine.errors)}}function pe(n,a){if(1&n&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.SpI(" ",e.required_message," ")}}function ue(n,a){if(1&n&&(t.j41(0,"div",47),t.DNE(1,pe,2,1,"div",48),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("ngIf",null==e.f.dosage_quantity.errors?null:e.f.dosage_quantity.errors.required)}}function me(n,a){if(1&n&&(t.j41(0,"option",52),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.code),t.R7$(),t.JRh(e.desc)}}function ge(n,a){if(1&n&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.SpI(" ",e.required_message," ")}}function he(n,a){if(1&n&&(t.j41(0,"div",47),t.DNE(1,ge,2,1,"div",48),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("ngIf",null==e.f.dosage_uom.errors?null:e.f.dosage_uom.errors.required)}}function fe(n,a){if(1&n&&(t.j41(0,"option",52),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.code),t.R7$(),t.JRh(e.desc)}}function be(n,a){if(1&n&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.SpI(" ",e.required_message," ")}}function ve(n,a){if(1&n&&(t.j41(0,"div",47),t.DNE(1,be,2,1,"div",48),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("ngIf",null==e.f.dose_regimen.errors?null:e.f.dose_regimen.errors.required)}}function xe(n,a){if(1&n&&(t.j41(0,"option",52),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.code),t.R7$(),t.JRh(e.desc)}}function ke(n,a){if(1&n&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.SpI(" ",e.required_message," ")}}function ye(n,a){if(1&n&&(t.j41(0,"div",47),t.DNE(1,ke,2,1,"div",48),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("ngIf",null==e.f.medicine_route_code.errors?null:e.f.medicine_route_code.errors.required)}}function Fe(n,a){if(1&n&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.SpI(" ",e.required_message," ")}}function Ce(n,a){if(1&n&&(t.j41(0,"div",47),t.DNE(1,Fe,2,1,"div",48),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("ngIf",null==e.f.duration_intake.errors?null:e.f.duration_intake.errors.required)}}function je(n,a){if(1&n&&(t.j41(0,"option",52),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.code),t.R7$(),t.JRh(e.desc)}}function we(n,a){if(1&n&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.SpI(" ",e.required_message," ")}}function Re(n,a){if(1&n&&(t.j41(0,"div",47),t.DNE(1,we,2,1,"div",48),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("ngIf",null==e.f.duration_frequency.errors?null:e.f.duration_frequency.errors.required)}}function Ge(n,a){if(1&n&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.SpI(" ",e.required_message," ")}}function Ee(n,a){if(1&n&&(t.j41(0,"div",47),t.DNE(1,Ge,2,1,"div",48),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("ngIf",null==e.f.quantity.errors?null:e.f.quantity.errors.required)}}function Ie(n,a){if(1&n&&(t.j41(0,"option",52),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.code),t.R7$(),t.JRh(e.desc)}}function $e(n,a){if(1&n&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.SpI(" ",e.required_message," ")}}function Te(n,a){if(1&n&&(t.j41(0,"div",47),t.DNE(1,$e,2,1,"div",48),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("ngIf",null==e.f.quantity_preparation.errors?null:e.f.quantity_preparation.errors.required)}}function Me(n,a){if(1&n&&(t.j41(0,"option",52),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.code),t.R7$(),t.JRh(e.desc)}}function Ye(n,a){if(1&n&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.SpI(" ",e.required_message," ")}}function De(n,a){if(1&n&&(t.j41(0,"div",47),t.DNE(1,Ye,2,1,"div",48),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("ngIf",null==e.f.medicine_purpose.errors?null:e.f.medicine_purpose.errors.required)}}function Ne(n,a){if(1&n&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&n){const e=t.XpG(3);t.R7$(),t.SpI(" ",e.required_message," ")}}function Se(n,a){if(1&n&&(t.j41(0,"div",47),t.DNE(1,Ne,2,1,"div",48),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.Y8G("ngIf",null==e.f.purpose_other.errors?null:e.f.purpose_other.errors.required)}}function Xe(n,a){if(1&n&&(t.j41(0,"div",30)(1,"label",53),t.EFF(2,"Purpose remarks"),t.k0s(),t.nrm(3,"input",54),t.DNE(4,Se,2,1,"div",14),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("ngClass",t.eq3(3,g,e.is_saving&&e.f.purpose_other.errors)),t.R7$(2),t.Y8G("ngClass",t.eq3(5,h,e.is_saving&&e.f.purpose_other.errors)),t.R7$(),t.Y8G("ngIf",e.is_saving&&e.f.purpose_other.errors)}}function Pe(n,a){if(1&n&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(),t.JRh(e.value)}}function Ve(n,a){if(1&n&&(t.j41(0,"div",55)(1,"div",56)(2,"ul",57),t.DNE(3,Pe,2,1,"li",58),t.nI1(4,"keyvalue"),t.k0s()()()),2&n){const e=t.XpG();t.R7$(3),t.Y8G("ngForOf",t.bMT(4,1,e.submit_errors))}}function Be(n,a){if(1&n&&t.nrm(0,"fa-icon",59),2&n){const e=t.XpG();t.Y8G("icon",e.faSave)}}function qe(n,a){if(1&n&&t.nrm(0,"fa-icon",60),2&n){const e=t.XpG();t.Y8G("icon",e.faCircleNotch)}}let Ae=(()=>{class n{get f(){return this.prescriptionForm.controls}closeModal(){this.toggleForm.emit()}onSubmit(){this.is_loading=!0,console.log(this.prescriptionForm),this.prescriptionForm.valid&&(this.selected_drug.new_drug?this.http.post("medicine/list",this.prescriptionForm.value).subscribe({next:e=>{this.savePrescription()},error:e=>{this.is_loading=!1,this.http.showError(e.error.message,"Medicine List")}}):(this.is_loading=!1,this.savePrescription()))}savePrescription(){let e;e=this.selected_drug&&this.selected_drug.id?this.http.update("medicine/prescriptions/",this.selected_drug.id,this.prescriptionForm.value):this.http.post("medicine/prescriptions",this.prescriptionForm.value),e.subscribe({next:s=>{this.is_loading=!1,this.toastr.success("Successfully added","Prescription"),this.closeModal()},error:s=>{this.is_loading=!1,this.http.showError(s.error.message,"Prescription")}})}loadLibraries(){this.libraries.forEach(e=>{this.http.get("libraries/"+e.location).subscribe({next:s=>{this[e.var_name]=s.data},error:s=>console.log(s),complete:()=>this.show_form=!0})})}constructor(e,s,i){this.http=e,this.toastr=s,this.formBuilder=i,this.toggleForm=new t.bkB,this.faCircleNotch=d.s4k,this.faSave=v.hSh,this.is_saving=!1,this.show_form=!1,this.membership_types=[],this.prescriptionForm=new l.gE({brand_name:new l.MJ(null),medicine_name:new l.MJ(null),medicine_code:new l.MJ(null),patient_id:new l.MJ(null),prescribed_by:new l.MJ(null),consult_id:new l.MJ(null),prescription_date:new l.MJ(null),konsulta_medicine_code:new l.MJ(null),added_medicine:new l.MJ(null),dosage_quantity:new l.MJ(null),dosage_uom:new l.MJ(null),dose_regimen:new l.MJ(null),medicine_purpose:new l.MJ(null),purpose_other:new l.MJ(null),duration_intake:new l.MJ(null),duration_frequency:new l.MJ(null),quantity:new l.MJ(null),quantity_preparation:new l.MJ(null),instruction_quantity:new l.MJ(null),medicine_route_code:new l.MJ(null),remarks:new l.MJ(null)}),this.is_loading=!1,this.libraries=[{var_name:"drug_uom",location:"unit-of-measurements"},{var_name:"drug_regimen",location:"dose-regimens"},{var_name:"drug_purpose",location:"purposes"},{var_name:"drug_frequency",location:"duration-frequencies"},{var_name:"drug_preparation",location:"preparations"},{var_name:"drug_route",location:"medicine-route"}],this.add_drug=!1}checkPurpose(){"99"===this.prescriptionForm.value.medicine_purpose?this.prescriptionForm.controls.purpose_other.enable():this.prescriptionForm.controls.purpose_other.disable()}patchValue(){this.prescriptionForm.patchValue({konsulta_medicine_code:this.selected_drug.konsulta_medicine?this.selected_drug.konsulta_medicine.code:null,added_medicine:this.selected_drug.added_medicine?this.selected_drug.added_medicine:null,dosage_quantity:this.selected_drug.dosage_quantity,dosage_uom:this.selected_drug.unit_of_measurement?this.selected_drug.unit_of_measurement.code:null,dose_regimen:this.selected_drug.regimen?this.selected_drug.regimen.code:null,medicine_purpose:this.selected_drug.purpose?this.selected_drug.purpose.code:null,duration_intake:this.selected_drug.duration_intake,duration_frequency:this.selected_drug.frequency?this.selected_drug.frequency.code:null,quantity:this.selected_drug.quantity,quantity_preparation:this.selected_drug.preparation?this.selected_drug.preparation.code:null,instruction_quantity:this.selected_drug.instruction_quantity??1,medicine_route_code:this.selected_drug.medicine_route?this.selected_drug.medicine_route.code:null,remarks:this.selected_drug.remarks}),this.selected_drug&&this.selected_drug.new_drug&&this.prescriptionForm.patchValue({konsulta_medicine_code:this.selected_drug.code}),this.selected_drug.konsulta_medicine?this.prescriptionForm.controls.added_medicine.disable():this.selected_drug.added_medicine&&(this.prescriptionForm.controls.added_medicine.enable(),this.prescriptionForm.controls.konsulta_medicine_code.disable()),this.checkPurpose()}ngOnChanges(e){this.prescriptionForm=this.formBuilder.nonNullable.group({brand_name:[null],patient_id:[this.consult_details.patient.id],prescribed_by:[this.consult_details.physician.id,[l.k0.required]],consult_id:[this.consult_details.id,[l.k0.required]],prescription_date:[(0,c.Yq)(this.consult_details.consult_date,"yyyy-MM-dd","en","Asia/Manila"),[l.k0.required]],konsulta_medicine_code:[null,[l.k0.required]],added_medicine:[null],dosage_quantity:[null,[l.k0.required]],dosage_uom:[null,[l.k0.required]],dose_regimen:[null,[l.k0.required]],medicine_purpose:[null,[l.k0.required]],purpose_other:[null,[l.k0.required]],duration_intake:[null,[l.k0.required]],duration_frequency:[null,[l.k0.required]],quantity:[null,[l.k0.required]],quantity_preparation:[null,[l.k0.required]],instruction_quantity:[1],medicine_route_code:[null,[l.k0.required]],remarks:[null]}),this.selected_drug?this.patchValue():this.prescriptionForm.controls.konsulta_medicine_code.disable()}static{this.\u0275fac=function(s){return new(s||n)(t.rXU(u.k),t.rXU(f.tw),t.rXU(l.ok))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-drug-form"]],inputs:{selected_drug:"selected_drug",consult_details:"consult_details",drug_uom:"drug_uom",drug_regimen:"drug_regimen",drug_purpose:"drug_purpose",drug_frequency:"drug_frequency",drug_preparation:"drug_preparation",drug_route:"drug_route"},outputs:{toggleForm:"toggleForm"},standalone:!1,features:[t.OA$],decls:78,vars:87,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white","pl-5"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"w-full","max-w-3xl","text-left","text-gray-500","dark:text-gray-400",3,"formGroup"],[1,"grid","grid-cols-3","gap-4","pb-5","px-10"],["class","col-span-3 mt-5 mx-5 px-5 py-3 rounded-md border border-yellow-500 bg-yellow-100",4,"ngIf"],["class","col-span-3 mt-5 mx-5",4,"ngIf"],["class","col-span-3 text-sm ",4,"ngIf"],[1,"col-span-1","text-sm"],["for","dosage_quantity",1,"font-semibold",3,"ngClass"],["name","dosage_quantity","id","dosage_quantity","formControlName","dosage_quantity","type","number",1,"input",3,"ngClass"],["class","invalid-alert",4,"ngIf"],["for","dosage_uom",1,"font-semibold",3,"ngClass"],["name","dosage_uom","id","dosage_uom","formControlName","dosage_uom",1,"input",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["for","dose_regimen",1,"font-semibold",3,"ngClass"],["name","dose_regimen","id","dose_regimen","formControlName","dose_regimen",1,"input",3,"ngClass"],["for","medicine_route_code",1,"font-semibold",3,"ngClass"],["name","route","id","medicine_route_code","formControlName","medicine_route_code",1,"input",3,"ngClass"],["for","duration_intake",1,"font-semibold",3,"ngClass"],["name","duration_intake","id","duration_intake","formControlName","duration_intake","type","number",1,"input",3,"ngClass"],["for","duration_frequency",1,"font-semibold",3,"ngClass"],["name","duration_frequency","id","duration_frequency","formControlName","duration_frequency",1,"input",3,"ngClass"],["for","quantity",1,"font-semibold",3,"ngClass"],["name","quantity","id","quantity","formControlName","quantity","type","number",1,"input",3,"ngClass"],["for","quantity_preparation",1,"font-semibold",3,"ngClass"],["name","quantity_preparation","id","quantity_preparation","formControlName","quantity_preparation",1,"input",3,"ngClass"],[1,"col-span-3","text-sm"],["for","medicine_purpose",1,"font-semibold",3,"ngClass"],["name","medicine_purpose","id","medicine_purpose","formControlName","medicine_purpose",1,"input",3,"change","ngClass"],["class","col-span-3 text-sm",4,"ngIf"],["for","remarks",1,"font-semibold",3,"ngClass"],["name","remarks","id","remarks","formControlName","remarks","type","text",1,"input",3,"ngClass"],["id","show_errors","class","relative mx-10 col-span-8 bg-red-200 rounded border border-red-300 text-red-900 text-sm mb-5",4,"ngIf"],[1,"flex","justify-end","mr-10","py-3","rounded-b"],["type","button",1,"btn-save","px-10","bg-gray-400","mr-5",3,"click","disabled"],["type","button",1,"btn-save","px-10","disabled:bg-gray-300",3,"click","disabled"],[3,"icon",4,"ngIf"],["animation","spin",3,"icon",4,"ngIf"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"col-span-3","mt-5","mx-5","px-5","py-3","rounded-md","border","border-yellow-500","bg-yellow-100"],[1,"col-span-3","mt-5","mx-5"],["for","brand_name",1,"font-semibold",3,"ngClass"],["name","brand_name","id","brand_name","formControlName","brand_name","type","text",1,"input",3,"ngClass"],[1,"invalid-alert"],[4,"ngIf"],[1,"font-semibold"],["for","added_medicine",1,"font-semibold",3,"ngClass"],["name","added_medicine","id","added_medicine","formControlName","added_medicine","type","text",1,"input",3,"ngClass"],[3,"value"],["for","purpose_other",1,"font-semibold",3,"ngClass"],["name","purpose_other","id","purpose_other","formControlName","purpose_other","type","text",1,"input",3,"ngClass"],["id","show_errors",1,"relative","mx-10","col-span-8","bg-red-200","rounded","border","border-red-300","text-red-900","text-sm","mb-5"],[1,"block","p-3","pl-10"],[1,"list-disc"],[4,"ngFor","ngForOf"],[3,"icon"],["animation","spin",3,"icon"]],template:function(s,i){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.EFF(5," Prescribe medicine "),t.k0s()(),t.j41(6,"div",5)(7,"form",6)(8,"div",7),t.DNE(9,se,4,0,"div",8)(10,le,5,7,"div",9)(11,re,4,1,"div",9)(12,_e,5,7,"div",10),t.j41(13,"div",11)(14,"label",12),t.EFF(15,"Dosage Qty."),t.k0s(),t.nrm(16,"input",13),t.DNE(17,ue,2,1,"div",14),t.k0s(),t.j41(18,"div",11)(19,"label",15),t.EFF(20,"Dosage unit"),t.k0s(),t.j41(21,"select",16),t.DNE(22,me,2,2,"option",17),t.k0s(),t.DNE(23,he,2,1,"div",14),t.k0s(),t.j41(24,"div",11)(25,"label",18),t.EFF(26,"Dosage regimen"),t.k0s(),t.j41(27,"select",19),t.DNE(28,fe,2,2,"option",17),t.k0s(),t.DNE(29,ve,2,1,"div",14),t.k0s(),t.j41(30,"div",11)(31,"label",20),t.EFF(32,"Medicine Route"),t.k0s(),t.j41(33,"select",21),t.DNE(34,xe,2,2,"option",17),t.k0s(),t.DNE(35,ye,2,1,"div",14),t.k0s(),t.j41(36,"div",11)(37,"label",22),t.EFF(38,"Duration"),t.k0s(),t.nrm(39,"input",23),t.DNE(40,Ce,2,1,"div",14),t.k0s(),t.j41(41,"div",11)(42,"label",24),t.EFF(43,"Duration frequency"),t.k0s(),t.j41(44,"select",25),t.DNE(45,je,2,2,"option",17),t.k0s(),t.DNE(46,Re,2,1,"div",14),t.k0s(),t.j41(47,"div",11)(48,"label",26),t.EFF(49,"Quantity"),t.k0s(),t.nrm(50,"input",27),t.DNE(51,Ee,2,1,"div",14),t.k0s(),t.j41(52,"div",11)(53,"label",28),t.EFF(54,"Preparation"),t.k0s(),t.j41(55,"select",29),t.DNE(56,Ie,2,2,"option",17),t.k0s(),t.DNE(57,Te,2,1,"div",14),t.k0s(),t.j41(58,"div",30)(59,"label",31),t.EFF(60,"Medicine purpose"),t.k0s(),t.j41(61,"select",32),t.bIt("change",function(){return i.checkPurpose()}),t.DNE(62,Me,2,2,"option",17),t.k0s(),t.DNE(63,De,2,1,"div",14),t.k0s(),t.DNE(64,Xe,5,7,"div",33),t.j41(65,"div",30)(66,"label",34),t.EFF(67,"Remarks"),t.k0s(),t.nrm(68,"input",35),t.k0s()(),t.DNE(69,Ve,5,3,"div",36),t.k0s()(),t.j41(70,"div",37)(71,"button",38),t.bIt("click",function(){return i.closeModal()}),t.EFF(72,"Close"),t.k0s(),t.j41(73,"button",39),t.bIt("click",function(){return i.onSubmit()}),t.DNE(74,Be,1,1,"fa-icon",40)(75,qe,1,1,"fa-icon",41),t.EFF(76),t.k0s()()()()(),t.nrm(77,"div",42)),2&s&&(t.R7$(7),t.Y8G("formGroup",i.prescriptionForm),t.R7$(2),t.Y8G("ngIf",i.selected_drug.new_drug),t.R7$(),t.Y8G("ngIf",i.selected_drug.new_drug),t.R7$(),t.Y8G("ngIf",!i.add_drug&&!i.f.added_medicine.value),t.R7$(),t.Y8G("ngIf",i.f.added_medicine.value),t.R7$(2),t.Y8G("ngClass",t.eq3(47,g,i.is_saving&&i.f.dosage_quantity.errors)),t.R7$(2),t.Y8G("ngClass",t.eq3(49,h,i.is_saving&&i.f.dosage_quantity.errors)),t.R7$(),t.Y8G("ngIf",i.is_saving&&i.f.dosage_quantity.errors),t.R7$(2),t.Y8G("ngClass",t.eq3(51,g,i.is_saving&&i.f.dosage_uom.errors)),t.R7$(2),t.Y8G("ngClass",t.eq3(53,h,i.is_saving&&i.f.dosage_uom.errors)),t.R7$(),t.Y8G("ngForOf",i.drug_uom),t.R7$(),t.Y8G("ngIf",i.is_saving&&i.f.dosage_uom.errors),t.R7$(2),t.Y8G("ngClass",t.eq3(55,g,i.is_saving&&i.f.dose_regimen.errors)),t.R7$(2),t.Y8G("ngClass",t.eq3(57,h,i.is_saving&&i.f.dose_regimen.errors)),t.R7$(),t.Y8G("ngForOf",i.drug_regimen),t.R7$(),t.Y8G("ngIf",i.is_saving&&i.f.dose_regimen.errors),t.R7$(2),t.Y8G("ngClass",t.eq3(59,g,i.is_saving&&i.f.medicine_route_code.errors)),t.R7$(2),t.Y8G("ngClass",t.eq3(61,h,i.is_saving&&i.f.medicine_route_code.errors)),t.R7$(),t.Y8G("ngForOf",i.drug_route),t.R7$(),t.Y8G("ngIf",i.is_saving&&i.f.medicine_route_code.errors),t.R7$(2),t.Y8G("ngClass",t.eq3(63,g,i.is_saving&&i.f.duration.errors)),t.R7$(2),t.Y8G("ngClass",t.eq3(65,h,i.is_saving&&i.f.duration_intake.errors)),t.R7$(),t.Y8G("ngIf",i.is_saving&&i.f.duration_intake.errors),t.R7$(2),t.Y8G("ngClass",t.eq3(67,g,i.is_saving&&i.f.duration_frequency.errors)),t.R7$(2),t.Y8G("ngClass",t.eq3(69,h,i.is_saving&&i.f.duration_frequency.errors)),t.R7$(),t.Y8G("ngForOf",i.drug_frequency),t.R7$(),t.Y8G("ngIf",i.is_saving&&i.f.duration_frequency.errors),t.R7$(2),t.Y8G("ngClass",t.eq3(71,g,i.is_saving&&i.f.quantity.errors)),t.R7$(2),t.Y8G("ngClass",t.eq3(73,h,i.is_saving&&i.f.quantity.errors)),t.R7$(),t.Y8G("ngIf",i.is_saving&&i.f.quantity.errors),t.R7$(2),t.Y8G("ngClass",t.eq3(75,g,i.is_saving&&i.f.quantity_preparation.errors)),t.R7$(2),t.Y8G("ngClass",t.eq3(77,h,i.is_saving&&i.f.quantity_preparation.errors)),t.R7$(),t.Y8G("ngForOf",i.drug_preparation),t.R7$(),t.Y8G("ngIf",i.is_saving&&i.f.quantity_preparation.errors),t.R7$(2),t.Y8G("ngClass",t.eq3(79,g,i.is_saving&&i.f.medicine_purpose.errors)),t.R7$(2),t.Y8G("ngClass",t.eq3(81,h,i.is_saving&&i.f.medicine_purpose.errors)),t.R7$(),t.Y8G("ngForOf",i.drug_purpose),t.R7$(),t.Y8G("ngIf",i.is_saving&&i.f.medicine_purpose.errors),t.R7$(),t.Y8G("ngIf","99"===i.prescriptionForm.value.medicine_purpose),t.R7$(2),t.Y8G("ngClass",t.eq3(83,g,i.is_saving&&i.f.remarks.errors)),t.R7$(2),t.Y8G("ngClass",t.eq3(85,h,i.is_saving&&i.f.remarks.errors)),t.R7$(),t.Y8G("ngIf",i.submit_errors),t.R7$(2),t.Y8G("disabled",i.is_loading),t.R7$(2),t.Y8G("disabled",i.is_loading||i.prescriptionForm.invalid),t.R7$(),t.Y8G("ngIf",!i.is_loading),t.R7$(),t.Y8G("ngIf",i.is_loading),t.R7$(),t.SpI(" ",i.is_loading?"Saving":"Save"," "))},dependencies:[c.YU,c.Sq,c.bT,p.aY,l.qT,l.xH,l.y7,l.me,l.Q0,l.wz,l.BC,l.cb,l.j4,l.JD,c.lG],encapsulation:2})}}return n})();const O=n=>({"rounded-b":n});function Oe(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",21),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleModal())}),t.EFF(1," konsulta epress "),t.k0s()}}function Ue(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",22),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("dispensing"))}),t.nrm(1,"fa-icon",23),t.EFF(2," dispensing "),t.k0s()}if(2&n){const e=t.XpG();t.R7$(),t.Y8G("icon",e.faPrescriptionBottleMedical)}}function Le(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",24),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleList())}),t.nrm(1,"fa-icon",23),t.EFF(2," add drugs "),t.k0s()}if(2&n){const e=t.XpG();t.R7$(),t.Y8G("icon",e.faAdd)}}function He(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",25),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleModal("eprescription"))}),t.EFF(1," Print "),t.nrm(2,"fa-icon",23),t.k0s()}if(2&n){const e=t.XpG();t.R7$(2),t.Y8G("icon",e.faPrescription)}}function Je(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",39),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,o=t.XpG(2);return t.Njj(o.openAddForm(i))}),t.nrm(1,"fa-icon",40),t.k0s()}if(2&n){const e=t.XpG(3);t.R7$(),t.Y8G("icon",e.faEdit)}}function ze(n,a){if(1&n){const e=t.RV6();t.j41(0,"tr",32)(1,"td",33),t.EFF(2),t.nrm(3,"br")(4,"br"),t.k0s(),t.j41(5,"td",34),t.EFF(6),t.nrm(7,"br")(8,"br"),t.EFF(9),t.k0s(),t.j41(10,"td",34),t.EFF(11),t.nI1(12,"date"),t.k0s(),t.j41(13,"td",34),t.EFF(14),t.k0s(),t.j41(15,"td",34),t.EFF(16),t.k0s(),t.j41(17,"td",35),t.DNE(18,Je,2,1,"button",36),t.j41(19,"button",37),t.bIt("click",function(){const i=t.eBV(e).$implicit,o=t.XpG(2);return t.Njj(o.toggleModal("delete-item",i))}),t.nrm(20,"fa-icon",38),t.k0s()()()}if(2&n){const e=a.$implicit,s=t.XpG(2);t.R7$(2),t.Lme(" ",e.konsulta_medicine?e.konsulta_medicine.desc:e.added_medicine," ",e.medicine?e.medicine.gen_name:""," "),t.R7$(4),t.SjE(" ",e.dosage_quantity," ",e.unit_of_measurement.desc," ",e.regimen.desc," ",e.duration_intake," ",e.frequency.desc," "),t.R7$(3),t.SpI(" Remarks: ",e.remarks," "),t.R7$(2),t.SpI(" ",t.brH(12,13,e.prescription_date,"MM/dd/yyyy","Asia/Manila")," "),t.R7$(3),t.SpI(" ",e.quantity," "),t.R7$(2),t.SpI(" ",e.preparation.desc," "),t.R7$(2),t.Y8G("ngIf",e.dispensing),t.R7$(2),t.Y8G("icon",s.faTrashCan)}}function Ke(n,a){if(1&n&&(t.j41(0,"table",26)(1,"thead")(2,"tr",27)(3,"th",28),t.EFF(4,"Medicine"),t.k0s(),t.j41(5,"th",28),t.EFF(6,"Intake"),t.k0s(),t.j41(7,"th",29),t.EFF(8,"Prescription Date"),t.k0s(),t.j41(9,"th",29),t.EFF(10,"Quantity"),t.k0s(),t.j41(11,"th",29),t.EFF(12,"Unit of Measurement"),t.k0s(),t.j41(13,"th",30),t.EFF(14,"Action"),t.k0s()()(),t.j41(15,"tbody"),t.DNE(16,ze,21,17,"tr",31),t.k0s()()),2&n){const e=t.XpG();t.R7$(16),t.Y8G("ngForOf",e.prescriptions)("ngForTrackBy",e.identify)}}function We(n,a){if(1&n&&t.nrm(0,"fa-icon",48),2&n){const e=t.XpG(3);t.Y8G("icon",e.faSpinner)}}function Qe(n,a){if(1&n&&t.nrm(0,"fa-icon",49),2&n){const e=t.XpG(3);t.Y8G("icon",e.faSave)}}function Ze(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",45),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onSubmit())}),t.DNE(1,We,1,1,"fa-icon",46)(2,Qe,1,1,"fa-icon",47),t.EFF(3),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("disabled",e.is_saving),t.R7$(),t.Y8G("ngIf",e.is_saving),t.R7$(),t.Y8G("ngIf",!e.is_saving),t.R7$(),t.SpI(" ",e.is_saving?"Saving":"Save"," ")}}function tn(n,a){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"div",41)(2,"textarea",42),t.mxI("ngModelChange",function(i){t.eBV(e);const o=t.XpG();return t.DH7(o.consult_notes.plan,i)||(o.consult_notes.plan=i),t.Njj(i)}),t.k0s()(),t.j41(3,"div",43),t.DNE(4,Ze,4,4,"button",44),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(2),t.Y8G("disabled",e.consult_done||!e.allowed_to_edit),t.R50("ngModel",e.consult_notes.plan),t.R7$(2),t.Y8G("ngIf",!e.consult_done&&e.allowed_to_edit)}}function en(n,a){if(1&n){const e=t.RV6();t.j41(0,"app-drug-list",50),t.bIt("openAddForm",function(i){t.eBV(e);const o=t.XpG();return t.Njj(o.openAddForm(i))})("toggleList",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleList())}),t.k0s()}}function nn(n,a){if(1&n){const e=t.RV6();t.j41(0,"app-drug-form",51),t.bIt("toggleForm",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleForm())}),t.k0s()}if(2&n){const e=t.XpG();t.Y8G("selected_drug",e.selected_drug)("consult_details",e.consult_details)("drug_uom",e.drug_uom)("drug_regimen",e.drug_regimen)("drug_purpose",e.drug_purpose)("drug_frequency",e.drug_frequency)("drug_preparation",e.drug_preparation)("drug_route",e.drug_route)}}function sn(n,a){if(1&n){const e=t.RV6();t.j41(0,"app-epres",52),t.bIt("toggleModal",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleModal())}),t.k0s()}if(2&n){const e=t.XpG();t.Y8G("prescriptions",e.prescriptions)("consult_details",e.consult_details)}}function on(n,a){if(1&n){const e=t.RV6();t.j41(0,"app-eprescription",52),t.bIt("toggleModal",function(i){t.eBV(e);const o=t.XpG();return t.Njj(o.toggleModal(i))}),t.k0s()}if(2&n){const e=t.XpG();t.Y8G("prescriptions",e.prescriptions)("consult_details",e.consult_details)}}function an(n,a){if(1&n){const e=t.RV6();t.j41(0,"app-delete-item",53),t.bIt("toggleModal",function(i){t.eBV(e);const o=t.XpG();return t.Njj(o.toggleModal(i))}),t.k0s()}if(2&n){const e=t.XpG();t.Y8G("delete_id",e.delete_id)("delete_desc",e.delete_desc)("url",e.url)}}let ln=(()=>{class n{navigateTo(e){this.router.navigate(["/patient/"+e,{id:this.consult_details.patient.id,consult_id:this.consult_details.id}])}openDeleteForm(e){this.selected_drug=e,this.toggleDeleteForm()}onSubmit(){this.is_saving=!0,this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,plan:this.consult_notes.plan}).subscribe({next:s=>{this.is_saving=!1,this.showToastr()},error:s=>console.log(s)})}showToastr(){this.toastr.success("Successfully recorded!","Treatment plan")}openEditForm(e){this.selected_drug=e}openAddForm(e){this.selected_drug=e,this.toggleForm()}openDeleteModal(e){this.delete_id=e.id,this.modal["delete-item"]=!this.modal["delete-item"]}toggleDeleteForm(){this.show_delete_form=!this.show_delete_form,!1===this.show_delete_form&&this.loadPrescriptions()}toggleForm(){this.drug_uom&&this.drug_uom&&this.drug_purpose&&this.drug_frequency&&this.drug_preparation?this.show_form=!this.show_form:this.loadLibraries(),!1===this.show_form&&this.loadPrescriptions()}ngOnChanges(e){this.show_content=this.toggle_content,this.show_content_tx=this.toggle_content,!1===this.consult_details.consult_done&&(this.show_actions=!0),this.consult_details&&(this.consult_notes=this.consult_details.consult_notes,this.consult_done=this.consult_details.consult_done)}loadLibraries(){this.libraries.forEach((e,s)=>{this.http.get("libraries/"+e.location).subscribe({next:i=>{this[e.var_name]=i.data,this.libraries.length-1===s&&(this.show_form=!0)},error:i=>console.log(i)})})}toggleModal(e,s){e?(s&&(this.delete_id=s.id),this.modal[e]=!this.modal[e]):this.show_epress=!this.show_epress}toggleList(){this.show_list=!this.show_list}identify(e,s){return s.id}loadPrescriptions(){this.http.get("medicine/prescriptions",{params:{sort:"-prescription_date",consult_id:this.consult_details.id}}).subscribe({next:s=>{console.log(s.data),s.data.length>0&&(this.prescriptions=s.data)},error:s=>console.log(s)})}constructor(e,s,i){this.http=e,this.toastr=s,this.router=i,this.show_content=!0,this.show_list=!1,this.show_form=!1,this.show_delete_form=!1,this.show_actions=!1,this.show_content_tx=!1,this.is_saving=!1,this.consult_done=!1,this.faChevronCircleUp=d.AeV,this.faChevronCircleDown=d.DqM,this.faAdd=d.vkJ,this.faSave=d.hSh,this.faSpinner=d.z1G,this.faEdit=d.MT7,this.faTrash=d.yLS,this.faPrescriptionBottleMedical=d.F5L,this.faReceipt=d.Mf0,this.faTrashCan=d.sjs,this.faPrescription=d.es,this.consult_notes={plan:null},this.modal=[],this.delete_desc="Prescription",this.url="medicine/prescriptions/",this.libraries=[{var_name:"drug_uom",location:"unit-of-measurements"},{var_name:"drug_regimen",location:"dose-regimens"},{var_name:"drug_purpose",location:"purposes"},{var_name:"drug_frequency",location:"duration-frequencies"},{var_name:"drug_preparation",location:"preparations"},{var_name:"drug_route",location:"medicine-route"}],this.show_epress=!1}ngOnInit(){this.loadPrescriptions()}static{this.\u0275fac=function(s){return new(s||n)(t.rXU(u.k),t.rXU(f.tw),t.rXU(b.Ix))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-prescription"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",with_credentials:"with_credentials",allowed_to_edit:"allowed_to_edit"},standalone:!1,features:[t.OA$],decls:26,vars:18,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","flex","justify-between"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-amber-500","flex","justify-between",3,"ngClass"],["type","button","class","mr-3 text-sm bg-white text-green-500 px-3 rounded-full",3,"click",4,"ngIf"],["type","button","class","mr-3 text-sm bg-white text-amber-500 px-3 rounded-full",3,"click",4,"ngIf"],["type","button","class","text-sm bg-white text-blue-500 px-3 rounded-full",3,"click",4,"ngIf"],[1,"flex","justify-end","mt-3","mr-3"],["type","button","class","ml-3 bg-emerald-600 text-white rounded-md px-2 py-1 hover:opacity-80",3,"click",4,"ngIf"],["class","w-full table-auto p-5",4,"ngIf"],[1,"rounded-md","border","border-solid","border-gray-300","mt-5"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[3,"openAddForm","toggleList",4,"ngIf"],[3,"selected_drug","consult_details","drug_uom","drug_regimen","drug_purpose","drug_frequency","drug_preparation","drug_route","toggleForm",4,"ngIf"],[3,"prescriptions","consult_details","toggleModal",4,"ngIf"],[3,"delete_id","delete_desc","url","toggleModal",4,"ngIf"],["type","button",1,"mr-3","text-sm","bg-white","text-green-500","px-3","rounded-full",3,"click"],["type","button",1,"mr-3","text-sm","bg-white","text-amber-500","px-3","rounded-full",3,"click"],[1,"pr-1",3,"icon"],["type","button",1,"text-sm","bg-white","text-blue-500","px-3","rounded-full",3,"click"],["type","button",1,"ml-3","bg-emerald-600","text-white","rounded-md","px-2","py-1","hover:opacity-80",3,"click"],[1,"w-full","table-auto","p-5"],[1,"align-top"],["scope","col",1,"text-center","py-3","px-3","w-3/12"],["scope","col",1,"text-center","py-3","px-3","w-1/12"],["scope","col",1,"text-center","py-3","px-3","w-2/12"],["class","bg-white border-b last:border-0 text-sm align-top",4,"ngFor","ngForOf","ngForTrackBy"],[1,"bg-white","border-b","last:border-0","text-sm","align-top"],[1,"py-4","px-3"],["scope","row",1,"py-4","px-3","font-medium","text-gray-900"],[1,"text-sm","text-center","mb-5","align-middle"],["class","mr-3",3,"click",4,"ngIf"],[3,"click"],[1,"text-rose-500",3,"icon"],[1,"mr-3",3,"click"],[1,"text-amber-500",3,"icon"],[1,"grid","grid-cols-1","px-4","pb-4","mt-4"],["rows","3","id","plan","placeholder","Treatment plan",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"ngModelChange","disabled","ngModel"],[1,"flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"click","disabled"],["class","mr-2","animation","spin",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"],[3,"openAddForm","toggleList"],[3,"toggleForm","selected_drug","consult_details","drug_uom","drug_regimen","drug_purpose","drug_frequency","drug_preparation","drug_route"],[3,"toggleModal","prescriptions","consult_details"],[3,"toggleModal","delete_id","delete_desc","url"]],template:function(s,i){1&s&&(t.nrm(0,"hr",0),t.j41(1,"div",1)(2,"div",2),t.EFF(3," Prescription "),t.k0s(),t.j41(4,"div",3)(5,"div",4)(6,"span",5),t.EFF(7," Prescriptions "),t.j41(8,"div"),t.DNE(9,Oe,2,0,"button",6)(10,Ue,3,1,"button",7)(11,Le,3,1,"button",8),t.k0s()(),t.j41(12,"div",9),t.DNE(13,He,3,1,"button",10),t.k0s(),t.DNE(14,Ke,17,2,"table",11),t.k0s(),t.j41(15,"div",12)(16,"span",13),t.EFF(17," Treatment Plan "),t.j41(18,"button",14),t.bIt("click",function(){return i.show_content_tx=!i.show_content_tx}),t.nrm(19,"fa-icon",15),t.k0s()(),t.DNE(20,tn,5,3,"div",16),t.k0s()()(),t.DNE(21,en,1,0,"app-drug-list",17)(22,nn,1,8,"app-drug-form",18)(23,sn,1,2,"app-epres",19)(24,on,1,2,"app-eprescription",19)(25,an,1,3,"app-delete-item",20)),2&s&&(t.R7$(6),t.Y8G("ngClass",t.eq3(14,O,!i.show_content)),t.R7$(3),t.Y8G("ngIf",(null==i.consult_details?null:i.consult_details.is_konsulta)&&i.with_credentials&&i.prescriptions),t.R7$(),t.Y8G("ngIf",i.prescriptions),t.R7$(),t.Y8G("ngIf",i.show_actions),t.R7$(2),t.Y8G("ngIf",i.prescriptions),t.R7$(),t.Y8G("ngIf",i.show_content),t.R7$(2),t.Y8G("ngClass",t.eq3(16,O,!i.show_content_tx)),t.R7$(3),t.Y8G("icon",i.show_content_tx?i.faChevronCircleUp:i.faChevronCircleDown),t.R7$(),t.Y8G("ngIf",i.show_content_tx),t.R7$(),t.Y8G("ngIf",i.show_list),t.R7$(),t.Y8G("ngIf",i.show_form),t.R7$(),t.Y8G("ngIf",i.show_epress),t.R7$(),t.Y8G("ngIf",i.modal.eprescription),t.R7$(),t.Y8G("ngIf",i.modal["delete-item"]))},dependencies:[c.YU,c.Sq,c.bT,I,p.aY,l.me,l.BC,l.vS,q.c,A,ie,Ae,c.vh],encapsulation:2})}}return n})();var rn=_(7468);function dn(n,a){if(1&n&&(t.j41(0,"option",28),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.facility.code),t.R7$(),t.Lme("",e.last_name,", ",e.first_name,"")}}function cn(n,a){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"input",29),t.mxI("ngModelChange",function(i){const o=t.eBV(e).$implicit,r=t.XpG(2);return t.DH7(r.patient_complaints[o.complaint_id],i)||(r.patient_complaints[o.complaint_id]=i),t.Njj(i)}),t.k0s(),t.j41(2,"label",30),t.EFF(3),t.k0s()()}if(2&n){const e=a.$implicit,s=t.XpG(2);t.R7$(),t.R50("ngModel",s.patient_complaints[e.complaint_id]),t.R7$(2),t.JRh(e.complaint_desc)}}function _n(n,a){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"input",29),t.mxI("ngModelChange",function(i){const o=t.eBV(e).$implicit,r=t.XpG(2);return t.DH7(r.patient_behavior[o.id],i)||(r.patient_behavior[o.id]=i),t.Njj(i)}),t.k0s(),t.j41(2,"label",30),t.EFF(3),t.k0s()()}if(2&n){const e=a.$implicit,s=t.XpG(2);t.R7$(),t.R50("ngModel",s.patient_behavior[e.id]),t.R7$(2),t.JRh(e.desc)}}function pn(n,a){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"input",29),t.mxI("ngModelChange",function(i){const o=t.eBV(e).$implicit,r=t.XpG(2);return t.DH7(r.patient_neglect[o.id],i)||(r.patient_neglect[o.id]=i),t.Njj(i)}),t.k0s(),t.j41(2,"label",30),t.EFF(3),t.k0s()()}if(2&n){const e=a.$implicit,s=t.XpG(2);t.R7$(),t.R50("ngModel",s.patient_neglect[e.id]),t.R7$(2),t.JRh(e.desc)}}function un(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",12)(1,"div",13)(2,"div",14)(3,"label",15),t.EFF(4,"Date"),t.k0s(),t.j41(5,"input",16),t.mxI("ngModelChange",function(i){t.eBV(e);const o=t.XpG();return t.DH7(o.patient_gbv.gbv_date,i)||(o.patient_gbv.gbv_date=i),t.Njj(i)}),t.k0s()(),t.j41(6,"div",14)(7,"label",17),t.EFF(8,"Refer to"),t.k0s(),t.j41(9,"select",18),t.mxI("ngModelChange",function(i){t.eBV(e);const o=t.XpG();return t.DH7(o.patient_gbv.referral_facility_code,i)||(o.patient_gbv.referral_facility_code=i),t.Njj(i)}),t.DNE(10,dn,2,3,"option",19),t.k0s()(),t.j41(11,"div",20),t.EFF(12," Complaints "),t.k0s(),t.j41(13,"div",21),t.DNE(14,cn,4,2,"div",22),t.k0s(),t.j41(15,"div",23)(16,"label",24),t.EFF(17,"Remarks"),t.k0s(),t.j41(18,"input",25),t.mxI("ngModelChange",function(i){t.eBV(e);const o=t.XpG();return t.DH7(o.patient_gbv.gbv_complaint_remarks,i)||(o.patient_gbv.gbv_complaint_remarks=i),t.Njj(i)}),t.k0s()(),t.j41(19,"div",20),t.EFF(20," Behavioral Changes "),t.k0s(),t.j41(21,"div",21),t.DNE(22,_n,4,2,"div",22),t.k0s(),t.j41(23,"div",23)(24,"label",24),t.EFF(25,"Remarks"),t.k0s(),t.j41(26,"input",26),t.mxI("ngModelChange",function(i){t.eBV(e);const o=t.XpG();return t.DH7(o.patient_gbv.gbv_behavioral_remarks,i)||(o.patient_gbv.gbv_behavioral_remarks=i),t.Njj(i)}),t.k0s()(),t.j41(27,"div",20),t.EFF(28," Neglects "),t.k0s(),t.j41(29,"div",21),t.DNE(30,pn,4,2,"div",22),t.k0s(),t.j41(31,"div",23)(32,"label",24),t.EFF(33,"Remarks"),t.k0s(),t.j41(34,"input",27),t.mxI("ngModelChange",function(i){t.eBV(e);const o=t.XpG();return t.DH7(o.patient_gbv.gbv_neglect_remarks,i)||(o.patient_gbv.gbv_neglect_remarks=i),t.Njj(i)}),t.k0s()()()()}if(2&n){const e=t.XpG();t.R7$(5),t.R50("ngModel",e.patient_gbv.gbv_date),t.R7$(4),t.R50("ngModel",e.patient_gbv.referral_facility_code),t.R7$(),t.Y8G("ngForOf",e.gbv_mdts),t.R7$(4),t.Y8G("ngForOf",e.complaints),t.R7$(4),t.R50("ngModel",e.patient_gbv.gbv_complaint_remarks),t.R7$(4),t.Y8G("ngForOf",e.behavioral_changes),t.R7$(4),t.R50("ngModel",e.patient_gbv.gbv_behavioral_remarks),t.R7$(4),t.Y8G("ngForOf",e.neglects),t.R7$(4),t.R50("ngModel",e.patient_gbv.gbv_neglect_remarks)}}function mn(n,a){if(1&n&&(t.j41(0,"div",31)(1,"div",32),t.nrm(2,"fa-icon",33),t.k0s(),t.j41(3,"div",34),t.EFF(4," Loading... "),t.k0s()()),2&n){const e=t.XpG();t.R7$(2),t.Y8G("icon",e.faCircleNotch)}}let gn=(()=>{class n{onSubmit(){let e=[],s=[],i=[];this.patient_gbv.patient_id=this.patient_id,this.patient_gbv.referral_date=this.patient_gbv.gbv_date,Object.entries(this.patient_complaints).forEach(([o,r],m)=>{!0===r&&e.push({complaint_id:o})}),Object.entries(this.patient_behavior).forEach(([o,r],m)=>{!0===r&&s.push({behavioral_id:o})}),Object.entries(this.patient_neglect).forEach(([o,r],m)=>{!0===r&&i.push({neglect_id:o})}),this.patient_gbv.complaint=e,this.patient_gbv.behavior=s,this.patient_gbv.neglect=i,console.log(this.patient_gbv),this.http.post("gender-based-violence/patient-gbv",this.patient_gbv).subscribe({next:o=>{console.log(o),this.toastr.success("Successfully recorded!","GBV Referral"),this.closeModal()},error:o=>console.log(o)})}loadLibraries(){const e=this.http.get("libraries/gbv-neglect"),s=this.http.get("libraries/gbv-behavioral"),i=this.http.get("libraries/complaint",{params:{query_type:"gbv_complaints"}}),o=this.http.get("gender-based-violence/patient-gbv-user",{params:{per_page:"all"}});(0,rn.p)([e,s,i,o]).subscribe({next:([r,m,j,Si])=>{this.neglects=r.data,this.behavioral_changes=m.data,this.complaints=j.data,this.gbv_mdts=Si.data,this.loadDefaultComplaint(),this.show_form=!0},error:r=>console.log(r)})}loadDefaultComplaint(){this.gbv_complaints&&Object.entries(this.gbv_complaints).forEach(([e,s],i)=>{this.patient_complaints[s]=!0})}closeModal(){this.toggleModal.emit("gbv_referral")}constructor(e,s){this.http=e,this.toastr=s,this.getPatientTbHistory=new t.bkB,this.toggleModal=new t.bkB,this.switchPage=new t.bkB,this.faSave=v.hSh,this.faCircleNotch=d.s4k,this.is_saving=!1,this.show_form=!1,this.gbv_mdts=[],this.patient_complaints=[],this.patient_behavior=[],this.patient_neglect=[],this.patient_gbv={patient_id:"",gbv_date:"",gbv_complaint_remarks:"",gbv_behavioral_remarks:"",gbv_neglect_remarks:"",referral_facility_code:"",referral_reason:"For GBV Assessment",service_remarks:"",referral_remarks:"",referral_date:"",complaint:[],behavior:[],neglect:[]}}ngOnInit(){this.loadLibraries()}static{this.\u0275fac=function(s){return new(s||n)(t.rXU(u.k),t.rXU(f.tw))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-gbv-referral"]],inputs:{patient_id:"patient_id",max_date:"max_date",gbv_complaints:"gbv_complaints"},outputs:{getPatientTbHistory:"getPatientTbHistory",toggleModal:"toggleModal",switchPage:"switchPage"},standalone:!1,decls:15,vars:3,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-sky-500"],[1,"text-sm","font-bold","text-white"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],["class","text-left text-gray-500 m-5",4,"ngIf"],["class","grid grid-cols-1 mt-20",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-gray-400",3,"click"],["type","submit",1,"btn-save","px-10","disabled:bg-gray-300",3,"click","disabled"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"text-left","text-gray-500","m-5"],[1,"grid","grid-cols-4","gap-4"],[1,"col-span-2"],["for","gbv_date"],["type","date","name","gbv_date","id","gbv_date",1,"input",3,"ngModelChange","ngModel"],["for","case_number"],[1,"input",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-span-4"],[1,"col-span-4","grid","grid-cols-2","gap-4"],[4,"ngFor","ngForOf"],[1,"col-span-4","flex"],[1,"mt-2","pr-3"],["type","text","name","gbv_complaint_remarks","id","gbv_complaint_remarks",1,"input",3,"ngModelChange","ngModel"],["type","text","name","gbv_behavioral_remarks","id","gbv_behavioral_remarks",1,"input",3,"ngModelChange","ngModel"],["type","text","name","gbv_neglect_remarks","id","gbv_neglect_remarks",1,"input",3,"ngModelChange","ngModel"],[3,"value"],["type","checkbox",1,"input-checkbox",3,"ngModelChange","ngModel"],[1,"pl-3","py-0.5"],[1,"grid","grid-cols-1","mt-20"],[1,"flex","justify-center","text-blue-500"],["animation","spin",3,"icon"],[1,"flex","justify-center"]],template:function(s,i){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.EFF(5," Referral "),t.k0s()(),t.j41(6,"div",5),t.DNE(7,un,35,9,"div",6)(8,mn,5,1,"div",7),t.k0s(),t.j41(9,"div",8)(10,"button",9),t.bIt("click",function(){return i.closeModal()}),t.EFF(11,"Close"),t.k0s(),t.j41(12,"button",10),t.bIt("click",function(){return i.onSubmit()}),t.EFF(13," Refer "),t.k0s()()()()(),t.nrm(14,"div",11)),2&s&&(t.R7$(7),t.Y8G("ngIf",i.show_form),t.R7$(),t.Y8G("ngIf",!i.show_form),t.R7$(4),t.Y8G("disabled",i.is_saving||!i.patient_gbv.gbv_date||!i.patient_gbv.referral_facility_code))},dependencies:[c.Sq,c.bT,p.aY,l.xH,l.y7,l.me,l.Zm,l.wz,l.BC,l.vS],encapsulation:2})}}return n})();const hn=n=>({"rounded-b":n});function fn(n,a){if(1&n){const e=t.RV6();t.j41(0,"span",22)(1,"span")(2,"fa-icon",23),t.bIt("click",function(){const i=t.eBV(e);return t.Njj((0,i.clear)(i.item))}),t.k0s()(),t.j41(3,"span"),t.EFF(4),t.k0s()()}if(2&n){const e=a.item,s=t.XpG(2);t.R7$(2),t.Y8G("icon",s.faXmark),t.R7$(2),t.JRh(e.complaint_desc)}}function bn(n,a){if(1&n&&(t.j41(0,"div",24)(1,"div")(2,"h5",25),t.EFF(3),t.k0s()()()),2&n){const e=a.item,s=a.searchTerm;t.R7$(2),t.Y8G("ngOptionHighlight",s),t.R7$(),t.JRh(e.complaint_desc)}}function vn(n,a){if(1&n&&t.nrm(0,"fa-icon",29),2&n){const e=t.XpG(3);t.Y8G("icon",e.faSpinner)}}function xn(n,a){if(1&n&&t.nrm(0,"fa-icon",30),2&n){const e=t.XpG(3);t.Y8G("icon",e.faSave)}}function kn(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",26),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onSubmit())}),t.DNE(1,vn,1,1,"fa-icon",27)(2,xn,1,1,"fa-icon",28),t.EFF(3),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("disabled",e.is_saving),t.R7$(),t.Y8G("ngIf",e.is_saving),t.R7$(),t.Y8G("ngIf",!e.is_saving),t.R7$(),t.SpI(" ",e.is_saving?"Saving":"Save"," ")}}function yn(n,a){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"div",9)(2,"button",10),t.nrm(3,"fa-icon",11),t.k0s(),t.j41(4,"div",12)(5,"ng-select",13),t.mxI("ngModelChange",function(i){t.eBV(e);const o=t.XpG();return t.DH7(o.selectedComplaint,i)||(o.selectedComplaint=i),t.Njj(i)}),t.DNE(6,fn,5,2,"ng-template",14)(7,bn,4,2,"ng-template",15),t.k0s()()(),t.j41(8,"div",16)(9,"label",17),t.EFF(10,"Complaint notes"),t.k0s(),t.j41(11,"textarea",18),t.mxI("ngModelChange",function(i){t.eBV(e);const o=t.XpG();return t.DH7(o.consult_notes.complaint,i)||(o.consult_notes.complaint=i),t.Njj(i)}),t.k0s()(),t.j41(12,"div",16)(13,"label",17),t.EFF(14,"History notes"),t.k0s(),t.j41(15,"textarea",19),t.mxI("ngModelChange",function(i){t.eBV(e);const o=t.XpG();return t.DH7(o.consult_notes.history,i)||(o.consult_notes.history=i),t.Njj(i)}),t.k0s()(),t.j41(16,"div",20),t.DNE(17,kn,4,4,"button",21),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(3),t.Y8G("icon",e.faPlusSquare),t.R7$(2),t.Y8G("disabled",e.consult_done||!e.allowed_to_edit)("items",e.complaints)("multiple",!0)("closeOnSelect",!1)("hideSelected",!0)("clearable",!1),t.R50("ngModel",e.selectedComplaint),t.R7$(6),t.Y8G("disabled",e.consult_done||!e.allowed_to_edit),t.R50("ngModel",e.consult_notes.complaint),t.R7$(4),t.Y8G("disabled",e.consult_done||!e.allowed_to_edit),t.R50("ngModel",e.consult_notes.history),t.R7$(2),t.Y8G("ngIf",!e.consult_done&&e.allowed_to_edit)}}function Fn(n,a){if(1&n){const e=t.RV6();t.j41(0,"app-gbv-referral",31),t.bIt("toggleModal",function(i){t.eBV(e);const o=t.XpG();return t.Njj(o.toggleModal(i))}),t.k0s()}if(2&n){const e=t.XpG();t.Y8G("gbv_complaints",e.gbv_complaints)("patient_id",e.consult_details.patient.id)}}let Cn=(()=>{class n{onSubmit(){this.is_saving=!0,this.selectedComplaint&&Object.keys(this.selectedComplaint).length>0?this.http.post("consultation/complaint",{notes_id:this.consult_details.consult_notes.id,consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,complaints:this.selectedComplaint}).subscribe({next:s=>{this.saveNotes()},error:s=>console.log(s)}):this.saveNotes()}saveNotes(){this.consult_notes.complaint||this.consult_notes.history?this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,complaint:this.consult_notes.complaint,history:this.consult_notes.history}).subscribe({next:s=>{this.is_saving=!1,this.showToastr(),this.loadConsult.emit()},error:s=>console.log(s)}):(this.is_saving=!1,this.showToastr(),this.loadConsult.emit())}checkGbvCoplaint(){}showToastr(){this.toastr.success("Successfully updated!","Complaint")}loadLib(){this.http.get("libraries/complaint").subscribe(e=>{this.complaints=e.data,this.loadSelected(),this.show_form=!0})}loadSelected(){this.gbv_complaints=[],this.show_gbv_form=!1,this.possible_gbv_case=!1,this.have_open_gbv=!1;let e=[];this.consult_details.consult_notes&&this.consult_details.consult_notes.complaints&&Object.entries(this.consult_details.consult_notes.complaints).forEach(([s,i],o)=>{let r=i;e.push(r.complaint_id),1===r.lib_complaints.gbv_library_status&&(this.possible_gbv_case=!0,this.gbv_complaints.push(r.complaint_id)),Object.keys(this.consult_details.consult_notes.complaints).length-1===o&&this.possible_gbv_case&&this.getPatientGbv()}),this.selectedComplaint=e}getPatientGbv(){this.http.get("gender-based-violence/patient-gbv",{params:{patient_id:this.consult_details.patient.id}}).subscribe({next:s=>{s.data.length>0&&!s.data[0].outcome_date&&(this.have_open_gbv=!0),this.show_gbv_form=!0},error:s=>console.log(s)})}ngOnChanges(e){this.show_content=this.toggle_content,this.consult_details&&(this.complaints&&this.loadSelected(),this.consult_notes=this.consult_details.consult_notes,this.consult_done=this.consult_details.consult_done)}toggleModal(e){this.modals[e]=!this.modals[e],"gbv_referral"===e&&this.getPatientGbv()}constructor(e,s){this.http=e,this.toastr=s,this.loadConsult=new t.bkB,this.faPlusSquare=d.CHJ,this.faSave=d.hSh,this.faChevronCircleUp=d.AeV,this.faChevronCircleDown=d.DqM,this.faSpinner=d.z1G,this.faXmark=d.Jyw,this.selectedComplaint=[],this.consult_notes={complaint:null,history:null},this.modals=[],this.show_content=!0,this.is_saving=!1,this.consult_done=!1,this.show_form=!1,this.possible_gbv_case=!1,this.enable_edit=!1,this.show_gbv_form=!1,this.have_open_gbv=!1}ngOnInit(){this.loadLib()}static{this.\u0275fac=function(s){return new(s||n)(t.rXU(u.k),t.rXU(f.tw))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-complaint-history"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",have_complaint:"have_complaint",allowed_to_edit:"allowed_to_edit"},outputs:{loadConsult:"loadConsult"},standalone:!1,features:[t.OA$],decls:11,vars:6,consts:[[1,"grid","grid-cols-10","mb-5"],[1,"col-span-2","pt-2","pr-5","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[3,"gbv_complaints","patient_id","toggleModal",4,"ngIf"],[1,"flex","mb-2","p-4"],["type","submit",1,"inline-flex","p-1","items-center","text-gray-50","bg-sky-400","rounded-l-md","border","border-gray-300"],[1,"text-white","fa-xl",3,"icon"],[1,"chips-container"],["placeholder","search","bindLabel","complaint_desc","bindValue","complaint_id","placeholder","Select Complaint",1,"select-chips",3,"ngModelChange","disabled","items","multiple","closeOnSelect","hideSelected","clearable","ngModel"],["ng-label-tmp",""],["ng-option-tmp",""],[1,"grid","grid-cols-1","px-4","pb-4"],["for","complaint_notes",1,"font-semibold","pl-1"],["rows","3","id","complaint_notes","placeholder","Complaint Notes",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"ngModelChange","disabled","ngModel"],["rows","3","id","history_notes","placeholder","History of Current Illness",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"ngModelChange","disabled","ngModel"],[1,"flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[1,"px-2","py-1","rounded-md","text-sm"],[1,"text-xs","mr-1","hover:text-slate-100","hover:cursor-pointer",3,"click","icon"],[1,"grid","grid-flow-col","auto-cols-max"],[3,"ngOptionHighlight"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"click","disabled"],["class","mr-2","animation","spin",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"],[3,"toggleModal","gbv_complaints","patient_id"]],template:function(s,i){1&s&&(t.j41(0,"div",0)(1,"div",1),t.EFF(2," Chief Complaint and History of Current Illness "),t.k0s(),t.j41(3,"div",2)(4,"div",3)(5,"span",4),t.EFF(6," Complaints "),t.j41(7,"button",5),t.bIt("click",function(){return i.show_content=!i.show_content}),t.nrm(8,"fa-icon",6),t.k0s()(),t.DNE(9,yn,18,13,"div",7),t.k0s()()(),t.DNE(10,Fn,1,2,"app-gbv-referral",8)),2&s&&(t.R7$(5),t.Y8G("ngClass",t.eq3(4,hn,!i.show_content)),t.R7$(3),t.Y8G("icon",i.show_content?i.faChevronCircleUp:i.faChevronCircleDown),t.R7$(),t.Y8G("ngIf",i.show_content&&i.show_form),t.R7$(),t.Y8G("ngIf",i.modals.gbv_referral))},dependencies:[c.YU,c.bT,p.aY,k.vr,k.Uq,k.ZZ,l.me,l.BC,l.vS,gn],encapsulation:2})}}return n})();const jn=n=>({"rounded-b":n});function wn(n,a){if(1&n&&(t.j41(0,"ul",29)(1,"li"),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(null==e.lib_complaints?null:e.lib_complaints.complaint_desc)}}function Rn(n,a){if(1&n&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(),t.SpI(" ",e.diagnosis.class_name," ")}}function Gn(n,a){if(1&n&&(t.j41(0,"div",30)(1,"span",31),t.EFF(2,"remarks:"),t.k0s(),t.EFF(3),t.k0s()),2&n){let e;const s=t.XpG().$implicit;t.R7$(3),t.SpI(" ",null!==(e=s.consult_notes.idx_remarks)&&void 0!==e?e:"-"," ")}}function En(n,a){if(1&n&&(t.j41(0,"li")(1,"span",32),t.EFF(2),t.k0s(),t.EFF(3),t.k0s()),2&n){const e=a.$implicit;t.R7$(2),t.SpI("",e.lib_icd10.icd10_code,":"),t.R7$(),t.SpI(" ",e.lib_icd10.icd10_desc," ")}}function In(n,a){if(1&n&&(t.j41(0,"div",30)(1,"span",31),t.EFF(2,"remarks:"),t.k0s(),t.EFF(3),t.k0s()),2&n){let e;const s=t.XpG().$implicit;t.R7$(3),t.SpI(" ",null!==(e=s.consult_notes.fdx_remarks)&&void 0!==e?e:"-"," ")}}function $n(n,a){if(1&n&&(t.j41(0,"li")(1,"span",32),t.EFF(2),t.nrm(3,"br"),t.EFF(4),t.nrm(5,"br"),t.EFF(6),t.nrm(7,"br"),t.EFF(8),t.nrm(9,"br"),t.EFF(10),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.SpI(" ",e.konsulta_medicine?e.konsulta_medicine.generic.desc:e.medicine?e.medicine.drug_name:e.added_medicine," "),t.R7$(2),t.E5c(" ",e.dosage_quantity," ",e.dosage_uom?e.dosage_uom.desc:""," (",e.dosage_uom?e.dosage_uom.code:"",") "),t.R7$(2),t.SpI(" ",e.dose_regimen.desc," "),t.R7$(2),t.Lme(" ",e.duration_intake," ",e.duration_frequency.desc," "),t.R7$(2),t.E5c(" ",e.quantity," ",e.quantity_preparation.desc,"",e.quantity>1?"s":""," ")}}function Tn(n,a){if(1&n&&(t.j41(0,"tr",13)(1,"td",14)(2,"div",15)(3,"span",16),t.EFF(4),t.nI1(5,"date"),t.k0s(),t.j41(6,"span",17),t.EFF(7),t.nI1(8,"date"),t.k0s()()(),t.j41(9,"td",18)(10,"div",15)(11,"span",19)(12,"span",20),t.EFF(13,"Complaint notes:"),t.k0s(),t.EFF(14),t.k0s(),t.DNE(15,wn,3,1,"ul",21),t.j41(16,"span",22)(17,"span",20),t.EFF(18,"History notes:"),t.k0s(),t.EFF(19),t.k0s()(),t.j41(20,"div",23)(21,"span",20),t.EFF(22,"Initial Diagnosis:"),t.k0s(),t.j41(23,"ul",24),t.DNE(24,Rn,2,1,"li",25),t.k0s(),t.DNE(25,Gn,4,1,"div",26),t.k0s(),t.j41(26,"div",27)(27,"span",28),t.EFF(28,"Final Diagnosis:"),t.k0s(),t.j41(29,"ul",24),t.DNE(30,En,4,2,"li",25),t.k0s(),t.DNE(31,In,4,1,"div",26),t.k0s(),t.j41(32,"div",27)(33,"span",19)(34,"span",20),t.EFF(35,"Prescription:"),t.k0s(),t.j41(36,"ul",24),t.DNE(37,$n,11,10,"li",25),t.k0s()()(),t.j41(38,"div",27)(39,"span",19)(40,"span",20),t.EFF(41,"Treatment Plan:"),t.k0s(),t.EFF(42),t.k0s()()()()),2&n){let e,s,i;const o=a.$implicit;t.R7$(4),t.JRh(t.brH(5,11,o.consult_date,"MM/dd/yyyy","Asia/Manila")),t.R7$(3),t.JRh(t.i5U(8,15,o.consult_date,"hh:mm:ss a")),t.R7$(7),t.SpI(" ",null!==(e=o.consult_notes.complaint)&&void 0!==e?e:"-"," "),t.R7$(),t.Y8G("ngForOf",o.consult_notes.complaints),t.R7$(4),t.SpI(" ",null!==(s=o.consult_notes.history)&&void 0!==s?s:"-"," "),t.R7$(5),t.Y8G("ngForOf",o.consult_notes.initialdx),t.R7$(),t.Y8G("ngIf",o.consult_notes.idx_remarks),t.R7$(5),t.Y8G("ngForOf",o.consult_notes.finaldx),t.R7$(),t.Y8G("ngIf",o.consult_notes.fdx_remarks),t.R7$(6),t.Y8G("ngForOf",o.prescriptions),t.R7$(5),t.SpI(" ",null!==(i=o.consult_notes.plan)&&void 0!==i?i:"-"," ")}}function Mn(n,a){if(1&n&&(t.j41(0,"table",10)(1,"thead")(2,"tr",11)(3,"th"),t.EFF(4,"Date"),t.k0s(),t.j41(5,"th"),t.EFF(6,"Details"),t.k0s()()(),t.j41(7,"tbody"),t.DNE(8,Tn,43,18,"tr",12),t.k0s()()),2&n){const e=t.XpG();t.R7$(8),t.Y8G("ngForOf",e.visit_list)}}function Yn(n,a){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"nav",37)(2,"button",38),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.loadPreviousVisit(1))}),t.nrm(3,"fa-icon",39),t.k0s(),t.j41(4,"button",40),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.loadPreviousVisit(i.current_page-1))}),t.nrm(5,"fa-icon",39),t.EFF(6,"Previous "),t.k0s(),t.j41(7,"button",40),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.loadPreviousVisit(i.current_page+1))}),t.EFF(8," Next"),t.nrm(9,"fa-icon",41),t.k0s(),t.j41(10,"button",42),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.loadPreviousVisit(i.last_page))}),t.nrm(11,"fa-icon",41),t.k0s()()()}if(2&n){const e=t.XpG(2);t.R7$(2),t.Y8G("disabled",1===e.current_page),t.R7$(),t.Y8G("icon",e.faAnglesLeft),t.R7$(),t.Y8G("disabled",1===e.current_page),t.R7$(),t.Y8G("icon",e.faChevronLeft),t.R7$(2),t.Y8G("disabled",e.current_page===e.last_page),t.R7$(2),t.Y8G("icon",e.faChevronRight),t.R7$(),t.Y8G("disabled",e.current_page===e.last_page),t.R7$(),t.Y8G("icon",e.faAnglesRight)}}function Dn(n,a){if(1&n&&(t.j41(0,"div")(1,"div",33)(2,"div",34)(3,"div")(4,"p",35),t.EFF(5," Showing "),t.j41(6,"span",36),t.EFF(7),t.k0s(),t.EFF(8," to "),t.j41(9,"span",36),t.EFF(10),t.k0s(),t.EFF(11," of "),t.j41(12,"span",36),t.EFF(13),t.k0s(),t.EFF(14," results "),t.k0s()(),t.DNE(15,Yn,12,8,"div",9),t.k0s()()()),2&n){const e=t.XpG();t.R7$(7),t.JRh(e.from),t.R7$(3),t.JRh(e.to),t.R7$(3),t.JRh(e.total),t.R7$(2),t.Y8G("ngIf",e.total>=6)}}let Nn=(()=>{class n{loadPreviousVisit(e){this.http.get("consultation/records",{params:{patient_id:this.patient_id,per_page:this.per_page,sort:"-consult_date",pt_group:"cn",page:e,not_consult_id:this.consult_id}}).subscribe({next:i=>{this.visit_list=i.data,this.current_page=i.meta.current_page,this.last_page=i.meta.last_page,this.from=i.meta.from,this.to=i.meta.to,this.total=i.meta.total},error:i=>console.log(i)})}ngOnChanges(e){this.show_content=this.toggle_content}constructor(e,s){this.route=e,this.http=s,this.show_content=!1,this.faChevronCircleUp=d.AeV,this.faChevronCircleDown=d.DqM,this.faChevronLeft=d.Wzs,this.faChevronRight=d.XkK,this.faAnglesLeft=d.rNr,this.faAnglesRight=d.up_,this.per_page=5}ngOnInit(){this.patient_id=this.route.snapshot.paramMap.get("id"),this.consult_id=this.route.snapshot.paramMap.get("consult_id"),this.loadPreviousVisit(1)}static{this.\u0275fac=function(s){return new(s||n)(t.rXU(b.nX),t.rXU(u.k))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-consult-history"]],inputs:{toggle_content:"toggle_content",allowed_to_edit:"allowed_to_edit"},standalone:!1,features:[t.OA$],decls:12,vars:6,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-green-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],["class","w-full table-auto",4,"ngIf"],[4,"ngIf"],[1,"w-full","table-auto"],[1,"border-b","border-solid","border-gray-200"],["class","text-left mt-3 align-top border-t border-slate-200 text-sm",4,"ngFor","ngForOf"],[1,"text-left","mt-3","align-top","border-t","border-slate-200","text-sm"],[1,"p-3","w-2/12"],[1,"grid","grid-cols-1"],[1,"font-semibold","w-full"],[1,"text-sm","w-full"],[1,"p-3","w-7/12"],[1,"w-full","mb-3"],[1,"font-semibold"],["class","list-disc last:mb-3 ml-10",4,"ngFor","ngForOf"],[1,"w-full","my-2","py-2"],[1,"grid","grid-cols-1","text-left"],[1,"list-disc","ml-10"],[4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],[1,"grid","grid-cols-1","text-left","mt-2","pt-2"],[1,"font-semibold","text-blue-500"],[1,"list-disc","last:mb-3","ml-10"],[1,"mt-2"],[1,"text-sm","italic"],[1,"font-semibold","text-sm"],[1,"bg-white","px-4","py-4","flex","items-center","justify-between","border-t","border-gray-200","sm:px-6"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"text-sm","text-gray-700"],[1,"font-medium"],["aria-label","Pagination",1,"relative","z-0","inline-flex","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","disabled"],[1,"block","h-15","w-15","text-gray-500","pr-1",3,"icon"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","bg-white","text-sm","font-medium","text-gray-700","hover:bg-gray-50",3,"click","disabled"],[1,"h-5","w-5","text-gray-500",3,"icon"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","disabled"]],template:function(s,i){1&s&&(t.nrm(0,"hr",0),t.j41(1,"div",1)(2,"div",2),t.EFF(3," Diagnosis History "),t.k0s(),t.j41(4,"div",3)(5,"div",4)(6,"span",5),t.EFF(7," Previous History "),t.j41(8,"button",6),t.bIt("click",function(){return i.show_content=!i.show_content}),t.nrm(9,"fa-icon",7),t.k0s()(),t.DNE(10,Mn,9,1,"table",8)(11,Dn,16,4,"div",9),t.k0s()()()),2&s&&(t.R7$(6),t.Y8G("ngClass",t.eq3(4,jn,!i.show_content)),t.R7$(3),t.Y8G("icon",i.show_content?i.faChevronCircleUp:i.faChevronCircleDown),t.R7$(),t.Y8G("ngIf",i.show_content),t.R7$(),t.Y8G("ngIf",i.total>=1))},dependencies:[c.YU,c.Sq,c.bT,p.aY,c.vh],encapsulation:2})}}return n})(),Sn=(()=>{class n{constructor(){}ngOnInit(){}static{this.\u0275fac=function(s){return new(s||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-consult-summary"]],standalone:!1,decls:34,vars:0,consts:[[1,"flex","justify-center"],[1,"w-4/6"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between"],[1,"grid","grid-cols-5","m-5"],[1,"col-span-1","font-semibold"],[1,"col-span-4","ml-5"],[1,"col-span-1","font-semibold","mt-5"],[1,"col-span-4","mt-5","ml-5"]],template:function(s,i){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),t.EFF(4," Consultation Summary (Date here) "),t.k0s(),t.j41(5,"div",4)(6,"div",5),t.EFF(7," Chief Complaint: "),t.k0s(),t.j41(8,"div",6),t.EFF(9," test "),t.k0s(),t.j41(10,"div",7),t.EFF(11," Complaint Notes: "),t.k0s(),t.j41(12,"div",8),t.EFF(13," test "),t.k0s(),t.j41(14,"div",7),t.EFF(15," History of Current Illness "),t.k0s(),t.j41(16,"div",8),t.EFF(17," test "),t.k0s(),t.j41(18,"div",7),t.EFF(19," Physical Exam "),t.k0s(),t.j41(20,"div",8),t.EFF(21," test "),t.k0s(),t.j41(22,"div",7),t.EFF(23," Initial Diagnosis "),t.k0s(),t.j41(24,"div",8),t.EFF(25," test "),t.k0s(),t.j41(26,"div",7),t.EFF(27," Final Diagnosis "),t.k0s(),t.j41(28,"div",8),t.EFF(29," test "),t.k0s(),t.j41(30,"div",7),t.EFF(31," Prescription "),t.k0s(),t.j41(32,"div",8),t.EFF(33," test "),t.k0s()()()()())},encapsulation:2})}}return n})();const Xn=n=>({"rounded-b":n});function Pn(n,a){if(1&n&&(t.j41(0,"option",17),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.code),t.R7$(),t.JRh(e.desc)}}function Vn(n,a){if(1&n&&t.nrm(0,"fa-icon",21),2&n){const e=t.XpG(3);t.Y8G("icon",e.faSpinner)}}function Bn(n,a){if(1&n&&t.nrm(0,"fa-icon",22),2&n){const e=t.XpG(3);t.Y8G("icon",e.faSave)}}function qn(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",18),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onSubmit())}),t.DNE(1,Vn,1,1,"fa-icon",19)(2,Bn,1,1,"fa-icon",20),t.EFF(3),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("disabled",e.is_saving),t.R7$(),t.Y8G("ngIf",e.is_saving),t.R7$(),t.Y8G("ngIf",!e.is_saving),t.R7$(),t.SpI(" ",e.is_saving?"Saving":"Save"," ")}}function An(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",8)(1,"div",9)(2,"div",10)(3,"label",11),t.EFF(4,"General Survey"),t.k0s(),t.j41(5,"select",12),t.mxI("ngModelChange",function(i){t.eBV(e);const o=t.XpG();return t.DH7(o.general_survey_code,i)||(o.general_survey_code=i),t.Njj(i)}),t.DNE(6,Pn,2,2,"option",13),t.k0s()(),t.j41(7,"div",10)(8,"label",11),t.EFF(9,"Remarks"),t.k0s(),t.j41(10,"input",14),t.mxI("ngModelChange",function(i){t.eBV(e);const o=t.XpG();return t.DH7(o.general_survey_remarks,i)||(o.general_survey_remarks=i),t.Njj(i)}),t.k0s()()(),t.j41(11,"div",15),t.DNE(12,qn,4,4,"button",16),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(5),t.Y8G("disabled",e.consult_done||!e.allowed_to_edit),t.R50("ngModel",e.general_survey_code),t.R7$(),t.Y8G("ngForOf",e.survey_list),t.R7$(4),t.Y8G("disabled",e.consult_done||!e.allowed_to_edit),t.R50("ngModel",e.general_survey_remarks),t.R7$(2),t.Y8G("ngIf",!e.consult_done&&e.allowed_to_edit)}}let On=(()=>{class n{onSubmit(){this.general_survey_code?this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,general_survey_code:this.general_survey_code,general_survey_remarks:this.general_survey_remarks}).subscribe({next:s=>{this.toastr.success("Successfully recorded!","General Survey")}}):this.toastr.error("Missing general survey!")}loadLib(){this.http.get("libraries/general-survey").subscribe(e=>{this.survey_list=e.data})}constructor(e,s){this.http=e,this.toastr=s,this.loadConsult=new t.bkB,this.faSave=d.hSh,this.faChevronCircleUp=d.AeV,this.faChevronCircleDown=d.DqM,this.faSpinner=d.z1G,this.show_content=!0,this.is_saving=!1,this.consult_done=!1}ngOnInit(){this.loadLib()}ngOnChanges(e){this.show_content=this.toggle_content,this.consult_details&&(this.consult_notes=this.consult_details.consult_notes,this.consult_done=this.consult_details.consult_done,this.general_survey_code=this.consult_notes.general_survey_code,this.general_survey_remarks=this.consult_notes.general_survey_remarks)}static{this.\u0275fac=function(s){return new(s||n)(t.rXU(u.k),t.rXU(f.tw))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-general-survey"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",allowed_to_edit:"allowed_to_edit"},outputs:{loadConsult:"loadConsult"},standalone:!1,features:[t.OA$],decls:10,vars:5,consts:[[1,"grid","grid-cols-10","my-5","pt-5","border-t","border-slate-200"],[1,"col-span-2","pt-2","pr-5","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-blue-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],["class","grid grid-cols-1",4,"ngIf"],[1,"grid","grid-cols-1"],[1,"col-span-1","flex","mt-3"],[1,"w-1/2","grid","grid-cols-1","px-4","pb-4"],["for","complaint_notes",1,"font-semibold","pl-1"],["rows","3","id","general_survey_code",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"ngModelChange","disabled","ngModel"],[3,"value",4,"ngFor","ngForOf"],["rows","3","id","general_survey_remarks","type","text","placeholder","General Survey Remarks",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"ngModelChange","disabled","ngModel"],[1,"col-span-1","flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[3,"value"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"click","disabled"],["class","mr-2","animation","spin",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(s,i){1&s&&(t.j41(0,"div",0)(1,"div",1),t.EFF(2," General Survey "),t.k0s(),t.j41(3,"div",2)(4,"div",3)(5,"span",4),t.EFF(6," General Survey "),t.j41(7,"button",5),t.bIt("click",function(){return i.show_content=!i.show_content}),t.nrm(8,"fa-icon",6),t.k0s()(),t.DNE(9,An,13,6,"div",7),t.k0s()()()),2&s&&(t.R7$(5),t.Y8G("ngClass",t.eq3(3,Xn,!i.show_content)),t.R7$(3),t.Y8G("icon",i.show_content?i.faChevronCircleUp:i.faChevronCircleDown),t.R7$(),t.Y8G("ngIf",i.show_content))},dependencies:[c.YU,c.Sq,c.bT,p.aY,l.xH,l.y7,l.me,l.wz,l.BC,l.vS],encapsulation:2})}}return n})();const Un=n=>({"rounded-b":n});function Ln(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",12)(1,"div",13)(2,"input",14),t.mxI("ngModelChange",function(i){const o=t.eBV(e).$implicit,r=t.XpG(2);return t.DH7(r.management_list.management_code[o.code],i)||(r.management_list.management_code[o.code]=i),t.Njj(i)}),t.k0s(),t.j41(3,"label",15),t.EFF(4),t.k0s()(),t.j41(5,"div",16)(6,"input",17),t.mxI("ngModelChange",function(i){const o=t.eBV(e).$implicit,r=t.XpG(2);return t.DH7(r.management_list.remarks[o.code],i)||(r.management_list.remarks[o.code]=i),t.Njj(i)}),t.k0s()()()}if(2&n){const e=a.$implicit,s=t.XpG(2);t.R7$(2),t.x72("id","management_list",e.code,""),t.Y8G("disabled",s.consult_done||!s.allowed_to_edit),t.R50("ngModel",s.management_list.management_code[e.code]),t.R7$(),t.x72("for","management_list",e.code,""),t.R7$(),t.JRh(e.desc),t.R7$(2),t.Y8G("disabled",!s.management_list.management_code[e.code]),t.R50("ngModel",s.management_list.remarks[e.code])}}function Hn(n,a){if(1&n&&t.nrm(0,"fa-icon",21),2&n){const e=t.XpG(3);t.Y8G("icon",e.faSpinner)}}function Jn(n,a){if(1&n&&t.nrm(0,"fa-icon",22),2&n){const e=t.XpG(3);t.Y8G("icon",e.faSave)}}function zn(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",18),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onSubmit())}),t.DNE(1,Hn,1,1,"fa-icon",19)(2,Jn,1,1,"fa-icon",20),t.EFF(3),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("disabled",e.is_saving),t.R7$(),t.Y8G("ngIf",e.is_saving),t.R7$(),t.Y8G("ngIf",!e.is_saving),t.R7$(),t.SpI(" ",e.is_saving?"Saving":"Save"," ")}}function Kn(n,a){if(1&n&&(t.j41(0,"div"),t.DNE(1,Ln,7,9,"div",9),t.j41(2,"div",10),t.DNE(3,zn,4,4,"button",11),t.k0s()()),2&n){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.management_codes),t.R7$(2),t.Y8G("ngIf",!e.consult_done&&e.allowed_to_edit)}}let Wn=(()=>{class n{onSubmit(){this.is_saving=!0;var e=[];Object.entries(this.management_list.management_code).forEach(([i,o],r)=>{!0===o&&e.push({management_code:i,remarks:this.management_list.remarks[i]?this.management_list.remarks[i]:null})}),e.length>0&&this.http.post("consultation/management",{notes_id:this.consult_notes.id,patient_id:this.consult_details.patient.id,management:e}).subscribe({next:i=>{this.is_saving=!1,this.toastr.success("Successfully recorded!","Management record")},error:i=>console.log(i)})}loadLibraries(){this.http.get("libraries/management").subscribe({next:e=>{this.management_codes=e.data},error:e=>console.log(e)})}patchData(){this.consult_management&&Object.entries(this.consult_management).forEach(([e,s],i)=>{let o=s;this.management_list.management_code[o.management_code]=!0,o.remarks&&(this.management_list.remarks[o.management_code]=o.remarks)})}ngOnChanges(e){this.show_content=this.toggle_content,this.consult_details&&(this.consult_notes=this.consult_details.consult_notes,this.consult_done=this.consult_details.consult_done,this.consult_management=this.consult_details.management,this.patchData())}constructor(e,s){this.http=e,this.toastr=s,this.faChevronCircleUp=d.AeV,this.faChevronCircleDown=d.DqM,this.faSpinner=d.z1G,this.faSave=d.hSh,this.show_content=!1,this.is_saving=!1,this.management_list={management_code:[],remarks:[]}}ngOnInit(){this.loadLibraries()}static{this.\u0275fac=function(s){return new(s||n)(t.rXU(u.k),t.rXU(f.tw))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-management"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",allowed_to_edit:"allowed_to_edit"},standalone:!1,features:[t.OA$],decls:11,vars:5,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],["class","flex item-start flex-wrap pt-3 px-5 first:mt-5 last:mb-10",4,"ngFor","ngForOf"],[1,"flex","text-right","mt-5"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[1,"flex","item-start","flex-wrap","pt-3","px-5","first:mt-5","last:mb-10"],[1,"w-4/12","flex","mb-2"],["type","checkbox",1,"disabled:bg-gray-300","flex-none","mt-2","mr-2","border","border-gray-300","sm:text-sm","rounded-md","focus:ring-blue-500","focus:border-blue-500","block","p-2.5",3,"ngModelChange","disabled","ngModel"],[1,"flex-1","mt-2","text-gray-800"],[1,"w-8/12"],["type","text",1,"input","disabled:bg-gray-300",3,"ngModelChange","disabled","ngModel"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"click","disabled"],["class","mr-2","animation","spin",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(s,i){1&s&&(t.nrm(0,"hr",0),t.j41(1,"div",1)(2,"div",2),t.EFF(3," Management "),t.k0s(),t.j41(4,"div",3)(5,"div",4)(6,"span",5),t.EFF(7," Management/Counselling "),t.j41(8,"button",6),t.bIt("click",function(){return i.show_content=!i.show_content}),t.nrm(9,"fa-icon",7),t.k0s()(),t.DNE(10,Kn,4,2,"div",8),t.k0s()()()),2&s&&(t.R7$(6),t.Y8G("ngClass",t.eq3(3,Un,!i.show_content)),t.R7$(3),t.Y8G("icon",i.show_content?i.faChevronCircleUp:i.faChevronCircleDown),t.R7$(),t.Y8G("ngIf",i.show_content))},dependencies:[c.YU,c.Sq,c.bT,p.aY,l.me,l.Zm,l.BC,l.vS],encapsulation:2})}}return n})();const Qn=n=>({"bg-red-100 text-red-900":n});function Zn(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",20)(1,"input",26),t.mxI("ngModelChange",function(i){t.eBV(e);const o=t.XpG(2);return t.DH7(o.is_walk_in,i)||(o.is_walk_in=i),t.Njj(i)}),t.k0s(),t.j41(2,"label",27),t.EFF(3,"Check if patient is Walk-in"),t.k0s()()}if(2&n){const e=t.XpG(2);t.R7$(),t.Y8G("disabled",e.is_checking_atc),t.R50("ngModel",e.is_walk_in)}}function ti(n,a){if(1&n&&t.nrm(0,"fa-icon",38),2&n){const e=t.XpG(3);t.Y8G("icon",e.faCheck)}}function ei(n,a){if(1&n&&t.nrm(0,"fa-icon",39),2&n){const e=t.XpG(3);t.Y8G("icon",e.faSpinner)}}function ni(n,a){1&n&&(t.j41(0,"div",40),t.EFF(1," Please check if the ATC is valid before you proceed. Invalid ATC will not be saved. "),t.k0s())}function ii(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",28)(1,"div",29)(2,"label",30),t.EFF(3,"Konsulta ATC"),t.k0s(),t.nrm(4,"br"),t.j41(5,"input",31),t.mxI("ngModelChange",function(i){t.eBV(e);const o=t.XpG(2);return t.DH7(o.pATC,i)||(o.pATC=i),t.Njj(i)}),t.k0s(),t.j41(6,"input",32),t.nI1(7,"date"),t.mxI("ngModelChange",function(i){t.eBV(e);const o=t.XpG(2);return t.DH7(o.pATC_date,i)||(o.pATC_date=i),t.Njj(i)}),t.k0s()(),t.j41(8,"div",33)(9,"button",34),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.isATCValid())}),t.DNE(10,ti,1,1,"fa-icon",35)(11,ei,1,1,"fa-icon",36),t.EFF(12," Check ATC "),t.k0s()(),t.DNE(13,ni,2,0,"div",37),t.k0s()}if(2&n){const e=t.XpG(2);t.R7$(5),t.R50("ngModel",e.pATC),t.R7$(),t.FS9("max",t.i5U(7,7,e.date,"yyyy-MM-dd HH:mm:ss")),t.R50("ngModel",e.pATC_date),t.R7$(3),t.Y8G("disabled",!e.pATC||!e.pATC_date||e.is_saving||e.is_checking_atc),t.R7$(),t.Y8G("ngIf",!e.is_checking_atc),t.R7$(),t.Y8G("ngIf",e.is_checking_atc),t.R7$(2),t.Y8G("ngIf",e.pATC&&!e.is_atc_valid)}}function si(n,a){if(1&n&&(t.j41(0,"div",41),t.nrm(1,"fa-icon",42),t.EFF(2),t.k0s()),2&n){const e=t.XpG(2);t.Y8G("ngClass",t.eq3(3,Qn,!e.is_atc_valid)),t.R7$(),t.Y8G("icon",e.faCircleInfo),t.R7$(),t.SpI(" ",e.is_atc_valid?"ATC is valid":"ATC is not valid"," ")}}function oi(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",19)(1,"div",20)(2,"input",21),t.mxI("ngModelChange",function(i){t.eBV(e);const o=t.XpG();return t.DH7(o.is_konsulta,i)||(o.is_konsulta=i),t.Njj(i)}),t.k0s(),t.j41(3,"label",22),t.EFF(4,"Check if this visit is for Konsulta"),t.k0s()(),t.DNE(5,Zn,4,2,"div",23)(6,ii,14,10,"div",24)(7,si,3,5,"div",25),t.k0s()}if(2&n){const e=t.XpG();t.R7$(2),t.Y8G("disabled",e.is_checking_atc),t.R50("ngModel",e.is_konsulta),t.R7$(3),t.Y8G("ngIf",e.is_konsulta&&"cn"===e.consult_details.pt_group),t.R7$(),t.Y8G("ngIf",!e.is_walk_in),t.R7$(),t.Y8G("ngIf",void 0!==e.is_atc_valid)}}function ai(n,a){1&n&&(t.j41(0,"div",43)(1,"div",44),t.EFF(2," ATC checking is not available. Philhealth pin not found. "),t.k0s()())}let li=(()=>{class n{isATCValid(){this.is_checking_atc=!0;let e={pPIN:this.philhealth_details.philhealth_id,pATC:this.pATC,pEffectivityDate:(0,c.Yq)(this.pATC_date,"MM/dd/yyyy","en","Asia/Manila")};this.http.get("konsulta/check-atc",{params:e}).subscribe({next:s=>{this.is_checking_atc=!1,this.is_atc_valid="YES"===s.return},error:s=>console.log(s)})}getPhilhealth(){this.http.get("patient-philhealth/philhealth",{params:{"filter[patient_id]":this.consult_details.patient.id,per_page:"1",sort:"-enlistment_date"}}).subscribe({next:e=>{console.log(e),this.philhealth_details=e.data[0]},error:e=>console.log(e)})}onSubmit(){this.is_saving=!0;let e={patient_id:this.consult_details.patient.id,user_id:this.consult_details.user_id,consult_date:this.consult_date+" "+this.consult_time,consult_done:this.consult_details.consult_done,pt_group:this.consult_details.pt_group,authorization_transaction_code:this.is_atc_valid?this.is_walk_in?"WALKEDIN":this.pATC||""!==this.pATC?this.pATC:"WALKEDIN":"WALKEDIN",walkedin_status:!this.is_atc_valid,is_konsulta:this.is_konsulta};console.log(e.consult_date),this.http.update("consultation/records/",this.consult_details.id,e).subscribe({next:s=>{this.toastr.success("Successfully updated!","Consultation"),this.closeModal()},error:s=>console.log(s.error.message)})}closeModal(){this.is_saving=!1,this.toggleModal.emit("update_date")}constructor(e,s,i,o){this.router=e,this.http=s,this.toastr=i,this.dateHelper=o,this.toggleModal=new t.bkB,this.faCircleInfo=d.mEO,this.faCheck=d.e68,this.faSpinner=d.z1G,this.is_saving=!1,this.show_form=!1,this.is_checking_atc=!1,this.selected_module="",this.is_konsulta=!1}ngOnInit(){this.getPhilhealth(),this.max_date=this.dateHelper.dateFormat(new Date),this.consult_date=this.dateHelper.dateFormat(this.consult_details.consult_date),this.consult_time=this.dateHelper.timeFormat(this.consult_details.consult_date),this.is_walk_in="WALKEDIN"===this.consult_details.authorization_transaction_code,this.pATC="WALKEDIN"===this.consult_details.authorization_transaction_code?null:this.consult_details.authorization_transaction_code,this.is_konsulta=this.consult_details.is_konsulta,console.log(this.consult_time)}static{this.\u0275fac=function(s){return new(s||n)(t.rXU(b.Ix),t.rXU(u.k),t.rXU(f.tw),t.rXU(R.F))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-update-date"]],inputs:{patient_info:"patient_info",patient_age:"patient_age",consult_details:"consult_details"},outputs:{toggleModal:"toggleModal"},standalone:!1,decls:24,vars:7,consts:[[1,"overflow-x-hidden","overflow-y-auto","fixed","inset-0","z-50","outline-none","focus:outline-none","justify-center","items-center","flex"],["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"overflow-y-auto","overflow-x-hidden","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"grid","grid-cols-1","item-start","flex-wrap","pb-5"],[1,"flex","flex-col"],[1,"flex","justify-start","pb-3","w-full","ml-10"],["for","consult_date",1,"input-label","pr-5","inline-block","align-middle","pt-3","w-1/4"],["type","date","name","consult_date","id","consult_date","placeholder","mm/dd/yyyy",1,"input","w-52",3,"ngModelChange","max","ngModel"],["type","time","name","consult_time","id","consult_time","placeholder","hh:mm AM/PM",1,"input","w-52",3,"ngModelChange","ngModel"],["class","border border-slate-200 rounded-md mx-10 shadow-md",4,"ngIf"],["class","border border-yellow-400 text-yellow-700 rounded-md mx-10 bg-yellow-100",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"btn-save","px-5","bg-gray-400",3,"click","disabled"],[1,"btn-save",3,"click","disabled"],[1,"opacity-25","fixed","inset-0","z-40","bg-black"],[1,"border","border-slate-200","rounded-md","mx-10","shadow-md"],[1,"flex","justify-start","w-full","ml-5","my-3"],["id","is_konsulta","type","checkbox",1,"border","border-gray-400","rounded-md","h-5","w-5","mr-2","disabled:bg-gray-300",3,"ngModelChange","disabled","ngModel"],["for","is_konsulta"],["class","flex justify-start w-full ml-5 my-3",4,"ngIf"],["class","grid grid-cols-1 w-full mb-3",4,"ngIf"],["class","flex mx-16 my-3 p-2 rounded-md bg-green-100 text-green-900 shadow-sm",3,"ngClass",4,"ngIf"],["id","is_walk_in","type","checkbox",1,"border","border-gray-400","rounded-md","h-5","w-5","mr-2","disabled:bg-gray-300",3,"ngModelChange","disabled","ngModel"],["for","is_walk_in"],[1,"grid","grid-cols-1","w-full","mb-3"],[1,"flex","justify-center","mx-5","mb-3"],["for","pATC",1,"input-label","pr-5","inline-block","align-middle","pt-3","w-1/4"],["type","text","name","pATC","id","pATC","placeholder","Patient ATC",1,"input","w-52",3,"ngModelChange","ngModel"],["type","date","name","pATC_date","id","pATC_date","placeholder","mm/dd/yyyy",1,"input","w-52",3,"ngModelChange","max","ngModel"],[1,"align-middle","text-center"],["type","button",1,"btn-save","w-44",3,"click","disabled"],["class","py-1 px-2",3,"icon",4,"ngIf"],["class","py-1 px-2","animation","spin",3,"icon",4,"ngIf"],["class","flex-1 flex text-xs text-red-500 italic text-center",4,"ngIf"],[1,"py-1","px-2",3,"icon"],["animation","spin",1,"py-1","px-2",3,"icon"],[1,"flex-1","flex","text-xs","text-red-500","italic","text-center"],[1,"flex","mx-16","my-3","p-2","rounded-md","bg-green-100","text-green-900","shadow-sm",3,"ngClass"],["size","lg",1,"flex-none","my-0","m-2",3,"icon"],[1,"border","border-yellow-400","text-yellow-700","rounded-md","mx-10","bg-yellow-100"],[1,"p-3"]],template:function(s,i){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),t.EFF(6," Update Consultation Date and ATC "),t.k0s()(),t.j41(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"label",10),t.EFF(12,"Consultation Date"),t.k0s(),t.nrm(13,"br"),t.j41(14,"input",11),t.mxI("ngModelChange",function(r){return t.DH7(i.consult_date,r)||(i.consult_date=r),r}),t.k0s(),t.j41(15,"input",12),t.mxI("ngModelChange",function(r){return t.DH7(i.consult_time,r)||(i.consult_time=r),r}),t.k0s()(),t.DNE(16,oi,8,5,"div",13)(17,ai,3,0,"div",14),t.k0s()()(),t.j41(18,"div",15)(19,"button",16),t.bIt("click",function(){return i.closeModal()}),t.EFF(20,"Close"),t.k0s(),t.j41(21,"button",17),t.bIt("click",function(){return i.onSubmit()}),t.EFF(22,"Update"),t.k0s()()()()()(),t.nrm(23,"div",18)),2&s&&(t.R7$(14),t.Y8G("max",i.max_date),t.R50("ngModel",i.consult_date),t.R7$(),t.R50("ngModel",i.consult_time),t.R7$(),t.Y8G("ngIf",i.philhealth_details),t.R7$(),t.Y8G("ngIf",!i.philhealth_details),t.R7$(2),t.Y8G("disabled",i.is_saving),t.R7$(2),t.Y8G("disabled",i.is_saving))},dependencies:[c.YU,c.bT,p.aY,l.me,l.Zm,l.BC,l.vS,c.vh],encapsulation:2})}}return n})();const ri=n=>({"bg-orange-500 hover:ring-orange-400":n});function di(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",10),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.openEkas())}),t.nrm(1,"fa-icon",11),t.EFF(2," eKAS "),t.k0s()}if(2&n){const e=t.XpG();t.R7$(),t.Y8G("icon",e.faFile)}}function ci(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",12),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleModal("show_end"))}),t.nrm(1,"fa-icon",11),t.EFF(2," End Visit "),t.k0s()}if(2&n){const e=t.XpG();t.R7$(),t.Y8G("icon",e.faDoorClosed)}}function _i(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",12),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleModal("show_open"))}),t.EFF(1," Open Visit "),t.k0s()}}function pi(n,a){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.SpI(" | ATC: ",null==e.consult_details?null:e.consult_details.authorization_transaction_code,"")}}function ui(n,a){if(1&n&&(t.j41(0,"option",29),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.id),t.R7$(),t.E5c("",e.last_name,", ",e.first_name," ",e.middle_name,"")}}function mi(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",24)(1,"div",25)(2,"select",26),t.mxI("ngModelChange",function(i){t.eBV(e);const o=t.XpG(2);return t.DH7(o.referred_to.id,i)||(o.referred_to.id=i),t.Njj(i)}),t.DNE(3,ui,2,4,"option",27),t.k0s(),t.j41(4,"button",28),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.referTo())}),t.EFF(5),t.k0s()()()}if(2&n){const e=t.XpG(2);t.R7$(2),t.Y8G("disabled",e.enable_edit),t.R50("ngModel",e.referred_to.id),t.R7$(),t.Y8G("ngForOf",e.physicians),t.R7$(),t.Y8G("disabled",!e.referred_to.id)("ngClass",t.eq3(6,ri,e.enable_edit)),t.R7$(),t.SpI(" ",e.enable_edit?"Update":"Refer"," ")}}function gi(n,a){if(1&n){const e=t.RV6();t.j41(0,"app-pregnant-tag",37),t.bIt("loadConsult",function(i){t.eBV(e);const o=t.XpG(3);return t.Njj(o.loadConsult(i))}),t.k0s()}if(2&n){const e=t.XpG(3);t.Y8G("consult_details",e.consult_details)("have_complaint",e.have_complaint)("allowed_to_edit",e.allowed_to_edit)}}function hi(n,a){if(1&n&&t.nrm(0,"app-physical-exam",32),2&n){const e=t.XpG(3);t.Y8G("allowed_to_edit",e.allowed_to_edit)("toggle_content",e.toggle_content)("consult_details",e.consult_details)}}function fi(n,a){if(1&n&&t.nrm(0,"app-management",32),2&n){const e=t.XpG(3);t.Y8G("allowed_to_edit",e.allowed_to_edit)("toggle_content",e.toggle_content)("consult_details",e.consult_details)}}function bi(n,a){if(1&n&&t.nrm(0,"app-initial-dx",32),2&n){const e=t.XpG(3);t.Y8G("allowed_to_edit",e.allowed_to_edit)("toggle_content",e.toggle_content)("consult_details",e.consult_details)}}function vi(n,a){if(1&n&&t.nrm(0,"app-final-dx",32),2&n){const e=t.XpG(3);t.Y8G("allowed_to_edit",e.allowed_to_edit)("toggle_content",e.toggle_content)("consult_details",e.consult_details)}}function xi(n,a){if(1&n&&t.nrm(0,"app-prescription",38),2&n){const e=t.XpG(3);t.Y8G("allowed_to_edit",e.allowed_to_edit)("toggle_content",e.toggle_content)("consult_details",e.consult_details)("with_credentials",e.with_credentials)}}function ki(n,a){if(1&n&&(t.j41(0,"option",29),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.id),t.R7$(),t.E5c("",e.last_name,", ",e.first_name," ",e.middle_name,"")}}function yi(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",39)(1,"div",40)(2,"label",41),t.EFF(3,"To open final diagnosis & prescription you must refer this patient to a physician"),t.k0s(),t.j41(4,"select",42),t.mxI("ngModelChange",function(i){t.eBV(e);const o=t.XpG(3);return t.DH7(o.referred_to.id,i)||(o.referred_to.id=i),t.Njj(i)}),t.DNE(5,ki,2,4,"option",27),t.k0s(),t.j41(6,"div",43)(7,"button",44),t.bIt("click",function(){t.eBV(e);const i=t.XpG(3);return t.Njj(i.referTo())}),t.EFF(8),t.k0s()()()()}if(2&n){const e=t.XpG(3);t.R7$(4),t.Y8G("disabled",e.enable_edit),t.R50("ngModel",e.referred_to.id),t.R7$(),t.Y8G("ngForOf",e.physicians),t.R7$(2),t.Y8G("disabled",!e.referred_to.id),t.R7$(),t.SpI(" ",e.enable_edit?"Update":"Refer"," ")}}function Fi(n,a){if(1&n){const e=t.RV6();t.j41(0,"div"),t.DNE(1,gi,1,3,"app-pregnant-tag",30),t.j41(2,"app-complaint-history",31),t.bIt("loadConsult",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.loadConsult())}),t.k0s(),t.nrm(3,"app-general-survey",32),t.DNE(4,hi,1,3,"app-physical-exam",33)(5,fi,1,3,"app-management",33),t.nrm(6,"app-consult-history",34),t.DNE(7,bi,1,3,"app-initial-dx",33)(8,vi,1,3,"app-final-dx",33)(9,xi,1,4,"app-prescription",35)(10,yi,9,5,"div",36),t.k0s()}if(2&n){const e=t.XpG(2);t.R7$(),t.Y8G("ngIf","F"===e.consult_details.patient.gender),t.R7$(),t.Y8G("allowed_to_edit",e.allowed_to_edit)("toggle_content",e.toggle_content)("consult_details",e.consult_details)("have_complaint",e.have_complaint),t.R7$(),t.Y8G("allowed_to_edit",e.allowed_to_edit)("toggle_content",e.toggle_content)("consult_details",e.consult_details),t.R7$(),t.Y8G("ngIf",e.have_complaint),t.R7$(),t.Y8G("ngIf",e.have_complaint),t.R7$(),t.Y8G("toggle_content",e.toggle_content),t.R7$(),t.Y8G("ngIf",e.have_complaint),t.R7$(),t.Y8G("ngIf",e.have_complaint&&e.consult_details.physician),t.R7$(),t.Y8G("ngIf",e.have_complaint&&e.consult_details.physician),t.R7$(),t.Y8G("ngIf",!(null!=e.consult_details&&e.consult_details.consult_done)&&e.have_complaint&&!e.consult_details.physician&&e.allowed_to_edit)}}function Ci(n,a){1&n&&(t.j41(0,"div"),t.nrm(1,"app-consult-summary"),t.k0s())}function ji(n,a){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"span",13)(2,"span",14)(3,"div",15)(4,"button",16),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleAll())}),t.nrm(5,"fa-icon",17),t.k0s(),t.j41(6,"span",18),t.EFF(7," CONSULTATION "),t.j41(8,"span",19),t.EFF(9),t.nI1(10,"date"),t.DNE(11,pi,2,1,"span",6),t.EFF(12,") "),t.j41(13,"button",20),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleModal("update_date"))}),t.nrm(14,"fa-icon",21),t.k0s()()(),t.nrm(15,"br"),t.j41(16,"span",22),t.EFF(17),t.k0s()(),t.DNE(18,mi,6,8,"div",23),t.k0s()(),t.DNE(19,Fi,11,15,"div",6)(20,Ci,2,0,"div",6),t.k0s()}if(2&n){const e=t.XpG();t.R7$(5),t.Y8G("icon",e.toggle_content?e.faChevronUp:e.faChevronDown),t.R7$(4),t.Lme(" (",t.i5U(10,9,null==e.consult_details?null:e.consult_details.consult_date,"MM/dd/yyyy hh:mm a")," | ID:",null==e.consult_details?null:e.consult_details.id,""),t.R7$(2),t.Y8G("ngIf",null==e.consult_details?null:e.consult_details.is_konsulta),t.R7$(3),t.Y8G("icon",e.faEdit),t.R7$(3),t.SpI("Facility: ",null==e.consult_details||null==e.consult_details.facility?null:e.consult_details.facility.facility_name,""),t.R7$(),t.Y8G("ngIf",e.consult_details&&e.open_consult&&e.have_complaint&&!(null!=e.consult_details&&e.consult_details.consult_done)&&e.allowed_to_edit),t.R7$(),t.Y8G("ngIf",e.consult_details&&e.open_consult),t.R7$(),t.Y8G("ngIf",e.consult_details&&!e.open_consult)}}function wi(n,a){1&n&&(t.j41(0,"div"),t.nrm(1,"app-konsulta"),t.k0s())}function Ri(n,a){1&n&&(t.j41(0,"div"),t.nrm(1,"app-eclaims"),t.k0s())}function Gi(n,a){if(1&n){const e=t.RV6();t.j41(0,"app-end-visit",45),t.bIt("toggleModal",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleModal("show_end"))}),t.k0s()}if(2&n){const e=t.XpG();t.Y8G("consult_id",null==e.consult_details?null:e.consult_details.id)("consult_date",null==e.consult_details?null:e.consult_details.consult_date)("patient_id",null==e.consult_details?null:e.consult_details.patient.id)("pt_group","cn")}}function Ei(n,a){if(1&n){const e=t.RV6();t.j41(0,"app-open-consult",45),t.bIt("toggleModal",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleModal("show_open"))}),t.k0s()}if(2&n){const e=t.XpG();t.Y8G("consult_id",null==e.consult_details?null:e.consult_details.id)("consult_date",null==e.consult_details?null:e.consult_details.consult_date)("patient_id",null==e.consult_details?null:e.consult_details.patient.id)("pt_group","cn")}}function Ii(n,a){if(1&n){const e=t.RV6();t.j41(0,"app-update-date",46),t.bIt("toggleModal",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleModal("update_date"))}),t.k0s()}if(2&n){const e=t.XpG();t.Y8G("consult_details",e.consult_details)}}function $i(n,a){if(1&n){const e=t.RV6();t.j41(0,"app-ekas",47),t.bIt("toggleModal",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleEkas())}),t.k0s()}if(2&n){const e=t.XpG();t.Y8G("lab_list",e.lab_list)("consult_details",e.consult_details)}}const Ti=[{path:"",component:(()=>{class n{switchTabs(e){this.modules=0,this.modules=e}toggleAll(){this.toggle_content=!this.toggle_content}patientVitals(e){this.graph.patientVitals(e)}patientInfo(e){this.patient_details=e}toggleModal(e){console.log(e),this[e]=!this[e],("show_open"===e&&!this.show_open||"update_date"===e&&!this.update_date)&&this.loadConsult()}openEkas(){this.http.get("laboratory/consult-laboratories",{params:{consult_id:this.consult_details.id,patient_id:this.patient_id,sort:"-request_date",include:"laboratory"}}).subscribe({next:s=>{this.lab_list=s.data,this.show_ekas=!this.show_ekas},error:s=>console.log(s)})}toggleEkas(){this.show_ekas=!this.show_ekas}loadVisitHistory(){this.http.get("consultation/records",{params:{patient_id:this.patient_id,per_page:"all",sort:"-consult_date"}}).subscribe({next:e=>{this.visit_list=e.data,console.log(e.data)},error:e=>console.log(e)})}loadConsult(){this.consult_id=this.route.snapshot.paramMap.get("consult_id"),this.http.get("consultation/records",{params:{id:this.consult_id,pt_group:"cn",disable_filter:1}}).subscribe({next:i=>{this.consult_details=i.data[0],this.allowed_to_edit=this.http.getUserFacility()===this.consult_details.facility.code,(this.consult_details.consult_notes.complaint||this.consult_details.consult_notes.complaints.length>0||this.consult_details.consult_notes.history)&&(this.have_complaint=!0,this.consult_details.physician&&(this.referred_to=this.consult_details.physician,this.enable_edit=!0))},error:i=>console.log(i)});let s=this.http.getUserFromJSON();this.with_credentials=!!s.konsulta_credential}referTo(){this.enable_edit?this.enable_edit=!1:this.http.update("consultation/records/",this.consult_details.id,{patient_id:this.consult_details.patient.id,consult_date:this.consult_details.consult_date,pt_group:"cn",consult_done:!1,physician_id:this.referred_to.id}).subscribe({next:s=>{this.toastr.success("Patient was referred","Referral"),this.consult_details.physician=this.referred_to},error:s=>console.log(s)})}loadUsers(){this.http.get("users",{params:{per_page:"all",doctors_list:1}}).subscribe({next:e=>{this.physicians=e.data},error:e=>console.log(e)})}constructor(e,s,i,o){this.http=e,this.route=s,this.toastr=i,this.router=o,this.faChevronUp=d.w2A,this.faChevronDown=d.Jt$,this.faDoorClosed=d.K_I,this.faFile=d.A4h,this.faEdit=v.MT7,this.is_saving=!1,this.show_item=!0,this.toggle_content=!0,this.open_consult=!0,this.have_complaint=!1,this.show_end=!1,this.show_open=!1,this.enable_edit=!1,this.show_ekas=!1,this.update_date=!1,this.referred_to={id:""},this.with_credentials=!1,this.allowed_to_edit=!1,this.navigationEnd$=this.router.events.pipe((0,w.p)(r=>r instanceof b.wF),(0,y.M)(()=>{this.loadConsult()}))}ngOnInit(){this.patient_id=this.route.snapshot.paramMap.get("id"),this.modules=1,this.loadUsers(),this.loadConsult(),this.navigationEnd$.subscribe()}static{this.\u0275fac=function(s){return new(s||n)(t.rXU(u.k),t.rXU(b.nX),t.rXU(f.tw),t.rXU(b.Ix))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-consultation"]],viewQuery:function(s,i){if(1&s&&t.GBs(K,5),2&s){let o;t.mGM(o=t.lsd())&&(i.graph=o.first)}},standalone:!1,decls:16,vars:12,consts:[[1,"block","shadow","p-4","mt-4","rounded-xl","text-gray-600","border","border-slate-100"],[1,"flex"],[1,"flex","justify-between","text-sm","w-full"],[1,"text-gray-600","border-b-2","border-gray-200","block","hover:text-blue-500","hover:border-blue-500","mr-6","pb-2",3,"click"],["type","button","class","btn-end-visit bg-green-500 mr-3 hover:ring-green-400",3,"click",4,"ngIf"],["type","button","class","btn-end-visit ml-auto",3,"click",4,"ngIf"],[4,"ngIf"],[3,"consult_id","consult_date","patient_id","pt_group","toggleModal",4,"ngIf"],[3,"consult_details","toggleModal",4,"ngIf"],[3,"lab_list","consult_details","toggleModal",4,"ngIf"],["type","button",1,"btn-end-visit","bg-green-500","mr-3","hover:ring-green-400",3,"click"],[1,"mr-1",3,"icon"],["type","button",1,"btn-end-visit","ml-auto",3,"click"],[1,"text-sky-500","flex","justify-between","py-2"],[1,"flex","justify-between","w-full"],[1,"w-2/3","mt-2"],["type","button",1,"font-normal","text-sky-500","px-2","py-1","text-sm","mr-2",3,"click"],["size","lg",3,"icon"],[1,"mt-2","font-bold"],[1,"text-gray-500","text-sm"],["type","button",1,"text-orange-400",3,"click"],[3,"icon"],[1,"text-gray-500","text-sm","font-semibold"],["class","w-1/3 flex justify-end",4,"ngIf"],[1,"w-1/3","flex","justify-end"],[1,"flex","text-gray-700"],[1,"input","px-2","mr-3","disabled:bg-gray-300",3,"ngModelChange","disabled","ngModel"],["class","pr-3",3,"value",4,"ngFor","ngForOf"],[1,"disabled:bg-gray-300","bg-blue-500","text-xs","text-white","px-5","py-1","rounded-md","hover:ring-2","hover:ring-blue-400","h-10","mt-1","w-24",3,"click","disabled","ngClass"],[1,"pr-3",3,"value"],[3,"consult_details","have_complaint","allowed_to_edit","loadConsult",4,"ngIf"],[3,"loadConsult","allowed_to_edit","toggle_content","consult_details","have_complaint"],[3,"allowed_to_edit","toggle_content","consult_details"],[3,"allowed_to_edit","toggle_content","consult_details",4,"ngIf"],[3,"toggle_content"],[3,"allowed_to_edit","toggle_content","consult_details","with_credentials",4,"ngIf"],["class","grid grid-cols-10",4,"ngIf"],[3,"loadConsult","consult_details","have_complaint","allowed_to_edit"],[3,"allowed_to_edit","toggle_content","consult_details","with_credentials"],[1,"grid","grid-cols-10"],[1,"col-start-3","col-span-8","text-gray-700","p-10","border","border-slate-300","shadow-md","rounded-md","mt-5"],["for","referred_to"],["name","referred_to",1,"input","px-2","mr-3","disabled:bg-gray-300","mb-3",3,"ngModelChange","disabled","ngModel"],[1,"w-full","text-right"],[1,"btn-save","px-5","disabled:bg-gray-300",3,"click","disabled"],[3,"toggleModal","consult_id","consult_date","patient_id","pt_group"],[3,"toggleModal","consult_details"],[3,"toggleModal","lab_list","consult_details"]],template:function(s,i){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"nav",2)(3,"button",3),t.bIt("click",function(){return i.switchTabs(1)}),t.EFF(4," CONSULTATION "),t.k0s(),t.j41(5,"div"),t.DNE(6,di,3,1,"button",4)(7,ci,3,1,"button",5)(8,_i,2,0,"button",5),t.k0s()()(),t.DNE(9,ji,21,12,"div",6)(10,wi,2,0,"div",6)(11,Ri,2,0,"div",6),t.k0s(),t.DNE(12,Gi,1,4,"app-end-visit",7)(13,Ei,1,4,"app-open-consult",7)(14,Ii,1,1,"app-update-date",8)(15,$i,1,2,"app-ekas",9)),2&s&&(t.R7$(3),t.HbH(1===i.modules?"text-blue-500 border-b-2 border-blue-500 font-bold":"hover:-translate-y-1 hover:scale-110 transition ease-in-out delay-400 duration-300"),t.R7$(3),t.Y8G("ngIf",(null==i.consult_details?null:i.consult_details.is_konsulta)&&i.consult_details&&i.with_credentials),t.R7$(),t.Y8G("ngIf",!(null!=i.consult_details&&i.consult_details.consult_done)&&i.allowed_to_edit),t.R7$(),t.Y8G("ngIf",(null==i.consult_details?null:i.consult_details.consult_done)&&i.allowed_to_edit),t.R7$(),t.Y8G("ngIf",1===i.modules),t.R7$(),t.Y8G("ngIf",2===i.modules),t.R7$(),t.Y8G("ngIf",3===i.modules),t.R7$(),t.Y8G("ngIf",i.show_end),t.R7$(),t.Y8G("ngIf",i.show_open),t.R7$(),t.Y8G("ngIf",i.update_date),t.R7$(),t.Y8G("ngIf",i.show_ekas))},dependencies:[c.YU,c.Sq,c.bT,dt,ct.i,$,p.aY,l.xH,l.y7,l.wz,l.BC,l.vS,T.u,M,Y.B,ht,Ct,St,ln,Cn,Nn,Sn,On,Wn,li,c.vh],styles:["td[_ngcontent-%COMP%]{padding:1em 0}"]})}}return n})()}];let Mi=(()=>{class n{static{this.\u0275fac=function(s){return new(s||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[b.iI.forChild(Ti),b.iI]})}}return n})();var Yi=_(4959),Di=_(9028);let Ni=(()=>{class n{static{this.\u0275fac=function(s){return new(s||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[c.MD,Mi,Yi.u,E.J,p.dX,k.MQ,l.YN,l.X1,q.c,T.u,M,Y.B,A,Di.v]})}}return n})()}}]);