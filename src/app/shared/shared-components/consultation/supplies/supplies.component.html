<hr class="my-4">
<div class="flex w-full">
  <div class="w-full">
    <div class="rounded-md border border-solid border-gray-300">
      <span class="rounded-t-md m-0 p-2 font-semibold text-gray-50 bg-amber-500 flex justify-between" [ngClass]="{'rounded-b' : !show_content}">
        Medicine, Rooms & Supplies
        <div>
          <button *ngIf="show_actions" type="button" class="ml-3 text-sm bg-white text-blue-500 px-3 rounded-full" (click)="toggleSupplyModal('item-list')">
            <fa-icon [icon]="faAdd" class="pr-1"></fa-icon>
            add item
          </button>
        </div>
      </span>
      <table *ngIf="show_content" class="w-full table-auto p-5">
        <thead>
          <tr class="align-top">
            <th scope="col" class="text-center py-3 px-3 w-8/12">Item Name <br /> Category</th>
            <th scope="col" class="text-center py-3 px-3 w-1/12">Quantity</th>
            <th scope="col" class="text-center py-3 px-3 w-1/12">Price</th>
            <th scope="col" class="text-center py-3 px-3 w-1/12">Total</th>
            <th scope="col" class="text-center py-3 px-3 w-1/12">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of this.consult_details.consultItems; trackBy:identify" class="bg-white border-b last:border-0 text-sm align-top">
            <td class="py-4 px-3">
              @if(item.item_list && item.item_list.lib_item_claim) {
                <span class="font-semibold">{{ item.item_list.lib_item_claim.item_name}}</span> <br />
                <span class="italic text-sm">{{ item.item_list.lib_item_claim.category }}</span>
              } @else if (item.item_list && item.item_list.added_item) {
                <span class="font-semibold">{{ item.item_list.added_item }}</span> <br />
                <span class="italic text-sm">OTHERS</span>
              } @else {
                <span class="italic text-rose-500">Item was deleted from the library</span> <br />
                <!-- <span class="italic text-sm">OTHERS</span> -->
              }
            </td>
            <td scope="row" class="py-4 px-3 font-medium text-gray-900">
              {{ item.quantity }}
            </td>
            <td scope="row" class="py-4 px-3 font-medium text-gray-900">
              {{ item.unit_price | currency: 'PHP' }}
            </td>
            <td scope="row" class="py-4 px-3 font-medium text-gray-900">
              {{ item.total_price | currency: 'PHP' }}
            </td>
            <td class="text-sm text-center mb-5  align-middle">
              <button class="mr-3" (click)="toggleSupplyModal({data: item, name: 'add-item'})">
                <fa-icon [icon]="faEdit" class="text-amber-500"></fa-icon>
              </button>
              <button (click)="toggleSupplyModal('delete-item', item)">
                <fa-icon [icon]="faTrashCan" class="text-rose-500"></fa-icon>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<app-delete-item *ngIf="supply_modals['delete-item']"
  [delete_id]="delete_id"
  [delete_desc]="delete_desc"
  [url]="url"
  (toggleModal)="toggleSupplyModal('delete-item')"
></app-delete-item>

<app-add-item-form *ngIf="supply_modals['add-item']"
  (toggleSupplyModal)="toggleSupplyModal($event)"
  [selected_item]="selected_item"
></app-add-item-form>

<app-item-list *ngIf="supply_modals['item-list']"
  (toggleSupplyModal)="toggleSupplyModal($event)"
></app-item-list>
