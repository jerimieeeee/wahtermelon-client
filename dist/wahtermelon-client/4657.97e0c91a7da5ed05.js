"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[4657],{4657:(T,p,a)=>{a.r(p),a.d(p,{ResetPasswordModule:()=>I});var d=a(177),l=a(2517),i=a(9417),c=a(5383),s=a(4438),_=a(3318),f=a(60);const m=e=>({"text-red-500":e}),u=e=>({"invalid-input":e});function v(e,n){1&e&&(s.j41(0,"div")(1,"ol",22)(2,"li"),s.EFF(3,"Password must have at least 6 characters"),s.k0s(),s.j41(4,"li"),s.EFF(5,"Password must have at least 1 capital letter"),s.k0s(),s.j41(6,"li"),s.EFF(7,"Password must have at least 1 small letter"),s.k0s(),s.j41(8,"li"),s.EFF(9,"Password must have at least 1 number"),s.k0s(),s.j41(10,"li"),s.EFF(11,"Password must have at least 1 special character"),s.k0s()()())}function g(e,n){if(1&e&&(s.j41(0,"div"),s.EFF(1),s.k0s()),2&e){const t=s.XpG(3);s.R7$(),s.SpI(" ",t.required_message," ")}}function w(e,n){1&e&&(s.j41(0,"div")(1,"ol",22)(2,"li"),s.EFF(3,"Password must have at least 6 characters"),s.k0s(),s.j41(4,"li"),s.EFF(5,"Password must have at least 1 capital letter"),s.k0s(),s.j41(6,"li"),s.EFF(7,"Password must have at least 1 small letter"),s.k0s(),s.j41(8,"li"),s.EFF(9,"Password must have at least 1 number"),s.k0s(),s.j41(10,"li"),s.EFF(11,"Password must have at least 1 special character"),s.k0s()()())}function h(e,n){if(1&e&&(s.j41(0,"div",23),s.DNE(1,g,2,1,"div",14)(2,w,12,0,"div",14),s.k0s()),2&e){const t=s.XpG(2);s.R7$(),s.Y8G("ngIf",null==t.f.password.errors?null:t.f.password.errors.required),s.R7$(),s.Y8G("ngIf",null==t.f.password.errors?null:t.f.password.errors.pattern)}}function F(e,n){1&e&&(s.j41(0,"div",23)(1,"div"),s.EFF(2," Password does not match "),s.k0s()())}function R(e,n){if(1&e&&(s.j41(0,"div"),s.EFF(1),s.k0s()),2&e){const t=s.XpG(3);s.R7$(),s.SpI(" ",t.required_message," ")}}function x(e,n){if(1&e&&(s.j41(0,"div",23),s.DNE(1,R,2,1,"div",14),s.k0s()),2&e){const t=s.XpG(2);s.R7$(),s.Y8G("ngIf",null==t.f.password_confirmation.errors?null:t.f.password_confirmation.errors.required)}}function b(e,n){if(1&e&&(s.j41(0,"li"),s.EFF(1),s.k0s()),2&e){const t=n.$implicit;s.R7$(),s.Lme("",t.key,": ",t.value,"")}}function k(e,n){if(1&e&&(s.j41(0,"div",24)(1,"ul",25),s.DNE(2,b,2,2,"li",26),s.nI1(3,"keyvalue"),s.k0s()()),2&e){const t=s.XpG(2);s.R7$(2),s.Y8G("ngForOf",s.bMT(3,1,t.submit_errors))}}function j(e,n){if(1&e&&s.nrm(0,"fa-icon",27),2&e){const t=s.XpG(2);s.Y8G("icon",t.faSpinner)}}function G(e,n){if(1&e){const t=s.RV6();s.j41(0,"div",5)(1,"div",6)(2,"span"),s.EFF(3,"Create new password"),s.k0s(),s.j41(4,"form",7),s.bIt("ngSubmit",function(){s.eBV(t);const r=s.XpG();return s.Njj(r.onSubmit())}),s.j41(5,"div",8)(6,"label",9),s.EFF(7,"Password"),s.k0s(),s.j41(8,"div",10),s.nrm(9,"input",11),s.j41(10,"button",12),s.bIt("click",function(){s.eBV(t);const r=s.XpG();return s.Njj(r.show_pass=!r.show_pass)}),s.nrm(11,"fa-icon",13),s.k0s()(),s.DNE(12,v,12,0,"div",14)(13,h,3,2,"div",15),s.k0s(),s.j41(14,"div"),s.EFF(15),s.j41(16,"label",16),s.EFF(17,"Password Confirmation"),s.k0s(),s.nrm(18,"input",17),s.DNE(19,F,3,0,"div",15)(20,x,2,1,"div",15),s.k0s(),s.DNE(21,k,4,3,"div",18),s.j41(22,"div",19)(23,"button",20),s.DNE(24,j,1,1,"fa-icon",21),s.EFF(25),s.k0s()()()()()}if(2&e){const t=s.XpG();s.R7$(4),s.Y8G("formGroup",t.userForm),s.R7$(2),s.Y8G("ngClass",s.eq3(19,m,t.is_saving&&t.f.password.errors)),s.R7$(3),s.Y8G("type",t.show_pass?"text":"password")("ngClass",s.eq3(21,u,t.is_saving&&t.f.password.errors)),s.R7$(2),s.Y8G("icon",t.show_pass?t.faEyeSlash:t.faEye),s.R7$(),s.Y8G("ngIf",!t.is_saving),s.R7$(),s.Y8G("ngIf",t.is_saving&&t.f.password.errors),s.R7$(2),s.E5c(" test ",t.passwordMatchError," ",t.userForm.invalid," ",!t.f.password_confirmation.dirty," "),s.R7$(),s.Y8G("ngClass",s.eq3(23,m,t.is_saving&&t.f.password_confirmation.errors)),s.R7$(2),s.Y8G("type",t.show_pass?"text":"password")("ngClass",s.eq3(25,u,t.is_saving&&t.f.password_confirmation.errors)),s.R7$(),s.Y8G("ngIf",t.passwordMatchError),s.R7$(),s.Y8G("ngIf",t.is_saving&&t.f.password_confirmation.errors),s.R7$(),s.Y8G("ngIf",t.submit_errors),s.R7$(2),s.Y8G("disabled",t.passwordMatchError||t.userForm.invalid||!t.f.password_confirmation.dirty),s.R7$(),s.Y8G("ngIf",t.is_saving),s.R7$(),s.SpI(" ",t.is_saving?"Updating":"Change password"," ")}}function E(e,n){if(1&e&&(s.j41(0,"div",33)(1,"span"),s.EFF(2,"Your password was successfully updated! Attempting to login... "),s.k0s(),s.nrm(3,"fa-icon",34),s.k0s()),2&e){const t=s.XpG(2);s.R7$(3),s.Y8G("icon",t.faSpinner)}}function C(e,n){1&e&&(s.j41(0,"div",33),s.EFF(1," Login attempt failed. Try login in using the login page. "),s.k0s())}function y(e,n){if(1&e){const t=s.RV6();s.j41(0,"div",28),s.DNE(1,E,4,1,"div",29)(2,C,2,0,"div",29),s.j41(3,"div",30)(4,"button",31),s.bIt("click",function(){s.eBV(t);const r=s.XpG();return s.Njj(r.backToLogin())}),s.nrm(5,"fa-icon",32),s.EFF(6," Back to login"),s.k0s()()()}if(2&e){const t=s.XpG();s.R7$(),s.Y8G("ngIf",!t.attempt_error),s.R7$(),s.Y8G("ngIf",t.attempt_error),s.R7$(3),s.Y8G("icon",t.faArrowLeft)}}const P=[{path:"",component:(()=>{class e{onSubmit(){console.log(this.userForm),this.is_saving=!0,this.userForm.valid?this.http.post("reset-password",this.userForm.value).subscribe({next:t=>{this.is_saving=!1,this.is_updated=!0,this.attemptLogin()},error:t=>{console.log(t),this.submit_errors=t.error.errors}}):this.is_saving=!1}attemptLogin(){this.http.login(this.userForm.value).subscribe({next:t=>{localStorage.setItem("access_token",t.access_token),this.http.saveUserToLocalStorage(t.user),this.is_saving=!1,this.router.navigate(["/"])},error:t=>{console.log(t),this.is_saving=!1,this.attempt_error=!0},complete:()=>{}})}backToLogin(){this.router.navigate(["/"])}get passwordMatchError(){return this.userForm.controls.password.value!=this.userForm.controls.password_confirmation.value&&this.userForm.get("password_confirmation")?.dirty}constructor(t,o,r,Y){this.http=t,this.router=o,this.formBuilder=r,this.route=Y,this.faEyeSlash=c.k6j,this.faEye=c.pS3,this.faSpinner=c.z1G,this.faArrowLeft=c.CeG,this.is_saving=!1,this.show_pass=!1,this.is_updated=!1,this.attempt_error=!1,this.userForm=new i.gE({email:new i.MJ(""),password:new i.MJ(""),password_confirmation:new i.MJ(""),token:new i.MJ("")})}get f(){return this.userForm.controls}ngOnInit(){let t,o;this.route.queryParamMap.subscribe(r=>{t=r.get("email"),o=r.get("token")}),this.userForm=this.formBuilder.nonNullable.group({email:[t],password:["",[i.k0.required,i.k0.pattern("^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-_]).{6,}$")]],password_confirmation:["",i.k0.required],token:[o]})}static{this.\u0275fac=function(o){return new(o||e)(s.rXU(_.k),s.rXU(l.Ix),s.rXU(i.ok),s.rXU(l.nX))}}static{this.\u0275cmp=s.VBU({type:e,selectors:[["app-reset-password"]],standalone:!1,decls:6,vars:3,consts:[[1,"flex","w-full","justify-center"],[1,"w-2/6","rounded-lg","mt-36"],[1,"flex","text-gray-700","text-xl","font-semibold","p-5","justify-center"],["class","flex text-gray-700",4,"ngIf"],["class","grid grid-cols-1 text-gray-700 justify-center",4,"ngIf"],[1,"flex","text-gray-700"],[1,"p-5","w-full"],[3,"ngSubmit","formGroup"],[1,"mt-5"],["for","password",1,"input-label",3,"ngClass"],[1,"relative","rounded-md"],["name","password","id","password","tabindex","1","formControlName","password",1,"input",3,"type","ngClass"],["type","button",1,"absolute","inset-y-0","right-0","flex","items-center","pr-2","text-gray-500",3,"click"],[3,"icon"],[4,"ngIf"],["class","invalid-alert",4,"ngIf"],["for","password_confirmation",1,"input-label",3,"ngClass"],["name","password_confirmation","id","password_confirmation","tabindex","2","formControlName","password_confirmation",1,"input",3,"type","ngClass"],["class","bg-red-200 p-2 w-full rounded-md border border-red-300 text-sm mt-5",4,"ngIf"],[1,"w-full","pt-3"],["tabindex","3","type","submit",1,"btn-save","w-full","disabled:bg-gray-400",3,"disabled"],["class","pr-2","animation","spin",3,"icon",4,"ngIf"],[1,"list-disc","pl-5","text-sm"],[1,"invalid-alert"],[1,"bg-red-200","p-2","w-full","rounded-md","border","border-red-300","text-sm","mt-5"],[1,"list-disc","pl-5"],[4,"ngFor","ngForOf"],["animation","spin",1,"pr-2",3,"icon"],[1,"grid","grid-cols-1","text-gray-700","justify-center"],["class","flex justify-center",4,"ngIf"],[1,"flex","justify-center","mt-3"],["type","button",1,"btn-save",3,"click"],[1,"pr-2",3,"icon"],[1,"flex","justify-center"],["animation","spin",1,"pl-2","text-blue-500","font-semibold",3,"icon"]],template:function(o,r){1&o&&(s.j41(0,"div",0)(1,"div",1)(2,"div",2),s.EFF(3),s.k0s(),s.DNE(4,G,26,27,"div",3)(5,y,7,3,"div",4),s.k0s()()),2&o&&(s.R7$(3),s.SpI(" ",r.is_updated?"Password changed":"Change Password"," "),s.R7$(),s.Y8G("ngIf",!r.is_updated),s.R7$(),s.Y8G("ngIf",r.is_updated))},dependencies:[d.YU,d.Sq,d.bT,i.qT,i.me,i.BC,i.cb,i.j4,i.JD,f.aY,d.lG],encapsulation:2})}}return e})()}];let $=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=s.$C({type:e})}static{this.\u0275inj=s.G2t({imports:[l.iI.forChild(P),l.iI]})}}return e})(),I=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=s.$C({type:e})}static{this.\u0275inj=s.G2t({imports:[d.MD,$,i.X1,i.YN,f.dX]})}}return e})()}}]);