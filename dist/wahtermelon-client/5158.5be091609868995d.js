"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[5158],{2505:(O,C,l)=>{l.d(C,{_:()=>L});var s=l(3953),u=l(177),F=l(8793),h=l(7673),e=l(5964),a=l(3294),v=l(152),y=l(8141),g=l(5558),f=l(9437),$=l(6354),I=l(1413),E=l(614),R=l(5383),D=l(60),G=l(8761),x=l(9417),w=l(3318),T=l(5794);const Y=p=>({"rounded-b":p});function M(p,k){if(1&p&&(s.j41(0,"div",18)(1,"h5",19)(2,"strong"),s.EFF(3),s.k0s(),s.EFF(4),s.k0s()()),2&p){const d=k.item,c=k.searchTerm;s.R7$(),s.Y8G("ngOptionHighlight",c),s.R7$(2),s.SpI("",d.icd10_code,":"),s.R7$(),s.SpI(" ",d.icd10_desc,"")}}function q(p,k){if(1&p&&s.nrm(0,"fa-icon",23),2&p){const d=s.XpG(3);s.Y8G("icon",d.faSpinner)}}function N(p,k){if(1&p&&s.nrm(0,"fa-icon",24),2&p){const d=s.XpG(3);s.Y8G("icon",d.faSave)}}function P(p,k){if(1&p){const d=s.RV6();s.j41(0,"button",20),s.bIt("click",function(){s.eBV(d);const m=s.XpG(2);return s.Njj(m.onSubmit())}),s.DNE(1,q,1,1,"fa-icon",21)(2,N,1,1,"fa-icon",22),s.EFF(3),s.k0s()}if(2&p){const d=s.XpG(2);s.Y8G("disabled",d.is_saving),s.R7$(),s.Y8G("ngIf",d.is_saving),s.R7$(),s.Y8G("ngIf",!d.is_saving),s.R7$(),s.SpI(" ",d.is_saving?"Saving":"Save"," ")}}function X(p,k){if(1&p){const d=s.RV6();s.j41(0,"div")(1,"div",8)(2,"button",9),s.nrm(3,"fa-icon",10),s.k0s(),s.j41(4,"div",11)(5,"ng-select",12),s.nI1(6,"async"),s.mxI("ngModelChange",function(m){s.eBV(d);const b=s.XpG();return s.DH7(b.selectedFdx,m)||(b.selectedFdx=m),s.Njj(m)}),s.DNE(7,M,5,3,"ng-template",13),s.k0s()()(),s.j41(8,"div",14)(9,"textarea",15),s.mxI("ngModelChange",function(m){s.eBV(d);const b=s.XpG();return s.DH7(b.fdx_remarks,m)||(b.fdx_remarks=m),s.Njj(m)}),s.k0s()(),s.j41(10,"div",16),s.DNE(11,P,4,4,"button",17),s.k0s()()}if(2&p){const d=s.XpG();s.R7$(3),s.Y8G("icon",d.faPlusSquare),s.R7$(2),s.Y8G("items",s.bMT(6,10,d.fdx$))("multiple",!0)("loading",d.fdxLoading)("typeahead",d.searchInput$),s.R50("ngModel",d.selectedFdx),s.Y8G("disabled",d.consult_done||!d.allowed_to_edit),s.R7$(4),s.Y8G("disabled",d.consult_done||!d.allowed_to_edit),s.R50("ngModel",d.fdx_remarks),s.R7$(2),s.Y8G("ngIf",!d.consult_done&&d.allowed_to_edit)}}let L=(()=>{class p{onSubmit(){this.is_saving=!0,this.http.post("consultation/final-diagnosis",{notes_id:this.consult_details.consult_notes.id,final_diagnosis:this.selectedFdx}).subscribe({next:c=>{this.saveNotes()},error:c=>console.log(c)})}saveNotes(){this.fdx_remarks?this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,fdx_remarks:this.fdx_remarks}).subscribe({next:()=>{this.showToastr(),this.loadConsult.emit()},error:c=>console.log(c)}):this.showToastr()}showToastr(){this.is_saving=!1,this.toastr.success("Successfully updated!","Final Diagnosis")}loadFdx(d){this.fdx$=(0,F.x)((0,h.of)(d),this.searchInput$.pipe((0,e.p)(c=>null!==c&&c.length>=this.minLengthTerm),(0,a.F)(),(0,v.B)(800),(0,y.M)(()=>this.fdxLoading=!0),(0,g.n)(c=>this.getFdx(c).pipe((0,f.W)(()=>(0,h.of)([])),(0,y.M)(()=>this.fdxLoading=!1)))))}getFdx(d=null){return this.http.get("libraries/icd10",{params:{"filter[search]":d}}).pipe((0,$.T)(c=>c.data))}loadSelected(){let d=[],c=[];this.final_dx&&Object.keys(this.final_dx).length>0?(Object.entries(this.final_dx).forEach(([m,b],B)=>{let j=b;d.push(j.icd10_code.toString()),c.push(j.lib_icd10)}),this.loadFdx(c),this.selectedFdx=d):this.loadFdx([])}ngOnChanges(d){this.show_content=this.toggle_content,this.consult_details&&this.consult_details.consult_notes?(this.final_dx=this.consult_details.consult_notes.finaldx,this.fdx_remarks=this.consult_details.consult_notes.fdx_remarks,this.consult_done=this.consult_details.consult_done,this.loadSelected()):this.loadFdx([])}constructor(d,c){this.http=d,this.toastr=c,this.loadConsult=new s.bkB,this.faPlusSquare=E.CHJ,this.faChevronCircleUp=R.AeV,this.faChevronCircleDown=R.DqM,this.faSave=E.hSh,this.faSpinner=R.z1G,this.fdxLoading=!1,this.show_content=!0,this.is_saving=!1,this.consult_done=!1,this.searchInput$=new I.B,this.minLengthTerm=3}static#e=this.\u0275fac=function(c){return new(c||p)(s.rXU(w.k),s.rXU(T.tw))};static#t=this.\u0275cmp=s.VBU({type:p,selectors:[["app-final-dx"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",allowed_to_edit:"allowed_to_edit"},outputs:{loadConsult:"loadConsult"},standalone:!0,features:[s.OA$,s.aNF],decls:10,vars:5,consts:[[1,"grid","grid-cols-10","mt-4"],[1,"col-span-2","pt-2"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[1,"flex","mb-2","p-4"],["type","submit",1,"inline-flex","p-1","items-center","text-gray-50","bg-sky-400","rounded-l-md","border","border-gray-300"],[1,"text-white","fa-xl",3,"icon"],[1,"chips-container"],["placeholder","search","typeToSearchText","search...","bindValue","icd10_code","bindLabel","icd10_desc","notFoundText","No records found",1,"select-chips",3,"ngModelChange","items","multiple","loading","typeahead","ngModel","disabled"],["ng-option-tmp",""],[1,"flex","px-4","pb-4"],["rows","3","id","fdx_remarks","placeholder","Final Diagnosis remarks",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"ngModelChange","disabled","ngModel"],[1,"flex","justify-between"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[1,"whitespace-normal"],[1,"text-gray-700",3,"ngOptionHighlight"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"click","disabled"],["class","mr-2","animation","spin",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(c,m){1&c&&(s.j41(0,"div",0)(1,"div",1),s.EFF(2," Final Diagnosis "),s.k0s(),s.j41(3,"div",2)(4,"div",3)(5,"span",4),s.EFF(6," Final Diagnosis "),s.j41(7,"button",5),s.bIt("click",function(){return m.show_content=!m.show_content}),s.nrm(8,"fa-icon",6),s.k0s()(),s.DNE(9,X,12,12,"div",7),s.k0s()()()),2&c&&(s.R7$(5),s.Y8G("ngClass",s.eq3(3,Y,!m.show_content)),s.R7$(3),s.Y8G("icon",m.show_content?m.faChevronCircleUp:m.faChevronCircleDown),s.R7$(),s.Y8G("ngIf",m.show_content))},dependencies:[u.MD,u.YU,u.bT,u.Jj,D.dX,D.aY,G.MQ,G.vr,G.Uq,x.YN,x.me,x.BC,x.vS,x.X1]})}return p})()},8249:(O,C,l)=>{l.d(C,{a:()=>F});var s=l(177),u=l(3953);let F=(()=>{class h{static#e=this.\u0275fac=function(v){return new(v||h)};static#t=this.\u0275cmp=u.VBU({type:h,selectors:[["app-initial-dx"]],standalone:!0,features:[u.aNF],decls:2,vars:0,template:function(v,y){1&v&&(u.j41(0,"p"),u.EFF(1,"initial-dx works!"),u.k0s())},dependencies:[s.MD]})}return h})()},2038:(O,C,l)=>{l.d(C,{W:()=>Me});var s=l(177),u=l(5383),F=l(614),h=l(60),e=l(3953),a=l(9417),v=l(3318),y=l(5794);const g=n=>({"text-red-500":n}),f=n=>({"invalid-input":n});function $(n,o){1&n&&(e.j41(0,"div",43)(1,"strong"),e.EFF(2,"Note: "),e.k0s(),e.EFF(3,"Saving this prescription will automatically add new item in your drug list. "),e.k0s())}function I(n,o){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.required_message," ")}}function E(n,o){if(1&n&&(e.j41(0,"div",47),e.DNE(1,I,2,1,"div",48),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==t.f.brand_name.errors?null:t.f.brand_name.errors.required)}}function R(n,o){if(1&n&&(e.j41(0,"div",44)(1,"label",45),e.EFF(2,"Brand Name"),e.k0s(),e.nrm(3,"input",46),e.DNE(4,E,2,1,"div",14),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngClass",e.eq3(3,g,t.is_saving&&t.f.brand_name.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(5,f,t.is_saving&&t.f.brand_name.errors)),e.R7$(),e.Y8G("ngIf",t.is_saving&&t.f.brand_name.errors)}}function D(n,o){if(1&n&&(e.j41(0,"div",44)(1,"span",49),e.EFF(2,"Drug description:"),e.k0s(),e.EFF(3),e.k0s()),2&n){const t=e.XpG();e.R7$(3),e.SpI(" ",t.selected_drug.konsulta_medicine?t.selected_drug.konsulta_medicine.desc:t.selected_drug.desc," ")}}function G(n,o){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.required_message," ")}}function x(n,o){if(1&n&&(e.j41(0,"div",47),e.DNE(1,G,2,1,"div",48),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==t.f.added_medicine.errors?null:t.f.added_medicine.errors.required)}}function w(n,o){if(1&n&&(e.j41(0,"div",30)(1,"label",50),e.EFF(2,"Drug name"),e.k0s(),e.nrm(3,"input",51),e.DNE(4,x,2,1,"div",14),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngClass",e.eq3(3,g,t.is_saving&&t.f.added_medicine.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(5,f,t.is_saving&&t.f.added_medicine.errors)),e.R7$(),e.Y8G("ngIf",t.is_saving&&t.f.added_medicine.errors)}}function T(n,o){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.required_message," ")}}function Y(n,o){if(1&n&&(e.j41(0,"div",47),e.DNE(1,T,2,1,"div",48),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.f.dosage_quantity.errors?null:t.f.dosage_quantity.errors.required)}}function M(n,o){if(1&n&&(e.j41(0,"option",52),e.EFF(1),e.k0s()),2&n){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.JRh(t.desc)}}function q(n,o){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.required_message," ")}}function N(n,o){if(1&n&&(e.j41(0,"div",47),e.DNE(1,q,2,1,"div",48),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.f.dosage_uom.errors?null:t.f.dosage_uom.errors.required)}}function P(n,o){if(1&n&&(e.j41(0,"option",52),e.EFF(1),e.k0s()),2&n){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.JRh(t.desc)}}function X(n,o){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.required_message," ")}}function L(n,o){if(1&n&&(e.j41(0,"div",47),e.DNE(1,X,2,1,"div",48),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.f.dose_regimen.errors?null:t.f.dose_regimen.errors.required)}}function p(n,o){if(1&n&&(e.j41(0,"option",52),e.EFF(1),e.k0s()),2&n){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.JRh(t.desc)}}function k(n,o){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.required_message," ")}}function d(n,o){if(1&n&&(e.j41(0,"div",47),e.DNE(1,k,2,1,"div",48),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.f.medicine_route_code.errors?null:t.f.medicine_route_code.errors.required)}}function c(n,o){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.required_message," ")}}function m(n,o){if(1&n&&(e.j41(0,"div",47),e.DNE(1,c,2,1,"div",48),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.f.duration_intake.errors?null:t.f.duration_intake.errors.required)}}function b(n,o){if(1&n&&(e.j41(0,"option",52),e.EFF(1),e.k0s()),2&n){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.JRh(t.desc)}}function B(n,o){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.required_message," ")}}function j(n,o){if(1&n&&(e.j41(0,"div",47),e.DNE(1,B,2,1,"div",48),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.f.duration_frequency.errors?null:t.f.duration_frequency.errors.required)}}function V(n,o){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.required_message," ")}}function U(n,o){if(1&n&&(e.j41(0,"div",47),e.DNE(1,V,2,1,"div",48),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.f.quantity.errors?null:t.f.quantity.errors.required)}}function J(n,o){if(1&n&&(e.j41(0,"option",52),e.EFF(1),e.k0s()),2&n){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.JRh(t.desc)}}function W(n,o){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.required_message," ")}}function K(n,o){if(1&n&&(e.j41(0,"div",47),e.DNE(1,W,2,1,"div",48),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.f.quantity_preparation.errors?null:t.f.quantity_preparation.errors.required)}}function z(n,o){if(1&n&&(e.j41(0,"option",52),e.EFF(1),e.k0s()),2&n){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.JRh(t.desc)}}function H(n,o){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.required_message," ")}}function Q(n,o){if(1&n&&(e.j41(0,"div",47),e.DNE(1,H,2,1,"div",48),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.f.medicine_purpose.errors?null:t.f.medicine_purpose.errors.required)}}function Z(n,o){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.required_message," ")}}function ee(n,o){if(1&n&&(e.j41(0,"div",47),e.DNE(1,Z,2,1,"div",48),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==t.f.purpose_other.errors?null:t.f.purpose_other.errors.required)}}function te(n,o){if(1&n&&(e.j41(0,"div",30)(1,"label",53),e.EFF(2,"Purpose remarks"),e.k0s(),e.nrm(3,"input",54),e.DNE(4,ee,2,1,"div",14),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngClass",e.eq3(3,g,t.is_saving&&t.f.purpose_other.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(5,f,t.is_saving&&t.f.purpose_other.errors)),e.R7$(),e.Y8G("ngIf",t.is_saving&&t.f.purpose_other.errors)}}function ne(n,o){if(1&n&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&n){const t=o.$implicit;e.R7$(),e.JRh(t.value)}}function ie(n,o){if(1&n&&(e.j41(0,"div",55)(1,"div",56)(2,"ul",57),e.DNE(3,ne,2,1,"li",58),e.nI1(4,"keyvalue"),e.k0s()()()),2&n){const t=e.XpG();e.R7$(3),e.Y8G("ngForOf",e.bMT(4,1,t.submit_errors))}}function se(n,o){if(1&n&&e.nrm(0,"fa-icon",59),2&n){const t=e.XpG();e.Y8G("icon",t.faSave)}}function oe(n,o){if(1&n&&e.nrm(0,"fa-icon",60),2&n){const t=e.XpG();e.Y8G("icon",t.faCircleNotch)}}let re=(()=>{class n{get f(){return this.prescriptionForm.controls}closeModal(){this.toggleForm.emit()}onSubmit(){this.is_loading=!0,this.prescriptionForm.valid&&(this.selected_drug.new_drug?this.http.post("medicine/list",this.prescriptionForm.value).subscribe({next:t=>{this.savePrescription()},error:t=>{this.is_loading=!1,this.http.showError(t.error.message,"Medicine List")}}):(this.is_loading=!1,this.savePrescription()))}savePrescription(){let t;t=this.selected_drug&&this.selected_drug.id?this.http.update("medicine/prescriptions/",this.selected_drug.id,this.prescriptionForm.value):this.http.post("medicine/prescriptions",this.prescriptionForm.value),t.subscribe({next:r=>{this.is_loading=!1,this.toastr.success("Successfully added","Prescription"),this.closeModal()},error:r=>{this.is_loading=!1,this.http.showError(r.error.message,"Prescription")}})}loadLibraries(){this.libraries.forEach(t=>{this.http.get("libraries/"+t.location).subscribe({next:r=>{this[t.var_name]=r.data},error:r=>console.log(r),complete:()=>this.show_form=!0})})}constructor(t,r,i){this.http=t,this.toastr=r,this.formBuilder=i,this.toggleForm=new e.bkB,this.faCircleNotch=u.s4k,this.faSave=F.hSh,this.is_saving=!1,this.show_form=!1,this.membership_types=[],this.prescriptionForm=new a.gE({brand_name:new a.MJ(null),medicine_name:new a.MJ(null),medicine_code:new a.MJ(null),patient_id:new a.MJ(null),prescribed_by:new a.MJ(null),consult_id:new a.MJ(null),prescription_date:new a.MJ(null),konsulta_medicine_code:new a.MJ(null),added_medicine:new a.MJ(null),dosage_quantity:new a.MJ(null),dosage_uom:new a.MJ(null),dose_regimen:new a.MJ(null),medicine_purpose:new a.MJ(null),purpose_other:new a.MJ(null),duration_intake:new a.MJ(null),duration_frequency:new a.MJ(null),quantity:new a.MJ(null),quantity_preparation:new a.MJ(null),instruction_quantity:new a.MJ(null),medicine_route_code:new a.MJ(null),remarks:new a.MJ(null)}),this.is_loading=!1,this.libraries=[{var_name:"drug_uom",location:"unit-of-measurements"},{var_name:"drug_regimen",location:"dose-regimens"},{var_name:"drug_purpose",location:"purposes"},{var_name:"drug_frequency",location:"duration-frequencies"},{var_name:"drug_preparation",location:"preparations"},{var_name:"drug_route",location:"medicine-route"}],this.add_drug=!1}checkPurpose(){"99"===this.prescriptionForm.value.medicine_purpose?this.prescriptionForm.controls.purpose_other.enable():this.prescriptionForm.controls.purpose_other.disable()}patchValue(){this.prescriptionForm.patchValue({konsulta_medicine_code:this.selected_drug.konsulta_medicine?this.selected_drug.konsulta_medicine.code:null,added_medicine:this.selected_drug.added_medicine?this.selected_drug.added_medicine:null,dosage_quantity:this.selected_drug.dosage_quantity,dosage_uom:this.selected_drug.unit_of_measurement?this.selected_drug.unit_of_measurement.code:null,dose_regimen:this.selected_drug.regimen?this.selected_drug.regimen.code:null,medicine_purpose:this.selected_drug.purpose?this.selected_drug.purpose.code:null,duration_intake:this.selected_drug.duration_intake,duration_frequency:this.selected_drug.frequency?this.selected_drug.frequency.code:null,quantity:this.selected_drug.quantity,quantity_preparation:this.selected_drug.preparation?this.selected_drug.preparation.code:null,instruction_quantity:this.selected_drug.instruction_quantity??1,medicine_route_code:this.selected_drug.medicine_route?this.selected_drug.medicine_route.code:null,remarks:this.selected_drug.remarks}),this.selected_drug&&this.selected_drug.new_drug&&this.prescriptionForm.patchValue({konsulta_medicine_code:this.selected_drug.code}),this.selected_drug.konsulta_medicine?this.prescriptionForm.controls.added_medicine.disable():this.selected_drug.added_medicine&&(this.prescriptionForm.controls.added_medicine.enable(),this.prescriptionForm.controls.konsulta_medicine_code.disable()),this.checkPurpose()}ngOnChanges(t){this.prescriptionForm=this.formBuilder.nonNullable.group({brand_name:[null],patient_id:[this.consult_details.patient.id],prescribed_by:[this.user_id,[a.k0.required]],consult_id:[this.consult_details.id,[a.k0.required]],prescription_date:[(0,s.Yq)(this.consult_details.consult_date,"yyyy-MM-dd","en","Asia/Manila"),[a.k0.required]],konsulta_medicine_code:[null,[a.k0.required]],added_medicine:[null],dosage_quantity:[null,[a.k0.required]],dosage_uom:[null,[a.k0.required]],dose_regimen:[null,[a.k0.required]],medicine_purpose:[null,[a.k0.required]],purpose_other:[null,[a.k0.required]],duration_intake:[null,[a.k0.required]],duration_frequency:[null,[a.k0.required]],quantity:[null,[a.k0.required]],quantity_preparation:[null,[a.k0.required]],instruction_quantity:[1],medicine_route_code:[null,[a.k0.required]],remarks:[null]}),this.selected_drug?this.patchValue():this.prescriptionForm.controls.konsulta_medicine_code.disable()}static#e=this.\u0275fac=function(r){return new(r||n)(e.rXU(v.k),e.rXU(y.tw),e.rXU(a.ok))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-drug-form"]],inputs:{selected_drug:"selected_drug",consult_details:"consult_details",drug_uom:"drug_uom",drug_regimen:"drug_regimen",drug_purpose:"drug_purpose",drug_frequency:"drug_frequency",drug_preparation:"drug_preparation",drug_route:"drug_route",user_id:"user_id"},outputs:{toggleForm:"toggleForm"},standalone:!0,features:[e.OA$,e.aNF],decls:78,vars:87,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white","pl-5"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"w-full","max-w-3xl","text-left","text-gray-500","dark:text-gray-400",3,"formGroup"],[1,"grid","grid-cols-3","gap-4","pb-5","px-10"],["class","col-span-3 mt-5 mx-5 px-5 py-3 rounded-md border border-yellow-500 bg-yellow-100",4,"ngIf"],["class","col-span-3 mt-5 mx-5",4,"ngIf"],["class","col-span-3 text-sm ",4,"ngIf"],[1,"col-span-1","text-sm"],["for","dosage_quantity",1,"font-semibold",3,"ngClass"],["name","dosage_quantity","id","dosage_quantity","formControlName","dosage_quantity","type","number",1,"input",3,"ngClass"],["class","invalid-alert",4,"ngIf"],["for","dosage_uom",1,"font-semibold",3,"ngClass"],["name","dosage_uom","id","dosage_uom","formControlName","dosage_uom",1,"input",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["for","dose_regimen",1,"font-semibold",3,"ngClass"],["name","dose_regimen","id","dose_regimen","formControlName","dose_regimen",1,"input",3,"ngClass"],["for","medicine_route_code",1,"font-semibold",3,"ngClass"],["name","route","id","medicine_route_code","formControlName","medicine_route_code",1,"input",3,"ngClass"],["for","duration_intake",1,"font-semibold",3,"ngClass"],["name","duration_intake","id","duration_intake","formControlName","duration_intake","type","number",1,"input",3,"ngClass"],["for","duration_frequency",1,"font-semibold",3,"ngClass"],["name","duration_frequency","id","duration_frequency","formControlName","duration_frequency",1,"input",3,"ngClass"],["for","quantity",1,"font-semibold",3,"ngClass"],["name","quantity","id","quantity","formControlName","quantity","type","number",1,"input",3,"ngClass"],["for","quantity_preparation",1,"font-semibold",3,"ngClass"],["name","quantity_preparation","id","quantity_preparation","formControlName","quantity_preparation",1,"input",3,"ngClass"],[1,"col-span-3","text-sm"],["for","medicine_purpose",1,"font-semibold",3,"ngClass"],["name","medicine_purpose","id","medicine_purpose","formControlName","medicine_purpose",1,"input",3,"change","ngClass"],["class","col-span-3 text-sm",4,"ngIf"],["for","remarks",1,"font-semibold",3,"ngClass"],["name","remarks","id","remarks","formControlName","remarks","type","text",1,"input",3,"ngClass"],["id","show_errors","class","relative mx-10 col-span-8 bg-red-200 rounded border border-red-300 text-red-900 text-sm mb-5",4,"ngIf"],[1,"flex","justify-end","mr-10","py-3","rounded-b"],["type","button",1,"btn-save","px-10","bg-gray-400","mr-5",3,"click","disabled"],["type","button",1,"btn-save","px-10","disabled:bg-gray-300",3,"click","disabled"],[3,"icon",4,"ngIf"],["animation","spin",3,"icon",4,"ngIf"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"col-span-3","mt-5","mx-5","px-5","py-3","rounded-md","border","border-yellow-500","bg-yellow-100"],[1,"col-span-3","mt-5","mx-5"],["for","brand_name",1,"font-semibold",3,"ngClass"],["name","brand_name","id","brand_name","formControlName","brand_name","type","text",1,"input",3,"ngClass"],[1,"invalid-alert"],[4,"ngIf"],[1,"font-semibold"],["for","added_medicine",1,"font-semibold",3,"ngClass"],["name","added_medicine","id","added_medicine","formControlName","added_medicine","type","text",1,"input",3,"ngClass"],[3,"value"],["for","purpose_other",1,"font-semibold",3,"ngClass"],["name","purpose_other","id","purpose_other","formControlName","purpose_other","type","text",1,"input",3,"ngClass"],["id","show_errors",1,"relative","mx-10","col-span-8","bg-red-200","rounded","border","border-red-300","text-red-900","text-sm","mb-5"],[1,"block","p-3","pl-10"],[1,"list-disc"],[4,"ngFor","ngForOf"],[3,"icon"],["animation","spin",3,"icon"]],template:function(r,i){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e.EFF(5," Prescribe medicine "),e.k0s()(),e.j41(6,"div",5)(7,"form",6)(8,"div",7),e.DNE(9,$,4,0,"div",8)(10,R,5,7,"div",9)(11,D,4,1,"div",9)(12,w,5,7,"div",10),e.j41(13,"div",11)(14,"label",12),e.EFF(15,"Dosage Qty."),e.k0s(),e.nrm(16,"input",13),e.DNE(17,Y,2,1,"div",14),e.k0s(),e.j41(18,"div",11)(19,"label",15),e.EFF(20,"Dosage unit"),e.k0s(),e.j41(21,"select",16),e.DNE(22,M,2,2,"option",17),e.k0s(),e.DNE(23,N,2,1,"div",14),e.k0s(),e.j41(24,"div",11)(25,"label",18),e.EFF(26,"Dosage regimen"),e.k0s(),e.j41(27,"select",19),e.DNE(28,P,2,2,"option",17),e.k0s(),e.DNE(29,L,2,1,"div",14),e.k0s(),e.j41(30,"div",11)(31,"label",20),e.EFF(32,"Medicine Route"),e.k0s(),e.j41(33,"select",21),e.DNE(34,p,2,2,"option",17),e.k0s(),e.DNE(35,d,2,1,"div",14),e.k0s(),e.j41(36,"div",11)(37,"label",22),e.EFF(38,"Duration"),e.k0s(),e.nrm(39,"input",23),e.DNE(40,m,2,1,"div",14),e.k0s(),e.j41(41,"div",11)(42,"label",24),e.EFF(43,"Duration frequency"),e.k0s(),e.j41(44,"select",25),e.DNE(45,b,2,2,"option",17),e.k0s(),e.DNE(46,j,2,1,"div",14),e.k0s(),e.j41(47,"div",11)(48,"label",26),e.EFF(49,"Quantity"),e.k0s(),e.nrm(50,"input",27),e.DNE(51,U,2,1,"div",14),e.k0s(),e.j41(52,"div",11)(53,"label",28),e.EFF(54,"Preparation"),e.k0s(),e.j41(55,"select",29),e.DNE(56,J,2,2,"option",17),e.k0s(),e.DNE(57,K,2,1,"div",14),e.k0s(),e.j41(58,"div",30)(59,"label",31),e.EFF(60,"Medicine purpose"),e.k0s(),e.j41(61,"select",32),e.bIt("change",function(){return i.checkPurpose()}),e.DNE(62,z,2,2,"option",17),e.k0s(),e.DNE(63,Q,2,1,"div",14),e.k0s(),e.DNE(64,te,5,7,"div",33),e.j41(65,"div",30)(66,"label",34),e.EFF(67,"Remarks"),e.k0s(),e.nrm(68,"input",35),e.k0s()(),e.DNE(69,ie,5,3,"div",36),e.k0s()(),e.j41(70,"div",37)(71,"button",38),e.bIt("click",function(){return i.closeModal()}),e.EFF(72,"Close"),e.k0s(),e.j41(73,"button",39),e.bIt("click",function(){return i.onSubmit()}),e.DNE(74,se,1,1,"fa-icon",40)(75,oe,1,1,"fa-icon",41),e.EFF(76),e.k0s()()()()(),e.nrm(77,"div",42)),2&r&&(e.R7$(7),e.Y8G("formGroup",i.prescriptionForm),e.R7$(2),e.Y8G("ngIf",i.selected_drug.new_drug),e.R7$(),e.Y8G("ngIf",i.selected_drug.new_drug),e.R7$(),e.Y8G("ngIf",!i.add_drug&&!i.f.added_medicine.value),e.R7$(),e.Y8G("ngIf",i.f.added_medicine.value),e.R7$(2),e.Y8G("ngClass",e.eq3(47,g,i.is_saving&&i.f.dosage_quantity.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(49,f,i.is_saving&&i.f.dosage_quantity.errors)),e.R7$(),e.Y8G("ngIf",i.is_saving&&i.f.dosage_quantity.errors),e.R7$(2),e.Y8G("ngClass",e.eq3(51,g,i.is_saving&&i.f.dosage_uom.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(53,f,i.is_saving&&i.f.dosage_uom.errors)),e.R7$(),e.Y8G("ngForOf",i.drug_uom),e.R7$(),e.Y8G("ngIf",i.is_saving&&i.f.dosage_uom.errors),e.R7$(2),e.Y8G("ngClass",e.eq3(55,g,i.is_saving&&i.f.dose_regimen.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(57,f,i.is_saving&&i.f.dose_regimen.errors)),e.R7$(),e.Y8G("ngForOf",i.drug_regimen),e.R7$(),e.Y8G("ngIf",i.is_saving&&i.f.dose_regimen.errors),e.R7$(2),e.Y8G("ngClass",e.eq3(59,g,i.is_saving&&i.f.medicine_route_code.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(61,f,i.is_saving&&i.f.medicine_route_code.errors)),e.R7$(),e.Y8G("ngForOf",i.drug_route),e.R7$(),e.Y8G("ngIf",i.is_saving&&i.f.medicine_route_code.errors),e.R7$(2),e.Y8G("ngClass",e.eq3(63,g,i.is_saving&&i.f.duration.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(65,f,i.is_saving&&i.f.duration_intake.errors)),e.R7$(),e.Y8G("ngIf",i.is_saving&&i.f.duration_intake.errors),e.R7$(2),e.Y8G("ngClass",e.eq3(67,g,i.is_saving&&i.f.duration_frequency.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(69,f,i.is_saving&&i.f.duration_frequency.errors)),e.R7$(),e.Y8G("ngForOf",i.drug_frequency),e.R7$(),e.Y8G("ngIf",i.is_saving&&i.f.duration_frequency.errors),e.R7$(2),e.Y8G("ngClass",e.eq3(71,g,i.is_saving&&i.f.quantity.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(73,f,i.is_saving&&i.f.quantity.errors)),e.R7$(),e.Y8G("ngIf",i.is_saving&&i.f.quantity.errors),e.R7$(2),e.Y8G("ngClass",e.eq3(75,g,i.is_saving&&i.f.quantity_preparation.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(77,f,i.is_saving&&i.f.quantity_preparation.errors)),e.R7$(),e.Y8G("ngForOf",i.drug_preparation),e.R7$(),e.Y8G("ngIf",i.is_saving&&i.f.quantity_preparation.errors),e.R7$(2),e.Y8G("ngClass",e.eq3(79,g,i.is_saving&&i.f.medicine_purpose.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(81,f,i.is_saving&&i.f.medicine_purpose.errors)),e.R7$(),e.Y8G("ngForOf",i.drug_purpose),e.R7$(),e.Y8G("ngIf",i.is_saving&&i.f.medicine_purpose.errors),e.R7$(),e.Y8G("ngIf","99"===i.prescriptionForm.value.medicine_purpose),e.R7$(2),e.Y8G("ngClass",e.eq3(83,g,i.is_saving&&i.f.remarks.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(85,f,i.is_saving&&i.f.remarks.errors)),e.R7$(),e.Y8G("ngIf",i.submit_errors),e.R7$(2),e.Y8G("disabled",i.is_loading),e.R7$(2),e.Y8G("disabled",i.is_loading||i.prescriptionForm.invalid),e.R7$(),e.Y8G("ngIf",!i.is_loading),e.R7$(),e.Y8G("ngIf",i.is_loading),e.R7$(),e.SpI(" ",i.is_loading?"Saving":"Save"," "))},dependencies:[s.MD,s.YU,s.Sq,s.bT,s.lG,h.dX,h.aY,a.YN,a.qT,a.xH,a.y7,a.me,a.Q0,a.wz,a.BC,a.cb,a.X1,a.j4,a.JD]})}return n})();const ae=n=>({"bg-gray-50":n});function de(n,o){if(1&n){const t=e.RV6();e.j41(0,"div",27)(1,"button",28),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.showLibDrugs())}),e.EFF(2," Show Library "),e.k0s()()}}function le(n,o){if(1&n&&(e.j41(0,"tr")(1,"td",23)(2,"div",24)(3,"div",25),e.EFF(4," No records found... "),e.k0s(),e.DNE(5,de,3,0,"div",26),e.k0s()()()),2&n){const t=e.XpG();e.R7$(5),e.Y8G("ngIf",!t.lib_drug_table)}}function _e(n,o){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.nrm(2,"br"),e.EFF(3),e.nrm(4,"br"),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.konsulta_medicine?t.konsulta_medicine.generic.desc:""," "),e.R7$(2),e.SpI(" ",t.konsulta_medicine?t.konsulta_medicine.desc:""," ")}}function ce(n,o){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.nrm(2,"br"),e.k0s()),2&n){let t;const r=e.XpG().$implicit;e.R7$(),e.SpI("",null!==(t=r.added_medicine)&&void 0!==t?t:""," ")}}function ue(n,o){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.generic_desc," ")}}function pe(n,o){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.E5c(" ",t.dosage_quantity," ",t.unit_of_measurement.desc," (",t.unit_of_measurement.code,") ")}}function me(n,o){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.desc," ")}}function ge(n,o){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.nrm(2,"br"),e.EFF(3),e.nrm(4,"br"),e.EFF(5),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.regimen.desc," "),e.R7$(2),e.Lme(" ",t.duration_intake," ",t.frequency.desc," "),e.R7$(2),e.Lme(" ",t.quantity," ",t.preparation.desc," ")}}function fe(n,o){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.nrm(2,"br"),e.EFF(3),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.Lme(" ",t.unit_desc," ",t.package_desc," "),e.R7$(2),e.SpI(" ",t.form_desc," ")}}function he(n,o){if(1&n){const t=e.RV6();e.j41(0,"tr",29),e.bIt("click",function(){const i=e.eBV(t).$implicit,_=e.XpG();return e.Njj(_.selectDrugs(i))}),e.j41(1,"th",30)(2,"span"),e.EFF(3),e.nrm(4,"br"),e.k0s(),e.DNE(5,_e,5,2,"span",18)(6,ce,3,1,"span",18)(7,ue,2,1,"span",18),e.k0s(),e.j41(8,"td",31),e.DNE(9,pe,2,3,"span",18)(10,me,2,1,"span",18),e.k0s(),e.j41(11,"td",31),e.DNE(12,ge,6,5,"span",18)(13,fe,4,3,"span",18),e.k0s(),e.nrm(14,"td",31),e.k0s()}if(2&n){const t=o.$implicit;e.Y8G("ngClass",e.eq3(9,ae,o.odd)),e.R7$(3),e.JRh(t.brand_name),e.R7$(2),e.Y8G("ngIf",t.konsulta_medicine),e.R7$(),e.Y8G("ngIf",t.added_medicine),e.R7$(),e.Y8G("ngIf",!t.id),e.R7$(2),e.Y8G("ngIf",t.id),e.R7$(),e.Y8G("ngIf",!t.id),e.R7$(2),e.Y8G("ngIf",t.id),e.R7$(),e.Y8G("ngIf",!t.id)}}function be(n,o){if(1&n){const t=e.RV6();e.j41(0,"div",32)(1,"div",33)(2,"div",34)(3,"p",35),e.EFF(4," Showing "),e.j41(5,"span",36),e.EFF(6),e.k0s(),e.EFF(7," to "),e.j41(8,"span",36),e.EFF(9),e.k0s(),e.EFF(10," of "),e.j41(11,"span",36),e.EFF(12),e.k0s(),e.EFF(13," results "),e.k0s()(),e.j41(14,"div")(15,"nav",37)(16,"button",38),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.loadMedicineList(1))}),e.nrm(17,"fa-icon",39),e.k0s(),e.j41(18,"button",40),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.loadMedicineList(i.current_page-1))}),e.nrm(19,"fa-icon",39),e.EFF(20,"Previous "),e.k0s(),e.j41(21,"button",40),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.loadMedicineList(i.current_page+1))}),e.EFF(22," Next"),e.nrm(23,"fa-icon",41),e.k0s(),e.j41(24,"button",42),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.loadMedicineList(i.last_page))}),e.nrm(25,"fa-icon",41),e.k0s()()()()()}if(2&n){const t=e.XpG();e.R7$(6),e.JRh(t.from),e.R7$(3),e.JRh(t.to),e.R7$(3),e.JRh(t.total),e.R7$(4),e.Y8G("disabled",1===t.current_page),e.R7$(),e.Y8G("icon",t.faAnglesLeft),e.R7$(),e.Y8G("disabled",1===t.current_page),e.R7$(),e.Y8G("icon",t.faChevronLeft),e.R7$(2),e.Y8G("disabled",t.current_page===t.last_page),e.R7$(2),e.Y8G("icon",t.faChevronRight),e.R7$(),e.Y8G("disabled",t.current_page===t.last_page),e.R7$(),e.Y8G("icon",t.faAnglesRight)}}let ve=(()=>{class n{selectDrugs(t){delete t.id,t.new_drug=this.lib_drug_table,this.openAddForm.emit(t),this.toggleList.emit()}closeModal(){this.toggleList.emit()}showLibDrugs(){this.lib_drug_table=!0,this.loadMedicineList(1)}addNewDrug(t){this.openAddForm.emit(t),this.toggleList.emit()}loadMedicineList(t){let r=this.lib_drug_table?"libraries/konsulta-medicines":"medicine/list",i={params:{}};this.search_item&&(i.params["filter[search]"]=this.search_item),t&&(i.params.page=t),i.params.per_page=this.per_page,this.http.get(r,i).subscribe({next:_=>{this.drug_list=_.data,this.current_page=_.meta.current_page,this.last_page=_.meta.last_page,this.from=_.meta.from,this.to=_.meta.to,this.total=_.meta.total},error:_=>console.log(_)})}constructor(t){this.http=t,this.openAddForm=new e.bkB,this.toggleList=new e.bkB,this.faAnglesLeft=u.rNr,this.faChevronLeft=u.Wzs,this.faChevronRight=u.XkK,this.faAnglesRight=u.up_,this.faSearch=u.MjD,this.faEdit=u.MT7,this.faAdd=u.vkJ,this.faCircleXmark=u.bnw,this.is_updating=!1,this.show_lib_drug=!1,this.per_page=10,this.lib_drug_table=!1}ngOnInit(){this.loadMedicineList()}static#e=this.\u0275fac=function(r){return new(r||n)(e.rXU(v.k))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-drug-list"]],outputs:{openAddForm:"openAddForm",toggleList:"toggleList"},standalone:!0,features:[e.aNF],decls:30,vars:6,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-5xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"flex","justify-end"],[1,"border","border-gray-400","rounded-md","bg-white"],["type","text","placeholder","Search drugs",1,"form-input","border-0","text-sm","p-1","m-1","border-r","border-gray-400",3,"ngModelChange","keyup.enter","ngModel"],["type","button",1,"text-blue-500","w-9","h-9",3,"click"],[1,"-ml-1",3,"icon"],["type","button",1,"text-white","w-9","h-9",3,"click"],[1,"-mr-4",3,"icon"],[1,"h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"overflow-x-auto","relative","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400","mb-5"],[1,"sticky","top-0","text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6"],[1,"overflow-y-auto"],[4,"ngIf"],["class","hover:bg-blue-200 cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"flex","justify-end","py-4","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["class","bg-white py-3 flex items-center justify-between sm:px-6",4,"ngIf"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],["colspan","9"],[1,"grid","grid-cols-1","w-full","mt-10"],[1,"text-center","italic"],["class","flex justify-center mt-3",4,"ngIf"],[1,"flex","justify-center","mt-3"],["type","button",1,"btn-save",3,"click"],[1,"hover:bg-blue-200","cursor-pointer",3,"click","ngClass"],["scope","row",1,"py-4","px-6","font-medium","whitespace-nowrap"],[1,"py-4","px-6"],[1,"bg-white","py-3","flex","items-center","justify-between","sm:px-6"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"mr-3"],[1,"text-sm","text-gray-700"],[1,"font-medium"],["aria-label","Pagination",1,"relative","z-0","inline-flex","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","disabled"],[1,"block","h-15","w-15","text-gray-500","pr-1",3,"icon"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","bg-white","text-sm","font-medium","text-gray-700","hover:bg-gray-50",3,"click","disabled"],[1,"h-5","w-5","text-gray-500",3,"icon"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","disabled"]],template:function(r,i){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e.EFF(5," Drugs library "),e.k0s(),e.j41(6,"div",5)(7,"div",6)(8,"input",7),e.mxI("ngModelChange",function(S){return e.DH7(i.search_item,S)||(i.search_item=S),S}),e.bIt("keyup.enter",function(){return i.loadMedicineList()}),e.k0s(),e.j41(9,"button",8),e.bIt("click",function(){return i.loadMedicineList()}),e.nrm(10,"fa-icon",9),e.k0s()(),e.j41(11,"button",10),e.bIt("click",function(){return i.closeModal()}),e.nrm(12,"fa-icon",11),e.k0s()()(),e.j41(13,"div",12)(14,"div",13)(15,"table",14)(16,"thead",15)(17,"tr")(18,"th",16),e.EFF(19,"Drug Name"),e.k0s(),e.j41(20,"th",16),e.EFF(21,"Dosage"),e.k0s(),e.j41(22,"th",16),e.EFF(23,"Package"),e.k0s()()(),e.j41(24,"tbody",17),e.DNE(25,le,6,1,"tr",18)(26,he,15,11,"tr",19),e.k0s()()()(),e.j41(27,"div",20),e.DNE(28,be,26,11,"div",21),e.k0s()()()(),e.nrm(29,"div",22)),2&r&&(e.R7$(8),e.R50("ngModel",i.search_item),e.R7$(2),e.Y8G("icon",i.faSearch),e.R7$(2),e.Y8G("icon",i.faCircleXmark),e.R7$(13),e.Y8G("ngIf",0===(null==i.drug_list?null:i.drug_list.length)||!i.drug_list),e.R7$(),e.Y8G("ngForOf",i.drug_list),e.R7$(2),e.Y8G("ngIf",(null==i.drug_list?null:i.drug_list.length)>=1))},dependencies:[s.MD,s.YU,s.Sq,s.bT,h.dX,h.aY,a.YN,a.me,a.BC,a.vS]})}return n})();var Fe=l(3825),ke=l(3895);const A=n=>({"rounded-b":n});function xe(n,o){if(1&n){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleModal())}),e.nrm(1,"fa-icon",20),e.EFF(2," epress "),e.k0s()}if(2&n){const t=e.XpG();e.R7$(),e.Y8G("icon",t.faReceipt)}}function ye(n,o){if(1&n){const t=e.RV6();e.j41(0,"button",21),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.navigateTo("dispensing"))}),e.nrm(1,"fa-icon",20),e.EFF(2," dispensing "),e.k0s()}if(2&n){const t=e.XpG();e.R7$(),e.Y8G("icon",t.faPrescriptionBottleMedical)}}function Ce(n,o){if(1&n){const t=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleList())}),e.nrm(1,"fa-icon",20),e.EFF(2," add drugs "),e.k0s()}if(2&n){const t=e.XpG();e.R7$(),e.Y8G("icon",t.faAdd)}}function Re(n,o){if(1&n){const t=e.RV6();e.j41(0,"tr",29)(1,"td",30),e.EFF(2),e.nrm(3,"br")(4,"br"),e.k0s(),e.j41(5,"td",31),e.EFF(6),e.nrm(7,"br")(8,"br"),e.EFF(9),e.k0s(),e.j41(10,"td",31),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td",31),e.EFF(14),e.k0s(),e.j41(15,"td",31),e.EFF(16),e.k0s(),e.j41(17,"td",32)(18,"button",33),e.bIt("click",function(){const i=e.eBV(t).$implicit,_=e.XpG(2);return e.Njj(_.openAddForm(i))}),e.nrm(19,"fa-icon",34),e.k0s(),e.j41(20,"button",35),e.bIt("click",function(){const i=e.eBV(t).$implicit,_=e.XpG(2);return e.Njj(_.toggleModal("delete-item",i))}),e.nrm(21,"fa-icon",36),e.k0s()()()}if(2&n){const t=o.$implicit,r=e.XpG(2);e.R7$(2),e.Lme(" ",t.konsulta_medicine?t.konsulta_medicine.desc:t.added_medicine," ",t.medicine?t.medicine.gen_name:""," "),e.R7$(4),e.SjE(" ",t.dosage_quantity," ",t.unit_of_measurement.desc," ",t.regimen.desc," ",t.duration_intake," ",t.frequency.desc," "),e.R7$(3),e.SpI(" Remarks: ",t.remarks," "),e.R7$(2),e.SpI(" ",e.brH(12,13,t.prescription_date,"MM/dd/yyyy","Asia/Manila")," "),e.R7$(3),e.SpI(" ",t.quantity," "),e.R7$(2),e.SpI(" ",t.preparation.desc," "),e.R7$(3),e.Y8G("icon",r.faEdit),e.R7$(2),e.Y8G("icon",r.faTrashCan)}}function Ge(n,o){if(1&n&&(e.j41(0,"table",23)(1,"thead")(2,"tr",24)(3,"th",25),e.EFF(4,"Medicine"),e.k0s(),e.j41(5,"th",25),e.EFF(6,"Intake"),e.k0s(),e.j41(7,"th",26),e.EFF(8,"Prescription Date"),e.k0s(),e.j41(9,"th",26),e.EFF(10,"Quantity"),e.k0s(),e.j41(11,"th",26),e.EFF(12,"Unit of Measurement"),e.k0s(),e.j41(13,"th",27),e.EFF(14,"Action"),e.k0s()()(),e.j41(15,"tbody"),e.DNE(16,Re,22,17,"tr",28),e.k0s()()),2&n){const t=e.XpG();e.R7$(16),e.Y8G("ngForOf",t.prescriptions)("ngForTrackBy",t.identify)}}function Ee(n,o){if(1&n&&e.nrm(0,"fa-icon",44),2&n){const t=e.XpG(3);e.Y8G("icon",t.faSpinner)}}function De(n,o){if(1&n&&e.nrm(0,"fa-icon",45),2&n){const t=e.XpG(3);e.Y8G("icon",t.faSave)}}function je(n,o){if(1&n){const t=e.RV6();e.j41(0,"button",41),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.onSubmit())}),e.DNE(1,Ee,1,1,"fa-icon",42)(2,De,1,1,"fa-icon",43),e.EFF(3),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("disabled",t.is_saving),e.R7$(),e.Y8G("ngIf",t.is_saving),e.R7$(),e.Y8G("ngIf",!t.is_saving),e.R7$(),e.SpI(" ",t.is_saving?"Saving":"Save"," ")}}function $e(n,o){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"div",37)(2,"textarea",38),e.mxI("ngModelChange",function(i){e.eBV(t);const _=e.XpG();return e.DH7(_.consult_notes.plan,i)||(_.consult_notes.plan=i),e.Njj(i)}),e.k0s()(),e.j41(3,"div",39),e.DNE(4,je,4,4,"button",40),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(2),e.Y8G("disabled",t.consult_done||!t.allowed_to_edit),e.R50("ngModel",t.consult_notes.plan),e.R7$(2),e.Y8G("ngIf",!t.consult_done&&t.allowed_to_edit)}}function Ie(n,o){if(1&n){const t=e.RV6();e.j41(0,"app-drug-list",46),e.bIt("openAddForm",function(i){e.eBV(t);const _=e.XpG();return e.Njj(_.openAddForm(i))})("toggleList",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleList())}),e.k0s()}}function we(n,o){if(1&n){const t=e.RV6();e.j41(0,"app-drug-form",47),e.bIt("toggleForm",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleForm())}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("selected_drug",t.selected_drug)("consult_details",t.consult_details)("drug_uom",t.drug_uom)("drug_regimen",t.drug_regimen)("drug_purpose",t.drug_purpose)("drug_frequency",t.drug_frequency)("drug_preparation",t.drug_preparation)("drug_route",t.drug_route)("user_id",t.user_id)}}function Te(n,o){if(1&n){const t=e.RV6();e.j41(0,"app-epres",48),e.bIt("toggleModal",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleModal())}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("prescriptions",t.prescriptions)("consult_details",t.consult_details)}}function Ye(n,o){if(1&n){const t=e.RV6();e.j41(0,"app-delete-item",49),e.bIt("toggleModal",function(i){e.eBV(t);const _=e.XpG();return e.Njj(_.toggleModal(i))}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("delete_id",t.delete_id)("delete_desc",t.delete_desc)("url",t.url)}}let Me=(()=>{class n{navigateTo(t){this.router.navigate(["/patient/"+t,{id:this.consult_details.patient.id,consult_id:this.consult_details.id}])}openDeleteForm(t){this.selected_drug=t,this.toggleDeleteForm()}onSubmit(){this.is_saving=!0,this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,plan:this.consult_notes.plan}).subscribe({next:r=>{this.is_saving=!1,this.showToastr()},error:r=>{this.http.showError(r.error.message,"Prescription")}})}showToastr(){this.toastr.success("Successfully recorded!","Treatment plan")}openEditForm(t){this.selected_drug=t}openAddForm(t){this.selected_drug=t,this.toggleForm()}openDeleteModal(t){this.delete_id=t.id,this.modal["delete-item"]=!this.modal["delete-item"]}toggleDeleteForm(){this.show_delete_form=!this.show_delete_form,!1===this.show_delete_form&&this.loadPrescriptions()}toggleForm(){this.drug_uom&&this.drug_uom&&this.drug_purpose&&this.drug_frequency&&this.drug_preparation?this.show_form=!this.show_form:this.loadLibraries(),!1===this.show_form&&this.loadPrescriptions()}ngOnChanges(t){this.show_content=this.toggle_content,this.show_content_tx=this.toggle_content,!1===this.consult_details.consult_done&&(this.show_actions=!0),this.consult_details&&(this.consult_details.consult_notes&&(this.consult_notes=this.consult_details.consult_notes),this.consult_done=this.consult_details.consult_done)}loadLibraries(){this.libraries.forEach((t,r)=>{this.http.get("libraries/"+t.location).subscribe({next:i=>{this[t.var_name]=i.data,this.libraries.length-1===r&&(this.show_form=!0)},error:i=>{this.http.showError(i.error.message,t.var_name+" Library")}})})}toggleModal(t,r){t?(r&&(this.delete_id=r.id),this.modal[t]=!this.modal[t],this.loadPrescriptions()):this.show_epress=!this.show_epress}toggleList(){this.show_list=!this.show_list}identify(t,r){return r.id}loadPrescriptions(){this.http.get("medicine/prescriptions",{params:{sort:"-prescription_date",consult_id:this.consult_details.id}}).subscribe({next:r=>{r.data.length>0&&(this.prescriptions=r.data)},error:r=>{this.http.showError(r.error.message,"Prescription Library")}})}constructor(t,r,i){this.http=t,this.toastr=r,this.router=i,this.show_content=!0,this.show_list=!1,this.show_form=!1,this.show_delete_form=!1,this.show_actions=!1,this.show_content_tx=!1,this.is_saving=!1,this.consult_done=!1,this.faChevronCircleUp=u.AeV,this.faChevronCircleDown=u.DqM,this.faAdd=u.vkJ,this.faSave=F.hSh,this.faSpinner=u.z1G,this.faEdit=F.MT7,this.faTrash=u.yLS,this.faPrescriptionBottleMedical=u.F5L,this.faReceipt=u.Mf0,this.faTrashCan=F.sjs,this.consult_notes={plan:null},this.modal=[],this.delete_desc="Prescription",this.url="medicine/prescriptions/",this.libraries=[{var_name:"drug_uom",location:"unit-of-measurements"},{var_name:"drug_regimen",location:"dose-regimens"},{var_name:"drug_purpose",location:"purposes"},{var_name:"drug_frequency",location:"duration-frequencies"},{var_name:"drug_preparation",location:"preparations"},{var_name:"drug_route",location:"medicine-route"}],this.show_epress=!1}ngOnInit(){this.loadPrescriptions()}static#e=this.\u0275fac=function(r){return new(r||n)(e.rXU(v.k),e.rXU(y.tw),e.rXU(ke.Ix))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-prescription"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",with_credentials:"with_credentials",allowed_to_edit:"allowed_to_edit",user_id:"user_id"},standalone:!0,features:[e.OA$,e.aNF],decls:23,vars:16,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","flex","justify-between"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-amber-500","flex","justify-between",3,"ngClass"],["type","button","class","ml-3 text-sm bg-white text-green-500 px-3 rounded-full",3,"click",4,"ngIf"],["type","button","class","text-sm bg-white text-amber-500 px-3 rounded-full",3,"click",4,"ngIf"],["type","button","class","ml-3 text-sm bg-white text-blue-500 px-3 rounded-full",3,"click",4,"ngIf"],["class","w-full table-auto p-5",4,"ngIf"],[1,"rounded-md","border","border-solid","border-gray-300","mt-5"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[3,"openAddForm","toggleList",4,"ngIf"],[3,"selected_drug","consult_details","drug_uom","drug_regimen","drug_purpose","drug_frequency","drug_preparation","drug_route","user_id","toggleForm",4,"ngIf"],[3,"prescriptions","consult_details","toggleModal",4,"ngIf"],[3,"delete_id","delete_desc","url","toggleModal",4,"ngIf"],["type","button",1,"ml-3","text-sm","bg-white","text-green-500","px-3","rounded-full",3,"click"],[1,"pr-1",3,"icon"],["type","button",1,"text-sm","bg-white","text-amber-500","px-3","rounded-full",3,"click"],["type","button",1,"ml-3","text-sm","bg-white","text-blue-500","px-3","rounded-full",3,"click"],[1,"w-full","table-auto","p-5"],[1,"align-top"],["scope","col",1,"text-center","py-3","px-3","w-3/12"],["scope","col",1,"text-center","py-3","px-3","w-1/12"],["scope","col",1,"text-center","py-3","px-3","w-2/12"],["class","bg-white border-b last:border-0 text-sm align-top",4,"ngFor","ngForOf","ngForTrackBy"],[1,"bg-white","border-b","last:border-0","text-sm","align-top"],[1,"py-4","px-3"],["scope","row",1,"py-4","px-3","font-medium","text-gray-900"],[1,"text-sm","text-center","mb-5","align-middle"],[1,"mr-3",3,"click"],[1,"text-amber-500",3,"icon"],[3,"click"],[1,"text-rose-500",3,"icon"],[1,"grid","grid-cols-1","px-4","pb-4","mt-4"],["rows","3","id","plan","placeholder","Treatment plan",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"ngModelChange","disabled","ngModel"],[1,"flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"click","disabled"],["class","mr-2","animation","spin",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"],[3,"openAddForm","toggleList"],[3,"toggleForm","selected_drug","consult_details","drug_uom","drug_regimen","drug_purpose","drug_frequency","drug_preparation","drug_route","user_id"],[3,"toggleModal","prescriptions","consult_details"],[3,"toggleModal","delete_id","delete_desc","url"]],template:function(r,i){1&r&&(e.nrm(0,"hr",0),e.j41(1,"div",1)(2,"div",2),e.EFF(3," Prescription "),e.k0s(),e.j41(4,"div",3)(5,"div",4)(6,"span",5),e.EFF(7," Prescriptions "),e.j41(8,"div"),e.DNE(9,xe,3,1,"button",6)(10,ye,3,1,"button",7)(11,Ce,3,1,"button",8),e.k0s()(),e.DNE(12,Ge,17,2,"table",9),e.k0s(),e.j41(13,"div",10)(14,"span",11),e.EFF(15," Treatment Plan "),e.j41(16,"button",12),e.bIt("click",function(){return i.show_content_tx=!i.show_content_tx}),e.nrm(17,"fa-icon",13),e.k0s()(),e.DNE(18,$e,5,3,"div",14),e.k0s()()(),e.DNE(19,Ie,1,0,"app-drug-list",15)(20,we,1,9,"app-drug-form",16)(21,Te,1,2,"app-epres",17)(22,Ye,1,3,"app-delete-item",18)),2&r&&(e.R7$(6),e.Y8G("ngClass",e.eq3(12,A,!i.show_content)),e.R7$(3),e.Y8G("ngIf",(null==i.consult_details?null:i.consult_details.is_konsulta)&&i.with_credentials&&i.prescriptions),e.R7$(),e.Y8G("ngIf",i.prescriptions),e.R7$(),e.Y8G("ngIf",i.show_actions),e.R7$(),e.Y8G("ngIf",i.show_content),e.R7$(2),e.Y8G("ngClass",e.eq3(14,A,!i.show_content_tx)),e.R7$(3),e.Y8G("icon",i.show_content_tx?i.faChevronCircleUp:i.faChevronCircleDown),e.R7$(),e.Y8G("ngIf",i.show_content_tx),e.R7$(),e.Y8G("ngIf",i.show_list),e.R7$(),e.Y8G("ngIf",i.show_form),e.R7$(),e.Y8G("ngIf",i.show_epress),e.R7$(),e.Y8G("ngIf",i.modal["delete-item"]))},dependencies:[s.MD,s.YU,s.Sq,s.bT,s.vh,h.dX,h.aY,re,ve,a.YN,a.me,a.BC,a.vS,Fe.c]})}return n})()}}]);