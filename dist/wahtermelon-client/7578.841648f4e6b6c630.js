"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[7578],{2505:(pe,B,f)=>{f.d(B,{_:()=>S});var a=f(4438),t=f(177),G=f(8793),y=f(7673),e=f(5964),g=f(3294),N=f(152),w=f(8141),F=f(5558),T=f(9437),V=f(6354),O=f(1413),P=f(614),A=f(5383),q=f(60),X=f(8761),D=f(9417),J=f(3318),U=f(5794);const H=R=>({"rounded-b":R});function L(R,M){if(1&R&&(a.j41(0,"div",18)(1,"h5",19)(2,"strong"),a.EFF(3),a.k0s(),a.EFF(4),a.k0s()()),2&R){const b=M.item,k=M.searchTerm;a.R7$(),a.Y8G("ngOptionHighlight",k),a.R7$(2),a.SpI("",b.icd10_code,":"),a.R7$(),a.SpI(" ",b.icd10_desc,"")}}function W(R,M){if(1&R&&a.nrm(0,"fa-icon",23),2&R){const b=a.XpG(3);a.Y8G("icon",b.faSpinner)}}function K(R,M){if(1&R&&a.nrm(0,"fa-icon",24),2&R){const b=a.XpG(3);a.Y8G("icon",b.faSave)}}function z(R,M){if(1&R){const b=a.RV6();a.j41(0,"button",20),a.bIt("click",function(){a.eBV(b);const j=a.XpG(2);return a.Njj(j.onSubmit())}),a.DNE(1,W,1,1,"fa-icon",21)(2,K,1,1,"fa-icon",22),a.EFF(3),a.k0s()}if(2&R){const b=a.XpG(2);a.Y8G("disabled",b.is_saving),a.R7$(),a.Y8G("ngIf",b.is_saving),a.R7$(),a.Y8G("ngIf",!b.is_saving),a.R7$(),a.SpI(" ",b.is_saving?"Saving":"Save"," ")}}function Q(R,M){if(1&R){const b=a.RV6();a.j41(0,"div")(1,"div",8)(2,"button",9),a.nrm(3,"fa-icon",10),a.k0s(),a.j41(4,"div",11)(5,"ng-select",12),a.nI1(6,"async"),a.mxI("ngModelChange",function(j){a.eBV(b);const $=a.XpG();return a.DH7($.selectedFdx,j)||($.selectedFdx=j),a.Njj(j)}),a.DNE(7,L,5,3,"ng-template",13),a.k0s()()(),a.j41(8,"div",14)(9,"textarea",15),a.mxI("ngModelChange",function(j){a.eBV(b);const $=a.XpG();return a.DH7($.fdx_remarks,j)||($.fdx_remarks=j),a.Njj(j)}),a.k0s()(),a.j41(10,"div",16),a.DNE(11,z,4,4,"button",17),a.k0s()()}if(2&R){const b=a.XpG();a.R7$(3),a.Y8G("icon",b.faPlusSquare),a.R7$(2),a.Y8G("items",a.bMT(6,10,b.fdx$))("multiple",!0)("loading",b.fdxLoading)("typeahead",b.searchInput$),a.R50("ngModel",b.selectedFdx),a.Y8G("disabled",b.consult_done||!b.allowed_to_edit),a.R7$(4),a.Y8G("disabled",b.consult_done||!b.allowed_to_edit),a.R50("ngModel",b.fdx_remarks),a.R7$(2),a.Y8G("ngIf",!b.consult_done&&b.allowed_to_edit)}}let S=(()=>{class R{onSubmit(){this.is_saving=!0,this.http.post("consultation/final-diagnosis",{notes_id:this.consult_details.consult_notes.id,final_diagnosis:this.selectedFdx}).subscribe({next:k=>{this.saveNotes()},error:k=>console.log(k)})}saveNotes(){this.fdx_remarks?this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,fdx_remarks:this.fdx_remarks}).subscribe({next:()=>{this.showToastr(),this.loadConsult.emit()},error:k=>console.log(k)}):this.showToastr()}showToastr(){this.is_saving=!1,this.toastr.success("Successfully updated!","Final Diagnosis")}loadFdx(b){this.fdx$=(0,G.x)((0,y.of)(b),this.searchInput$.pipe((0,e.p)(k=>null!==k&&k.length>=this.minLengthTerm),(0,g.F)(),(0,N.B)(800),(0,w.M)(()=>this.fdxLoading=!0),(0,F.n)(k=>this.getFdx(k).pipe((0,T.W)(()=>(0,y.of)([])),(0,w.M)(()=>this.fdxLoading=!1)))))}getFdx(b=null){return this.http.get("libraries/icd10",{params:{"filter[search]":b}}).pipe((0,V.T)(k=>k.data))}loadSelected(){let b=[],k=[];this.final_dx&&Object.keys(this.final_dx).length>0?(Object.entries(this.final_dx).forEach(([j,$],ee)=>{let Y=$;b.push(Y.icd10_code.toString()),k.push(Y.lib_icd10)}),this.loadFdx(k),this.selectedFdx=b):this.loadFdx([])}ngOnChanges(b){this.show_content=this.toggle_content,this.consult_details&&this.consult_details.consult_notes?(this.final_dx=this.consult_details.consult_notes.finaldx,this.fdx_remarks=this.consult_details.consult_notes.fdx_remarks,this.consult_done=this.consult_details.consult_done,this.loadSelected()):this.loadFdx([])}constructor(b,k){this.http=b,this.toastr=k,this.loadConsult=new a.bkB,this.faPlusSquare=P.CHJ,this.faChevronCircleUp=A.AeV,this.faChevronCircleDown=A.DqM,this.faSave=P.hSh,this.faSpinner=A.z1G,this.fdxLoading=!1,this.show_content=!0,this.is_saving=!1,this.consult_done=!1,this.searchInput$=new O.B,this.minLengthTerm=3}static{this.\u0275fac=function(k){return new(k||R)(a.rXU(J.k),a.rXU(U.tw))}}static{this.\u0275cmp=a.VBU({type:R,selectors:[["app-final-dx"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",allowed_to_edit:"allowed_to_edit"},outputs:{loadConsult:"loadConsult"},features:[a.OA$],decls:10,vars:5,consts:[[1,"grid","grid-cols-10","mt-4"],[1,"col-span-2","pt-2"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[1,"flex","mb-2","p-4"],["type","submit",1,"inline-flex","p-1","items-center","text-gray-50","bg-sky-400","rounded-l-md","border","border-gray-300"],[1,"text-white","fa-xl",3,"icon"],[1,"chips-container"],["placeholder","search","typeToSearchText","search...","bindValue","icd10_code","bindLabel","icd10_desc","notFoundText","No records found",1,"select-chips",3,"ngModelChange","items","multiple","loading","typeahead","ngModel","disabled"],["ng-option-tmp",""],[1,"flex","px-4","pb-4"],["rows","3","id","fdx_remarks","placeholder","Final Diagnosis remarks",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"ngModelChange","disabled","ngModel"],[1,"flex","justify-between"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[1,"whitespace-normal"],[1,"text-gray-700",3,"ngOptionHighlight"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"click","disabled"],["class","mr-2","animation","spin",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(k,j){1&k&&(a.j41(0,"div",0)(1,"div",1),a.EFF(2," Final Diagnosis "),a.k0s(),a.j41(3,"div",2)(4,"div",3)(5,"span",4),a.EFF(6," Final Diagnosis "),a.j41(7,"button",5),a.bIt("click",function(){return j.show_content=!j.show_content}),a.nrm(8,"fa-icon",6),a.k0s()(),a.DNE(9,Q,12,12,"div",7),a.k0s()()()),2&k&&(a.R7$(5),a.Y8G("ngClass",a.eq3(3,H,!j.show_content)),a.R7$(3),a.Y8G("icon",j.show_content?j.faChevronCircleUp:j.faChevronCircleDown),a.R7$(),a.Y8G("ngIf",j.show_content))},dependencies:[t.MD,t.YU,t.bT,t.Jj,q.dX,q.aY,X.MQ,X.vr,X.Uq,D.YN,D.me,D.BC,D.vS,D.X1],encapsulation:2})}}return R})()},2038:(pe,B,f)=>{f.d(B,{W:()=>Xe});var a=f(177),t=f(5383),G=f(614),y=f(60),e=f(4438),g=f(9417),N=f(3318),w=f(5794);const F=n=>({"text-red-500":n}),T=n=>({"invalid-input":n});function V(n,p){1&n&&(e.j41(0,"div",47)(1,"strong"),e.EFF(2,"Note: "),e.k0s(),e.EFF(3,"Saving this prescription will automatically add new item in your drug list. "),e.k0s())}function O(n,p){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const i=e.XpG(3);e.R7$(),e.SpI(" ",i.required_message," ")}}function P(n,p){if(1&n&&(e.j41(0,"div",51),e.DNE(1,O,2,1,"div",52),e.k0s()),2&n){const i=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==i.f.brand_name.errors?null:i.f.brand_name.errors.required)}}function A(n,p){if(1&n&&(e.j41(0,"div",48)(1,"label",49),e.EFF(2,"Brand Name"),e.k0s(),e.nrm(3,"input",50),e.DNE(4,P,2,1,"div",14),e.k0s()),2&n){const i=e.XpG();e.R7$(),e.Y8G("ngClass",e.eq3(3,F,i.is_saving&&i.f.brand_name.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(5,T,i.is_saving&&i.f.brand_name.errors)),e.R7$(),e.Y8G("ngIf",i.is_saving&&i.f.brand_name.errors)}}function q(n,p){if(1&n&&(e.j41(0,"div",48)(1,"span",53),e.EFF(2,"Drug description:"),e.k0s(),e.EFF(3),e.k0s()),2&n){const i=e.XpG();e.R7$(3),e.SpI(" ",i.selected_drug.konsulta_medicine?i.selected_drug.konsulta_medicine.desc:i.selected_drug.desc," ")}}function X(n,p){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const i=e.XpG(3);e.R7$(),e.SpI(" ",i.required_message," ")}}function D(n,p){if(1&n&&(e.j41(0,"div",51),e.DNE(1,X,2,1,"div",52),e.k0s()),2&n){const i=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==i.f.added_medicine.errors?null:i.f.added_medicine.errors.required)}}function J(n,p){if(1&n&&(e.j41(0,"div",34)(1,"label",54),e.EFF(2,"Drug name"),e.k0s(),e.nrm(3,"input",55),e.DNE(4,D,2,1,"div",14),e.k0s()),2&n){const i=e.XpG();e.R7$(),e.Y8G("ngClass",e.eq3(3,F,i.is_saving&&i.f.added_medicine.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(5,T,i.is_saving&&i.f.added_medicine.errors)),e.R7$(),e.Y8G("ngIf",i.is_saving&&i.f.added_medicine.errors)}}function U(n,p){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const i=e.XpG(2);e.R7$(),e.SpI(" ",i.required_message," ")}}function H(n,p){if(1&n&&(e.j41(0,"div",51),e.DNE(1,U,2,1,"div",52),e.k0s()),2&n){const i=e.XpG();e.R7$(),e.Y8G("ngIf",null==i.f.dosage_quantity.errors?null:i.f.dosage_quantity.errors.required)}}function L(n,p){if(1&n&&(e.j41(0,"option",56),e.EFF(1),e.k0s()),2&n){const i=p.$implicit;e.Y8G("value",i.code),e.R7$(),e.JRh(i.desc)}}function W(n,p){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const i=e.XpG(2);e.R7$(),e.SpI(" ",i.required_message," ")}}function K(n,p){if(1&n&&(e.j41(0,"div",51),e.DNE(1,W,2,1,"div",52),e.k0s()),2&n){const i=e.XpG();e.R7$(),e.Y8G("ngIf",null==i.f.dosage_uom.errors?null:i.f.dosage_uom.errors.required)}}function z(n,p){if(1&n&&(e.j41(0,"option",56),e.EFF(1),e.k0s()),2&n){const i=p.$implicit;e.Y8G("value",i.code),e.R7$(),e.JRh(i.desc)}}function Q(n,p){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const i=e.XpG(2);e.R7$(),e.SpI(" ",i.required_message," ")}}function S(n,p){if(1&n&&(e.j41(0,"div",51),e.DNE(1,Q,2,1,"div",52),e.k0s()),2&n){const i=e.XpG();e.R7$(),e.Y8G("ngIf",null==i.f.dose_regimen.errors?null:i.f.dose_regimen.errors.required)}}function R(n,p){if(1&n&&(e.j41(0,"option",56),e.EFF(1),e.k0s()),2&n){const i=p.$implicit;e.Y8G("value",i.code),e.R7$(),e.JRh(i.desc)}}function M(n,p){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const i=e.XpG(2);e.R7$(),e.SpI(" ",i.required_message," ")}}function b(n,p){if(1&n&&(e.j41(0,"div",51),e.DNE(1,M,2,1,"div",52),e.k0s()),2&n){const i=e.XpG();e.R7$(),e.Y8G("ngIf",null==i.f.medicine_route_code.errors?null:i.f.medicine_route_code.errors.required)}}function k(n,p){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const i=e.XpG(2);e.R7$(),e.SpI(" ",i.required_message," ")}}function j(n,p){if(1&n&&(e.j41(0,"div",51),e.DNE(1,k,2,1,"div",52),e.k0s()),2&n){const i=e.XpG();e.R7$(),e.Y8G("ngIf",null==i.f.duration_intake.errors?null:i.f.duration_intake.errors.required)}}function $(n,p){if(1&n&&(e.j41(0,"option",56),e.EFF(1),e.k0s()),2&n){const i=p.$implicit;e.Y8G("value",i.code),e.R7$(),e.JRh(i.desc)}}function ee(n,p){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const i=e.XpG(2);e.R7$(),e.SpI(" ",i.required_message," ")}}function Y(n,p){if(1&n&&(e.j41(0,"div",51),e.DNE(1,ee,2,1,"div",52),e.k0s()),2&n){const i=e.XpG();e.R7$(),e.Y8G("ngIf",null==i.f.duration_frequency.errors?null:i.f.duration_frequency.errors.required)}}function te(n,p){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const i=e.XpG(2);e.R7$(),e.SpI(" ",i.required_message," ")}}function ie(n,p){if(1&n&&(e.j41(0,"div",51),e.DNE(1,te,2,1,"div",52),e.k0s()),2&n){const i=e.XpG();e.R7$(),e.Y8G("ngIf",null==i.f.quantity.errors?null:i.f.quantity.errors.required)}}function ne(n,p){if(1&n&&(e.j41(0,"option",56),e.EFF(1),e.k0s()),2&n){const i=p.$implicit;e.Y8G("value",i.code),e.R7$(),e.JRh(i.desc)}}function oe(n,p){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const i=e.XpG(2);e.R7$(),e.SpI(" ",i.required_message," ")}}function se(n,p){if(1&n&&(e.j41(0,"div",51),e.DNE(1,oe,2,1,"div",52),e.k0s()),2&n){const i=e.XpG();e.R7$(),e.Y8G("ngIf",null==i.f.quantity_preparation.errors?null:i.f.quantity_preparation.errors.required)}}function re(n,p){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const i=e.XpG(2);e.R7$(),e.SpI(" ",i.required_message," ")}}function ae(n,p){if(1&n&&(e.j41(0,"div",51),e.DNE(1,re,2,1,"div",52),e.k0s()),2&n){const i=e.XpG();e.R7$(),e.Y8G("ngIf",null==i.f.unit_price.errors?null:i.f.unit_price.errors.required)}}function le(n,p){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const i=e.XpG(2);e.R7$(),e.SpI(" ",i.required_message," ")}}function de(n,p){if(1&n&&(e.j41(0,"div",51),e.DNE(1,le,2,1,"div",52),e.k0s()),2&n){const i=e.XpG();e.R7$(),e.Y8G("ngIf",null==i.f.total_price.errors?null:i.f.total_price.errors.required)}}function l(n,p){if(1&n&&(e.j41(0,"option",56),e.EFF(1),e.k0s()),2&n){const i=p.$implicit;e.Y8G("value",i.code),e.R7$(),e.JRh(i.desc)}}function v(n,p){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const i=e.XpG(2);e.R7$(),e.SpI(" ",i.required_message," ")}}function r(n,p){if(1&n&&(e.j41(0,"div",51),e.DNE(1,v,2,1,"div",52),e.k0s()),2&n){const i=e.XpG();e.R7$(),e.Y8G("ngIf",null==i.f.medicine_purpose.errors?null:i.f.medicine_purpose.errors.required)}}function h(n,p){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const i=e.XpG(3);e.R7$(),e.SpI(" ",i.required_message," ")}}function c(n,p){if(1&n&&(e.j41(0,"div",51),e.DNE(1,h,2,1,"div",52),e.k0s()),2&n){const i=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==i.f.purpose_other.errors?null:i.f.purpose_other.errors.required)}}function I(n,p){if(1&n&&(e.j41(0,"div",34)(1,"label",57),e.EFF(2,"Purpose remarks"),e.k0s(),e.nrm(3,"input",58),e.DNE(4,c,2,1,"div",14),e.k0s()),2&n){const i=e.XpG();e.R7$(),e.Y8G("ngClass",e.eq3(3,F,i.is_saving&&i.f.purpose_other.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(5,T,i.is_saving&&i.f.purpose_other.errors)),e.R7$(),e.Y8G("ngIf",i.is_saving&&i.f.purpose_other.errors)}}function Z(n,p){if(1&n&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&n){const i=p.$implicit;e.R7$(),e.JRh(i.value)}}function me(n,p){if(1&n&&(e.j41(0,"div",59)(1,"div",60)(2,"ul",61),e.DNE(3,Z,2,1,"li",62),e.nI1(4,"keyvalue"),e.k0s()()()),2&n){const i=e.XpG();e.R7$(3),e.Y8G("ngForOf",e.bMT(4,1,i.submit_errors))}}function m(n,p){if(1&n&&e.nrm(0,"fa-icon",63),2&n){const i=e.XpG();e.Y8G("icon",i.faSave)}}function C(n,p){if(1&n&&e.nrm(0,"fa-icon",64),2&n){const i=e.XpG();e.Y8G("icon",i.faCircleNotch)}}let s=(()=>{class n{get f(){return this.prescriptionForm.controls}computeTotalPrice(){console.log(this.prescriptionForm.value),this.prescriptionForm.patchValue({total_price:(this.prescriptionForm.value.quantity??0)*(this.prescriptionForm.value.unit_price??0)}),this.prescriptionForm.controls.total_price.disable()}closeModal(){this.toggleForm.emit()}onSubmit(){this.is_loading=!0,this.prescriptionForm.valid&&(this.prescriptionForm.controls.total_price.enable(),this.selected_drug.new_drug?this.http.post("medicine/list",this.prescriptionForm.value).subscribe({next:i=>{this.savePrescription()},error:i=>{this.is_loading=!1,this.http.showError(i.error.message,"Medicine List")}}):(this.is_loading=!1,this.savePrescription()))}savePrescription(){let i;i=this.selected_drug&&this.selected_drug.id?this.http.update("medicine/prescriptions/",this.selected_drug.id,this.prescriptionForm.value):this.http.post("medicine/prescriptions",this.prescriptionForm.value),i.subscribe({next:u=>{this.is_loading=!1,this.toastr.success("Successfully added","Prescription"),this.closeModal()},error:u=>{this.is_loading=!1,this.http.showError(u.error.message,"Prescription")}})}loadLibraries(){this.libraries.forEach(i=>{this.http.get("libraries/"+i.location).subscribe({next:u=>{this[i.var_name]=u.data},error:u=>console.log(u),complete:()=>this.show_form=!0})})}constructor(i,u,o){this.http=i,this.toastr=u,this.formBuilder=o,this.toggleForm=new e.bkB,this.faCircleNotch=t.s4k,this.faSave=G.hSh,this.is_saving=!1,this.show_form=!1,this.membership_types=[],this.prescriptionForm=new g.gE({brand_name:new g.MJ(null),medicine_name:new g.MJ(null),medicine_code:new g.MJ(null),patient_id:new g.MJ(null),prescribed_by:new g.MJ(null),consult_id:new g.MJ(null),prescription_date:new g.MJ(null),konsulta_medicine_code:new g.MJ(null),added_medicine:new g.MJ(null),dosage_quantity:new g.MJ(null),dosage_uom:new g.MJ(null),dose_regimen:new g.MJ(null),medicine_purpose:new g.MJ(null),purpose_other:new g.MJ(null),duration_intake:new g.MJ(null),duration_frequency:new g.MJ(null),quantity:new g.MJ(null),unit_price:new g.MJ(null),total_price:new g.MJ(null),quantity_preparation:new g.MJ(null),instruction_quantity:new g.MJ(null),medicine_route_code:new g.MJ(null),remarks:new g.MJ(null)}),this.is_loading=!1,this.libraries=[{var_name:"drug_uom",location:"unit-of-measurements"},{var_name:"drug_regimen",location:"dose-regimens"},{var_name:"drug_purpose",location:"purposes"},{var_name:"drug_frequency",location:"duration-frequencies"},{var_name:"drug_preparation",location:"preparations"},{var_name:"drug_route",location:"medicine-route"}],this.add_drug=!1}checkPurpose(){"99"===this.prescriptionForm.value.medicine_purpose?this.prescriptionForm.controls.purpose_other.enable():this.prescriptionForm.controls.purpose_other.disable()}patchValue(){this.prescriptionForm.patchValue({konsulta_medicine_code:this.selected_drug.konsulta_medicine?this.selected_drug.konsulta_medicine.code:null,added_medicine:this.selected_drug.added_medicine?this.selected_drug.added_medicine:null,dosage_quantity:this.selected_drug.dosage_quantity,dosage_uom:this.selected_drug.unit_of_measurement?this.selected_drug.unit_of_measurement.code:null,dose_regimen:this.selected_drug.regimen?this.selected_drug.regimen.code:null,medicine_purpose:this.selected_drug.purpose?this.selected_drug.purpose.code:null,duration_intake:this.selected_drug.duration_intake,duration_frequency:this.selected_drug.frequency?this.selected_drug.frequency.code:null,quantity:this.selected_drug.quantity,unit_price:this.selected_drug.unit_price,total_price:this.selected_drug.total_price,quantity_preparation:this.selected_drug.preparation?this.selected_drug.preparation.code:null,instruction_quantity:this.selected_drug.instruction_quantity??1,medicine_route_code:this.selected_drug.medicine_route?this.selected_drug.medicine_route.code:null,remarks:this.selected_drug.remarks}),this.selected_drug&&this.selected_drug.new_drug&&this.prescriptionForm.patchValue({konsulta_medicine_code:this.selected_drug.code}),this.selected_drug.konsulta_medicine?this.prescriptionForm.controls.added_medicine.disable():this.selected_drug.added_medicine&&(this.prescriptionForm.controls.added_medicine.enable(),this.prescriptionForm.controls.konsulta_medicine_code.disable()),this.computeTotalPrice(),this.checkPurpose()}ngOnChanges(i){let u=this.user_id?this.user_id:this.http.getUserID();this.prescriptionForm=this.formBuilder.nonNullable.group({brand_name:[null],patient_id:[this.consult_details.patient.id],prescribed_by:[u,[g.k0.required]],consult_id:[this.consult_details.id,[g.k0.required]],prescription_date:[(0,a.Yq)(this.consult_details.consult_date,"yyyy-MM-dd","en","Asia/Manila"),[g.k0.required]],konsulta_medicine_code:[null,[g.k0.required]],added_medicine:[null],dosage_quantity:[null,[g.k0.required]],dosage_uom:[null,[g.k0.required]],dose_regimen:[null,[g.k0.required]],medicine_purpose:[null,[g.k0.required]],purpose_other:[null,[g.k0.required]],duration_intake:[null,[g.k0.required]],duration_frequency:[null,[g.k0.required]],quantity:[null,[g.k0.required]],unit_price:[null],total_price:[null],quantity_preparation:[null,[g.k0.required]],instruction_quantity:[1],medicine_route_code:[null,[g.k0.required]],remarks:[null]}),console.log(this.prescriptionForm),this.selected_drug?this.patchValue():this.prescriptionForm.controls.konsulta_medicine_code.disable()}static{this.\u0275fac=function(u){return new(u||n)(e.rXU(N.k),e.rXU(w.tw),e.rXU(g.ok))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-drug-form"]],inputs:{selected_drug:"selected_drug",consult_details:"consult_details",drug_uom:"drug_uom",drug_regimen:"drug_regimen",drug_purpose:"drug_purpose",drug_frequency:"drug_frequency",drug_preparation:"drug_preparation",drug_route:"drug_route",user_id:"user_id"},outputs:{toggleForm:"toggleForm"},features:[e.OA$],decls:88,vars:101,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white","pl-5"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"w-full","max-w-3xl","text-left","text-gray-500","dark:text-gray-400",3,"formGroup"],[1,"grid","grid-cols-3","gap-4","pb-5","px-10"],["class","col-span-3 mt-5 mx-5 px-5 py-3 rounded-md border border-yellow-500 bg-yellow-100",4,"ngIf"],["class","col-span-3 mt-5 mx-5",4,"ngIf"],["class","col-span-3 text-sm ",4,"ngIf"],[1,"col-span-1","text-sm"],["for","dosage_quantity",1,"font-semibold",3,"ngClass"],["name","dosage_quantity","id","dosage_quantity","formControlName","dosage_quantity","type","number",1,"input",3,"ngClass"],["class","invalid-alert",4,"ngIf"],["for","dosage_uom",1,"font-semibold",3,"ngClass"],["name","dosage_uom","id","dosage_uom","formControlName","dosage_uom",1,"input",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["for","dose_regimen",1,"font-semibold",3,"ngClass"],["name","dose_regimen","id","dose_regimen","formControlName","dose_regimen",1,"input",3,"ngClass"],["for","medicine_route_code",1,"font-semibold",3,"ngClass"],["name","route","id","medicine_route_code","formControlName","medicine_route_code",1,"input",3,"ngClass"],["for","duration_intake",1,"font-semibold",3,"ngClass"],["name","duration_intake","id","duration_intake","formControlName","duration_intake","type","number",1,"input",3,"ngClass"],["for","duration_frequency",1,"font-semibold",3,"ngClass"],["name","duration_frequency","id","duration_frequency","formControlName","duration_frequency",1,"input",3,"ngClass"],["for","quantity",1,"font-semibold",3,"ngClass"],["name","quantity","id","quantity","formControlName","quantity","type","number",1,"input",3,"keyup","ngClass"],["for","quantity_preparation",1,"font-semibold",3,"ngClass"],["name","quantity_preparation","id","quantity_preparation","formControlName","quantity_preparation",1,"input",3,"ngClass"],["for","unit_price",1,"font-semibold",3,"ngClass"],["name","unit_price","id","unit_price","formControlName","unit_price","type","number",1,"input",3,"keyup","ngClass"],["for","total_price",1,"font-semibold",3,"ngClass"],["name","total_price","id","total_price","formControlName","total_price","type","number",1,"input",3,"ngClass"],[1,"col-span-3","text-sm"],["for","medicine_purpose",1,"font-semibold",3,"ngClass"],["name","medicine_purpose","id","medicine_purpose","formControlName","medicine_purpose",1,"input",3,"change","ngClass"],["class","col-span-3 text-sm",4,"ngIf"],["for","remarks",1,"font-semibold",3,"ngClass"],["name","remarks","id","remarks","formControlName","remarks","type","text",1,"input",3,"ngClass"],["id","show_errors","class","relative mx-10 col-span-8 bg-red-200 rounded border border-red-300 text-red-900 text-sm mb-5",4,"ngIf"],[1,"flex","justify-end","mr-10","py-3","rounded-b"],["type","button",1,"btn-save","px-10","bg-gray-400","mr-5",3,"click","disabled"],["type","button",1,"btn-save","px-10","disabled:bg-gray-300",3,"click","disabled"],[3,"icon",4,"ngIf"],["animation","spin",3,"icon",4,"ngIf"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"col-span-3","mt-5","mx-5","px-5","py-3","rounded-md","border","border-yellow-500","bg-yellow-100"],[1,"col-span-3","mt-5","mx-5"],["for","brand_name",1,"font-semibold",3,"ngClass"],["name","brand_name","id","brand_name","formControlName","brand_name","type","text",1,"input",3,"ngClass"],[1,"invalid-alert"],[4,"ngIf"],[1,"font-semibold"],["for","added_medicine",1,"font-semibold",3,"ngClass"],["name","added_medicine","id","added_medicine","formControlName","added_medicine","type","text",1,"input",3,"ngClass"],[3,"value"],["for","purpose_other",1,"font-semibold",3,"ngClass"],["name","purpose_other","id","purpose_other","formControlName","purpose_other","type","text",1,"input",3,"ngClass"],["id","show_errors",1,"relative","mx-10","col-span-8","bg-red-200","rounded","border","border-red-300","text-red-900","text-sm","mb-5"],[1,"block","p-3","pl-10"],[1,"list-disc"],[4,"ngFor","ngForOf"],[3,"icon"],["animation","spin",3,"icon"]],template:function(u,o){1&u&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e.EFF(5," Prescribe medicine "),e.k0s()(),e.j41(6,"div",5)(7,"form",6)(8,"div",7),e.DNE(9,V,4,0,"div",8)(10,A,5,7,"div",9)(11,q,4,1,"div",9)(12,J,5,7,"div",10),e.j41(13,"div",11)(14,"label",12),e.EFF(15,"Dosage Qty."),e.k0s(),e.nrm(16,"input",13),e.DNE(17,H,2,1,"div",14),e.k0s(),e.j41(18,"div",11)(19,"label",15),e.EFF(20,"Dosage unit"),e.k0s(),e.j41(21,"select",16),e.DNE(22,L,2,2,"option",17),e.k0s(),e.DNE(23,K,2,1,"div",14),e.k0s(),e.j41(24,"div",11)(25,"label",18),e.EFF(26,"Dosage regimen"),e.k0s(),e.j41(27,"select",19),e.DNE(28,z,2,2,"option",17),e.k0s(),e.DNE(29,S,2,1,"div",14),e.k0s(),e.j41(30,"div",11)(31,"label",20),e.EFF(32,"Medicine Route"),e.k0s(),e.j41(33,"select",21),e.DNE(34,R,2,2,"option",17),e.k0s(),e.DNE(35,b,2,1,"div",14),e.k0s(),e.j41(36,"div",11)(37,"label",22),e.EFF(38,"Duration"),e.k0s(),e.nrm(39,"input",23),e.DNE(40,j,2,1,"div",14),e.k0s(),e.j41(41,"div",11)(42,"label",24),e.EFF(43,"Duration frequency"),e.k0s(),e.j41(44,"select",25),e.DNE(45,$,2,2,"option",17),e.k0s(),e.DNE(46,Y,2,1,"div",14),e.k0s(),e.j41(47,"div",11)(48,"label",26),e.EFF(49,"Quantity"),e.k0s(),e.j41(50,"input",27),e.bIt("keyup",function(){return o.computeTotalPrice()}),e.k0s(),e.DNE(51,ie,2,1,"div",14),e.k0s(),e.j41(52,"div",11)(53,"label",28),e.EFF(54,"Preparation"),e.k0s(),e.j41(55,"select",29),e.DNE(56,ne,2,2,"option",17),e.k0s(),e.DNE(57,se,2,1,"div",14),e.k0s(),e.j41(58,"div",11)(59,"label",30),e.EFF(60,"Unit Price"),e.k0s(),e.j41(61,"input",31),e.bIt("keyup",function(){return o.computeTotalPrice()}),e.k0s(),e.DNE(62,ae,2,1,"div",14),e.k0s(),e.j41(63,"div",11)(64,"label",32),e.EFF(65,"Total Price"),e.k0s(),e.nrm(66,"input",33),e.DNE(67,de,2,1,"div",14),e.k0s(),e.j41(68,"div",34)(69,"label",35),e.EFF(70,"Medicine purpose"),e.k0s(),e.j41(71,"select",36),e.bIt("change",function(){return o.checkPurpose()}),e.DNE(72,l,2,2,"option",17),e.k0s(),e.DNE(73,r,2,1,"div",14),e.k0s(),e.DNE(74,I,5,7,"div",37),e.j41(75,"div",34)(76,"label",38),e.EFF(77,"Remarks"),e.k0s(),e.nrm(78,"input",39),e.k0s()(),e.DNE(79,me,5,3,"div",40),e.k0s()(),e.j41(80,"div",41)(81,"button",42),e.bIt("click",function(){return o.closeModal()}),e.EFF(82,"Close"),e.k0s(),e.j41(83,"button",43),e.bIt("click",function(){return o.onSubmit()}),e.DNE(84,m,1,1,"fa-icon",44)(85,C,1,1,"fa-icon",45),e.EFF(86),e.k0s()()()()(),e.nrm(87,"div",46)),2&u&&(e.R7$(7),e.Y8G("formGroup",o.prescriptionForm),e.R7$(2),e.Y8G("ngIf",o.selected_drug.new_drug),e.R7$(),e.Y8G("ngIf",o.selected_drug.new_drug),e.R7$(),e.Y8G("ngIf",!o.add_drug&&!o.f.added_medicine.value),e.R7$(),e.Y8G("ngIf",o.f.added_medicine.value),e.R7$(2),e.Y8G("ngClass",e.eq3(53,F,o.is_saving&&o.f.dosage_quantity.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(55,T,o.is_saving&&o.f.dosage_quantity.errors)),e.R7$(),e.Y8G("ngIf",o.is_saving&&o.f.dosage_quantity.errors),e.R7$(2),e.Y8G("ngClass",e.eq3(57,F,o.is_saving&&o.f.dosage_uom.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(59,T,o.is_saving&&o.f.dosage_uom.errors)),e.R7$(),e.Y8G("ngForOf",o.drug_uom),e.R7$(),e.Y8G("ngIf",o.is_saving&&o.f.dosage_uom.errors),e.R7$(2),e.Y8G("ngClass",e.eq3(61,F,o.is_saving&&o.f.dose_regimen.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(63,T,o.is_saving&&o.f.dose_regimen.errors)),e.R7$(),e.Y8G("ngForOf",o.drug_regimen),e.R7$(),e.Y8G("ngIf",o.is_saving&&o.f.dose_regimen.errors),e.R7$(2),e.Y8G("ngClass",e.eq3(65,F,o.is_saving&&o.f.medicine_route_code.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(67,T,o.is_saving&&o.f.medicine_route_code.errors)),e.R7$(),e.Y8G("ngForOf",o.drug_route),e.R7$(),e.Y8G("ngIf",o.is_saving&&o.f.medicine_route_code.errors),e.R7$(2),e.Y8G("ngClass",e.eq3(69,F,o.is_saving&&o.f.duration.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(71,T,o.is_saving&&o.f.duration_intake.errors)),e.R7$(),e.Y8G("ngIf",o.is_saving&&o.f.duration_intake.errors),e.R7$(2),e.Y8G("ngClass",e.eq3(73,F,o.is_saving&&o.f.duration_frequency.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(75,T,o.is_saving&&o.f.duration_frequency.errors)),e.R7$(),e.Y8G("ngForOf",o.drug_frequency),e.R7$(),e.Y8G("ngIf",o.is_saving&&o.f.duration_frequency.errors),e.R7$(2),e.Y8G("ngClass",e.eq3(77,F,o.is_saving&&o.f.quantity.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(79,T,o.is_saving&&o.f.quantity.errors)),e.R7$(),e.Y8G("ngIf",o.is_saving&&o.f.quantity.errors),e.R7$(2),e.Y8G("ngClass",e.eq3(81,F,o.is_saving&&o.f.quantity_preparation.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(83,T,o.is_saving&&o.f.quantity_preparation.errors)),e.R7$(),e.Y8G("ngForOf",o.drug_preparation),e.R7$(),e.Y8G("ngIf",o.is_saving&&o.f.quantity_preparation.errors),e.R7$(2),e.Y8G("ngClass",e.eq3(85,F,o.is_saving&&o.f.unit_price.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(87,T,o.is_saving&&o.f.unit_price.errors)),e.R7$(),e.Y8G("ngIf",o.is_saving&&o.f.unit_price.errors),e.R7$(2),e.Y8G("ngClass",e.eq3(89,F,o.is_saving&&o.f.total_price.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(91,T,o.is_saving&&o.f.total_price.errors)),e.R7$(),e.Y8G("ngIf",o.is_saving&&o.f.total_price.errors),e.R7$(2),e.Y8G("ngClass",e.eq3(93,F,o.is_saving&&o.f.medicine_purpose.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(95,T,o.is_saving&&o.f.medicine_purpose.errors)),e.R7$(),e.Y8G("ngForOf",o.drug_purpose),e.R7$(),e.Y8G("ngIf",o.is_saving&&o.f.medicine_purpose.errors),e.R7$(),e.Y8G("ngIf","99"===o.prescriptionForm.value.medicine_purpose),e.R7$(2),e.Y8G("ngClass",e.eq3(97,F,o.is_saving&&o.f.remarks.errors)),e.R7$(2),e.Y8G("ngClass",e.eq3(99,T,o.is_saving&&o.f.remarks.errors)),e.R7$(),e.Y8G("ngIf",o.submit_errors),e.R7$(2),e.Y8G("disabled",o.is_loading),e.R7$(2),e.Y8G("disabled",o.is_loading||o.prescriptionForm.invalid),e.R7$(),e.Y8G("ngIf",!o.is_loading),e.R7$(),e.Y8G("ngIf",o.is_loading),e.R7$(),e.SpI(" ",o.is_loading?"Saving":"Save"," "))},dependencies:[a.MD,a.YU,a.Sq,a.bT,a.lG,y.dX,y.aY,g.YN,g.qT,g.xH,g.y7,g.me,g.Q0,g.wz,g.BC,g.cb,g.X1,g.j4,g.JD],encapsulation:2})}}return n})();const _=n=>({"bg-gray-50":n});function d(n,p){if(1&n){const i=e.RV6();e.j41(0,"div",27)(1,"button",28),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2);return e.Njj(o.showLibDrugs())}),e.EFF(2," Show Library "),e.k0s()()}}function E(n,p){if(1&n&&(e.j41(0,"tr")(1,"td",23)(2,"div",24)(3,"div",25),e.EFF(4," No records found... "),e.k0s(),e.DNE(5,d,3,0,"div",26),e.k0s()()()),2&n){const i=e.XpG();e.R7$(5),e.Y8G("ngIf",!i.lib_drug_table)}}function ce(n,p){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.nrm(2,"br"),e.EFF(3),e.nrm(4,"br"),e.k0s()),2&n){const i=e.XpG().$implicit;e.R7$(),e.SpI(" ",i.konsulta_medicine?i.konsulta_medicine.generic.desc:""," "),e.R7$(2),e.SpI(" ",i.konsulta_medicine?i.konsulta_medicine.desc:""," ")}}function _e(n,p){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.nrm(2,"br"),e.k0s()),2&n){let i;const u=e.XpG().$implicit;e.R7$(),e.SpI("",null!==(i=u.added_medicine)&&void 0!==i?i:""," ")}}function fe(n,p){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&n){const i=e.XpG().$implicit;e.R7$(),e.SpI(" ",i.generic_desc," ")}}function he(n,p){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&n){const i=e.XpG().$implicit;e.R7$(),e.E5c(" ",i.dosage_quantity," ",i.unit_of_measurement.desc," (",i.unit_of_measurement.code,") ")}}function be(n,p){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&n){const i=e.XpG().$implicit;e.R7$(),e.SpI(" ",i.desc," ")}}function Fe(n,p){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.nrm(2,"br"),e.EFF(3),e.nrm(4,"br"),e.EFF(5),e.k0s()),2&n){const i=e.XpG().$implicit;e.R7$(),e.SpI(" ",i.regimen.desc," "),e.R7$(2),e.Lme(" ",i.duration_intake," ",i.frequency.desc," "),e.R7$(2),e.Lme(" ",i.quantity," ",i.preparation.desc," ")}}function ve(n,p){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.nrm(2,"br"),e.EFF(3),e.k0s()),2&n){const i=e.XpG().$implicit;e.R7$(),e.Lme(" ",i.unit_desc," ",i.package_desc," "),e.R7$(2),e.SpI(" ",i.form_desc," ")}}function Ce(n,p){if(1&n){const i=e.RV6();e.j41(0,"tr",29),e.bIt("click",function(){const o=e.eBV(i).$implicit,x=e.XpG();return e.Njj(x.selectDrugs(o))}),e.j41(1,"th",30)(2,"span"),e.EFF(3),e.nrm(4,"br"),e.k0s(),e.DNE(5,ce,5,2,"span",18)(6,_e,3,1,"span",18)(7,fe,2,1,"span",18),e.k0s(),e.j41(8,"td",31),e.DNE(9,he,2,3,"span",18)(10,be,2,1,"span",18),e.k0s(),e.j41(11,"td",31),e.DNE(12,Fe,6,5,"span",18)(13,ve,4,3,"span",18),e.k0s(),e.nrm(14,"td",31),e.k0s()}if(2&n){const i=p.$implicit;e.Y8G("ngClass",e.eq3(9,_,p.odd)),e.R7$(3),e.JRh(i.brand_name),e.R7$(2),e.Y8G("ngIf",i.konsulta_medicine),e.R7$(),e.Y8G("ngIf",i.added_medicine),e.R7$(),e.Y8G("ngIf",!i.id),e.R7$(2),e.Y8G("ngIf",i.id),e.R7$(),e.Y8G("ngIf",!i.id),e.R7$(2),e.Y8G("ngIf",i.id),e.R7$(),e.Y8G("ngIf",!i.id)}}function ke(n,p){if(1&n){const i=e.RV6();e.j41(0,"div",32)(1,"div",33)(2,"div",34)(3,"p",35),e.EFF(4," Showing "),e.j41(5,"span",36),e.EFF(6),e.k0s(),e.EFF(7," to "),e.j41(8,"span",36),e.EFF(9),e.k0s(),e.EFF(10," of "),e.j41(11,"span",36),e.EFF(12),e.k0s(),e.EFF(13," results "),e.k0s()(),e.j41(14,"div")(15,"nav",37)(16,"button",38),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.loadMedicineList(1))}),e.nrm(17,"fa-icon",39),e.k0s(),e.j41(18,"button",40),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.loadMedicineList(o.current_page-1))}),e.nrm(19,"fa-icon",39),e.EFF(20,"Previous "),e.k0s(),e.j41(21,"button",40),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.loadMedicineList(o.current_page+1))}),e.EFF(22," Next"),e.nrm(23,"fa-icon",41),e.k0s(),e.j41(24,"button",42),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.loadMedicineList(o.last_page))}),e.nrm(25,"fa-icon",41),e.k0s()()()()()}if(2&n){const i=e.XpG();e.R7$(6),e.JRh(i.from),e.R7$(3),e.JRh(i.to),e.R7$(3),e.JRh(i.total),e.R7$(4),e.Y8G("disabled",1===i.current_page),e.R7$(),e.Y8G("icon",i.faAnglesLeft),e.R7$(),e.Y8G("disabled",1===i.current_page),e.R7$(),e.Y8G("icon",i.faChevronLeft),e.R7$(2),e.Y8G("disabled",i.current_page===i.last_page),e.R7$(2),e.Y8G("icon",i.faChevronRight),e.R7$(),e.Y8G("disabled",i.current_page===i.last_page),e.R7$(),e.Y8G("icon",i.faAnglesRight)}}let xe=(()=>{class n{selectDrugs(i){delete i.id,i.new_drug=this.lib_drug_table,this.openAddForm.emit(i),this.toggleList.emit()}closeModal(){this.toggleList.emit()}showLibDrugs(){this.lib_drug_table=!0,this.loadMedicineList(1)}addNewDrug(i){this.openAddForm.emit(i),this.toggleList.emit()}loadMedicineList(i){let u=this.lib_drug_table?"libraries/konsulta-medicines":"medicine/list",o={params:{}};this.search_item&&(o.params["filter[search]"]=this.search_item),i&&(o.params.page=i),o.params.per_page=this.per_page,this.http.get(u,o).subscribe({next:x=>{this.drug_list=x.data,this.current_page=x.meta.current_page,this.last_page=x.meta.last_page,this.from=x.meta.from,this.to=x.meta.to,this.total=x.meta.total},error:x=>console.log(x)})}constructor(i){this.http=i,this.openAddForm=new e.bkB,this.toggleList=new e.bkB,this.faAnglesLeft=t.rNr,this.faChevronLeft=t.Wzs,this.faChevronRight=t.XkK,this.faAnglesRight=t.up_,this.faSearch=t.MjD,this.faEdit=t.MT7,this.faAdd=t.vkJ,this.faCircleXmark=t.bnw,this.is_updating=!1,this.show_lib_drug=!1,this.per_page=10,this.lib_drug_table=!1}ngOnInit(){this.loadMedicineList()}static{this.\u0275fac=function(u){return new(u||n)(e.rXU(N.k))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-drug-list"]],outputs:{openAddForm:"openAddForm",toggleList:"toggleList"},decls:30,vars:6,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-5xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"flex","justify-end"],[1,"border","border-gray-400","rounded-md","bg-white"],["type","text","placeholder","Search drugs",1,"form-input","border-0","text-sm","p-1","m-1","border-r","border-gray-400",3,"ngModelChange","keyup.enter","ngModel"],["type","button",1,"text-blue-500","w-9","h-9",3,"click"],[1,"-ml-1",3,"icon"],["type","button",1,"text-white","w-9","h-9",3,"click"],[1,"-mr-4",3,"icon"],[1,"h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"overflow-x-auto","relative","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400","mb-5"],[1,"sticky","top-0","text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6"],[1,"overflow-y-auto"],[4,"ngIf"],["class","hover:bg-blue-200 cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"flex","justify-end","py-4","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["class","bg-white py-3 flex items-center justify-between sm:px-6",4,"ngIf"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],["colspan","9"],[1,"grid","grid-cols-1","w-full","mt-10"],[1,"text-center","italic"],["class","flex justify-center mt-3",4,"ngIf"],[1,"flex","justify-center","mt-3"],["type","button",1,"btn-save",3,"click"],[1,"hover:bg-blue-200","cursor-pointer",3,"click","ngClass"],["scope","row",1,"py-4","px-6","font-medium","whitespace-nowrap"],[1,"py-4","px-6"],[1,"bg-white","py-3","flex","items-center","justify-between","sm:px-6"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"mr-3"],[1,"text-sm","text-gray-700"],[1,"font-medium"],["aria-label","Pagination",1,"relative","z-0","inline-flex","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","disabled"],[1,"block","h-15","w-15","text-gray-500","pr-1",3,"icon"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","bg-white","text-sm","font-medium","text-gray-700","hover:bg-gray-50",3,"click","disabled"],[1,"h-5","w-5","text-gray-500",3,"icon"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","disabled"]],template:function(u,o){1&u&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e.EFF(5," Drugs library "),e.k0s(),e.j41(6,"div",5)(7,"div",6)(8,"input",7),e.mxI("ngModelChange",function(ue){return e.DH7(o.search_item,ue)||(o.search_item=ue),ue}),e.bIt("keyup.enter",function(){return o.loadMedicineList()}),e.k0s(),e.j41(9,"button",8),e.bIt("click",function(){return o.loadMedicineList()}),e.nrm(10,"fa-icon",9),e.k0s()(),e.j41(11,"button",10),e.bIt("click",function(){return o.closeModal()}),e.nrm(12,"fa-icon",11),e.k0s()()(),e.j41(13,"div",12)(14,"div",13)(15,"table",14)(16,"thead",15)(17,"tr")(18,"th",16),e.EFF(19,"Drug Name"),e.k0s(),e.j41(20,"th",16),e.EFF(21,"Dosage"),e.k0s(),e.j41(22,"th",16),e.EFF(23,"Package"),e.k0s()()(),e.j41(24,"tbody",17),e.DNE(25,E,6,1,"tr",18)(26,Ce,15,11,"tr",19),e.k0s()()()(),e.j41(27,"div",20),e.DNE(28,ke,26,11,"div",21),e.k0s()()()(),e.nrm(29,"div",22)),2&u&&(e.R7$(8),e.R50("ngModel",o.search_item),e.R7$(2),e.Y8G("icon",o.faSearch),e.R7$(2),e.Y8G("icon",o.faCircleXmark),e.R7$(13),e.Y8G("ngIf",0===(null==o.drug_list?null:o.drug_list.length)||!o.drug_list),e.R7$(),e.Y8G("ngForOf",o.drug_list),e.R7$(2),e.Y8G("ngIf",(null==o.drug_list?null:o.drug_list.length)>=1))},dependencies:[a.MD,a.YU,a.Sq,a.bT,y.dX,y.aY,g.YN,g.me,g.BC,g.vS],encapsulation:2})}}return n})();var ye=f(3825),Re=f(3895);const ge=n=>({"rounded-b":n});function Ee(n,p){if(1&n){const i=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.toggleModal())}),e.nrm(1,"fa-icon",20),e.EFF(2," epress "),e.k0s()}if(2&n){const i=e.XpG();e.R7$(),e.Y8G("icon",i.faReceipt)}}function je(n,p){if(1&n){const i=e.RV6();e.j41(0,"button",21),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.navigateTo("dispensing"))}),e.nrm(1,"fa-icon",20),e.EFF(2," dispensing "),e.k0s()}if(2&n){const i=e.XpG();e.R7$(),e.Y8G("icon",i.faPrescriptionBottleMedical)}}function Te(n,p){if(1&n){const i=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.toggleList())}),e.nrm(1,"fa-icon",20),e.EFF(2," add drugs "),e.k0s()}if(2&n){const i=e.XpG();e.R7$(),e.Y8G("icon",i.faAdd)}}function Ie(n,p){if(1&n){const i=e.RV6();e.j41(0,"tr",29)(1,"td",30),e.EFF(2),e.nrm(3,"br")(4,"br"),e.k0s(),e.j41(5,"td",31),e.EFF(6),e.nrm(7,"br")(8,"br"),e.EFF(9),e.k0s(),e.j41(10,"td",31),e.EFF(11),e.nrm(12,"br"),e.EFF(13),e.nI1(14,"currency"),e.k0s(),e.j41(15,"td",31),e.EFF(16),e.nI1(17,"currency"),e.k0s(),e.j41(18,"td",32)(19,"button",33),e.bIt("click",function(){const o=e.eBV(i).$implicit,x=e.XpG(2);return e.Njj(x.openAddForm(o))}),e.nrm(20,"fa-icon",34),e.k0s(),e.j41(21,"button",35),e.bIt("click",function(){const o=e.eBV(i).$implicit,x=e.XpG(2);return e.Njj(x.toggleModal("delete-item",o))}),e.nrm(22,"fa-icon",36),e.k0s()()()}if(2&n){const i=p.$implicit,u=e.XpG(2);e.R7$(2),e.Lme(" ",i.konsulta_medicine?i.konsulta_medicine.desc:i.added_medicine," ",i.medicine?i.medicine.gen_name:""," "),e.R7$(4),e.SjE(" ",i.dosage_quantity," ",i.unit_of_measurement.desc," ",i.regimen.desc," ",i.duration_intake," ",i.frequency.desc," "),e.R7$(3),e.SpI(" Remarks: ",i.remarks," "),e.R7$(2),e.Lme(" ",i.quantity," ",i.preparation.desc," "),e.R7$(2),e.SpI(" ",e.i5U(14,14,i.unit_price,"PHP")," "),e.R7$(3),e.SpI(" ",e.i5U(17,17,i.total_price,"PHP")," "),e.R7$(4),e.Y8G("icon",u.faEdit),e.R7$(2),e.Y8G("icon",u.faTrashCan)}}function Ge(n,p){if(1&n&&(e.j41(0,"table",23)(1,"thead")(2,"tr",24)(3,"th",25),e.EFF(4,"Medicine"),e.k0s(),e.j41(5,"th",25),e.EFF(6,"Intake"),e.k0s(),e.j41(7,"th",26),e.EFF(8,"Quantity &"),e.nrm(9,"br"),e.EFF(10," Unit Price"),e.k0s(),e.j41(11,"th",27),e.EFF(12,"Total Price"),e.k0s(),e.j41(13,"th",26),e.EFF(14,"Action"),e.k0s()()(),e.j41(15,"tbody"),e.DNE(16,Ie,23,20,"tr",28),e.k0s()()),2&n){const i=e.XpG();e.R7$(16),e.Y8G("ngForOf",i.prescriptions)("ngForTrackBy",i.identify)}}function $e(n,p){if(1&n&&e.nrm(0,"fa-icon",44),2&n){const i=e.XpG(3);e.Y8G("icon",i.faSpinner)}}function we(n,p){if(1&n&&e.nrm(0,"fa-icon",45),2&n){const i=e.XpG(3);e.Y8G("icon",i.faSave)}}function De(n,p){if(1&n){const i=e.RV6();e.j41(0,"button",41),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2);return e.Njj(o.onSubmit())}),e.DNE(1,$e,1,1,"fa-icon",42)(2,we,1,1,"fa-icon",43),e.EFF(3),e.k0s()}if(2&n){const i=e.XpG(2);e.Y8G("disabled",i.is_saving),e.R7$(),e.Y8G("ngIf",i.is_saving),e.R7$(),e.Y8G("ngIf",!i.is_saving),e.R7$(),e.SpI(" ",i.is_saving?"Saving":"Save"," ")}}function Me(n,p){if(1&n){const i=e.RV6();e.j41(0,"div")(1,"div",37)(2,"textarea",38),e.mxI("ngModelChange",function(o){e.eBV(i);const x=e.XpG();return e.DH7(x.consult_notes.plan,o)||(x.consult_notes.plan=o),e.Njj(o)}),e.k0s()(),e.j41(3,"div",39),e.DNE(4,De,4,4,"button",40),e.k0s()()}if(2&n){const i=e.XpG();e.R7$(2),e.Y8G("disabled",i.consult_done||!i.allowed_to_edit),e.R50("ngModel",i.consult_notes.plan),e.R7$(2),e.Y8G("ngIf",!i.consult_done&&i.allowed_to_edit)}}function Ne(n,p){if(1&n){const i=e.RV6();e.j41(0,"app-drug-list",46),e.bIt("openAddForm",function(o){e.eBV(i);const x=e.XpG();return e.Njj(x.openAddForm(o))})("toggleList",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.toggleList())}),e.k0s()}}function Ye(n,p){if(1&n){const i=e.RV6();e.j41(0,"app-drug-form",47),e.bIt("toggleForm",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.toggleForm())}),e.k0s()}if(2&n){const i=e.XpG();e.Y8G("selected_drug",i.selected_drug)("consult_details",i.consult_details)("drug_uom",i.drug_uom)("drug_regimen",i.drug_regimen)("drug_purpose",i.drug_purpose)("drug_frequency",i.drug_frequency)("drug_preparation",i.drug_preparation)("drug_route",i.drug_route)("user_id",i.user_id)}}function Se(n,p){if(1&n){const i=e.RV6();e.j41(0,"app-epres",48),e.bIt("toggleModal",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.toggleModal())}),e.k0s()}if(2&n){const i=e.XpG();e.Y8G("prescriptions",i.prescriptions)("consult_details",i.consult_details)}}function Ae(n,p){if(1&n){const i=e.RV6();e.j41(0,"app-delete-item",49),e.bIt("toggleModal",function(o){e.eBV(i);const x=e.XpG();return e.Njj(x.toggleModal(o))}),e.k0s()}if(2&n){const i=e.XpG();e.Y8G("delete_id",i.delete_id)("delete_desc",i.delete_desc)("url",i.url)}}let Xe=(()=>{class n{navigateTo(i){this.router.navigate(["/patient/"+i,{id:this.consult_details.patient.id,consult_id:this.consult_details.id}])}openDeleteForm(i){this.selected_drug=i,this.toggleDeleteForm()}onSubmit(){this.is_saving=!0,this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,plan:this.consult_notes.plan}).subscribe({next:u=>{this.is_saving=!1,this.showToastr()},error:u=>{this.http.showError(u.error.message,"Prescription")}})}showToastr(){this.toastr.success("Successfully recorded!","Treatment plan")}openEditForm(i){this.selected_drug=i}openAddForm(i){this.selected_drug=i,this.toggleForm()}openDeleteModal(i){this.delete_id=i.id,this.modal["delete-item"]=!this.modal["delete-item"]}toggleDeleteForm(){this.show_delete_form=!this.show_delete_form,!1===this.show_delete_form&&this.loadPrescriptions()}toggleForm(){this.drug_uom&&this.drug_uom&&this.drug_purpose&&this.drug_frequency&&this.drug_preparation?this.show_form=!this.show_form:this.loadLibraries(),!1===this.show_form&&this.loadPrescriptions()}ngOnChanges(i){this.show_content=this.toggle_content,this.show_content_tx=this.toggle_content,!1===this.consult_details.consult_done&&(this.show_actions=!0),this.consult_details&&(this.consult_details.consult_notes&&(this.consult_notes=this.consult_details.consult_notes),this.consult_done=this.consult_details.consult_done)}loadLibraries(){this.libraries.forEach((i,u)=>{this.http.get("libraries/"+i.location).subscribe({next:o=>{this[i.var_name]=o.data,this.libraries.length-1===u&&(this.show_form=!0)},error:o=>{this.http.showError(o.error.message,i.var_name+" Library")}})})}toggleModal(i,u){i?(u&&(this.delete_id=u.id),this.modal[i]=!this.modal[i],this.loadPrescriptions()):this.show_epress=!this.show_epress}toggleList(){this.show_list=!this.show_list}identify(i,u){return u.id}loadPrescriptions(){this.http.get("medicine/prescriptions",{params:{sort:"-prescription_date",consult_id:this.consult_details.id}}).subscribe({next:u=>{u.data.length>0&&(this.prescriptions=u.data)},error:u=>{this.http.showError(u.error.message,"Prescription Library")}})}constructor(i,u,o){this.http=i,this.toastr=u,this.router=o,this.show_content=!0,this.show_list=!1,this.show_form=!1,this.show_delete_form=!1,this.show_actions=!1,this.show_content_tx=!1,this.is_saving=!1,this.consult_done=!1,this.faChevronCircleUp=t.AeV,this.faChevronCircleDown=t.DqM,this.faAdd=t.vkJ,this.faSave=G.hSh,this.faSpinner=t.z1G,this.faEdit=G.MT7,this.faTrash=t.yLS,this.faPrescriptionBottleMedical=t.F5L,this.faReceipt=t.Mf0,this.faTrashCan=G.sjs,this.consult_notes={plan:null},this.modal=[],this.delete_desc="Prescription",this.url="medicine/prescriptions/",this.libraries=[{var_name:"drug_uom",location:"unit-of-measurements"},{var_name:"drug_regimen",location:"dose-regimens"},{var_name:"drug_purpose",location:"purposes"},{var_name:"drug_frequency",location:"duration-frequencies"},{var_name:"drug_preparation",location:"preparations"},{var_name:"drug_route",location:"medicine-route"}],this.show_epress=!1}ngOnInit(){this.loadPrescriptions()}static{this.\u0275fac=function(u){return new(u||n)(e.rXU(N.k),e.rXU(w.tw),e.rXU(Re.Ix))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-prescription"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",with_credentials:"with_credentials",allowed_to_edit:"allowed_to_edit",user_id:"user_id"},features:[e.OA$],decls:23,vars:16,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","flex","justify-between"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-amber-500","flex","justify-between",3,"ngClass"],["type","button","class","ml-3 text-sm bg-white text-green-500 px-3 rounded-full",3,"click",4,"ngIf"],["type","button","class","text-sm bg-white text-amber-500 px-3 rounded-full",3,"click",4,"ngIf"],["type","button","class","ml-3 text-sm bg-white text-blue-500 px-3 rounded-full",3,"click",4,"ngIf"],["class","w-full table-auto p-5",4,"ngIf"],[1,"rounded-md","border","border-solid","border-gray-300","mt-5"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[3,"openAddForm","toggleList",4,"ngIf"],[3,"selected_drug","consult_details","drug_uom","drug_regimen","drug_purpose","drug_frequency","drug_preparation","drug_route","user_id","toggleForm",4,"ngIf"],[3,"prescriptions","consult_details","toggleModal",4,"ngIf"],[3,"delete_id","delete_desc","url","toggleModal",4,"ngIf"],["type","button",1,"ml-3","text-sm","bg-white","text-green-500","px-3","rounded-full",3,"click"],[1,"pr-1",3,"icon"],["type","button",1,"text-sm","bg-white","text-amber-500","px-3","rounded-full",3,"click"],["type","button",1,"ml-3","text-sm","bg-white","text-blue-500","px-3","rounded-full",3,"click"],[1,"w-full","table-auto","p-5"],[1,"align-top"],["scope","col",1,"text-center","py-3","px-3","w-3/12"],["scope","col",1,"text-center","py-3","px-3","w-2/12"],["scope","col",1,"text-center","py-3","px-3","w-1/12"],["class","bg-white border-b last:border-0 text-sm align-top",4,"ngFor","ngForOf","ngForTrackBy"],[1,"bg-white","border-b","last:border-0","text-sm","align-top"],[1,"py-4","px-3"],["scope","row",1,"py-4","px-3","font-medium","text-gray-900"],[1,"text-sm","text-center","mb-5","align-middle"],[1,"mr-3",3,"click"],[1,"text-amber-500",3,"icon"],[3,"click"],[1,"text-rose-500",3,"icon"],[1,"grid","grid-cols-1","px-4","pb-4","mt-4"],["rows","3","id","plan","placeholder","Treatment plan",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"ngModelChange","disabled","ngModel"],[1,"flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"click","disabled"],["class","mr-2","animation","spin",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"],[3,"openAddForm","toggleList"],[3,"toggleForm","selected_drug","consult_details","drug_uom","drug_regimen","drug_purpose","drug_frequency","drug_preparation","drug_route","user_id"],[3,"toggleModal","prescriptions","consult_details"],[3,"toggleModal","delete_id","delete_desc","url"]],template:function(u,o){1&u&&(e.nrm(0,"hr",0),e.j41(1,"div",1)(2,"div",2),e.EFF(3," Prescription "),e.k0s(),e.j41(4,"div",3)(5,"div",4)(6,"span",5),e.EFF(7," Prescriptions "),e.j41(8,"div"),e.DNE(9,Ee,3,1,"button",6)(10,je,3,1,"button",7)(11,Te,3,1,"button",8),e.k0s()(),e.DNE(12,Ge,17,2,"table",9),e.k0s(),e.j41(13,"div",10)(14,"span",11),e.EFF(15," Treatment Plan "),e.j41(16,"button",12),e.bIt("click",function(){return o.show_content_tx=!o.show_content_tx}),e.nrm(17,"fa-icon",13),e.k0s()(),e.DNE(18,Me,5,3,"div",14),e.k0s()()(),e.DNE(19,Ne,1,0,"app-drug-list",15)(20,Ye,1,9,"app-drug-form",16)(21,Se,1,2,"app-epres",17)(22,Ae,1,3,"app-delete-item",18)),2&u&&(e.R7$(6),e.Y8G("ngClass",e.eq3(12,ge,!o.show_content)),e.R7$(3),e.Y8G("ngIf",(null==o.consult_details?null:o.consult_details.is_konsulta)&&o.with_credentials&&o.prescriptions),e.R7$(),e.Y8G("ngIf",o.prescriptions),e.R7$(),e.Y8G("ngIf",o.show_actions),e.R7$(),e.Y8G("ngIf",o.show_content),e.R7$(2),e.Y8G("ngClass",e.eq3(14,ge,!o.show_content_tx)),e.R7$(3),e.Y8G("icon",o.show_content_tx?o.faChevronCircleUp:o.faChevronCircleDown),e.R7$(),e.Y8G("ngIf",o.show_content_tx),e.R7$(),e.Y8G("ngIf",o.show_list),e.R7$(),e.Y8G("ngIf",o.show_form),e.R7$(),e.Y8G("ngIf",o.show_epress),e.R7$(),e.Y8G("ngIf",o.modal["delete-item"]))},dependencies:[a.MD,a.YU,a.Sq,a.bT,a.oe,y.dX,y.aY,s,xe,g.YN,g.me,g.BC,g.vS,ye.c],encapsulation:2})}}return n})()},9932:(pe,B,f)=>{f.d(B,{H:()=>de});var a=f(177),t=f(4438),G=f(60),y=f(5383),e=f(9417),g=f(3318),N=f(5794);const w=l=>({"text-red-500":l}),F=l=>({"invalid-input":l});function T(l,v){if(1&l&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&l){const r=t.XpG(2);t.R7$(),t.SpI(" ",r.required_message," ")}}function V(l,v){if(1&l&&(t.j41(0,"div",27),t.DNE(1,T,2,1,"div",28),t.k0s()),2&l){const r=t.XpG();t.R7$(),t.Y8G("ngIf",null==r.f.item_name.errors?null:r.f.item_name.errors.required)}}function O(l,v){if(1&l&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&l){const r=t.XpG(2);t.R7$(),t.SpI(" ",r.required_message," ")}}function P(l,v){if(1&l&&(t.j41(0,"div",27),t.DNE(1,O,2,1,"div",28),t.k0s()),2&l){const r=t.XpG();t.R7$(),t.Y8G("ngIf",null==r.f.quantity.errors?null:r.f.quantity.errors.required)}}function A(l,v){if(1&l&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&l){const r=t.XpG(2);t.R7$(),t.SpI(" ",r.required_message," ")}}function q(l,v){if(1&l&&(t.j41(0,"div",27),t.DNE(1,A,2,1,"div",28),t.k0s()),2&l){const r=t.XpG();t.R7$(),t.Y8G("ngIf",null==r.f.unit_price.errors?null:r.f.unit_price.errors.required)}}function X(l,v){if(1&l&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&l){const r=t.XpG(2);t.R7$(),t.SpI(" ",r.required_message," ")}}function D(l,v){if(1&l&&(t.j41(0,"div",27),t.DNE(1,X,2,1,"div",28),t.k0s()),2&l){const r=t.XpG();t.R7$(),t.Y8G("ngIf",null==r.f.total_price.errors?null:r.f.total_price.errors.required)}}function J(l,v){if(1&l&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&l){const r=v.$implicit;t.R7$(),t.JRh(r.value)}}function U(l,v){if(1&l&&(t.j41(0,"div",29)(1,"div",30)(2,"ul",31),t.DNE(3,J,2,1,"li",32),t.nI1(4,"keyvalue"),t.k0s()()()),2&l){const r=t.XpG();t.R7$(3),t.Y8G("ngForOf",t.bMT(4,1,r.submit_errors))}}function H(l,v){1&l&&(t.j41(0,"div",33)(1,"span",34),t.EFF(2,"Record was updated."),t.k0s()()),2&l&&t.Y8G("@openCloseTrigger",void 0)}let L=(()=>{class l{onSubmit(){this.is_saving=!0,this.itemForm.controls.total_price.enable(),this.selected_item.added_item&&this.itemForm.patchValue({added_item:this.itemForm.value.item_name}),this.http.post("consultation/item-supplies",this.itemForm.value).subscribe({next:r=>{this.toastr.success("Recorded successfully!","Drug List"),this.closeModal()},error:r=>{this.http.showError(r.error.message,"Drug List")}})}get f(){return this.itemForm.controls}loadSelected(){console.log(this.selected_item),this.itemForm.controls.item_name.disable(),this.itemForm.controls.total_price.disable(),this.selected_item&&this.selected_item.consult_id?this.patchToEdit(this.selected_item):(this.itemForm.patchValue({item_list_id:this.selected_item.id,item_name:this.selected_item.libItemClaim?this.selected_item.libItemClaim.item_name:this.selected_item.added_item,quantity:this.selected_item.quantity,unit_price:this.selected_item.unit_price}),this.computeTotalPrice()),console.log(this.itemForm.value)}computeTotalPrice(){const c=parseFloat(((this.itemForm.value.quantity||0)*(this.itemForm.value.unit_price||0)).toFixed(2));this.itemForm.patchValue({total_price:c})}patchToEdit(r){this.itemForm.patchValue({id:r.id,added_item:r.added_item,item_list_id:r.item_list_id,item_name:r.item_list.lib_item_claim?r.item_list.lib_item_claim.item_name:r.added_item,quantity:r.quantity,unit_price:r.unit_price,total_price:r.total_price})}createForm(){this.itemForm=this.formBuilder.group({id:[null],item_list_id:[null],added_item:[null],patient_id:[this.patient_id],consult_id:[this.consult_id],item_name:[null,e.k0.required],quantity:[null,e.k0.required],unit_price:[null,e.k0.required],total_price:[null,e.k0.required]}),this.loadSelected()}closeModal(){this.toggleSupplyModal.emit("add-item")}constructor(r,h,c){this.formBuilder=r,this.http=h,this.toastr=c,this.toggleSupplyModal=new t.bkB,this.itemForm=new e.gE({id:new e.MJ(null),added_item:new e.MJ(null),item_list_id:new e.MJ(null),quantity:new e.MJ(null),unit_price:new e.MJ(null),total_price:new e.MJ(null)}),this.showAlert=!1,this.is_saving=!1,this.required_message="this is required",this.is_loading=!1}ngOnInit(){this.patient_id=this.http.getUrlParams().patient_id,this.consult_id=this.http.getUrlParams().consult_id,console.log(this.selected_item),this.is_loading=!0,this.createForm()}static{this.\u0275fac=function(h){return new(h||l)(t.rXU(e.ok),t.rXU(g.k),t.rXU(N.tw))}}static{this.\u0275cmp=t.VBU({type:l,selectors:[["app-add-item-form"]],inputs:{selected_item:"selected_item"},outputs:{toggleSupplyModal:"toggleSupplyModal"},decls:37,vars:32,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"overflow-y-auto","max-h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"w-full","max-w-3xl","text-left","text-gray-500","dark:text-gray-400",3,"formGroup"],[1,"flex","item-start","flex-wrap","pb-5","px-3"],[1,"relative","w-full","text-sm","px-4","py-2","mt-2"],["for","item_name",1,"font-semibold",3,"ngClass"],["name","item_name","id","item_name","formControlName","item_name","type","text",1,"input",3,"ngClass"],["class","invalid-alert",4,"ngIf"],[1,"relative","w-1/2","text-sm","px-3","py-2","mt-2"],["for","quantity",1,"font-semibold",3,"ngClass"],["name","quantity","id","quantity","formControlName","quantity","type","number",1,"input",3,"change","ngClass"],[1,"relative","w-1/2","text-sm","pr-3","py-2","mt-2"],["for","unit_price",1,"font-semibold",3,"ngClass"],["name","unit_price","id","unit_price","formControlName","unit_price","type","number",1,"input",3,"change","ngClass"],[1,"relative","w-full","text-sm","pr-3","py-2","mt-2"],["for","total_price",1,"font-semibold",3,"ngClass"],["name","total_price","id","total_price","formControlName","total_price","type","number",1,"input",3,"ngClass"],["id","show_errors","class","relative mx-10 col-span-8 bg-red-200 rounded border border-red-300 text-red-900 text-sm mb-5",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["class","bg-green-100 border border-green-400 text-green-700 px-4 py-3 my-1 rounded h-11 relative w-64 justify-start","role","alert",4,"ngIf"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-300","rounded","text-sm","font-medium","my-2","px-6","py-2.5","transition","duration-150","ease-in-out",3,"click"],["type","button",1,"text-white","bg-blue-500","enabled:hover:ring-2","enabled:focus:outline-none","enabled:hover:ring-blue-300","disabled:opacity-75","font-medium","rounded","text-sm","my-2","px-6","py-2.5","text-center","transition","duration-150","ease-in-out",3,"click","disabled"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"invalid-alert"],[4,"ngIf"],["id","show_errors",1,"relative","mx-10","col-span-8","bg-red-200","rounded","border","border-red-300","text-red-900","text-sm","mb-5"],[1,"block","p-3","pl-10"],[1,"list-disc"],[4,"ngFor","ngForOf"],["role","alert",1,"bg-green-100","border","border-green-400","text-green-700","px-4","py-3","my-1","rounded","h-11","relative","w-64","justify-start"],[1,"block","sm:inline"]],template:function(h,c){1&h&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.EFF(5," List new item "),t.k0s()(),t.j41(6,"div",5)(7,"form",6)(8,"div",7)(9,"div",8)(10,"label",9),t.EFF(11,"Item name"),t.k0s(),t.nrm(12,"input",10),t.DNE(13,V,2,1,"div",11),t.k0s(),t.j41(14,"div",12)(15,"label",13),t.EFF(16,"Quantity"),t.k0s(),t.j41(17,"input",14),t.bIt("change",function(){return c.computeTotalPrice()}),t.k0s(),t.DNE(18,P,2,1,"div",11),t.k0s(),t.j41(19,"div",15)(20,"label",16),t.EFF(21,"Unit Price"),t.k0s(),t.j41(22,"input",17),t.bIt("change",function(){return c.computeTotalPrice()}),t.k0s(),t.DNE(23,q,2,1,"div",11),t.k0s(),t.j41(24,"div",18)(25,"label",19),t.EFF(26,"Total Price"),t.k0s(),t.nrm(27,"input",20),t.DNE(28,D,2,1,"div",11),t.k0s()(),t.DNE(29,U,5,3,"div",21),t.k0s()(),t.j41(30,"div",22),t.DNE(31,H,3,1,"div",23),t.j41(32,"button",24),t.bIt("click",function(){return c.closeModal()}),t.EFF(33,"Close"),t.k0s(),t.j41(34,"button",25),t.bIt("click",function(){return c.onSubmit()}),t.EFF(35,"Save"),t.k0s()()()()(),t.nrm(36,"div",26)),2&h&&(t.R7$(7),t.Y8G("formGroup",c.itemForm),t.R7$(3),t.Y8G("ngClass",t.eq3(16,w,c.is_saving&&c.f.item_name.errors)),t.R7$(2),t.Y8G("ngClass",t.eq3(18,F,c.is_saving&&c.f.item_name.errors)),t.R7$(),t.Y8G("ngIf",c.is_saving&&c.f.item_name.errors),t.R7$(2),t.Y8G("ngClass",t.eq3(20,w,c.is_saving&&c.f.quantity.errors)),t.R7$(2),t.Y8G("ngClass",t.eq3(22,F,c.is_saving&&c.f.quantity.errors)),t.R7$(),t.Y8G("ngIf",c.is_saving&&c.f.quantity.errors),t.R7$(2),t.Y8G("ngClass",t.eq3(24,w,c.is_saving&&c.f.unit_price.errors)),t.R7$(2),t.Y8G("ngClass",t.eq3(26,F,c.is_saving&&c.f.unit_price.errors)),t.R7$(),t.Y8G("ngIf",c.is_saving&&c.f.unit_price.errors),t.R7$(2),t.Y8G("ngClass",t.eq3(28,w,c.is_saving&&c.f.total_price.errors)),t.R7$(2),t.Y8G("ngClass",t.eq3(30,F,c.is_saving&&c.f.total_price.errors)),t.R7$(),t.Y8G("ngIf",c.is_saving&&c.f.total_price.errors),t.R7$(),t.Y8G("ngIf",c.submit_errors),t.R7$(2),t.Y8G("ngIf",c.showAlert),t.R7$(3),t.Y8G("disabled",c.itemForm.invalid))},dependencies:[a.MD,a.YU,a.Sq,a.bT,a.lG,G.dX,e.X1,e.qT,e.me,e.Q0,e.BC,e.cb,e.j4,e.JD],encapsulation:2})}}return l})();const W=l=>({"bg-gray-50":l});function K(l,v){if(1&l){const r=t.RV6();t.j41(0,"tr")(1,"td",26)(2,"div",27)(3,"div",28),t.EFF(4," No records found... "),t.k0s(),t.j41(5,"div",29)(6,"button",30),t.bIt("click",function(){t.eBV(r);const c=t.XpG(2);return t.Njj(c.closeModal({added_item:c.search_item}))}),t.nrm(7,"fa-icon",31),t.EFF(8," Add "),t.k0s()()()()()}if(2&l){const r=t.XpG(2);t.R7$(7),t.Y8G("icon",r.faAdd)}}function z(l,v){if(1&l&&t.EFF(0),2&l){const r=t.XpG().$implicit;t.SpI(" ",r.libItemClaim.item_name," ")}}function Q(l,v){if(1&l&&t.EFF(0),2&l){const r=t.XpG().$implicit;t.SpI(" ",r.added_item," ")}}function S(l,v){if(1&l&&t.EFF(0),2&l){const r=t.XpG().$implicit;t.SpI(" ",r.libItemClaim.category," ")}}function R(l,v){1&l&&t.EFF(0," OTHERS ")}function M(l,v){if(1&l){const r=t.RV6();t.j41(0,"tr",32),t.bIt("click",function(){const c=t.eBV(r).$implicit,I=t.XpG(2);return t.Njj(I.closeModal(c))}),t.j41(1,"td",33),t.DNE(2,z,1,1)(3,Q,1,1),t.k0s(),t.j41(4,"td",34),t.DNE(5,S,1,1)(6,R,1,0),t.k0s(),t.j41(7,"td",34),t.EFF(8),t.k0s(),t.j41(9,"td",34),t.EFF(10),t.k0s()()}if(2&l){const r=v.$implicit;t.Y8G("ngClass",t.eq3(5,W,v.odd)),t.R7$(2),t.vxM(r.libItemClaim?2:3),t.R7$(3),t.vxM(r.libItemClaim?5:6),t.R7$(3),t.SpI(" ",r.quantity," "),t.R7$(2),t.SpI(" ",r.unit_price," ")}}function b(l,v){if(1&l&&(t.j41(0,"table",18)(1,"thead",19)(2,"tr")(3,"th",20),t.EFF(4,"Item Name"),t.k0s(),t.j41(5,"th",21),t.EFF(6,"Item Category"),t.k0s(),t.j41(7,"th",22),t.EFF(8,"Quantity"),t.k0s(),t.j41(9,"th",22),t.EFF(10,"Unit Price"),t.k0s()()(),t.j41(11,"tbody",23),t.DNE(12,K,9,1,"tr",24)(13,M,11,7,"tr",25),t.k0s()()),2&l){const r=t.XpG();t.R7$(12),t.Y8G("ngIf",0===(null==r.item_list?null:r.item_list.length)),t.R7$(),t.Y8G("ngForOf",r.item_list)}}function k(l,v){if(1&l){const r=t.RV6();t.j41(0,"div",35)(1,"div",36)(2,"div",37)(3,"p",38),t.EFF(4," Showing "),t.j41(5,"span",39),t.EFF(6),t.k0s(),t.EFF(7," to "),t.j41(8,"span",39),t.EFF(9),t.k0s(),t.EFF(10," of "),t.j41(11,"span",39),t.EFF(12),t.k0s(),t.EFF(13," results "),t.k0s()(),t.j41(14,"div")(15,"nav",40)(16,"button",41),t.bIt("click",function(){t.eBV(r);const c=t.XpG();return t.Njj(c.loadItem(1))}),t.nrm(17,"fa-icon",42),t.k0s(),t.j41(18,"button",43),t.bIt("click",function(){t.eBV(r);const c=t.XpG();return t.Njj(c.loadItem(c.current_page-1))}),t.nrm(19,"fa-icon",42),t.EFF(20,"Previous "),t.k0s(),t.j41(21,"button",43),t.bIt("click",function(){t.eBV(r);const c=t.XpG();return t.Njj(c.loadItem(c.current_page+1))}),t.EFF(22," Next"),t.nrm(23,"fa-icon",44),t.k0s(),t.j41(24,"button",45),t.bIt("click",function(){t.eBV(r);const c=t.XpG();return t.Njj(c.loadItem(c.last_page))}),t.nrm(25,"fa-icon",44),t.k0s()()()()()}if(2&l){const r=t.XpG();t.R7$(6),t.JRh(r.from),t.R7$(3),t.JRh(r.to),t.R7$(3),t.JRh(r.total),t.R7$(4),t.Y8G("disabled",1===r.current_page),t.R7$(),t.Y8G("icon",r.faAnglesLeft),t.R7$(),t.Y8G("disabled",1===r.current_page),t.R7$(),t.Y8G("icon",r.faChevronLeft),t.R7$(2),t.Y8G("disabled",r.current_page===r.last_page),t.R7$(2),t.Y8G("icon",r.faChevronRight),t.R7$(),t.Y8G("disabled",r.current_page===r.last_page),t.R7$(),t.Y8G("icon",r.faAnglesRight)}}let j=(()=>{class l{closeModal(r){let h;h=r?{data:r,name:"item-list"}:"item-list",this.toggleSupplyModal.emit(h)}loadItem(r){this.is_loading=!0;let h={params:{}};this.search_item&&(h.params["filter[search]"]=this.search_item),r&&(h.params.page=r),h.params.per_page=this.per_page,this.http.get("item-lists/item-list",h).subscribe({next:c=>{console.log(c),this.item_list=c.data,this.current_page=c.meta.current_page,this.last_page=c.meta.last_page,this.from=c.meta.from,this.to=c.meta.to,this.total=c.meta.total,this.is_loading=!1},error:c=>console.log(c)})}constructor(r){this.http=r,this.toggleSupplyModal=new t.bkB,this.faAnglesLeft=y.rNr,this.faChevronLeft=y.Wzs,this.faChevronRight=y.XkK,this.faAnglesRight=y.up_,this.faSearch=y.MjD,this.faEdit=y.MT7,this.faAdd=y.vkJ,this.faCircleXmark=y.bnw,this.is_updating=!1,this.is_loading=!1,this.show_lib_drug=!1,this.per_page=10}ngOnInit(){this.loadItem()}static{this.\u0275fac=function(h){return new(h||l)(t.rXU(g.k))}}static{this.\u0275cmp=t.VBU({type:l,selectors:[["app-item-list"]],inputs:{search_item:"search_item"},outputs:{toggleSupplyModal:"toggleSupplyModal"},decls:19,vars:5,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-5xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"flex","justify-end"],[1,"border","border-gray-400","rounded-md","bg-white"],["type","text","placeholder","Search item",1,"form-input","border-0","text-sm","p-1","m-1","border-r","border-gray-400",3,"ngModelChange","keyup.enter","ngModel"],["type","button",1,"text-blue-500","w-9","h-9",3,"click"],[1,"-ml-1",3,"icon"],["type","button",1,"text-white","w-9","h-9",3,"click"],[1,"-mr-4",3,"icon"],[1,"h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"overflow-x-auto","relative","shadow-md","sm:rounded-lg"],["class","w-full text-sm text-left text-gray-500 dark:text-gray-400 mb-5",4,"ngIf"],[1,"flex","justify-end","py-4","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["class","bg-white py-3 flex items-center justify-between sm:px-6",4,"ngIf"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400","mb-5"],[1,"sticky","top-0","text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6","w-5/12"],["scope","col",1,"py-3","px-6","w-3/12"],["scope","col",1,"py-3","px-6","w-2/12"],[1,"overflow-y-auto"],[4,"ngIf"],["class","hover:bg-blue-200 cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],["colspan","4"],[1,"grid","grid-cols-1","w-full","mt-10"],[1,"text-center","italic"],[1,"flex","justify-center","mt-3"],["type","button",1,"btn-save",3,"click"],[1,"mr-1","text-white",3,"icon"],[1,"hover:bg-blue-200","cursor-pointer",3,"click","ngClass"],["scope","row",1,"py-4","px-4"],[1,"py-4","px-4"],[1,"bg-white","py-3","flex","items-center","justify-between","sm:px-6"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"mr-3"],[1,"text-sm","text-gray-700"],[1,"font-medium"],["aria-label","Pagination",1,"relative","z-0","inline-flex","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","disabled"],[1,"block","h-15","w-15","text-gray-500","pr-1",3,"icon"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","bg-white","text-sm","font-medium","text-gray-700","hover:bg-gray-50",3,"click","disabled"],[1,"h-5","w-5","text-gray-500",3,"icon"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","disabled"]],template:function(h,c){1&h&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.EFF(5," Item library "),t.k0s(),t.j41(6,"div",5)(7,"div",6)(8,"input",7),t.mxI("ngModelChange",function(Z){return t.DH7(c.search_item,Z)||(c.search_item=Z),Z}),t.bIt("keyup.enter",function(){return c.loadItem()}),t.k0s(),t.j41(9,"button",8),t.bIt("click",function(){return c.loadItem()}),t.nrm(10,"fa-icon",9),t.k0s()(),t.j41(11,"button",10),t.bIt("click",function(){return c.closeModal()}),t.nrm(12,"fa-icon",11),t.k0s()()(),t.j41(13,"div",12)(14,"div",13),t.DNE(15,b,14,2,"table",14),t.k0s()(),t.j41(16,"div",15),t.DNE(17,k,26,11,"div",16),t.k0s()()()(),t.nrm(18,"div",17)),2&h&&(t.R7$(8),t.R50("ngModel",c.search_item),t.R7$(2),t.Y8G("icon",c.faSearch),t.R7$(2),t.Y8G("icon",c.faCircleXmark),t.R7$(3),t.Y8G("ngIf",!c.is_loading),t.R7$(2),t.Y8G("ngIf",(null==c.item_list?null:c.item_list.length)>=1))},dependencies:[a.MD,a.YU,a.Sq,a.bT,G.dX,G.aY,e.YN,e.me,e.BC,e.vS],encapsulation:2})}}return l})();var $=f(3825);const ee=l=>({"rounded-b":l});function Y(l,v){if(1&l){const r=t.RV6();t.j41(0,"button",10),t.bIt("click",function(){t.eBV(r);const c=t.XpG();return t.Njj(c.toggleSupplyModal("item-list"))}),t.nrm(1,"fa-icon",11),t.EFF(2," add item "),t.k0s()}if(2&l){const r=t.XpG();t.R7$(),t.Y8G("icon",r.faAdd)}}function te(l,v){if(1&l&&(t.j41(0,"span",25),t.EFF(1),t.k0s(),t.nrm(2,"br"),t.j41(3,"span",26),t.EFF(4),t.k0s()),2&l){const r=t.XpG().$implicit;t.R7$(),t.JRh(r.item_list.lib_item_claim.item_name),t.R7$(3),t.JRh(r.item_list.lib_item_claim.category)}}function ie(l,v){if(1&l&&(t.j41(0,"span",25),t.EFF(1),t.k0s(),t.nrm(2,"br"),t.j41(3,"span",26),t.EFF(4,"OTHERS"),t.k0s()),2&l){const r=t.XpG().$implicit;t.R7$(),t.JRh(r.item_list.added_item)}}function ne(l,v){1&l&&(t.j41(0,"span",27),t.EFF(1,"Item was deleted from the library"),t.k0s(),t.nrm(2,"br"))}function oe(l,v){if(1&l){const r=t.RV6();t.j41(0,"tr",17)(1,"td",18),t.DNE(2,te,5,2)(3,ie,5,1)(4,ne,3,0),t.k0s(),t.j41(5,"td",19),t.EFF(6),t.k0s(),t.j41(7,"td",19),t.EFF(8),t.nI1(9,"currency"),t.k0s(),t.j41(10,"td",19),t.EFF(11),t.nI1(12,"currency"),t.k0s(),t.j41(13,"td",20)(14,"button",21),t.bIt("click",function(){const c=t.eBV(r).$implicit,I=t.XpG(2);return t.Njj(I.toggleSupplyModal({data:c,name:"add-item"}))}),t.nrm(15,"fa-icon",22),t.k0s(),t.j41(16,"button",23),t.bIt("click",function(){const c=t.eBV(r).$implicit,I=t.XpG(2);return t.Njj(I.toggleSupplyModal("delete-item",c))}),t.nrm(17,"fa-icon",24),t.k0s()()()}if(2&l){const r=v.$implicit,h=t.XpG(2);t.R7$(2),t.vxM(r.item_list&&r.item_list.lib_item_claim?2:r.item_list&&r.item_list.added_item?3:4),t.R7$(4),t.SpI(" ",r.quantity," "),t.R7$(2),t.SpI(" ",t.i5U(9,6,r.unit_price,"PHP")," "),t.R7$(3),t.SpI(" ",t.i5U(12,9,r.total_price,"PHP")," "),t.R7$(4),t.Y8G("icon",h.faEdit),t.R7$(2),t.Y8G("icon",h.faTrashCan)}}function se(l,v){if(1&l&&(t.j41(0,"table",12)(1,"thead")(2,"tr",13)(3,"th",14),t.EFF(4,"Item Name "),t.nrm(5,"br"),t.EFF(6," Category"),t.k0s(),t.j41(7,"th",15),t.EFF(8,"Quantity"),t.k0s(),t.j41(9,"th",15),t.EFF(10,"Price"),t.k0s(),t.j41(11,"th",15),t.EFF(12,"Total"),t.k0s(),t.j41(13,"th",15),t.EFF(14,"Action"),t.k0s()()(),t.j41(15,"tbody"),t.DNE(16,oe,18,12,"tr",16),t.k0s()()),2&l){const r=t.XpG();t.R7$(16),t.Y8G("ngForOf",r.consult_details.consultItems)("ngForTrackBy",r.identify)}}function re(l,v){if(1&l){const r=t.RV6();t.j41(0,"app-delete-item",28),t.bIt("toggleModal",function(){t.eBV(r);const c=t.XpG();return t.Njj(c.toggleSupplyModal("delete-item"))}),t.k0s()}if(2&l){const r=t.XpG();t.Y8G("delete_id",r.delete_id)("delete_desc",r.delete_desc)("url",r.url)}}function ae(l,v){if(1&l){const r=t.RV6();t.j41(0,"app-add-item-form",29),t.bIt("toggleSupplyModal",function(c){t.eBV(r);const I=t.XpG();return t.Njj(I.toggleSupplyModal(c))}),t.k0s()}if(2&l){const r=t.XpG();t.Y8G("selected_item",r.selected_item)}}function le(l,v){if(1&l){const r=t.RV6();t.j41(0,"app-item-list",30),t.bIt("toggleSupplyModal",function(c){t.eBV(r);const I=t.XpG();return t.Njj(I.toggleSupplyModal(c))}),t.k0s()}}let de=(()=>{class l{onSubmit(){this.is_saving=!0,this.http.post("",{}).subscribe({next:r=>{console.log(r)},error:r=>{console.log(r.error.message)}})}toggleSupplyModal(r,h){console.log(r),r.data?(this.selected_item=r.data,this.supply_modals[r.name]=!this.supply_modals[r.name],"item-list"==r.name&&(this.supply_modals["add-item"]=!0),!1===this.supply_modals[r.name]&&this.loadConsult.emit()):(console.log(h),this.delete_id=h?h.id:null,this.supply_modals[r]=!this.supply_modals[r],!1===this.supply_modals[r]&&this.loadConsult.emit())}constructor(r,h){this.http=r,this.toastr=h,this.loadConsult=new t.bkB,this.faEdit=y.MT7,this.faTrashCan=y.sjs,this.faAdd=y.vkJ,this.show_content=!0,this.show_list=!1,this.show_form=!1,this.show_delete_form=!1,this.show_actions=!1,this.is_saving=!1,this.consult_done=!1,this.supply_modals=[],this.delete_desc="Items",this.url="consultation/item-supplies/"}ngOnChanges(r){console.log(this.consult_details),this.show_content=this.toggle_content,!1===this.consult_details.consult_done&&(this.show_actions=!0),this.consult_details&&(this.consult_done=this.consult_details.consult_done)}static{this.\u0275fac=function(h){return new(h||l)(t.rXU(g.k),t.rXU(N.tw))}}static{this.\u0275cmp=t.VBU({type:l,selectors:[["app-supplies"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",with_credentials:"with_credentials",allowed_to_edit:"allowed_to_edit",user_id:"user_id"},outputs:{loadConsult:"loadConsult"},features:[t.OA$],decls:12,vars:8,consts:[[1,"my-4"],[1,"flex","w-full"],[1,"w-full"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-amber-500","flex","justify-between",3,"ngClass"],["type","button","class","ml-3 text-sm bg-white text-blue-500 px-3 rounded-full",3,"click",4,"ngIf"],["class","w-full table-auto p-5",4,"ngIf"],[3,"delete_id","delete_desc","url","toggleModal",4,"ngIf"],[3,"selected_item","toggleSupplyModal",4,"ngIf"],[3,"toggleSupplyModal",4,"ngIf"],["type","button",1,"ml-3","text-sm","bg-white","text-blue-500","px-3","rounded-full",3,"click"],[1,"pr-1",3,"icon"],[1,"w-full","table-auto","p-5"],[1,"align-top"],["scope","col",1,"text-center","py-3","px-3","w-8/12"],["scope","col",1,"text-center","py-3","px-3","w-1/12"],["class","bg-white border-b last:border-0 text-sm align-top",4,"ngFor","ngForOf","ngForTrackBy"],[1,"bg-white","border-b","last:border-0","text-sm","align-top"],[1,"py-4","px-3"],["scope","row",1,"py-4","px-3","font-medium","text-gray-900"],[1,"text-sm","text-center","mb-5","align-middle"],[1,"mr-3",3,"click"],[1,"text-amber-500",3,"icon"],[3,"click"],[1,"text-rose-500",3,"icon"],[1,"font-semibold"],[1,"italic","text-sm"],[1,"italic","text-rose-500"],[3,"toggleModal","delete_id","delete_desc","url"],[3,"toggleSupplyModal","selected_item"],[3,"toggleSupplyModal"]],template:function(h,c){1&h&&(t.nrm(0,"hr",0),t.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),t.EFF(5," Medicine, Rooms & Supplies "),t.j41(6,"div"),t.DNE(7,Y,3,1,"button",5),t.k0s()(),t.DNE(8,se,17,2,"table",6),t.k0s()()(),t.DNE(9,re,1,3,"app-delete-item",7)(10,ae,1,1,"app-add-item-form",8)(11,le,1,0,"app-item-list",9)),2&h&&(t.R7$(4),t.Y8G("ngClass",t.eq3(6,ee,!c.show_content)),t.R7$(3),t.Y8G("ngIf",c.show_actions),t.R7$(),t.Y8G("ngIf",c.show_content),t.R7$(),t.Y8G("ngIf",c.supply_modals["delete-item"]),t.R7$(),t.Y8G("ngIf",c.supply_modals["add-item"]),t.R7$(),t.Y8G("ngIf",c.supply_modals["item-list"]))},dependencies:[a.MD,a.YU,a.Sq,a.bT,a.oe,G.dX,G.aY,L,j,$.c],encapsulation:2})}}return l})()},9596:(pe,B,f)=>{f.d(B,{G:()=>me});var a=f(177),t=f(9417),G=f(614),y=f(5383),e=f(4438),g=f(60),N=f(3318),w=f(5794);const F=(m,C)=>({"border-b-0":m,"border-t-0":C});function T(m,C){if(1&m&&e.nrm(0,"fa-icon",34),2&m){const s=e.XpG();e.Y8G("icon",s.faCircleNotch)}}function V(m,C){if(1&m){const s=e.RV6();e.j41(0,"tr")(1,"td",42),e.EFF(2),e.k0s(),e.j41(3,"td",43),e.EFF(4),e.k0s(),e.j41(5,"td",44),e.bIt("click",function(){const d=e.eBV(s).$implicit,E=e.XpG(2).$implicit,ce=e.XpG();return e.Njj(ce.closeModal(E,d))}),e.EFF(6),e.k0s(),e.j41(7,"td",43),e.EFF(8),e.k0s(),e.j41(9,"td",43),e.EFF(10),e.k0s(),e.j41(11,"td",43),e.EFF(12),e.k0s(),e.j41(13,"td",45),e.EFF(14),e.k0s(),e.j41(15,"td",45),e.EFF(16),e.k0s(),e.j41(17,"td",45),e.EFF(18),e.k0s(),e.j41(19,"td",45),e.EFF(20),e.k0s(),e.j41(21,"td",45),e.EFF(22),e.k0s(),e.j41(23,"td",45),e.EFF(24),e.k0s(),e.j41(25,"td",46),e.EFF(26),e.k0s()()}if(2&m){const s=C.$implicit,_=C.last,d=C.first;e.R7$(),e.Y8G("ngClass",e.l_i(26,F,_,d)),e.R7$(),e.JRh(s.pprimaryHCIFee),e.R7$(),e.Y8G("ngClass",e.l_i(29,F,_,d)),e.R7$(),e.JRh(s.pprimaryProfFee),e.R7$(),e.Y8G("ngClass",e.l_i(32,F,_,d)),e.R7$(),e.JRh(s.pprimaryCaseRate),e.R7$(),e.Y8G("ngClass",e.l_i(35,F,_,d)),e.R7$(),e.JRh(s.psecondaryHCIFee),e.R7$(),e.Y8G("ngClass",e.l_i(38,F,_,d)),e.R7$(),e.JRh(s.psecondaryProfFee),e.R7$(),e.Y8G("ngClass",e.l_i(41,F,_,d)),e.R7$(),e.JRh(s.psecondaryCaseRate),e.R7$(),e.Y8G("ngClass",e.l_i(44,F,_,d)),e.R7$(),e.JRh(s.pcheckFacilityH1),e.R7$(),e.Y8G("ngClass",e.l_i(47,F,_,d)),e.R7$(),e.JRh(s.pcheckFacilityH2),e.R7$(),e.Y8G("ngClass",e.l_i(50,F,_,d)),e.R7$(),e.JRh(s.pcheckFacilityH3),e.R7$(),e.Y8G("ngClass",e.l_i(53,F,_,d)),e.R7$(),e.JRh(s.pcheckFacilityASC),e.R7$(),e.Y8G("ngClass",e.l_i(56,F,_,d)),e.R7$(),e.JRh(s.pcheckFacilityPCF),e.R7$(),e.Y8G("ngClass",e.l_i(59,F,_,d)),e.R7$(),e.JRh(s.pcheckFacilityMAT),e.R7$(),e.Y8G("ngClass",e.l_i(62,F,_,d)),e.R7$(),e.JRh(s.pcheckFacilityFSDC)}}function O(m,C){if(1&m&&(e.j41(0,"table",40),e.DNE(1,V,27,65,"tr",41),e.k0s()),2&m){const s=e.XpG().$implicit;e.R7$(),e.Y8G("ngForOf",s.amount)}}function P(m,C){if(1&m){const s=e.RV6();e.j41(0,"table",47)(1,"tr",48)(2,"td",49),e.EFF(3),e.k0s(),e.j41(4,"td",50),e.EFF(5),e.k0s(),e.j41(6,"td",51),e.bIt("click",function(){e.eBV(s);const d=e.XpG().$implicit,E=e.XpG();return e.Njj(E.closeModal(d,d.amount))}),e.EFF(7),e.k0s(),e.j41(8,"td",50),e.EFF(9),e.k0s(),e.j41(10,"td",50),e.EFF(11),e.k0s(),e.j41(12,"td",50),e.EFF(13),e.k0s(),e.j41(14,"td",52),e.EFF(15),e.k0s(),e.j41(16,"td",52),e.EFF(17),e.k0s(),e.j41(18,"td",52),e.EFF(19),e.k0s(),e.j41(20,"td",52),e.EFF(21),e.k0s(),e.j41(22,"td",52),e.EFF(23),e.k0s(),e.j41(24,"td",52),e.EFF(25),e.k0s(),e.j41(26,"td",53),e.EFF(27),e.k0s()()()}if(2&m){const s=e.XpG().$implicit;e.R7$(3),e.JRh(s.amount.pPrimaryHCIFee),e.R7$(2),e.JRh(s.amount.pPrimaryProfFee),e.R7$(2),e.JRh(s.amount.pprimaryCaseRate),e.R7$(2),e.JRh(s.amount.psecondaryHCIFee),e.R7$(2),e.JRh(s.amount.psecondaryProfFee),e.R7$(2),e.JRh(s.amount.psecondaryCaseRate),e.R7$(2),e.JRh(s.amount.pcheckFacilityH1),e.R7$(2),e.JRh(s.amount.pcheckFacilityH2),e.R7$(2),e.JRh(s.amount.pcheckFacilityH3),e.R7$(2),e.JRh(s.amount.pcheckFacilityASC),e.R7$(2),e.JRh(s.amount.pcheckFacilityPCF),e.R7$(2),e.JRh(s.amount.pcheckFacilityMAT),e.R7$(2),e.JRh(s.amount.pcheckFacilityFSDC)}}function A(m,C){if(1&m&&(e.j41(0,"tr",35)(1,"td",36),e.EFF(2),e.k0s(),e.j41(3,"td",36),e.EFF(4),e.k0s(),e.j41(5,"td",36),e.EFF(6),e.nI1(7,"date"),e.nI1(8,"date"),e.k0s(),e.j41(9,"td",37),e.DNE(10,O,2,1,"table",38)(11,P,28,13,"table",39),e.k0s()()),2&m){const s=C.$implicit;e.R7$(),e.Y8G("rowSpan",s.amount.length),e.R7$(),e.JRh(s.pitemCode),e.R7$(),e.Y8G("rowSpan",s.amount.length),e.R7$(),e.JRh(s.pcaseRateDescription),e.R7$(),e.Y8G("rowSpan",s.amount.length),e.R7$(),e.Lme("",e.i5U(7,9,s.peffectivityDate,"MM/dd/yyyy")," to ",e.i5U(8,12,s.peffectivityEndDate,"MM/dd/yyyy"),""),e.R7$(4),e.Y8G("ngIf",s.amount.length),e.R7$(),e.Y8G("ngIf",!s.amount.length)}}let q=(()=>{class m{get f(){return this.searchForm.controls}onSubmit(){this.caserate_result=[],this.is_searching=!0,this.searchForm.patchValue({program_code:"cc"===this.program_name||"fp"===this.program_name?"mc":this.program_name}),this.searchForm.patchValue({rvs:this.searchForm.value.rvs.toUpperCase(),description:this.searchForm.value.description.toUpperCase(),icd10:this.searchForm.value.icd10.toUpperCase()}),this.http.post("eclaims/case-rate",this.searchForm.value).subscribe({next:s=>{this.is_searching=!1,this.caserate_result=s.caserates,console.log(this.caserate_result)},error:s=>{console.log(s),this.is_searching=!1,this.toastr.error(s.error.message,"Caserate error",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0})}})}closeModal(s,_){let d;d=s?{name:"search-caserate",amount:_,data:s}:"search-caserate",this.toggleModal.emit(d)}constructor(s,_,d){this.formBuilder=s,this.http=_,this.toastr=d,this.toggleModal=new e.bkB,this.faSave=G.hSh,this.faCircleNotch=y.s4k,this.faSearch=y.MjD,this.faMagnifyingGlass=y.$UM,this.is_searching=!1,this.show_error=!1,this.required_message="Required field",this.searchForm=new t.gE({program_code:new t.MJ(""),description:new t.MJ(""),icd10:new t.MJ(""),rvs:new t.MJ("")}),this.caserate_result=[]}static{this.\u0275fac=function(_){return new(_||m)(e.rXU(t.ok),e.rXU(N.k),e.rXU(w.tw))}}static{this.\u0275cmp=e.VBU({type:m,selectors:[["app-search-caserate"]],inputs:{selected_tb_consult:"selected_tb_consult",program_name:"program_name"},outputs:{toggleModal:"toggleModal"},decls:96,vars:4,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-5xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-orange-400"],[1,"text-sm","font-bold","text-white"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"text-left","text-gray-500","m-5",3,"submit","formGroup"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-4"],["for","description"],["type","text","name","description","id","description","formControlName","description",1,"input"],[1,"col-span-3"],["for","icd10"],["type","text","name","icd10","id","icd10","formControlName","icd10",1,"input"],["for","rvs"],["type","text","name","rvs","id","rvs","formControlName","rvs",1,"input"],[1,"col-span-2","justify-end"],["type","submit",1,"btn-save","mt-6","-py-0.5"],["animation","spin",3,"icon",4,"ngIf"],[1,"flex","mx-3","justify-center"],[1,"table-auto","text-xs","border","border-slate-300","border-collapse"],["colspan","15",1,"w-[900px]"],["rowspan","3",1,"border","border-slate-300","w-[70px]"],["rowspan","3",1,"border","border-slate-300","w-[198px]"],["colspan","3",1,"border","border-slate-300","w-[216px]"],["colspan","7",1,"border","border-slate-300","w-[200px]"],["rowspan","2",1,"border","border-slate-300","w-[72px]"],["colspan","3",1,"border","border-slate-300","text-[0.7rem]","w-[100px]"],["rowspan","2",1,"border","border-slate-300"],[1,"border","border-slate-300","text-[0.7rem]"],["class","border border-slate-300",4,"ngFor","ngForOf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-gray-400",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],["animation","spin",3,"icon"],[1,"border","border-slate-300"],[1,"border","border-slate-300",3,"rowSpan"],["colspan","13",1,"p-0","m-0"],["class","table-auto p-0 m-0 w-full border-0",4,"ngIf"],["class","table-auto p-0 m-0 w-full",4,"ngIf"],[1,"table-auto","p-0","m-0","w-full","border-0"],[4,"ngFor","ngForOf"],[1,"px-1","border","border-slate-300","w-[72px]","border-l-0",3,"ngClass"],[1,"px-1","border","border-slate-300","w-[72px]",3,"ngClass"],[1,"px-1","border","border-slate-300","w-[72px]","text-blue-500","font-semibold","hover:cursor-pointer",3,"click","ngClass"],[1,"px-1","border","border-slate-300",3,"ngClass"],[1,"px-1","border","border-slate-300","border-r-0",3,"ngClass"],[1,"table-auto","p-0","m-0","w-full"],[1,"h-full","py-8"],[1,"px-1","border","border-slate-300","border-y-0","border-l-0","w-[72px]"],[1,"px-1","border","border-slate-300","border-y-0","w-[72px]"],[1,"px-1","border","border-slate-300","border-y-0","w-[72px]","text-blue-500","font-semibold","hover:cursor-pointer",3,"click"],[1,"px-1","border","border-slate-300","border-y-0"],[1,"px-1","border","border-slate-300","border-y-0","border-r-0"]],template:function(_,d){1&_&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e.EFF(5," Search Case Rate "),e.k0s()(),e.j41(6,"div",5)(7,"form",6),e.bIt("submit",function(){return d.onSubmit()}),e.j41(8,"div",7)(9,"div",8)(10,"label",9),e.EFF(11,"Description"),e.k0s(),e.nrm(12,"input",10),e.k0s(),e.j41(13,"div",11)(14,"label",12),e.EFF(15,"ICD10 Code"),e.k0s(),e.nrm(16,"input",13),e.k0s(),e.j41(17,"div",11)(18,"label",14),e.EFF(19,"RVS Code"),e.k0s(),e.nrm(20,"input",15),e.k0s(),e.j41(21,"div",16)(22,"button",17),e.DNE(23,T,1,1,"fa-icon",18),e.EFF(24),e.k0s()()()(),e.j41(25,"div",19)(26,"table",20)(27,"thead")(28,"tr")(29,"th",21),e.EFF(30,"Case Rate Group"),e.k0s()(),e.j41(31,"tr")(32,"th",22),e.EFF(33,"ICD10/ "),e.nrm(34,"br"),e.EFF(35,"RVS Code"),e.k0s(),e.j41(36,"th",23),e.EFF(37,"Description"),e.k0s(),e.j41(38,"th",23),e.EFF(39,"Effectivity Date"),e.k0s(),e.j41(40,"th",24),e.EFF(41,"First Case Rate"),e.k0s(),e.j41(42,"th",24),e.EFF(43,"Second Case Rate"),e.k0s(),e.j41(44,"th",25),e.EFF(45,"Applicable Health Care Institutions "),e.nrm(46,"br"),e.EFF(47,"Note: If licensed and capable to perform the procedure"),e.k0s()(),e.j41(48,"tr")(49,"th",26),e.EFF(50,"HCI "),e.nrm(51,"br"),e.EFF(52," Fee"),e.k0s(),e.j41(53,"th",26),e.EFF(54,"Prof "),e.nrm(55,"br"),e.EFF(56," Fee"),e.k0s(),e.j41(57,"th",26),e.EFF(58,"Case"),e.nrm(59,"br"),e.EFF(60," Rate"),e.k0s(),e.j41(61,"th",26),e.EFF(62,"HCI "),e.nrm(63,"br"),e.EFF(64," Fee"),e.k0s(),e.j41(65,"th",26),e.EFF(66,"Prof "),e.nrm(67,"br"),e.EFF(68," Fee"),e.k0s(),e.j41(69,"th",26),e.EFF(70,"Case "),e.nrm(71,"br"),e.EFF(72," Rate"),e.k0s(),e.j41(73,"th",27),e.EFF(74,"Level"),e.k0s(),e.j41(75,"th",28),e.EFF(76,"ASC"),e.k0s(),e.j41(77,"th",28),e.EFF(78,"PCF"),e.k0s(),e.j41(79,"th",28),e.EFF(80,"MCP"),e.k0s(),e.j41(81,"th",28),e.EFF(82,"FSDC"),e.k0s()(),e.j41(83,"tr")(84,"th",29),e.EFF(85,"1"),e.k0s(),e.j41(86,"th",29),e.EFF(87,"2"),e.k0s(),e.j41(88,"th",29),e.EFF(89,"3"),e.k0s()()(),e.j41(90,"tbody"),e.DNE(91,A,12,15,"tr",30),e.k0s()()()(),e.j41(92,"div",31)(93,"button",32),e.bIt("click",function(){return d.closeModal()}),e.EFF(94,"Close"),e.k0s()()()()(),e.nrm(95,"div",33)),2&_&&(e.R7$(7),e.Y8G("formGroup",d.searchForm),e.R7$(16),e.Y8G("ngIf",d.is_searching),e.R7$(),e.SpI(" ",d.is_searching?"":"Search"," "),e.R7$(67),e.Y8G("ngForOf",d.caserate_result))},dependencies:[a.MD,a.YU,a.Sq,a.bT,a.vh,t.X1,t.qT,t.me,t.BC,t.cb,t.j4,t.JD,g.dX,g.aY],encapsulation:2})}}return m})();var X=f(8793),D=f(7673),J=f(5964),U=f(3294),H=f(152),L=f(8141),W=f(5558),K=f(9437),z=f(6354),Q=f(1413),S=f(8761);const R=[{caserate_code:"CR4656",code:"89221",description:"DIRECTLY OBSERVED TREATMENT SHORT-COURSE INTENSIVE PHASE",hci_fee:"2500.00",prof_fee:"0.00",caserate_fee:"2500.00"},{caserate_code:"CR4657",code:"89222",description:"DIRECTLY OBSERVED TREATMENT SHORT-COURSE MAINTENANCE PHASE",hci_fee:"1500.00",prof_fee:"0.00",caserate_fee:"1500.00"}],M=[{caserate_code:"CR4687",code:"99460",description:"EXPANDED NEWBORN CARE PACKAGE (WITH HEARING TEST)",hci_fee:"2450.00",prof_fee:"500.00",caserate_fee:"2950.00"},{caserate_code:"CR4687",code:"99460",description:"EXPANDED NEWBORN CARE PACKAGE (WITHOUT HEARING TEST)",hci_fee:"2250.00",prof_fee:"500.00",caserate_fee:"2750.00"}],b=[{caserate_code:"CR4652",code:"MCP01",description:"ROUTINE OBSTETRIC CARE INCLUDING PRENATAL, DELIVERY AND NEWBORN SERVICES OF NONHOSPITAL FACILITIES (MATERNITY CARE PACKAGE)",hci_fee:"4800.00",prof_fee:"3200.00",caserate_fee:"8000.00"},{caserate_code:"CR4651",code:"NSD01",description:"ROUTINE OBSTETRIC CARE INCLUDING ANTEPARTUM CARE, VAGINAL DELIVERY AND/OR POSTPARTUM CARE (NORMAL SPONTANEOUS DELIVERY PACKAGE) FOR HOSPITALS",hci_fee:"3900.00",prof_fee:"2600.00",caserate_fee:"6500.00"},{caserate_code:"CR4683",code:"ANC01",description:"ANTENATAL CARE PACKAGE",hci_fee:"900.00",prof_fee:"600.00",caserate_fee:"1500.00"},{caserate_code:"CR4684",code:"ANC02",description:"ANTENATAL CARE SERVICES WITH INTRAPARTUM MONITORING OR LABOR WATCH (WITHOUT DELIVERY)",hci_fee:"1290.00",prof_fee:"860.00",caserate_fee:"2150.00"}],k=[{caserate_code:"CR4658",code:"90375",description:"ANIMAL BITE",hci_fee:"2700.00",prof_fee:"300.00",caserate_fee:"3000.00"}],j=[{caserate_code:"CR4685",code:"FP001",description:"SUBDERMAL CONTRACEPTIVE IMPLANT",hci_fee:"1800.00",prof_fee:"1200.00",caserate_fee:"3000.00"},{caserate_code:"CR0385",code:"58300",description:"INSERTION OF INTRAUTERINE DEVICE (IUD)",hci_fee:"1200.00",prof_fee:"800.00",caserate_fee:"2000.00"},{caserate_code:"CR0456",code:"55250",description:"NON-SCALPEL VASECTOMY",hci_fee:"3000.00",prof_fee:"1000.00",caserate_fee:"4000.00"}],$=[{caserate_code:"CR4655",code:"87207",description:"OUTPATIENT MALARIA PACKAGE",hci_fee:"600.00",prof_fee:"0.00",caserate_fee:"600.00"}],Y=()=>({standalone:!0});function te(m,C){if(1&m){const s=e.RV6();e.j41(0,"div",13)(1,"div",14)(2,"strong"),e.EFF(3),e.k0s(),e.nrm(4,"br"),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br"),e.EFF(8),e.nrm(9,"br"),e.k0s(),e.j41(10,"div",15)(11,"button",16),e.bIt("click",function(){const d=e.eBV(s).index,E=e.XpG();return e.Njj(E.selectCaserate(d))}),e.nrm(12,"fa-icon",17),e.k0s()()()}if(2&m){const s=C.$implicit,_=e.XpG();e.R7$(3),e.Lme("",s.code," - ",s.caserate_code,""),e.R7$(2),e.SpI(" ",e.brH(6,5,s.caserate_date,"MM/dd/yyyy","Asia/Manila")," "),e.R7$(3),e.SpI(" ",s.description," "),e.R7$(4),e.Y8G("icon",_.faEdit)}}function ie(m,C){if(1&m&&(e.j41(0,"option",55),e.EFF(1),e.k0s()),2&m){const s=C.$implicit;e.Y8G("ngValue",s),e.R7$(),e.Lme("",s.last_name,", ",s.first_name,"")}}function ne(m,C){if(1&m&&(e.j41(0,"div"),e.nrm(1,"fa-icon",56),e.EFF(2,"Check Acceditation Status "),e.k0s()),2&m){const s=e.XpG(2);e.R7$(),e.Y8G("icon",s.faCircleNotch)}}function oe(m,C){if(1&m&&(e.j41(0,"span",58),e.EFF(1),e.k0s()),2&m){const s=e.XpG(3);e.R7$(),e.JRh(s.result_accred_check.result.message)}}function se(m,C){if(1&m&&(e.j41(0,"span",59),e.EFF(1),e.nrm(2,"br"),e.EFF(3),e.k0s()),2&m){const s=e.XpG(3);e.Y8G("ngClass","NO"===s.result_accred_check.result.isaccredited?"text-red-500":"text-green-500"),e.R7$(),e.SpI(" Is Accredited: ",s.result_accred_check.result.isaccredited," "),e.R7$(2),e.Lme(" Validity Date of Accreditation: ",s.result_accred_check.result.accreditationstart," TO ",s.result_accred_check.result.accreditationend," ")}}function re(m,C){if(1&m&&(e.j41(0,"div",57),e.DNE(1,oe,2,1,"span",58)(2,se,4,4,"span",59),e.k0s()),2&m){const s=e.XpG(2);e.R7$(),e.vxM(!1===s.result_accred_check.result.success?1:2)}}function ae(m,C){if(1&m&&(e.j41(0,"div",60)(1,"h5",61)(2,"strong"),e.EFF(3),e.k0s(),e.EFF(4),e.k0s()()),2&m){const s=C.item,_=C.searchTerm;e.R7$(),e.Y8G("ngOptionHighlight",_),e.R7$(2),e.SpI("",s.icd10_code,":"),e.R7$(),e.SpI(" ",s.icd10_desc,"")}}function le(m,C){if(1&m&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&m){const s=C.item;e.R7$(),e.Lme(" ",s.icd10_code,": ",s.icd10_desc," ")}}function de(m,C){1&m&&(e.j41(0,"div")(1,"label",96),e.EFF(2,"Medicine Total Amount"),e.k0s(),e.nrm(3,"input",97),e.k0s())}function l(m,C){1&m&&(e.j41(0,"div")(1,"label",98),e.EFF(2,"Examitation Total Amount"),e.k0s(),e.nrm(3,"input",99),e.k0s())}function v(m,C){if(1&m){const s=e.RV6();e.j41(0,"div",62)(1,"div")(2,"label",63),e.EFF(3,"HCI Total Actual Charges"),e.k0s(),e.j41(4,"input",64),e.bIt("change",function(){e.eBV(s);const d=e.XpG(2);return e.Njj(d.computeTotal("hci_pTotalAmount"))}),e.k0s()(),e.j41(5,"div")(6,"label",65),e.EFF(7,"VAT Exempt (%)"),e.k0s(),e.j41(8,"input",66),e.mxI("ngModelChange",function(d){e.eBV(s);const E=e.XpG(2);return e.DH7(E.hci_vat_exempt,d)||(E.hci_vat_exempt=d),e.Njj(d)}),e.bIt("change",function(){e.eBV(s);const d=e.XpG(2);return e.Njj(d.computeTotal("hci_pTotalAmount"))}),e.k0s()(),e.j41(9,"div")(10,"label",67),e.EFF(11,"Discount (%)"),e.k0s(),e.j41(12,"input",68),e.mxI("ngModelChange",function(d){e.eBV(s);const E=e.XpG(2);return e.DH7(E.hci_discount,d)||(E.hci_discount=d),e.Njj(d)}),e.bIt("change",function(){e.eBV(s);const d=e.XpG(2);return e.Njj(d.computeTotal("hci_pTotalAmount"))}),e.k0s()(),e.j41(13,"fieldset",44)(14,"label",69),e.EFF(15,"Amount after HCI Discount"),e.k0s(),e.j41(16,"input",70),e.bIt("change",function(){e.eBV(s);const d=e.XpG(2);return e.Njj(d.computeTotal("hci_pTotalAmount"))}),e.k0s()(),e.j41(17,"div")(18,"label",71),e.EFF(19,"HCI Philhealth Benefit"),e.k0s(),e.j41(20,"input",72),e.bIt("change",function(){e.eBV(s);const d=e.XpG(2);return e.Njj(d.computeTotal("hci_pTotalAmount"))}),e.k0s()(),e.j41(21,"fieldset",44)(22,"label",73),e.EFF(23,"HCI Total Amount"),e.k0s(),e.nrm(24,"input",74),e.k0s(),e.j41(25,"div")(26,"label",75),e.EFF(27,"Professional Total Actual Charges"),e.k0s(),e.j41(28,"input",76),e.bIt("change",function(){e.eBV(s);const d=e.XpG(2);return e.Njj(d.computeTotal("prof_pTotalAmount"))}),e.k0s()(),e.j41(29,"div")(30,"label",77),e.EFF(31,"VAT Exempt (%)"),e.k0s(),e.j41(32,"input",78),e.mxI("ngModelChange",function(d){e.eBV(s);const E=e.XpG(2);return e.DH7(E.prof_vat_exempt,d)||(E.prof_vat_exempt=d),e.Njj(d)}),e.bIt("change",function(){e.eBV(s);const d=e.XpG(2);return e.Njj(d.computeTotal("prof_pTotalAmount"))}),e.k0s()(),e.j41(33,"div")(34,"label",79),e.EFF(35,"Discount (%)"),e.k0s(),e.j41(36,"input",80),e.mxI("ngModelChange",function(d){e.eBV(s);const E=e.XpG(2);return e.DH7(E.prof_discount,d)||(E.prof_discount=d),e.Njj(d)}),e.bIt("change",function(){e.eBV(s);const d=e.XpG(2);return e.Njj(d.computeTotal("prof_pTotalAmount"))}),e.k0s()(),e.j41(37,"fieldset",44)(38,"label",81),e.EFF(39,"Amount after Professional Discount"),e.k0s(),e.j41(40,"input",82),e.bIt("change",function(){e.eBV(s);const d=e.XpG(2);return e.Njj(d.computeTotal("prof_pTotalAmount"))}),e.k0s()(),e.j41(41,"div")(42,"label",83),e.EFF(43,"Professional Philhealth Benefit"),e.k0s(),e.j41(44,"input",84),e.bIt("change",function(){e.eBV(s);const d=e.XpG(2);return e.Njj(d.computeTotal("prof_pTotalAmount"))}),e.k0s()(),e.j41(45,"fieldset",44)(46,"label",85),e.EFF(47,"Professional Total Amount"),e.k0s(),e.nrm(48,"input",86),e.k0s(),e.j41(49,"div",87),e.nrm(50,"input",88),e.j41(51,"label",89),e.EFF(52,"With Medicine?"),e.k0s()(),e.DNE(53,de,4,0,"div",24),e.j41(54,"div",87),e.nrm(55,"input",90),e.j41(56,"label",91),e.EFF(57,"With Examination"),e.k0s()(),e.DNE(58,l,4,0,"div",24),e.j41(59,"div",87),e.nrm(60,"input",92),e.j41(61,"label",93),e.EFF(62,"With HMO"),e.k0s()(),e.j41(63,"div",87),e.nrm(64,"input",94),e.j41(65,"label",95),e.EFF(66,"Others (i.e., PCSO, Promissory note, etc.)"),e.k0s()()()}if(2&m){const s=e.XpG(2);e.R7$(8),e.R50("ngModel",s.hci_vat_exempt),e.Y8G("ngModelOptions",e.lJ4(10,Y)),e.R7$(4),e.R50("ngModel",s.hci_discount),e.Y8G("ngModelOptions",e.lJ4(11,Y)),e.R7$(20),e.R50("ngModel",s.prof_vat_exempt),e.Y8G("ngModelOptions",e.lJ4(12,Y)),e.R7$(4),e.R50("ngModel",s.prof_discount),e.Y8G("ngModelOptions",e.lJ4(13,Y)),e.R7$(17),e.Y8G("ngIf",s.caserateForm.value.meds_flag),e.R7$(5),e.Y8G("ngIf",s.caserateForm.value.meds_pExaminations_flag)}}function r(m,C){if(1&m&&e.nrm(0,"fa-icon",100),2&m){const s=e.XpG(2);e.Y8G("icon",s.faSave)}}function h(m,C){if(1&m&&e.nrm(0,"fa-icon",56),2&m){const s=e.XpG(2);e.Y8G("icon",s.faCircleNotch)}}function c(m,C){if(1&m){const s=e.RV6();e.j41(0,"div",18)(1,"div")(2,"label",19),e.EFF(3,"Caserate date"),e.k0s(),e.j41(4,"input",20),e.bIt("change",function(){e.eBV(s);const d=e.XpG();return e.Njj(d.toggleAttendant())}),e.k0s()(),e.j41(5,"div")(6,"label",21),e.EFF(7,"Caserate attendant"),e.k0s(),e.j41(8,"select",22),e.bIt("change",function(){e.eBV(s);const d=e.XpG();return e.Njj(d.checkDoctorAccred())}),e.DNE(9,ie,2,3,"option",23),e.k0s()(),e.DNE(10,ne,3,1,"div",24)(11,re,3,1,"div",25),e.j41(12,"div")(13,"label",26),e.EFF(14,"Admission Diagnosis"),e.k0s(),e.nrm(15,"input",27),e.k0s(),e.j41(16,"div")(17,"label",28),e.EFF(18,"Discharge Diagnosis"),e.k0s(),e.nrm(19,"input",29),e.k0s(),e.j41(20,"div")(21,"label",30),e.EFF(22,"ICD10 Code"),e.k0s(),e.j41(23,"ng-select",31),e.nI1(24,"async"),e.DNE(25,ae,5,3,"ng-template",32)(26,le,2,2,"ng-template",33),e.k0s()(),e.j41(27,"div")(28,"label",34),e.EFF(29,"Case Rate Code"),e.k0s(),e.nrm(30,"input",35),e.k0s(),e.j41(31,"div")(32,"label",36),e.EFF(33,"RVS Code"),e.k0s(),e.nrm(34,"input",37),e.k0s(),e.j41(35,"div")(36,"label",38),e.EFF(37,"Description"),e.k0s(),e.nrm(38,"input",39),e.k0s(),e.j41(39,"div")(40,"label",40),e.EFF(41,"HCI Fee"),e.k0s(),e.j41(42,"input",41),e.bIt("change",function(){e.eBV(s);const d=e.XpG();return e.Njj(d.computeTotal("caserate_fee"))}),e.k0s()(),e.j41(43,"div")(44,"label",42),e.EFF(45,"Prof Fee"),e.k0s(),e.j41(46,"input",43),e.bIt("change",function(){e.eBV(s);const d=e.XpG();return e.Njj(d.computeTotal("caserate_fee"))}),e.k0s()(),e.j41(47,"fieldset",44)(48,"label",45),e.EFF(49,"Case Rate Fee"),e.k0s(),e.nrm(50,"input",46),e.k0s(),e.j41(51,"div"),e.nrm(52,"input",47),e.j41(53,"label",48),e.EFF(54,"With Enough Benefits?"),e.k0s()(),e.DNE(55,v,67,14,"div",49),e.j41(56,"div",50)(57,"div",51)(58,"button",52),e.DNE(59,r,1,1,"fa-icon",53)(60,h,1,1,"fa-icon",54),e.EFF(61),e.k0s()()()()}if(2&m){const s=e.XpG();e.R7$(9),e.Y8G("ngForOf",s.attendant),e.R7$(),e.Y8G("ngIf",s.checking_accred),e.R7$(),e.Y8G("ngIf",s.result_accred_check),e.R7$(12),e.Y8G("items",e.bMT(24,13,s.fdx$))("multiple",!0)("loading",s.fdxLoading)("typeahead",s.searchInput$)("multiple",!1),e.R7$(32),e.Y8G("ngIf",!s.caserateForm.value.enough_benefit_flag),e.R7$(3),e.Y8G("disabled",s.caserateForm.invalid||s.is_saving),e.R7$(),e.Y8G("ngIf",!s.is_saving),e.R7$(),e.Y8G("ngIf",s.is_saving),e.R7$(),e.SpI(" ",s.caserateForm.value.id?s.is_saving?"Updating":"Update":s.is_saving?"Saving":"Save"," ")}}function I(m,C){if(1&m&&(e.j41(0,"div",101)(1,"div",102),e.nrm(2,"fa-icon",103),e.k0s(),e.j41(3,"div",51),e.EFF(4," Fetching caserate details... "),e.k0s()()),2&m){const s=e.XpG();e.R7$(2),e.Y8G("icon",s.faCircleNotch)}}function Z(m,C){if(1&m){const s=e.RV6();e.j41(0,"app-search-caserate",104),e.bIt("toggleModal",function(d){e.eBV(s);const E=e.XpG();return e.Njj(E.toggleModal(d))}),e.k0s()}if(2&m){const s=e.XpG();e.Y8G("program_name",s.program_name)}}let me=(()=>{class m{selectPreloadedCaserate(){this.caserateForm.patchValue({...this.loaded_caserate})}selectCaserate(s){this.patchData(this.caserate_list[s])}onSubmit(){this.is_saving=!0,this.caserateForm.patchValue({caserate_attendant:this.caserateForm.value.caserate_attendant.id}),this.http.post("eclaims/eclaims-caserate",this.caserateForm.value).subscribe({next:s=>{this.toastr.success("Successfuly recorded.","Caserate"),this.is_saving=!1,this.getCaserate()},error:s=>{console.log(s),this.is_saving=!1}})}toggleAttendant(){this.caserateForm.controls.caserate_attendant.disable(),this.caserateForm.value.caserate_date&&this.caserateForm.controls.caserate_attendant.enable(),this.accredcode&&this.checkDoctorAccred()}checkDoctorAccred(){this.checking_accred=!0,this.accredcode=this.caserateForm.value.caserate_attendant.accreditation_number;let s={accrecode:this.accredcode,admissiondate:(0,a.Yq)(this.caserateForm.value.caserate_date,"MM-dd-yyyy","en","Asia/Manila"),dischargedate:(0,a.Yq)(this.caserateForm.value.caserate_date,"MM-dd-yyyy","en","Asia/Manila")};this.http.post("eclaims/check-doctor-accredited",s).subscribe({next:_=>{console.log(_),this.result_accred_check=_,this.checking_accred=!1},error:_=>{console.log(_),this.checking_accred=!1}})}getCaserate(){this.show_form=!1,this.http.get("eclaims/eclaims-caserate",{params:{program_id:this.program_id,program_desc:this.program_name}}).subscribe({next:_=>{this.caserate_list=_.data,this.createForm()},error:_=>console.log(_)})}createForm(s){this.caserateForm=this.formBuilder.nonNullable.group({id:[null],patient_id:[this.patient_id],program_desc:[this.program_name],program_id:[this.program_id],caserate_date:[null,t.k0.required],admit_dx:[null,t.k0.required],caserate_code:[null,t.k0.required],code:[null,t.k0.required],description:[null,t.k0.required],discharge_dx:[null,t.k0.required],icd10_code:[null],hci_fee:[null,t.k0.required],prof_fee:[null,t.k0.required],caserate_fee:[null,t.k0.required],caserate_attendant:[null,t.k0.required],enough_benefit_flag:[!0],hmo_flag:[!1],others_flag:[!1],hci_pTotalActualCharges:[null],hci_pDiscount:[null],hci_pPhilhealthBenefit:[null],hci_pTotalAmount:[null],prof_pTotalActualCharges:[null],prof_pDiscount:[null],prof_pPhilhealthBenefit:[null],prof_pTotalAmount:[null],meds_flag:[!1],meds_pDMSTotalAmount:[null],meds_pExaminations_flag:[!1],meds_pExamTotalAmount:[null]}),s?this.patchData(s):this.caserateForm.controls.caserate_attendant.disable(),this.show_form=!0}loadFdx(s){this.fdx$=(0,X.x)((0,D.of)(s),this.searchInput$.pipe((0,J.p)(_=>null!==_&&_.length>=this.minLengthTerm),(0,U.F)(),(0,H.B)(800),(0,L.M)(()=>this.fdxLoading=!0),(0,W.n)(_=>this.getFdx(_).pipe((0,K.W)(()=>(0,D.of)([])),(0,L.M)(()=>this.fdxLoading=!1)))))}getFdx(s=null){return this.http.get("libraries/icd10",{params:{"filter[search]":s}}).pipe((0,z.T)(_=>_.data))}loadSelected(){let s=[],_=[];this.final_dx&&Object.keys(this.final_dx).length>0?(Object.entries(this.final_dx).forEach(([d,E],ce)=>{let _e=E;s.push(_e.icd10_code.toString()),_.push(_e.lib_icd10)}),this.loadFdx(_),this.selectedFdx=s):this.loadFdx([])}patchData(s){this.caserateForm.patchValue({...s}),this.caserateForm.patchValue({caserate_attendant:s.attendant}),console.log(this.caserateForm.value)}loadContent(s){console.log(s),this.caserateForm.patchValue({id:null,caserate_date:null,admit_dx:"",caserate_code:s.data.pcaseRateCode,code:s.data.pitemCode,description:s.data.pcaseRateDescription,hci_fee:s.amount.pprimaryHCIFee,prof_fee:s.amount.pprimaryProfFee,caserate_fee:s.amount.pprimaryCaseRate,caserate_attendant:""}),this.toggleAttendant()}toggleModal(s){let _;s.data?(_=s.name,this.loadContent(s)):_=s,this.modals[_]=!this.modals[_]}get f(){return this.caserateForm.controls}loadLibraries(){this.http.get("users",{params:{attendant_flag:this.program_name,per_page:"all"}}).subscribe({next:s=>{this.attendant=s.data,this.getCaserate()}})}constructor(s,_,d){this.http=s,this.toastr=_,this.formBuilder=d,this.faSave=G.hSh,this.faCircleNotch=y.s4k,this.faSearch=y.MjD,this.faEdit=G.MT7,this.faCheck=y.e68,this.modals=[],this.show_form=!1,this.is_saving=!1,this.caserateForm=function ee(){return new t.gE({id:new t.MJ(""),patient_id:new t.MJ(""),program_desc:new t.MJ(""),program_id:new t.MJ(""),caserate_date:new t.MJ(""),admit_dx:new t.MJ(""),caserate_code:new t.MJ(""),code:new t.MJ(""),description:new t.MJ(""),discharge_dx:new t.MJ(""),icd10_code:new t.MJ(""),hci_fee:new t.MJ(null),prof_fee:new t.MJ(null),caserate_fee:new t.MJ(null),caserate_attendant:new t.MJ(null),enough_benefit_flag:new t.MJ(!1),hmo_flag:new t.MJ(!1),others_flag:new t.MJ(!1),hci_pTotalActualCharges:new t.MJ(null),hci_pDiscount:new t.MJ(null),hci_pPhilhealthBenefit:new t.MJ(null),hci_pTotalAmount:new t.MJ(null),prof_pTotalActualCharges:new t.MJ(null),prof_pDiscount:new t.MJ(null),prof_pPhilhealthBenefit:new t.MJ(null),prof_pTotalAmount:new t.MJ(null),meds_flag:new t.MJ(!1),meds_pDMSTotalAmount:new t.MJ(null),meds_pExaminations_flag:new t.MJ(!1),meds_pExamTotalAmount:new t.MJ(null)})}(),this.checking_accred=!1,this.searchInput$=new Q.B,this.minLengthTerm=3,this.fdxLoading=!1}computeTotal(s){if("prof_pTotalAmount"===s){let _=0,d=this.caserateForm.value.prof_pTotalActualCharges;this.prof_vat_exempt>0&&(d=this.caserateForm.value.prof_pTotalActualCharges-this.caserateForm.value.prof_pTotalActualCharges*this.prof_vat_exempt/100),this.prof_discount>0&&(_=d*(this.prof_discount/100)),this.caserateForm.patchValue({prof_pDiscount:Number(d-_).toFixed(2),prof_pTotalAmount:(Number(d-_)-Number(this.caserateForm.value.prof_pPhilhealthBenefit)).toFixed(2)})}if("hci_pTotalAmount"===s){let _=0,d=this.caserateForm.value.hci_pTotalActualCharges;this.hci_vat_exempt>0&&(d=this.caserateForm.value.hci_pTotalActualCharges-this.caserateForm.value.hci_pTotalActualCharges*this.hci_vat_exempt/100),this.hci_discount>0&&(_=d*(this.hci_discount/100)),this.caserateForm.patchValue({hci_pDiscount:Number(d-_).toFixed(2),hci_pTotalAmount:(Number(d-_)-Number(this.caserateForm.value.hci_pPhilhealthBenefit)).toFixed(2)})}"caserate_fee"===s&&this.caserateForm.patchValue({caserate_fee:Number(this.caserateForm.value.hci_fee)+Number(this.caserateForm.value.prof_fee)})}ngOnInit(){switch(this.loadLibraries(),this.loadSelected(),this.program_name){case"tb":this.preloaded_caserate=R;break;case"cc":this.preloaded_caserate=M;break;case"mc":this.preloaded_caserate=b;break;case"ab":this.preloaded_caserate=k;break;case"fp":this.preloaded_caserate=j;break;case"ml":this.preloaded_caserate=$}}static{this.\u0275fac=function(_){return new(_||m)(e.rXU(N.k),e.rXU(w.tw),e.rXU(t.ok))}}static{this.\u0275cmp=e.VBU({type:m,selectors:[["app-caserate"]],inputs:{program_id:"program_id",program_name:"program_name",patient_id:"patient_id"},decls:19,vars:6,consts:[[1,"grid","grid-cols-3","gap-4","mt-4"],[1,"shadow-md","rounded-md","col-span-1"],[1,"bg-blue-500","text-white","rounded-t-md","p-3","flex","justify-between"],[1,"rounded-b-md","grid","grid-cols-1"],["class","grid grid-cols-6 border-t border-slate-200",4,"ngFor","ngForOf"],[1,"shadow-md","rounded-md","col-span-2"],[1,"bg-gray-100","text-blue-500","px-3","rounded-md",3,"click"],[1,"text-sm","font-semibold",3,"icon"],[1,"rounded-b-md","border-x","border-b","border-slate-200","grid","grid-cols-1"],[1,"m-5",3,"ngSubmit","formGroup"],["class","grid grid-cols-1 gap-2 w-full",4,"ngIf"],["class","grid grid-cols-1 my-20",4,"ngIf"],[3,"program_name","toggleModal",4,"ngIf"],[1,"grid","grid-cols-6","border-t","border-slate-200"],[1,"col-span-5","m-2","text-sm"],[1,"col-span-1","text-orange-500","m-2"],["type","button",3,"click"],[3,"icon"],[1,"grid","grid-cols-1","gap-2","w-full"],["for","caserate_date"],["type","date","name","caserate_date","id","caserate_date","formControlName","caserate_date",1,"input",3,"change"],["for","caserate_attendant"],["name","caserate_attendant","id","caserate_attendant","formControlName","caserate_attendant",1,"input",3,"change"],[3,"ngValue",4,"ngFor","ngForOf"],[4,"ngIf"],["class","italic text-sm",4,"ngIf"],["for","admit_dx"],["type","text","name","admit_dx","id","admit_dx","formControlName","admit_dx",1,"input"],["for","discharge_dx"],["type","text","name","discharge_dx","id","discharge_dx","formControlName","discharge_dx",1,"input"],["for","icd10_code"],["placeholder","search","typeToSearchText","search...","formControlName","icd10_code","bindValue","icd10_code","bindLabel","icd10_desc","notFoundText","No records found",1,"select-chips",3,"items","multiple","loading","typeahead"],["ng-option-tmp",""],["ng-label-tmp",""],["for","caserate_code"],["type","text","name","caserate_code","id","caserate_code","formControlName","caserate_code",1,"input"],["for","code"],["type","text","name","code","id","code","formControlName","code",1,"input"],["for","description"],["type","text","name","description","id","description","formControlName","description",1,"input"],["for","hci_fee"],["type","number","name","hci_fee","id","hci_fee","formControlName","hci_fee",1,"input",3,"change"],["for","prof_fee"],["type","number","name","prof_fee","id","prof_fee","formControlName","prof_fee",1,"input",3,"change"],["disabled",""],["for","caserate_fee"],["type","number","name","caserate_fee","id","caserate_fee","formControlName","caserate_fee",1,"input"],["type","checkbox","name","enough_benefit_flag","id","enough_benefit_flag","formControlName","enough_benefit_flag",1,"input-checkbox"],["for","enough_benefit_flag",1,"pl-2"],["class","grid grid-cols-2 gap-4",4,"ngIf"],[1,"my-5"],[1,"flex","justify-center"],["type","submit",1,"btn-save","font-semibold","px-10",3,"disabled"],["class","pr-2",3,"icon",4,"ngIf"],["animation","spin","class","pr-2",3,"icon",4,"ngIf"],[3,"ngValue"],["animation","spin",1,"pr-2",3,"icon"],[1,"italic","text-sm"],[1,"text-red-500"],[3,"ngClass"],[1,"whitespace-normal"],[1,"text-gray-700",3,"ngOptionHighlight"],[1,"grid","grid-cols-2","gap-4"],["for","hci_pTotalActualCharges"],["type","number","name","hci_pTotalActualCharges","id","hci_pTotalActualCharges","formControlName","hci_pTotalActualCharges",1,"input",3,"change"],["for","hci_vat_exempt"],["type","number","name","hci_vat_exempt","id","hci_vat_exempt","max","100","step","1",1,"input",3,"ngModelChange","change","ngModel","ngModelOptions"],["for","hci_discount"],["type","number","name","hci_discount","id","hci_discount","max","100","step","1",1,"input",3,"ngModelChange","change","ngModel","ngModelOptions"],["for","hci_pDiscount"],["type","number","name","hci_pDiscount","id","hci_pDiscount","formControlName","hci_pDiscount",1,"input",3,"change"],["for","hci_pPhilhealthBenefit"],["type","number","name","hci_pPhilhealthBenefit","id","hci_pPhilhealthBenefit","formControlName","hci_pPhilhealthBenefit",1,"input",3,"change"],["for","hci_pTotalAmount"],["type","number","name","hci_pTotalAmount","id","hci_pTotalAmount","formControlName","hci_pTotalAmount","disabled","",1,"input"],["for","prof_pTotalActualCharges"],["type","number","name","prof_pTotalActualCharges","id","prof_pTotalActualCharges","formControlName","prof_pTotalActualCharges",1,"input",3,"change"],["for","prof_vat_exempt"],["type","number","name","prof_vat_exempt","id","prof_vat_exempt",1,"input",3,"ngModelChange","change","ngModel","ngModelOptions"],["for","prof_discount"],["type","number","name","prof_discount","id","prof_discount",1,"input",3,"ngModelChange","change","ngModel","ngModelOptions"],["for","prof_pDiscount"],["type","number","name","prof_pDiscount","id","prof_pDiscount","formControlName","prof_pDiscount",1,"input",3,"change"],["for","prof_pPhilhealthBenefit"],["type","number","name","prof_pPhilhealthBenefit","id","prof_pPhilhealthBenefit","formControlName","prof_pPhilhealthBenefit",1,"input",3,"change"],["for","prof_pTotalAmount"],["type","number","name","prof_pTotalAmount","id","prof_pTotalAmount","formControlName","prof_pTotalAmount",1,"input"],[1,"mt-2"],["type","checkbox","name","meds_flag","id","meds_flag","formControlName","meds_flag",1,"input-checkbox"],["for","meds_flag",1,"pl-2"],["type","checkbox","name","meds_pExaminations_flag","id","meds_pExaminations_flag","formControlName","meds_pExaminations_flag",1,"input-checkbox"],["for","meds_pExaminations_flag",1,"pl-2"],["type","checkbox","name","hmo_flag","id","hmo_flag","formControlName","hmo_flag",1,"input-checkbox"],["for","hmo_flag",1,"pl-2"],["type","checkbox","name","others_flag","id","others_flag","formControlName","others_flag",1,"input-checkbox"],["for","others_flag",1,"pl-2"],["for","meds_pDMSTotalAmount"],["type","number","name","meds_pDMSTotalAmount","id","meds_pDMSTotalAmount","formControlName","meds_pDMSTotalAmount",1,"input"],["for","meds_pExamTotalAmount"],["type","number","name","meds_pExamTotalAmount","id","meds_pExamTotalAmount","formControlName","meds_pExamTotalAmount",1,"input"],[1,"pr-2",3,"icon"],[1,"grid","grid-cols-1","my-20"],[1,"flex","justify-center","text-blue-500"],["animation","spin",3,"icon"],[3,"toggleModal","program_name"]],template:function(_,d){1&_&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"span"),e.EFF(4,"Caserate List"),e.k0s()(),e.j41(5,"div",3),e.DNE(6,te,13,9,"div",4),e.k0s()(),e.j41(7,"div",5)(8,"div",2)(9,"span"),e.EFF(10,"Caserate"),e.k0s(),e.j41(11,"button",6),e.bIt("click",function(){return d.toggleModal("search-caserate")}),e.nrm(12,"fa-icon",7),e.EFF(13," search "),e.k0s()(),e.j41(14,"div",8)(15,"form",9),e.bIt("ngSubmit",function(){return d.onSubmit()}),e.DNE(16,c,62,15,"div",10)(17,I,5,1,"div",11),e.k0s()()()(),e.DNE(18,Z,1,1,"app-search-caserate",12)),2&_&&(e.R7$(6),e.Y8G("ngForOf",d.caserate_list),e.R7$(6),e.Y8G("icon",d.faSearch),e.R7$(3),e.Y8G("formGroup",d.caserateForm),e.R7$(),e.Y8G("ngIf",d.show_form),e.R7$(),e.Y8G("ngIf",!d.show_form),e.R7$(),e.Y8G("ngIf",d.modals["search-caserate"]))},dependencies:[a.MD,a.YU,a.Sq,a.bT,a.Jj,a.vh,t.X1,t.qT,t.xH,t.y7,t.me,t.Q0,t.Zm,t.wz,t.BC,t.cb,t.zX,t.j4,t.JD,g.dX,g.aY,q,S.MQ,S.vr,S.Uq,S.ZZ,t.YN,t.vS],encapsulation:2})}}return m})()}}]);