"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[354],{8354:(di,U,u)=>{u.r(U),u.d(U,{NcdModule:()=>q});var a=u(6895),p=u(2216),w=u(2325),d=u(2687);let I;function F(i,n,t=!1){t&&I?I.unsubscribe():I=i.subscribe(()=>n())}var e=u(1571),g=u(4691),S=u(6198),O=u(8696),o=u(433),k=u(3396);const R=[{id:"family_hx_hypertension",desc:"Hypertension"},{id:"family_hx_stroke",desc:"Stroke"},{id:"family_hx_heart_attack",desc:"Heart Attack"},{id:"family_hx_diabetes",desc:"Diabetes"},{id:"family_hx_asthma",desc:"Asthma"},{id:"family_hx_cancer",desc:"Cancer"},{id:"family_hx_kidney_disease",desc:"Kidney Disease"}],Y=[{code:"C",desc:"Circumcised"},{code:"U",desc:"Uncircumcised"}],V=[{question_id:"1",question_e:"Have you felt any pain or discomfort, or any pressure or heaviness in your chest?",question_t:"Nakakaramdam ka ba ng pananakit o kabigatan ng iyong dibdib?"},{question_id:"2",question_e:"Do you feel pain in the center or left chest or left arm?",question_t:"Ang pananakit ba ay nararanasan sa gitna o kaliwang bahagi ng dibdib, o sa kaliwang braso?"},{question_id:"3",question_e:"Do you feel chest pain when you're walking uphill or in a hurry?",question_t:"Nararamdaman mo ba ito kapag ikaw ay nagmamadali o naglalakad nang mabilis o paakyat?"},{question_id:"4",question_e:"Do you sit down when you feel the pain while walking?",question_t:"Tumitigil ka ba sa paglalakad kapag sumasakit ang iyong dibdib?"},{question_id:"5",question_e:"Does the pain go away when you stand still or when you place a tablet under your tongue?",question_t:"Nawawala ba ang sakit kapag ikaw ay hindi kumilos o kapag naglagay ka ng gamot sa ilalim ng iyong dila?"},{question_id:"6",question_e:"Does the pain go away in less than 10 minutes?",question_t:"Nawawala ba ang sakit sa loob ng 10 minuto?"},{question_id:"7",question_e:"Have you ever had a severe chest pain which lasted for half an hour or more?",question_t:"Nakakaramdam ka ba ng pananakit ng dibdib na tumatagal ng kalahating oras o higit pa?"}],M=new o.cw({consult_id:new o.NI(null),patient_id:new o.NI(null),location:new o.NI(null),client_type:new o.NI(null),assessment_date:new o.NI(null),family_hx_hypertension:new o.NI(null),family_hx_stroke:new o.NI(null),family_hx_heart_attack:new o.NI(null),family_hx_diabetes:new o.NI(null),family_hx_asthma:new o.NI(null),family_hx_cancer:new o.NI(null),family_hx_kidney_disease:new o.NI(null),smoking:new o.NI(null),alcohol_intake:new o.NI(null),excessive_alcohol_intake:new o.NI(null),high_fat:new o.NI(null),intake_vegetables:new o.NI(null),intake_fruits:new o.NI(null),physical_activity:new o.NI(null),presence_diabetes:new o.NI(null),diabetes_medications:new o.NI(null),polyphagia:new o.NI(null),polydipsia:new o.NI(null),polyuria:new o.NI(null),obesity:new o.NI(null),central_adiposity:new o.NI(null),bmi:new o.NI(null),waist_line:new o.NI(null),raised_bp:new o.NI(null),avg_systolic:new o.NI(null),avg_diastolic:new o.NI(null),systolic_1st:new o.NI(null),diastolic_1st:new o.NI(null),systolic_2nd:new o.NI(null),diastolic_2nd:new o.NI(null)});var N=u(7185);function P(i,n){1&i&&(e.TgZ(0,"label",9),e._uU(1,"N/A"),e.qZA())}function K(i,n){if(1&i&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.riskAssessForm.value.obesity?"Yes":"No")}}function L(i,n){1&i&&(e.TgZ(0,"label",9),e._uU(1,"N/A"),e.qZA())}function D(i,n){if(1&i&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.riskAssessForm.value.central_adiposity?"Yes (at risk)":"No (not at risk)")}}function j(i,n){1&i&&(e.TgZ(0,"label",9),e._uU(1,"N/A"),e.qZA())}function G(i,n){if(1&i&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.riskAssessForm.value.waist_line+" cm")}}function H(i,n){1&i&&(e.TgZ(0,"label",9),e._uU(1,"No 1st BP reading"),e.qZA())}function E(i,n){if(1&i&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.riskAssessForm.value.systolic_1st+"/"+t.riskAssessForm.value.diastolic_1st)}}function $(i,n){1&i&&(e.TgZ(0,"label",9),e._uU(1,"No 2nd BP reading"),e.qZA())}function B(i,n){if(1&i&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.riskAssessForm.value.systolic_2nd+"/"+t.riskAssessForm.value.diastolic_2nd)}}function X(i,n){1&i&&(e.TgZ(0,"label",9),e._uU(1,"N/A"),e.qZA())}function z(i,n){if(1&i&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.riskAssessForm.value.avg_systolic+"/"+t.riskAssessForm.value.avg_diastolic," ")}}function W(i,n){1&i&&(e.TgZ(0,"label",9),e._uU(1,"N/A"),e.qZA())}function ee(i,n){if(1&i&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.riskAssessForm.value.raised_bp?"Yes":"No")}}function te(i,n){if(1&i&&(e.TgZ(0,"option",39),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.Oqu(t.desc)}}function ie(i,n){if(1&i&&(e.TgZ(0,"option",41),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.desc)}}function ne(i,n){if(1&i&&(e.TgZ(0,"div",13)(1,"h4",4),e._uU(2,"Client Type: "),e.qZA(),e.TgZ(3,"select",40),e.YNc(4,ie,2,2,"option",24),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",t.clients)}}function oe(i,n){if(1&i&&(e.TgZ(0,"option",45),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id)("selected","N"===t.id),e.xp6(1),e.hij(" ",t.desc," ")}}function se(i,n){if(1&i&&(e.TgZ(0,"div",42)(1,"h4",4),e._uU(2),e.qZA(),e.TgZ(3,"select",43),e.YNc(4,oe,2,3,"option",44),e.qZA()()),2&i){const t=n.$implicit,s=e.oxw(2);e.xp6(2),e.hij("",t.desc,":"),e.xp6(1),e.Q6J("formControlName",t.id)("name",t.id),e.xp6(1),e.Q6J("ngForOf",s.logical)}}function re(i,n){if(1&i&&(e.TgZ(0,"option",41),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.desc," ")}}function le(i,n){if(1&i&&(e.TgZ(0,"option",41),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.desc," ")}}function ae(i,n){if(1&i&&(e.TgZ(0,"option",41),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.desc," ")}}function de(i,n){if(1&i&&(e.TgZ(0,"option",41),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.desc," ")}}function ce(i,n){if(1&i&&(e.TgZ(0,"option",41),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.desc," ")}}function ue(i,n){if(1&i&&(e.TgZ(0,"option",41),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.desc," ")}}function _e(i,n){if(1&i&&(e.TgZ(0,"option",41),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.desc," ")}}function pe(i,n){if(1&i&&(e.TgZ(0,"option",41),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.desc," ")}}function me(i,n){if(1&i&&(e.TgZ(0,"option",41),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.desc," ")}}function ge(i,n){if(1&i&&(e.TgZ(0,"div",32)(1,"h1",4),e._uU(2,"Undertaking medications:"),e.qZA(),e.TgZ(3,"select",46),e.YNc(4,me,2,2,"option",24),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",t.logical)}}function fe(i,n){if(1&i&&(e.TgZ(0,"option",41),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.desc," ")}}function he(i,n){if(1&i&&(e.TgZ(0,"div",30)(1,"h1",4),e._uU(2,"Polyphagia"),e.qZA(),e.TgZ(3,"select",47),e.YNc(4,fe,2,2,"option",24),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",t.logical)}}function be(i,n){if(1&i&&(e.TgZ(0,"option",41),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.desc," ")}}function ve(i,n){if(1&i&&(e.TgZ(0,"div",30)(1,"h1",4),e._uU(2,"Polydipsia"),e.qZA(),e.TgZ(3,"select",48),e.YNc(4,be,2,2,"option",24),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",t.logical)}}function Ze(i,n){if(1&i&&(e.TgZ(0,"option",41),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.desc," ")}}function xe(i,n){if(1&i&&(e.TgZ(0,"div",30)(1,"h1",4),e._uU(2,"Polyuria"),e.qZA(),e.TgZ(3,"select",49),e.YNc(4,Ze,2,2,"option",24),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",t.logical)}}const qe=function(i){return{"invalid-input":i}};function Te(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"form",10),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onSubmit())}),e.TgZ(1,"div",11)(2,"div",12)(3,"h4",2),e._uU(4,"NCD High Risk Assessment"),e.qZA()(),e.TgZ(5,"div",13)(6,"h4",4),e._uU(7,"Location:"),e.qZA(),e.TgZ(8,"select",14),e.NdJ("change",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.checkDiabetes())}),e.YNc(9,te,2,2,"option",15),e.qZA()(),e.YNc(10,ne,5,1,"div",16),e.TgZ(11,"div",17)(12,"h4",4),e._uU(13,"Assessment Date:"),e.qZA(),e._UZ(14,"input",18),e.qZA()(),e.TgZ(15,"div",19)(16,"div",20)(17,"h4",2),e._uU(18,"Family History:"),e.qZA()(),e.YNc(19,se,5,4,"div",21),e.qZA(),e.TgZ(20,"div",19)(21,"div",20)(22,"h4",2),e._uU(23,"Personal / Socio History:"),e.qZA()(),e.TgZ(24,"div",22)(25,"h1",4),e._uU(26,"Smoking:"),e.qZA(),e.TgZ(27,"select",23),e.YNc(28,re,2,2,"option",24),e.qZA()(),e.TgZ(29,"div",22)(30,"h1",4),e._uU(31,"Alcohol Intake:"),e.qZA(),e.TgZ(32,"select",25),e.YNc(33,le,2,2,"option",24),e.qZA()(),e.TgZ(34,"div",22)(35,"h1",4),e._uU(36,"Excessive Alcohol Intake:"),e.qZA(),e.TgZ(37,"select",26),e.YNc(38,ae,2,2,"option",24),e.qZA()(),e.TgZ(39,"div",22)(40,"h1",4),e._uU(41,"High Fat / High Salt Intake:"),e.qZA(),e.TgZ(42,"select",27),e.YNc(43,de,2,2,"option",24),e.qZA()(),e.TgZ(44,"div",22)(45,"h1",4),e._uU(46,"Dietary Fiber Intake of Fruits:"),e.qZA(),e.TgZ(47,"select",28),e.YNc(48,ce,2,2,"option",24),e.qZA()(),e.TgZ(49,"div",22)(50,"h1",4),e._uU(51,"Physical Activity:"),e.qZA(),e.TgZ(52,"select",29),e.YNc(53,ue,2,2,"option",24),e.qZA()(),e.TgZ(54,"div",30)(55,"h1",4),e._uU(56,"Dietary Fiber Intake of Vegetables:"),e.qZA(),e.TgZ(57,"select",31),e.YNc(58,_e,2,2,"option",24),e.qZA()()(),e.TgZ(59,"div",19)(60,"div",20)(61,"h4",2),e._uU(62,"Presence or Absence of Diabetes:"),e.qZA()(),e.TgZ(63,"div",32)(64,"h1",4),e._uU(65,"Diagnose with Diabetes"),e.qZA(),e.TgZ(66,"select",33),e.NdJ("change",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.checkDiabetes())}),e.YNc(67,pe,2,2,"option",24),e.qZA()(),e.YNc(68,ge,5,1,"div",34),e.YNc(69,he,5,1,"div",35),e.YNc(70,ve,5,1,"div",35),e.YNc(71,xe,5,1,"div",35),e.qZA(),e.TgZ(72,"div",36)(73,"button",37),e._UZ(74,"fa-icon",38),e._uU(75),e.qZA()()()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.riskAssessForm),e.xp6(8),e.Q6J("ngClass",e.VKq(20,qe,t.is_saving&&t.f.location.errors)),e.xp6(1),e.Q6J("ngForOf",t.location),e.xp6(1),e.Q6J("ngIf",2===t.f.location.value),e.xp6(9),e.Q6J("ngForOf",t.family_history),e.xp6(9),e.Q6J("ngForOf",t.smoking),e.xp6(5),e.Q6J("ngForOf",t.alcohol),e.xp6(5),e.Q6J("ngForOf",t.logical2),e.xp6(5),e.Q6J("ngForOf",t.logical2),e.xp6(5),e.Q6J("ngForOf",t.logical2),e.xp6(5),e.Q6J("ngForOf",t.logical2),e.xp6(5),e.Q6J("ngForOf",t.logical2),e.xp6(9),e.Q6J("ngForOf",t.logical),e.xp6(1),e.Q6J("ngIf",2===t.f.location.value),e.xp6(1),e.Q6J("ngIf",2===t.f.location.value),e.xp6(1),e.Q6J("ngIf",2===t.f.location.value),e.xp6(1),e.Q6J("ngIf",2===t.f.location.value),e.xp6(3),e.Q6J("icon",t.is_saving?t.faSpinner:t.faSave)("spin",t.is_saving),e.xp6(1),e.hij(" ",t.is_saving?"Saving":"Save"," ")}}class f{onSubmit(){if(this.is_saving=!0,this.riskAssessForm.valid){let n;n=this.consult_details&&this.consult_details.assessment_date?this.http.update("non-communicable-disease/risk-assessment/",this.consult_details.id,this.riskAssessForm.value):this.http.post("non-communicable-disease/risk-assessment",this.riskAssessForm.value),n.subscribe({next:t=>{console.log(t),this.is_saving=!1,this.toastr.success("Recorded successfully!","Risk Assessment"),this.loadRisk.emit()},error:t=>console.log(t)})}}setAdiposity(n){let t;t="M"===this.patient_info.gender&&n>=90||"F"===this.patient_info.gender&&n>=80,this.riskAssessForm.patchValue({central_adiposity:t})}checkDiabetes(){2===this.riskAssessForm.value.location?(this.f.diabetes_medications.enable(),this.f.polyphagia.enable(),this.f.polydipsia.enable(),this.f.polyuria.enable(),this.f.client_type.enable()):(this.riskAssessForm.patchValue({diabetes_medications:"X",polyphagia:"X",polydipsia:"X",polyuria:"X"}),this.f.client_type.disable()),console.log(this.f)}getVitalsToday(n,t){n&&t&&(console.log(n),this.riskAssessForm.patchValue({assessment_date:(0,a.p6)(t.consult_date,"yyyy-MM-dd","en")}),Object.entries(n).reverse().every(([s,r],c)=>{let l=r;return l.patient_bmi&&this.riskAssessForm.patchValue({bmi:l.patient_bmi}),l.patient_bmi&&this.riskAssessForm.patchValue({obesity:l.patient_bmi>=25}),l.patient_bmi_class&&(this.vitals_today.patient_bmi_class=l.patient_bmi_class),(0,a.p6)(l.vitals_date,"yyyy-MM-dd","en","en")===(0,a.p6)(t.consult_date,"yyyy-MM-dd","en","en")&&(l.bp_systolic&&(this.riskAssessForm.value.systolic_1st?this.riskAssessForm.value.systolic_1st&&!this.riskAssessForm.value.systolic_2nd?(this.riskAssessForm.patchValue({systolic_2nd:l.bp_systolic,diastolic_2nd:l.bp_diastolic}),this.setAverage()):(this.riskAssessForm.patchValue({systolic_1st:this.riskAssessForm.value.systolic_2nd,diastolic_1st:this.riskAssessForm.value.diastolic_2nd}),this.riskAssessForm.patchValue({systolic_2nd:l.bp_systolic,diastolic_2nd:l.bp_diastolic}),this.setAverage()):this.riskAssessForm.patchValue({systolic_1st:l.bp_systolic,diastolic_1st:l.bp_diastolic})),!this.riskAssessForm.value.waist_line&&l.patient_waist&&(this.riskAssessForm.patchValue({waist_line:l.patient_waist}),this.setAdiposity(l.patient_waist))),!(this.riskAssessForm.value.systolic_1st&&this.riskAssessForm.value.diastolic_1st&&this.riskAssessForm.value.systolic_2nd&&this.riskAssessForm.value.diastolic_2nd&&this.vitals_today.patient_waist>0&&Object(n).length-1===c)}),this.checkIfComplete())}checkIfComplete(){this.riskAssessForm.value.bmi&&void 0!==this.riskAssessForm.value.obesity&&this.riskAssessForm.value.avg_systolic&&this.riskAssessForm.value.avg_diastolic&&this.riskAssessForm.value.waist_line&&(this.show_form=!0)}setAverage(){this.riskAssessForm.patchValue({avg_systolic:(this.riskAssessForm.value.systolic_1st+this.riskAssessForm.value.systolic_2nd)/2,avg_diastolic:(this.riskAssessForm.value.diastolic_1st+this.riskAssessForm.value.diastolic_2nd)/2}),this.riskAssessForm.patchValue(this.riskAssessForm.value.avg_systolic>=140&&this.riskAssessForm.value.avg_diastolic>=90?{raised_bp:!0}:{raised_bp:!1})}loadLibraries(){this.http.get("libraries/ncd-locations").subscribe({next:n=>this.location=n.data,error:n=>console.log(n)}),this.http.get("libraries/ncd-smoking").subscribe({next:n=>this.smoking=n.data,error:n=>console.log(n)}),this.http.get("libraries/ncd-answers").subscribe({next:n=>this.logical=n.data,error:n=>console.log(n)}),this.http.get("libraries/ncd-answers-s2").subscribe({next:n=>this.logical2=n.data,error:n=>console.log(n)}),this.http.get("libraries/ncd-client-types").subscribe({next:n=>this.clients=n.data,error:n=>console.log(n)}),this.http.get("libraries/ncd-alcohol-intake").subscribe({next:n=>this.alcohol=n.data,error:n=>console.log(n)})}get f(){return this.riskAssessForm.controls}constructor(n,t,s){this.http=n,this.formBuilder=t,this.toastr=s,this.loadRisk=new e.vpe,this.faInforCircle=d.sqG,this.faSave=k.r6l,this.faSpinner=d.LM3,this.family_history=R,this.riskAssessForm=M,this.is_saving=!1,this.show_form=!1,this.vitals_today={patient_waist:null,patient_bmi_class:null}}ngOnChanges(n){this.patient_info&&this.consult_details&&this.creatFormValidation(),this.consult_details&&this.consult_details.assessment_date?(this.riskAssessForm.patchValue({...this.consult_details}),this.riskAssessForm.patchValue({assessment_date:(0,a.p6)(this.consult_details.assessment_date,"yyyy-MM-dd","en")}),this.checkDiabetes(),this.show_form=!0):this.getVitalsToday(this.vitals,this.consult_details)}creatFormValidation(){let n;n=this.consult_details.assessment_date?this.consult_details.consult_id:this.consult_details.id,this.riskAssessForm=this.formBuilder.nonNullable.group({consult_id:[n],patient_id:[this.patient_info.id],location:[null,o.kI.required],client_type:[null,o.kI.required],assessment_date:[this.consult_details.consult_date,o.kI.required],family_hx_hypertension:[null,o.kI.required],family_hx_stroke:[null,o.kI.required],family_hx_heart_attack:[null,o.kI.required],family_hx_diabetes:[null,o.kI.required],family_hx_asthma:[null,o.kI.required],family_hx_cancer:[null,o.kI.required],family_hx_kidney_disease:[null,o.kI.required],smoking:[null,o.kI.required],alcohol_intake:[null,o.kI.required],excessive_alcohol_intake:[null,o.kI.required],high_fat:[null,o.kI.required],intake_vegetables:[null,o.kI.required],intake_fruits:[null,o.kI.required],physical_activity:[null,o.kI.required],presence_diabetes:[null,o.kI.required],diabetes_medications:[null,o.kI.required],waist_line:[null,o.kI.required],polyphagia:[null,o.kI.required],polydipsia:[null,o.kI.required],polyuria:[null,o.kI.required],obesity:[null,o.kI.required],central_adiposity:[null,o.kI.required],bmi:[null,o.kI.required],raised_bp:[null,o.kI.required],avg_systolic:[null,o.kI.required],avg_diastolic:[null,o.kI.required],systolic_1st:[null,o.kI.required],diastolic_1st:[null,o.kI.required],systolic_2nd:[null,o.kI.required],diastolic_2nd:[null,o.kI.required]}),this.checkDiabetes()}ngOnInit(){this.loadLibraries()}}f.\u0275fac=function(n){return new(n||f)(e.Y36(g.O),e.Y36(o.qu),e.Y36(N._W))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-risk-assessment"]],inputs:{patient_info:"patient_info",consult_details:"consult_details",vitals:"vitals",ncd_details:"ncd_details"},outputs:{loadRisk:"loadRisk"},features:[e.TTD],decls:45,vars:16,consts:[[1,"grid","grid-cols-12","shadow-md","rounded-xl","mb-8","mt-8"],[1,"col-span-12","flex","justify-between","w-full","bg-yellow-500","px-5","py-3","rounded-tl","rounded-tr"],[1,"font-bold","text-white","text-md","mt-2","mb-1"],[1,"text-sm","col-span-3","w-full","px-5","mt-5","mb-4","relative"],[1,"mb-1"],["class","text-red-500",4,"ngIf"],[4,"ngIf"],[1,"text-sm","col-span-3","w-full","px-5","mb-5","relative"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"text-red-500"],[3,"formGroup","ngSubmit"],[1,"grid","grid-cols-12","item-start","flex-wrap","shadow-md","rounded-xl","mb-8","mt-8"],[1,"col-span-12","flex","bg-blue-500","px-5","py-2","rounded-tl","rounded-tr"],[1,"text-sm","col-span-4","px-5","mt-4","mb-4"],["formControlName","location","name","location",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full",3,"ngClass","change"],[3,"ngValue",4,"ngFor","ngForOf"],["class","text-sm col-span-4 px-5 mt-4 mb-4",4,"ngIf"],[1,"text-sm","col-span-4","px-5","mt-4","mb-6"],["formControlName","assessment_date","type","date","name","assessment_date","disabled","",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full","disabled:bg-gray-300"],[1,"grid","grid-cols-12","shadow-md","rounded-xl","mb-8"],[1,"col-span-12","flex","justify-between","w-full","bg-blue-500","px-5","py-3","rounded-tl","rounded-tr"],["class","text-sm col-span-4 w-full px-5 mt-4 mb-4",4,"ngFor","ngForOf"],[1,"text-sm","col-span-4","w-full","px-5","mt-4","mb-4","relative"],["formControlName","smoking","name","smoking",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full"],[3,"value",4,"ngFor","ngForOf"],["formControlName","alcohol_intake","name","alcohol_intake",1,"text-sm","-select","border-gray-200","border","p-2.5","rounded-md","w-full"],["formControlName","excessive_alcohol_intake","name","excessive_alcohol_intake",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full"],["formControlName","high_fat","name","high_fat",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full"],["formControlName","intake_fruits","name","intake_fruits",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full"],["formControlName","physical_activity","name","physical_activity",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full"],[1,"text-sm","col-span-4","w-full","px-5","mt-4","mb-6","relative"],["formControlName","intake_vegetables","name","intake_vegetables",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full"],[1,"text-sm","col-span-6","w-full","px-5","mt-4","mb-6","relative"],["formControlName","presence_diabetes","name","presence_diabetes",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full",3,"change"],["class","text-sm col-span-6 w-full px-5 mt-4 mb-6 relative",4,"ngIf"],["class","text-sm col-span-4 w-full px-5 mt-4 mb-6 relative",4,"ngIf"],[1,"flex","justify-end"],["type","submit","name","add-btn",1,"btn-save","px-10","disabled:bg-gray-300"],[3,"icon","spin"],[3,"ngValue"],["formControlName","client_type",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full"],[3,"value"],[1,"text-sm","col-span-4","w-full","px-5","mt-4","mb-4"],[1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full",3,"formControlName","name"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"],["formControlName","diabetes_medications","name","diabetes_medications",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full"],["formControlName","polyphagia","name","polyphagia",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full"],["formControlName","polydipsia","name","polydipsia",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full"],["formControlName","polyuria","name","polyuria",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),e._uU(3,"Patient have the following symptoms:"),e.qZA()(),e.TgZ(4,"div",3)(5,"h1",4),e._uU(6,"Obesity:"),e.qZA(),e.YNc(7,P,2,0,"label",5),e.YNc(8,K,2,1,"label",6),e.qZA(),e.TgZ(9,"div",3)(10,"h1",4),e._uU(11,"BMI:"),e.qZA(),e.TgZ(12,"label"),e._uU(13),e.qZA()(),e.TgZ(14,"div",3)(15,"h1",4),e._uU(16,"Central Adiposity:"),e.qZA(),e.YNc(17,L,2,0,"label",5),e.YNc(18,D,2,1,"label",6),e.qZA(),e.TgZ(19,"div",3)(20,"h1",4),e._uU(21,"Waist Circumference:"),e.qZA(),e.YNc(22,j,2,0,"label",5),e.YNc(23,G,2,1,"label",6),e.qZA(),e.TgZ(24,"div",7)(25,"h1",4),e._uU(26,"BP 1st Reading:"),e.qZA(),e.YNc(27,H,2,0,"label",5),e.YNc(28,E,2,1,"label",6),e.qZA(),e.TgZ(29,"div",7)(30,"h1",4),e._uU(31,"BP 2nd Reading:"),e.qZA(),e.YNc(32,$,2,0,"label",5),e.YNc(33,B,2,1,"label",6),e.qZA(),e.TgZ(34,"div",7)(35,"h1",4),e._uU(36,"Average Blood Pressure:"),e.qZA(),e.YNc(37,X,2,0,"label",5),e.YNc(38,z,2,1,"label",6),e.qZA(),e.TgZ(39,"div",7)(40,"h1",4),e._uU(41,"Raised Blood Pressure (>=140/90): "),e.qZA(),e.YNc(42,W,2,0,"label",5),e.YNc(43,ee,2,1,"label",6),e.qZA()(),e.YNc(44,Te,76,22,"form",8)),2&n&&(e.xp6(7),e.Q6J("ngIf",!t.riskAssessForm.value.bmi),e.xp6(1),e.Q6J("ngIf",t.riskAssessForm.value.bmi),e.xp6(5),e.hij("",t.riskAssessForm.value.bmi," "),e.xp6(4),e.Q6J("ngIf",!t.riskAssessForm.value.waist_line),e.xp6(1),e.Q6J("ngIf",t.riskAssessForm.value.waist_line),e.xp6(4),e.Q6J("ngIf",!t.riskAssessForm.value.waist_line),e.xp6(1),e.Q6J("ngIf",t.riskAssessForm.value.waist_line),e.xp6(4),e.Q6J("ngIf",!t.riskAssessForm.value.systolic_1st),e.xp6(1),e.Q6J("ngIf",t.riskAssessForm.value.systolic_1st),e.xp6(4),e.Q6J("ngIf",!t.riskAssessForm.value.systolic_2nd),e.xp6(1),e.Q6J("ngIf",t.riskAssessForm.value.systolic_2nd),e.xp6(4),e.Q6J("ngIf",!t.riskAssessForm.value.systolic_2nd),e.xp6(1),e.Q6J("ngIf",t.riskAssessForm.value.avg_systolic),e.xp6(4),e.Q6J("ngIf",!t.riskAssessForm.value.avg_systolic),e.xp6(1),e.Q6J("ngIf",t.riskAssessForm.value.avg_systolic),e.xp6(1),e.Q6J("ngIf",t.show_form))},dependencies:[a.mk,a.sg,a.O5,p.BN,o._Y,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.JL,o.sg,o.u]});const ye=function(i){return{"background-color":i}},Ae=function(i){return{color:i}};class h{constructor(){this.faInfoCircle=d.sqG,this.risk=10}ngOnInit(){}}h.\u0275fac=function(n){return new(n||h)},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-risk-stratification"]],decls:81,vars:8,consts:[[1,"grid","grid-cols-12","flex","item-start","flex-wrap","shadow-md","rounded-xl","mb-4","mt-8"],[1,"col-span-12","flex","px-5","py-3","rounded-tl","rounded-tr",3,"ngStyle"],[1,"font-bold","text-white","text-md","mt-2","mb-2"],[1,""],[1,"peer","text-white","hover:text-white","z-50","px-2",3,"icon"],[1,"absolute","text-sm","bg-gradient-to-b","from-stone-500","to-gray-400","p-2","rounded","border","border-gray-500","text-white","drop-shadow-lg","opacity-90","border-check","z-50","w-60","invisible","peer-hover:visible"],[1,"font-bold","drop-shadow-lg"],[1,"font-light","drop-shadow-lg"],[1,"text-sm","col-span-6","col-start-1","table-auto","border-r-2","border-gray-200"],[1,"border-b-2","border-gray-200"],[1,"px-5","py-3"],[1,"px-5","py-3","text-gray","font-bold","text-lg",3,"ngStyle"],[1,"text-sm","col-span-6","col-start-7","table-auto","overflow-y-auto","h-96"],[1,"px-5","py-5","font-bold"],[1,"list-disc","px-8"],[1,"py-3"],[1,"list-disc","px-8","mb-4"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),e._uU(3,"Risk Stratification Details"),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"fa-icon",4),e.TgZ(6,"div",5)(7,"h1",6),e._uU(8,"IMPORTANT"),e.qZA(),e.TgZ(9,"p",7),e._uU(10,"Once saved, the information will be displayed in the input boxes and shall not be editable unless Edit button is pressed."),e.qZA()()()(),e.TgZ(11,"table",8)(12,"tbody")(13,"tr",9)(14,"td",10),e._uU(15,"Risk Level"),e.qZA(),e.TgZ(16,"td",11),e._uU(17),e.qZA()(),e.TgZ(18,"tr",9)(19,"td",10),e._uU(20,"Location of Assessment"),e.qZA(),e.TgZ(21,"td",10),e._uU(22,"Facility"),e.qZA()(),e.TgZ(23,"tr",9)(24,"td",10),e._uU(25,"Presence of Diabetes"),e.qZA(),e.TgZ(26,"td",10),e._uU(27,"Y"),e.qZA()(),e.TgZ(28,"tr",9)(29,"td",10),e._uU(30,"Patient Gender"),e.qZA(),e.TgZ(31,"td",10),e._uU(32,"Female"),e.qZA()(),e.TgZ(33,"tr",9)(34,"td",10),e._uU(35,"Patient Age"),e.qZA(),e.TgZ(36,"td",10),e._uU(37,"48.98 years old"),e.qZA()(),e.TgZ(38,"tr",9)(39,"td",10),e._uU(40,"Smoking Status"),e.qZA(),e.TgZ(41,"td",10),e._uU(42,"Y"),e.qZA()(),e.TgZ(43,"tr",3)(44,"td",10),e._uU(45,"Actual Systolic Blood Pressure"),e.qZA(),e.TgZ(46,"td",10),e._uU(47,"110"),e.qZA()()()(),e.TgZ(48,"div",12)(49,"h1",13),e._uU(50,"Health Information"),e.qZA(),e.TgZ(51,"ul",14)(52,"li",15),e._uU(53,"All individuals with persistent raised BP \u2265 160/100 mmHg should be given antihypertensive treatment."),e.qZA(),e.TgZ(54,"li",15),e._uU(55,"All patients with established diabetes and cardiovascular disease (coronary heart disease, myocardial infarction, transient ischaemic attacks, cerebrovascular disease or peripheral vascular disease); if stable, should continue the treatment already prescribed and be considered as with risk > 30%."),e.qZA(),e.TgZ(56,"li",15),e._uU(57,"All individuals with total cholesterol at or above 8 mmol/l (320mg/dl) should be given lifestyle advise and statins."),e.qZA()(),e.TgZ(58,"ul",14)(59,"li",15),e._uU(60,"Counsel on diet, physical activity, smoking cessation, (Protocol 3P and 4P)."),e.qZA(),e.TgZ(61,"li",15),e._uU(62,"If risk < 10%, follow up in 12 months."),e.qZA(),e.TgZ(63,"li",15),e._uU(64,"If risk 10 to < 20%, follow up every 3 months until the targets are met, then 6-9 months thereafter."),e.qZA()(),e.TgZ(65,"ul",14)(66,"li",15),e._uU(67,"Counsel on diet, physical activity, smoking cessation, (Protocols 3P and 4P)."),e.qZA(),e.TgZ(68,"li",15),e._uU(69,"Persistent BP \u2265 140/90 mmHg (in DM \u2265 130/80 mmHg) consider a low dose of one of the drugs. Hydrochlorthiazide 25-50 mg daily. Enalapril 5-20 mg daily. Atenolol 50-100 mg daily. Amiodipine 5-10 mg daily"),e.qZA(),e.TgZ(70,"li",15),e._uU(71,"Follow-up every 3-6 months."),e.qZA()(),e.TgZ(72,"ul",16)(73,"li",15),e._uU(74,"Counsel on diet, physical activity, smoking cessation."),e.qZA(),e.TgZ(75,"li",15),e._uU(76,"Persistent BP \u2265 130/80 should be given one of the drugs: thiazide, ACE inhibitor, beta blocker, calcium channel blocker. "),e.qZA(),e.TgZ(77,"li",15),e._uU(78,"Give a statin."),e.qZA(),e.TgZ(79,"li",15),e._uU(80,"Follow-up every three months."),e.qZA()()()()),2&n&&(e.xp6(1),e.Q6J("ngStyle",e.VKq(4,ye,t.risk<=10?"#6ec46e":t.risk>10?"#f86b6b":null)),e.xp6(4),e.Q6J("icon",t.faInfoCircle),e.xp6(11),e.Q6J("ngStyle",e.VKq(6,Ae,t.risk<=10?"#6ec46e":t.risk>10?"#f86b6b":null)),e.xp6(1),e.hij("",t.risk,"%"))},dependencies:[a.PC,p.BN]});const we=new o.cw({consult_ncd_risk_id:new o.NI(null),patient_ncd_id:new o.NI(null),consult_id:new o.NI(null),patient_id:new o.NI(null),question1:new o.NI(null),question2:new o.NI(null),question3:new o.NI(null),question4:new o.NI(null),question5:new o.NI(null),question6:new o.NI(null),question7:new o.NI(null),question8:new o.NI(null),angina_heart_attack:new o.NI(null),stroke_tia:new o.NI(null)});function ke(i,n){if(1&i&&(e.TgZ(0,"option",25),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.desc," ")}}function Ne(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",21)(1,"div",22)(2,"h1",10),e._uU(3),e.qZA(),e.TgZ(4,"h1",23),e._uU(5),e.qZA()(),e.TgZ(6,"div",13)(7,"select",24),e.NdJ("change",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.getAnginaValue())}),e.YNc(8,ke,2,2,"option",15),e.qZA()()()}if(2&i){const t=n.$implicit,s=e.oxw(2);e.xp6(3),e.AsE("",t.question_id,". ",t.question_e," "),e.xp6(2),e.Oqu(t.question_t),e.xp6(2),e.Q6J("formControlName","question"+t.question_id)("name","question"+t.question_id),e.xp6(1),e.Q6J("ngForOf",s.logical2)}}function Ce(i,n){if(1&i&&(e.TgZ(0,"option",25),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.desc," ")}}function Ie(i,n){if(1&i&&e._UZ(0,"fa-icon",26),2&i){const t=e.oxw(2);e.Q6J("icon",t.faSave)}}function Ue(i,n){if(1&i&&e._UZ(0,"fa-icon",27),2&i){const t=e.oxw(2);e.Q6J("icon",t.faSpinner)}}const J=function(i){return{"bg-red-400":i}},Q=function(i){return{"text-red-400":i}};function Fe(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onSubmit())}),e.TgZ(1,"div",2)(2,"div",3)(3,"h4",4),e._uU(4,"Angina or Heart Attack"),e.qZA()(),e.YNc(5,Ne,9,6,"div",5),e._UZ(6,"div",6),e.TgZ(7,"p",7)(8,"b"),e._uU(9,"Note:"),e.qZA(),e._uU(10," If the answer is "),e.TgZ(11,"b"),e._uU(12,"YES"),e.qZA(),e._uU(13," to either questions 3, 4, 5, 6, or 7, the patient may have angina or heart attack, and must see a doctor. "),e.qZA()(),e.TgZ(14,"div",8)(15,"div",3)(16,"h4",4),e._uU(17,"Stroke or Transient Ischemic Attack"),e.qZA()(),e.TgZ(18,"div",9)(19,"h1",10),e._uU(20," 8. Have you experienced any of the following: "),e.qZA(),e.TgZ(21,"ul",11)(22,"li"),e._uU(23,"Difficulty in talking."),e.qZA(),e.TgZ(24,"li"),e._uU(25,"Weakness of arm and/or legs on one side of the body or numbness on one side of the body?"),e.qZA()(),e.TgZ(26,"h1",12),e._uU(27," Have you experienced any of the following: "),e.qZA(),e.TgZ(28,"ul",11)(29,"li"),e._uU(30,"Hirap sa pagsasalita."),e.qZA(),e.TgZ(31,"li"),e._uU(32,"Panghihina ng braso at/o ng binti o pamamanhid ng kalahating bahagi ng katawan?"),e.qZA()()(),e.TgZ(33,"div",13)(34,"select",14),e.NdJ("change",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.getStrokeTia())}),e.YNc(35,Ce,2,2,"option",15),e.qZA()(),e._UZ(36,"div",16),e.TgZ(37,"p",7)(38,"b"),e._uU(39,"Note:"),e.qZA(),e._uU(40," If the answer to question 8 is "),e.TgZ(41,"b"),e._uU(42,"YES"),e.qZA(),e._uU(43,", the patient may be having TIA or stroke, and must see a doctor. "),e.qZA()(),e.TgZ(44,"div",17)(45,"button",18),e.YNc(46,Ie,1,1,"fa-icon",19),e.YNc(47,Ue,1,1,"fa-icon",20),e._uU(48," Save "),e.qZA()()()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.questionnaireForm),e.xp6(2),e.Q6J("ngClass",e.VKq(10,J,"Y"===t.questionnaireForm.value.angina_heart_attack)),e.xp6(3),e.Q6J("ngForOf",t.questionnaire),e.xp6(2),e.Q6J("ngClass",e.VKq(12,Q,"Y"===t.questionnaireForm.value.angina_heart_attack)),e.xp6(8),e.Q6J("ngClass",e.VKq(14,J,"Y"===t.questionnaireForm.value.stroke_tia)),e.xp6(20),e.Q6J("ngForOf",t.logical2),e.xp6(2),e.Q6J("ngClass",e.VKq(16,Q,"Y"===t.questionnaireForm.value.stroke_tia)),e.xp6(8),e.Q6J("disabled",t.questionnaireForm.invalid||t.is_saving),e.xp6(1),e.Q6J("ngIf",!t.is_saving),e.xp6(1),e.Q6J("ngIf",t.is_saving)}}class b{loadLibraries(){this.http.get("libraries/ncd-answers-s2").subscribe({next:n=>{this.logical2=n.data,console.log(n.data)},error:n=>console.log(n)})}getAnginaValue(){this.questionnaireForm.patchValue("Y"===this.questionnaireForm.value.question3||"Y"===this.questionnaireForm.value.question4||"Y"===this.questionnaireForm.value.question5||"Y"===this.questionnaireForm.value.question6||"Y"===this.questionnaireForm.value.question7?{angina_heart_attack:"Y"}:{angina_heart_attack:"N"})}getStrokeTia(){this.questionnaireForm.patchValue("Y"===this.questionnaireForm.value.question8?{stroke_tia:"Y"}:{stroke_tia:"N"})}identify(n,t){return t.id}onSubmit(){this.is_saving=!0,this.questionnaireForm.valid&&this.http.post("non-communicable-disease/risk-questionnaire",this.questionnaireForm.value).subscribe({next:n=>{console.log(n),this.toastr.success("Recorded successfully!","Questionnaire"),this.is_saving=!1},error:n=>console.log(n)})}getRecord(){this.consult_details&&(this.questionnaireForm.patchValue({...this.consult_details.riskQuestionnaire}),this.getAnginaValue(),this.getStrokeTia(),this.show_form=!0)}createForm(){this.consult_details&&this.consult_details.assessment_date&&(this.questionnaireForm=this.formBuilder.nonNullable.group({consult_ncd_risk_id:[this.consult_details.id],patient_ncd_id:[this.consult_details.patient_ncd_id],consult_id:[this.consult_details.consult_id,o.kI.required],patient_id:[this.consult_details.patient_id,o.kI.required],question1:[null,o.kI.required],question2:[null,o.kI.required],question3:[null,o.kI.required],question4:[null,o.kI.required],question5:[null,o.kI.required],question6:[null,o.kI.required],question7:[null,o.kI.required],question8:[null,o.kI.required],angina_heart_attack:[null,o.kI.required],stroke_tia:[null,o.kI.required]}),this.getRecord())}ngOnChanges(n){this.createForm()}constructor(n,t,s){this.http=n,this.formBuilder=t,this.toastr=s,this.faInfoCircle=d.sqG,this.faSave=k.r6l,this.faSpinner=d.LM3,this.questionnaireForm=we,this.is_saving=!1,this.show_form=!1,this.questionnaire=V}ngOnInit(){this.loadLibraries()}}function Je(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",18)(1,"input",19),e.NdJ("ngModelChange",function(r){const l=e.CHM(t).$implicit,_=e.oxw();return e.KtG(_.patient_diagnosis[l.id]=r)}),e.qZA(),e.TgZ(2,"label",20),e._uU(3),e.qZA()()}if(2&i){const t=n.$implicit,s=e.oxw();e.xp6(1),e.Q2q("id","patient_diagnosis",t.id,""),e.Q6J("ngModel",s.patient_diagnosis[t.id]),e.xp6(1),e.Q2q("for","patient_diagnosis",t.id,""),e.xp6(1),e.Oqu(t.desc)}}function Qe(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",18)(1,"input",19),e.NdJ("ngModelChange",function(r){const l=e.CHM(t).$implicit,_=e.oxw();return e.KtG(_.patient_target_organ[l.id]=r)}),e.qZA(),e.TgZ(2,"label",20),e._uU(3),e.qZA()()}if(2&i){const t=n.$implicit,s=e.oxw();e.xp6(1),e.Q2q("id","patient_target_organ",t.id,""),e.Q6J("ngModel",s.patient_target_organ[t.id]),e.xp6(1),e.Q2q("for","patient_target_organ",t.id,""),e.xp6(1),e.Oqu(t.desc)}}function Se(i,n){if(1&i&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.desc," ")}}function Oe(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",18)(1,"h1",21),e._uU(2),e.qZA(),e.TgZ(3,"select",22),e.NdJ("ngModelChange",function(r){const l=e.CHM(t).$implicit,_=e.oxw();return e.KtG(_.ncd_record[l.code]=r)}),e.YNc(4,Se,2,2,"option",23),e.qZA()()}if(2&i){const t=n.$implicit,s=e.oxw();e.xp6(2),e.Oqu(t.desc),e.xp6(1),e.Q6J("ngModel",s.ncd_record[t.code]),e.xp6(1),e.Q6J("ngForOf",s.physical_examination_result)}}function Re(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",18)(1,"input",19),e.NdJ("ngModelChange",function(r){const l=e.CHM(t).$implicit,_=e.oxw();return e.KtG(_.patient_counseling[l.id]=r)}),e.qZA(),e.TgZ(2,"label",25),e._uU(3),e.qZA()()}if(2&i){const t=n.$implicit,s=e.oxw();e.xp6(1),e.Q2q("id","patient_counseling",t.id,""),e.Q6J("ngModel",s.patient_counseling[t.id]),e.xp6(1),e.Q2q("for","patient_counseling",t.id,""),e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.desc)}}function Ye(i,n){if(1&i&&e._UZ(0,"fa-icon",26),2&i){const t=e.oxw();e.Q6J("icon",t.faSave)}}function Ve(i,n){if(1&i&&e._UZ(0,"fa-icon",27),2&i){const t=e.oxw();e.Q6J("icon",t.faSpinner)}}b.\u0275fac=function(n){return new(n||b)(e.Y36(g.O),e.Y36(o.qu),e.Y36(N._W))},b.\u0275cmp=e.Xpm({type:b,selectors:[["app-questionnaire"]],inputs:{patient_id:"patient_id",consult_details:"consult_details"},features:[e.TTD],decls:1,vars:1,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"grid","grid-cols-12","item-start","flex-wrap","shadow-md","rounded-xl","mb-8","mt-8"],[1,"col-span-12","flex","bg-blue-500","px-5","py-3","rounded-t-xl",3,"ngClass"],[1,"font-bold","text-white","text-md","mt-2","mb-2"],["class","col-span-full grid grid-cols-12",4,"ngFor","ngForOf"],[1,"text-sm","col-start-1","col-span-12","border-b-2","border-gray-200","mt-2","mb-4"],[1,"text-sm","col-start-1","col-span-12","w-full","px-5","mt-2","mb-4",3,"ngClass"],[1,"grid","grid-cols-12","item-start","flex-wrap","shadow-md","rounded-xl","mb-4","mt-8"],[1,"text-sm","col-start-1","col-span-9","w-full","px-5","mt-4","mb-4"],[1,"mb-1"],[1,"list-disc","px-8"],[1,"mb-1","px-4","mt-2"],[1,"col-start-10","col-span-3","px-5"],["formControlName","question8","name","question8",1,"text-sm","mt-4","bg-white","border-gray-300","border","px-2","p-2.5","rounded-md","w-full",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"col-start-1","col-span-12","border-b-2","border-gray-200","mt-2","mb-1"],[1,"flex","justify-end"],["type","submit",1,"btn-save","px-10","disabled:bg-gray-300",3,"disabled"],["class","mr-2",3,"icon",4,"ngIf"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],[1,"col-span-full","grid","grid-cols-12"],[1,"text-sm","col-start-1","col-span-9","w-full","px-5","mt-4","mb-4","grid","grid-cols-1"],[1,"pl-3","italic"],[1,"text-sm","mt-4","bg-white","border-gray-300","border","px-2","p-2.5","rounded-md","w-full",3,"formControlName","name","change"],[3,"value"],[1,"mr-2",3,"icon"],["spin","true",1,"mr-2",3,"icon"]],template:function(n,t){1&n&&e.YNc(0,Fe,49,18,"form",0),2&n&&e.Q6J("ngIf",t.show_form)},dependencies:[a.mk,a.sg,a.O5,p.BN,o._Y,o.YN,o.Kr,o.EJ,o.JJ,o.JL,o.sg,o.u]});class v{loadLibraries(){Object.entries(this.libraries).forEach(([n,t],s)=>{let r=t;this.http.get("libraries/"+r.url).subscribe({next:c=>{this[r.var_name]=c.data},error:c=>console.log(c)})})}getRecord(){this.consult_details.patientNcdRecord&&(this.ncd_record=this.consult_details.patientNcdRecord,this.consult_details&&Object.keys(this.consult_details.ncdRecordTargetOrgan).length>0&&(this.patient_target_organ=this.loadIndexSelected(this.consult_details.ncdRecordTargetOrgan,"target_organ_code")),this.consult_details&&Object.keys(this.consult_details.ncdRecordDiagnosis).length>0&&(this.patient_diagnosis=this.loadIndexSelected(this.consult_details.ncdRecordDiagnosis,"diagnosis_code")),this.consult_details&&Object.keys(this.consult_details.ncdRecordCounselling).length>0&&(this.patient_counseling=this.loadIndexSelected(this.consult_details.ncdRecordCounselling,"counselling_code")))}loadIndexSelected(n,t){let s=[];return Object.keys(n).length>0&&Object.entries(n).forEach(([r,c],l)=>{s[c[t]]=!0}),s}onSubmit(){this.ncd_record.patient_ncd_id=this.consult_details.patient_ncd_id,this.ncd_record.consult_ncd_risk_id=this.consult_details.id,this.ncd_record.patient_id=this.consult_details.patient_id,this.ncd_record.consultation_date=(0,a.p6)(this.consult_details.assessment_date,"yyyy-MM-dd","en"),this.ncd_record.diagnosis_code=this.getIndexVal(this.patient_diagnosis),this.ncd_record.counselling_code=this.getIndexVal(this.patient_counseling),this.ncd_record.target_organ_code=this.getIndexVal(this.patient_target_organ),this.http.post("non-communicable-disease/patient-record",this.ncd_record).subscribe({next:n=>{console.log(n),this.toastr.success("Successfully recorded!","NCD Record")},error:n=>console.log(n)})}getIndexVal(n){let t=[];return n.forEach((s,r)=>{!0===s&&t.push(r)}),t}constructor(n,t){this.http=n,this.toastr=t,this.faSave=k.r6l,this.faInfoCircle=d.sqG,this.faSpinner=d.LM3,this.is_saving=!1,this.patient_counseling=[],this.patient_target_organ=[],this.patient_diagnosis=[],this.ncd_record={current_medications:null,palpitation_heart:null,peripheral_pulses:null,abdomen:null,heart:null,lungs:null,sensation_feet:null,other_findings:null,other_infos:null},this.logical=[{code:"Y",desc:"Yes"},{code:"N",desc:"No"},{code:"U",desc:"Unknown"},{code:"X",desc:"Not Applicable"}],this.physical_examination=[{code:"palpitation_heart",desc:"Palpitation of heart"},{code:"peripheral_pulses",desc:"Palpation of peripheral pulses"},{code:"abdomen",desc:"Palpation of abdomen"},{code:"heart",desc:"Auscultation of heart"},{code:"lungs",desc:"Auscultation of lungs"},{code:"sensation_feet",desc:"If DM, sensation of feet and foot pulses"}],this.libraries=[{var_name:"counselling",url:"ncd-record-counselling"},{var_name:"diagnosis",url:"ncd-record-diagnosis"},{var_name:"target_organ",url:"ncd-record-target-organ"},{var_name:"physical_examination_result",url:"ncd-physical-exam"}]}ngOnInit(){this.loadLibraries()}ngOnChanges(n){this.getRecord()}}v.\u0275fac=function(n){return new(n||v)(e.Y36(g.O),e.Y36(N._W))},v.\u0275cmp=e.Xpm({type:v,selectors:[["app-patient-record"]],inputs:{patient_id:"patient_id",consult_details:"consult_details"},features:[e.TTD],decls:53,vars:10,consts:[[1,"grid","grid-cols-12","item-start","flex-wrap","shadow-md","rounded-xl","mb-8","mt-8"],[1,"col-span-12","flex","bg-blue-500","px-5","py-3","rounded-t-xl"],[1,"font-bold","text-white","text-md","mt-2","mb-2"],[1,"col-span-12"],[1,"text-sm","col-span-12","px-5","mt-4"],[1,"font-bold","text-md","mt-2","mb-2","text-lg","text-blue-500"],[1,"text-sm","col-span-12","px-5","mb-6","ml-5"],[1,"mb-1","font-semibold"],["name","text","rows","4",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full",3,"ngModel","ngModelChange"],[1,"text-sm","col-span-12","px-5"],[1,"col-span-12","grid","grid-cols-12","gap-4","ml-10","mb-6"],["class","text-sm col-span-6 ",4,"ngFor","ngForOf"],[1,"col-span-12","grid","grid-cols-12","gap-4","ml-10","mb-6","mr-5"],["class","text-sm col-span-6",4,"ngFor","ngForOf"],[1,"col-span-12","flex","justify-end","mr-5","mb-5"],["type","button",1,"btn-save","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-3",3,"icon",4,"ngIf"],["class","mr-3","spin","true",3,"icon",4,"ngIf"],[1,"text-sm","col-span-6"],["type","checkbox",1,"h-4","w-4","border-gray-400","text-blue-500","rounded-md","mr-3",3,"ngModel","ngModelChange"],[1,"ml-1","align-middle"],[1,"mb-1"],["name","family_hx_hypertension",1,"text-sm","form-select","bg-white","border-gray-200","border","p-2.5","rounded-md","w-full",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"ml-1","align-middle",3,"value"],[1,"mr-3",3,"icon"],["spin","true",1,"mr-3",3,"icon"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),e._uU(3,"Patient NCD Consulting Record"),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4)(6,"h4",5),e._uU(7,"Current Medications"),e.qZA()(),e.TgZ(8,"div",6)(9,"h4",7),e._uU(10,"List current medications"),e.qZA(),e.TgZ(11,"textarea",8),e.NdJ("ngModelChange",function(r){return t.ncd_record.current_medications=r}),e.qZA()()(),e.TgZ(12,"div",3)(13,"div",9)(14,"h4",5),e._uU(15,"Diagnosis & Associated Clinical Conditions"),e.qZA()(),e.TgZ(16,"div",10),e.YNc(17,Je,4,4,"div",11),e.qZA()(),e.TgZ(18,"div",3)(19,"div",9)(20,"h4",5),e._uU(21,"Target Organ Damage"),e.qZA()(),e.TgZ(22,"div",10),e.YNc(23,Qe,4,4,"div",11),e.qZA()(),e.TgZ(24,"div",3)(25,"div",9)(26,"h4",5),e._uU(27,"Physical Examination"),e.qZA()(),e.TgZ(28,"div",12),e.YNc(29,Oe,5,3,"div",13),e.qZA(),e.TgZ(30,"div",6)(31,"h4",7),e._uU(32,"Other significant findings/ Laboratory results"),e.qZA(),e.TgZ(33,"textarea",8),e.NdJ("ngModelChange",function(r){return t.ncd_record.other_findings=r}),e.qZA()()(),e.TgZ(34,"div",3)(35,"div",9)(36,"h4",5),e._uU(37,"Provided Counselling On"),e.qZA()(),e.TgZ(38,"div",10),e.YNc(39,Re,4,5,"div",11),e.qZA()(),e.TgZ(40,"div",3)(41,"div",4)(42,"h4",5),e._uU(43,"Others"),e.qZA()(),e.TgZ(44,"div",6)(45,"h4",7),e._uU(46,"Other information"),e.qZA(),e.TgZ(47,"textarea",8),e.NdJ("ngModelChange",function(r){return t.ncd_record.other_infos=r}),e.qZA()()(),e.TgZ(48,"div",14)(49,"button",15),e.NdJ("click",function(){return t.onSubmit()}),e.YNc(50,Ye,1,1,"fa-icon",16),e.YNc(51,Ve,1,1,"fa-icon",17),e._uU(52," Save "),e.qZA()()()),2&n&&(e.xp6(11),e.Q6J("ngModel",t.ncd_record.current_medications),e.xp6(6),e.Q6J("ngForOf",t.diagnosis),e.xp6(6),e.Q6J("ngForOf",t.target_organ),e.xp6(6),e.Q6J("ngForOf",t.physical_examination),e.xp6(4),e.Q6J("ngModel",t.ncd_record.other_findings),e.xp6(6),e.Q6J("ngForOf",t.counselling),e.xp6(8),e.Q6J("ngModel",t.ncd_record.other_infos),e.xp6(2),e.Q6J("disabled",t.is_saving),e.xp6(1),e.Q6J("ngIf",!t.is_saving),e.xp6(1),e.Q6J("ngIf",t.is_saving))},dependencies:[a.sg,a.O5,p.BN,o.YN,o.Kr,o.Fj,o.Wl,o.EJ,o.JJ,o.On]});const Me=[{code:"Y",desc:"Yes"},{code:"N",desc:"No"}],Pe=[{code:"a",desc:"Positive"},{code:"b",desc:"Negative"},{code:"c",desc:"Suspect Cancer"}],Ke=new o.cw({ncd_id:new o.NI(null),patient_id:new o.NI(null),facility_code:new o.NI(null),abdomen_code:new o.NI(null),abdomen_remarks:new o.NI(null),abdominal_surgery:new o.NI(null),abdominal_surgery_remarks:new o.NI(null),abortion:new o.NI(null),allergies:new o.NI(null),allergies_remarks:new o.NI(null),any_spouse:new o.NI(null),any_spouse_remarks:new o.NI(null),breast_code:new o.NI(null),breast_remarks:new o.NI(null),cancer:new o.NI(null),cancer_remarks:new o.NI(null),chest_code:new o.NI(null),chest_remarks:new o.NI(null),children:new o.NI(null),cigarettes:new o.NI(null),client:new o.NI(null),client_remarks:new o.NI(null),counseling:new o.NI(null),current_medication:new o.NI(null),duration:new o.NI(null),first_intercourse:new o.NI(null),first_preg:new o.NI(null),full_term:new o.NI(null),gravidity:new o.NI(null),heart_code:new o.NI(null),heart_remarks:new o.NI(null),heent_code:new o.NI(null),heent_remarks:new o.NI(null),livebirths:new o.NI(null),medication_remarks:new o.NI(null),months:new o.NI(null),pap_smear:new o.NI(null),pap_smear_findings:new o.NI(null),parity:new o.NI(null),pelvic_code:new o.NI(null),pelvic_remarks:new o.NI(null),preterm:new o.NI(null),previous_screening:new o.NI(null),recto_vaginal:new o.NI(null),sexual_partners:new o.NI(null),skin_code:new o.NI(null),skin_remarks:new o.NI(null),smoking:new o.NI(null),smoking_remarks:new o.NI(null),spouse:new o.NI(null),treatment:new o.NI(null),vaginal_bleeding:new o.NI(null),vaginal_discharge:new o.NI(null),via_findings:new o.NI(null),via_result:new o.NI(null),years:new o.NI(null),glands:new o.NI(null),glands_remarks:new o.NI(null),speculum:new o.NI(null),speculum_remarks:new o.NI(null),motion_tenderness:new o.NI(null),tenderness:new o.NI(null),size:new o.NI(null),shape:new o.NI(null),uterus:new o.NI(null),menarche:new o.NI(null),lmp:new o.NI(null),aog:new o.NI(null),bleeding_pattern:new o.NI(null),pads:new o.NI(null),referral:new o.NI(null)});function Le(i,n){1&i&&(e.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"h4",16),e._uU(5,"Number of children"),e.qZA(),e._UZ(6,"input",17),e.qZA()()()())}function De(i,n){if(1&i&&(e.TgZ(0,"option",64),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.desc)}}function je(i,n){if(1&i&&(e.TgZ(0,"option",64),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.desc)}}function Ge(i,n){if(1&i&&(e.TgZ(0,"option",64),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.desc)}}function He(i,n){if(1&i&&(e.TgZ(0,"option",64),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.desc)}}function Ee(i,n){if(1&i&&(e.TgZ(0,"option",64),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.desc)}}function $e(i,n){if(1&i&&(e.TgZ(0,"option",64),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.code)}}function Be(i,n){if(1&i&&(e.TgZ(0,"option",64),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.desc)}}function Xe(i,n){if(1&i&&(e.TgZ(0,"option",64),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.desc)}}function ze(i,n){if(1&i&&(e.TgZ(0,"option",64),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.desc)}}function We(i,n){if(1&i&&(e.TgZ(0,"option",64),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.desc)}}function et(i,n){if(1&i&&(e.TgZ(0,"option",64),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.desc)}}function tt(i,n){if(1&i&&(e.TgZ(0,"option",64),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.desc)}}function it(i,n){if(1&i&&(e.TgZ(0,"option",64),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.desc)}}function nt(i,n){if(1&i&&(e.TgZ(0,"div",12)(1,"div",18)(2,"h4",19),e._uU(3,"A. OB-GYNE History"),e.qZA()(),e.TgZ(4,"div",13)(5,"h4",20),e._uU(6,"Menstrual history"),e.qZA(),e.TgZ(7,"div",21)(8,"div",22)(9,"h4",16),e._uU(10,"Menarche"),e.qZA(),e._UZ(11,"input",23),e.qZA(),e.TgZ(12,"div",22)(13,"h4",16),e._uU(14,"Last menstrual period (LMP)"),e.qZA(),e._UZ(15,"input",24),e.qZA(),e.TgZ(16,"div",22)(17,"h4",16),e._uU(18,"AOG"),e.qZA(),e._UZ(19,"input",25),e.qZA(),e.TgZ(20,"div",22)(21,"h4",16),e._uU(22,"Menstrual bleeding pattern"),e.qZA(),e.TgZ(23,"select",26)(24,"option",27),e._uU(25,"Regular"),e.qZA(),e.TgZ(26,"option",28),e._uU(27,"Irregular"),e.qZA()()(),e.TgZ(28,"div",22)(29,"h4",16),e._uU(30,"Number of pads/day"),e.qZA(),e._UZ(31,"input",29),e.qZA()()(),e.TgZ(32,"div",30)(33,"h4",20),e._uU(34,"Menstrual history"),e.qZA(),e.TgZ(35,"div",21)(36,"div",15)(37,"h4",16),e._uU(38,"Gravidity"),e.qZA(),e._UZ(39,"input",31),e.qZA(),e.TgZ(40,"div",15)(41,"h4",16),e._uU(42,"Parity"),e.qZA(),e._UZ(43,"input",32),e.qZA(),e.TgZ(44,"div",33)(45,"h4",16),e._uU(46,"Full-term"),e.qZA(),e._UZ(47,"input",34),e.qZA(),e.TgZ(48,"div",33)(49,"h4",16),e._uU(50,"Preterm"),e.qZA(),e._UZ(51,"input",35),e.qZA(),e.TgZ(52,"div",33)(53,"h4",16),e._uU(54,"Abortion"),e.qZA(),e._UZ(55,"input",36),e.qZA(),e.TgZ(56,"div",33)(57,"h4",16),e._uU(58,"Livebirths"),e.qZA(),e._UZ(59,"input",37),e.qZA(),e.TgZ(60,"div",15)(61,"h4",16),e._uU(62,"Age at first full term pregnancy (high risk if below 17 years old)"),e.qZA(),e._UZ(63,"input",38),e.qZA()()(),e.TgZ(64,"div",30)(65,"h4",20),e._uU(66,"Oral Contraceptives Use (Duration)"),e.qZA(),e.TgZ(67,"div",21)(68,"div",15)(69,"h4",16),e._uU(70,"Number of years"),e.qZA(),e._UZ(71,"input",39),e.qZA(),e.TgZ(72,"div",15)(73,"h4",16),e._uU(74,"Number of months"),e.qZA(),e._UZ(75,"input",40),e.qZA()()(),e.TgZ(76,"div",30)(77,"h4",20),e._uU(78,"History of previous cervical cancer screening"),e.qZA(),e.TgZ(79,"div",21)(80,"div",22)(81,"h4",16),e._uU(82,"History of previous screening"),e.qZA(),e.TgZ(83,"select",41),e.YNc(84,De,2,2,"option",42),e.qZA()(),e.TgZ(85,"div",22)(86,"h4",16),e._uU(87,"VIA (Result)"),e.qZA(),e.TgZ(88,"select",43),e.YNc(89,je,2,2,"option",42),e.qZA()(),e.TgZ(90,"div",22)(91,"h4",16),e._uU(92,"Pap smear (Result)"),e.qZA(),e.TgZ(93,"select",44),e.YNc(94,Ge,2,2,"option",42),e.qZA()()()(),e.TgZ(95,"div",30)(96,"h4",20),e._uU(97,"History of abnormal vaginal discharge / bleeding"),e.qZA(),e.TgZ(98,"div",21)(99,"div",15)(100,"h4",16),e._uU(101,"Discharge"),e.qZA(),e.TgZ(102,"select",45),e.YNc(103,He,2,2,"option",42),e.qZA()(),e.TgZ(104,"div",15)(105,"h4",16),e._uU(106,"Bleeding"),e.qZA(),e.TgZ(107,"select",46),e.YNc(108,Ee,2,2,"option",42),e.qZA()()()(),e.TgZ(109,"div",18)(110,"h4",19),e._uU(111,"B. Sexual History"),e.qZA()(),e.TgZ(112,"div",13)(113,"h4",20),e._uU(114,"History"),e.qZA(),e.TgZ(115,"div",21)(116,"div",22)(117,"h4",16),e._uU(118,"Age at first intercourse"),e.qZA(),e._UZ(119,"input",47),e.qZA(),e.TgZ(120,"div",22)(121,"h4",16),e._uU(122,"Number of sexual partner/s"),e.qZA(),e._UZ(123,"input",48),e.qZA(),e.TgZ(124,"div",22)(125,"h4",16),e._uU(126,"Spouse/Partner/s"),e.qZA(),e.TgZ(127,"select",49),e.YNc(128,$e,2,2,"option",42),e.qZA()()()(),e.TgZ(129,"div",13)(130,"h4",20),e._uU(131,"STI History"),e.qZA(),e.TgZ(132,"div",21)(133,"div",22)(134,"h4",16),e._uU(135,"Client"),e.qZA(),e.TgZ(136,"select",50),e.YNc(137,Be,2,2,"option",42),e.qZA()(),e.TgZ(138,"div",51)(139,"h4",16),e._uU(140,"Specify"),e.qZA(),e._UZ(141,"input",52),e.qZA(),e.TgZ(142,"div",22)(143,"h4",16),e._uU(144,"Any of spouse/partner/s"),e.qZA(),e.TgZ(145,"select",53),e.YNc(146,Xe,2,2,"option",42),e.qZA()(),e.TgZ(147,"div",51)(148,"h4",16),e._uU(149,"Specify"),e.qZA(),e._UZ(150,"input",54),e.qZA()()(),e.TgZ(151,"div",18)(152,"h4",19),e._uU(153,"C. Family and Social History"),e.qZA()(),e.TgZ(154,"div",13)(155,"div",21)(156,"div",22)(157,"h4",16),e._uU(158,"Family history of cancer"),e.qZA(),e.TgZ(159,"select",55),e.YNc(160,ze,2,2,"option",42),e.qZA()(),e.TgZ(161,"div",51)(162,"h4",16),e._uU(163,"Specify"),e.qZA(),e._UZ(164,"input",56),e.qZA(),e.TgZ(165,"div",22)(166,"h4",16),e._uU(167,"Smoking"),e.qZA(),e.TgZ(168,"select",57),e.YNc(169,We,2,2,"option",42),e.qZA()(),e.TgZ(170,"div",22)(171,"h4",16),e._uU(172,"Year started"),e.qZA(),e._UZ(173,"input",17),e.qZA(),e.TgZ(174,"div",22)(175,"h4",16),e._uU(176,"Number of cigarettes sticks/day"),e.qZA(),e._UZ(177,"input",17),e.qZA()()(),e.TgZ(178,"div",18)(179,"h4",19),e._uU(180,"D. Medical History"),e.qZA()(),e.TgZ(181,"div",13)(182,"div",21)(183,"div",22)(184,"h4",16),e._uU(185,"Current medication"),e.qZA(),e.TgZ(186,"select",58),e.YNc(187,et,2,2,"option",42),e.qZA()(),e.TgZ(188,"div",51)(189,"h4",16),e._uU(190,"Specify"),e.qZA(),e._UZ(191,"input",59),e.qZA(),e.TgZ(192,"div",22)(193,"h4",16),e._uU(194,"Allergies"),e.qZA(),e.TgZ(195,"select",60),e.YNc(196,tt,2,2,"option",42),e.qZA()(),e.TgZ(197,"div",51)(198,"h4",16),e._uU(199,"Specify"),e.qZA(),e._UZ(200,"input",61),e.qZA(),e.TgZ(201,"div",22)(202,"h4",16),e._uU(203,"Abdominal surgery"),e.qZA(),e.TgZ(204,"select",62),e.YNc(205,it,2,2,"option",42),e.qZA()(),e.TgZ(206,"div",51)(207,"h4",16),e._uU(208,"Specify"),e.qZA(),e._UZ(209,"input",63),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(84),e.Q6J("ngForOf",t.answer_yna),e.xp6(5),e.Q6J("ngForOf",t.answer_screening),e.xp6(5),e.Q6J("ngForOf",t.answer_screening),e.xp6(9),e.Q6J("ngForOf",t.answer_yna),e.xp6(5),e.Q6J("ngForOf",t.answer_yna),e.xp6(20),e.Q6J("ngForOf",t.circumcision),e.xp6(9),e.Q6J("ngForOf",t.answer_yn),e.xp6(9),e.Q6J("ngForOf",t.answer_yn),e.xp6(14),e.Q6J("ngForOf",t.answer_yn),e.xp6(9),e.Q6J("ngForOf",t.answer_yn),e.xp6(18),e.Q6J("ngForOf",t.answer_yn),e.xp6(9),e.Q6J("ngForOf",t.answer_yn),e.xp6(9),e.Q6J("ngForOf",t.answer_yn)}}function ot(i,n){1&i&&e._UZ(0,"div",12)}function st(i,n){if(1&i&&(e.TgZ(0,"option",64),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.desc)}}function rt(i,n){if(1&i&&(e.TgZ(0,"option",64),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.desc)}}function lt(i,n){if(1&i&&(e.TgZ(0,"div",12)(1,"div",13)(2,"div",65)(3,"div",15)(4,"h4",16),e._uU(5,"VIA findings"),e.qZA(),e.TgZ(6,"select",66),e.YNc(7,st,2,2,"option",42),e.qZA()(),e.TgZ(8,"div",15)(9,"h4",16),e._uU(10,"Pap smear findings"),e.qZA(),e.TgZ(11,"select",67),e.YNc(12,rt,2,2,"option",42),e.qZA()()()()()),2&i){const t=e.oxw();e.xp6(7),e.Q6J("ngForOf",t.answer_screening),e.xp6(5),e.Q6J("ngForOf",t.answer_screening)}}function at(i,n){1&i&&(e.TgZ(0,"div",12)(1,"div",13)(2,"div",65)(3,"div",68)(4,"h4",16),e._uU(5,"Counseling"),e.qZA(),e.TgZ(6,"textarea",69),e._uU(7,"\n            "),e.qZA()()()()())}function dt(i,n){1&i&&(e.TgZ(0,"div",12)(1,"div",13)(2,"div",65)(3,"div",68)(4,"h4",16),e._uU(5,"Treatment and other care given"),e.qZA(),e.TgZ(6,"textarea",70),e._uU(7,"\n            "),e.qZA()()()()())}function ct(i,n){1&i&&(e.TgZ(0,"div",12)(1,"div",13)(2,"div",65)(3,"div",68)(4,"h4",16),e._uU(5,"Referral"),e.qZA(),e.TgZ(6,"textarea",71),e._uU(7,"\n            "),e.qZA()()()()())}function ut(i,n){if(1&i&&e._UZ(0,"fa-icon",72),2&i){const t=e.oxw();e.Q6J("icon",t.faSave)}}function _t(i,n){if(1&i&&e._UZ(0,"fa-icon",73),2&i){const t=e.oxw();e.Q6J("icon",t.faSpinner)}}const m=function(i){return{"rounded-b-xl":i}};class Z{loadLibraries(){}onSubmit(){this.is_saving=!0}toggleModal(n){this.modals[n]=void 0!==this.modals[n]&&!this.modals[n]}constructor(n){this.http=n,this.faSpinner=d.LM3,this.faInfoCircle=d.sqG,this.faTimes=d.NBC,this.faSave=d.r6l,this.faChevronCircleDown=d.yh$,this.faChevronCircleUp=d._qI,this.modals=[],this.casdtForm=Ke,this.is_saving=!1,this.size=[{code:"small",desc:"Small"},{code:"normal",desc:"Normal"},{code:"large",desc:"Large"}],this.shape=[{code:"pear",desc:"Pear Shaped"},{code:"horn",desc:"Horn Shaped"},{code:"heart",desc:"Heart Shaped"},{code:"double",desc:"Double"},{code:"tshaped",desc:"T-Shaped"},{code:"tipped",desc:"Tipped"}],this.position=[{code:"mid",desc:"Mid"},{code:"anteflexed",desc:"Anteflexed"},{code:"retroflexed",desc:"Retroflexed"},{code:"retroverted",desc:"Retroverted"},{code:"anteverted",desc:"Anteverted"}],this.circumcision=Y,this.answer_yn=Me,this.answer_screening=Pe}ngOnInit(){console.log(this.casdtForm)}}Z.\u0275fac=function(n){return new(n||Z)(e.Y36(g.O))},Z.\u0275cmp=e.Xpm({type:Z,selectors:[["app-casdt"]],decls:55,vars:40,consts:[[3,"formGroup","ngSubmit"],[1,"grid","grid-cols-12","item-start","flex-wrap","shadow-md","rounded-xl","mb-4","mt-4"],[1,"col-span-12","flex","justify-between","bg-blue-500","p-3","rounded-t-xl",3,"ngClass"],[1,"font-bold","text-white"],["type","button",1,"text-white",3,"click"],["size","lg",3,"icon"],["class","col-span-12",4,"ngIf"],[1,"grid","grid-cols-12","item-start","flex-wrap","shadow-md","rounded-xl","mb-4"],[1,"flex","justify-end","w-full"],["type","submit",1,"btn-save","px-10","disabled:bg-gray-300",3,"disabled"],["class","mr-3",3,"icon",4,"ngIf"],["class","mr-3","spin","true",3,"icon",4,"ngIf"],[1,"col-span-12"],[1,"text-sm","col-span-12","px-5","mb-6","ml-5"],[1,"col-span-12","grid","grid-cols-12","gap-4","mt-4"],[1,"text-sm","col-span-6"],[1,"mb-1","font-semibold"],["name","children","formControlName","children","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],[1,"text-sm","col-span-12","px-5","mt-4"],[1,"font-bold","text-md","mt-2","mb-2","text-lg","text-blue-500"],[1,"mb-1","text-md","uppercase","font-bold"],[1,"col-span-12","grid","grid-cols-12","gap-4"],[1,"text-sm","col-span-4"],["name","menarche","formControlName","menarche",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","lmp","formControlName","lmp","type","date",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","aog","formControlName","aog","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","bleeding_pattern","formControlName","bleeding_pattern",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["value","R"],["value","I"],["name","pads","formControlName","pads","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],[1,"text-sm","col-span-12","px-5","mb-6","ml-5","mt-12"],["name","gravidity","formControlName","gravidity","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","parity","formControlName","parity","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],[1,"text-sm","col-span-3"],["name","full_term","formControlName","full_term","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","preterm","formControlName","preterm","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","abortion","formControlName","abortion","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","livebirths","formControlName","livebirths","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","first_preg","formControlName","first_preg","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","years","formControlName","years","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","months","formControlName","months","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","previous_screening","formControlName","previous_screening",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],[3,"value",4,"ngFor","ngForOf"],["name","via_result","formControlName","via_result",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","pap_smear","formControlName","pap_smear",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","vaginal_discharge","formControlName","vaginal_discharge",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","vaginal_bleeding","formControlName","vaginal_bleeding",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","first_intercourse","formControlName","first_intercourse","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","sexual_partners","formControlName","sexual_partners","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","spouse","formControlName","spouse",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","client","formControlName","client",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],[1,"text-sm","col-span-8"],["name","client_remarks","formControlName","client_remarks","type","text",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","any_spouse","formControlName","any_spouse",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","any_spouse_remarks","formControlName","any_spouse_remarks","type","text",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","cancer","formControlName","cancer",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","cancer_remarks","formControlName","cancer_remarks","type","text",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","smoking","formControlName","smoking",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","current_medication","formControlName","current_medication",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","medication_remarks","formControlName","medication_remarks","type","text",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","allergies","formControlName","allergies",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","allergies_remarks","formControlName","allergies_remarks","type","text",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","abdominal_surgery","formControlName","abdominal_surgery",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","abdominal_surgery_remarks","formControlName","abdominal_surgery_remarks","type","text",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],[3,"value"],[1,"col-span-12","grid","grid-cols-12","gap-4","mt-5"],["name","via_findings","formControlName","via_findings",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","pap_smear_findings","formControlName","pap_smear_findings",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],[1,"text-sm","col-span-12"],["name","counseling","formControlName","counseling","rows","4",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","treatment","formControlName","treatment","rows","4",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","referral","formControlName","referral","rows","4",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],[1,"mr-3",3,"icon"],["spin","true",1,"mr-3",3,"icon"]],template:function(n,t){1&n&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(1,"div",1)(2,"div",2)(3,"h4",3),e._uU(4,"I. Personal Information"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return t.toggleModal("I")}),e._UZ(6,"fa-icon",5),e.qZA()(),e.YNc(7,Le,7,0,"div",6),e.qZA(),e.TgZ(8,"div",7)(9,"div",2)(10,"h4",3),e._uU(11,"II. History Taking"),e.qZA(),e.TgZ(12,"button",4),e.NdJ("click",function(){return t.toggleModal("II")}),e._UZ(13,"fa-icon",5),e.qZA()(),e.YNc(14,nt,210,13,"div",6),e.qZA(),e.TgZ(15,"div",7)(16,"div",2)(17,"h4",3),e._uU(18,"III. Physical Examination"),e.qZA(),e.TgZ(19,"button",4),e.NdJ("click",function(){return t.toggleModal("III")}),e._UZ(20,"fa-icon",5),e.qZA()(),e.YNc(21,ot,1,0,"div",6),e.qZA(),e.TgZ(22,"div",7)(23,"div",2)(24,"h4",3),e._uU(25,"IV. Screening Results"),e.qZA(),e.TgZ(26,"button",4),e.NdJ("click",function(){return t.toggleModal("IV")}),e._UZ(27,"fa-icon",5),e.qZA()(),e.YNc(28,lt,13,2,"div",6),e.qZA(),e.TgZ(29,"div",7)(30,"div",2)(31,"h4",3),e._uU(32,"V. Counseling Given"),e.qZA(),e.TgZ(33,"button",4),e.NdJ("click",function(){return t.toggleModal("V")}),e._UZ(34,"fa-icon",5),e.qZA()(),e.YNc(35,at,8,0,"div",6),e.qZA(),e.TgZ(36,"div",7)(37,"div",2)(38,"h4",3),e._uU(39,"VI. Treatment and Other Care Given"),e.qZA(),e.TgZ(40,"button",4),e.NdJ("click",function(){return t.toggleModal("VI")}),e._UZ(41,"fa-icon",5),e.qZA()(),e.YNc(42,dt,8,0,"div",6),e.qZA(),e.TgZ(43,"div",7)(44,"div",2)(45,"h4",3),e._uU(46,"VII. Referral"),e.qZA(),e.TgZ(47,"button",4),e.NdJ("click",function(){return t.toggleModal("VII")}),e._UZ(48,"fa-icon",5),e.qZA()(),e.YNc(49,ct,8,0,"div",6),e.qZA(),e.TgZ(50,"div",8)(51,"button",9),e.YNc(52,ut,1,1,"fa-icon",10),e.YNc(53,_t,1,1,"fa-icon",11),e._uU(54),e.qZA()()()),2&n&&(e.Q6J("formGroup",t.casdtForm),e.xp6(2),e.Q6J("ngClass",e.VKq(26,m,void 0!==t.modals.I&&!t.modals.I)),e.xp6(4),e.Q6J("icon",void 0===t.modals.I||t.modals.I?t.faChevronCircleUp:t.faChevronCircleDown),e.xp6(1),e.Q6J("ngIf",void 0===t.modals.I||t.modals.I),e.xp6(2),e.Q6J("ngClass",e.VKq(28,m,void 0!==t.modals.II&&!t.modals.II)),e.xp6(4),e.Q6J("icon",void 0===t.modals.II||t.modals.II?t.faChevronCircleUp:t.faChevronCircleDown),e.xp6(1),e.Q6J("ngIf",void 0===t.modals.II||t.modals.II),e.xp6(2),e.Q6J("ngClass",e.VKq(30,m,void 0!==t.modals.III&&!t.modals.III)),e.xp6(4),e.Q6J("icon",void 0===t.modals.III||t.modals.III?t.faChevronCircleUp:t.faChevronCircleDown),e.xp6(1),e.Q6J("ngIf",void 0===t.modals.III||t.modals.III),e.xp6(2),e.Q6J("ngClass",e.VKq(32,m,void 0!==t.modals.IV&&!t.modals.IV)),e.xp6(4),e.Q6J("icon",void 0===t.modals.IV||t.modals.IV?t.faChevronCircleUp:t.faChevronCircleDown),e.xp6(1),e.Q6J("ngIf",void 0===t.modals.IV||t.modals.IV),e.xp6(2),e.Q6J("ngClass",e.VKq(34,m,void 0!==t.modals.V&&!t.modals.V)),e.xp6(4),e.Q6J("icon",void 0===t.modals.V||t.modals.V?t.faChevronCircleUp:t.faChevronCircleDown),e.xp6(1),e.Q6J("ngIf",void 0===t.modals.V||t.modals.V),e.xp6(2),e.Q6J("ngClass",e.VKq(36,m,void 0!==t.modals.VI&&!t.modals.VI)),e.xp6(4),e.Q6J("icon",void 0===t.modals.VI||t.modals.VI?t.faChevronCircleUp:t.faChevronCircleDown),e.xp6(1),e.Q6J("ngIf",void 0===t.modals.VI||t.modals.VI),e.xp6(2),e.Q6J("ngClass",e.VKq(38,m,void 0!==t.modals.VII&&!t.modals.VII)),e.xp6(4),e.Q6J("icon",void 0===t.modals.VII||t.modals.VII?t.faChevronCircleUp:t.faChevronCircleDown),e.xp6(1),e.Q6J("ngIf",void 0===t.modals.VII||t.modals.VII),e.xp6(2),e.Q6J("disabled",t.is_saving),e.xp6(1),e.Q6J("ngIf",!t.is_saving),e.xp6(1),e.Q6J("ngIf",t.is_saving),e.xp6(1),e.hij(" ",t.is_saving?"Saving":"Save"," "))},dependencies:[a.mk,a.sg,a.O5,p.BN,o._Y,o.YN,o.Kr,o.Fj,o.wV,o.EJ,o.JJ,o.JL,o.sg,o.u]});const pt=new o.cw({consult_ncd_risk_id:new o.NI(""),patient_ncd_id:new o.NI(""),patient_id:new o.NI(""),date_taken:new o.NI(""),fbs:new o.NI(""),rbs:new o.NI(""),raised_blood_glucose:new o.NI("")}),mt=new o.cw({consult_ncd_risk_id:new o.NI(""),patient_ncd_id:new o.NI(""),patient_id:new o.NI(""),date_taken:new o.NI(""),total_cholesterol:new o.NI(""),raised_blood_lipid:new o.NI("")}),gt=new o.cw({consult_ncd_risk_id:new o.NI(""),patient_ncd_id:new o.NI(""),patient_id:new o.NI(""),date_taken:new o.NI(""),ketone:new o.NI(""),presence_of_urine_ketone:new o.NI("")}),ft=new o.cw({consult_ncd_risk_id:new o.NI(""),patient_ncd_id:new o.NI(""),patient_id:new o.NI(""),date_taken:new o.NI(""),protein:new o.NI(""),presence_of_urine_protein:new o.NI("")});function ht(i,n){1&i&&(e.TgZ(0,"div")(1,"li"),e._uU(2,"FBS >= 126 mg/dl"),e.qZA(),e.TgZ(3,"li"),e._uU(4,"RBS >= 200 mg/dl"),e.qZA()())}function bt(i,n){1&i&&(e.TgZ(0,"div")(1,"li"),e._uU(2,"FBS < 126 mg/dl"),e.qZA(),e.TgZ(3,"li"),e._uU(4,"RBS < 200 mg/dl"),e.qZA()())}const C=function(i){return{"bg-red-200 border border-red-300":i}};function vt(i,n){if(1&i&&(e.TgZ(0,"div",22)(1,"h4",5),e._uU(2),e.qZA(),e.TgZ(3,"ul",23),e.YNc(4,ht,5,0,"div",24),e.YNc(5,bt,5,0,"div",24),e.qZA(),e._UZ(6,"input",25),e.qZA()),2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(4,C,!0===t.glucoseForm.value.raised_blood_glucose)),e.xp6(2),e.Oqu(!0===t.glucoseForm.value.raised_blood_glucose?"Raised blood glucose":"Normal blood glucose"),e.xp6(2),e.Q6J("ngIf",!0===t.glucoseForm.value.raised_blood_glucose),e.xp6(1),e.Q6J("ngIf",!1===t.glucoseForm.value.raised_blood_glucose)}}function Zt(i,n){if(1&i&&e._UZ(0,"fa-icon",26),2&i){const t=e.oxw();e.Q6J("icon",t.faSpinner)}}function xt(i,n){if(1&i&&e._UZ(0,"fa-icon",27),2&i){const t=e.oxw();e.Q6J("icon",t.faSave)}}function qt(i,n){1&i&&(e.TgZ(0,"div")(1,"li"),e._uU(2,"Cholesterol >= 200mg/100ml"),e.qZA()())}function Tt(i,n){1&i&&(e.TgZ(0,"div")(1,"li"),e._uU(2,"Cholesterol < 200mg/100ml"),e.qZA()())}function yt(i,n){if(1&i&&(e.TgZ(0,"div",22)(1,"h4",5),e._uU(2),e.qZA(),e.TgZ(3,"ul",23),e.YNc(4,qt,3,0,"div",24),e.YNc(5,Tt,3,0,"div",24),e.qZA(),e._UZ(6,"input",28),e.qZA()),2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(4,C,!0===t.bloodLipidForm.value.raised_blood_lipid)),e.xp6(2),e.Oqu(!0===t.bloodLipidForm.value.raised_blood_lipid?"Raised blood lipids":"Normal blood lipids"),e.xp6(2),e.Q6J("ngIf",!0===t.bloodLipidForm.value.raised_blood_lipid),e.xp6(1),e.Q6J("ngIf",!1===t.bloodLipidForm.value.raised_blood_lipid)}}function At(i,n){if(1&i&&e._UZ(0,"fa-icon",26),2&i){const t=e.oxw();e.Q6J("icon",t.faSpinner)}}function wt(i,n){if(1&i&&e._UZ(0,"fa-icon",27),2&i){const t=e.oxw();e.Q6J("icon",t.faSave)}}function kt(i,n){if(1&i&&(e.TgZ(0,"option",29),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.desc)}}function Nt(i,n){if(1&i&&(e.TgZ(0,"div",22)(1,"h4",5),e._uU(2),e.qZA(),e._UZ(3,"input",30),e.qZA()),2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(2,C,!0===t.urineKetonesForm.value.presence_of_urine_ketone)),e.xp6(2),e.Oqu(!0===t.urineKetonesForm.value.presence_of_urine_ketone?"Traces or amount of urine ketone was found":"No traces or amount of urine ketone was found")}}function Ct(i,n){if(1&i&&e._UZ(0,"fa-icon",26),2&i){const t=e.oxw();e.Q6J("icon",t.faSpinner)}}function It(i,n){if(1&i&&e._UZ(0,"fa-icon",27),2&i){const t=e.oxw();e.Q6J("icon",t.faSave)}}function Ut(i,n){if(1&i&&(e.TgZ(0,"option",29),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.desc)}}function Ft(i,n){if(1&i&&(e.TgZ(0,"div",22)(1,"h4",5),e._uU(2),e.qZA(),e._UZ(3,"input",31),e.qZA()),2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(2,C,!0===t.urineProteinForm.value.presence_of_urine_protein)),e.xp6(2),e.Oqu(!0===t.urineProteinForm.value.presence_of_urine_protein?"Traces or amount of urine protein was found":"No traces or amount of urine protein was found")}}function Jt(i,n){if(1&i&&e._UZ(0,"fa-icon",26),2&i){const t=e.oxw();e.Q6J("icon",t.faSpinner)}}function Qt(i,n){if(1&i&&e._UZ(0,"fa-icon",27),2&i){const t=e.oxw();e.Q6J("icon",t.faSave)}}class T{loadLibraries(){this.http.get("libraries/ncd-risk-screening-urine-ketones").subscribe({next:n=>this.ketones_list=n.data,error:n=>console.log(n)}),this.http.get("libraries/ncd-risk-screening-urine-protein").subscribe({next:n=>this.protein_list=n.data,error:n=>console.log(n)})}loadScreenings(){this.consult_details&&(this.consult_details.riskScreeningGlucose&&(this.consult_details.riskScreeningGlucose.date_taken=(0,a.p6)(this.consult_details.riskScreeningGlucose.date_taken,"yyyy-MM-dd","en"),this.glucoseForm.patchValue({...this.consult_details.riskScreeningGlucose}),this.glucoseForm.addControl("id",this.formBuilder.control(this.consult_details.riskScreeningGlucose.id)),this.raisedGlucose()),this.consult_details.riskScreeningLipid&&(this.consult_details.riskScreeningLipid.date_taken=(0,a.p6)(this.consult_details.riskScreeningLipid.date_taken,"yyyy-MM-dd","en"),this.bloodLipidForm.patchValue({...this.consult_details.riskScreeningLipid}),this.bloodLipidForm.addControl("id",this.formBuilder.control(this.consult_details.riskScreeningLipid.id)),this.raisedLipids()),this.consult_details.riskScreeningKetones&&(this.consult_details.riskScreeningKetones.date_taken=(0,a.p6)(this.consult_details.riskScreeningKetones.date_taken,"yyyy-MM-dd","en"),this.urineKetonesForm.patchValue({...this.consult_details.riskScreeningKetones}),this.urineKetonesForm.addControl("id",this.formBuilder.control(this.consult_details.riskScreeningKetones.id)),this.urineKetone()),this.consult_details.riskScreeningProtein&&(this.consult_details.riskScreeningProtein.date_taken=(0,a.p6)(this.consult_details.riskScreeningProtein.date_taken,"yyyy-MM-dd","en"),this.urineProteinForm.patchValue({...this.consult_details.riskScreeningProtein}),this.urineProteinForm.addControl("id",this.formBuilder.control(this.consult_details.riskScreeningProtein.id)),this.urineProtein()))}raisedGlucose(){(this.glucoseForm.value.fbs>0||this.glucoseForm.value.rbs>0)&&this.glucoseForm.patchValue(this.glucoseForm.value.fbs>=126||this.glucoseForm.value.rbs>=200?{raised_blood_glucose:!0}:{raised_blood_glucose:!1})}raisedLipids(){this.bloodLipidForm.value.total_cholesterol>0&&this.bloodLipidForm.patchValue(this.bloodLipidForm.value.total_cholesterol>=5.1?{raised_blood_lipid:!0}:{raised_blood_lipid:!1})}urineKetone(){console.log(this.urineKetonesForm.value.ketone),this.urineKetonesForm.value.ketone&&this.urineKetonesForm.patchValue("1"!==this.urineKetonesForm.value.ketone?{presence_of_urine_ketone:!0}:{presence_of_urine_ketone:!1})}urineProtein(){this.urineProteinForm.value.protein&&this.urineProteinForm.patchValue("1"!=this.urineProteinForm.value.protein?{presence_of_urine_protein:!0}:{presence_of_urine_protein:!1})}onSubmit(n,t){if(this.is_saving[n]=!0,this[n+"Form"].valid){let s=this.getURL(n);this.http.post(s,this[n+"Form"].value).subscribe({next:r=>{this.is_saving[n]=!1,this.toastr.success("Recorded successfully!","Risk screening")},error:r=>console.log(r)})}}getURL(n){switch(n){case"glucose":return this.urls[0].url;case"bloodLipid":return this.urls[1].url;case"urineKetones":return this.urls[2].url;case"urineProtein":return this.urls[3].url}}constructor(n,t,s){this.http=n,this.formBuilder=t,this.toastr=s,this.faInfoCircle=d.sqG,this.faSave=k.r6l,this.faSpinner=d.LM3,this.is_saving={glucose:!1,bloodLipid:!1,urineKetones:!1,urineProtein:!1},this.glucoseForm=pt,this.bloodLipidForm=mt,this.urineKetonesForm=gt,this.urineProteinForm=ft,this.urls=[{group:"glucoseForm",url:"non-communicable-disease/risk-screening-blood-glucose"},{group:"bloodLipidForm",url:"non-communicable-disease/risk-screening-blood-lipid"},{group:"urineKetonesForm",url:"non-communicable-disease/risk-screening-urine-ketones"},{group:"urineProteinForm",url:"non-communicable-disease/risk-screening-urine-protein"}]}createForm(){let n=this.consult_details.id,t=this.consult_details.patient_ncd_id;this.glucoseForm=this.formBuilder.nonNullable.group({consult_ncd_risk_id:[n,o.kI.required],patient_ncd_id:[t,o.kI.required],patient_id:[this.patient_id],date_taken:[null,o.kI.required],fbs:[null],rbs:[null],raised_blood_glucose:[null,o.kI.required]}),this.bloodLipidForm=this.formBuilder.nonNullable.group({consult_ncd_risk_id:[n,o.kI.required],patient_ncd_id:[t,o.kI.required],patient_id:[this.patient_id],date_taken:[null,o.kI.required],total_cholesterol:[null,o.kI.required],raised_blood_lipid:[null,o.kI.required]}),this.urineKetonesForm=this.formBuilder.nonNullable.group({consult_ncd_risk_id:[n,o.kI.required],patient_ncd_id:[t,o.kI.required],patient_id:[this.patient_id],date_taken:[null,o.kI.required],ketone:[null,o.kI.required],presence_of_urine_ketone:[null,o.kI.required]}),this.urineProteinForm=this.formBuilder.nonNullable.group({consult_ncd_risk_id:[n,o.kI.required],patient_ncd_id:[t,o.kI.required],patient_id:[this.patient_id],date_taken:[null,o.kI.required],protein:[null,o.kI.required],presence_of_urine_protein:[null,o.kI.required]})}ngOnInit(){this.loadLibraries()}ngOnChanges(n){this.consult_details&&this.consult_details.assessment_date&&(this.createForm(),this.loadScreenings())}}function St(i,n){if(1&i&&(e.TgZ(0,"div",27),e._UZ(1,"input",28),e.TgZ(2,"span",29),e._uU(3),e.qZA()()),2&i){const t=n.$implicit;e.xp6(3),e.hij(" ",t.desc,"")}}function Ot(i,n){if(1&i&&(e.TgZ(0,"option",30),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.hij(" ",t.desc," ")}}function Rt(i,n){if(1&i&&(e.TgZ(0,"option",31),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("selected","None"==t.desc),e.xp6(1),e.hij(" ",t.desc," ")}}function Yt(i,n){if(1&i&&(e.TgZ(0,"option",31),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("selected","None"==t.desc),e.xp6(1),e.hij(" ",t.desc," ")}}function Vt(i,n){if(1&i&&(e.TgZ(0,"option",31),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("selected","None"==t.desc),e.xp6(1),e.hij(" ",t.desc," ")}}function Mt(i,n){if(1&i&&(e.TgZ(0,"option",31),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("selected","None"==t.desc),e.xp6(1),e.hij(" ",t.desc," ")}}function Pt(i,n){if(1&i&&(e.TgZ(0,"option",32),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.hij(" ",t.desc," ")}}T.\u0275fac=function(n){return new(n||T)(e.Y36(g.O),e.Y36(o.qu),e.Y36(N._W))},T.\u0275cmp=e.Xpm({type:T,selectors:[["app-risk-screening"]],inputs:{patient_id:"patient_id",consult_details:"consult_details"},features:[e.TTD],decls:82,vars:26,consts:[[1,"grid","grid-cols-12","item-start","flex-wrap","shadow-md","rounded-xl","mb-8","mt-8","overflow-y-auto"],[1,"col-span-12","row-start-1","flex","bg-blue-500","px-5","py-3","rounded-tl","rounded-tr"],[1,"font-bold","text-white","text-md","mt-2","mb-2"],[1,"col-span-12","grid","grid-cols-12","gap-x-5","px-5",3,"formGroup","ngSubmit"],[1,"text-sm","col-span-4","mt-4","mb-4"],[1,"mb-2"],["name","date_taken","formControlName","date_taken","type","date","placeholder","mm/dd/yyyy",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full"],["name","fbs","formControlName","fbs","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","w-full",3,"input"],["name","rbs","formControlName","rbs","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","w-full",3,"input"],["class","text-sm col-span-12 mb-6 p-3 rounded-lg",3,"ngClass",4,"ngIf"],[1,"col-span-12","flex","justify-end","border-t","border-slate-200","pt-5"],["type","submit",1,"btn-save","px-10","mr-5","mb-5","disabled:bg-gray-400",3,"disabled"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],[1,"col-span-12","flex","bg-blue-500","px-5","py-3","rounded-tl","rounded-tr"],[1,"relative","text-sm","col-span-6","mt-4","mb-4"],[1,"text-sm","col-span-6","mt-4","mb-4"],["name","total_cholesterol","formControlName","total_cholesterol","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","w-full",3,"input"],["name","ketone","formControlName","ketone",1,"text-sm","border","border-gray-200","p-2.5","rounded","w-full",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"grid","grid-cols-12","item-start","flex-wrap","shadow-md","rounded-xl","mb-4","mt-8","overflow-y-auto"],["name","protein","formControlName","protein",1,"text-sm","border","border-gray-200","p-2.5","rounded","w-full",3,"change"],[1,"text-sm","col-span-12","mb-6","p-3","rounded-lg",3,"ngClass"],[1,"list-disc","pl-10"],[4,"ngIf"],["hidden","","name","raised_blood_glucose","formControlName","raised_blood_glucose","type","text","disabled","",1,"text-sm","border","border-gray-200","p-2.5","rounded","w-full","disabled:bg-gray-300"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"],["hidden","","name","raised_blood_lipid","formControlName","raised_blood_lipid","type","text","disabled","",1,"text-sm","border","border-gray-200","p-2.5","rounded","w-full","disabled:bg-gray-300"],[3,"value"],["hidden","","name","presence_of_urine_ketone","formControlName","presence_of_urine_ketone","type","text","disabled","",1,"text-sm","border","border-gray-200","p-2.5","rounded","w-full","disabled:bg-gray-300"],["hidden","","name","presence_of_urine_protein","formControlName","presence_of_urine_protein","type","text","disabled","",1,"text-sm","border","border-gray-200","p-2.5","rounded","w-full","disabled:bg-gray-300"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),e._uU(3,"Blood Glucose Test"),e.qZA()(),e.TgZ(4,"form",3),e.NdJ("ngSubmit",function(){return t.onSubmit("glucose",t.glucoseForm.value)}),e.TgZ(5,"div",4)(6,"h4",5),e._uU(7,"Date Taken"),e.qZA(),e._UZ(8,"input",6),e.qZA(),e.TgZ(9,"div",4)(10,"h4",5),e._uU(11,"If atleast 8 hours, record FBS (mg/dl)"),e.qZA(),e.TgZ(12,"input",7),e.NdJ("input",function(){return t.raisedGlucose()}),e.qZA()(),e.TgZ(13,"div",4)(14,"h4",5),e._uU(15,"Record RBS (mg/dl)"),e.qZA(),e.TgZ(16,"input",8),e.NdJ("input",function(){return t.raisedGlucose()}),e.qZA()(),e.YNc(17,vt,7,6,"div",9),e.TgZ(18,"div",10)(19,"button",11),e.YNc(20,Zt,1,1,"fa-icon",12),e.YNc(21,xt,1,1,"fa-icon",13),e._uU(22),e.qZA()()()(),e.TgZ(23,"div",0)(24,"div",14)(25,"h4",2),e._uU(26,"Blood Lipid Test"),e.qZA()(),e.TgZ(27,"form",3),e.NdJ("ngSubmit",function(){return t.onSubmit("bloodLipid",t.bloodLipidForm.value)}),e.TgZ(28,"div",15)(29,"h4",5),e._uU(30,"Date Taken"),e.qZA(),e._UZ(31,"input",6),e.qZA(),e.TgZ(32,"div",16)(33,"h4",5),e._uU(34,"Total Cholesterol (mmol/l)"),e.qZA(),e.TgZ(35,"input",17),e.NdJ("input",function(){return t.raisedLipids()}),e.qZA()(),e.YNc(36,yt,7,6,"div",9),e.TgZ(37,"div",10)(38,"button",11),e.YNc(39,At,1,1,"fa-icon",12),e.YNc(40,wt,1,1,"fa-icon",13),e._uU(41),e.qZA()()()(),e.TgZ(42,"div",0)(43,"div",14)(44,"h4",2),e._uU(45,"Urine Test for Ketones"),e.qZA()(),e.TgZ(46,"form",3),e.NdJ("ngSubmit",function(){return t.onSubmit("urineKetones",t.urineKetonesForm.value)}),e.TgZ(47,"div",15)(48,"h4",5),e._uU(49,"Date Taken"),e.qZA(),e._UZ(50,"input",6),e.qZA(),e.TgZ(51,"div",16)(52,"h4",5),e._uU(53,"Urine Ketone"),e.qZA(),e.TgZ(54,"select",18),e.NdJ("change",function(){return t.urineKetone()}),e.YNc(55,kt,2,2,"option",19),e.qZA()(),e.YNc(56,Nt,4,4,"div",9),e.TgZ(57,"div",10)(58,"button",11),e.YNc(59,Ct,1,1,"fa-icon",12),e.YNc(60,It,1,1,"fa-icon",13),e._uU(61),e.qZA()()()(),e.TgZ(62,"div",20)(63,"div",14)(64,"h4",2),e._uU(65,"Urine Test for Protein"),e.qZA()(),e.TgZ(66,"form",3),e.NdJ("ngSubmit",function(){return t.onSubmit("urineProtein",t.urineProteinForm.value)}),e.TgZ(67,"div",15)(68,"h4",5),e._uU(69,"Date Taken"),e.qZA(),e._UZ(70,"input",6),e.qZA(),e.TgZ(71,"div",16)(72,"h4",5),e._uU(73,"Urine Protein"),e.qZA(),e.TgZ(74,"select",21),e.NdJ("change",function(){return t.urineProtein()}),e.YNc(75,Ut,2,2,"option",19),e.qZA()(),e.YNc(76,Ft,4,4,"div",9),e.TgZ(77,"div",10)(78,"button",11),e.YNc(79,Jt,1,1,"fa-icon",12),e.YNc(80,Qt,1,1,"fa-icon",13),e._uU(81),e.qZA()()()()),2&n&&(e.xp6(4),e.Q6J("formGroup",t.glucoseForm),e.xp6(13),e.Q6J("ngIf",t.glucoseForm.value.raised_blood_glucose),e.xp6(2),e.Q6J("disabled",t.glucoseForm.invalid||!t.glucoseForm.value.rbs&&!t.glucoseForm.value.fbs||t.is_saving.glucose),e.xp6(1),e.Q6J("ngIf",t.is_saving.glucose),e.xp6(1),e.Q6J("ngIf",!t.is_saving.glucose),e.xp6(1),e.hij(" ",t.is_saving.glucose?"Saving":t.glucoseForm.value.id?"Update":"Save"," "),e.xp6(5),e.Q6J("formGroup",t.bloodLipidForm),e.xp6(9),e.Q6J("ngIf",t.bloodLipidForm.value.raised_blood_lipid),e.xp6(2),e.Q6J("disabled",t.bloodLipidForm.invalid||t.is_saving.bloodLipid),e.xp6(1),e.Q6J("ngIf",t.is_saving.bloodLipid),e.xp6(1),e.Q6J("ngIf",!t.is_saving.bloodLipid),e.xp6(1),e.hij(" ",t.is_saving.bloodLipid?"Saving":t.bloodLipidForm.value.id?"Update":"Save"," "),e.xp6(5),e.Q6J("formGroup",t.urineKetonesForm),e.xp6(9),e.Q6J("ngForOf",t.ketones_list),e.xp6(1),e.Q6J("ngIf",t.urineKetonesForm.value.presence_of_urine_ketone),e.xp6(2),e.Q6J("disabled",t.urineKetonesForm.invalid||t.is_saving.urineKetones),e.xp6(1),e.Q6J("ngIf",t.is_saving.urineKetones),e.xp6(1),e.Q6J("ngIf",!t.is_saving.urineKetones),e.xp6(1),e.hij(" ",t.is_saving.urineKetones?"Saving":t.urineKetonesForm.value.id?"Update":"Save"," "),e.xp6(5),e.Q6J("formGroup",t.urineProteinForm),e.xp6(9),e.Q6J("ngForOf",t.protein_list),e.xp6(1),e.Q6J("ngIf",t.urineProteinForm.value.presence_of_urine_protein),e.xp6(2),e.Q6J("disabled",t.urineProteinForm.invalid||t.is_saving.urineProtein),e.xp6(1),e.Q6J("ngIf",t.is_saving.urineProtein),e.xp6(1),e.Q6J("ngIf",!t.is_saving.urineProtein),e.xp6(1),e.hij(" ",t.is_saving.urineProtein?"Saving":t.urineProteinForm.value.id?"Update":"Save"," "))},dependencies:[a.mk,a.sg,a.O5,p.BN,o._Y,o.YN,o.Kr,o.Fj,o.wV,o.EJ,o.JJ,o.JL,o.sg,o.u]});class y{constructor(){this.faInfoCircle=d.sqG,this.eye=[{code:"blurred",desc:"Blurred (Malabo, maulap o mausok)"},{code:"floaters",desc:"Floaters (May lumulutang)"},{code:"tearing",desc:"Tearing (Pagluluha)"},{code:"pain",desc:"Pain (Mahapdi, masakit o mabigat sa pakiramdam)"},{code:"redness",desc:"Redness (Namumula)"},{code:"glare",desc:"Glare (Nasisilaw)"},{code:"discharge",desc:"Discharge (May muta)"},{code:"photopsia",desc:"Photopsia (May kumikislap)"},{code:"itchiness",desc:"Itchiness (Makati)"}],this.opthal=[{code:"a",desc:"Eye Injury"},{code:"b",desc:"Foreign Body"}],this.vision_eye=[{code:"right",desc:"Right Eye"},{code:"left",desc:"Left Eye"},{code:"both",desc:"Both Eye"},{code:"none",desc:"None"}],this.refer=[{code:"improve",desc:"If VA is 20/40 to 20/100 but IMPROVES WITH PINHOLE: Refer to OPTOMETRIST"},{code:"not",desc:"If VA is 20/40 to 20/100 but DOES NOT IMPROVE WITH PINHOLE: Refer to OPHTHALMOLOGIST"},{code:"worse",desc:"If VA is 20/200 or worse: Refer to OPHTHALMOLOGIST"}]}ngOnInit(){}}function Kt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.toggleModal())}),e._UZ(1,"fa-icon",9),e._uU(2," End Visit "),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("icon",t.faDoorClosed)}}function Lt(i,n){if(1&i&&(e.TgZ(0,"div",6),e.YNc(1,Kt,3,1,"button",7),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!(null!=t.consult_details&&t.consult_details.consult_done))}}function Dt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",2),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.switchTab(2))}),e._uU(1," RISK SCREENING "),e.qZA()}if(2&i){const t=e.oxw(2);e.Tol(2===t.module?"text-blue-500 border-b-2 border-blue-500 font-bold":"hover:-translate-y-1 hover:scale-110 transition ease-in-out delay-400 duration-300")}}function jt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",2),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.switchTab(3))}),e._uU(1," QUESTIONNAIRE "),e.qZA()}if(2&i){const t=e.oxw(2);e.Tol(3===t.module?"text-blue-500 border-b-2 border-blue-500 font-bold":"hover:-translate-y-1 hover:scale-110 transition ease-in-out delay-400 duration-300")}}function Gt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",2),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.switchTab(4))}),e._uU(1," RISK STRATIFICATION "),e.qZA()}if(2&i){const t=e.oxw(2);e.Tol(4===t.module?"text-blue-500 border-b-2 border-blue-500 font-bold":"hover:-translate-y-1 hover:scale-110 transition ease-in-out delay-400 duration-300")}}function Ht(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",2),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.switchTab(5))}),e._uU(1," PATIENT RECORD "),e.qZA()}if(2&i){const t=e.oxw(2);e.Tol(5===t.module?"text-blue-500 border-b-2 border-blue-500 font-bold":"hover:-translate-y-1 hover:scale-110 transition ease-in-out delay-400 duration-300")}}function Et(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-risk-assessment",17),e.NdJ("loadRisk",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.loadRisk())}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("patient_info",t.patient_info)("consult_details",t.consult_details)("vitals",t.vitals)}}function $t(i,n){if(1&i&&e._UZ(0,"app-risk-screening",18),2&i){const t=e.oxw(2);e.Q6J("patient_id",t.patient_id)("consult_details",t.consult_details)}}function Bt(i,n){if(1&i&&e._UZ(0,"app-questionnaire",19),2&i){const t=e.oxw(2);e.Q6J("consult_details",t.consult_details)}}function Xt(i,n){if(1&i&&e._UZ(0,"app-risk-stratification",18),2&i){const t=e.oxw(2);e.Q6J("patient_id",t.patient_id)("consult_details",t.consult_details)}}function zt(i,n){if(1&i&&e._UZ(0,"app-patient-record",18),2&i){const t=e.oxw(2);e.Q6J("patient_id",t.patient_id)("consult_details",t.consult_details)}}function Wt(i,n){if(1&i&&e._UZ(0,"app-casdt",18),2&i){const t=e.oxw(2);e.Q6J("patient_id",t.patient_id)("consult_details",t.consult_details)}}function ei(i,n){if(1&i&&e._UZ(0,"app-casdt2",18),2&i){const t=e.oxw(2);e.Q6J("patient_id",t.patient_id)("consult_details",t.consult_details)}}function ti(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e._UZ(1,"div",10),e.TgZ(2,"nav",11)(3,"button",2),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.switchTab(1))}),e._uU(4," RISK ASSESSMENT "),e.qZA(),e.YNc(5,Dt,2,2,"button",12),e.YNc(6,jt,2,2,"button",12),e.YNc(7,Gt,2,2,"button",12),e.YNc(8,Ht,2,2,"button",12),e.qZA(),e.TgZ(9,"div",13),e.YNc(10,Et,1,3,"app-risk-assessment",14),e.YNc(11,$t,1,2,"app-risk-screening",15),e.YNc(12,Bt,1,1,"app-questionnaire",16),e.YNc(13,Xt,1,2,"app-risk-stratification",15),e.YNc(14,zt,1,2,"app-patient-record",15),e.YNc(15,Wt,1,2,"app-casdt",15),e.YNc(16,ei,1,2,"app-casdt2",15),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.Tol(1===t.module?"text-blue-500 border-b-2 border-blue-500 font-bold":"hover:-translate-y-1 hover:scale-110 transition ease-in-out delay-400 duration-300"),e.xp6(2),e.Q6J("ngIf",null==t.consult_details?null:t.consult_details.assessment_date),e.xp6(1),e.Q6J("ngIf",null==t.consult_details?null:t.consult_details.assessment_date),e.xp6(1),e.Q6J("ngIf",null==t.consult_details?null:t.consult_details.assessment_date),e.xp6(1),e.Q6J("ngIf",null==t.consult_details?null:t.consult_details.assessment_date),e.xp6(2),e.Q6J("ngIf",1===t.module),e.xp6(1),e.Q6J("ngIf",2===t.module),e.xp6(1),e.Q6J("ngIf",3===t.module),e.xp6(1),e.Q6J("ngIf",4===t.module),e.xp6(1),e.Q6J("ngIf",5===t.module),e.xp6(1),e.Q6J("ngIf",6===t.module),e.xp6(1),e.Q6J("ngIf",7===t.module)}}function ii(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"tr",27)(1,"td",28),e._uU(2),e.ALo(3,"date"),e.ALo(4,"date"),e.qZA(),e._UZ(5,"td",29),e.TgZ(6,"td",29),e._uU(7),e.qZA(),e.TgZ(8,"td",29)(9,"button",30),e.NdJ("click",function(){const c=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.openNCD(c))}),e._uU(10),e.qZA()()()}if(2&i){const t=n.$implicit;e.xp6(2),e.hij(" ",t.assessment_date?e.xi3(3,3,t.assessment_date,"MM/dd/yyyy"):e.xi3(4,6,t.consult_date,"MM/dd/yyyy")," "),e.xp6(5),e.hij(" ",t.location?1===t.location?"Community":"Facility":"-"," "),e.xp6(3),e.hij(" ",t.consult_done?"View":"Open"," ")}}function ni(i,n){if(1&i&&(e.TgZ(0,"tbody"),e.YNc(1,ii,11,9,"tr",26),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.ncd_list)("ngForTrackBy",t.identify)}}function oi(i,n){if(1&i&&(e.TgZ(0,"div")(1,"div",20)(2,"div",21),e._uU(3," NCD Visits "),e.qZA(),e.TgZ(4,"div",22)(5,"table",23)(6,"thead",24)(7,"tr")(8,"th",25),e._uU(9,"Assessment Date"),e.qZA(),e.TgZ(10,"th",25),e._uU(11,"Risk Stratification"),e.qZA(),e.TgZ(12,"th",25),e._uU(13,"Location"),e.qZA(),e.TgZ(14,"th",25),e._uU(15,"Actions"),e.qZA()()(),e.YNc(16,ni,2,2,"tbody",4),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(16),e.Q6J("ngIf",t.ncd_list)}}function si(i,n){if(1&i&&e._UZ(0,"app-end-visit",31),2&i){const t=e.oxw();e.Q6J("consult_id",t.consult_id)("patient_id",t.consult_details.patient_id)("consult_date",t.consult_details.consult_date)("pt_group","ncd")}}y.\u0275fac=function(n){return new(n||y)},y.\u0275cmp=e.Xpm({type:y,selectors:[["app-casdt2"]],decls:60,vars:9,consts:[[1,"grid","grid-cols-12","flex","item-start","flex-wrap","shadow-md","rounded-xl","mb-8","mt-8","overflow-y-auto"],[1,"col-span-12","flex","bg-blue-500","px-5","py-3","rounded-tl","rounded-tr"],[1,"font-bold","text-white","text-md","mt-2","mb-2"],[1,""],[1,"peer","text-white","hover:text-white","z-50","px-2",3,"icon"],[1,"absolute","text-sm","bg-gradient-to-b","from-stone-500","to-gray-400","p-2","rounded","border","border-gray-500","text-white","drop-shadow-lg","opacity-90","border-check","z-50","w-60","invisible","peer-hover:visible"],[1,"font-bold","drop-shadow-lg"],[1,"font-light","drop-shadow-lg"],[1,"col-start-1","col-span-12","px-5","mt-4","mb-6"],[1,"font-bold"],["class","text-sm col-span-4 w-full px-5 mb-6",4,"ngFor","ngForOf"],[1,"text-sm","col-start-1","col-span-12","w-full","px-5","mt-2","mb-6"],[1,"mb-2","font-semibold"],["name","family_hx_hypertension",1,"text-sm","bg-white","border","border-gray-200","p-2.5","rounded","w-full"],["ng-value","vision.desc",4,"ngFor","ngForOf"],[1,"col-start-1","col-span-12","row-start-1","border-b-2","border-gray-300","mt-2","mb-2"],[1,"grid","grid-cols-12","flex","item-start","flex-wrap","shadow-md","rounded-xl","mb-8","mt-8"],[1,"col-span-12","row-start-1","flex","bg-blue-500","px-5","py-3","rounded-tl","rounded-tr"],[1,"col-start-1","col-span-12","row-start-2","px-5","mt-4","mb-4"],[1,"text-sm","col-start-1","col-span-3","w-full","row-start-3","px-5","mt-2","mb-4"],[1,"mb-2"],["ng-value","vision.desc",3,"selected",4,"ngFor","ngForOf"],[1,"text-sm","col-start-4","col-span-3","w-full","row-start-3","px-5","mt-2","mb-4"],[1,"text-sm","col-start-7","col-span-3","w-full","row-start-3","px-5","mt-2","mb-4"],[1,"text-sm","col-start-10","col-span-3","w-full","row-start-3","px-5","mt-2","mb-4"],[1,"text-sm","col-start-1","col-span-12","w-full","row-start-4","px-5","mt-2","mb-6"],["ng-value","refers.desc",3,"selected",4,"ngFor","ngForOf"],[1,"text-sm","col-span-4","w-full","px-5","mb-6"],["type","checkbox",1,"form-checkbox","h-4","w-4","border-gray-400","text-blue-500","rounded-full"],[1,"ml-1","align-middle"],["ng-value","vision.desc"],["ng-value","vision.desc",3,"selected"],["ng-value","refers.desc",3,"selected"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),e._uU(3,"Eye Assessment"),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"fa-icon",4),e.TgZ(6,"div",5)(7,"h1",6),e._uU(8,"IMPORTANT"),e.qZA(),e.TgZ(9,"p",7),e._uU(10,"Once saved, the information will be displayed in the input boxes and shall not be editable unless Edit button is pressed."),e.qZA()()()(),e.TgZ(11,"div",8)(12,"h4",9),e._uU(13,"A. Eye Complaints (Check all applicable)"),e.qZA()(),e.YNc(14,St,4,1,"div",10),e.TgZ(15,"div",11)(16,"h1",12),e._uU(17,"Refer immediately to opthalmologist"),e.qZA(),e.TgZ(18,"select",13),e.YNc(19,Ot,2,1,"option",14),e.qZA()()(),e._UZ(20,"div",15),e.TgZ(21,"div",16)(22,"div",17)(23,"h4",2),e._uU(24,"Vision Assessment"),e.qZA(),e.TgZ(25,"div",3),e._UZ(26,"fa-icon",4),e.TgZ(27,"div",5)(28,"h1",6),e._uU(29,"IMPORTANT"),e.qZA(),e.TgZ(30,"p",7),e._uU(31,"Once saved, the information will be displayed in the input boxes and shall not be editable unless Edit button is pressed."),e.qZA()()()(),e.TgZ(32,"div",18)(33,"h4",9),e._uU(34,"B. Vision Screening"),e.qZA()(),e.TgZ(35,"div",19)(36,"h1",20),e._uU(37,"Unaided"),e.qZA(),e.TgZ(38,"select",13),e.YNc(39,Rt,2,2,"option",21),e.qZA()(),e.TgZ(40,"div",22)(41,"h1",20),e._uU(42,"Pinhole"),e.qZA(),e.TgZ(43,"select",13),e.YNc(44,Yt,2,2,"option",21),e.qZA()(),e.TgZ(45,"div",23)(46,"h1",20),e._uU(47,"Improved"),e.qZA(),e.TgZ(48,"select",13),e.YNc(49,Vt,2,2,"option",21),e.qZA()(),e.TgZ(50,"div",24)(51,"h1",20),e._uU(52,"Aided"),e.qZA(),e.TgZ(53,"select",13),e.YNc(54,Mt,2,2,"option",21),e.qZA()(),e.TgZ(55,"div",25)(56,"h1",20),e._uU(57,"Refer to eyecare professional"),e.qZA(),e.TgZ(58,"select",13),e.YNc(59,Pt,2,1,"option",26),e.qZA()()()),2&n&&(e.xp6(5),e.Q6J("icon",t.faInfoCircle),e.xp6(9),e.Q6J("ngForOf",t.eye),e.xp6(5),e.Q6J("ngForOf",t.opthal),e.xp6(7),e.Q6J("icon",t.faInfoCircle),e.xp6(13),e.Q6J("ngForOf",t.vision_eye),e.xp6(5),e.Q6J("ngForOf",t.vision_eye),e.xp6(5),e.Q6J("ngForOf",t.vision_eye),e.xp6(5),e.Q6J("ngForOf",t.vision_eye),e.xp6(5),e.Q6J("ngForOf",t.refer))},dependencies:[a.sg,p.BN,o.YN,o.Kr]});class A{constructor(n,t,s,r){this.route=n,this.http=t,this.router=s,this.patientInfo=r,this.show_end=!1,this.faDoorClosed=d.TH0,this.loadVitals=this.loadVitals.bind(this),F(r.reloadNCDVitals,this.loadVitals)}ngOnDestroy(){F(this.patientInfo.reloadNCDVitals,this.loadVitals,!0)}openNCD(n){this.router.navigate(["/patient/ncd",{id:n.patient_id??n.patient.id,consult_id:n.consult_id??n.id}]),this.consult_details=n,this.modules=2}toggleModal(){this.show_end=!this.show_end}loadNCD(n,t){let s={consult_id:n};this.http.get("non-communicable-disease/risk-assessment",{params:s}).subscribe({next:r=>{console.log(s),console.log(r.data),r.data.length>0?(r.data[0].consult_date=r.data[0].assessment_date,this.consult_details=r.data[0]):this.consult_details=this.consult_details_temp},error:r=>console.log(r)})}loadRisk(){this.http.get("non-communicable-disease/risk-assessment",{params:{patient_id:this.patient_id,sort:"-assessment_date"}}).subscribe({next:t=>{this.risk_list=t.data,this.risk_list&&this.fillConsult()},error:t=>console.log(t)})}loadConsult(){this.http.get("consultation/records",{params:{patient_id:this.patient_id,pt_group:"ncd",sort:"-consult_date"}}).subscribe({next:t=>{console.log(t),this.ncd_list=t.data,this.consult_details_temp=t.data[0],this.loadRisk()},error:t=>console.log(t)})}fillConsult(){Object.entries(this.ncd_list).forEach(([n,t],s)=>{let r=t,c=this.risk_list.find(l=>l.consult_id===r.id);c&&(this.ncd_list[s]=c,this.ncd_list[s].consult_done=r.consult_done),Object.keys(this.ncd_list).length-1===s&&this.loadNCD(this.consult_id)})}loadVitals(){console.log("reload please ncd"),this.http.get("patient-vitals/vitals",{params:{patient_id:this.patient_id,sort:"-vitals_date",per_page:15}}).subscribe({next:n=>{let t=n.data;if(t.length>0){let r=n.data[0].bp_diastolic;t[0].bp_systolic=n.data[0].bp_systolic,t[0].bp_diastolic=r,this.vitals=t}},error:n=>console.log(n)})}patientVitals(n){}ngOnChanges(n){}ngOnInit(){this.module=1,this.modules=1,this.patient_info=this.http.getPatientInfo(),console.log(this.patient_info),this.patient_id=this.route.snapshot.paramMap.get("id"),this.consult_id=this.route.snapshot.paramMap.get("consult_id"),this.loadConsult(),this.loadVitals()}switchTab(n){this.module=0,this.module=n}switchTabs(n){this.modules=0,this.modules=n}}A.\u0275fac=function(n){return new(n||A)(e.Y36(w.gz),e.Y36(g.O),e.Y36(w.F0),e.Y36(S.M))},A.\u0275cmp=e.Xpm({type:A,selectors:[["app-ncd"]],features:[e.TTD],decls:10,vars:8,consts:[[1,"flex"],[1,"flex","flex-row","whitespace-nowrap","text-sm","max-w-xl","mt-5"],[1,"text-gray-600","border-b-2","border-gray-200","block","hover:text-blue-500","hover:border-blue-500","mr-6","pb-2",3,"click"],["class","ml-auto",4,"ngIf"],[4,"ngIf"],[3,"consult_id","patient_id","consult_date","pt_group",4,"ngIf"],[1,"ml-auto"],["type","button","class","btn-end-visit ml-auto mt-5",3,"click",4,"ngIf"],["type","button",1,"btn-end-visit","ml-auto","mt-5",3,"click"],[1,"mr-1",3,"icon"],[1,"text-gray-600","border","border-slate-100","mt-5"],[1,"mt-4","flex","flex-row","whitespace-nowrap","sm:text-xs","md:text-xs","overflow-x-auto","no-scrollbar","lg:text-xs"],["class","text-gray-600 border-b-2 border-gray-200 block hover:text-blue-500 hover:border-blue-500 mr-6 pb-2",3,"class","click",4,"ngIf"],[1,"grid","grid-col-8"],[3,"patient_info","consult_details","vitals","loadRisk",4,"ngIf"],[3,"patient_id","consult_details",4,"ngIf"],[3,"consult_details",4,"ngIf"],[3,"patient_info","consult_details","vitals","loadRisk"],[3,"patient_id","consult_details"],[3,"consult_details"],[1,"border","border-slate-200","shadow-md","rounded-xl","mt-5"],[1,"w-full","bg-green-500","text-white","rounded-t-xl","p-3","font-semibold"],[1,"w-full","p-5"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"text-center","py-3","px-3","w-3/12"],["class","bg-white border-b last:border-0",4,"ngFor","ngForOf","ngForTrackBy"],[1,"bg-white","border-b","last:border-0"],[1,"py-4","px-3","text-center"],["scope","row",1,"py-4","px-3","font-medium","text-gray-900","text-center"],["type","button",1,"btn-save",3,"click"],[3,"consult_id","patient_id","consult_date","pt_group"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"nav",1)(2,"button",2),e.NdJ("click",function(){return t.switchTabs(1)}),e._uU(3," NCD HISTORY "),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return t.switchTabs(2)}),e._uU(5," NCD CONSULT "),e.qZA()(),e.YNc(6,Lt,2,1,"div",3),e.qZA(),e.YNc(7,ti,17,13,"div",4),e.YNc(8,oi,17,1,"div",4),e.YNc(9,si,1,4,"app-end-visit",5)),2&n&&(e.xp6(2),e.Tol(1===t.modules?"text-blue-500 border-b-2 border-blue-500 font-bold":"hover:-translate-y-1 hover:scale-110 transition ease-in-out delay-400 duration-300"),e.xp6(2),e.Tol(2===t.modules?"text-blue-500 border-b-2 border-blue-500 font-bold":"hover:-translate-y-1 hover:scale-110 transition ease-in-out delay-400 duration-300"),e.xp6(2),e.Q6J("ngIf",2===t.modules),e.xp6(1),e.Q6J("ngIf",2===t.modules),e.xp6(1),e.Q6J("ngIf",1===t.modules),e.xp6(1),e.Q6J("ngIf",t.ncd_list&&t.show_end))},dependencies:[a.sg,a.O5,p.BN,O.F,f,h,b,v,Z,T,y,a.uU],styles:[".what[_ngcontent-%COMP%]:active{color:#00f;text-decoration:underline}"]});const ri=[{path:"",component:A},{path:"risk-stratification",component:h},{path:"risk-assessment",component:f},{path:"questionnaire",component:b},{path:"patient-record",component:v},{path:"casdt",component:Z}];class x{}x.\u0275fac=function(n){return new(n||x)},x.\u0275mod=e.oAB({type:x}),x.\u0275inj=e.cJS({imports:[w.Bz.forChild(ri),w.Bz]});var li=u(9366);class q{}q.\u0275fac=function(n){return new(n||q)},q.\u0275mod=e.oAB({type:q}),q.\u0275inj=e.cJS({imports:[a.ez,p.uH,x,li.q,o.u5,o.UX]})}}]);