"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[8445],{8445:(re,y,d)=>{d.r(y),d.d(y,{FamilyplanningModule:()=>ae});var c=d(177),u=d(3895),r=d(5383),t=d(3953),m=d(3318),h=d(60),j=d(9206),F=d(9217),x=d(9596),s=d(9417),f=d(5794),b=d(3825);function M(i,l){if(1&i&&(t.j41(0,"option",28),t.EFF(1),t.k0s()),2&i){const e=l.$implicit;t.Y8G("value",e.code),t.R7$(),t.JRh(e.desc)}}function G(i,l){1&i&&t.nrm(0,"input",29)}function P(i,l){1&i&&t.nrm(0,"input",30)}function I(i,l){if(1&i){const e=t.RV6();t.j41(0,"div",31)(1,"input",32),t.bIt("change",function(n){t.eBV(e);const a=t.XpG(2);return t.Njj(a.isCheck(n))}),t.k0s(),t.j41(2,"label",33),t.EFF(3,"Create an appointment?"),t.k0s()()}if(2&i){const e=t.XpG(2);t.R7$(),t.Y8G("checked",e.isAccepted)}}function R(i,l){if(1&i){const e=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h3",6),t.EFF(5," Service Details "),t.k0s()(),t.j41(6,"form",7),t.bIt("submit",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.onSubmit())}),t.j41(7,"div",8)(8,"div",9)(9,"label",10),t.EFF(10,"Date of Service Given"),t.k0s(),t.nrm(11,"input",11),t.k0s(),t.j41(12,"div",12)(13,"label",13),t.EFF(14,"Source of Supply"),t.k0s(),t.j41(15,"select",14),t.DNE(16,M,2,2,"option",15),t.k0s()(),t.j41(17,"div",12)(18,"label",10),t.EFF(19,"Quantity if applicable"),t.k0s(),t.nrm(20,"input",16),t.k0s(),t.j41(21,"div",17)(22,"label",10),t.EFF(23,"Next Service Date"),t.k0s(),t.j41(24,"div",18)(25,"div",19),t.DNE(26,G,1,0,"input",20)(27,P,1,0,"input",21),t.k0s(),t.DNE(28,I,4,1,"div",22),t.k0s()(),t.j41(29,"div",23)(30,"label",10),t.EFF(31,"Remarks"),t.k0s(),t.nrm(32,"input",24),t.k0s()()(),t.j41(33,"div",25)(34,"button",26),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.closeModal())}),t.EFF(35,"Close"),t.k0s(),t.j41(36,"button",27),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.Submit())}),t.nrm(37,"fa-icon"),t.EFF(38),t.k0s()()()()()}if(2&i){const e=t.XpG();t.R7$(6),t.Y8G("formGroup",e.sourceForm),t.R7$(10),t.Y8G("ngForOf",e.source_supplies),t.R7$(10),t.Y8G("ngIf",e.fpchart_history),t.R7$(),t.Y8G("ngIf",!e.fpchart_history),t.R7$(),t.Y8G("ngIf",!e.fpchart_history),t.R7$(8),t.Y8G("disabled",e.sourceForm.invalid||e.is_saving),t.R7$(2),t.SpI(" ",e.fpchart_history?e.is_saving?"Updating":"Update":e.is_saving?"Saving":"Save"," ")}}let k=(()=>{class i{isCheck(e){this.isAccepted=!!e.target.checked,console.log(this.isAccepted)}closeModal(){this.toggleModal.emit("fpchart-modal")}Submit(){let e;e=this.fpchart_history?.id?this.http.update("family-planning/fp-chart/",this.fpchart_history.id,this.sourceForm.value):this.http.post("family-planning/fp-chart",this.sourceForm.value),e.subscribe({next:o=>{this.toastr.success("Chart was "+(this.sourceForm.value?"updated":"saved")+" successfully","Success"),this.is_saving=!1,this.anotherFunction.emit(),this.closeModal(),console.log(o,"display chart details"),!0===this.isAccepted?(this.saveAppointment(),console.log(this.isAccepted,"checkbox is working")):console.log(this.isAccepted,"checkbox is not working")},error:o=>console.log(o)})}saveAppointment(){this.http.post("appointment/schedule",{patient_id:this.patient_id,appointment_date:this.sourceForm.value.next_service_date,appointment:[{appointment_code:"FP"}]}).subscribe({next:o=>{console.log(o.data),this.is_saving=!1,this.closeModal()},error:o=>console.log(o)})}loadLib(){this.http.get("libraries/family-planning-source-supply").subscribe({next:e=>{this.source_supplies=e.data,this.loadChart(),this.show_form=!0},complete:()=>{},error:e=>{console.log(e)}})}validateForm(){this.sourceForm=this.formBuilder.group(this.fp_visit_history.method?{patient_id:[this.patient_id,[s.k0.required,s.k0.minLength(1)]],patient_fp_id:[this.fp_visit_history.id,[s.k0.required,s.k0.minLength(1)]],patient_fp_method_id:[this.fp_visit_history.method.id,[s.k0.required,s.k0.minLength(1)]],service_date:["",[s.k0.required,s.k0.minLength(1)]],source_supply_code:["",[s.k0.required,s.k0.minLength(1)]],quantity:["",[s.k0.required,s.k0.minLength(1)]],next_service_date:["",[s.k0.required,s.k0.minLength(1)]],remarks:[""]}:{patient_id:[this.patient_id,[s.k0.required,s.k0.minLength(1)]],patient_fp_id:[this.fp_visit_history.id,[s.k0.required,s.k0.minLength(1)]],service_date:["",[s.k0.required,s.k0.minLength(1)]],source_supply_code:["",[s.k0.required,s.k0.minLength(1)]],quantity:["",[s.k0.required,s.k0.minLength(1)]],next_service_date:["",[s.k0.required,s.k0.minLength(1)]],remarks:[""]}),this.show_form=!0}loadChart(){this.fpchart_history?.id?(this.sourceForm.patchValue({service_date:(0,c.Yq)(this.fpchart_history?.service_date,"yyyy-MM-dd","en"),source_supply_code:this.fpchart_history?.source.code,quantity:this.fpchart_history?.quantity,next_service_date:(0,c.Yq)(this.fpchart_history?.next_service_date,"yyyy-MM-dd","en"),remarks:this.fpchart_history?.remarks}),this.show_form=!0,console.log("test ng load chart function"),console.log(this.fp_visit_history.remarks,"test ng load remarks")):console.log("test ng load chart function else")}constructor(e,o,n,a){this.router=e,this.http=o,this.formBuilder=n,this.toastr=a,this.toggleModal=new t.bkB,this.loadFP=new t.bkB,this.loadFPDetails=new t.bkB,this.anotherFunction=new t.bkB,this.is_saving=!1,this.show_form=!1,this.min_date=(0,c.Yq)((new Date).setDate((new Date).getDate()+1),"yyyy-MM-dd","en"),this.max_date=(0,c.Yq)(new Date,"yyyy-MM-dd","en"),this.sourceForm=new s.gE({patient_id:new s.MJ(""),patient_fp_id:new s.MJ(""),patient_fp_method_id:new s.MJ(""),service_date:new s.MJ(""),source_supply_code:new s.MJ(""),quantity:new s.MJ(""),next_service_date:new s.MJ(""),remarks:new s.MJ("")})}ngOnInit(){this.fp_visit_history_details=this.fp_visit_history,this.validateForm(),this.loadLib(),console.log(this.fp_visit_history_details,"fp history in fp chart modal"),console.log(this.fpchart_history,"display supplies")}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(u.Ix),t.rXU(m.k),t.rXU(s.ok),t.rXU(f.tw))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-fpchart-modal"]],inputs:{patient_id:"patient_id",fp_visit_history:"fp_visit_history",fpchart_history:"fpchart_history"},outputs:{toggleModal:"toggleModal",loadFP:"loadFP",loadFPDetails:"loadFPDetails",anotherFunction:"anotherFunction"},decls:2,vars:1,consts:[["id","defaultModal","tabindex","-1","class","overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 w-full md:inset-0 h-modal md:h-full justify-center items-center flex","aria-modal","true","role","dialog","style","z-index:60",4,"ngIf"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500"],[1,"text-sm","font-bold","text-white"],[3,"submit","formGroup"],[1,"grid","grid-cols-12","h-[100]","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"col-span-4","px-10","pt-2.5"],["for","case_number",1,"text-sm","font-semibold"],["type","date","name","case_number","id","case_number","formControlName","service_date",1,"input"],[1,"col-span-12","px-10","pt-2.5"],["for","source_supply",1,"text-sm","font-semibold"],["name","supply_source_code","id","supply_source_code","formControlName","source_supply_code",1,"input"],[3,"value",4,"ngFor","ngForOf"],["type","number","name","case_number","id","case_number","formControlName","quantity",1,"input"],[1,"col-span-8","px-10","pt-2.5"],[1,"grid","grid-cols-12"],[1,"col-span-5","pr-5"],["type","date","name","case_number","id","case_number","formControlName","next_service_date","class","input select-none","readonly","",4,"ngIf"],["type","date","name","case_number","id","case_number","formControlName","next_service_date","class","input",4,"ngIf"],["class","col-span-7",4,"ngIf"],[1,"col-span-12","px-10","pt-2.5","pb-5"],["type","text","name","case_number","id","case_number","formControlName","remarks",1,"input"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-red-500",3,"click"],["type","submit",1,"btn-save","px-10","disabled:bg-gray-300",3,"click","disabled"],[3,"value"],["type","date","name","case_number","id","case_number","formControlName","next_service_date","readonly","",1,"input","select-none"],["type","date","name","case_number","id","case_number","formControlName","next_service_date",1,"input"],[1,"col-span-7"],["type","checkbox",1,"input-checkbox",3,"change","checked"],["for","case_number",1,"text-sm","font-semibold","pl-2","align-middle"]],template:function(o,n){1&o&&(t.DNE(0,R,39,7,"div",0),t.nrm(1,"div",1)),2&o&&t.Y8G("ngIf",n.show_form)},dependencies:[c.Sq,c.bT,h.aY,s.qT,s.xH,s.y7,s.me,s.Q0,s.wz,s.BC,s.cb,s.j4,s.JD]})}return i})();function T(i,l){if(1&i&&t.nrm(0,"fa-icon",14),2&i){const e=t.XpG(3);t.Y8G("icon",e.faPlusSquare)}}function E(i,l){if(1&i&&t.nrm(0,"fa-icon",15),2&i){const e=t.XpG(3);t.Y8G("icon",e.faSpinner)}}function S(i,l){if(1&i){const e=t.RV6();t.j41(0,"button",11),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.toggleModal("fpchart-modal"))}),t.DNE(1,T,1,1,"fa-icon",12)(2,E,1,1,"fa-icon",13),t.EFF(3),t.k0s()}if(2&i){const e=t.XpG(2);t.R7$(),t.Y8G("ngIf",!e.is_saving),t.R7$(),t.Y8G("ngIf",e.is_saving),t.R7$(),t.SpI(" Add Service ",null==e.fpchart_history||null==e.fpchart_history.patientFpMethod||null==e.fpchart_history.patientFpMethod.method?null:e.fpchart_history.patientFpMethod.method.desc," ")}}function Y(i,l){1&i&&(t.j41(0,"div",16)(1,"div",17)(2,"div",18),t.EFF(3,"No records to show..."),t.k0s()()())}function X(i,l){if(1&i){const e=t.RV6();t.j41(0,"tr",23)(1,"td",24),t.EFF(2),t.nI1(3,"date"),t.k0s(),t.j41(4,"td",24),t.EFF(5),t.k0s(),t.j41(6,"td",24),t.EFF(7),t.k0s(),t.j41(8,"td",24),t.EFF(9),t.k0s(),t.j41(10,"td",24),t.EFF(11),t.nI1(12,"date"),t.k0s(),t.j41(13,"td",24),t.EFF(14),t.nI1(15,"date"),t.k0s(),t.j41(16,"td",24),t.EFF(17),t.k0s(),t.j41(18,"td",24)(19,"fa-icon",25),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG(3);return t.Njj(a.editChart("fpchart-modal",n))}),t.k0s(),t.j41(20,"fa-icon",26),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG(3);return t.Njj(a.toggleModal("delete-item",n))}),t.k0s()()()}if(2&i){const e=l.$implicit,o=t.XpG(3);t.R7$(2),t.SpI(" ",t.i5U(3,9,null==e?null:e.service_date,"MM/dd/yyyy")," "),t.R7$(3),t.SpI(" ",null!=e&&null!=e.patientFpMethod&&e.patientFpMethod.method?null==e||null==e.patientFpMethod||null==e.patientFpMethod.method?null:e.patientFpMethod.method.desc:"-"," "),t.R7$(2),t.SpI(" ",null!=e&&e.source?null==e||null==e.source?null:e.source.desc:"-"," "),t.R7$(2),t.SpI(" ",e?null==e?null:e.quantity:"-"," "),t.R7$(2),t.SpI(" ",t.i5U(12,12,null==e?null:e.next_service_date,"MM/dd/yyyy")," "),t.R7$(3),t.SpI(" ",null!=e&&null!=e.patientFpMethod&&e.patientFpMethod.dropout_date?t.i5U(15,15,null==e||null==e.patientFpMethod?null:e.patientFpMethod.dropout_date,"MM/dd/yyyy"):"-"," "),t.R7$(3),t.SpI(" ",null!=e&&null!=e.patientFpMethod&&null!=e.patientFpMethod.dropout&&e.patientFpMethod.dropout.desc?null==e||null==e.patientFpMethod||null==e.patientFpMethod.dropout?null:e.patientFpMethod.dropout.desc:"-"," "),t.R7$(2),t.Y8G("icon",o.faEdit),t.R7$(),t.Y8G("icon",o.faTrashCan)}}function $(i,l){if(1&i&&(t.j41(0,"table",19)(1,"thead",20)(2,"tr")(3,"th",21),t.EFF(4," Date Service Given "),t.k0s(),t.j41(5,"th",21),t.EFF(6," Method "),t.k0s(),t.j41(7,"th",21),t.EFF(8," Source "),t.k0s(),t.j41(9,"th",21),t.EFF(10," Quantity "),t.k0s(),t.j41(11,"th",21),t.EFF(12," Next Service Date "),t.k0s(),t.j41(13,"th",21),t.EFF(14," Date Dropout "),t.k0s(),t.j41(15,"th",21),t.EFF(16," Dropout Reason "),t.k0s(),t.j41(17,"th",21),t.EFF(18," Action "),t.k0s()()(),t.j41(19,"tbody"),t.DNE(20,X,21,18,"tr",22),t.k0s()()),2&i){const e=t.XpG(2);t.R7$(20),t.Y8G("ngForOf",e.fpchart_history)}}function N(i,l){if(1&i){const e=t.RV6();t.j41(0,"div")(1,"nav",31)(2,"button",32),t.bIt("click",function(){t.eBV(e);const n=t.XpG(3);return t.Njj(n.getChartHistory(1))}),t.nrm(3,"fa-icon",33),t.k0s(),t.j41(4,"button",34),t.bIt("click",function(){t.eBV(e);const n=t.XpG(3);return t.Njj(n.getChartHistory(n.current_page-1))}),t.nrm(5,"fa-icon",33),t.EFF(6,"Previous "),t.k0s(),t.j41(7,"button",34),t.bIt("click",function(){t.eBV(e);const n=t.XpG(3);return t.Njj(n.getChartHistory(n.current_page+1))}),t.EFF(8," Next"),t.nrm(9,"fa-icon",35),t.k0s(),t.j41(10,"button",36),t.bIt("click",function(){t.eBV(e);const n=t.XpG(3);return t.Njj(n.getChartHistory(n.last_page))}),t.nrm(11,"fa-icon",35),t.k0s()()()}if(2&i){const e=t.XpG(3);t.R7$(2),t.Y8G("disabled",1===e.current_page),t.R7$(),t.Y8G("icon",e.faAnglesLeft),t.R7$(),t.Y8G("disabled",1===e.current_page),t.R7$(),t.Y8G("icon",e.faChevronLeft),t.R7$(2),t.Y8G("disabled",e.current_page===e.last_page),t.R7$(2),t.Y8G("icon",e.faChevronRight),t.R7$(),t.Y8G("disabled",e.current_page===e.last_page),t.R7$(),t.Y8G("icon",e.faAnglesRight)}}function V(i,l){if(1&i&&(t.j41(0,"div")(1,"div",27)(2,"div",28)(3,"div")(4,"p",29),t.EFF(5," Showing "),t.j41(6,"span",30),t.EFF(7),t.k0s(),t.EFF(8," to "),t.j41(9,"span",30),t.EFF(10),t.k0s(),t.EFF(11," of "),t.j41(12,"span",30),t.EFF(13),t.k0s(),t.EFF(14," results "),t.k0s()(),t.DNE(15,N,12,8,"div",10),t.k0s()()()),2&i){const e=t.XpG(2);t.R7$(7),t.JRh(e.from),t.R7$(3),t.JRh(e.to),t.R7$(3),t.JRh(e.total),t.R7$(2),t.Y8G("ngIf",e.total>=2)}}function O(i,l){if(1&i&&(t.j41(0,"div",3)(1,"div",4),t.EFF(2," Chart "),t.DNE(3,S,4,3,"button",5),t.k0s(),t.DNE(4,Y,4,0,"div",6),t.j41(5,"div",7)(6,"div",8),t.DNE(7,$,21,1,"table",9)(8,V,16,4,"div",10),t.k0s()()()),2&i){const e=t.XpG();t.R7$(3),t.Y8G("ngIf",null!==(null==e.fp_visit_history?null:e.fp_visit_history.method)),t.R7$(),t.Y8G("ngIf",0===e.fpchart_history.length),t.R7$(3),t.Y8G("ngIf",e.fpchart_history.length>=1),t.R7$(),t.Y8G("ngIf",e.total>=1)}}function B(i,l){if(1&i){const e=t.RV6();t.j41(0,"app-fpchart-modal",37),t.bIt("toggleModal",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.toggleModal(n))})("loadFP",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.loadFP())})("anotherFunction",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.anotherFunction())}),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("patient_id",e.patient_id)("fp_visit_history",e.fp_visit_history)("fpchart_history",e.selected_fpchart)}}function D(i,l){if(1&i){const e=t.RV6();t.j41(0,"app-delete-item",38),t.bIt("toggleModal",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.toggleModal(n))}),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("delete_id",e.delete_id)("delete_desc",e.delete_desc)("url",e.url)}}let L=(()=>{class i{toggleModal(e,o){this.modals[e]=!this.modals[e],"delete-item"===e&&(!0===this.modals[e]?(this.delete_id=o.id,this.delete_desc="Previous Chart Record",this.url="family-planning/fp-chart/"):(this.delete_id=null,this.delete_desc=null,this.url=null),this.getChartHistory()),this.selected_fpchart=null}editChart(e,o){this.modals[e]=!this.modals[e],this.selected_fpchart=o}getChartHistory(e){this.http.get("family-planning/fp-chart",{params:{patient_id:this.fp_visit_history_details.patient_id,per_page:10,page:e||this.current_page}}).subscribe({next:n=>{this.show_form=!0,this.fpchart_history=n.data,this.current_page=n.meta.current_page,this.last_page=n.meta.last_page,this.from=n.meta.from,this.to=n.meta.to,this.total=n.meta.total,console.log(this.fpchart_history,"chart history")},error:n=>console.log(n)})}reloadData(){this.http.get("family-planning/fp-records",{params:{patient_id:this.patient_id}}).subscribe({next:o=>{this.selected_fp_consult=o.data[0],this.updateSelectedFp.emit(this.selected_fp_consult),console.log(this.selected_fp_consult,"check mo selected")},error:o=>console.log(o)})}anotherFunction(){this.loadFP.emit(),this.reloadData(),this.getChartHistory()}constructor(e,o,n,a){this.router=e,this.http=o,this.formBuilder=n,this.toastr=a,this.loadFP=new t.bkB,this.updateSelectedFp=new t.bkB,this.faSpinner=r.z1G,this.is_saving=!1,this.faTimes=r.GRI,this.faClose=r.yYc,this.faTimesCircle=r.s0Q,this.faSave=r.hSh,this.faPlusSquare=r.CHJ,this.faPencil=r.zLW,this.faAngleDown=r.tdl,this.faInfoCircle=r.iW_,this.faCaretRight=r.fU5,this.faAnglesLeft=r.rNr,this.faAnglesRight=r.up_,this.faChevronLeft=r.Wzs,this.faChevronRight=r.XkK,this.faEdit=r.MT7,this.faTrashCan=r.sjs,this.error_message="",this.buttons=[],this.keyUp=[],this.modals=[],this.show_form=!1,this.per_page=5}ngOnInit(){this.fp_visit_history_details=this.fp_visit_history,this.getChartHistory(),this.loadFP.emit(),console.log(this.fp_visit_history_details)}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(u.Ix),t.rXU(m.k),t.rXU(s.ok),t.rXU(f.tw))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-fpchart"]],inputs:{patient_id:"patient_id",fp_visit_history:"fp_visit_history",selected_fp_consult:"selected_fp_consult"},outputs:{loadFP:"loadFP",updateSelectedFp:"updateSelectedFp"},decls:3,vars:3,consts:[["class","m-5 border border-slate-200 rounded-lg",4,"ngIf"],[3,"patient_id","fp_visit_history","fpchart_history","toggleModal","loadFP","anotherFunction",4,"ngIf"],[3,"delete_id","delete_desc","url","toggleModal",4,"ngIf"],[1,"m-5","border","border-slate-200","rounded-lg"],[1,"bg-blue-500","text-sm","text-white","w-full","flex","justify-between","rounded-t-md","py-2","pl-3","font-semibold","text-center","items-center"],["class","text-black bg-white mr-3 px-3 py-2 rounded text-sm",3,"click",4,"ngIf"],["class","flex justify-center",4,"ngIf"],[1,"grid","grid-cols-12"],[1,"relative","col-span-12","overflow-x-auto","shadow-md","sm:rounded-lg"],["class","w-full text-sm text-left",4,"ngIf"],[4,"ngIf"],[1,"text-black","bg-white","mr-3","px-3","py-2","rounded","text-sm",3,"click"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin","class","mr-2",3,"icon",4,"ngIf"],[1,"mr-2",3,"icon"],["animation","spin",1,"mr-2",3,"icon"],[1,"flex","justify-center"],[1,"py-3","flex","flex-col"],[1,"flex","justify-center","text-sm","py-5"],[1,"w-full","text-sm","text-left"],[1,"text-xs","uppercase","bg-gray-50","whitespace-nowrap"],["scope","col",1,"px-6","py-3"],["class","bg-white border-b",4,"ngFor","ngForOf"],[1,"bg-white","border-b"],[1,"px-6","py-4"],[1,"mx-0","my-0","text-orange-500","hover:cursor-pointer","mr-2","text-center",3,"click","icon"],[1,"mx-0","my-0","text-red-500","hover:cursor-pointer","mr-2","text-center",3,"click","icon"],[1,"bg-white","px-4","py-3","flex","items-center","justify-between","border-t","border-gray-200","sm:px-6"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"text-sm","text-gray-700"],[1,"font-medium"],["aria-label","Pagination",1,"relative","z-0","inline-flex","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","disabled"],[1,"block","h-15","w-15","text-gray-500","pr-1",3,"icon"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","bg-white","text-sm","font-medium","text-gray-700","hover:bg-gray-50",3,"click","disabled"],[1,"h-5","w-5","text-gray-500",3,"icon"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","disabled"],[3,"toggleModal","loadFP","anotherFunction","patient_id","fp_visit_history","fpchart_history"],[3,"toggleModal","delete_id","delete_desc","url"]],template:function(o,n){1&o&&t.DNE(0,O,9,4,"div",0)(1,B,1,3,"app-fpchart-modal",1)(2,D,1,3,"app-delete-item",2),2&o&&(t.Y8G("ngIf",n.show_form),t.R7$(),t.Y8G("ngIf",n.modals["fpchart-modal"]),t.R7$(),t.Y8G("ngIf",n.modals["delete-item"]))},dependencies:[c.Sq,c.bT,h.aY,b.c,k,c.vh],styles:["input[_ngcontent-%COMP%]{padding-right:12px;padding-left:12px;height:2.25rem;width:100%}.icon-height[_ngcontent-%COMP%]{height:2.25rem}.colButton[_ngcontent-%COMP%]{padding-bottom:-500px}h3[_ngcontent-%COMP%]{color:#5c5c5c;padding-top:.15rem;padding-bottom:.25rem;font-size:.875rem;line-height:1.25rem}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(-5%);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:translateY(5%);animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes _ngcontent-%COMP%_type_in{0%{width:0}to{width:100%}}@keyframes _ngcontent-%COMP%_button_in{0%{width:22%}to{width:100%}}@keyframes _ngcontent-%COMP%_type_out{0%{width:100%}to{width:0}}@keyframes _ngcontent-%COMP%_visible_drop{0%{height:0}to{height:100%}}@keyframes _ngcontent-%COMP%_spins{0%{transform:rotate(0)}to{transform:rotate(180deg)}}.carets[_ngcontent-%COMP%]:hover{animation:_ngcontent-%COMP%_spins .3s steps(100,end) forwards}.typed-out[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;animation:_ngcontent-%COMP%_type_in .68s steps(100,end) forwards;width:0}.button-out[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;animation:_ngcontent-%COMP%_button_in .68s steps(60,end) forwards}"]})}return i})();var C=d(5188);function U(i,l){if(1&i&&t.nrm(0,"fa-icon",19),2&i){const e=t.XpG(2);t.Y8G("icon",e.faSave)}}function H(i,l){if(1&i&&t.nrm(0,"fa-icon",20),2&i){const e=t.XpG(2);t.Y8G("icon",e.faSpinner)}}function z(i,l){if(1&i){const e=t.RV6();t.j41(0,"div",1)(1,"div",2),t.EFF(2," Visit "),t.k0s(),t.j41(3,"form",3),t.bIt("submit",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.onSubmit())}),t.j41(4,"div",4)(5,"div",5)(6,"label",6),t.EFF(7,"Number of Living Children (Actual)"),t.k0s(),t.nrm(8,"input",7),t.k0s(),t.j41(9,"div",5)(10,"label",8),t.EFF(11,"Number of Living Children (Desired)"),t.k0s(),t.nrm(12,"input",9),t.k0s(),t.j41(13,"div",10)(14,"label",11),t.EFF(15,"Birth Interval Desired"),t.k0s(),t.nrm(16,"input",12),t.k0s(),t.j41(17,"div",10)(18,"label",13),t.EFF(19,"Average Monthly Income"),t.k0s(),t.nrm(20,"input",14),t.k0s()(),t.j41(21,"div",15)(22,"button",16),t.DNE(23,U,1,1,"fa-icon",17)(24,H,1,1,"fa-icon",18),t.EFF(25),t.k0s()()()()}if(2&i){const e=t.XpG();t.R7$(3),t.Y8G("formGroup",e.visitForm),t.R7$(19),t.Y8G("disabled",e.visitForm.invalid||e.is_saving),t.R7$(),t.Y8G("ngIf",!e.is_saving),t.R7$(),t.Y8G("ngIf",e.is_saving),t.R7$(),t.SpI(" ",e.visitForm.value.id?e.is_saving?"Updating":"Update":e.is_saving?"Saving":"Save"," ")}}let J=(()=>{class i{onSubmit(){console.log(this.visitForm.value,"display visit details"),this.is_saving=!0,this.http.post("family-planning/fp-records",this.visitForm.value).subscribe({next:e=>{this.toastr.success("First Visit was "+(this.visitForm.value?"updated":"saved")+" successfuly","Success"),this.is_saving=!1,this.showButton=!this.showButton,this.loadFP.emit(),this.reloadData()},complete:()=>{},error:e=>{console.log(e)}})}validateForm(){this.visitForm=this.formBuilder.group({id:[""],patient_id:[this.patient_id],no_of_living_children_actual:["",[s.k0.required,s.k0.minLength(1)]],no_of_living_children_desired:["",[s.k0.required,s.k0.minLength(1)]],birth_interval_desired:["",[s.k0.required,s.k0.minLength(1)]],average_monthly_income:["",[s.k0.required,s.k0.minLength(1)]]}),this.loadFPDetails(),this.show_form=!0}reloadData(){this.http.get("family-planning/fp-records",{params:{patient_id:this.patient_id}}).subscribe({next:o=>{this.selected_fp_consult=o.data[0],this.updateSelectedFp.emit(this.selected_fp_consult)},error:o=>console.log(o)})}loadFPDetails(){this.fp_visit_history&&(this.visitForm.patchValue({...this.fp_visit_history}),this.show_form=!0)}constructor(e,o,n,a){this.router=e,this.http=o,this.formBuilder=n,this.toastr=a,this.loadFP=new t.bkB,this.updateSelectedFp=new t.bkB,this.faSpinner=r.z1G,this.is_saving=!1,this.showButton=!1,this.faSave=r.hSh,this.faPencil=r.zLW,this.faInfoCircle=r.iW_,this.show_form=!1,this.visitForm=new s.gE({id:new s.MJ(""),patient_id:new s.MJ(""),no_of_living_children_actual:new s.MJ(""),no_of_living_children_desired:new s.MJ(""),birth_interval_desired:new s.MJ(""),average_monthly_income:new s.MJ("")})}ngOnInit(){this.validateForm()}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(u.Ix),t.rXU(m.k),t.rXU(s.ok),t.rXU(f.tw))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-firsvisit"]],inputs:{patient_id:"patient_id",fp_visit_history:"fp_visit_history",selected_fp_consult:"selected_fp_consult"},outputs:{loadFP:"loadFP",updateSelectedFp:"updateSelectedFp"},decls:1,vars:1,consts:[["class","m-5 border border-slate-200 rounded-lg",4,"ngIf"],[1,"m-5","border","border-slate-200","rounded-lg"],[1,"bg-blue-500","text-sm","text-white","rounded-t-md","py-2","pl-3","font-semibold"],[3,"submit","formGroup"],[1,"grid","grid-cols-12"],[1,"col-span-6","px-10","pt-5"],["for","no_of_living_children_actual",1,"text-sm","font-semibold"],["type","number","name","no_of_living_children_actual","id","no_of_living_children_actual","placeholder","Input Number of Children","formControlName","no_of_living_children_actual",1,"input"],["for","no_of_living_children_desired",1,"text-sm","font-semibold"],["type","number","name","no_of_living_children_desired","id","no_of_living_children_desired","placeholder","Input Number of Children","formControlName","no_of_living_children_desired",1,"input"],[1,"col-span-6","px-10","pt-6"],["for","birth_interval_desired",1,"text-sm","font-semibold"],["type","number","name","birth_interval_desired","id","birth_interval_desired","placeholder","Input Interval","formControlName","birth_interval_desired",1,"input"],["for","average_monthly_income",1,"text-sm","font-semibold"],["type","text","name","average_monthly_income","id","average_monthly_income","placeholder","Input Average Monthly Income","mask","separator.2","thousandSeparator",",","formControlName","average_monthly_income",1,"input"],[1,"flex","justify-center","py-5"],[1,"btn-save","mr-5","mt-4",3,"disabled"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin","class","mr-2",3,"icon",4,"ngIf"],[1,"mr-2",3,"icon"],["animation","spin",1,"mr-2",3,"icon"]],template:function(o,n){1&o&&t.DNE(0,z,26,5,"div",0),2&o&&t.Y8G("ngIf",n.show_form)},dependencies:[c.bT,h.aY,s.qT,s.me,s.Q0,s.BC,s.cb,s.j4,s.JD,C.Zr],styles:["input[_ngcontent-%COMP%]{padding:12px;height:2.25rem;width:100%}.icon-height[_ngcontent-%COMP%]{height:2.25rem}.colButton[_ngcontent-%COMP%]{padding-bottom:-500px}h3[_ngcontent-%COMP%]{color:#5c5c5c;padding-top:.15rem;padding-bottom:.25rem;font-size:.875rem;line-height:1.25rem}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(-5%);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:translateY(5%);animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes _ngcontent-%COMP%_type_in{0%{width:0}to{width:100%}}@keyframes _ngcontent-%COMP%_button_in{0%{width:22%}to{width:100%}}@keyframes _ngcontent-%COMP%_type_out{0%{width:100%}to{width:0}}@keyframes _ngcontent-%COMP%_visible_drop{0%{height:0}to{height:100%}}@keyframes _ngcontent-%COMP%_spins{0%{transform:rotate(0)}to{transform:rotate(180deg)}}.carets[_ngcontent-%COMP%]:hover{animation:_ngcontent-%COMP%_spins .3s steps(100,end) forwards}.typed-out[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;animation:_ngcontent-%COMP%_type_in .68s steps(100,end) forwards;width:0}.button-out[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;animation:_ngcontent-%COMP%_button_in .68s steps(60,end) forwards}"]})}return i})();function q(i,l){if(1&i){const e=t.RV6();t.j41(0,"div")(1,"input",15),t.mxI("ngModelChange",function(n){const a=t.eBV(e).$implicit,_=t.XpG(3);return t.DH7(_.physical_codes[a.pe_id],n)||(_.physical_codes[a.pe_id]=n),t.Njj(n)}),t.k0s(),t.j41(2,"label",16),t.EFF(3),t.k0s()()}if(2&i){const e=l.$implicit,o=t.XpG(3);t.R7$(),t.Y8G("id",e.pe_id),t.R50("ngModel",o.physical_codes[e.pe_id]),t.R7$(),t.BMQ("for",e.pe_id),t.R7$(),t.SpI(" ",null==e?null:e.pe_desc,"")}}function A(i,l){if(1&i&&(t.j41(0,"div",11)(1,"div",12),t.EFF(2),t.nI1(3,"titlecase"),t.k0s(),t.j41(4,"div",13),t.DNE(5,q,4,4,"div",14),t.k0s()()),2&i){const e=l.$implicit;t.R7$(2),t.SpI(" ",t.bMT(3,2,e.key)," "),t.R7$(3),t.Y8G("ngForOf",e.value)}}function Q(i,l){if(1&i&&t.nrm(0,"fa-icon",17),2&i){const e=t.XpG(2);t.Y8G("icon",e.faSave)}}function W(i,l){if(1&i&&t.nrm(0,"fa-icon",18),2&i){const e=t.XpG(2);t.Y8G("icon",e.faSpinner)}}function Z(i,l){if(1&i){const e=t.RV6();t.j41(0,"div",1)(1,"div",2),t.EFF(2," Physical Exam "),t.k0s(),t.j41(3,"div",3),t.DNE(4,A,6,4,"div",4),t.nI1(5,"keyvalue"),t.j41(6,"div",5),t.EFF(7," Remarks "),t.j41(8,"input",6),t.mxI("ngModelChange",function(n){t.eBV(e);const a=t.XpG();return t.DH7(a.fp_visit_history.pe_remarks,n)||(a.fp_visit_history.pe_remarks=n),t.Njj(n)}),t.k0s()(),t.j41(9,"div",7)(10,"button",8),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.onSubmit())}),t.DNE(11,Q,1,1,"fa-icon",9)(12,W,1,1,"fa-icon",10),t.EFF(13," Save "),t.k0s()()()()}if(2&i){const e=t.XpG();t.R7$(4),t.Y8G("ngForOf",t.bMT(5,5,e.pe_grouped)),t.R7$(4),t.R50("ngModel",e.fp_visit_history.pe_remarks),t.R7$(2),t.Y8G("disabled",e.is_saving),t.R7$(),t.Y8G("ngIf",!e.is_saving),t.R7$(),t.Y8G("ngIf",e.is_saving)}}let K=(()=>{class i{onSubmit(){var e=[];this.is_saving=!0,Object.entries(this.physical_codes).forEach(([p,v],g)=>{0!=v&&(e.push({pe_id:p}),console.log(e,"ito ung array sa for loop"))});var _={patient_fp_id:this.fp_visit_history_details.id,patient_id:this.patient_id,physical_exam:e,pe_remarks:this.fp_visit_history?this.fp_visit_history.pe_remarks:null};console.log(_),this.http.post("family-planning/fp-physical-exam",_).subscribe({next:()=>{this.toastr.success("First Visit was "+(_?"updated":"saved")+" successfully","Success"),this.is_saving=!1,this.loadFP.emit(),this.reloadData(),this.loadSelected(),console.log(_,"ito ung submit sa PE")},error:p=>console.log(p),complete:()=>{console.log("success")}})}reloadData(){this.http.get("family-planning/fp-records",{params:{patient_id:this.patient_id}}).subscribe({next:o=>{this.selected_fp_consult=o.data[0],this.updateSelectedFp.emit(this.selected_fp_consult),console.log(this.selected_fp_consult,"check mo selected")},error:o=>console.log(o)})}loadSelected(){Object.entries(this.fp_visit_history_details.physical_exam).forEach(([e,o],n)=>{this.physical_codes[o.pe_id]=!0}),console.log(this.fp_visit_history.physical_exam,"test")}loadLibraries(){this.http.get("libraries/family-planning-physical-exam").subscribe(e=>{const n=e.data.reduce((a,_)=>{const p=a[_.category_id.toLowerCase()]||[];return p.push(_),a[_.category_id.toLowerCase()]=p,a},{});this.pe_grouped=n,this.loadFP.emit(),this.loadSelected(),this.show_form=!0,console.log(this.pe_grouped,"grouped")})}constructor(e,o){this.http=e,this.toastr=o,this.loadFP=new t.bkB,this.updateSelectedFp=new t.bkB,this.faCalendarDay=r.isQ,this.faPlus=r.QLR,this.faSave=r.hSh,this.faTimes=r.GRI,this.faPencil=r.zLW,this.faCircleCheck=r.QRE,this.faCaretRight=r.fU5,this.faInfoCircle=r.iW_,this.faSpinner=r.z1G,this.pes=[],this.pe_answers=[],this.pe_grouped=[],this.is_saving=!1,this.show_form=!1,this.abdomen_pes=[],this.breast_pes=[],this.conjunctiva_pes=[],this.extremities_pes=[],this.neck_pes=[],this.thorax_pes=[],this.physical_codes=[],this.category=[{name:"Conjunctiva"},{name:"Neck"},{name:"Breast"},{name:"Thorax"},{name:"Abdomen"},{name:"Extremities"}]}ngOnInit(){this.loadLibraries(),this.fp_visit_history_details=this.fp_visit_history,console.log(this.fp_visit_history_details.physical_exam,"test")}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(m.k),t.rXU(f.tw))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-fppe"]],inputs:{patient_id:"patient_id",fp_visit_history:"fp_visit_history",selected_fp_consult:"selected_fp_consult"},outputs:{loadFP:"loadFP",updateSelectedFp:"updateSelectedFp"},decls:1,vars:1,consts:[["class","m-5 border border-slate-200 rounded-lg",4,"ngIf"],[1,"m-5","border","border-slate-200","rounded-lg"],[1,"bg-blue-500","text-sm","text-white","rounded-t-md","py-2","pl-3","font-semibold"],[1,"mx-5","mb-5"],["class","mt-1 grid grid-cols-3 gap-x-4 w-full",4,"ngFor","ngForOf"],[1,"col-span-3","border-slate-200","w-full","my-2","pt-3","gap-x-4","font-semibold","text-sky-500"],["type","text","name","pe_remarks","id","pe_remarks",1,"input","text-gray-500",3,"ngModelChange","ngModel"],[1,"flex","justify-center","mt-5"],[1,"btn-save","mr-5","mt-4",3,"click","disabled"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin","class","mr-2",3,"icon",4,"ngIf"],[1,"mt-1","grid","grid-cols-3","gap-x-4","w-full"],[1,"col-span-3","border-b","border-slate-200","w-full","my-2","pt-3","gap-x-4","font-semibold","text-sky-500"],[1,"col-span-3","grid","grid-cols-3","gap-x-4","mx-5"],[4,"ngFor","ngForOf"],["type","checkbox",1,"input-checkbox",3,"ngModelChange","id","ngModel"],[1,"pl-1","py-0.5","text-black","font-semibold"],[1,"mr-2",3,"icon"],["animation","spin",1,"mr-2",3,"icon"]],template:function(o,n){1&o&&t.DNE(0,Z,14,7,"div",0),2&o&&t.Y8G("ngIf",n.show_form)},dependencies:[c.Sq,c.bT,h.aY,s.me,s.Zm,s.BC,s.vS,c.PV,c.lG],styles:["label[_ngcontent-%COMP%]{color:#5c5c5c;padding-top:.15rem;padding-bottom:.25rem;font-size:.875rem;line-height:1.25rem;-webkit-user-select:none;user-select:none}.containers[_ngcontent-%COMP%]{max-height:100vh}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(-5%);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:translateY(5%);animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes _ngcontent-%COMP%_type_in{0%{width:0}to{width:100%}}@keyframes _ngcontent-%COMP%_button_in{0%{width:22%}to{width:100%}}@keyframes _ngcontent-%COMP%_type_out{0%{width:100%}to{width:0}}.typed-out[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;animation:_ngcontent-%COMP%_type_in .68s ease-in-out forwards;width:0}.button-out[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;animation:_ngcontent-%COMP%_button_in .68s ease-in-out forwards}"]})}return i})();function tt(i,l){if(1&i){const e=t.RV6();t.j41(0,"div")(1,"input",13),t.mxI("ngModelChange",function(n){const a=t.eBV(e).$implicit,_=t.XpG(3);return t.DH7(_.hx_codes[a.code],n)||(_.hx_codes[a.code]=n),t.Njj(n)}),t.k0s(),t.j41(2,"label",14),t.EFF(3),t.k0s()()}if(2&i){const e=l.$implicit,o=t.XpG(3);t.R7$(),t.R50("ngModel",o.hx_codes[e.code]),t.R7$(2),t.SpI(" ",e.desc,"")}}function et(i,l){if(1&i&&(t.j41(0,"div",9)(1,"div",10),t.EFF(2),t.nI1(3,"titlecase"),t.k0s(),t.j41(4,"div",11),t.DNE(5,tt,4,2,"div",12),t.k0s()()),2&i){const e=l.$implicit;t.R7$(2),t.SpI(" ",t.bMT(3,2,e.key)," "),t.R7$(3),t.Y8G("ngForOf",e.value)}}function it(i,l){if(1&i&&t.nrm(0,"fa-icon",15),2&i){const e=t.XpG(2);t.Y8G("icon",e.faSave)}}function nt(i,l){if(1&i&&t.nrm(0,"fa-icon",16),2&i){const e=t.XpG(2);t.Y8G("icon",e.faSpinner)}}function ot(i,l){if(1&i){const e=t.RV6();t.j41(0,"div",1)(1,"div",2),t.EFF(2," History "),t.k0s(),t.j41(3,"div",3),t.DNE(4,et,6,4,"div",4),t.nI1(5,"keyvalue"),t.j41(6,"div",5)(7,"button",6),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.onSubmit())}),t.DNE(8,it,1,1,"fa-icon",7)(9,nt,1,1,"fa-icon",8),t.EFF(10," Save "),t.k0s()()()()}if(2&i){const e=t.XpG();t.R7$(4),t.Y8G("ngForOf",t.bMT(5,4,e.hx_grouped)),t.R7$(3),t.Y8G("disabled",e.is_saving),t.R7$(),t.Y8G("ngIf",!e.is_saving),t.R7$(),t.Y8G("ngIf",e.is_saving)}}let st=(()=>{class i{loadLibraries(){this.http.get("libraries/family-planning-history").subscribe(e=>{const n=e.data.reduce((a,_)=>{const p=a[_.category.toLowerCase()]||[];return p.push(_),a[_.category.toLowerCase()]=p,a},{});this.hx_grouped=n,this.loadFP.emit(),this.loadSelected(),this.show_form=!0})}onSubmit(){var e=[];this.is_saving=!0,Object.entries(this.hx_codes).forEach(([_,p],v)=>{0!=p&&e.push({history_code:_})});var a={patient_fp_id:this.fp_visit_history.id,patient_id:this.patient_id,history:e};console.log(a,"history submit"),this.http.post("family-planning/fp-history",a).subscribe({next:()=>{this.toastr.success("FP History was "+(a?"updated":"saved")+" successfully","Success"),this.is_saving=!1,this.loadFP.emit(),this.reloadData(),this.loadSelected(),console.log(a,"ito ung submit sa FPHX")},error:_=>console.log(_),complete:()=>{console.log("success")}})}reloadData(){this.http.get("family-planning/fp-records",{params:{patient_id:this.patient_id}}).subscribe({next:o=>{this.selected_fp_consult=o.data[0],this.updateSelectedFp.emit(this.selected_fp_consult),console.log(this.selected_fp_consult,"check mo selected")},error:o=>console.log(o)})}loadSelected(){this.fp_visit_history.history&&Object.entries(this.fp_visit_history.history).forEach(([e,o],n)=>{this.hx_codes[o.history_code]=!0}),console.log(this.fp_visit_history.history,"test")}constructor(e,o){this.http=e,this.toastr=o,this.loadFP=new t.bkB,this.updateSelectedFp=new t.bkB,this.faCalendarDay=r.isQ,this.faPlus=r.QLR,this.faSave=r.hSh,this.faTimes=r.GRI,this.faPencil=r.zLW,this.faCircleCheck=r.QRE,this.faCaretRight=r.fU5,this.faInfoCircle=r.iW_,this.faSpinner=r.z1G,this.hx=[],this.pe_answers=[],this.hx_grouped=[],this.is_saving=!1,this.show_form=!1,this.hx_codes=[],this.category=[{name:"Abdomen"},{name:"History of any of the following"},{name:"Chest/Heart"},{name:"Extremities"},{name:"Genital"},{name:"HEENT"},{name:"Skin"}]}ngOnInit(){this.loadLibraries(),console.log(this.fp_visit_history.history,"testing history")}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(m.k),t.rXU(f.tw))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-fphx"]],inputs:{patient_id:"patient_id",fp_visit_history:"fp_visit_history",selected_fp_consult:"selected_fp_consult"},outputs:{loadFP:"loadFP",updateSelectedFp:"updateSelectedFp"},decls:1,vars:1,consts:[["class","m-5 border border-slate-200 rounded-lg",4,"ngIf"],[1,"m-5","border","border-slate-200","rounded-lg"],[1,"bg-blue-500","text-sm","text-white","rounded-t-md","py-2","pl-3","font-semibold"],[1,"mx-5","mb-5"],["class","mt-1 grid grid-cols-3 gap-x-4 w-full",4,"ngFor","ngForOf"],[1,"flex","justify-center","mt-5"],[1,"btn-save","mr-5","mt-4",3,"click","disabled"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin","class","mr-2",3,"icon",4,"ngIf"],[1,"mt-1","grid","grid-cols-3","gap-x-4","w-full"],[1,"col-span-3","border-b","border-slate-200","w-full","my-2","pt-3","gap-x-4","font-semibold","text-sky-500"],[1,"col-span-3","grid","grid-cols-3","gap-x-4","mx-5"],[4,"ngFor","ngForOf"],["type","checkbox",1,"input-checkbox",3,"ngModelChange","ngModel"],[1,"pl-1","py-0.5","text-black","font-semibold"],[1,"mr-2",3,"icon"],["animation","spin",1,"mr-2",3,"icon"]],template:function(o,n){1&o&&t.DNE(0,ot,11,6,"div",0),2&o&&t.Y8G("ngIf",n.show_form)},dependencies:[c.Sq,c.bT,h.aY,s.Zm,s.BC,s.vS,c.PV,c.lG],styles:["label[_ngcontent-%COMP%]{color:#5c5c5c;padding-top:.15rem;padding-bottom:.25rem;font-size:.875rem;line-height:1.25rem;-webkit-user-select:none;user-select:none}.containers[_ngcontent-%COMP%]{max-height:100vh}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(-5%);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:translateY(5%);animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes _ngcontent-%COMP%_type_in{0%{width:0}to{width:100%}}@keyframes _ngcontent-%COMP%_button_in{0%{width:22%}to{width:100%}}@keyframes _ngcontent-%COMP%_type_out{0%{width:100%}to{width:0}}.typed-out[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;animation:_ngcontent-%COMP%_type_in .68s ease-in-out forwards;width:0}.button-out[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;animation:_ngcontent-%COMP%_button_in .68s ease-in-out forwards}.parent[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap}.parent[_ngcontent-%COMP%] > .wife[_ngcontent-%COMP%]{flex:1 1 100%}.parent[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1 1 33.3333%}"]})}return i})();function at(i,l){if(1&i){const e=t.RV6();t.j41(0,"div")(1,"input",12),t.mxI("ngModelChange",function(n){const a=t.eBV(e).$implicit,_=t.XpG(2);return t.DH7(_.pelvic_codes[a.code],n)||(_.pelvic_codes[a.code]=n),t.Njj(n)}),t.k0s(),t.j41(2,"label",13),t.EFF(3),t.k0s()()}if(2&i){const e=l.$implicit,o=t.XpG(2);t.R7$(),t.R50("ngModel",o.pelvic_codes[e.code]),t.R7$(2),t.SpI(" ",e.desc,"")}}function lt(i,l){if(1&i&&(t.j41(0,"div",8)(1,"div",9),t.EFF(2),t.nI1(3,"titlecase"),t.k0s(),t.j41(4,"div",10),t.DNE(5,at,4,2,"div",11),t.k0s()()),2&i){const e=l.$implicit;t.R7$(2),t.SpI(" ",t.bMT(3,2,e.key)," "),t.R7$(3),t.Y8G("ngForOf",e.value)}}function rt(i,l){if(1&i&&t.nrm(0,"fa-icon",14),2&i){const e=t.XpG();t.Y8G("icon",e.faSave)}}function _t(i,l){if(1&i&&t.nrm(0,"fa-icon",15),2&i){const e=t.XpG();t.Y8G("icon",e.faSpinner)}}let ct=(()=>{class i{loadLibraries(){this.http.get("libraries/family-planning-pelvic-exam").subscribe(e=>{const o=e.data;console.log(o);const n=o.reduce((a,_)=>{const p=a[_.category.toLowerCase()]||[];return p.push(_),a[_.category.toLowerCase()]=p,a},{});this.pe_grouped=n,this.loadFP.emit(),this.loadSelected(),console.log(this.pe_grouped,"grouped")})}onSubmit(){var e=[];this.is_saving=!0,console.log(this.pelvic_codes),Object.entries(this.pelvic_codes).forEach(([_,p],v)=>{0!=p&&(e.push({pelvic_exam_code:_}),console.log(e,"ito ung array sa for loop"))});var a={patient_fp_id:this.fp_visit_history_details.id,patient_id:this.patient_id,pelvic_exam:e};console.log(a,"history submit"),this.http.post("family-planning/fp-pelvic-exam",a).subscribe({next:()=>{this.toastr.success("Pelvic exam was "+(a?"updated":"saved")+" successfully","Success"),this.is_saving=!1,this.loadFP.emit(),this.reloadData(),this.loadSelected(),console.log(a,"ito ung submit sa FPHX")},error:_=>console.log(_),complete:()=>{console.log("success")}})}reloadData(){this.http.get("family-planning/fp-records",{params:{patient_id:this.patient_id}}).subscribe({next:o=>{this.selected_fp_consult=o.data[0],this.updateSelectedFp.emit(this.selected_fp_consult),console.log(this.selected_fp_consult,"check mo selected")},error:o=>console.log(o)})}loadSelected(){this.fp_visit_history_details.pelvic_exam&&Object.entries(this.fp_visit_history_details.pelvic_exam).forEach(([e,o],n)=>{this.pelvic_codes[o.pelvic_exam_code]=!0,console.log(e),console.log(o)}),console.log(this.fp_visit_history_details.pelvic_exam,"test")}constructor(e,o){this.http=e,this.toastr=o,this.loadFP=new t.bkB,this.updateSelectedFp=new t.bkB,this.faCalendarDay=r.isQ,this.faPlus=r.QLR,this.faSave=r.hSh,this.faTimes=r.GRI,this.faPencil=r.zLW,this.faCircleCheck=r.QRE,this.faCaretRight=r.fU5,this.faInfoCircle=r.iW_,this.faSpinner=r.z1G,this.hx=[],this.pe_grouped=[],this.is_saving=!1,this.show_form=!1,this.pelvic_codes=[],this.category=[{name:"Adnexa"},{name:"Cervix"},{name:"Color"},{name:"Consistency"},{name:"Perinium"},{name:"Uterus Position"},{name:"Uterus Size"},{name:"Vagina"}]}ngOnInit(){this.loadLibraries(),this.fp_visit_history_details=this.fp_visit_history}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(m.k),t.rXU(f.tw))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-pelvic"]],inputs:{patient_id:"patient_id",fp_visit_history:"fp_visit_history",selected_fp_consult:"selected_fp_consult"},outputs:{loadFP:"loadFP",updateSelectedFp:"updateSelectedFp"},decls:11,vars:6,consts:[[1,"m-5","border","border-slate-200","rounded-lg"],[1,"bg-blue-500","text-sm","text-white","rounded-t-md","py-2","pl-3","font-semibold"],[1,"mx-5","mb-5"],["class","mt-1 grid grid-cols-3 gap-x-4 w-full",4,"ngFor","ngForOf"],[1,"flex","justify-center","mt-5"],[1,"btn-save","mr-5","mt-4",3,"click","disabled"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin","class","mr-2",3,"icon",4,"ngIf"],[1,"mt-1","grid","grid-cols-3","gap-x-4","w-full"],[1,"col-span-3","border-b","border-slate-200","w-full","my-2","pt-3","gap-x-4","font-semibold","text-sky-500"],[1,"col-span-3","grid","grid-cols-3","gap-x-4","mx-5"],[4,"ngFor","ngForOf"],["type","checkbox",1,"input-checkbox",3,"ngModelChange","ngModel"],[1,"pl-1","py-0.5","font-semibold","items-center","text-center"],[1,"mr-2",3,"icon"],["animation","spin",1,"mr-2",3,"icon"]],template:function(o,n){1&o&&(t.j41(0,"div",0)(1,"div",1),t.EFF(2," Pelvic Excam "),t.k0s(),t.j41(3,"div",2),t.DNE(4,lt,6,4,"div",3),t.nI1(5,"keyvalue"),t.j41(6,"div",4)(7,"button",5),t.bIt("click",function(){return n.onSubmit()}),t.DNE(8,rt,1,1,"fa-icon",6)(9,_t,1,1,"fa-icon",7),t.EFF(10," Save "),t.k0s()()()()),2&o&&(t.R7$(4),t.Y8G("ngForOf",t.bMT(5,4,n.pe_grouped)),t.R7$(3),t.Y8G("disabled",n.is_saving),t.R7$(),t.Y8G("ngIf",!n.is_saving),t.R7$(),t.Y8G("ngIf",n.is_saving))},dependencies:[c.Sq,c.bT,h.aY,s.Zm,s.BC,s.vS,c.PV,c.lG],styles:["label[_ngcontent-%COMP%]{color:#5c5c5c;padding-top:.15rem;padding-bottom:.25rem;font-size:.875rem;line-height:1.25rem;-webkit-user-select:none;user-select:none}.containers[_ngcontent-%COMP%]{max-height:100vh}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(-5%);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:translateY(5%);animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes _ngcontent-%COMP%_type_in{0%{width:0}to{width:100%}}@keyframes _ngcontent-%COMP%_button_in{0%{width:22%}to{width:100%}}@keyframes _ngcontent-%COMP%_type_out{0%{width:100%}to{width:0}}.typed-out[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;animation:_ngcontent-%COMP%_type_in .68s ease-in-out forwards;width:0}.button-out[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;animation:_ngcontent-%COMP%_button_in .68s ease-in-out forwards}.parent[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap}.parent[_ngcontent-%COMP%] > .wife[_ngcontent-%COMP%]{flex:1 1 100%}.parent[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1 1 33.3333%}"]})}return i})();var pt=d(7468);function dt(i,l){if(1&i&&(t.j41(0,"option",18),t.EFF(1),t.k0s()),2&i){const e=l.$implicit;t.Y8G("value",e.code),t.R7$(),t.JRh(e.desc)}}let w=(()=>{class i{closeModal(){this.toggleModal.emit("methods-modal")}onSubmit(){console.log(this.dropForm),this.is_saving=!0,this.http.update("family-planning/fp-method/",this.fp_visit_history_details.method.id,this.dropForm.value).subscribe({next:e=>{this.toastr.success("Dropout was saved successfully","Success"),this.is_saving=!1,this.anotherFunction.emit(),console.log(e,"display dropout details")},complete:()=>{this.closeModal()},error:e=>{console.log(e)}})}loadLib(){this.http.get("libraries/family-planning-dropout-reason").subscribe({next:e=>{this.reasons=e.data,console.log(this.reasons,"display reasons")},complete:()=>{},error:e=>{console.log(e)}})}validateForm(){this.dropForm=this.formBuilder.group({dropout_date:["",[s.k0.required,s.k0.minLength(1)]],dropout_reason_code:["",[s.k0.required,s.k0.minLength(1)]],dropout_remarks:[""]}),this.show_form=!0}constructor(e,o,n,a){this.router=e,this.http=o,this.formBuilder=n,this.toastr=a,this.toggleModal=new t.bkB,this.loadFP=new t.bkB,this.loadFPDetails=new t.bkB,this.anotherFunction=new t.bkB,this.is_saving=!1,this.show_form=!1,this.dropForm=new s.gE({dropout_date:new s.MJ(""),dropout_reason_code:new s.MJ(""),dropout_remarks:new s.MJ("")})}ngOnInit(){this.fp_visit_history_details=this.fp_visit_history,this.validateForm(),this.loadLib(),console.log(this.fp_visit_history_details,"fp history in method modal")}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(u.Ix),t.rXU(m.k),t.rXU(s.ok),t.rXU(f.tw))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-methods-modal"]],inputs:{patient_id:"patient_id",fp_visit_history:"fp_visit_history"},outputs:{toggleModal:"toggleModal",loadFP:"loadFP",loadFPDetails:"loadFPDetails",anotherFunction:"anotherFunction"},decls:28,vars:3,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-2xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500"],[1,"text-sm","font-bold","text-white"],[3,"formGroup"],[1,"grid","grid-cols-12","h-65","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100","pb-5"],[1,"col-span-4","px-10","pt-2.5"],["for","case_number",1,"text-sm","font-semibold"],["type","date","name","droupout_date","id","droupout_date","formControlName","dropout_date",1,"input"],[1,"col-span-12","px-10","pt-2.5"],["name","dropout_reason_code","id","dropout_reason_code","formControlName","dropout_reason_code",1,"input"],[3,"value",4,"ngFor","ngForOf"],["type","text","name","remarks","id","remarks","formControlName","dropout_remarks",1,"input"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-cancel",3,"click"],["type","submit",1,"btn-save","px-10","disabled:bg-gray-300",3,"click","disabled"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[3,"value"]],template:function(o,n){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.EFF(5," Dropout Details "),t.k0s()(),t.j41(6,"form",5)(7,"div",6)(8,"div",7)(9,"label",8),t.EFF(10,"Dropout Date"),t.k0s(),t.nrm(11,"input",9),t.k0s(),t.j41(12,"div",10)(13,"label",8),t.EFF(14,"Reason for Drop out"),t.k0s(),t.j41(15,"select",11),t.DNE(16,dt,2,2,"option",12),t.k0s()(),t.j41(17,"div",10)(18,"label",8),t.EFF(19,"Remarks"),t.k0s(),t.nrm(20,"input",13),t.k0s()()(),t.j41(21,"div",14)(22,"button",15),t.bIt("click",function(){return n.closeModal()}),t.EFF(23,"Close"),t.k0s(),t.j41(24,"button",16),t.bIt("click",function(){return n.onSubmit()}),t.nrm(25,"fa-icon"),t.EFF(26," Save "),t.k0s()()()()(),t.nrm(27,"div",17)),2&o&&(t.R7$(6),t.Y8G("formGroup",n.dropForm),t.R7$(10),t.Y8G("ngForOf",n.reasons),t.R7$(8),t.Y8G("disabled",n.dropForm.invalid||n.is_saving))},dependencies:[c.Sq,h.aY,s.qT,s.xH,s.y7,s.me,s.wz,s.BC,s.cb,s.j4,s.JD]})}return i})();function ht(i,l){if(1&i&&(t.j41(0,"option",19),t.EFF(1),t.k0s()),2&i){const e=l.$implicit;t.Y8G("value",e.code),t.R7$(),t.JRh(e.desc)}}function mt(i,l){if(1&i&&(t.j41(0,"option",19),t.EFF(1),t.k0s()),2&i){const e=l.$implicit;t.Y8G("value",e.code),t.R7$(),t.JRh(e.desc)}}function ut(i,l){if(1&i&&t.nrm(0,"fa-icon",23),2&i){const e=t.XpG(3);t.Y8G("icon",e.faSave)}}function ft(i,l){if(1&i&&t.nrm(0,"fa-icon",24),2&i){const e=t.XpG(3);t.Y8G("icon",e.faSpinner)}}function gt(i,l){if(1&i){const e=t.RV6();t.j41(0,"button",20),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.onSubmit())}),t.DNE(1,ut,1,1,"fa-icon",21)(2,ft,1,1,"fa-icon",22),t.EFF(3," Save "),t.k0s()}if(2&i){const e=t.XpG(2);t.Y8G("disabled",e.methodForm.invalid||e.is_saving),t.R7$(),t.Y8G("ngIf",!e.is_saving),t.R7$(),t.Y8G("ngIf",e.is_saving)}}function bt(i,l){if(1&i&&t.nrm(0,"fa-icon",23),2&i){const e=t.XpG(3);t.Y8G("icon",e.faSave)}}function vt(i,l){if(1&i&&t.nrm(0,"fa-icon",24),2&i){const e=t.XpG(3);t.Y8G("icon",e.faSpinner)}}function yt(i,l){if(1&i){const e=t.RV6();t.j41(0,"button",25),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.toggleModal("methods-modal"))}),t.DNE(1,bt,1,1,"fa-icon",21)(2,vt,1,1,"fa-icon",22),t.EFF(3," Dropout "),t.k0s()}if(2&i){const e=t.XpG(2);t.Y8G("disabled",e.is_saving),t.R7$(),t.Y8G("ngIf",!e.is_saving),t.R7$(),t.Y8G("ngIf",e.is_saving)}}function Ft(i,l){if(1&i){const e=t.RV6();t.j41(0,"div",3)(1,"div",4),t.EFF(2," Family Planning Method "),t.k0s(),t.j41(3,"form",5),t.bIt("submit",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.onSubmit())}),t.j41(4,"div",6)(5,"div",7)(6,"label",8),t.EFF(7,"Enrollment Date"),t.k0s(),t.nrm(8,"input",9),t.k0s(),t.j41(9,"div",7)(10,"div")(11,"label",10),t.EFF(12,"Family Planning Method"),t.k0s(),t.j41(13,"select",11),t.DNE(14,ht,2,2,"option",12),t.k0s()()(),t.j41(15,"div",13)(16,"label",8),t.EFF(17,"Treatment Partner"),t.k0s(),t.nrm(18,"input",14),t.k0s(),t.j41(19,"div",13)(20,"div")(21,"label",10),t.EFF(22,"Client Type"),t.k0s(),t.j41(23,"select",15),t.DNE(24,mt,2,2,"option",12),t.k0s()()()()(),t.j41(25,"div",16)(26,"div"),t.DNE(27,gt,4,3,"button",17),t.k0s(),t.j41(28,"div"),t.DNE(29,yt,4,3,"button",18),t.k0s()()()}if(2&i){const e=t.XpG();t.R7$(3),t.Y8G("formGroup",e.methodForm),t.R7$(11),t.Y8G("ngForOf",e.fp_methods),t.R7$(10),t.Y8G("ngForOf",e.client_list),t.R7$(3),t.Y8G("ngIf",null===e.fp_visit_history.method),t.R7$(2),t.Y8G("ngIf",null!==e.fp_visit_history.method)}}function xt(i,l){1&i&&(t.j41(0,"div",29)(1,"div",30)(2,"div",31),t.EFF(3,"No records to show..."),t.k0s()()())}function kt(i,l){if(1&i){const e=t.RV6();t.j41(0,"tr",36)(1,"td",37),t.EFF(2),t.k0s(),t.j41(3,"td",37),t.EFF(4),t.k0s(),t.j41(5,"td",37),t.EFF(6),t.nI1(7,"date"),t.k0s(),t.j41(8,"td",37),t.EFF(9),t.nI1(10,"date"),t.k0s(),t.j41(11,"td",37),t.EFF(12),t.k0s(),t.j41(13,"td",38)(14,"fa-icon",39),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG(3);return t.Njj(a.toggleModal("delete-item",n))}),t.k0s()()()}if(2&i){const e=l.$implicit,o=t.XpG(3);t.R7$(2),t.SpI(" ",null!=e&&e.method?e.method.desc:"-"," "),t.R7$(2),t.SpI(" ",null!=e&&e.client?e.client.desc:"-"," "),t.R7$(2),t.SpI(" ",t.i5U(7,6,null==e?null:e.enrollment_date,"MM/dd/yyyy")," "),t.R7$(3),t.SpI(" ",t.i5U(10,9,null==e?null:e.dropout_date,"MM/dd/yyyy")," "),t.R7$(3),t.SpI(" ",null!=e&&e.dropout?e.dropout.desc:"-"," "),t.R7$(2),t.Y8G("icon",o.faTrashCan)}}function Ct(i,l){if(1&i&&(t.j41(0,"table",32)(1,"thead",33)(2,"tr")(3,"th",34),t.EFF(4,"Method"),t.k0s(),t.j41(5,"th",34),t.EFF(6,"Type of Client"),t.k0s(),t.j41(7,"th",34),t.EFF(8,"Date Registered"),t.k0s(),t.j41(9,"th",34),t.EFF(10,"Date of Dropout"),t.k0s(),t.j41(11,"th",34),t.EFF(12,"Droupout Reason"),t.k0s(),t.j41(13,"th",34),t.EFF(14,"Action"),t.k0s()()(),t.j41(15,"tbody"),t.DNE(16,kt,15,12,"tr",35),t.k0s()()),2&i){const e=t.XpG(2);t.R7$(16),t.Y8G("ngForOf",e.fp_method_history)}}function wt(i,l){if(1&i){const e=t.RV6();t.j41(0,"div")(1,"nav",44)(2,"button",45),t.bIt("click",function(){t.eBV(e);const n=t.XpG(3);return t.Njj(n.getMethodHistory(1))}),t.nrm(3,"fa-icon",46),t.k0s(),t.j41(4,"button",47),t.bIt("click",function(){t.eBV(e);const n=t.XpG(3);return t.Njj(n.getMethodHistory(n.current_page-1))}),t.nrm(5,"fa-icon",46),t.EFF(6,"Previous "),t.k0s(),t.j41(7,"button",47),t.bIt("click",function(){t.eBV(e);const n=t.XpG(3);return t.Njj(n.getMethodHistory(n.current_page+1))}),t.EFF(8," Next"),t.nrm(9,"fa-icon",48),t.k0s(),t.j41(10,"button",49),t.bIt("click",function(){t.eBV(e);const n=t.XpG(3);return t.Njj(n.getMethodHistory(n.last_page))}),t.nrm(11,"fa-icon",48),t.k0s()()()}if(2&i){const e=t.XpG(3);t.R7$(2),t.Y8G("disabled",1===e.current_page),t.R7$(),t.Y8G("icon",e.faAnglesLeft),t.R7$(),t.Y8G("disabled",1===e.current_page),t.R7$(),t.Y8G("icon",e.faChevronLeft),t.R7$(2),t.Y8G("disabled",e.current_page===e.last_page),t.R7$(2),t.Y8G("icon",e.faChevronRight),t.R7$(),t.Y8G("disabled",e.current_page===e.last_page),t.R7$(),t.Y8G("icon",e.faAnglesRight)}}function jt(i,l){if(1&i&&(t.j41(0,"div")(1,"div",40)(2,"div",41)(3,"div")(4,"p",42),t.EFF(5," Showing "),t.j41(6,"span",43),t.EFF(7),t.k0s(),t.EFF(8," to "),t.j41(9,"span",43),t.EFF(10),t.k0s(),t.EFF(11," of "),t.j41(12,"span",43),t.EFF(13),t.k0s(),t.EFF(14," results "),t.k0s()(),t.DNE(15,wt,12,8,"div",28),t.k0s()()()),2&i){const e=t.XpG(2);t.R7$(7),t.JRh(e.from),t.R7$(3),t.JRh(e.to),t.R7$(3),t.JRh(e.total),t.R7$(2),t.Y8G("ngIf",e.total>=2)}}function Mt(i,l){if(1&i&&(t.j41(0,"div",3)(1,"div",4),t.EFF(2," Family Planning Method History "),t.k0s(),t.DNE(3,xt,4,0,"div",26)(4,Ct,17,1,"table",27)(5,jt,16,4,"div",28),t.k0s()),2&i){const e=t.XpG();t.R7$(3),t.Y8G("ngIf",0===e.fp_method_history.length),t.R7$(),t.Y8G("ngIf",e.fp_method_history.length>=1),t.R7$(),t.Y8G("ngIf",e.total>=1)}}function Gt(i,l){if(1&i){const e=t.RV6();t.j41(0,"app-methods-modal",50),t.bIt("toggleModal",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.toggleModal(n))})("loadFP",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.loadFP())})("loadFPDetails",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.loadFPDetails())})("anotherFunction",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.anotherFunction())}),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("fp_visit_history",e.fp_visit_history)}}function Pt(i,l){if(1&i){const e=t.RV6();t.j41(0,"app-delete-item",51),t.bIt("toggleModal",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.toggleModal(n))}),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("delete_id",e.delete_id)("delete_desc",e.delete_desc)("url",e.url)}}let It=(()=>{class i{toggleModal(e,o){this.modals[e]=!this.modals[e],"delete-item"===e&&(!0===this.modals[e]?(this.delete_id=o.id,this.delete_desc="Previous Method Record",this.url="family-planning/fp-method/"):(this.delete_id=null,this.delete_desc=null,this.url=null),this.getMethodHistory())}getMethodHistory(e){this.http.get("family-planning/fp-method",{params:{patient_id:this.fp_visit_history_details.patient_id,per_page:10,page:e||this.current_page}}).subscribe({next:n=>{this.show_form=!0,this.fp_method_history=n.data,this.current_page=n.meta.current_page,this.last_page=n.meta.last_page,this.from=n.meta.from,this.to=n.meta.to,this.total=n.meta.total,console.log(this.fp_method_history,"check method history")},error:n=>console.log(n)})}loadLibraries(){const n=this.http.get("libraries/family-planning-method"),a=this.http.get("libraries/family-planning-client-type");(0,pt.p)([n,a]).subscribe({next:([_,p])=>{this.fp_methods=_.data,this.client_list=p.data,this.getMethodHistory(),this.validateForm(),this.loadFPUsers(),console.log(this.fp_methods,"new function methods"),console.log(this.client_list,"new function client list"),console.log(this.fp_method_history,"new function method history")},error:_=>console.log(_)})}get f(){return this.methodForm.controls}onSubmit(){this.is_saving=!0,this.http.post("family-planning/fp-method",this.methodForm.value).subscribe({next:e=>{this.toastr.success("Method was "+(this.methodForm.value?"updated":"saved")+" successfully","Success"),this.is_saving=!1,this.showButton=!0,this.loadFP.emit(),this.reloadData(),this.loadFPDetails(),this.fp_visit_history_details=this.fp_visit_history,console.log(e,"display method on submit"),console.log(this.showButton,"display button details on submit")},complete:()=>{},error:e=>{console.log(e),this.show_error=!0,this.is_saving=!1,this.toastr.error("Form invalid or incomplete","Error")}})}reloadData(){this.http.get("family-planning/fp-records",{params:{patient_id:this.patient_id}}).subscribe({next:o=>{this.selected_fp_consult=o.data[0],this.updateSelectedFp.emit(this.selected_fp_consult),console.log(this.selected_fp_consult,"check mo selected")},error:o=>console.log(o)})}validateForm(){this.methodForm=this.formBuilder.group({id:[""],patient_id:[this.patient_id,[s.k0.required,s.k0.minLength(1)]],patient_fp_id:[this.fp_visit_history_details.id,[s.k0.required,s.k0.minLength(1)]],enrollment_date:["",[s.k0.required,s.k0.minLength(1)]],method_code:["",[s.k0.required,s.k0.minLength(1)]],client_code:["",[s.k0.required,s.k0.minLength(1)]],treatment_partner:["",[s.k0.required]]}),this.loadFPDetails(),this.show_form=!0}loadFPDetails(){this.fp_visit_history&&(this.methodForm.patchValue({...this.fp_visit_history?.method}),this.show_form=!0)}loadFPUsers(){this.http.get("users",{params:{attendant_flag:"tb"}}).subscribe({next:e=>{this.partner=e.data,console.log(this.partner,"load users")}})}resetMethodForm(){this.fp_visit_history.method=null,this.validateForm()}anotherFunction(){this.showButton=!this.showButton,this.loadFP.emit(),this.reloadData(),this.getMethodHistory(),this.resetMethodForm(),console.log("test another function v2"),console.log(this.showButton,"test button"),console.log(this.methodForm,"form")}constructor(e,o,n,a){this.router=e,this.http=o,this.formBuilder=n,this.toastr=a,this.loadFP=new t.bkB,this.updateSelectedFp=new t.bkB,this.faSpinner=r.z1G,this.is_saving=!1,this.show_form=!1,this.show_error=!1,this.showButton=!1,this.faTimes=r.GRI,this.faClose=r.yYc,this.faTimesCircle=r.s0Q,this.faSave=r.hSh,this.faPencil=r.zLW,this.faAngleDown=r.tdl,this.faInfoCircle=r.iW_,this.faCaretRight=r.fU5,this.faAnglesLeft=r.rNr,this.faAnglesRight=r.up_,this.faChevronLeft=r.Wzs,this.faChevronRight=r.XkK,this.faTrashCan=r.sjs,this.error_message="",this.buttons=[],this.keyUp=[],this.fp_method_history=[],this.fp_methods=[],this.client_list=[],this.modals=[],this.per_page=5,this.required_message="Required field",this.methodForm=new s.gE({id:new s.MJ(""),patient_id:new s.MJ(""),patient_fp_id:new s.MJ(""),enrollment_date:new s.MJ(""),method_code:new s.MJ(""),client_code:new s.MJ(""),treatment_partner:new s.MJ("")})}ngOnInit(){this.fp_visit_history_details=this.fp_visit_history,this.loadLibraries(),this.loadFP.emit(),console.log(this.fp_visit_history_details,"display fp visit history on init method ")}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(u.Ix),t.rXU(m.k),t.rXU(s.ok),t.rXU(f.tw))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-methods"]],inputs:{patient_id:"patient_id",fp_visit_history:"fp_visit_history",selected_fp_consult:"selected_fp_consult"},outputs:{loadFP:"loadFP",updateSelectedFp:"updateSelectedFp"},decls:4,vars:4,consts:[["class","m-5 border border-slate-200 rounded-lg",4,"ngIf"],[3,"fp_visit_history","toggleModal","loadFP","loadFPDetails","anotherFunction",4,"ngIf"],[3,"delete_id","delete_desc","url","toggleModal",4,"ngIf"],[1,"m-5","border","border-slate-200","rounded-lg"],[1,"bg-blue-500","text-sm","text-white","rounded-t-md","py-2","pl-3","font-semibold"],[3,"submit","formGroup"],[1,"grid","grid-cols-12"],[1,"col-span-6","px-10","pt-5"],["for","case_number",1,"text-sm","font-semibold"],["type","date","name","case_number","id","case_number","formControlName","enrollment_date",1,"input"],["for","source_code",1,"text-sm","font-semibold"],["name","source_code","id","source_code","formControlName","method_code",1,"input"],[3,"value",4,"ngFor","ngForOf"],[1,"col-span-6","px-10","pt-6"],["type","text","name","case_number","id","case_number","formControlName","treatment_partner",1,"input"],["name","source_code","id","source_code","formControlName","client_code",1,"input"],[1,"flex","justify-center","py-5"],["class","btn-save mr-5 mt-4",3,"disabled","click",4,"ngIf"],["type","submit","class","btn-cancel bg-rose-500 mr-5 mt-4",3,"disabled","click",4,"ngIf"],[3,"value"],[1,"btn-save","mr-5","mt-4",3,"click","disabled"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin","class","mr-2",3,"icon",4,"ngIf"],[1,"mr-2",3,"icon"],["animation","spin",1,"mr-2",3,"icon"],["type","submit",1,"btn-cancel","bg-rose-500","mr-5","mt-4",3,"click","disabled"],["class","flex justify-center",4,"ngIf"],["class","w-full text-sm text-left",4,"ngIf"],[4,"ngIf"],[1,"flex","justify-center"],[1,"py-3","flex","flex-col"],[1,"flex","justify-center","text-sm","py-5"],[1,"w-full","text-sm","text-left"],[1,"text-xs","uppercase","bg-gray-50","whitespace-nowrap"],["scope","col",1,"py-3","px-6"],["class","bg-white border-b",4,"ngFor","ngForOf"],[1,"bg-white","border-b"],[1,"py-4","px-6"],[1,"py-4","px-10"],[1,"mx-0","my-0","text-red-500","hover:cursor-pointer","mr-2","text-center",3,"click","icon"],[1,"bg-white","px-4","py-3","flex","items-center","justify-between","border-t","border-gray-200","sm:px-6"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"text-sm","text-gray-700"],[1,"font-medium"],["aria-label","Pagination",1,"relative","z-0","inline-flex","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","disabled"],[1,"block","h-15","w-15","text-gray-500","pr-1",3,"icon"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","bg-white","text-sm","font-medium","text-gray-700","hover:bg-gray-50",3,"click","disabled"],[1,"h-5","w-5","text-gray-500",3,"icon"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","disabled"],[3,"toggleModal","loadFP","loadFPDetails","anotherFunction","fp_visit_history"],[3,"toggleModal","delete_id","delete_desc","url"]],template:function(o,n){1&o&&t.DNE(0,Ft,30,5,"div",0)(1,Mt,6,3,"div",0)(2,Gt,1,1,"app-methods-modal",1)(3,Pt,1,3,"app-delete-item",2),2&o&&(t.Y8G("ngIf",n.show_form),t.R7$(),t.Y8G("ngIf",n.show_form),t.R7$(),t.Y8G("ngIf",n.modals["methods-modal"]),t.R7$(),t.Y8G("ngIf",n.modals["delete-item"]))},dependencies:[c.Sq,c.bT,h.aY,s.qT,s.xH,s.y7,s.me,s.wz,s.BC,s.cb,s.j4,s.JD,b.c,w,c.vh],styles:["input[_ngcontent-%COMP%], .drop_btn[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{padding-right:12px;padding-left:12px;height:2.25rem;width:100%}.icon-height[_ngcontent-%COMP%]{height:2.25rem}.colButton[_ngcontent-%COMP%]{padding-bottom:-500px}h3[_ngcontent-%COMP%]{color:#5c5c5c;padding-top:.15rem;padding-bottom:.25rem;font-size:.875rem;line-height:1.25rem}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(-5%);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:translateY(5%);animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes _ngcontent-%COMP%_type_in{0%{width:0}to{width:100%}}@keyframes _ngcontent-%COMP%_button_in{0%{width:22%}to{width:100%}}@keyframes _ngcontent-%COMP%_type_out{0%{width:100%}to{width:0}}@keyframes _ngcontent-%COMP%_visible_drop{0%{height:0}to{height:100%}}@keyframes _ngcontent-%COMP%_spins{0%{transform:rotate(0)}to{transform:rotate(180deg)}}.carets[_ngcontent-%COMP%]:hover{animation:_ngcontent-%COMP%_spins .3s steps(100,end) forwards}.typed-out[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;animation:_ngcontent-%COMP%_type_in .68s steps(100,end) forwards;width:0}.button-out[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;animation:_ngcontent-%COMP%_button_in .68s steps(60,end) forwards}"]})}return i})();function Rt(i,l){if(1&i){const e=t.RV6();t.j41(0,"button",15),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.toggleModal("end_visit"))}),t.nrm(1,"fa-icon",16),t.EFF(2," End Visit "),t.k0s()}if(2&i){const e=t.XpG(2);t.R7$(),t.Y8G("icon",e.faDoorClosed)}}function Tt(i,l){if(1&i){const e=t.RV6();t.j41(0,"div",10)(1,"nav",11)(2,"button",12),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.switchPage(1))}),t.EFF(3," VISIT HISTORY "),t.k0s(),t.j41(4,"button",12),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.switchPage(2))}),t.EFF(5," FP VISIT "),t.k0s(),t.j41(6,"button",12),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.switchPage(3))}),t.EFF(7," ECLAIMS "),t.k0s()(),t.j41(8,"div",13),t.DNE(9,Rt,3,1,"button",14),t.k0s()()}if(2&i){const e=t.XpG();t.R7$(2),t.HbH(1===e.pages?"tabs-main-true rounded-t-md":"tabs-main-false"),t.R7$(2),t.HbH(2===e.pages?"tabs-main-true rounded-t-md":"tabs-main-false"),t.R7$(2),t.HbH(3===e.pages?"tabs-main-true rounded-t-md":"tabs-main-false"),t.R7$(3),t.Y8G("ngIf",!1===(null==e.consult_details[0]?null:e.consult_details[0].consult_done))}}function Et(i,l){if(1&i){const e=t.RV6();t.j41(0,"button",19),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.switchTab(2))}),t.EFF(1," FP HX "),t.k0s()}if(2&i){const e=t.XpG(2);t.HbH(2===e.module?"tabs-main-true":"tabs-main-false")}}function St(i,l){if(1&i){const e=t.RV6();t.j41(0,"button",19),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.switchTab(4))}),t.EFF(1," FP PE "),t.k0s()}if(2&i){const e=t.XpG(2);t.HbH(4===e.module?"tabs-main-true":"tabs-main-false")}}function Yt(i,l){if(1&i){const e=t.RV6();t.j41(0,"button",19),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.switchTab(5))}),t.EFF(1," PELVIC EXAM "),t.k0s()}if(2&i){const e=t.XpG(2);t.HbH(5===e.module?"tabs-main-true":"tabs-main-false")}}function Xt(i,l){if(1&i){const e=t.RV6();t.j41(0,"button",19),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.switchTab(6))}),t.EFF(1," METHODS "),t.k0s()}if(2&i){const e=t.XpG(2);t.HbH(6===e.module?"tabs-main-true":"tabs-main-false")}}function $t(i,l){if(1&i){const e=t.RV6();t.j41(0,"button",19),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.switchTab(7))}),t.EFF(1," FP CHART "),t.k0s()}if(2&i){const e=t.XpG(2);t.HbH(7===e.module?"tabs-main-true":"tabs-main-false")}}function Nt(i,l){if(1&i){const e=t.RV6();t.j41(0,"button",19),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.switchTab(8))}),t.EFF(1," CASE RATE "),t.k0s()}if(2&i){const e=t.XpG(2);t.HbH(8===e.module?"tabs-main-true":"tabs-main-false")}}function Vt(i,l){if(1&i){const e=t.RV6();t.j41(0,"nav",17)(1,"div",18)(2,"button",19),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.switchTab(1))}),t.EFF(3," FIRST VISIT "),t.k0s(),t.DNE(4,Et,2,2,"button",20)(5,St,2,2,"button",20)(6,Yt,2,2,"button",20)(7,Xt,2,2,"button",20)(8,$t,2,2,"button",20)(9,Nt,2,2,"button",20),t.k0s()()}if(2&i){const e=t.XpG();t.R7$(2),t.HbH(1===e.module?"tabs-main-true":"tabs-main-false"),t.R7$(2),t.Y8G("ngIf",null==e.selected_fp_consult?null:e.selected_fp_consult.id),t.R7$(),t.Y8G("ngIf",null==e.selected_fp_consult?null:e.selected_fp_consult.id),t.R7$(),t.Y8G("ngIf",null==e.selected_fp_consult?null:e.selected_fp_consult.id),t.R7$(),t.Y8G("ngIf",null==e.selected_fp_consult?null:e.selected_fp_consult.id),t.R7$(),t.Y8G("ngIf",null==e.selected_fp_consult?null:e.selected_fp_consult.id),t.R7$(),t.Y8G("ngIf",null==e.selected_fp_consult?null:e.selected_fp_consult.id)}}function Ot(i,l){if(1&i&&(t.j41(0,"div",24)(1,"div",25),t.nrm(2,"fa-icon",26),t.k0s(),t.j41(3,"div",27),t.EFF(4,"Fetching history..."),t.k0s()()),2&i){const e=t.XpG(2);t.R7$(2),t.Y8G("icon",e.faCircleNotch)}}function Bt(i,l){1&i&&(t.j41(0,"td",37)(1,"div",38),t.EFF(2," No records to show... "),t.k0s()())}function Dt(i,l){if(1&i){const e=t.RV6();t.j41(0,"tr",33),t.DNE(1,Bt,3,0,"td",34),t.j41(2,"td",35),t.EFF(3),t.nI1(4,"date"),t.k0s(),t.j41(5,"td",35),t.EFF(6),t.k0s(),t.j41(7,"td",35),t.EFF(8),t.k0s(),t.j41(9,"td",35)(10,"button",36),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG(3);return t.Njj(a.openFPConsult(n))}),t.EFF(11," Open "),t.k0s()()()}if(2&i){const e=l.$implicit,o=t.XpG(3);t.R7$(),t.Y8G("ngIf",!o.fp_visit_history),t.R7$(2),t.SpI(" ",t.i5U(4,4,e.created_at,"MM/dd/yyyy")," "),t.R7$(3),t.SpI(" ",null!=e&&null!=e.method&&null!=e.method.method&&e.method.method.desc?null==e||null==e.method||null==e.method.method?null:e.method.method.desc:"-"," "),t.R7$(2),t.SpI(" ",null!=e&&null!=e.method&&null!=e.method.client&&e.method.client.desc?null==e||null==e.method||null==e.method.client?null:e.method.client.desc:"-"," ")}}function Lt(i,l){if(1&i){const e=t.RV6();t.j41(0,"tr",33)(1,"td",37)(2,"div",39)(3,"div",40),t.EFF(4,"No records to show..."),t.k0s(),t.j41(5,"div",40)(6,"button",41),t.bIt("click",function(){t.eBV(e);const n=t.XpG(3);return t.Njj(n.switchPage(2))}),t.EFF(7," create record "),t.k0s()()()()()}}function Ut(i,l){if(1&i&&(t.j41(0,"table",28)(1,"thead",29)(2,"tr")(3,"th",30),t.EFF(4,"Visit Date"),t.k0s(),t.j41(5,"th",30),t.EFF(6,"Current Method"),t.k0s(),t.j41(7,"th",30),t.EFF(8,"Client Type"),t.k0s(),t.j41(9,"th",30),t.EFF(10,"Action"),t.k0s()()(),t.j41(11,"tbody"),t.DNE(12,Dt,12,7,"tr",31)(13,Lt,8,0,"tr",32),t.k0s()()),2&i){const e=t.XpG(2);t.R7$(12),t.Y8G("ngForOf",e.fp_visit_history),t.R7$(),t.Y8G("ngIf",0===e.fp_visit_history.length)}}function Ht(i,l){if(1&i&&(t.j41(0,"div",21),t.DNE(1,Ot,5,1,"div",22)(2,Ut,14,2,"table",23),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.fetching_history),t.R7$(),t.Y8G("ngIf",!e.fetching_history)}}function zt(i,l){if(1&i){const e=t.RV6();t.j41(0,"app-firsvisit",42),t.bIt("updateSelectedFp",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.updateSelectedFp(n))})("loadFP",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.loadFP())}),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("patient_id",e.patient_id)("fp_visit_history",e.selected_fp_consult)}}function Jt(i,l){if(1&i){const e=t.RV6();t.j41(0,"app-fphx",43),t.bIt("loadFP",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.loadFP())})("updateSelectedFp",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.updateSelectedFp(n))}),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("patient_id",e.patient_id)("fp_visit_history",e.selected_fp_consult)}}function qt(i,l){if(1&i){const e=t.RV6();t.j41(0,"app-fppe",42),t.bIt("updateSelectedFp",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.updateSelectedFp(n))})("loadFP",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.loadFP())}),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("patient_id",e.patient_id)("fp_visit_history",e.selected_fp_consult)}}function At(i,l){if(1&i){const e=t.RV6();t.j41(0,"app-pelvic",42),t.bIt("updateSelectedFp",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.updateSelectedFp(n))})("loadFP",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.loadFP())}),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("patient_id",e.patient_id)("fp_visit_history",e.selected_fp_consult)}}function Qt(i,l){if(1&i){const e=t.RV6();t.j41(0,"app-methods",42),t.bIt("updateSelectedFp",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.updateSelectedFp(n))})("loadFP",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.loadFP())}),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("patient_id",e.patient_id)("fp_visit_history",e.selected_fp_consult)}}function Wt(i,l){if(1&i){const e=t.RV6();t.j41(0,"app-fpchart",42),t.bIt("updateSelectedFp",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.updateSelectedFp(n))})("loadFP",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.loadFP())}),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("patient_id",e.patient_id)("fp_visit_history",e.selected_fp_consult)}}function Zt(i,l){if(1&i){const e=t.RV6();t.j41(0,"app-end-visit",44),t.bIt("toggleModal",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.toggleModal(n))}),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("consult_id",e.consult_id)("consult_date",null==e.consult_details[0]?null:e.consult_details[0].consult_date)("patient_id",null==e.consult_details[0]?null:e.consult_details[0].patient.id)("pt_group",null==e.consult_details[0]?null:e.consult_details[0].pt_group)}}function Kt(i,l){if(1&i){const e=t.RV6();t.j41(0,"app-methods-modal",45),t.bIt("toggleModal",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.toggleModal(n))})("loadFP",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.loadFP())}),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("fp_visit_history",e.selected_fp_consult)}}function te(i,l){if(1&i){const e=t.RV6();t.j41(0,"app-fpchart-modal",46),t.bIt("toggleModal",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.toggleModal(n))})("loadFP",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.loadFP())})("loadChart",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.loadChart())}),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("patient_id",e.patient_id)("fp_visit_history",e.selected_fp_consult)}}function ee(i,l){if(1&i){const e=t.RV6();t.j41(0,"app-caserate",47),t.bIt("switchPage",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.switchPage(n))}),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("patient_id",e.selected_fp_consult.patient_id)("program_id",e.selected_fp_consult.id)("program_name","fp")("max_date",e.max_date)}}function ie(i,l){if(1&i){const e=t.RV6();t.j41(0,"app-eclaims",48),t.bIt("switchPage",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.switchPage(n))}),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("program_id",e.selected_fp_consult.id)("program_name","fp")("max_date",e.max_date)("selected_case",e.selected_fp_consult)}}const ne=[{path:"",component:(()=>{class i{switchPage(e){1===e&&this.loadFP(),this.pages=e}switchTab(e){this.module=e}constructor(e,o){this.http=e,this.route=o,this.faCalendar=r.okg,this.faTimes=r.GRI,this.faDoorClosed=r.K_I,this.faCircleNotch=r.s4k,this.showModal=!1,this.hideButton=!0,this.pages=1,this.module=1,this.show_end=!1,this.fetching_history=!0,this.modals=[],this.fp_visit_history=[],this.show_form=!1}openModal(){this.showModal=!this.showModal,this.hideButton=!this.hideButton}toggleModal(e){this.modals[e]=!this.modals[e]}openFPConsult(e){this.selected_fp_consult=e,this.pages=2}updateSelectedFp(e){this.selected_fp_consult=e}loadFP(){this.http.get("family-planning/fp-records",{params:{patient_id:this.patient_id,per_page:"all"}}).subscribe({next:o=>{this.fp_visit_history=o.data,this.fetching_history=!1},complete:()=>{},error:o=>{console.log(o)}})}loadConsultDetails(){this.http.get("consultation/records",{params:{patient_id:this.patient_id,id:this.consult_id}}).subscribe({next:e=>{this.consult_details=e.data,this.show_form=!0},error:e=>console.log(e)})}ngOnInit(){this.patient_id=this.route.snapshot.paramMap.get("id"),this.consult_id=this.route.snapshot.paramMap.get("consult_id"),this.loadFP(),this.loadConsultDetails()}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(m.k),t.rXU(u.nX))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-familyplanning"]],decls:14,vars:14,consts:[["class","flex",4,"ngIf"],["class","mt-2 flex justify-between border-b border-slate-300 text-xs",4,"ngIf"],["class","my-5 w-full border border-gray-200 shadow-md rounded-xl",4,"ngIf"],[3,"patient_id","fp_visit_history","updateSelectedFp","loadFP",4,"ngIf"],[3,"patient_id","fp_visit_history","loadFP","updateSelectedFp",4,"ngIf"],[3,"consult_id","consult_date","patient_id","pt_group","toggleModal",4,"ngIf"],[3,"fp_visit_history","toggleModal","loadFP",4,"ngIf"],[3,"patient_id","fp_visit_history","toggleModal","loadFP","loadChart",4,"ngIf"],[3,"patient_id","program_id","program_name","max_date","switchPage",4,"ngIf"],[3,"program_id","program_name","max_date","selected_case","switchPage",4,"ngIf"],[1,"flex"],[1,"mt-4","flex","flex-row","border-b","border-slate-300","text-xs"],[1,"tabs-main","w-36",3,"click"],[1,"ml-auto"],["type","button","class","btn-end-visit ml-auto mt-5",3,"click",4,"ngIf"],["type","button",1,"btn-end-visit","ml-auto","mt-5",3,"click"],[1,"mr-1",3,"icon"],[1,"mt-2","flex","justify-between","border-b","border-slate-300","text-xs"],[1,"flex","flex-row"],[1,"tabs-main","w-28",3,"click"],["class","tabs-main w-28",3,"class","click",4,"ngIf"],[1,"my-5","w-full","border","border-gray-200","shadow-md","rounded-xl"],["class","flex flex-col",4,"ngIf"],["class","w-full text-sm text-left",4,"ngIf"],[1,"flex","flex-col"],[1,"w-full","flex","justify-center"],["animation","spin",1,"pt-10",3,"icon"],[1,"w-full","flex","justify-center","pb-10","font-semibold"],[1,"w-full","text-sm","text-left"],[1,"text-xs","text-white","uppercase","bg-blue-500"],["scope","col",1,"py-3","px-6"],["class","bg-white border-b",4,"ngFor","ngForOf"],["class","bg-white border-b",4,"ngIf"],[1,"bg-white","border-b"],["colspan","7",4,"ngIf"],[1,"py-4","px-6"],["type","button",1,"rounded-md","bg-blue-500","text-white","py-1","px-2",3,"click"],["colspan","7"],[1,"text-center"],[1,"text-center","py-3","flex","flex-col"],[1,"flex","justify-center"],["type","button",1,"mt-3","bg-blue-500","px-3","py-1","rounded-md","text-white","hover:opacity-75",3,"click"],[3,"updateSelectedFp","loadFP","patient_id","fp_visit_history"],[3,"loadFP","updateSelectedFp","patient_id","fp_visit_history"],[3,"toggleModal","consult_id","consult_date","patient_id","pt_group"],[3,"toggleModal","loadFP","fp_visit_history"],[3,"toggleModal","loadFP","loadChart","patient_id","fp_visit_history"],[3,"switchPage","patient_id","program_id","program_name","max_date"],[3,"switchPage","program_id","program_name","max_date","selected_case"]],template:function(o,n){1&o&&t.DNE(0,Tt,10,7,"div",0)(1,Vt,10,8,"nav",1)(2,Ht,3,2,"div",2)(3,zt,1,2,"app-firsvisit",3)(4,Jt,1,2,"app-fphx",4)(5,qt,1,2,"app-fppe",3)(6,At,1,2,"app-pelvic",3)(7,Qt,1,2,"app-methods",3)(8,Wt,1,2,"app-fpchart",3)(9,Zt,1,4,"app-end-visit",5)(10,Kt,1,1,"app-methods-modal",6)(11,te,1,2,"app-fpchart-modal",7)(12,ee,1,4,"app-caserate",8)(13,ie,1,4,"app-eclaims",9),2&o&&(t.Y8G("ngIf",n.show_form),t.R7$(),t.Y8G("ngIf",2===n.pages),t.R7$(),t.Y8G("ngIf",1===n.pages),t.R7$(),t.Y8G("ngIf",2===n.pages&&1===n.module),t.R7$(),t.Y8G("ngIf",2===n.pages&&2===n.module),t.R7$(),t.Y8G("ngIf",2===n.pages&&4===n.module),t.R7$(),t.Y8G("ngIf",2===n.pages&&5===n.module),t.R7$(),t.Y8G("ngIf",2===n.pages&&6===n.module),t.R7$(),t.Y8G("ngIf",2===n.pages&&7===n.module),t.R7$(),t.Y8G("ngIf",n.modals.end_visit),t.R7$(),t.Y8G("ngIf",n.modals["methods-modal"]),t.R7$(),t.Y8G("ngIf",n.modals["fpchart-modal"]),t.R7$(),t.Y8G("ngIf",2===n.pages&&8===n.module),t.R7$(),t.Y8G("ngIf",3===n.pages))},dependencies:[c.Sq,c.bT,h.aY,j.i,F.u,x.G,L,J,K,st,ct,It,w,k,c.vh],styles:[".border-check[_ngcontent-%COMP%]{border:1px dashed red}"]})}return i})()}];let oe=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.$C({type:i});static#i=this.\u0275inj=t.G2t({imports:[u.iI.forChild(ne),u.iI]})}return i})();var se=d(4959);let ae=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.$C({type:i});static#i=this.\u0275inj=t.G2t({providers:[(0,C.Dw)()],imports:[c.MD,oe,h.dX,s.YN,s.X1,se.u,F.u,b.c,x.G]})}return i})()}}]);