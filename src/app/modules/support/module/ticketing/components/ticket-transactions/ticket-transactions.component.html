<div class="w-full flex flex-col">
  <div class="flex justify-between border-b border-slate-200">
    <div>
      Ticket #: 423 <br />
    </div>
    <div>
      Created on: {{ selected_ticket.start_date | date: 'MM/dd/yyyy'}}
      <span class="ml-1" *ngIf="selected_ticket.end_date"> | Resolved on: {{ selected_ticket.end_date | date: 'MM/dd/yyyy'}}</span>
    </div>
  </div>

  <div class="flex flex-col mt-5">
    <div>
      <strong>Title:</strong> {{ selected_ticket.title }}
    </div>
    <div>
      <strong>Details:</strong> {{ selected_ticket.details }}
    </div>
  </div>

  <div class="flex flex-col">
    <div *ngFor="let item of comment_list" class="w-full flex flex-col mt-3">
      <div class="w-11/12 mb-2" [ngClass]="{'ml-auto' : user_id === item.facility_user_id}">
        <div class="text-xs mx-1" [ngClass]="{'text-right': user_id === item.facility_user_id}">
          {{
            user_id === item.facility_user_id
            ? 'You'
            : (
                item.user
                ? (item.user.last_name + ', ' + item.user.first_name)
                : item.facility_user_name
              )
          }}
        </div>
        <div class="border border-slate-100 shadow-xs p-1" [class]="user_id === item.facility_user_id ? 'bg-green-100' : 'bg-blue-100'">
          {{ item.comment }}
        </div>
        <div class="text-xs italic mx-1" [ngClass]="{'text-right': user_id === item.facility_user_id}">
          {{ item.created_at | date: 'MM/dd/yyyy HH:mm a'}}
        </div>
      </div>
    </div>
    <div *ngIf="!comment_list" class="italic">No Comments Found...</div>
  </div>

  <div class="grid grid-cols-1 mt-5">
    <div class="grid grid-cols-4">
      <label class="col-span-4 pl-2">Add a comment</label>
      <textarea rows="3" type="text" [(ngModel)]="log_comment" class="col-span-4 input"></textarea>
    </div>

    <div class="flex justify-center mt-3">
      <button type="button" [disabled]="is_saving || log_comment === ''" (click)="onSubmit()" class="w-36 disabled:bg-gray-400 disabled:opacity-50 disabled:pointer-events-none right w-1/3 py-2 text-sm font-semibold text-white transition-colors duration-300 bg-blue-500 rounded-md shadow hover:bg-blue-600 focus:outline-none focus:ring-blue-200 focus:ring-4">
        <fa-icon *ngIf="!is_saving" [icon]="faSave"></fa-icon>
        <fa-icon *ngIf="is_saving" [icon]="faCircleNotch" animation="spin"></fa-icon>
        {{ is_saving ? 'Saving' : 'Save'}}
      </button>
    </div>
  </div>
</div>
