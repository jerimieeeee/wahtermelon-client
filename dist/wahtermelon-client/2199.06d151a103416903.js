"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[2199],{4580:(nt,c,d)=>{d.r(c),d.d(c,{XmlUploadModule:()=>ot});var r=d(177),m=d(2517),s=d(5383),t=d(4438),f=d(3318),v=d(5794),p=d(9417),u=d(60);function g(e,l){if(1&e&&(t.j41(0,"div",22)(1,"span",23),t.EFF(2),t.k0s(),t.EFF(3),t.nI1(4,"json"),t.k0s()),2&e){const i=l.$implicit;t.R7$(2),t.SpI("",i.key,":"),t.R7$(),t.SpI(" ",t.bMT(4,2,i.value)," ")}}function b(e,l){if(1&e&&(t.j41(0,"div"),t.DNE(1,g,5,4,"div",21),t.nI1(2,"keyvalue"),t.k0s()),2&e){const i=l.$implicit;t.R7$(),t.Y8G("ngForOf",t.bMT(2,1,i.value))}}function h(e,l){if(1&e&&(t.j41(0,"div"),t.DNE(1,b,3,3,"div",19),t.nI1(2,"keyvalue"),t.k0s()),2&e){const i=t.XpG().$implicit;t.R7$(),t.Y8G("ngForOf",t.bMT(2,1,i.value))}}function k(e,l){if(1&e&&(t.j41(0,"div",22)(1,"span",23),t.EFF(2),t.k0s(),t.EFF(3),t.nI1(4,"json"),t.k0s()),2&e){const i=l.$implicit;t.R7$(2),t.SpI("",i.key,":"),t.R7$(),t.SpI(" ",t.bMT(4,2,i.value)," ")}}function x(e,l){if(1&e&&(t.j41(0,"div"),t.DNE(1,k,5,4,"div",21),t.nI1(2,"keyvalue"),t.k0s()),2&e){const i=t.XpG().$implicit;t.R7$(),t.Y8G("ngForOf",t.bMT(2,1,i.value))}}function I(e,l){if(1&e&&(t.j41(0,"div"),t.DNE(1,h,3,3,"div",20)(2,x,3,3,"div",20),t.k0s()),2&e){const i=l.$implicit;t.R7$(),t.Y8G("ngIf",i.value.length>0),t.R7$(),t.Y8G("ngIf",!i.value.length)}}function F(e,l){if(1&e&&(t.j41(0,"tr",18),t.DNE(1,I,3,2,"div",19),t.nI1(2,"keyvalue"),t.k0s()),2&e){const i=t.XpG(2);t.R7$(),t.Y8G("ngForOf",t.bMT(2,1,i.xml_to_view.ENLISTMENTS))}}function j(e,l){if(1&e&&(t.j41(0,"div",22)(1,"span",23),t.EFF(2),t.k0s(),t.EFF(3),t.nI1(4,"json"),t.k0s()),2&e){const i=l.$implicit;t.R7$(2),t.SpI("",i.key,":"),t.R7$(),t.SpI(" ",t.bMT(4,2,i.value)," ")}}function T(e,l){if(1&e&&(t.j41(0,"div"),t.DNE(1,j,5,4,"div",21),t.nI1(2,"keyvalue"),t.k0s()),2&e){const i=l.$implicit;t.R7$(),t.Y8G("ngForOf",t.bMT(2,1,i.value))}}function X(e,l){if(1&e&&(t.j41(0,"div"),t.DNE(1,T,3,3,"div",19),t.nI1(2,"keyvalue"),t.k0s()),2&e){const i=t.XpG().$implicit;t.R7$(),t.Y8G("ngForOf",t.bMT(2,1,i.value))}}function $(e,l){if(1&e&&(t.j41(0,"div",22)(1,"span",23),t.EFF(2),t.k0s(),t.EFF(3),t.nI1(4,"json"),t.k0s()),2&e){const i=l.$implicit;t.R7$(2),t.SpI("",i.key,":"),t.R7$(),t.SpI(" ",t.bMT(4,2,i.value)," ")}}function y(e,l){if(1&e&&(t.j41(0,"div"),t.DNE(1,$,5,4,"div",21),t.nI1(2,"keyvalue"),t.k0s()),2&e){const i=t.XpG().$implicit;t.R7$(),t.Y8G("ngForOf",t.bMT(2,1,i.value))}}function E(e,l){if(1&e&&(t.j41(0,"div"),t.DNE(1,X,3,3,"div",20)(2,y,3,3,"div",20),t.k0s()),2&e){const i=l.$implicit;t.R7$(),t.Y8G("ngIf",i.value.length>0),t.R7$(),t.Y8G("ngIf",!i.value.length)}}function C(e,l){if(1&e&&(t.j41(0,"tr",18),t.DNE(1,E,3,2,"div",19),t.nI1(2,"keyvalue"),t.k0s()),2&e){const i=t.XpG(2);t.R7$(),t.Y8G("ngForOf",t.bMT(2,1,i.xml_to_view.PROFILING))}}function G(e,l){if(1&e&&(t.j41(0,"div",22)(1,"span",23),t.EFF(2),t.k0s(),t.EFF(3),t.nI1(4,"json"),t.k0s()),2&e){const i=l.$implicit;t.R7$(2),t.SpI("",i.key,":"),t.R7$(),t.SpI(" ",t.bMT(4,2,i.value)," ")}}function M(e,l){if(1&e&&(t.j41(0,"div"),t.DNE(1,G,5,4,"div",21),t.nI1(2,"keyvalue"),t.k0s()),2&e){const i=l.$implicit;t.R7$(),t.Y8G("ngForOf",t.bMT(2,1,i.value))}}function R(e,l){if(1&e&&(t.j41(0,"div"),t.DNE(1,M,3,3,"div",19),t.nI1(2,"keyvalue"),t.k0s()),2&e){const i=t.XpG().$implicit;t.R7$(),t.Y8G("ngForOf",t.bMT(2,1,i.value))}}function U(e,l){if(1&e&&(t.j41(0,"div",22)(1,"span",23),t.EFF(2),t.k0s(),t.EFF(3),t.nI1(4,"json"),t.k0s()),2&e){const i=l.$implicit;t.R7$(2),t.SpI("",i.key,":"),t.R7$(),t.SpI(" ",t.bMT(4,2,i.value)," ")}}function w(e,l){if(1&e&&(t.j41(0,"div"),t.DNE(1,U,5,4,"div",21),t.nI1(2,"keyvalue"),t.k0s()),2&e){const i=t.XpG().$implicit;t.R7$(),t.Y8G("ngForOf",t.bMT(2,1,i.value))}}function N(e,l){if(1&e&&(t.j41(0,"div"),t.DNE(1,R,3,3,"div",20)(2,w,3,3,"div",20),t.k0s()),2&e){const i=l.$implicit;t.R7$(),t.Y8G("ngIf",i.value.length>0),t.R7$(),t.Y8G("ngIf",!i.value.length)}}function Y(e,l){if(1&e&&(t.j41(0,"tr",18),t.DNE(1,N,3,2,"div",19),t.nI1(2,"keyvalue"),t.k0s()),2&e){const i=t.XpG(2);t.R7$(),t.Y8G("ngForOf",t.bMT(2,1,i.xml_to_view.SOAPS))}}function D(e,l){if(1&e&&(t.j41(0,"div",22)(1,"span",23),t.EFF(2),t.k0s(),t.EFF(3),t.nI1(4,"json"),t.k0s()),2&e){const i=l.$implicit;t.R7$(2),t.SpI("",i.key,":"),t.R7$(),t.SpI(" ",t.bMT(4,2,i.value)," ")}}function S(e,l){if(1&e&&(t.j41(0,"div"),t.DNE(1,D,5,4,"div",21),t.nI1(2,"keyvalue"),t.k0s()),2&e){const i=l.$implicit;t.R7$(),t.Y8G("ngForOf",t.bMT(2,1,i.value))}}function O(e,l){if(1&e&&(t.j41(0,"div"),t.DNE(1,S,3,3,"div",19),t.nI1(2,"keyvalue"),t.k0s()),2&e){const i=t.XpG().$implicit;t.R7$(),t.Y8G("ngForOf",t.bMT(2,1,i.value))}}function A(e,l){if(1&e&&(t.j41(0,"div",22)(1,"span",23),t.EFF(2),t.k0s(),t.EFF(3),t.nI1(4,"json"),t.k0s()),2&e){const i=l.$implicit;t.R7$(2),t.SpI("",i.key,":"),t.R7$(),t.SpI(" ",t.bMT(4,2,i.value)," ")}}function L(e,l){if(1&e&&(t.j41(0,"div"),t.DNE(1,A,5,4,"div",21),t.nI1(2,"keyvalue"),t.k0s()),2&e){const i=t.XpG().$implicit;t.R7$(),t.Y8G("ngForOf",t.bMT(2,1,i.value))}}function B(e,l){if(1&e&&(t.j41(0,"div"),t.DNE(1,O,3,3,"div",20)(2,L,3,3,"div",20),t.k0s()),2&e){const i=l.$implicit;t.R7$(),t.Y8G("ngIf",i.value.length>0),t.R7$(),t.Y8G("ngIf",!i.value.length)}}function V(e,l){if(1&e&&(t.j41(0,"tr",18),t.DNE(1,B,3,2,"div",19),t.nI1(2,"keyvalue"),t.k0s()),2&e){const i=t.XpG(2);t.R7$(),t.Y8G("ngForOf",t.bMT(2,1,i.xml_to_view.DIAGNOSTICEXAMRESULTS))}}function P(e,l){if(1&e&&(t.j41(0,"div",22)(1,"span",23),t.EFF(2),t.k0s(),t.EFF(3),t.nI1(4,"json"),t.k0s()),2&e){const i=l.$implicit;t.R7$(2),t.SpI("",i.key,":"),t.R7$(),t.SpI(" ",t.bMT(4,2,i.value)," ")}}function z(e,l){if(1&e&&(t.j41(0,"div"),t.DNE(1,P,5,4,"div",21),t.nI1(2,"keyvalue"),t.k0s()),2&e){const i=l.$implicit;t.R7$(),t.Y8G("ngForOf",t.bMT(2,1,i.value))}}function H(e,l){if(1&e&&(t.j41(0,"div"),t.DNE(1,z,3,3,"div",19),t.nI1(2,"keyvalue"),t.k0s()),2&e){const i=t.XpG().$implicit;t.R7$(),t.Y8G("ngForOf",t.bMT(2,1,i.value))}}function J(e,l){if(1&e&&(t.j41(0,"div",22)(1,"span",23),t.EFF(2),t.k0s(),t.EFF(3),t.nI1(4,"json"),t.k0s()),2&e){const i=l.$implicit;t.R7$(2),t.SpI("",i.key,":"),t.R7$(),t.SpI(" ",t.bMT(4,2,i.value)," ")}}function Z(e,l){if(1&e&&(t.j41(0,"div"),t.DNE(1,J,5,4,"div",21),t.nI1(2,"keyvalue"),t.k0s()),2&e){const i=t.XpG().$implicit;t.R7$(),t.Y8G("ngForOf",t.bMT(2,1,i.value))}}function K(e,l){if(1&e&&(t.j41(0,"div"),t.DNE(1,H,3,3,"div",20)(2,Z,3,3,"div",20),t.k0s()),2&e){const i=l.$implicit;t.R7$(),t.Y8G("ngIf",i.value.length>0),t.R7$(),t.Y8G("ngIf",!i.value.length)}}function Q(e,l){if(1&e&&(t.j41(0,"tr",18),t.DNE(1,K,3,2,"div",19),t.nI1(2,"keyvalue"),t.k0s()),2&e){const i=t.XpG(2);t.R7$(),t.Y8G("ngForOf",t.bMT(2,1,i.xml_to_view.MEDICINES))}}function W(e,l){if(1&e){const i=t.RV6();t.j41(0,"table",10)(1,"tbody")(2,"tr",11),t.bIt("click",function(){t.eBV(i);const o=t.XpG();return t.Njj(o.toggleAccordion("enlistment"))}),t.j41(3,"td",12),t.EFF(4,"ENLISTMENTS"),t.k0s()(),t.DNE(5,F,3,3,"tr",13),t.j41(6,"tr",11),t.bIt("click",function(){t.eBV(i);const o=t.XpG();return t.Njj(o.toggleAccordion("profiling"))}),t.j41(7,"td",14),t.EFF(8,"PROFILING"),t.k0s()(),t.DNE(9,C,3,3,"tr",13),t.j41(10,"tr",11),t.bIt("click",function(){t.eBV(i);const o=t.XpG();return t.Njj(o.toggleAccordion("soaps"))}),t.j41(11,"td",15),t.EFF(12,"SOAPS"),t.k0s()(),t.DNE(13,Y,3,3,"tr",13),t.j41(14,"tr",11),t.bIt("click",function(){t.eBV(i);const o=t.XpG();return t.Njj(o.toggleAccordion("diagnostic"))}),t.j41(15,"td",16),t.EFF(16,"DIAGNOSTIC EXAM RESULTS"),t.k0s()(),t.DNE(17,V,3,3,"tr",13),t.j41(18,"tr",11),t.bIt("click",function(){t.eBV(i);const o=t.XpG();return t.Njj(o.toggleAccordion("medicines"))}),t.j41(19,"td",17),t.EFF(20,"MEDICINE"),t.k0s()(),t.DNE(21,Q,3,3,"tr",13),t.k0s()()}if(2&e){const i=t.XpG();t.R7$(5),t.Y8G("ngIf",i.accordion.enlistment),t.R7$(4),t.Y8G("ngIf",i.accordion.profiling),t.R7$(4),t.Y8G("ngIf",i.accordion.soaps),t.R7$(4),t.Y8G("ngIf",i.accordion.diagnostic),t.R7$(4),t.Y8G("ngIf",i.accordion.medicines)}}let q=(()=>{class e{toggleAccordion(i){this.accordion[i]=!this.accordion[i]}closeModal(){this.toggleModal.emit({name:"uploaded-xml",data:null})}constructor(){this.toggleModal=new t.bkB,this.is_loading=!1,this.faSpinner=s.z1G,this.show_form=!1,this.enlistments=[],this.accordion=[]}ngOnInit(){this.show_form=!0}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-uploaded-xml"]],inputs:{xml_to_view:"xml_to_view"},outputs:{toggleModal:"toggleModal"},standalone:!1,decls:12,vars:1,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-4xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100","flex","justify-center"],["class","w-10/12 border border-slate-300 rounded-lg",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"btn-save","bg-gray-400","px-10",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"w-10/12","border","border-slate-300","rounded-lg"],[1,"cursor-pointer","h-10",3,"click"],[1,"font-bold","text-center","bg-green-300","w-full"],["class","border-b border-slate-200",4,"ngIf"],[1,"font-bold","text-center","bg-blue-300","w-full"],[1,"font-bold","text-center","bg-yellow-300","w-full"],[1,"font-bold","text-center","bg-red-300","w-full"],[1,"font-bold","text-center","bg-orange-300","w-full"],[1,"border-b","border-slate-200"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","pb-5 text-sm",4,"ngFor","ngForOf"],[1,"pb-5","text-sm"],[1,"font-semibold"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.EFF(5," XML CONTENT "),t.k0s()(),t.j41(6,"div",5),t.DNE(7,W,22,5,"table",6),t.k0s(),t.j41(8,"div",7)(9,"button",8),t.bIt("click",function(){return o.closeModal()}),t.EFF(10,"Close"),t.k0s()()()()(),t.nrm(11,"div",9)),2&n&&(t.R7$(7),t.Y8G("ngIf",o.show_form))},dependencies:[r.Sq,r.bT,r.TG,r.lG],encapsulation:2})}}return e})();function tt(e,l){if(1&e&&(t.j41(0,"tr")(1,"td",16)(2,"div",17)(3,"div",18),t.nrm(4,"fa-icon",19),t.j41(5,"div",20),t.EFF(6," Uploading XML... "),t.k0s()()()()()),2&e){const i=t.XpG();t.R7$(4),t.Y8G("icon",i.faCircleNotch)}}function et(e,l){if(1&e){const i=t.RV6();t.j41(0,"app-uploaded-xml",21),t.bIt("toggleModal",function(o){t.eBV(i);const _=t.XpG();return t.Njj(_.toggleModal(o))}),t.k0s()}if(2&e){const i=t.XpG();t.Y8G("xml_to_view",i.xml_to_view)}}const it=[{path:"",component:(()=>{class e{toggleModal(i){this.modals[i.name]=!this.modals[i.name],i.data&&(Object.entries(i.data).forEach(([n,o],_)=>{this.uploaded_list.push(o)}),localStorage.setItem("uploaded-xml",JSON.stringify(this.uploaded_list)))}openModal(){this.toggleModal({name:"uploaded-xml"})}readXML(i){this.file_to_upload=i}uploadFile(i){this.is_uploading=!0;const n=new FormData;this.file_upload_count=i.length,this.uploaded_count=0;for(let o=0;o<i.length;o++){let _=i[o].name.split(".");"enc"===_[_.length-1]&&(this.uploaded_count+=1,n.append("xml[]",i[o]))}n.append("cipher_key",this.cipher_key),this.http.post("konsulta/upload-xml",n).subscribe({next:o=>{this.resetInput(),this.showToast("success","Uploaded "+this.uploaded_count+" of "+this.file_upload_count+" files","Upload Success")},error:o=>{this.resetInput()}})}showToast(i,n,o){this.toastr[i](n,o,{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0})}resetInput(){this.is_uploading=!1,this.file_to_upload=null,this.xmlFile=null}viewContent(i){this.xml_to_view=i,this.openModal()}constructor(i,n){this.http=i,this.toastr=n,this.faCircleNotch=s.s4k,this.faSearch=s.MjD,this.faCalendarDays=s.l6G,this.faArrowsRotate=s.$3Z,this.faUpload=s.JmV,this.faClipboardList=s.YEm,this.per_page=10,this.xml_list=[],this.modals=[],this.uploaded_list=[],this.file_to_upload=null,this.xmlFile=null,this.uploaded_count=0,this.is_uploading=!1}static{this.\u0275fac=function(n){return new(n||e)(t.rXU(f.k),t.rXU(v.tw))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-xml-upload"]],standalone:!1,decls:24,vars:6,consts:[[1,"bg-white","border","border-solid","border-slate-100","rounded-xl","shadow-md","h-full"],[1,"border","border-solid","border-slate-100","rounded-t-xl","font-semibold","justify-between","h-full"],[1,"flex","flex-col","justify-center","w-2/5","rounded-lg","border","border-slate-200","mx-auto","my-28"],[1,"bg-blue-500","text-white","text-lg","rounded-t-lg","p-2"],[1,"w-3/4","flex","justify-center","mx-auto","py-5"],["type","file","id","formFile",1,"form-control","w-full","px-3","py-1.5","text-base","font-normal","text-gray-700","bg-white","bg-clip-padding","border","border-solid","border-gray-300","rounded-lg","transition","ease-in-out","m-0","focus:text-gray-700","focus:bg-white","focus:border-blue-600","focus:outline-none",3,"change","ngModelChange","ngModel"],[1,"w-3/4","flex","justify-center","mx-auto","pb-5"],["type","text","placeholder","enter cipher key",1,"rounded-lg","w-full","px-3","py-2","border","border-solid","border-gray-300","text-sm","placeholder-gray-400",3,"ngModelChange","ngModel"],[1,"w-3/4","flex","justify-center","mx-auto"],["type","button",1,"disabled:bg-gray-400","w-full","py-2","mb-5","bg-blue-500","text-white","rounded-lg","text-sm",3,"click","disabled"],[1,"",3,"icon"],[1,"w-full"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400","mb-5","hidden"],[1,"text-center"],[4,"ngIf"],[3,"xml_to_view","toggleModal",4,"ngIf"],["colspan","2"],[1,"grid","grid-cols-1","w-full","mt-10"],[1,"flex","justify-center","mt-3"],["animation","spin",1,"text-lg","mr-2","text-blue-500",3,"icon"],[1,"text-center","italic","pt-1"],[3,"toggleModal","xml_to_view"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.EFF(4," Upload XMLs "),t.k0s(),t.j41(5,"div",4)(6,"input",5),t.bIt("change",function(a){return o.readXML(a.target.files)}),t.mxI("ngModelChange",function(a){return t.DH7(o.xmlFile,a)||(o.xmlFile=a),a}),t.k0s()(),t.j41(7,"div",6)(8,"input",7),t.mxI("ngModelChange",function(a){return t.DH7(o.cipher_key,a)||(o.cipher_key=a),a}),t.k0s()(),t.j41(9,"div",8)(10,"button",9),t.bIt("click",function(){return o.uploadFile(o.file_to_upload)}),t.nrm(11,"fa-icon",10),t.EFF(12," Upload XML "),t.k0s()()(),t.j41(13,"div",11)(14,"table",12)(15,"thead")(16,"tr")(17,"th",13),t.EFF(18,"Name"),t.k0s(),t.j41(19,"th",13),t.EFF(20,"Birthdate"),t.k0s()()(),t.j41(21,"tbody"),t.DNE(22,tt,7,1,"tr",14),t.k0s()()()()(),t.DNE(23,et,1,1,"app-uploaded-xml",15)),2&n&&(t.R7$(6),t.R50("ngModel",o.xmlFile),t.R7$(2),t.R50("ngModel",o.cipher_key),t.R7$(2),t.Y8G("disabled",!o.file_to_upload||!o.cipher_key),t.R7$(),t.Y8G("icon",o.faUpload),t.R7$(11),t.Y8G("ngIf",o.is_uploading),t.R7$(),t.Y8G("ngIf",o.modals["uploaded-xml"]))},dependencies:[r.bT,p.me,p.BC,p.vS,u.aY,q],encapsulation:2})}}return e})()}];let lt=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[m.iI.forChild(it),m.iI]})}}return e})(),ot=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[r.MD,lt,p.YN,u.dX]})}}return e})()}}]);