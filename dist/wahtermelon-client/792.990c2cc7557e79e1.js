"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[792],{5792:(Sn,H,d)=>{d.r(H),d.d(H,{ConsultationModule:()=>y});var _=d(6895),v=d(2325),r=d(2687),f=d(7340),t=d(1571),j=d(6205);function et(n,i){if(1&n&&(t.TgZ(0,"div",7)(1,"div",8),t._UZ(2,"apx-chart",9),t.qZA()()),2&n){const e=t.oxw(3);t.xp6(2),t.Q6J("series",null==e.chartOptions?null:e.chartOptions.series)("chart",null==e.chartOptions?null:e.chartOptions.chart)("xaxis",null==e.chartOptions?null:e.chartOptions.xaxis)("stroke",null==e.chartOptions?null:e.chartOptions.stroke)("tooltip",null==e.chartOptions?null:e.chartOptions.tooltip)("dataLabels",null==e.chartOptions?null:e.chartOptions.dataLabels)("title",null==e.chartOptions?null:e.chartOptions.title)}}function nt(n,i){if(1&n&&(t.TgZ(0,"div",10)(1,"div",11),t._UZ(2,"apx-chart",9),t.qZA()()),2&n){const e=t.oxw(3);t.xp6(2),t.Q6J("series",null==e.WeightChart?null:e.WeightChart.series)("chart",null==e.WeightChart?null:e.WeightChart.chart)("xaxis",null==e.WeightChart?null:e.WeightChart.xaxis)("stroke",null==e.WeightChart?null:e.WeightChart.stroke)("tooltip",null==e.WeightChart?null:e.WeightChart.tooltip)("dataLabels",null==e.WeightChart?null:e.WeightChart.dataLabels)("title",null==e.WeightChart?null:e.WeightChart.title)}}function it(n,i){if(1&n&&(t.TgZ(0,"div",10)(1,"div",12),t._UZ(2,"apx-chart",9),t.qZA()()),2&n){const e=t.oxw(3);t.xp6(2),t.Q6J("series",null==e.BmiChart?null:e.BmiChart.series)("chart",null==e.BmiChart?null:e.BmiChart.chart)("xaxis",null==e.BmiChart?null:e.BmiChart.xaxis)("stroke",null==e.BmiChart?null:e.BmiChart.stroke)("tooltip",null==e.BmiChart?null:e.BmiChart.tooltip)("dataLabels",null==e.BmiChart?null:e.BmiChart.dataLabels)("title",null==e.BmiChart?null:e.BmiChart.title)}}function ot(n,i){if(1&n&&(t.TgZ(0,"div",4),t.YNc(1,et,3,7,"div",5),t.YNc(2,nt,3,7,"div",6),t.YNc(3,it,3,7,"div",6),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.show_bp),t.xp6(1),t.Q6J("ngIf",e.show_weight),t.xp6(1),t.Q6J("ngIf",e.show_bmi)}}function st(n,i){if(1&n&&(t.TgZ(0,"div",1),t._UZ(1,"div",2),t.YNc(2,ot,4,3,"div",3),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.show_graphs)}}class C{patientVitals(i){this.vitals_graph.systolic=[],this.vitals_graph.diastolic=[],this.vitals_graph.bp_date=[],this.vitals_graph.weight=[],this.vitals_graph.weight_date=[],Object.entries(i).forEach(([e,o],s)=>{let l=o;l.bp_systolic&&(this.vitals_graph.systolic.push(l.bp_systolic),this.vitals_graph.diastolic.push(l.bp_diastolic),this.vitals_graph.bp_date.push(l.vitals_date)),l.patient_weight&&(this.vitals_graph.weight.push(l.patient_weight),this.vitals_graph.weight_date.push(l.vitals_date)),l.patient_bmi&&(this.vitals_graph.bmi.push(l.patient_bmi),this.vitals_graph.bmi_date.push(l.vitals_date))}),this.vitals_graph.systolic.length>0||this.vitals_graph.diastolic.length>0||this.vitals_graph.weight.length>0||this.vitals_graph.bmi.length>0?(this.selected_chart="all_chart",this.loadChart(this.selected_chart)):this.showChart=!1,this.generateAllChart()}generateBPChart(){this.chartOptions={series:[{name:"Systolic",data:this.vitals_graph.systolic},{name:"Diastolic",data:this.vitals_graph.diastolic}],chart:{height:200,type:"area"},dataLabels:{enabled:!1},stroke:{curve:"smooth"},title:{text:"Blood Pressure History"},xaxis:{type:"datetime",categories:this.vitals_graph.bp_date},tooltip:{x:{format:"MM/dd/yyyy HH:mm"}}}}generateWeightChart(){this.WeightChart={series:[{name:"Weight",data:this.vitals_graph.weight}],chart:{height:200,type:"line"},dataLabels:{enabled:!1},stroke:{curve:"smooth"},title:{text:"Weight History"},xaxis:{type:"datetime",categories:this.vitals_graph.weight_date},tooltip:{x:{format:"MM/dd/yyyy HH:mm"}}}}generateBMIChart(){this.BmiChart={series:[{name:"BMI",data:this.vitals_graph.bmi}],chart:{height:200,type:"line"},dataLabels:{enabled:!1},stroke:{curve:"smooth"},title:{text:"BMI History"},xaxis:{type:"datetime",categories:this.vitals_graph.bmi_date},tooltip:{x:{format:"MM/dd/yyyy HH:mm"}}}}loadChart(i){switch(this.show_bmi=!1,this.show_bp=!1,this.show_weight=!1,i){case"bp_chart":this.show_bp=!0;break;case"weight_chart":this.show_weight=!0;break;case"bmi_chart":this.show_bmi=!0;break;case"bmi_weight_chart":this.show_weight=!0,this.show_bmi=!0;break;case"bp_weight_chart":this.show_bp=!0,this.show_weight=!0;break;case"all_chart":this.show_bp=!0,this.show_weight=!0,this.show_bmi=!0}this.showChart=!0}generateAllChart(){this.generateBPChart(),this.generateWeightChart(),this.generateBMIChart()}constructor(i){this.router=i,this.showChart=!1,this.show_bmi=!1,this.show_bp=!1,this.show_weight=!1,this.show_graphs=!0,this.vitals_graph={systolic:[],diastolic:[],bp_date:[],weight:[],weight_date:[],bmi:[],bmi_date:[]}}ngOnChanges(i){this.vitals&&this.patientVitals(this.vitals)}ngOnInit(){}}C.\u0275fac=function(i){return new(i||C)(t.Y36(v.F0))},C.\u0275cmp=t.Xpm({type:C,selectors:[["app-graphs"]],inputs:{vitals:"vitals"},features:[t.TTD],decls:1,vars:1,consts:[["class","grid grid-cols-1 w-full h-auto",4,"ngIf"],[1,"grid","grid-cols-1","w-full","h-auto"],[1,"w-full","flex","ml-5","font-semibold"],["class","cols-span-1 flex w-full mt-3",4,"ngIf"],[1,"cols-span-1","flex","w-full","mt-3"],["class","w-1/3 shadow px-2 mr-2 py-4 rounded-xl text-gray-600 border border-slate-100",4,"ngIf"],["class","w-1/3 shadow px-2 ml-2  py-4 rounded-xl text-gray-600 border border-slate-100",4,"ngIf"],[1,"w-1/3","shadow","px-2","mr-2","py-4","rounded-xl","text-gray-600","border","border-slate-100"],["id","bp-chart"],[3,"series","chart","xaxis","stroke","tooltip","dataLabels","title"],[1,"w-1/3","shadow","px-2","ml-2","py-4","rounded-xl","text-gray-600","border","border-slate-100"],["id","weight-chart"],["id","bmi-chart"]],template:function(i,e){1&i&&t.YNc(0,st,3,1,"div",0),2&i&&t.Q6J("ngIf",e.showChart)},dependencies:[_.O5,j.x],data:{animation:[(0,f.X$)("openCloseAccordion",[(0,f.eR)(":enter",[(0,f.oB)({height:0,opacity:0}),(0,f.jt)("200ms",(0,f.oB)({height:"100%",opacity:"100%"}))]),(0,f.eR)(":leave",[(0,f.jt)("200ms",(0,f.oB)({height:0,opacity:0}))])])]}});var u=d(4691),h=d(7185),p=d(2216),K=d(6054),L=d(4346);function at(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.konsulta_medicine.desc)}}function lt(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.lnq("",e.added_medicine," ",e.dosage_quantity," ",e.unit_of_measurement.code,"")}}function rt(n,i){if(1&n&&(t.TgZ(0,"td",64)(1,"div"),t._UZ(2,"br")(3,"br")(4,"br"),t.TgZ(5,"strong"),t._uU(6),t.qZA(),t._UZ(7,"br"),t._uU(8," Signature over printed name "),t._UZ(9,"br"),t._uU(10," License #: ________________ "),t.qZA()()),2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.Q6J("rowSpan",o.prescription_length),t.xp6(6),t.lnq("",e.prescriber.first_name," ",e.prescriber.middle_name," ",e.prescriber.last_name,"")}}function _t(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1," \u2714 "),t.qZA())}function ct(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1," X "),t.qZA())}function dt(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.dispensing[0].dispensing_date," ")}}function pt(n,i){if(1&n&&(t.TgZ(0,"td",64),t._UZ(1,"br")(2,"br")(3,"br"),t.TgZ(4,"strong"),t._uU(5),t.qZA(),t._UZ(6,"br"),t._uU(7," Signature over printed name "),t._UZ(8,"br"),t._uU(9," Name of Dispensing Facility: "),t._UZ(10,"br"),t._uU(11),t.qZA()),2&n){const e=t.oxw(3);t.Q6J("rowSpan",e.prescription_length),t.xp6(5),t.lnq("",null==e.dispensed_personnel?null:e.dispensed_personnel.first_name," ",null==e.dispensed_personnel?null:e.dispensed_personnel.middle_name," ",null==e.dispensed_personnel?null:e.dispensed_personnel.last_name,""),t.xp6(6),t.hij("",null==e.facility?null:e.facility.konsulta_credential.facility_name," ")}}function ut(n,i){if(1&n&&(t.TgZ(0,"tr")(1,"td",60),t._uU(2),t.qZA(),t.TgZ(3,"td",60),t.YNc(4,at,2,1,"span",61),t.YNc(5,lt,2,3,"span",61),t.qZA(),t.TgZ(6,"td",62),t._uU(7),t.qZA(),t.YNc(8,rt,11,4,"td",63),t.TgZ(9,"td",62),t.YNc(10,_t,2,0,"span",61),t.YNc(11,ct,2,0,"span",61),t.qZA(),t.TgZ(12,"td",60),t.YNc(13,dt,2,1,"span",61),t.qZA(),t.YNc(14,pt,12,5,"td",63),t.qZA()),2&n){const e=i.$implicit,o=i.first;t.xp6(2),t.hij(" ",e.konsulta_medicine?e.konsulta_medicine.category:""," "),t.xp6(2),t.Q6J("ngIf",e.konsulta_medicine),t.xp6(1),t.Q6J("ngIf",!e.konsulta_medicine),t.xp6(2),t.hij(" ",e.quantity," "),t.xp6(1),t.Q6J("ngIf",o),t.xp6(2),t.Q6J("ngIf",e.dispensing),t.xp6(1),t.Q6J("ngIf",!e.dispensing),t.xp6(2),t.Q6J("ngIf",e.dispensing),t.xp6(1),t.Q6J("ngIf",o)}}function gt(n,i){if(1&n&&(t.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15),t._uU(4," ANNEX G: Electronic Prescription Slip (ePresS) "),t.qZA(),t.TgZ(5,"div",16),t._uU(6," Electronic Prescription Slip (ePresS) - proof of availment of medicines by the eligible beneficiary. This will be generated by the PhilHealth Konsulta facility for every patient encounter and to be submitted to PhilHealth. "),t.qZA(),t.TgZ(7,"div",17)(8,"div",18),t._UZ(9,"img",19),t.TgZ(10,"span",20),t._uU(11,"ELECTRONIC PRESCRIPTION SLIP (ePresS)"),t.qZA()(),t.TgZ(12,"div",21)(13,"div",22)(14,"div",23),t._uU(15," HCI Name: "),t.TgZ(16,"span",24),t._uU(17),t.qZA()(),t.TgZ(18,"div",23),t._uU(19," Case No.: "),t.TgZ(20,"span",24),t._uU(21),t.qZA()(),t.TgZ(22,"div",23),t._uU(23," HCI Accreditation No: "),t.TgZ(24,"span",24),t._uU(25),t.qZA()(),t.TgZ(26,"div",23),t._uU(27," Transaction No.: "),t.TgZ(28,"span",24),t._uU(29),t.qZA()()(),t.TgZ(30,"div",25)(31,"div",26)(32,"span",27),t._uU(33,"Patient name (pangalan ng pasyente): "),t.qZA(),t.TgZ(34,"span",24),t._uU(35),t.qZA()(),t.TgZ(36,"div",28)(37,"span",27),t._uU(38,"Age (Edad): "),t.qZA(),t.TgZ(39,"span",29),t._uU(40),t.qZA()(),t.TgZ(41,"div",28)(42,"span",27),t._uU(43,"Contact No.: "),t.qZA(),t.TgZ(44,"span",24),t._uU(45),t.qZA()()(),t.TgZ(46,"div",30)(47,"div",31)(48,"span",27),t._uU(49,"PIN (PhilHealth Identification No.): "),t.qZA(),t.TgZ(50,"span",24),t._uU(51),t.qZA()(),t.TgZ(52,"div",32)(53,"span",27),t._uU(54,"Membership Category: "),t.qZA(),t._UZ(55,"span",24),t.qZA(),t.TgZ(56,"div",33)(57,"span",27),t._uU(58,"Membership type: "),t.qZA(),t.TgZ(59,"span",34),t._uU(60),t.qZA()()()(),t.TgZ(61,"div",35),t._uU(62," To be filled out by the facility (pupunuan ng pasilidad) "),t.qZA(),t.TgZ(63,"div",36)(64,"table",37)(65,"thead")(66,"tr")(67,"th",38),t._uU(68," Category "),t._UZ(69,"br"),t._uU(70," (Kategorya) "),t.qZA(),t.TgZ(71,"th",39),t._uU(72," Medicine Strength/ Form/ Volume "),t._UZ(73,"br"),t._uU(74," (Gamot/ Anyo/ Dami) "),t.qZA(),t.TgZ(75,"th",39),t._uU(76," Quantity"),t._UZ(77,"br"),t._uU(78," (Bilang) "),t.qZA(),t.TgZ(79,"th",40),t._uU(80," Name of the Prescribing Physician "),t._UZ(81,"br"),t._uU(82," (Pangalan ng nagresetang doktor) "),t.qZA(),t.TgZ(83,"th",39)(84,"span",41),t._uU(85,"\u2714"),t.qZA(),t._uU(86," Dispensed "),t._UZ(87,"br"),t._uU(88," (Naibigay) "),t._UZ(89,"br"),t.TgZ(90,"span",41),t._uU(91,"X"),t.qZA(),t._uU(92," Not dispensed "),t._UZ(93,"br"),t._uU(94," (Hindi naibigay) "),t.qZA(),t.TgZ(95,"th",39),t._uU(96," Date dispensed (Petsa kung kelan naibigay) "),t.qZA(),t.TgZ(97,"th",40),t._uU(98," Name of the Dispensing Personnel "),t._UZ(99,"br"),t._uU(100," (Pangalan ng nagbigay) "),t.qZA()()(),t.TgZ(101,"tbody"),t.YNc(102,ut,15,9,"tr",42),t.qZA()()(),t.TgZ(103,"div",35),t._uU(104," To be filled out by the patient (pupunuan ng pasyente) "),t.qZA(),t.TgZ(105,"div",43)(106,"div",44)(107,"div",45),t._uU(108," Did you receive the above mentioned medicines? __ Yes __ No "),t.qZA(),t.TgZ(109,"div",45),t._uU(110," (Natanggap mo ba ang mga gamot na nabanggit?) "),t.qZA()(),t.TgZ(111,"div",46)(112,"div",47)(113,"span"),t._uU(114,"Are you satisfied with the medicines you received?"),t.qZA(),t.TgZ(115,"span"),t._uU(116,"(Nasiyahan ka ba sa mga gamot na natanggap mo?)"),t.qZA()(),t.TgZ(117,"div",26),t._UZ(118,"div",48)(119,"fa-icon",49)(120,"div",48)(121,"fa-icon",50)(122,"div",48)(123,"fa-icon",51),t.qZA()(),t.TgZ(124,"div",52)(125,"div",45),t._uU(126," For your comment, suggestion or complaint: "),t.qZA(),t.TgZ(127,"div",45),t._uU(128," (Para sa iyong komento, mungkahi o reklamo) "),t.qZA(),t._UZ(129,"div",53),t.qZA(),t.TgZ(130,"div",54)(131,"div",45),t._uU(132," Under the penalty of law, I attest that the information I provided in this slip are true and accurate. "),t.qZA(),t.TgZ(133,"div",45),t._uU(134," (Sa ilalim ng batas, pinatutunayan ko na ang impormasyong ibinigay ko ay totoo at tama) "),t.qZA()()(),t.TgZ(135,"div",55)(136,"div",56)(137,"div",57),t._uU(138," ________________________________________ "),t._UZ(139,"br"),t._uU(140," Signature over printed name of patient "),t._UZ(141,"br"),t._uU(142," (Lagda sa nakalimbag na pangalan ng pasyente) "),t.qZA(),t.TgZ(143,"div",58),t._uU(144," Next Dispensing Date: _____________________ "),t._UZ(145,"br"),t._uU(146," (Petsa ng susunod na bigay ng gamot) "),t.qZA()(),t.TgZ(147,"div",59)(148,"div",57),t._uU(149," Note: "),t._UZ(150,"br"),t._uU(151," Accomplished form shall be submitted to PhilHealth "),t._UZ(152,"br"),t._uU(153," (Ang kumpletong form ay dapat isumite sa PhilHealth) "),t.qZA()()()()()()()),2&n){const e=t.oxw();t.xp6(17),t.Oqu(null==e.facility?null:e.facility.konsulta_credential.facility_name),t.xp6(4),t.Oqu(null==e.patient_info?null:e.patient_info.case_number),t.xp6(4),t.Oqu(null==e.facility?null:e.facility.konsulta_credential.accreditation_number),t.xp6(4),t.Oqu("S"+(null==e.consult_details?null:e.consult_details.transaction_number)),t.xp6(6),t.HOy(" ",null==e.patient_info?null:e.patient_info.last_name,", ",null==e.patient_info?null:e.patient_info.first_name," ",null==e.patient_info?null:e.patient_info.middle_name," ","NA"===(null==e.patient_info?null:e.patient_info.suffix_name)?"":null==e.patient_info?null:e.patient_info.suffix_name," "),t.xp6(5),t.hij("",e.patient_age," "),t.xp6(5),t.Oqu(null==e.patient_info?null:e.patient_info.mobile_number),t.xp6(6),t.Oqu(null==e.patient_philhealth?null:e.patient_philhealth.philhealth_id),t.xp6(9),t.Oqu("MM"===(null==e.patient_philhealth?null:e.patient_philhealth.membership_type_id)?"Member":"Dependent"),t.xp6(42),t.Q6J("ngForOf",e.prescriptions),t.xp6(17),t.Q6J("icon",e.faFaceSmile),t.xp6(2),t.Q6J("icon",e.faFaceMeh),t.xp6(2),t.Q6J("icon",e.faFaceFrown)}}function mt(n,i){if(1&n&&(t.TgZ(0,"div",65),t._UZ(1,"fa-icon",66),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faCircleNotch)}}class x{closeModal(){this.toggleModal.emit("epres")}iteratePrescription(){this.prescriptions&&this.prescriptions[0].dispensing&&this.http.get("users/"+this.prescriptions[0].dispensing[0].user_id).subscribe({next:i=>{console.log(i),this.dispensed_personnel=i.data,this.getAge()},error:i=>console.log(i)})}getAge(){this.http.get("patient-philhealth/philhealth",{params:{"filter[patient_id]":this.patient_info.id,per_page:"1",sort:"-enlistment_date"}}).subscribe({next:i=>{this.philhealth_info=i.data[0],this.http.post("konsulta/generate-age",{date_from:this.patient_info.birthdate,date_to:i.data[0].enlistment_date}).subscribe({next:o=>{console.log(o),this.patient_age=o.data,this.show_form=!0},error:o=>console.log(o)})},error:i=>console.log(i)})}constructor(i,e){this.http=i,this.ageService=e,this.toggleModal=new t.vpe,this.faPrint=r.wf8,this.faFaceSmile=r.pkM,this.faFaceMeh=r.FRD,this.faFaceFrown=r.qfV,this.faCircleNotch=r.IJ7,this.show_form=!1}ngOnInit(){this.patient_info=this.http.getPatientInfo(),this.patient_philhealth=this.http.getPhilhealhtInfo(),this.facility=this.http.getUserFromJSON(),this.prescription_length=Object.keys(this.prescriptions).length,this.age=this.ageService.calcuateAge(this.patient_info.birthdate,this.consult_details.consult_date),this.iteratePrescription(),console.log(this.patient_philhealth)}}function ht(n,i){if(1&n&&(t.TgZ(0,"tr")(1,"td",39),t._uU(2),t.qZA(),t.TgZ(3,"td",40),t._uU(4),t.qZA(),t.TgZ(5,"td",39),t._uU(6),t.qZA(),t.TgZ(7,"td",39),t._uU(8),t.qZA()()),2&n){const e=i.$implicit;t.xp6(2),t.Oqu(e.laboratory.desc),t.xp6(2),t.hij(" ",e.result?"\u2714":"X"," "),t.xp6(2),t.hij(" ",e.result?e.result.laboratory_date:"-"," "),t.xp6(2),t.hij(" ",e.result?e.result.user:"-"," ")}}function ft(n,i){if(1&n&&(t.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15),t._uU(4," ANNEX G: Electronic Konsulta Availment Slip (eKAS) "),t.qZA(),t.TgZ(5,"div",16),t._uU(6," Electronic Konsulta Availment Slip (eKAS) \u2013 proof of availment of services by the eligible beneficiary. This will be generated by the PhilHealth Konsulta facility for every patient encounter and to be submitted to PhilHealth. "),t.qZA(),t.TgZ(7,"div",17)(8,"div",18),t._UZ(9,"img",19),t.TgZ(10,"span",20),t._uU(11,"ELECTRONIC KONSULTA AVAILMENT SLIP (eKAS)"),t.qZA()(),t.TgZ(12,"div",21)(13,"div",22)(14,"div",23)(15,"span",24),t._uU(16,"HCI Name:"),t.qZA(),t.TgZ(17,"span",25),t._uU(18),t.qZA()(),t.TgZ(19,"div",23)(20,"span"),t._uU(21,"HCI Accreditation No:"),t.qZA(),t.TgZ(22,"span",25),t._uU(23),t.qZA()(),t.TgZ(24,"div",23)(25,"span",24),t._uU(26,"Case No.:"),t.qZA(),t.TgZ(27,"span",26),t._uU(28),t.qZA()(),t.TgZ(29,"div",23)(30,"span",24),t._uU(31,"Transaction No.:"),t.qZA(),t.TgZ(32,"span",26),t._uU(33),t.qZA()()(),t.TgZ(34,"div",27)(35,"div",23)(36,"span",24),t._uU(37,"Patient name (pangalan ng pasyente): "),t.qZA(),t.TgZ(38,"span",26),t._uU(39),t.qZA()(),t.TgZ(40,"div",28)(41,"span",24),t._uU(42,"Age (Edad): "),t.qZA(),t.TgZ(43,"span",29),t._uU(44),t.qZA()(),t.TgZ(45,"div",28)(46,"span",24),t._uU(47,"Contact No.: "),t.qZA(),t.TgZ(48,"span",26),t._uU(49),t.qZA()()(),t.TgZ(50,"div",22)(51,"div",23)(52,"span",24),t._uU(53,"PIN (PhilHealth Identification No.): "),t.qZA(),t.TgZ(54,"span",26),t._uU(55),t.qZA()(),t.TgZ(56,"div",23)(57,"span",24),t._uU(58,"Membership Category: "),t.qZA(),t._UZ(59,"span",26),t.qZA()(),t.TgZ(60,"div",22)(61,"div",23)(62,"span",24),t._uU(63,"Membership type: "),t.qZA(),t.TgZ(64,"span",30),t._uU(65),t.qZA()(),t.TgZ(66,"div",23)(67,"span",24),t._uU(68,"Authorization Transaction Code (ATC):"),t.qZA(),t.TgZ(69,"span",26),t._uU(70),t.qZA()()()(),t.TgZ(71,"div",31),t._uU(72," To be filled out by the facility (pupunuan ng pasilidad) "),t.qZA(),t.TgZ(73,"div",32)(74,"table",33)(75,"thead")(76,"tr")(77,"th",34),t._uU(78,"Konsulta Services"),t.qZA(),t.TgZ(79,"th",35)(80,"span",36),t._uU(81,"\u2714"),t.qZA(),t._uU(82," Performed "),t.TgZ(83,"span",37),t._uU(84,"(nagawa)"),t.qZA(),t._UZ(85,"br"),t.TgZ(86,"span",36),t._uU(87,"X"),t.qZA(),t._uU(88," Not performed "),t.TgZ(89,"span",37),t._uU(90,"(hindi nagawa)"),t.qZA(),t._UZ(91,"br"),t.qZA(),t.TgZ(92,"th",38),t._uU(93," Date Performed "),t._UZ(94,"br"),t._uU(95," (Petsa kung kelan ginawa) "),t.qZA(),t.TgZ(96,"th",38),t._uU(97," Performed by "),t._UZ(98,"br"),t._uU(99," (Ginawa ni) "),t._UZ(100,"br"),t._uU(101," (Initial/Signature of Health Care Provider/Technician)"),t._UZ(102,"br"),t._uU(103," (Initial o Lagda ng Health Care Provider/Technician) "),t.qZA()()(),t.TgZ(104,"tbody")(105,"tr")(106,"td",39),t._uU(107,"History and physical examination (vitals, anthropometrics)"),t.qZA(),t.TgZ(108,"td",40),t._uU(109,"\u2714"),t.qZA(),t.TgZ(110,"td",39),t._uU(111),t.ALo(112,"date"),t.qZA(),t.TgZ(113,"td",39),t._uU(114),t.qZA()(),t.YNc(115,ht,9,4,"tr",41),t.qZA()()(),t.TgZ(116,"div",42),t._uU(117," To be filled out by the patient (pupunuan ng pasyente) "),t.qZA(),t.TgZ(118,"div",43)(119,"div",44)(120,"div",45),t._uU(121," Have you received the above-mentioned essential services? __ Yes __ No "),t.qZA(),t.TgZ(122,"div",45),t._uU(123," (Natanggap mo ba ang mga essential services na nabanggit?) "),t.qZA()(),t.TgZ(124,"div",46)(125,"div",47)(126,"span"),t._uU(127,"How satisfied are you with the services provided?"),t.qZA(),t.TgZ(128,"span"),t._uU(129,"(Gaano ka nasiyahan sa natanggap mong serbisyo?)"),t.qZA()(),t.TgZ(130,"div",23),t._UZ(131,"div",48)(132,"fa-icon",49)(133,"div",48)(134,"fa-icon",50)(135,"div",48)(136,"fa-icon",51),t.qZA()(),t.TgZ(137,"div",52)(138,"div",45),t._uU(139," For your comment, suggestion or complaint: "),t.qZA(),t.TgZ(140,"div",45),t._uU(141," (Para sa iyong komento, mungkahi o reklamo) "),t.qZA(),t._UZ(142,"div",53),t.qZA(),t.TgZ(143,"div",52)(144,"div",45),t._uU(145," Under the penalty of law, I attest that the information I provided in this slip are true and accurate. "),t.qZA(),t.TgZ(146,"div",45),t._uU(147," (Sa ilalim ng batas, pinatutunayan ko na ang impormasyong ibinigay ko ay totoo at tama) "),t.qZA()()(),t.TgZ(148,"div",54)(149,"div",55)(150,"div",56),t._uU(151," ________________________________________ "),t._UZ(152,"br"),t._uU(153," Signature over printed name of patient "),t._UZ(154,"br"),t._uU(155," (Lagda sa nakalimbag na pangalan ng pasyente) "),t.qZA(),t.TgZ(156,"div",57),t._uU(157," Next Consultation Date: _____________________ "),t._UZ(158,"br"),t._uU(159," (Petsa ng susunod na bigay ng gamot) "),t.qZA()(),t.TgZ(160,"div",58)(161,"div",56),t._uU(162," Note: "),t._UZ(163,"br"),t._uU(164," Accomplished form shall be submitted to PhilHealth "),t._UZ(165,"br"),t._uU(166," (Ang kumpletong form ay dapat isumite sa PhilHealth) "),t.qZA()()()()()()()),2&n){const e=t.oxw();t.xp6(18),t.Oqu(null==e.facility?null:e.facility.konsulta_credential.facility_name),t.xp6(5),t.Oqu(null==e.facility?null:e.facility.konsulta_credential.accreditation_number),t.xp6(5),t.Oqu(null==e.patient_info?null:e.patient_info.case_number),t.xp6(5),t.Oqu("S"+(null==e.consult_details?null:e.consult_details.transaction_number)),t.xp6(6),t.HOy(" ",null==e.patient_info?null:e.patient_info.last_name,", ",null==e.patient_info?null:e.patient_info.first_name," ",null==e.patient_info?null:e.patient_info.middle_name," ","NA"===(null==e.patient_info?null:e.patient_info.suffix_name)?"":null==e.patient_info?null:e.patient_info.suffix_name," "),t.xp6(5),t.Oqu(e.patient_age),t.xp6(5),t.Oqu(null==e.patient_info?null:e.patient_info.mobile_number),t.xp6(6),t.Oqu(null==e.patient_philhealth?null:e.patient_philhealth.philhealth_id),t.xp6(10),t.Oqu("MM"===(null==e.patient_philhealth?null:e.patient_philhealth.membership_type_id)?"Member":"Dependent"),t.xp6(5),t.Oqu(!0===(null==e.consult_details?null:e.consult_details.walkedin_status)?"WALKEDIN":null!=e.consult_details&&e.consult_details.authorization_transaction_code?null==e.consult_details?null:e.consult_details.authorization_transaction_code:"WALKEDIN"),t.xp6(41),t.hij(" ",t.xi3(112,21,e.consult_details.consult_date,"yyyy-MM-dd")," "),t.xp6(3),t.lnq(" ",e.consult_details.user.first_name," ",e.consult_details.user.middle_name," ",e.consult_details.user.last_name," "),t.xp6(1),t.Q6J("ngForOf",e.lab_list),t.xp6(17),t.Q6J("icon",e.faFaceSmile),t.xp6(2),t.Q6J("icon",e.faFaceMeh),t.xp6(2),t.Q6J("icon",e.faFaceFrown)}}function xt(n,i){if(1&n&&(t.TgZ(0,"div",59),t._UZ(1,"fa-icon",60),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faCircleNotch)}}x.\u0275fac=function(i){return new(i||x)(t.Y36(u.O),t.Y36(K.J))},x.\u0275cmp=t.Xpm({type:x,selectors:[["app-epres"]],inputs:{prescriptions:"prescriptions",consult_details:"consult_details"},outputs:{toggleModal:"toggleModal"},decls:14,vars:4,consts:[["id","defaultModal","tabindex","-1","aria-hidden","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","max-w-4xl","h-full","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],["type","button","printSectionId","philhealth_form","ngxPrint","",1,"bg-white","text-blue-500","hover:bg-gray-100","hover:text-blue-400","px-2","py-1","rounded-md",3,"useExistingCss"],[3,"icon"],["class","overflow-y-auto scrollbar-thin h-96 scrollbar-thumb-gray-400 scrollbar-track-gray-100",4,"ngIf"],["class","h-96 flex justify-center align-middle w-full",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"text-white","bg-orange-500","hover:ring-2","focus:outline-none","hover:ring-orange-300","rounded","text-sm","font-medium","px-6","py-2.5","transition","duration-150","ease-in-out","transform","hover:scale-110",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"overflow-y-auto","scrollbar-thin","h-96","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"w-[210mm]","h-[297mm]","flex","justify-center","align-middle","bg-white"],["id","philhealth_form",1,"w-[195mm]","h-[272mm]","mt-[12.5mm]"],[1,"border","border-black","w-full","p-1","font-semibold"],[1,"text-xs","my-5"],[1,"border-2","border-sky-700"],[1,"flex","align-middle","h-14","p-1"],["src","./assets/img/philhealth_logo.png",1,"w-12","h-14"],[1,"underline","font-semibold","mt-3"],[1,"p-1"],[1,"grid","grid-cols-4","text-xs"],[1,"col-span-2","flex","text-[.75em]"],[1,"underline","flex-1","w-full","text-[.8em]"],[1,"grid","grid-cols-4","text-xs","mt-2"],[1,"col-span-2","flex"],[1,"text-[.75em]"],[1,"col-span-1","flex"],[1,"underline","flex-1","w-full","text-[.75em]"],[1,"grid","grid-cols-12","text-xs"],[1,"col-span-4","flex"],[1,"col-span-3","flex","ml-3"],[1,"col-span-5","flex"],[1,"flex-1","w-full","text-[.8em]"],[1,"w-full","border","border-black","bg-gray-300","text-xs","my-5","p-1","py-0"],[1,"w-full","text-xs"],[1,"border","border-slate-600","border-collapse","mx-2"],[1,"w-2/12","border","border-slate-700","text-[.8em]"],[1,"w-1/12","border","border-slate-700","text-[.8em]"],[1,"w-3/12","border","border-slate-700","text-[.8em]"],[1,"underline"],[4,"ngFor","ngForOf"],[1,"w-full","p-1","text-xs"],[1,"grid","grid-cols-1"],[1,"flex","text-[.8em]"],[1,"grid","grid-cols-4","mt-3"],[1,"col-span-2","grid","grid-cols-1","text-[.8em]"],[1,"w-2","h-2","border","border-slate-700","mt-5","mr-2"],[1,"text-3xl","text-green-600","mr-3",3,"icon"],[1,"text-3xl","text-yellow-500","mr-3",3,"icon"],[1,"text-3xl","text-red-600",3,"icon"],[1,"grid","grid-cols-1","mt-3"],[1,"w-full","border-y","border-black","h-5","mt-5"],[1,"grid","grid-cols-1","mt-2"],[1,"w-full","p-1","text-xs","mt-7","mb-5"],[1,"grid","grid-cols-12"],[1,"col-span-7","text-[.8em]"],[1,"col-span-5","text-[.8em]"],[1,"grid","grid-cols-12","mt-3"],[1,"border","border-slate-700","text-[.8em]"],[4,"ngIf"],[1,"border","border-slate-700","text-center","text-[.8em]"],["class","border border-slate-700 text-[0.65rem] font-normal align-bottom",3,"rowSpan",4,"ngIf"],[1,"border","border-slate-700","text-[0.65rem]","font-normal","align-bottom",3,"rowSpan"],[1,"h-96","flex","justify-center","align-middle","w-full"],["spin","true","size","2xl",1,"mt-20","text-blue-500",3,"icon"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5," electronic Prescription Slip (ePresS) "),t.qZA(),t.TgZ(6,"button",5),t._UZ(7,"fa-icon",6),t.qZA()(),t.YNc(8,gt,154,16,"div",7),t.YNc(9,mt,2,1,"div",8),t.TgZ(10,"div",9)(11,"button",10),t.NdJ("click",function(){return e.closeModal()}),t._uU(12,"Close"),t.qZA()()()()(),t._UZ(13,"div",11)),2&i&&(t.xp6(6),t.Q6J("useExistingCss",!0),t.xp6(1),t.Q6J("icon",e.faPrint),t.xp6(1),t.Q6J("ngIf",e.show_form),t.xp6(1),t.Q6J("ngIf",!e.show_form))},dependencies:[_.sg,_.O5,p.BN,L.I],styles:["@page{size:auto;size:A4;margin:7mm}"]});class b{getResults(){Object.entries(this.lab_list).forEach(([i,e],o)=>{let s=e,l=this.http.getURL(s.laboratory.code);""!==l&&this.http.get(l,{params:{request_id:s.id}}).subscribe({next:c=>{this.lab_list[i].result=c.data[0]},error:c=>console.log(c)})}),this.getAge(),console.log(this.lab_list)}getAge(){this.http.get("patient-philhealth/philhealth",{params:{"filter[patient_id]":this.patient_info.id,per_page:"1",sort:"-enlistment_date"}}).subscribe({next:i=>{this.philhealth_info=i.data[0],this.http.post("konsulta/generate-age",{date_from:this.patient_info.birthdate,date_to:i.data[0].enlistment_date}).subscribe({next:o=>{console.log(o),this.show_form=!0,this.patient_age=o.data},error:o=>console.log(o)})},error:i=>console.log(i)})}closeModal(){this.toggleModal.emit("ekas")}constructor(i,e){this.http=i,this.ageService=e,this.toggleModal=new t.vpe,this.faPrint=r.wf8,this.faFaceSmile=r.pkM,this.faFaceMeh=r.FRD,this.faFaceFrown=r.qfV,this.faCircleNotch=r.IJ7,this.show_form=!1}ngOnInit(){this.patient_info=this.http.getPatientInfo(),this.patient_philhealth=this.http.getPhilhealhtInfo(),this.facility=this.http.getUserFromJSON(),this.age=this.ageService.calcuateAge(this.patient_info.birthdate,this.consult_details.consult_date),this.getResults(),console.log(this.consult_details)}}function bt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr",16)(1,"td",17)(2,"fa-icon",18),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.toggleModal("delete",l))}),t.qZA(),t._uU(3),t.qZA(),t.TgZ(4,"th",19),t._uU(5),t.qZA(),t.TgZ(6,"td",17)(7,"fa-icon",20),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.toggleModal("add",l))}),t.qZA()()()}if(2&n){const e=i.$implicit,o=t.oxw();t.xp6(2),t.Q6J("icon",o.faXmark),t.xp6(1),t.hij(" ",e.type," "),t.xp6(2),t.hij(" ",e.date_requested," "),t.xp6(2),t.Q6J("icon",o.faEdit)}}function vt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"app-ekas",21),t.NdJ("toggleModal",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.toggleModal(s))}),t.qZA()}}function Zt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"app-epres",21),t.NdJ("toggleModal",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.toggleModal(s))}),t.qZA()}}b.\u0275fac=function(i){return new(i||b)(t.Y36(u.O),t.Y36(K.J))},b.\u0275cmp=t.Xpm({type:b,selectors:[["app-ekas"]],inputs:{lab_list:"lab_list",consult_details:"consult_details"},outputs:{toggleModal:"toggleModal"},decls:14,vars:4,consts:[["id","defaultModal","tabindex","-1","aria-hidden","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","max-w-4xl","h-full","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],["type","button","printSectionId","philhealth_form","ngxPrint","",1,"bg-white","text-blue-500","hover:bg-gray-100","hover:text-blue-400","px-2","py-1","rounded-md",3,"useExistingCss"],[3,"icon"],["class","overflow-y-auto scrollbar-thin h-96 scrollbar-thumb-gray-400 scrollbar-track-gray-100",4,"ngIf"],["class","h-96 flex justify-center align-middle w-full",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"text-white","bg-orange-500","hover:ring-2","focus:outline-none","hover:ring-orange-300","rounded","text-sm","font-medium","px-6","py-2.5","transition","duration-150","ease-in-out","transform","hover:scale-110",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"overflow-y-auto","scrollbar-thin","h-96","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"w-[210mm]","h-[297mm]","flex","justify-center","align-middle","bg-white"],["id","philhealth_form",1,"w-[195mm]","h-[272mm]","mt-[12.5mm]"],[1,"border","border-black","w-full","p-1","font-semibold"],[1,"text-xs","my-5"],[1,"border-2","border-sky-700"],[1,"flex","align-middle","h-14","p-1"],["src","./assets/img/philhealth_logo.png",1,"w-12","h-14"],[1,"underline","font-semibold","mt-3"],[1,"p-1"],[1,"grid","grid-cols-4","text-xs"],[1,"col-span-2","flex"],[1,"text-[.75em]"],[1,"underline","flex-1","w-full"],[1,"underline","flex-1","w-full","text-[.8em]"],[1,"grid","grid-cols-4","text-xs","mt-2"],[1,"col-span-1","flex"],[1,"underline","flex-1","w-full","text-[.75em]"],[1,"flex-1","w-full","text-[.8em]"],[1,"w-full","border","border-black","bg-gray-300","text-xs","my-5","p-1","py-0"],[1,"w-full","text-xs"],[1,"border","border-slate-600","border-collapse","mx-1"],[1,"w-4/12","border","border-slate-700","text-[.8em]"],[1,"w-2/12","border","border-slate-700","text-[.8em]"],[1,"underline"],[1,"text-[.7em]"],[1,"w-3/12","border","border-slate-700","text-[.8em]"],[1,"border","border-slate-700","[.8em]"],[1,"border","border-slate-700","text-center","[.8em]"],[4,"ngFor","ngForOf"],[1,"w-full","border","border-black","bg-gray-300","text-xs","my-3","p-1","py-0","text-[.8em]"],[1,"w-full","pl-1","text-xs"],[1,"grid","grid-cols-1"],[1,"flex","text-[.8em]"],[1,"grid","grid-cols-4","mt-3"],[1,"col-span-2","grid","grid-cols-1","text-[.8em]"],[1,"w-2","h-2","border","border-slate-700","mt-5","mr-2"],[1,"text-3xl","text-green-600","mr-3",3,"icon"],[1,"text-3xl","text-yellow-500","mr-3",3,"icon"],[1,"text-3xl","text-red-600",3,"icon"],[1,"grid","grid-cols-1","mt-3"],[1,"w-full","border-y","border-black","h-5","mt-5"],[1,"w-full","p-1","text-xs","mt-7","mb-5"],[1,"grid","grid-cols-12"],[1,"col-span-7","text-[.8em]"],[1,"col-span-5","text-[.8em]"],[1,"grid","grid-cols-12","mt-4"],[1,"h-96","flex","justify-center","align-middle","w-full"],["spin","true","size","2xl",1,"mt-20","text-blue-500",3,"icon"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5," electronic Konsulta Availment Slip (eKAS) "),t.qZA(),t.TgZ(6,"button",5),t._UZ(7,"fa-icon",6),t.qZA()(),t.YNc(8,ft,167,24,"div",7),t.YNc(9,xt,2,1,"div",8),t.TgZ(10,"div",9)(11,"button",10),t.NdJ("click",function(){return e.closeModal()}),t._uU(12,"Close"),t.qZA()()()()(),t._UZ(13,"div",11)),2&i&&(t.xp6(6),t.Q6J("useExistingCss",!0),t.xp6(1),t.Q6J("icon",e.faPrint),t.xp6(1),t.Q6J("ngIf",e.show_form),t.xp6(1),t.Q6J("ngIf",!e.show_form))},dependencies:[_.sg,_.O5,p.BN,L.I,_.uU],styles:["@page{size:auto;size:A4;margin:7mm}"]});class T{toggleModal(i){console.log(i),this.modal[i]=!this.modal[i]}loadDetails(){}constructor(i){this.http=i,this.faPrint=r.wf8,this.pending_list=[],this.modal=[]}ngOnInit(){this.active_loc_id=this.http.getUrlParams,this.patient_id=this.active_loc_id.patient_id,this.consult_id=this.active_loc_id.consult_id,this.loadDetails()}}function yt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr",19)(1,"td",20)(2,"fa-icon",21),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.toggleModal("delete",l))}),t.qZA(),t._uU(3),t.qZA(),t.TgZ(4,"th",22),t._uU(5),t.qZA(),t.TgZ(6,"td",20)(7,"fa-icon",23),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.toggleModal("add",l))}),t.qZA()()()}if(2&n){const e=i.$implicit,o=t.oxw();t.xp6(2),t.Q6J("icon",o.faXmark),t.xp6(1),t.hij(" ",e.type," "),t.xp6(2),t.hij(" ",e.date_requested," "),t.xp6(2),t.Q6J("icon",o.faEdit)}}function Ct(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"app-ekas",24),t.NdJ("toggleModal",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.toggleModal(s))}),t.qZA()}}function Tt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"app-epres",24),t.NdJ("toggleModal",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.toggleModal(s))}),t.qZA()}}T.\u0275fac=function(i){return new(i||T)(t.Y36(u.O))},T.\u0275cmp=t.Xpm({type:T,selectors:[["app-konsulta"]],inputs:{consult_details:"consult_details"},decls:28,vars:3,consts:[[1,"mb-16","w-full"],[1,"block","shadow","p-4","mt-4","rounded-xl","text-gray-600"],[1,"text-sky-500","font-bold","flex","justify-between","py-2"],[1,"flex"],[1,"mt-2"],[1,"text-gray-500","text-sm"],["type","button",1,"px-3","py-2","rounded-md","bg-blue-500","text-sm","text-white","ml-auto","mr-3",3,"click"],["type","button",1,"px-3","py-2","rounded-md","bg-blue-500","text-sm","text-white","ml-auto",3,"click"],[1,"border","border-slate-200","shadow-md","rounded-xl"],[1,"w-full","bg-green-500","text-white","rounded-t-xl","p-3","font-semibold"],[1,"w-full","p-5"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6"],["class","bg-white border-b last:border-0",4,"ngFor","ngForOf"],[3,"toggleModal",4,"ngIf"],[1,"bg-white","border-b","last:border-0"],[1,"w-1/3","py-4","px-6"],["size","lg",1,"mx-0","my-0","text-rose-400","hover:cursor-pointer","flex-none","mr-2",3,"icon","click"],["scope","row",1,"w-1/3","py-4","px-6","font-medium","text-gray-900","whitespace-nowrap"],["size","lg",1,"mx-0","my-0","text-blue-500","hover:cursor-pointer","flex-none","mr-2",3,"icon","click"],[3,"toggleModal"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span",2)(3,"span",3)(4,"span",4),t._UZ(5,"span",5),t.qZA()(),t.TgZ(6,"div")(7,"button",6),t.NdJ("click",function(){return e.toggleModal("epres")}),t._uU(8," ePresS "),t.qZA(),t.TgZ(9,"button",7),t.NdJ("click",function(){return e.toggleModal("ekas")}),t._uU(10," eKas "),t.qZA()()(),t.TgZ(11,"div",8)(12,"div",9),t._uU(13," Konsulta visits "),t.qZA(),t.TgZ(14,"div",10)(15,"table",11)(16,"thead",12)(17,"tr")(18,"th",13),t._uU(19,"Lab type"),t.qZA(),t.TgZ(20,"th",13),t._uU(21,"Date requested"),t.qZA(),t.TgZ(22,"th",13),t._uU(23,"Action"),t.qZA()()(),t.TgZ(24,"tbody"),t.YNc(25,bt,8,4,"tr",14),t.qZA()()()()()(),t.YNc(26,vt,1,0,"app-ekas",15),t.YNc(27,Zt,1,0,"app-epres",15)),2&i&&(t.xp6(25),t.Q6J("ngForOf",e.pending_list),t.xp6(1),t.Q6J("ngIf",e.modal.ekas),t.xp6(1),t.Q6J("ngIf",e.modal.epres))},dependencies:[_.sg,_.O5,p.BN,x,b]});class w{refreshClaims(){this.is_refreshing=!0}toggleModal(i){this.modal[i]=!this.modal[i]}constructor(){this.faRotate=r.go9,this.pending_list=[],this.modal=[],this.is_refreshing=!1}ngOnInit(){}}w.\u0275fac=function(i){return new(i||w)},w.\u0275cmp=t.Xpm({type:w,selectors:[["app-eclaims"]],decls:39,vars:5,consts:[[1,"mb-16","w-full"],[1,"block","shadow","p-4","mt-4","rounded-xl","text-gray-600"],[1,"text-sky-500","font-bold","flex","justify-between","py-2"],[1,"flex"],[1,"mt-2"],[1,"text-gray-500","text-sm"],[1,"text-sm","font-normal"],["type","button",1,"w-32","px-3","py-2","rounded-md","bg-blue-500","text-sm","text-white","ml-auto","mr-1",3,"click"],["type","button",1,"w-32","px-3","py-2","rounded-md","bg-green-500","text-sm","text-white","ml-auto",3,"click"],[1,"border","border-slate-200","shadow-md","rounded-xl"],[1,"w-full","bg-blue-500","text-white","rounded-t-xl","p-3","font-semibold","flex","justify-between"],["type","button",3,"click"],[3,"icon","spin"],[1,"w-full","p-5"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6"],["class","bg-white border-b last:border-0",4,"ngFor","ngForOf"],[3,"toggleModal",4,"ngIf"],[1,"bg-white","border-b","last:border-0"],[1,"w-1/3","py-4","px-6"],["size","lg",1,"mx-0","my-0","text-rose-400","hover:cursor-pointer","flex-none","mr-2",3,"icon","click"],["scope","row",1,"w-1/3","py-4","px-6","font-medium","text-gray-900","whitespace-nowrap"],["size","lg",1,"mx-0","my-0","text-blue-500","hover:cursor-pointer","flex-none","mr-2",3,"icon","click"],[3,"toggleModal"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span",2)(3,"span",3)(4,"span",4),t._UZ(5,"span",5),t.qZA()(),t.TgZ(6,"div",6)(7,"button",7),t.NdJ("click",function(){return e.toggleModal("pbef")}),t._uU(8," PBEF "),t.qZA(),t.TgZ(9,"button",7),t.NdJ("click",function(){return e.toggleModal("cf1")}),t._uU(10," CF1 "),t.qZA(),t.TgZ(11,"button",7),t.NdJ("click",function(){return e.toggleModal("cf2")}),t._uU(12," CF2 "),t.qZA(),t.TgZ(13,"button",8),t.NdJ("click",function(){return e.toggleModal("upload")}),t._uU(14," Upload "),t.qZA()()(),t.TgZ(15,"div",9)(16,"div",10)(17,"span"),t._uU(18,"Eclaims"),t.qZA(),t.TgZ(19,"button",11),t.NdJ("click",function(){return e.refreshClaims()}),t._UZ(20,"fa-icon",12),t.qZA()(),t.TgZ(21,"div",13)(22,"table",14)(23,"thead",15)(24,"tr")(25,"th",16),t._uU(26,"Claim Series Lhio"),t.qZA(),t.TgZ(27,"th",16),t._uU(28,"Transmittal Date"),t.qZA(),t.TgZ(29,"th",16),t._uU(30,"Claim Status"),t.qZA(),t.TgZ(31,"th",16),t._uU(32,"As of"),t.qZA(),t.TgZ(33,"th",16),t._uU(34,"Action"),t.qZA()()(),t.TgZ(35,"tbody"),t.YNc(36,yt,8,4,"tr",17),t.qZA()()()()()(),t.YNc(37,Ct,1,0,"app-ekas",18),t.YNc(38,Tt,1,0,"app-epres",18)),2&i&&(t.xp6(20),t.Q6J("icon",e.faRotate)("spin",e.is_refreshing),t.xp6(16),t.Q6J("ngForOf",e.pending_list),t.xp6(1),t.Q6J("ngIf",e.modal.ekas),t.xp6(1),t.Q6J("ngIf",e.modal.epres))},dependencies:[_.sg,_.O5,p.BN,x,b]});var wt=d(8696),a=d(433),G=d(7272),P=d(9646),$=d(9300),V=d(1884),B=d(8372),E=d(8505),z=d(3900),W=d(262),X=d(4004),R=d(7579),q=d(3455);function qt(n,i){if(1&n&&t._UZ(0,"fa-icon",21),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSpinner)}}function At(n,i){if(1&n&&t._UZ(0,"fa-icon",22),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSave)}}function Ut(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onSubmit())}),t.YNc(1,qt,1,1,"fa-icon",19),t.YNc(2,At,1,1,"fa-icon",20),t._uU(3),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("ngIf",e.is_saving),t.xp6(1),t.Q6J("ngIf",!e.is_saving),t.xp6(1),t.hij(" ",e.is_saving?"Saving":"Save"," ")}}function kt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",9)(2,"button",10),t._UZ(3,"fa-icon",11),t.qZA(),t.TgZ(4,"div",12)(5,"ng-select",13),t.NdJ("ngModelChange",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.selectedIdx=s)}),t.ALo(6,"async"),t.qZA()()(),t.TgZ(7,"div",14)(8,"textarea",15),t.NdJ("ngModelChange",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.idx_remarks=s)}),t.qZA()(),t.TgZ(9,"div",16),t.YNc(10,Ut,4,4,"button",17),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("icon",e.faPlusSquare),t.xp6(2),t.Q6J("items",t.lcZ(6,10,e.idx$))("multiple",!0)("loading",e.idxLoading)("typeahead",e.searchInput$)("ngModel",e.selectedIdx)("disabled",e.consult_done),t.xp6(3),t.Q6J("disabled",e.consult_done)("ngModel",e.idx_remarks),t.xp6(2),t.Q6J("ngIf",!e.consult_done)}}const Jt=function(n){return{"rounded-b":n}};class A{onSubmit(){this.is_saving=!0,this.selectedIdx&&Object.keys(this.selectedIdx).length>0?this.http.post("consultation/initial-diagnosis",{notes_id:this.consult_details.consult_notes.id,initial_diagnosis:this.selectedIdx}).subscribe({next:e=>{console.log(e),this.saveNotes()},error:e=>console.log(e)}):this.saveNotes()}saveNotes(){this.idx_remarks?this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,idx_remarks:this.idx_remarks}).subscribe({next:e=>{console.log(e),this.showToastr(),this.is_saving=!1},error:e=>console.log(e)}):(this.showToastr(),this.is_saving=!1)}showToastr(){this.toastr.success("Successfully updated!","Initial Diagnosis")}loadIdx(i){this.idx$=(0,G.z)((0,P.of)(i),this.searchInput$.pipe((0,$.h)(e=>null!==e&&e.length>=this.minLengthTerm),(0,V.x)(),(0,B.b)(400),(0,E.b)(()=>this.idxLoading=!0),(0,z.w)(e=>this.getIdx(e).pipe((0,W.K)(()=>(0,P.of)([])),(0,E.b)(()=>this.idxLoading=!1)))))}getIdx(i=null){return this.http.get("libraries/diagnosis",{params:{"filter[search]":i}}).pipe((0,X.U)(e=>(console.log(e.data),e.data)))}loadSelected(){let i=[],e=[];this.initial_dx&&Object.keys(this.initial_dx).length>0?(Object.entries(this.initial_dx).forEach(([o,s],l)=>{let c=s;i.push(c.class_id.toString()),e.push(c.diagnosis)}),this.loadIdx(e),this.selectedIdx=i):this.loadIdx([])}ngOnChanges(i){this.show_content=this.toggle_content,this.consult_details&&(this.initial_dx=this.consult_details.consult_notes.initialdx,this.idx_remarks=this.consult_details.consult_notes.idx_remarks,this.consult_done=this.consult_details.consult_done,this.loadSelected())}constructor(i,e){this.http=i,this.toastr=e,this.faPlusSquare=r.CPW,this.faSave=r.r6l,this.faChevronCircleUp=r._qI,this.faChevronCircleDown=r.yh$,this.faSpinner=r.LM3,this.toastr_message=null,this.toastr_type=null,this.idxLoading=!1,this.show_content=!0,this.is_saving=!1,this.consult_done=!1,this.searchInput$=new R.x,this.minLengthTerm=3}}A.\u0275fac=function(i){return new(i||A)(t.Y36(u.O),t.Y36(h._W))},A.\u0275cmp=t.Xpm({type:A,selectors:[["app-initial-dx"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details"},features:[t.TTD],decls:11,vars:5,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[1,"flex","mb-2","p-4"],["type","submit",1,"inline-flex","p-1","items-center","text-gray-50","bg-sky-400","rounded-l-md","border","border-gray-300"],[1,"text-white","fa-xl",3,"icon"],[1,"chips-container"],["placeholder","search","typeToSearchText","search...","bindValue","class_id","bindLabel","class_name","notFoundText","No records found",1,"select-chips",3,"items","multiple","loading","typeahead","ngModel","disabled","ngModelChange"],[1,"flex","px-4","pb-4"],["rows","3","id","idx_remarks","placeholder","Initial Diagnosis remarks",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"disabled","ngModel","ngModelChange"],[1,"flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(i,e){1&i&&(t._UZ(0,"hr",0),t.TgZ(1,"div",1)(2,"div",2),t._uU(3," Diagnosis "),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"span",5),t._uU(7," Initial Diagnosis "),t.TgZ(8,"button",6),t.NdJ("click",function(){return e.show_content=!e.show_content}),t._UZ(9,"fa-icon",7),t.qZA()(),t.YNc(10,kt,11,12,"div",8),t.qZA()()()),2&i&&(t.xp6(6),t.Q6J("ngClass",t.VKq(3,Jt,!e.show_content)),t.xp6(3),t.Q6J("icon",e.show_content?e.faChevronCircleUp:e.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",e.show_content))},dependencies:[_.mk,_.O5,p.BN,q.w9,a.Fj,a.JJ,a.On,_.Ov]});var Nt=d(3396);function It(n,i){if(1&n&&(t.TgZ(0,"div",18)(1,"h5",19),t._uU(2),t.qZA()()),2&n){const e=i.item,o=i.searchTerm;t.xp6(1),t.Q6J("ngOptionHighlight",o),t.xp6(1),t.AsE("",e.icd10_code,": ",e.icd10_desc,"")}}function Qt(n,i){if(1&n&&t._UZ(0,"fa-icon",23),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSpinner)}}function Mt(n,i){if(1&n&&t._UZ(0,"fa-icon",24),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSave)}}function Ft(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onSubmit())}),t.YNc(1,Qt,1,1,"fa-icon",21),t.YNc(2,Mt,1,1,"fa-icon",22),t._uU(3),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("ngIf",e.is_saving),t.xp6(1),t.Q6J("ngIf",!e.is_saving),t.xp6(1),t.hij(" ",e.is_saving?"Saving":"Save"," ")}}function Ot(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",8)(2,"button",9),t._UZ(3,"fa-icon",10),t.qZA(),t.TgZ(4,"div",11)(5,"ng-select",12),t.NdJ("ngModelChange",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.selectedFdx=s)}),t.ALo(6,"async"),t.YNc(7,It,3,3,"ng-template",13),t.qZA()()(),t.TgZ(8,"div",14)(9,"textarea",15),t.NdJ("ngModelChange",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.fdx_remarks=s)}),t.qZA()(),t.TgZ(10,"div",16),t.YNc(11,Ft,4,4,"button",17),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("icon",e.faPlusSquare),t.xp6(2),t.Q6J("items",t.lcZ(6,10,e.fdx$))("multiple",!0)("loading",e.fdxLoading)("typeahead",e.searchInput$)("ngModel",e.selectedFdx)("disabled",e.consult_done),t.xp6(4),t.Q6J("disabled",e.consult_done)("ngModel",e.fdx_remarks),t.xp6(2),t.Q6J("ngIf",!e.consult_done)}}const St=function(n){return{"rounded-b":n}};class U{onSubmit(){this.is_saving=!0,this.selectedFdx&&Object.keys(this.selectedFdx).length>0?this.http.post("consultation/final-diagnosis",{notes_id:this.consult_details.consult_notes.id,final_diagnosis:this.selectedFdx}).subscribe({next:e=>{console.log(e),this.saveNotes()},error:e=>console.log(e)}):this.saveNotes()}saveNotes(){if(this.fdx_remarks){let i={consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,fdx_remarks:this.fdx_remarks};console.log(i),this.http.update("consultation/notes/",this.consult_details.consult_notes.id,i).subscribe({next:e=>{console.log(e),this.showToastr()},error:e=>console.log(e)})}else this.showToastr()}showToastr(){this.is_saving=!1,this.toastr.success("Successfully updated!","Final Diagnosis")}loadFdx(i){this.fdx$=(0,G.z)((0,P.of)(i),this.searchInput$.pipe((0,$.h)(e=>null!==e&&e.length>=this.minLengthTerm),(0,V.x)(),(0,B.b)(800),(0,E.b)(()=>this.fdxLoading=!0),(0,z.w)(e=>this.getFdx(e).pipe((0,W.K)(()=>(0,P.of)([])),(0,E.b)(()=>this.fdxLoading=!1)))))}getFdx(i=null){return this.http.get("libraries/icd10",{params:{"filter[search]":i}}).pipe((0,X.U)(e=>e.data))}loadSelected(){let i=[],e=[];this.final_dx&&Object.keys(this.final_dx).length>0?(Object.entries(this.final_dx).forEach(([o,s],l)=>{let c=s;i.push(c.icd10_code.toString()),e.push(c.lib_icd10)}),this.loadFdx(e),this.selectedFdx=i):this.loadFdx([])}ngOnChanges(i){this.show_content=this.toggle_content,this.consult_details&&(this.final_dx=this.consult_details.consult_notes.finaldx,this.fdx_remarks=this.consult_details.consult_notes.fdx_remarks,this.consult_done=this.consult_details.consult_done,this.loadSelected())}constructor(i,e){this.http=i,this.toastr=e,this.faPlusSquare=Nt.CPW,this.faChevronCircleUp=r._qI,this.faChevronCircleDown=r.yh$,this.faSave=r.r6l,this.faSpinner=r.LM3,this.fdxLoading=!1,this.show_content=!0,this.is_saving=!1,this.consult_done=!1,this.searchInput$=new R.x,this.minLengthTerm=3}}function Dt(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.key))}}function Yt(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.key))}}function Pt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"input",20),t.NdJ("ngModelChange",function(s){const c=t.CHM(e).$implicit,Y=t.oxw(4);return t.KtG(Y.physical_codes[c.pe_id]=s)}),t.qZA(),t._uU(2),t.qZA()}if(2&n){const e=i.$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("disabled",o.consult_done)("ngModel",o.physical_codes[e.pe_id]),t.xp6(1),t.hij(" ",e.pe_desc," ")}}function Et(n,i){if(1&n&&(t.TgZ(0,"div",18),t.YNc(1,Pt,3,3,"div",19),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.value)}}function Ht(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",21)(1,"span",22),t._uU(2,"Remarks: "),t.qZA(),t.TgZ(3,"input",23),t.NdJ("ngModelChange",function(s){t.CHM(e);const l=t.oxw().$implicit,c=t.oxw(2);return t.KtG(c.physical_remarks[l.key+"_remarks"]=s)}),t.qZA()()}if(2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(3),t.Q6J("disabled",o.consult_done)("ngModel",o.physical_remarks[e.key+"_remarks"])}}function jt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",13)(1,"div",14)(2,"button",6),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.toggleItems(l.key))}),t._UZ(3,"fa-icon",15),t.qZA(),t.YNc(4,Dt,3,3,"span",8),t.YNc(5,Yt,3,3,"span",8),t.qZA(),t.YNc(6,Et,2,1,"div",16),t.YNc(7,Ht,4,2,"div",17),t.qZA()}if(2&n){const e=i.$implicit,o=t.oxw(2);t.xp6(3),t.Q6J("icon",o.pe_item[e.key]?o.faChevronUp:o.faChevronDown),t.xp6(1),t.Q6J("ngIf","heent"!==e.key),t.xp6(1),t.Q6J("ngIf","heent"===e.key),t.xp6(1),t.Q6J("ngIf",void 0!==o.pe_item[e.key]&&o.pe_item[e.key]),t.xp6(1),t.Q6J("ngIf",void 0!==o.pe_item[e.key]&&o.pe_item[e.key])}}function Kt(n,i){if(1&n&&t._UZ(0,"fa-icon",27),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSpinner)}}function Lt(n,i){if(1&n&&t._UZ(0,"fa-icon",28),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSave)}}function Gt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onSubmit())}),t.YNc(1,Kt,1,1,"fa-icon",25),t.YNc(2,Lt,1,1,"fa-icon",26),t._uU(3),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("ngIf",e.is_saving),t.xp6(1),t.Q6J("ngIf",!e.is_saving),t.xp6(1),t.hij(" ",e.is_saving?"Saving":"Save"," ")}}function $t(n,i){if(1&n&&(t.TgZ(0,"div")(1,"div",9),t.YNc(2,jt,8,5,"div",10),t.ALo(3,"keyvalue"),t.qZA(),t.TgZ(4,"div",11),t.YNc(5,Gt,4,4,"button",12),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",t.lcZ(3,2,e.pe_grouped)),t.xp6(3),t.Q6J("ngIf",!e.consult_done)}}U.\u0275fac=function(i){return new(i||U)(t.Y36(u.O),t.Y36(h._W))},U.\u0275cmp=t.Xpm({type:U,selectors:[["app-final-dx"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details"},features:[t.TTD],decls:9,vars:5,consts:[[1,"grid","grid-cols-10","mt-4"],[1,"col-span-2","pt-2"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[1,"flex","mb-2","p-4"],["type","submit",1,"inline-flex","p-1","items-center","text-gray-50","bg-sky-400","rounded-l-md","border","border-gray-300"],[1,"text-white","fa-xl",3,"icon"],[1,"chips-container"],["placeholder","search","typeToSearchText","search...","bindValue","icd10_code","bindLabel","icd10_desc","notFoundText","No records found",1,"select-chips",3,"items","multiple","loading","typeahead","ngModel","disabled","ngModelChange"],["ng-option-tmp",""],[1,"flex","px-4","pb-4"],["rows","3","id","fdx_remarks","placeholder","Final Diagnosis remarks",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"disabled","ngModel","ngModelChange"],[1,"flex","justify-between"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[1,"grid","grid-flow-col","auto-cols-max"],[1,"text-gray-700",3,"ngOptionHighlight"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"div",1),t.TgZ(2,"div",2)(3,"div",3)(4,"span",4),t._uU(5," Final Diagnosis "),t.TgZ(6,"button",5),t.NdJ("click",function(){return e.show_content=!e.show_content}),t._UZ(7,"fa-icon",6),t.qZA()(),t.YNc(8,Ot,12,12,"div",7),t.qZA()()()),2&i&&(t.xp6(4),t.Q6J("ngClass",t.VKq(3,St,!e.show_content)),t.xp6(3),t.Q6J("icon",e.show_content?e.faChevronCircleUp:e.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",e.show_content))},dependencies:[_.mk,_.O5,p.BN,q.w9,q.ir,a.Fj,a.JJ,a.On,_.Ov]});const Vt=function(n){return{"rounded-b":n}};class k{toggleItems(i){this.pe_item[i]=!this.pe_item[i]}onSubmit(){if(console.log(this.physical_remarks),console.log(this.physical_codes),this.is_saving=!0,Object.keys(this.physical_codes).length>0){let i=[];Object.entries(this.physical_codes).forEach(([e,o],s)=>{i.push(e)}),this.saveCodes(i)}else this.saveNotes()}saveCodes(i){let e={notes_id:this.consult_notes.id,physical_exam:i};console.log(e),this.http.post("consultation/physical-exam",e).subscribe({next:o=>{console.log(o),this.saveNotes()},error:o=>console.log(o)})}saveNotes(){let i;this.physical_remarks.notes_id=this.consult_notes.id,this.physical_remarks.patient_id=this.consult_details.patient.id,i=null===this.physical_remarks.id?this.http.post("consultation/physical-exam-remarks",this.physical_remarks):this.http.update("consultation/physical-exam-remarks/",this.physical_remarks.id,this.physical_remarks),i.subscribe({next:e=>{console.log(e),this.is_saving=!1,this.showToastr()},error:e=>console.log(e)})}showToastr(){this.toastr.success("Successfully updated!","Physical exam")}loadLibraries(){this.http.get("libraries/pe").subscribe(i=>{const o=i.data.reduce((s,l)=>{const c=s[l.category_id.toLowerCase()]||[];return c.push(l),s[l.category_id.toLowerCase()]=c,s},{});this.pe_grouped=o})}loadSelected(){Object.keys(this.consult_notes.physical_exam).length>0&&Object.entries(this.consult_notes.physical_exam).forEach(([i,e],o)=>{this.physical_codes[e.pe_id]=!0})}ngOnChanges(i){this.show_content=this.toggle_content,this.consult_details&&(this.consult_notes=this.consult_details.consult_notes,this.consult_done=this.consult_details.consult_done,this.loadSelected(),this.consult_notes.physical_exam_remarks&&(this.physical_remarks=this.consult_notes.physical_exam_remarks))}constructor(i,e){this.http=i,this.toastr=e,this.faSave=r.r6l,this.faChevronCircleUp=r._qI,this.faChevronCircleDown=r.yh$,this.faSpinner=r.LM3,this.faChevronDown=r.ptq,this.faChevronUp=r.mTx,this.pe_grouped=[],this.physical_codes=[],this.physical_remarks={id:null,abdomen_remarks:null,breast_remarks:null,chest_remarks:null,extremities_remarks:null,genitourinary_remarks:null,heart_remarks:null,heent_remarks:null,neuro_remarks:null,pelvic_remarks:null,rectal_remarks:null,skin_remarks:null},this.show_content=!1,this.consult_done=!1,this.is_saving=!1,this.pe_item=[]}ngOnInit(){this.loadLibraries()}}function Bt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",23)(2,"div",24)(3,"div",25),t._uU(4," No records found... "),t.qZA(),t.TgZ(5,"div",26)(6,"button",27),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.showAdd())}),t._UZ(7,"fa-icon",28),t._uU(8," Add "),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(7),t.Q6J("icon",e.faAdd)}}k.\u0275fac=function(i){return new(i||k)(t.Y36(u.O),t.Y36(h._W))},k.\u0275cmp=t.Xpm({type:k,selectors:[["app-physical-exam"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details"},features:[t.TTD],decls:11,vars:5,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[1,"w-full","p-5"],["class","grid grid-cols-1 gap-3 mb-3 border-b border-slate-200 pb-3 last:border-b-0",4,"ngFor","ngForOf"],[1,"flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[1,"grid","grid-cols-1","gap-3","mb-3","border-b","border-slate-200","pb-3","last:border-b-0"],[1,"col-span-1","font-bold"],["size","md",1,"pr-2",3,"icon"],["class","col-span-1 grid grid-cols-2 gap-y-2",4,"ngIf"],["class","flex col-span-1",4,"ngIf"],[1,"col-span-1","grid","grid-cols-2","gap-y-2"],[4,"ngFor","ngForOf"],["type","checkbox",1,"rounded-md","border","border-gray-400","p-2",3,"disabled","ngModel","ngModelChange"],[1,"flex","col-span-1"],[1,"font-semibold","mt-3","mr-2","text-sm"],["rows","2","type","textarea","placeholder","remarks",1,"input","placeholder-slate-400","placeholder:italic",3,"disabled","ngModel","ngModelChange"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(i,e){1&i&&(t._UZ(0,"hr",0),t.TgZ(1,"div",1)(2,"div",2),t._uU(3," Physical Exam "),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"span",5),t._uU(7," Observations "),t.TgZ(8,"button",6),t.NdJ("click",function(){return e.show_content=!e.show_content}),t._UZ(9,"fa-icon",7),t.qZA()(),t.YNc(10,$t,6,4,"div",8),t.qZA()()()),2&i&&(t.xp6(6),t.Q6J("ngClass",t.VKq(3,Vt,!e.show_content)),t.xp6(3),t.Q6J("icon",e.show_content?e.faChevronCircleUp:e.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",e.show_content))},dependencies:[_.mk,_.sg,_.O5,p.BN,a.Fj,a.Wl,a.JJ,a.On,_.gd,_.rS,_.Nd]});const zt=function(n){return{"bg-gray-50":n}};function Wt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr",29),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.selectDrugs(l))}),t.TgZ(1,"th",30),t._uU(2),t.qZA(),t.TgZ(3,"td",31),t._uU(4),t.qZA(),t.TgZ(5,"td",31),t._uU(6),t.qZA(),t._UZ(7,"td",31),t.qZA()}if(2&n){const e=i.$implicit;t.Q6J("ngClass",t.VKq(4,zt,i.odd)),t.xp6(2),t.hij(" ",e.desc," "),t.xp6(2),t.hij(" ",e.unit_desc," "),t.xp6(2),t.hij(" ",e.package_desc," ")}}function Xt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",32)(1,"div",33)(2,"div",34)(3,"p",35),t._uU(4," Showing "),t.TgZ(5,"span",36),t._uU(6),t.qZA(),t._uU(7," to "),t.TgZ(8,"span",36),t._uU(9),t.qZA(),t._uU(10," of "),t.TgZ(11,"span",36),t._uU(12),t.qZA(),t._uU(13," results "),t.qZA()(),t.TgZ(14,"div")(15,"nav",37)(16,"button",38),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.loadDrugs(1))}),t._UZ(17,"fa-icon",39),t.qZA(),t.TgZ(18,"button",40),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.loadDrugs(s.current_page-1))}),t._UZ(19,"fa-icon",39),t._uU(20,"Previous "),t.qZA(),t.TgZ(21,"button",40),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.loadDrugs(s.current_page+1))}),t._uU(22," Next"),t._UZ(23,"fa-icon",41),t.qZA(),t.TgZ(24,"button",42),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.loadDrugs(s.last_page))}),t._UZ(25,"fa-icon",41),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(6),t.Oqu(e.from),t.xp6(3),t.Oqu(e.to),t.xp6(3),t.Oqu(e.total),t.xp6(4),t.Q6J("disabled",1===e.current_page),t.xp6(1),t.Q6J("icon",e.faAnglesLeft),t.xp6(1),t.Q6J("disabled",1===e.current_page),t.xp6(1),t.Q6J("icon",e.faChevronLeft),t.xp6(2),t.Q6J("disabled",e.current_page===e.last_page),t.xp6(2),t.Q6J("icon",e.faChevronRight),t.xp6(1),t.Q6J("disabled",e.current_page===e.last_page),t.xp6(1),t.Q6J("icon",e.faAnglesRight)}}class J{selectDrugs(i){this.openAddForm.emit(i),this.toggleList.emit()}closeModal(){this.toggleList.emit()}showAdd(){this.openAddForm.emit(),this.toggleList.emit()}loadDrugs(i){let e={params:{}};this.search_item&&(e.params["filter[desc]"]=this.search_item),i&&(e.params.page=i),e.params.per_page=this.per_page,this.http.get("libraries/konsulta-medicines",e).subscribe({next:o=>{this.drug_list=o.data,this.current_page=o.meta.current_page,this.last_page=o.meta.last_page,this.from=o.meta.from,this.to=o.meta.to,this.total=o.meta.total},error:o=>console.log(o)})}constructor(i){this.http=i,this.openAddForm=new t.vpe,this.toggleList=new t.vpe,this.faAnglesLeft=r._Wx,this.faChevronLeft=r.A35,this.faChevronRight=r._tD,this.faAnglesRight=r.ccb,this.faSearch=r.wn1,this.faEdit=r.Xcf,this.faAdd=r.XSk,this.faCircleXmark=r.WA2,this.is_updating=!1,this.show_lib_drug=!1,this.per_page=10}ngOnInit(){this.loadDrugs()}}function Rt(n,i){if(1&n&&(t.TgZ(0,"div",39)(1,"span",40),t._uU(2,"Drug description:"),t.qZA(),t._uU(3),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.hij(" ",e.selected_drug.desc," ")}}function te(n,i){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.required_message," ")}}function ee(n,i){if(1&n&&(t.TgZ(0,"div",43),t.YNc(1,te,2,1,"div",44),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.f.added_medicine.errors?null:e.f.added_medicine.errors.required)}}J.\u0275fac=function(i){return new(i||J)(t.Y36(u.O))},J.\u0275cmp=t.Xpm({type:J,selectors:[["app-drug-list"]],outputs:{openAddForm:"openAddForm",toggleList:"toggleList"},decls:30,vars:6,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-5xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"flex","justify-end"],[1,"border","border-gray-400","rounded-md","bg-white"],["type","text","placeholder","Search drugs",1,"form-input","border-0","text-sm","p-1","m-1","border-r","border-gray-400",3,"ngModel","ngModelChange","keyup.enter"],["type","button",1,"text-blue-500","w-9","h-9",3,"click"],[1,"-ml-1",3,"icon"],["type","button",1,"text-white","w-9","h-9",3,"click"],[1,"-mr-4",3,"icon"],[1,"h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"overflow-x-auto","relative","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400","mb-5"],[1,"sticky","top-0","text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6"],[1,"overflow-y-auto"],[4,"ngIf"],["class","bg-white border-t","class","hover:bg-blue-200 cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"flex","justify-end","py-4","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["class","bg-white py-3 flex items-center justify-between sm:px-6",4,"ngIf"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],["colspan","9"],[1,"grid","grid-cols-1","w-full","mt-10"],[1,"text-center","italic"],[1,"flex","justify-center","mt-3"],["type","button",1,"btn-save",3,"click"],[1,"mr-1","text-white",3,"icon"],[1,"hover:bg-blue-200","cursor-pointer",3,"ngClass","click"],["scope","row",1,"py-4","px-6","font-medium","whitespace-nowrap"],[1,"py-4","px-6"],[1,"bg-white","py-3","flex","items-center","justify-between","sm:px-6"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"mr-3"],[1,"text-sm","text-gray-700"],[1,"font-medium"],["aria-label","Pagination",1,"relative","z-0","inline-flex","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"disabled","click"],[1,"block","h-15","w-15","text-gray-500","pr-1",3,"icon"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","bg-white","text-sm","font-medium","text-gray-700","hover:bg-gray-50",3,"disabled","click"],[1,"h-5","w-5","text-gray-500",3,"icon"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"disabled","click"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5," Drugs library "),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"input",7),t.NdJ("ngModelChange",function(s){return e.search_item=s})("keyup.enter",function(){return e.loadDrugs()}),t.qZA(),t.TgZ(9,"button",8),t.NdJ("click",function(){return e.loadDrugs()}),t._UZ(10,"fa-icon",9),t.qZA()(),t.TgZ(11,"button",10),t.NdJ("click",function(){return e.closeModal()}),t._UZ(12,"fa-icon",11),t.qZA()()(),t.TgZ(13,"div",12)(14,"div",13)(15,"table",14)(16,"thead",15)(17,"tr")(18,"th",16),t._uU(19,"Drug description"),t.qZA(),t.TgZ(20,"th",16),t._uU(21,"Unit"),t.qZA(),t.TgZ(22,"th",16),t._uU(23,"Package"),t.qZA()()(),t.TgZ(24,"tbody",17),t.YNc(25,Bt,9,1,"tr",18),t.YNc(26,Wt,8,6,"tr",19),t.qZA()()()(),t.TgZ(27,"div",20),t.YNc(28,Xt,26,11,"div",21),t.qZA()()()(),t._UZ(29,"div",22)),2&i&&(t.xp6(8),t.Q6J("ngModel",e.search_item),t.xp6(2),t.Q6J("icon",e.faSearch),t.xp6(2),t.Q6J("icon",e.faCircleXmark),t.xp6(13),t.Q6J("ngIf",0===(null==e.drug_list?null:e.drug_list.length)||!e.drug_list),t.xp6(1),t.Q6J("ngForOf",e.drug_list),t.xp6(2),t.Q6J("ngIf",(null==e.drug_list?null:e.drug_list.length)>=1))},dependencies:[_.mk,_.sg,_.O5,p.BN,a.Fj,a.JJ,a.On]});const g=function(n){return{"text-red-500":n}},m=function(n){return{"invalid-input":n}};function ne(n,i){if(1&n&&(t.TgZ(0,"div",30)(1,"label",41),t._uU(2,"Brand name"),t.qZA(),t._UZ(3,"input",42),t.YNc(4,ee,2,1,"div",13),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(3,g,e.is_saving&&e.f.added_medicine.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(5,m,e.is_saving&&e.f.added_medicine.errors)),t.xp6(1),t.Q6J("ngIf",e.is_saving&&e.f.added_medicine.errors)}}function ie(n,i){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function oe(n,i){if(1&n&&(t.TgZ(0,"div",43),t.YNc(1,ie,2,1,"div",44),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.dosage_quantity.errors?null:e.f.dosage_quantity.errors.required)}}function se(n,i){if(1&n&&(t.TgZ(0,"option",45),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function ae(n,i){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function le(n,i){if(1&n&&(t.TgZ(0,"div",43),t.YNc(1,ae,2,1,"div",44),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.dosage_uom.errors?null:e.f.dosage_uom.errors.required)}}function re(n,i){if(1&n&&(t.TgZ(0,"option",45),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function _e(n,i){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function ce(n,i){if(1&n&&(t.TgZ(0,"div",43),t.YNc(1,_e,2,1,"div",44),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.dose_regimen.errors?null:e.f.dose_regimen.errors.required)}}function de(n,i){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function pe(n,i){if(1&n&&(t.TgZ(0,"div",43),t.YNc(1,de,2,1,"div",44),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.duration_intake.errors?null:e.f.duration_intake.errors.required)}}function ue(n,i){if(1&n&&(t.TgZ(0,"option",45),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function ge(n,i){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function me(n,i){if(1&n&&(t.TgZ(0,"div",43),t.YNc(1,ge,2,1,"div",44),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.duration_frequency.errors?null:e.f.duration_frequency.errors.required)}}function he(n,i){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function fe(n,i){if(1&n&&(t.TgZ(0,"div",43),t.YNc(1,he,2,1,"div",44),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.quantity.errors?null:e.f.quantity.errors.required)}}function xe(n,i){if(1&n&&(t.TgZ(0,"option",45),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function be(n,i){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function ve(n,i){if(1&n&&(t.TgZ(0,"div",43),t.YNc(1,be,2,1,"div",44),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.quantity_preparation.errors?null:e.f.quantity_preparation.errors.required)}}function Ze(n,i){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function ye(n,i){if(1&n&&(t.TgZ(0,"div",43),t.YNc(1,Ze,2,1,"div",44),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.instruction_quantity.errors?null:e.f.instruction_quantity.errors.required)}}function Ce(n,i){if(1&n&&(t.TgZ(0,"option",45),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function Te(n,i){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function we(n,i){if(1&n&&(t.TgZ(0,"div",43),t.YNc(1,Te,2,1,"div",44),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.medicine_purpose.errors?null:e.f.medicine_purpose.errors.required)}}function qe(n,i){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.required_message," ")}}function Ae(n,i){if(1&n&&(t.TgZ(0,"div",43),t.YNc(1,qe,2,1,"div",44),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.f.purpose_other.errors?null:e.f.purpose_other.errors.required)}}function Ue(n,i){if(1&n&&(t.TgZ(0,"div",30)(1,"label",46),t._uU(2,"Purpose remarks"),t.qZA(),t._UZ(3,"input",47),t.YNc(4,Ae,2,1,"div",13),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(3,g,e.is_saving&&e.f.purpose_other.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(5,m,e.is_saving&&e.f.purpose_other.errors)),t.xp6(1),t.Q6J("ngIf",e.is_saving&&e.f.purpose_other.errors)}}function ke(n,i){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Oqu(e.value)}}function Je(n,i){if(1&n&&(t.TgZ(0,"div",48)(1,"div",49)(2,"ul",50),t.YNc(3,ke,2,1,"li",51),t.ALo(4,"keyvalue"),t.qZA()()()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",t.lcZ(4,1,e.submit_errors))}}class N{get f(){return this.prescriptionForm.controls}closeModal(){this.toggleForm.emit()}onSubmit(){if(this.prescriptionForm.valid){let i;i=this.selected_drug&&this.selected_drug.id?this.http.update("medicine/prescriptions/",this.selected_drug.id,this.prescriptionForm.value):this.http.post("medicine/prescriptions",this.prescriptionForm.value),i.subscribe({next:e=>{console.log(e),this.toastr.success("Successfully added","Prescription"),this.closeModal()},error:e=>console.log(e)})}}loadLibraries(){this.libraries.forEach(i=>{this.http.get("libraries/"+i.location).subscribe({next:e=>{this[i.var_name]=e.data,console.log(e.data)},error:e=>console.log(e),complete:()=>this.show_form=!0})})}constructor(i,e,o){this.http=i,this.toastr=e,this.formBuilder=o,this.toggleForm=new t.vpe,this.is_saving=!1,this.show_form=!1,this.membership_types=[],this.prescriptionForm=new a.cw({patient_id:new a.NI(null),prescribed_by:new a.NI(null),consult_id:new a.NI(null),prescription_date:new a.NI(null),konsulta_medicine_code:new a.NI(null),added_medicine:new a.NI(null),dosage_quantity:new a.NI(null),dosage_uom:new a.NI(null),dose_regimen:new a.NI(null),medicine_purpose:new a.NI(null),purpose_other:new a.NI(null),duration_intake:new a.NI(null),duration_frequency:new a.NI(null),quantity:new a.NI(null),quantity_preparation:new a.NI(null),instruction_quantity:new a.NI(null)}),this.libraries=[{var_name:"drug_uom",location:"unit-of-measurements"},{var_name:"drug_regimen",location:"dose-regimens"},{var_name:"drug_purpose",location:"purposes"},{var_name:"drug_frequency",location:"duration-frequencies"},{var_name:"drug_preparation",location:"preparations"}],this.add_drug=!1}checkPurpose(){"99"===this.prescriptionForm.value.medicine_purpose?this.prescriptionForm.controls.purpose_other.enable():this.prescriptionForm.controls.purpose_other.disable()}ngOnChanges(i){this.prescriptionForm=this.formBuilder.nonNullable.group({patient_id:[this.consult_details.patient.id],prescribed_by:[this.consult_details.physician.id,[a.kI.required]],consult_id:[this.consult_details.id,[a.kI.required]],prescription_date:[(0,_.p6)(this.consult_details.consult_date,"yyyy-MM-dd","en"),[a.kI.required]],konsulta_medicine_code:[null,[a.kI.required]],added_medicine:[null,[a.kI.required]],dosage_quantity:[null,[a.kI.required]],dosage_uom:[null,[a.kI.required]],dose_regimen:[null,[a.kI.required]],medicine_purpose:[null,[a.kI.required]],purpose_other:[null,[a.kI.required]],duration_intake:[null,[a.kI.required]],duration_frequency:[null,[a.kI.required]],quantity:[null,[a.kI.required]],quantity_preparation:[null,[a.kI.required]],instruction_quantity:[null,[a.kI.required]]}),this.selected_drug?this.selected_drug.id?(this.prescriptionForm.patchValue({...this.selected_drug}),this.prescriptionForm.controls.added_medicine.disable(),this.checkPurpose(),this.selected_drug.dossage_quantity&&this.prescriptionForm.patchValue({dosage_quantity:this.selected_drug.dossage_quantity})):(this.prescriptionForm.patchValue({konsulta_medicine_code:this.selected_drug.code}),this.prescriptionForm.controls.added_medicine.disable()):(this.add_drug=!0,this.prescriptionForm.controls.konsulta_medicine_code.disable())}ngOnInit(){}}function Ne(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.toggleModal())}),t._UZ(1,"fa-icon",19),t._uU(2," epress "),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faReceipt)}}function Ie(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.navigateTo("dispensing"))}),t._UZ(1,"fa-icon",19),t._uU(2," dispensing "),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faPrescriptionBottleMedical)}}function Qe(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.toggleList())}),t._UZ(1,"fa-icon",19),t._uU(2," add drugs "),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faAdd)}}function Me(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr",28)(1,"td",29),t._uU(2),t.qZA(),t.TgZ(3,"td",30),t._uU(4),t._UZ(5,"br")(6,"br"),t._uU(7),t.qZA(),t.TgZ(8,"td",30),t._uU(9),t.ALo(10,"date"),t.qZA(),t.TgZ(11,"td",30),t._uU(12),t.qZA(),t.TgZ(13,"td",30),t._uU(14),t.qZA(),t.TgZ(15,"td",31)(16,"button",32),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.openAddForm(l))}),t._UZ(17,"fa-icon",33),t.qZA()()()}if(2&n){const e=i.$implicit,o=t.oxw(2);t.xp6(2),t.hij(" ",e.konsulta_medicine?e.konsulta_medicine.desc:e.added_medicine," "),t.xp6(2),t.xDo(" ",e.dosage_quantity," ",e.unit_of_measurement.desc," ",e.regimen.desc," ",e.duration_intake," ",e.frequency.desc," "),t.xp6(3),t.hij(" Instruction Qty: ",e.instruction_quantity," "),t.xp6(2),t.hij(" ",t.xi3(10,11,e.prescription_date,"MM/dd/yyyy")," "),t.xp6(3),t.hij(" ",e.quantity," "),t.xp6(2),t.hij(" ",e.preparation.desc," "),t.xp6(3),t.Q6J("icon",o.faEdit)}}function Fe(n,i){if(1&n&&(t.TgZ(0,"table",22)(1,"thead")(2,"tr",23)(3,"th",24),t._uU(4,"Medicine"),t.qZA(),t.TgZ(5,"th",24),t._uU(6,"Intake"),t.qZA(),t.TgZ(7,"th",25),t._uU(8,"Prescription Date"),t.qZA(),t.TgZ(9,"th",25),t._uU(10,"Quantity"),t.qZA(),t.TgZ(11,"th",25),t._uU(12,"Unit of Measurement"),t.qZA(),t.TgZ(13,"th",26),t._uU(14,"Action"),t.qZA()()(),t.TgZ(15,"tbody"),t.YNc(16,Me,18,14,"tr",27),t.qZA()()),2&n){const e=t.oxw();t.xp6(16),t.Q6J("ngForOf",e.prescriptions)("ngForTrackBy",e.identify)}}function Oe(n,i){if(1&n&&t._UZ(0,"fa-icon",41),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSpinner)}}function Se(n,i){if(1&n&&t._UZ(0,"fa-icon",42),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSave)}}function De(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onSubmit())}),t.YNc(1,Oe,1,1,"fa-icon",39),t.YNc(2,Se,1,1,"fa-icon",40),t._uU(3),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("ngIf",e.is_saving),t.xp6(1),t.Q6J("ngIf",!e.is_saving),t.xp6(1),t.hij(" ",e.is_saving?"Saving":"Save"," ")}}function Ye(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",34)(2,"textarea",35),t.NdJ("ngModelChange",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.consult_notes.plan=s)}),t.qZA()(),t.TgZ(3,"div",36),t.YNc(4,De,4,4,"button",37),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("disabled",e.consult_done)("ngModel",e.consult_notes.plan),t.xp6(2),t.Q6J("ngIf",!e.consult_done)}}function Pe(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"app-drug-list",43),t.NdJ("openAddForm",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.openAddForm(s))})("toggleList",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.toggleList())}),t.qZA()}}function Ee(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"app-drug-form",44),t.NdJ("toggleForm",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.toggleForm())}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("selected_drug",e.selected_drug)("consult_details",e.consult_details)("drug_uom",e.drug_uom)("drug_regimen",e.drug_regimen)("drug_purpose",e.drug_purpose)("drug_frequency",e.drug_frequency)("drug_preparation",e.drug_preparation)}}function He(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"app-epres",45),t.NdJ("toggleModal",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.toggleModal())}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("prescriptions",e.prescriptions)("consult_details",e.consult_details)}}N.\u0275fac=function(i){return new(i||N)(t.Y36(u.O),t.Y36(h._W),t.Y36(a.qu))},N.\u0275cmp=t.Xpm({type:N,selectors:[["app-drug-form"]],inputs:{selected_drug:"selected_drug",consult_details:"consult_details",drug_uom:"drug_uom",drug_regimen:"drug_regimen",drug_purpose:"drug_purpose",drug_frequency:"drug_frequency",drug_preparation:"drug_preparation"},outputs:{toggleForm:"toggleForm"},features:[t.TTD],decls:69,vars:74,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white","pl-5"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"w-full","max-w-3xl","text-left","text-gray-500","dark:text-gray-400",3,"formGroup"],[1,"grid","grid-cols-3","gap-4","pb-5","px-10"],["class","col-span-3 mt-5 mx-5",4,"ngIf"],["class","col-span-3 text-sm ",4,"ngIf"],[1,"col-span-1","text-sm"],["for","dosage_quantity",1,"font-semibold",3,"ngClass"],["name","dosage_quantity","id","dosage_quantity","formControlName","dosage_quantity","type","number",1,"input",3,"ngClass"],["class","invalid-alert",4,"ngIf"],["for","dosage_uom",1,"font-semibold",3,"ngClass"],["name","dosage_uom","id","dosage_uom","formControlName","dosage_uom",1,"input",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["for","dose_regimen",1,"font-semibold",3,"ngClass"],["name","dose_regimen","id","dose_regimen","formControlName","dose_regimen",1,"input",3,"ngClass"],["for","duration_intake",1,"font-semibold",3,"ngClass"],["name","duration_intake","id","duration_intake","formControlName","duration_intake","type","number",1,"input",3,"ngClass"],[1,"col-span-2","text-sm"],["for","duration_frequency",1,"font-semibold",3,"ngClass"],["name","duration_frequency","id","duration_frequency","formControlName","duration_frequency",1,"input",3,"ngClass"],["for","quantity",1,"font-semibold",3,"ngClass"],["name","quantity","id","quantity","formControlName","quantity","type","number",1,"input",3,"ngClass"],["for","quantity_preparation",1,"font-semibold",3,"ngClass"],["name","quantity_preparation","id","quantity_preparation","formControlName","quantity_preparation",1,"input",3,"ngClass"],["for","instruction_quantity",1,"font-semibold",3,"ngClass"],["name","instruction_quantity","id","instruction_quantity","formControlName","instruction_quantity","type","number",1,"input",3,"ngClass"],[1,"col-span-3","text-sm"],["for","medicine_purpose",1,"font-semibold",3,"ngClass"],["name","medicine_purpose","id","medicine_purpose","formControlName","medicine_purpose",1,"input",3,"ngClass","change"],["class","col-span-3 text-sm",4,"ngIf"],["id","show_errors","class","relative mx-10 col-span-8 bg-red-200 rounded border border-red-300 text-red-900 text-sm mb-5",4,"ngIf"],[1,"flex","justify-end","mr-10","py-3","rounded-b"],["type","button",1,"btn-save","px-10","bg-gray-400","mr-5",3,"click"],["type","button",1,"btn-save","px-10","disabled:bg-gray-300",3,"disabled","click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"col-span-3","mt-5","mx-5"],[1,"font-semibold"],["for","added_medicine",1,"font-semibold",3,"ngClass"],["name","added_medicine","id","added_medicine","formControlName","added_medicine","type","text",1,"input",3,"ngClass"],[1,"invalid-alert"],[4,"ngIf"],[3,"value"],["for","purpose_other",1,"font-semibold",3,"ngClass"],["name","purpose_other","id","purpose_other","formControlName","purpose_other","type","text",1,"input",3,"ngClass"],["id","show_errors",1,"relative","mx-10","col-span-8","bg-red-200","rounded","border","border-red-300","text-red-900","text-sm","mb-5"],[1,"block","p-3","pl-10"],[1,"list-disc"],[4,"ngFor","ngForOf"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5," Prescribe medicine "),t.qZA()(),t.TgZ(6,"div",5)(7,"form",6)(8,"div",7),t.YNc(9,Rt,4,1,"div",8),t.YNc(10,ne,5,7,"div",9),t.TgZ(11,"div",10)(12,"label",11),t._uU(13,"Dosage Qty."),t.qZA(),t._UZ(14,"input",12),t.YNc(15,oe,2,1,"div",13),t.qZA(),t.TgZ(16,"div",10)(17,"label",14),t._uU(18,"Dosage unit"),t.qZA(),t.TgZ(19,"select",15),t.YNc(20,se,2,2,"option",16),t.qZA(),t.YNc(21,le,2,1,"div",13),t.qZA(),t.TgZ(22,"div",10)(23,"label",17),t._uU(24,"Dosage regimen"),t.qZA(),t.TgZ(25,"select",18),t.YNc(26,re,2,2,"option",16),t.qZA(),t.YNc(27,ce,2,1,"div",13),t.qZA(),t.TgZ(28,"div",10)(29,"label",19),t._uU(30,"Duration"),t.qZA(),t._UZ(31,"input",20),t.YNc(32,pe,2,1,"div",13),t.qZA(),t.TgZ(33,"div",21)(34,"label",22),t._uU(35,"Duration frequency"),t.qZA(),t.TgZ(36,"select",23),t.YNc(37,ue,2,2,"option",16),t.qZA(),t.YNc(38,me,2,1,"div",13),t.qZA(),t.TgZ(39,"div",10)(40,"label",24),t._uU(41,"Quantity"),t.qZA(),t._UZ(42,"input",25),t.YNc(43,fe,2,1,"div",13),t.qZA(),t.TgZ(44,"div",10)(45,"label",26),t._uU(46,"Preparation"),t.qZA(),t.TgZ(47,"select",27),t.YNc(48,xe,2,2,"option",16),t.qZA(),t.YNc(49,ve,2,1,"div",13),t.qZA(),t.TgZ(50,"div",10)(51,"label",28),t._uU(52,"Instruction Qty."),t.qZA(),t._UZ(53,"input",29),t.YNc(54,ye,2,1,"div",13),t.qZA(),t.TgZ(55,"div",30)(56,"label",31),t._uU(57,"Medicine purpose"),t.qZA(),t.TgZ(58,"select",32),t.NdJ("change",function(){return e.checkPurpose()}),t.YNc(59,Ce,2,2,"option",16),t.qZA(),t.YNc(60,we,2,1,"div",13),t.qZA(),t.YNc(61,Ue,5,7,"div",33),t.qZA(),t.YNc(62,Je,5,3,"div",34),t.qZA()(),t.TgZ(63,"div",35)(64,"button",36),t.NdJ("click",function(){return e.closeModal()}),t._uU(65,"Close"),t.qZA(),t.TgZ(66,"button",37),t.NdJ("click",function(){return e.onSubmit()}),t._uU(67,"Save"),t.qZA()()()()(),t._UZ(68,"div",38)),2&i&&(t.xp6(7),t.Q6J("formGroup",e.prescriptionForm),t.xp6(2),t.Q6J("ngIf",!e.add_drug),t.xp6(1),t.Q6J("ngIf",e.add_drug),t.xp6(2),t.Q6J("ngClass",t.VKq(38,g,e.is_saving&&e.f.dosage_quantity.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(40,m,e.is_saving&&e.f.dosage_quantity.errors)),t.xp6(1),t.Q6J("ngIf",e.is_saving&&e.f.dosage_quantity.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(42,g,e.is_saving&&e.f.dosage_uom.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(44,m,e.is_saving&&e.f.dosage_uom.errors)),t.xp6(1),t.Q6J("ngForOf",e.drug_uom),t.xp6(1),t.Q6J("ngIf",e.is_saving&&e.f.dosage_uom.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(46,g,e.is_saving&&e.f.dose_regimen.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(48,m,e.is_saving&&e.f.dose_regimen.errors)),t.xp6(1),t.Q6J("ngForOf",e.drug_regimen),t.xp6(1),t.Q6J("ngIf",e.is_saving&&e.f.dose_regimen.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(50,g,e.is_saving&&e.f.duration.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(52,m,e.is_saving&&e.f.duration_intake.errors)),t.xp6(1),t.Q6J("ngIf",e.is_saving&&e.f.duration_intake.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(54,g,e.is_saving&&e.f.duration_frequency.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(56,m,e.is_saving&&e.f.duration_frequency.errors)),t.xp6(1),t.Q6J("ngForOf",e.drug_frequency),t.xp6(1),t.Q6J("ngIf",e.is_saving&&e.f.duration_frequency.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(58,g,e.is_saving&&e.f.quantity.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(60,m,e.is_saving&&e.f.quantity.errors)),t.xp6(1),t.Q6J("ngIf",e.is_saving&&e.f.quantity.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(62,g,e.is_saving&&e.f.quantity_preparation.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(64,m,e.is_saving&&e.f.quantity_preparation.errors)),t.xp6(1),t.Q6J("ngForOf",e.drug_preparation),t.xp6(1),t.Q6J("ngIf",e.is_saving&&e.f.quantity_preparation.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(66,g,e.is_saving&&e.f.instruction_quantity.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(68,m,e.is_saving&&e.f.instruction_quantity.errors)),t.xp6(1),t.Q6J("ngIf",e.is_saving&&e.f.instruction_quantity.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(70,g,e.is_saving&&e.f.medicine_purpose.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(72,m,e.is_saving&&e.f.medicine_purpose.errors)),t.xp6(1),t.Q6J("ngForOf",e.drug_purpose),t.xp6(1),t.Q6J("ngIf",e.is_saving&&e.f.medicine_purpose.errors),t.xp6(1),t.Q6J("ngIf","99"===e.prescriptionForm.value.medicine_purpose),t.xp6(1),t.Q6J("ngIf",e.submit_errors),t.xp6(4),t.Q6J("disabled",e.prescriptionForm.invalid))},dependencies:[_.mk,_.sg,_.O5,a._Y,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.sg,a.u,_.Nd]});const tt=function(n){return{"rounded-b":n}};class I{navigateTo(i){this.router.navigate(["/patient/"+i,{id:this.consult_details.patient.id,consult_id:this.consult_details.id}])}openDeleteForm(i){this.selected_drug=i,this.toggleDeleteForm()}onSubmit(){this.is_saving=!0,this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,plan:this.consult_notes.plan}).subscribe({next:e=>{this.is_saving=!1,this.showToastr()},error:e=>console.log(e)})}showToastr(){this.toastr.success("Successfully recorded!","Treatment plan")}openEditForm(i){this.selected_drug=i}openAddForm(i){console.log(i),this.selected_drug=i,this.toggleForm()}toggleDeleteForm(){this.show_delete_form=!this.show_delete_form,!1===this.show_delete_form&&this.loadPrescriptions()}toggleForm(){this.drug_uom&&this.drug_uom&&this.drug_purpose&&this.drug_frequency&&this.drug_preparation?this.show_form=!this.show_form:this.loadLibraries(),!1===this.show_form&&this.loadPrescriptions()}ngOnChanges(i){this.show_content=this.toggle_content,this.show_content_tx=this.toggle_content,this.consult_details&&(this.show_actions=!0),this.consult_details&&(this.consult_notes=this.consult_details.consult_notes,this.consult_done=this.consult_details.consult_done)}loadLibraries(){this.libraries.forEach((i,e)=>{this.http.get("libraries/"+i.location).subscribe({next:o=>{this[i.var_name]=o.data,this.libraries.length-1===e&&(this.show_form=!0)},error:o=>console.log(o)})})}toggleModal(){this.show_epress=!this.show_epress}toggleList(){this.show_list=!this.show_list}identify(i,e){return e.id}loadPrescriptions(){this.http.get("medicine/prescriptions",{params:{sort:"-prescription_date",consult_id:this.consult_details.id}}).subscribe({next:e=>{this.prescriptions=e.data},error:e=>console.log(e)})}constructor(i,e,o){this.http=i,this.toastr=e,this.router=o,this.show_content=!0,this.show_list=!1,this.show_form=!1,this.show_delete_form=!1,this.show_actions=!1,this.show_content_tx=!1,this.is_saving=!1,this.consult_done=!1,this.faChevronCircleUp=r._qI,this.faChevronCircleDown=r.yh$,this.faAdd=r.XSk,this.faSave=r.r6l,this.faSpinner=r.LM3,this.faEdit=r.Xcf,this.faTrash=r.$aW,this.faPrescriptionBottleMedical=r.v0s,this.faReceipt=r.dLy,this.consult_notes={plan:null},this.libraries=[{var_name:"drug_uom",location:"unit-of-measurements"},{var_name:"drug_regimen",location:"dose-regimens"},{var_name:"drug_purpose",location:"purposes"},{var_name:"drug_frequency",location:"duration-frequencies"},{var_name:"drug_preparation",location:"preparations"}],this.show_epress=!1}ngOnInit(){this.loadPrescriptions()}}function je(n,i){if(1&n&&t._UZ(0,"fa-icon",22),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSpinner)}}function Ke(n,i){if(1&n&&t._UZ(0,"fa-icon",23),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSave)}}function Le(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onSubmit())}),t.YNc(1,je,1,1,"fa-icon",20),t.YNc(2,Ke,1,1,"fa-icon",21),t._uU(3),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("ngIf",e.is_saving),t.xp6(1),t.Q6J("ngIf",!e.is_saving),t.xp6(1),t.hij(" ",e.is_saving?"Saving":"Save"," ")}}function Ge(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",8)(2,"button",9),t._UZ(3,"fa-icon",10),t.qZA(),t.TgZ(4,"div",11)(5,"ng-select",12),t.NdJ("ngModelChange",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.selectedComplaint=s)}),t.qZA()()(),t.TgZ(6,"div",13)(7,"label",14),t._uU(8,"Complaint notes"),t.qZA(),t.TgZ(9,"textarea",15),t.NdJ("ngModelChange",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.consult_notes.complaint=s)}),t.qZA()(),t.TgZ(10,"div",13)(11,"label",14),t._uU(12,"History notes"),t.qZA(),t.TgZ(13,"textarea",16),t.NdJ("ngModelChange",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.consult_notes.history=s)}),t.qZA()(),t.TgZ(14,"div",17),t.YNc(15,Le,4,4,"button",18),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("icon",e.faPlusSquare),t.xp6(2),t.Q6J("disabled",e.consult_done)("items",e.complaints)("multiple",!0)("closeOnSelect",!1)("hideSelected",!0)("ngModel",e.selectedComplaint),t.xp6(4),t.Q6J("disabled",e.consult_done)("ngModel",e.consult_notes.complaint),t.xp6(4),t.Q6J("disabled",e.consult_done)("ngModel",e.consult_notes.history),t.xp6(2),t.Q6J("ngIf",!e.consult_done)}}I.\u0275fac=function(i){return new(i||I)(t.Y36(u.O),t.Y36(h._W),t.Y36(v.F0))},I.\u0275cmp=t.Xpm({type:I,selectors:[["app-prescription"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",with_credentials:"with_credentials"},features:[t.TTD],decls:22,vars:15,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","flex","justify-between"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-amber-500","flex","justify-between",3,"ngClass"],["type","button","class","ml-3 text-sm bg-white text-green-500 px-3 rounded-full",3,"click",4,"ngIf"],["type","button","class","text-sm bg-white text-amber-500 px-3 rounded-full",3,"click",4,"ngIf"],["type","button","class","ml-3 text-sm bg-white text-blue-500 px-3 rounded-full",3,"click",4,"ngIf"],["class","w-full table-auto p-5",4,"ngIf"],[1,"rounded-md","border","border-solid","border-gray-300","mt-5"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[3,"openAddForm","toggleList",4,"ngIf"],[3,"selected_drug","consult_details","drug_uom","drug_regimen","drug_purpose","drug_frequency","drug_preparation","toggleForm",4,"ngIf"],[3,"prescriptions","consult_details","toggleModal",4,"ngIf"],["type","button",1,"ml-3","text-sm","bg-white","text-green-500","px-3","rounded-full",3,"click"],[1,"pr-1",3,"icon"],["type","button",1,"text-sm","bg-white","text-amber-500","px-3","rounded-full",3,"click"],["type","button",1,"ml-3","text-sm","bg-white","text-blue-500","px-3","rounded-full",3,"click"],[1,"w-full","table-auto","p-5"],[1,"align-top"],["scope","col",1,"text-center","py-3","px-3","w-3/12"],["scope","col",1,"text-center","py-3","px-3","w-1/12"],["scope","col",1,"text-center","py-3","px-3","w-2/12"],["class","bg-white border-b last:border-0 text-sm align-top",4,"ngFor","ngForOf","ngForTrackBy"],[1,"bg-white","border-b","last:border-0","text-sm","align-top"],[1,"py-4","px-3"],["scope","row",1,"py-4","px-3","font-medium","text-gray-900"],[1,"text-sm","text-center","mb-5","align-middle"],[3,"click"],[1,"text-amber-500",3,"icon"],[1,"grid","grid-cols-1","px-4","pb-4","mt-4"],["rows","3","id","plan","placeholder","Treatment plan",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"disabled","ngModel","ngModelChange"],[1,"flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"],[3,"openAddForm","toggleList"],[3,"selected_drug","consult_details","drug_uom","drug_regimen","drug_purpose","drug_frequency","drug_preparation","toggleForm"],[3,"prescriptions","consult_details","toggleModal"]],template:function(i,e){1&i&&(t._UZ(0,"hr",0),t.TgZ(1,"div",1)(2,"div",2),t._uU(3," Prescription "),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"span",5),t._uU(7," Prescriptions "),t.TgZ(8,"div"),t.YNc(9,Ne,3,1,"button",6),t.YNc(10,Ie,3,1,"button",7),t.YNc(11,Qe,3,1,"button",8),t.qZA()(),t.YNc(12,Fe,17,2,"table",9),t.qZA(),t.TgZ(13,"div",10)(14,"span",11),t._uU(15," Treatment Plan "),t.TgZ(16,"button",12),t.NdJ("click",function(){return e.show_content_tx=!e.show_content_tx}),t._UZ(17,"fa-icon",13),t.qZA()(),t.YNc(18,Ye,5,3,"div",14),t.qZA()()(),t.YNc(19,Pe,1,0,"app-drug-list",15),t.YNc(20,Ee,1,7,"app-drug-form",16),t.YNc(21,He,1,2,"app-epres",17)),2&i&&(t.xp6(6),t.Q6J("ngClass",t.VKq(11,tt,!e.show_content)),t.xp6(3),t.Q6J("ngIf",e.with_credentials),t.xp6(1),t.Q6J("ngIf",e.prescriptions),t.xp6(1),t.Q6J("ngIf",e.show_actions),t.xp6(1),t.Q6J("ngIf",e.show_content),t.xp6(2),t.Q6J("ngClass",t.VKq(13,tt,!e.show_content_tx)),t.xp6(3),t.Q6J("icon",e.show_content_tx?e.faChevronCircleUp:e.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",e.show_content_tx),t.xp6(1),t.Q6J("ngIf",e.show_list),t.xp6(1),t.Q6J("ngIf",e.show_form),t.xp6(1),t.Q6J("ngIf",e.show_epress))},dependencies:[_.mk,_.sg,_.O5,x,p.BN,a.Fj,a.JJ,a.On,J,N,_.uU]});const $e=function(n){return{"rounded-b":n}};class Q{onSubmit(){this.is_saving=!0,this.selectedComplaint&&Object.keys(this.selectedComplaint).length>0?this.http.post("consultation/complaint",{notes_id:this.consult_details.consult_notes.id,consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,complaints:this.selectedComplaint}).subscribe({next:e=>{console.log(e),this.saveNotes()},error:e=>console.log(e)}):this.saveNotes()}saveNotes(){this.consult_notes.complaint||this.consult_notes.history?this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,complaint:this.consult_notes.complaint,history:this.consult_notes.history}).subscribe({next:e=>{console.log(e),this.is_saving=!1,this.showToastr(),this.loadConsult.emit()},error:e=>console.log(e)}):(this.is_saving=!1,this.showToastr(),this.loadConsult.emit())}showToastr(){this.toastr.success("Successfully updated!","Complaint")}loadLib(){this.http.get("libraries/complaint").subscribe(i=>{this.complaints=i.data})}loadSelected(){let i=[];console.log(this.consult_details.consult_notes.complaints),this.consult_details.consult_notes&&this.consult_details.consult_notes.complaints&&Object.entries(this.consult_details.consult_notes.complaints).forEach(([e,o],s)=>{i.push(o.complaint_id)}),this.selectedComplaint=i}ngOnChanges(i){this.show_content=this.toggle_content,this.consult_details&&(this.loadSelected(),this.consult_notes=this.consult_details.consult_notes,this.consult_done=this.consult_details.consult_done)}constructor(i,e){this.http=i,this.toastr=e,this.loadConsult=new t.vpe,this.faPlusSquare=r.CPW,this.faSave=r.r6l,this.faChevronCircleUp=r._qI,this.faChevronCircleDown=r.yh$,this.faSpinner=r.LM3,this.selectedComplaint=[],this.consult_notes={complaint:null,history:null},this.show_content=!0,this.is_saving=!1,this.consult_done=!1}ngOnInit(){this.loadLib()}}function Ve(n,i){if(1&n&&(t.TgZ(0,"ul",29)(1,"li"),t._uU(2),t.qZA()()),2&n){const e=i.$implicit;t.xp6(2),t.Oqu(e.lib_complaints.complaint_desc)}}function Be(n,i){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.diagnosis.class_name," ")}}function ze(n,i){if(1&n&&(t.TgZ(0,"div",30)(1,"span",31),t._uU(2,"remarks:"),t.qZA(),t._uU(3),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.hij(" ",e.consult_notes.idx_remarks," ")}}function We(n,i){if(1&n&&(t.TgZ(0,"li")(1,"span",32),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&n){const e=i.$implicit;t.xp6(2),t.hij("",e.lib_icd10.icd10_code,":"),t.xp6(1),t.hij(" ",e.lib_icd10.icd10_desc," ")}}function Xe(n,i){if(1&n&&(t.TgZ(0,"div",30)(1,"span",31),t._uU(2,"remarks:"),t.qZA(),t._uU(3),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.hij(" ",e.consult_notes.fdx_remarks," ")}}function Re(n,i){if(1&n&&(t.TgZ(0,"tr",13)(1,"td",14)(2,"div",15)(3,"span",16),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"span",17),t._uU(7),t.ALo(8,"date"),t.qZA()()(),t.TgZ(9,"td",18)(10,"div",15)(11,"span",19)(12,"span",20),t._uU(13,"Compalint notes:"),t.qZA(),t._UZ(14,"br"),t._uU(15),t.qZA(),t.YNc(16,Ve,3,1,"ul",21),t.TgZ(17,"span",22)(18,"span",20),t._uU(19,"History notes:"),t.qZA(),t._UZ(20,"br"),t._uU(21),t.qZA()()(),t.TgZ(22,"td",23)(23,"div",24)(24,"span",20),t._uU(25,"Initial"),t.qZA(),t.TgZ(26,"ul",25),t.YNc(27,Be,2,1,"li",26),t.qZA(),t.YNc(28,ze,4,1,"div",27),t.qZA(),t.TgZ(29,"div",28)(30,"span",20),t._uU(31,"Final"),t.qZA(),t.TgZ(32,"ul",25),t.YNc(33,We,4,2,"li",26),t.qZA(),t.YNc(34,Xe,4,1,"div",27),t.qZA()(),t._UZ(35,"td",23),t.qZA()),2&n){const e=i.$implicit;t.xp6(4),t.Oqu(t.xi3(5,9,e.consult_date,"MM/dd/yyyy")),t.xp6(3),t.Oqu(t.xi3(8,12,e.consult_date,"hh:mm:ss a")),t.xp6(8),t.hij(" ",e.consult_notes.complaint," "),t.xp6(1),t.Q6J("ngForOf",e.consult_notes.complaints),t.xp6(5),t.hij("",e.consult_notes.history," "),t.xp6(6),t.Q6J("ngForOf",e.consult_notes.initialdx),t.xp6(1),t.Q6J("ngIf",e.consult_notes.idx_remarks),t.xp6(5),t.Q6J("ngForOf",e.consult_notes.finaldx),t.xp6(1),t.Q6J("ngIf",e.consult_notes.fdx_remarks)}}function tn(n,i){if(1&n&&(t.TgZ(0,"table",10)(1,"thead")(2,"tr",11)(3,"th"),t._uU(4,"Date"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Complaints | History"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Diagnosis"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Precription"),t.qZA()()(),t.TgZ(11,"tbody"),t.YNc(12,Re,36,15,"tr",12),t.ALo(13,"slice"),t.qZA()()),2&n){const e=t.oxw();t.xp6(12),t.Q6J("ngForOf",t.xi3(13,1,e.visit_list,1))}}function en(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",33)(2,"div",34)(3,"div")(4,"p",35),t._uU(5," Showing "),t.TgZ(6,"span",36),t._uU(7),t.qZA(),t._uU(8," to "),t.TgZ(9,"span",36),t._uU(10),t.qZA(),t._uU(11," of "),t.TgZ(12,"span",36),t._uU(13),t.qZA(),t._uU(14," results "),t.qZA()(),t.TgZ(15,"div")(16,"nav",37)(17,"button",38),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.loadPreviousVisit(1))}),t._UZ(18,"fa-icon",39),t.qZA(),t.TgZ(19,"button",40),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.loadPreviousVisit(s.current_page-1))}),t._UZ(20,"fa-icon",39),t._uU(21,"Previous "),t.qZA(),t.TgZ(22,"button",40),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.loadPreviousVisit(s.current_page+1))}),t._uU(23," Next"),t._UZ(24,"fa-icon",41),t.qZA(),t.TgZ(25,"button",42),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.loadPreviousVisit(s.last_page))}),t._UZ(26,"fa-icon",41),t.qZA()()()()()()}if(2&n){const e=t.oxw();t.xp6(7),t.Oqu(e.from),t.xp6(3),t.Oqu(e.to-1),t.xp6(3),t.Oqu(e.total-1),t.xp6(4),t.Q6J("disabled",1===e.current_page),t.xp6(1),t.Q6J("icon",e.faAnglesLeft),t.xp6(1),t.Q6J("disabled",1===e.current_page),t.xp6(1),t.Q6J("icon",e.faChevronLeft),t.xp6(2),t.Q6J("disabled",e.current_page===e.last_page),t.xp6(2),t.Q6J("icon",e.faChevronRight),t.xp6(1),t.Q6J("disabled",e.current_page===e.last_page),t.xp6(1),t.Q6J("icon",e.faAnglesRight)}}Q.\u0275fac=function(i){return new(i||Q)(t.Y36(u.O),t.Y36(h._W))},Q.\u0275cmp=t.Xpm({type:Q,selectors:[["app-complaint-history"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",have_complaint:"have_complaint"},outputs:{loadConsult:"loadConsult"},features:[t.TTD],decls:10,vars:5,consts:[[1,"grid","grid-cols-10","mb-5"],[1,"col-span-2","pt-2","pr-5","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[1,"flex","mb-2","p-4"],["type","submit",1,"inline-flex","p-1","items-center","text-gray-50","bg-sky-400","rounded-l-md","border","border-gray-300"],[1,"text-white","fa-xl",3,"icon"],[1,"chips-container"],["placeholder","search","bindLabel","complaint_desc","bindValue","complaint_id","placeholder","Select Complaint",1,"select-chips",3,"disabled","items","multiple","closeOnSelect","hideSelected","ngModel","ngModelChange"],[1,"grid","grid-cols-1","px-4","pb-4"],["for","complaint_notes",1,"font-semibold","pl-1"],["rows","3","id","complaint_notes","placeholder","Complaint Notes",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"disabled","ngModel","ngModelChange"],["rows","3","id","history_notes","placeholder","History of Current Illness",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"disabled","ngModel","ngModelChange"],[1,"flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2," Chief Complaint and History of Current Illness "),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"span",4),t._uU(6," Complaints "),t.TgZ(7,"button",5),t.NdJ("click",function(){return e.show_content=!e.show_content}),t._UZ(8,"fa-icon",6),t.qZA()(),t.YNc(9,Ge,16,12,"div",7),t.qZA()()()),2&i&&(t.xp6(5),t.Q6J("ngClass",t.VKq(3,$e,!e.show_content)),t.xp6(3),t.Q6J("icon",e.show_content?e.faChevronCircleUp:e.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",e.show_content))},dependencies:[_.mk,_.O5,p.BN,q.w9,a.Fj,a.JJ,a.On]});const nn=function(n){return{"rounded-b":n}};class M{loadPreviousVisit(i){this.http.get("consultation/records",{params:{patient_id:this.patient_id,per_page:this.per_page,sort:"-consult_date",pt_group:"cn",page:i}}).subscribe({next:o=>{this.visit_list=o.data,this.current_page=o.meta.current_page,this.last_page=o.meta.last_page,this.from=o.meta.from,this.to=o.meta.to,this.total=o.meta.total},error:o=>console.log(o)})}ngOnChanges(i){this.show_content=this.toggle_content}constructor(i,e){this.route=i,this.http=e,this.show_content=!1,this.faChevronCircleUp=r._qI,this.faChevronCircleDown=r.yh$,this.faChevronLeft=r.A35,this.faChevronRight=r._tD,this.faAnglesLeft=r._Wx,this.faAnglesRight=r.ccb,this.per_page=5}ngOnInit(){this.patient_id=this.route.snapshot.paramMap.get("id"),this.consult_id=this.route.snapshot.paramMap.get("consult_id"),this.loadPreviousVisit(1)}}M.\u0275fac=function(i){return new(i||M)(t.Y36(v.gz),t.Y36(u.O))},M.\u0275cmp=t.Xpm({type:M,selectors:[["app-consult-history"]],inputs:{toggle_content:"toggle_content"},features:[t.TTD],decls:12,vars:6,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-green-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],["class","w-full table-auto",4,"ngIf"],[4,"ngIf"],[1,"w-full","table-auto"],[1,"border-b","border-solid","border-gray-200"],["class","text-left mt-3 align-top border-t border-slate-200 text-sm",4,"ngFor","ngForOf"],[1,"text-left","mt-3","align-top","border-t","border-slate-200","text-sm"],[1,"p-3","w-2/12"],[1,"grid","grid-cols-1"],[1,"font-semibold","w-full"],[1,"text-sm","w-full"],[1,"p-3","w-4/12"],[1,"w-full","mb-3"],[1,"font-semibold"],["class","list-disc last:mb-3 ml-5",4,"ngFor","ngForOf"],[1,"w-full","mt-2","pt-2"],[1,"p-3","w-3/12"],[1,"grid","grid-cols-1","text-left"],[1,"list-disc","ml-5"],[4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],[1,"grid","grid-cols-1","text-left","mt-2","pt-2"],[1,"list-disc","last:mb-3","ml-5"],[1,"mt-2"],[1,"text-sm","italic"],[1,"font-semibold","text-sm"],[1,"bg-white","px-4","py-4","flex","items-center","justify-between","border-t","border-gray-200","sm:px-6"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"text-sm","text-gray-700"],[1,"font-medium"],["aria-label","Pagination",1,"relative","z-0","inline-flex","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"disabled","click"],[1,"block","h-15","w-15","text-gray-500","pr-1",3,"icon"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","bg-white","text-sm","font-medium","text-gray-700","hover:bg-gray-50",3,"disabled","click"],[1,"h-5","w-5","text-gray-500",3,"icon"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"disabled","click"]],template:function(i,e){1&i&&(t._UZ(0,"hr",0),t.TgZ(1,"div",1)(2,"div",2),t._uU(3," Diagnosis History "),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"span",5),t._uU(7," Previous History "),t.TgZ(8,"button",6),t.NdJ("click",function(){return e.show_content=!e.show_content}),t._UZ(9,"fa-icon",7),t.qZA()(),t.YNc(10,tn,14,4,"table",8),t.YNc(11,en,27,11,"div",9),t.qZA()()()),2&i&&(t.xp6(6),t.Q6J("ngClass",t.VKq(4,nn,!e.show_content)),t.xp6(3),t.Q6J("icon",e.show_content?e.faChevronCircleUp:e.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",e.show_content),t.xp6(1),t.Q6J("ngIf",(null==e.visit_list?null:e.visit_list.length)>=6))},dependencies:[_.mk,_.sg,_.O5,p.BN,_.OU,_.uU]});class F{constructor(){}ngOnInit(){}}function on(n,i){if(1&n&&(t.TgZ(0,"option",17),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function sn(n,i){if(1&n&&t._UZ(0,"fa-icon",21),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSpinner)}}function an(n,i){if(1&n&&t._UZ(0,"fa-icon",22),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSave)}}function ln(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onSubmit())}),t.YNc(1,sn,1,1,"fa-icon",19),t.YNc(2,an,1,1,"fa-icon",20),t._uU(3),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("ngIf",e.is_saving),t.xp6(1),t.Q6J("ngIf",!e.is_saving),t.xp6(1),t.hij(" ",e.is_saving?"Saving":"Save"," ")}}function rn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"label",11),t._uU(4,"General Survey"),t.qZA(),t.TgZ(5,"select",12),t.NdJ("ngModelChange",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.general_survey_code=s)}),t.YNc(6,on,2,2,"option",13),t.qZA()(),t.TgZ(7,"div",10)(8,"label",11),t._uU(9,"Remarks"),t.qZA(),t.TgZ(10,"input",14),t.NdJ("ngModelChange",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.general_survey_remarks=s)}),t.qZA()()(),t.TgZ(11,"div",15),t.YNc(12,ln,4,4,"button",16),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(5),t.Q6J("disabled",e.consult_done)("ngModel",e.general_survey_code),t.xp6(1),t.Q6J("ngForOf",e.survey_list),t.xp6(4),t.Q6J("disabled",e.consult_done)("ngModel",e.general_survey_remarks),t.xp6(2),t.Q6J("ngIf",!e.consult_done)}}F.\u0275fac=function(i){return new(i||F)},F.\u0275cmp=t.Xpm({type:F,selectors:[["app-consult-summary"]],decls:34,vars:0,consts:[[1,"flex","justify-center"],[1,"w-4/6"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between"],[1,"grid","grid-cols-5","m-5"],[1,"col-span-1","font-semibold"],[1,"col-span-4","ml-5"],[1,"col-span-1","font-semibold","mt-5"],[1,"col-span-4","mt-5","ml-5"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),t._uU(4," Consultation Summary (Date here) "),t.qZA(),t.TgZ(5,"div",4)(6,"div",5),t._uU(7," Chief Complaint: "),t.qZA(),t.TgZ(8,"div",6),t._uU(9," test "),t.qZA(),t.TgZ(10,"div",7),t._uU(11," Complaint Notes: "),t.qZA(),t.TgZ(12,"div",8),t._uU(13," test "),t.qZA(),t.TgZ(14,"div",7),t._uU(15," History of Current Illness "),t.qZA(),t.TgZ(16,"div",8),t._uU(17," test "),t.qZA(),t.TgZ(18,"div",7),t._uU(19," Physical Exam "),t.qZA(),t.TgZ(20,"div",8),t._uU(21," test "),t.qZA(),t.TgZ(22,"div",7),t._uU(23," Initial Diagnosis "),t.qZA(),t.TgZ(24,"div",8),t._uU(25," test "),t.qZA(),t.TgZ(26,"div",7),t._uU(27," Final Diagnosis "),t.qZA(),t.TgZ(28,"div",8),t._uU(29," test "),t.qZA(),t.TgZ(30,"div",7),t._uU(31," Prescription "),t.qZA(),t.TgZ(32,"div",8),t._uU(33," test "),t.qZA()()()()())}});const _n=function(n){return{"rounded-b":n}};class O{onSubmit(){this.general_survey_code?this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,general_survey_code:this.general_survey_code,general_survey_remarks:this.general_survey_remarks}).subscribe({next:e=>{this.toastr.success("Successfully recorded!","General Survey")}}):this.toastr.error("Missing general survey!")}loadLib(){this.http.get("libraries/general-survey").subscribe(i=>{this.survey_list=i.data})}constructor(i,e){this.http=i,this.toastr=e,this.loadConsult=new t.vpe,this.faSave=r.r6l,this.faChevronCircleUp=r._qI,this.faChevronCircleDown=r.yh$,this.faSpinner=r.LM3,this.show_content=!0,this.is_saving=!1,this.consult_done=!1}ngOnInit(){this.loadLib()}ngOnChanges(i){this.show_content=this.toggle_content,this.consult_details&&(this.consult_notes=this.consult_details.consult_notes,this.consult_done=this.consult_details.consult_done,this.general_survey_code=this.consult_notes.general_survey_code,this.general_survey_remarks=this.consult_notes.general_survey_remarks)}}function cn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",13)(2,"input",14),t.NdJ("ngModelChange",function(s){const c=t.CHM(e).$implicit,Y=t.oxw(2);return t.KtG(Y.management_list.management_code[c.code]=s)}),t.qZA(),t.TgZ(3,"label",15),t._uU(4),t.qZA()(),t.TgZ(5,"div",16)(6,"input",17),t.NdJ("ngModelChange",function(s){const c=t.CHM(e).$implicit,Y=t.oxw(2);return t.KtG(Y.management_list.remarks[c.code]=s)}),t.qZA()()()}if(2&n){const e=i.$implicit,o=t.oxw(2);t.xp6(2),t.Q2q("id","management_list",e.code,""),t.Q6J("ngModel",o.management_list.management_code[e.code]),t.xp6(1),t.Q2q("for","management_list",e.code,""),t.xp6(1),t.Oqu(e.desc),t.xp6(2),t.Q6J("disabled",!o.management_list.management_code[e.code])("ngModel",o.management_list.remarks[e.code])}}function dn(n,i){if(1&n&&t._UZ(0,"fa-icon",21),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSpinner)}}function pn(n,i){if(1&n&&t._UZ(0,"fa-icon",22),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSave)}}function un(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onSubmit())}),t.YNc(1,dn,1,1,"fa-icon",19),t.YNc(2,pn,1,1,"fa-icon",20),t._uU(3),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("ngIf",e.is_saving),t.xp6(1),t.Q6J("ngIf",!e.is_saving),t.xp6(1),t.hij(" ",e.is_saving?"Saving":"Save"," ")}}function gn(n,i){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,cn,7,6,"div",9),t.TgZ(2,"div",10),t.YNc(3,un,4,4,"button",11),t.qZA()()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.management_codes),t.xp6(2),t.Q6J("ngIf",!e.consult_done)}}O.\u0275fac=function(i){return new(i||O)(t.Y36(u.O),t.Y36(h._W))},O.\u0275cmp=t.Xpm({type:O,selectors:[["app-general-survey"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details"},outputs:{loadConsult:"loadConsult"},features:[t.TTD],decls:10,vars:5,consts:[[1,"grid","grid-cols-10","my-5","pt-5","border-t","border-slate-200"],[1,"col-span-2","pt-2","pr-5","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-blue-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],["class","grid grid-cols-1",4,"ngIf"],[1,"grid","grid-cols-1"],[1,"col-span-1","flex","mt-3"],[1,"w-1/2","grid","grid-cols-1","px-4","pb-4"],["for","complaint_notes",1,"font-semibold","pl-1"],["rows","3","id","general_survey_code",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["rows","3","id","general_survey_remarks","type","text","placeholder","General Survey Remarks",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"disabled","ngModel","ngModelChange"],[1,"col-span-1","flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[3,"value"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2," General Survey "),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"span",4),t._uU(6," General Survey "),t.TgZ(7,"button",5),t.NdJ("click",function(){return e.show_content=!e.show_content}),t._UZ(8,"fa-icon",6),t.qZA()(),t.YNc(9,rn,13,6,"div",7),t.qZA()()()),2&i&&(t.xp6(5),t.Q6J("ngClass",t.VKq(3,_n,!e.show_content)),t.xp6(3),t.Q6J("icon",e.show_content?e.faChevronCircleUp:e.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",e.show_content))},dependencies:[_.mk,_.sg,_.O5,p.BN,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.On]});const mn=function(n){return{"rounded-b":n}};class S{onSubmit(){this.is_saving=!0;var i=[];if(Object.entries(this.management_list.management_code).forEach(([o,s],l)=>{if(!0===s){let c={management_code:o,remarks:this.management_list.remarks[o]?this.management_list.remarks[o]:null};console.log(c),i.push(c)}}),i.length>0){var e={notes_id:this.consult_notes.id,patient_id:this.consult_details.patient.id,management:i};console.log(e),this.http.post("consultation/management",e).subscribe({next:o=>{console.log(o),this.is_saving=!1,this.toastr.success("Successfully recorded!","Management record")},error:o=>console.log(o),complete:()=>console.log("success")})}}loadLibraries(){this.http.get("libraries/management").subscribe({next:i=>{console.log(i),this.management_codes=i.data},error:i=>console.log(i)})}patchData(){this.consult_management&&Object.entries(this.consult_management).forEach(([i,e],o)=>{let s=e;this.management_list.management_code[s.management_code]=!0,s.remarks&&(this.management_list.remarks[s.management_code]=s.remarks)})}ngOnChanges(i){this.show_content=this.toggle_content,this.consult_details&&(this.consult_notes=this.consult_details.consult_notes,this.consult_done=this.consult_details.consult_done,this.consult_management=this.consult_details.management,this.patchData())}constructor(i,e){this.http=i,this.toastr=e,this.faChevronCircleUp=r._qI,this.faChevronCircleDown=r.yh$,this.faSpinner=r.LM3,this.faSave=r.r6l,this.show_content=!1,this.is_saving=!1,this.management_list={management_code:[],remarks:[]}}ngOnInit(){this.loadLibraries()}}function hn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.openEkas())}),t._UZ(1,"fa-icon",10),t._uU(2," eKAS "),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faFile)}}function fn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.toggleModal())}),t._UZ(1,"fa-icon",10),t._uU(2," End Visit "),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faDoorClosed)}}function xn(n,i){if(1&n&&(t.TgZ(0,"option",25),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.lnq("",e.last_name,", ",e.first_name," ",e.middle_name,"")}}S.\u0275fac=function(i){return new(i||S)(t.Y36(u.O),t.Y36(h._W))},S.\u0275cmp=t.Xpm({type:S,selectors:[["app-management"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details"},features:[t.TTD],decls:11,vars:5,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],["class","flex item-start flex-wrap pt-3 px-5 first:mt-5 last:mb-10",4,"ngFor","ngForOf"],[1,"flex","text-right","mt-5"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[1,"flex","item-start","flex-wrap","pt-3","px-5","first:mt-5","last:mb-10"],[1,"w-4/12","flex","mb-2"],["type","checkbox",1,"flex-none","mt-2","mr-2","border","border-gray-300","sm:text-sm","rounded-md","focus:ring-blue-500","focus:border-blue-500","block","p-2.5",3,"ngModel","ngModelChange"],[1,"flex-1","mt-2","text-gray-800"],[1,"w-8/12"],["type","text",1,"input","disabled:bg-gray-300",3,"disabled","ngModel","ngModelChange"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(i,e){1&i&&(t._UZ(0,"hr",0),t.TgZ(1,"div",1)(2,"div",2),t._uU(3," Management "),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"span",5),t._uU(7," Management/Counselling "),t.TgZ(8,"button",6),t.NdJ("click",function(){return e.show_content=!e.show_content}),t._UZ(9,"fa-icon",7),t.qZA()(),t.YNc(10,gn,4,2,"div",8),t.qZA()()()),2&i&&(t.xp6(6),t.Q6J("ngClass",t.VKq(3,mn,!e.show_content)),t.xp6(3),t.Q6J("icon",e.show_content?e.faChevronCircleUp:e.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",e.show_content))},dependencies:[_.mk,_.sg,_.O5,p.BN,a.Fj,a.Wl,a.JJ,a.On]});const bn=function(n){return{"bg-orange-500 hover:ring-orange-400":n}};function vn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",20)(1,"div",21)(2,"select",22),t.NdJ("ngModelChange",function(s){t.CHM(e);const l=t.oxw(2);return t.KtG(l.referred_to.id=s)}),t.YNc(3,xn,2,4,"option",23),t.qZA(),t.TgZ(4,"button",24),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.referTo())}),t._uU(5),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("disabled",e.enable_edit)("ngModel",e.referred_to.id),t.xp6(1),t.Q6J("ngForOf",e.physicians),t.xp6(1),t.Q6J("disabled",!e.referred_to.id)("ngClass",t.VKq(6,bn,e.enable_edit)),t.xp6(1),t.hij(" ",e.enable_edit?"Update":"Refer"," ")}}function Zn(n,i){if(1&n&&t._UZ(0,"app-physical-exam",27),2&n){const e=t.oxw(3);t.Q6J("toggle_content",e.toggle_content)("consult_details",e.consult_details)}}function yn(n,i){if(1&n&&t._UZ(0,"app-management",27),2&n){const e=t.oxw(3);t.Q6J("toggle_content",e.toggle_content)("consult_details",e.consult_details)}}function Cn(n,i){if(1&n&&t._UZ(0,"app-initial-dx",27),2&n){const e=t.oxw(3);t.Q6J("toggle_content",e.toggle_content)("consult_details",e.consult_details)}}function Tn(n,i){if(1&n&&t._UZ(0,"app-final-dx",27),2&n){const e=t.oxw(3);t.Q6J("toggle_content",e.toggle_content)("consult_details",e.consult_details)}}function wn(n,i){if(1&n&&t._UZ(0,"app-prescription",32),2&n){const e=t.oxw(3);t.Q6J("toggle_content",e.toggle_content)("consult_details",e.consult_details)("with_credentials",e.with_credentials)}}function qn(n,i){if(1&n&&(t.TgZ(0,"option",25),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.lnq("",e.last_name,", ",e.first_name," ",e.middle_name,"")}}function An(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",33)(1,"div",34)(2,"label",35),t._uU(3,"To open final diagnosis & prescription you must refer this patient to a physician"),t.qZA(),t.TgZ(4,"select",36),t.NdJ("ngModelChange",function(s){t.CHM(e);const l=t.oxw(3);return t.KtG(l.referred_to.id=s)}),t.YNc(5,qn,2,4,"option",23),t.qZA(),t.TgZ(6,"div",37)(7,"button",38),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.referTo())}),t._uU(8),t.qZA()()()()}if(2&n){const e=t.oxw(3);t.xp6(4),t.Q6J("disabled",e.enable_edit)("ngModel",e.referred_to.id),t.xp6(1),t.Q6J("ngForOf",e.physicians),t.xp6(2),t.Q6J("disabled",!e.referred_to.id),t.xp6(1),t.hij(" ",e.enable_edit?"Update":"Refer"," ")}}function Un(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"app-complaint-history",26),t.NdJ("loadConsult",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.loadConsult())}),t.qZA(),t._UZ(2,"app-general-survey",27),t.YNc(3,Zn,1,2,"app-physical-exam",28),t.YNc(4,yn,1,2,"app-management",28),t._UZ(5,"app-consult-history",29),t.YNc(6,Cn,1,2,"app-initial-dx",28),t.YNc(7,Tn,1,2,"app-final-dx",28),t.YNc(8,wn,1,3,"app-prescription",30),t.YNc(9,An,9,5,"div",31),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("toggle_content",e.toggle_content)("consult_details",e.consult_details)("have_complaint",e.have_complaint),t.xp6(1),t.Q6J("toggle_content",e.toggle_content)("consult_details",e.consult_details),t.xp6(1),t.Q6J("ngIf",e.have_complaint),t.xp6(1),t.Q6J("ngIf",e.have_complaint),t.xp6(1),t.Q6J("toggle_content",e.toggle_content),t.xp6(1),t.Q6J("ngIf",e.have_complaint),t.xp6(1),t.Q6J("ngIf",e.have_complaint&&e.consult_details.physician),t.xp6(1),t.Q6J("ngIf",e.have_complaint&&e.consult_details.physician),t.xp6(1),t.Q6J("ngIf",e.have_complaint&&!e.consult_details.physician)}}function kn(n,i){1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-consult-summary"),t.qZA())}function Jn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"span",12)(2,"span",13)(3,"div",14)(4,"button",15),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.toggleAll())}),t._UZ(5,"fa-icon",16),t.qZA(),t.TgZ(6,"span",17),t._uU(7," CONSULTATION "),t.TgZ(8,"span",18),t._uU(9),t.ALo(10,"date"),t.qZA()()(),t.YNc(11,vn,6,8,"div",19),t.qZA()(),t.YNc(12,Un,10,12,"div",6),t.YNc(13,kn,2,0,"div",6),t.qZA()}if(2&n){const e=t.oxw();t.xp6(5),t.Q6J("icon",e.toggle_content?e.faChevronUp:e.faChevronDown),t.xp6(4),t.AsE("(",t.xi3(10,6,null==e.consult_details?null:e.consult_details.consult_date,"MM/dd/yyyy hh:mm:ss a")," | ID:",null==e.consult_details?null:e.consult_details.id,")"),t.xp6(2),t.Q6J("ngIf",e.consult_details&&e.open_consult&&e.have_complaint),t.xp6(1),t.Q6J("ngIf",e.consult_details&&e.open_consult),t.xp6(1),t.Q6J("ngIf",e.consult_details&&!e.open_consult)}}function Nn(n,i){1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-konsulta"),t.qZA())}function In(n,i){1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-eclaims"),t.qZA())}function Qn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"app-end-visit",39),t.NdJ("toggleModal",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.toggleModal())}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("consult_id",null==e.consult_details?null:e.consult_details.id)("consult_date",null==e.consult_details?null:e.consult_details.consult_date)("patient_id",null==e.consult_details?null:e.consult_details.patient.id)("pt_group","cn")}}function Mn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"app-ekas",40),t.NdJ("toggleModal",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.toggleEkas())}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("lab_list",e.lab_list)("consult_details",e.consult_details)}}class D{switchTabs(i){this.modules=0,this.modules=i}toggleAll(){this.toggle_content=!this.toggle_content}patientVitals(i){this.graph.patientVitals(i)}patientInfo(i){this.patient_details=i}toggleModal(){this.show_end=!this.show_end}openEkas(){this.http.get("laboratory/consult-laboratories",{params:{patient_id:this.patient_id,sort:"-request_date",include:"laboratory"}}).subscribe({next:e=>{this.lab_list=e.data,this.show_ekas=!this.show_ekas},error:e=>console.log(e)})}toggleEkas(){this.show_ekas=!this.show_ekas}loadVisitHistory(){this.http.get("consultation/records",{params:{patient_id:this.patient_id,per_page:"all",sort:"-consult_date"}}).subscribe({next:i=>{this.visit_list=i.data},error:i=>console.log(i)})}loadConsult(){this.http.get("consultation/records",{params:{id:this.consult_id,pt_group:"cn"}}).subscribe({next:o=>{this.consult_details=o.data[0],(this.consult_details.consult_notes.complaint||this.consult_details.consult_notes.complaints.length>0||this.consult_details.consult_notes.history)&&(this.have_complaint=!0,this.loadUsers(),this.consult_details.physician&&(this.referred_to=this.consult_details.physician,this.enable_edit=!0))},error:o=>console.log(o)});let e=this.http.getUserFromJSON();this.with_credentials=!!e.konsulta_credential}referTo(){this.enable_edit?this.enable_edit=!1:this.http.update("consultation/records/",this.consult_details.id,{patient_id:this.consult_details.patient.id,consult_date:this.consult_details.consult_date,pt_group:"cn",consult_done:!1,physician_id:this.referred_to.id}).subscribe({next:e=>{this.toastr.success("Patient was referred","Referral"),this.consult_details.physician=this.referred_to},error:e=>console.log(e)})}loadUsers(){this.http.get("users",{params:{per_page:"all",designation_code:"MD"}}).subscribe({next:i=>{this.physicians=i.data},error:i=>console.log(i)})}constructor(i,e,o){this.http=i,this.route=e,this.toastr=o,this.faChevronUp=r.mTx,this.faChevronDown=r.ptq,this.faDoorClosed=r.TH0,this.faFile=r.gMD,this.is_saving=!1,this.show_item=!0,this.toggle_content=!0,this.open_consult=!0,this.have_complaint=!1,this.show_end=!1,this.enable_edit=!1,this.show_ekas=!1,this.referred_to={id:""},this.with_credentials=!1}ngOnInit(){this.patient_id=this.route.snapshot.paramMap.get("id"),this.consult_id=this.route.snapshot.paramMap.get("consult_id"),this.modules=1,this.loadConsult()}}D.\u0275fac=function(i){return new(i||D)(t.Y36(u.O),t.Y36(v.gz),t.Y36(h._W))},D.\u0275cmp=t.Xpm({type:D,selectors:[["app-consultation"]],viewQuery:function(i,e){if(1&i&&t.Gf(C,5),2&i){let o;t.iGM(o=t.CRH())&&(e.graph=o.first)}},decls:13,vars:9,consts:[[1,"block","shadow","p-4","mt-4","rounded-xl","text-gray-600","border","border-slate-100"],[1,"flex"],[1,"flex","justify-between","text-sm","w-full"],[1,"text-gray-600","border-b-2","border-gray-200","block","hover:text-blue-500","hover:border-blue-500","mr-6","pb-2",3,"click"],["type","button","class","btn-end-visit bg-green-500 mr-3 hover:ring-green-400",3,"click",4,"ngIf"],["type","button","class","btn-end-visit ml-auto",3,"click",4,"ngIf"],[4,"ngIf"],[3,"consult_id","consult_date","patient_id","pt_group","toggleModal",4,"ngIf"],[3,"lab_list","consult_details","toggleModal",4,"ngIf"],["type","button",1,"btn-end-visit","bg-green-500","mr-3","hover:ring-green-400",3,"click"],[1,"mr-1",3,"icon"],["type","button",1,"btn-end-visit","ml-auto",3,"click"],[1,"text-sky-500","flex","justify-between","py-2"],[1,"flex","justify-between","w-full"],[1,"w-1/2","mt-2"],["type","button",1,"font-normal","text-sky-500","px-2","py-1","text-sm","mr-2",3,"click"],["size","lg",3,"icon"],[1,"mt-2","font-bold"],[1,"text-gray-500","text-sm"],["class","w-1/2 flex justify-end",4,"ngIf"],[1,"w-1/2","flex","justify-end"],[1,"flex","text-gray-700"],[1,"input","px-2","mr-3","disabled:bg-gray-300",3,"disabled","ngModel","ngModelChange"],["class","pr-3",3,"value",4,"ngFor","ngForOf"],[1,"disabled:bg-gray-300","bg-blue-500","text-xs","text-white","px-5","py-1","rounded-md","hover:ring-2","hover:ring-blue-400","h-10","mt-1","w-24",3,"disabled","ngClass","click"],[1,"pr-3",3,"value"],[3,"toggle_content","consult_details","have_complaint","loadConsult"],[3,"toggle_content","consult_details"],[3,"toggle_content","consult_details",4,"ngIf"],[3,"toggle_content"],[3,"toggle_content","consult_details","with_credentials",4,"ngIf"],["class","grid grid-cols-10",4,"ngIf"],[3,"toggle_content","consult_details","with_credentials"],[1,"grid","grid-cols-10"],[1,"col-start-3","col-span-8","text-gray-700","p-10","border","border-slate-300","shadow-md","rounded-md","mt-5"],["for","referred_to"],["name","referred_to",1,"input","px-2","mr-3","disabled:bg-gray-300","mb-3",3,"disabled","ngModel","ngModelChange"],[1,"w-full","text-right"],[1,"btn-save","px-5","disabled:bg-gray-300",3,"disabled","click"],[3,"consult_id","consult_date","patient_id","pt_group","toggleModal"],[3,"lab_list","consult_details","toggleModal"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"nav",2)(3,"button",3),t.NdJ("click",function(){return e.switchTabs(1)}),t._uU(4," CONSULTATION "),t.qZA(),t.TgZ(5,"div"),t.YNc(6,hn,3,1,"button",4),t.YNc(7,fn,3,1,"button",5),t.qZA()()(),t.YNc(8,Jn,14,9,"div",6),t.YNc(9,Nn,2,0,"div",6),t.YNc(10,In,2,0,"div",6),t.qZA(),t.YNc(11,Qn,1,4,"app-end-visit",7),t.YNc(12,Mn,1,2,"app-ekas",8)),2&i&&(t.xp6(3),t.Tol(1===e.modules?"text-blue-500 border-b-2 border-blue-500 font-bold":"hover:-translate-y-1 hover:scale-110 transition ease-in-out delay-400 duration-300"),t.xp6(3),t.Q6J("ngIf",e.consult_details&&e.with_credentials),t.xp6(1),t.Q6J("ngIf",!(null!=e.consult_details&&e.consult_details.consult_done)),t.xp6(1),t.Q6J("ngIf",1===e.modules),t.xp6(1),t.Q6J("ngIf",2===e.modules),t.xp6(1),t.Q6J("ngIf",3===e.modules),t.xp6(1),t.Q6J("ngIf",e.show_end),t.xp6(1),t.Q6J("ngIf",e.show_ekas))},dependencies:[_.mk,_.sg,_.O5,T,w,wt.F,b,p.BN,a.YN,a.Kr,a.EJ,a.JJ,a.On,A,U,k,I,Q,M,F,O,S,_.uU],styles:["td[_ngcontent-%COMP%]{padding:1em 0}"]});const Fn=[{path:"",component:D}];class Z{}Z.\u0275fac=function(i){return new(i||Z)},Z.\u0275mod=t.oAB({type:Z}),Z.\u0275inj=t.cJS({imports:[v.Bz.forChild(Fn),v.Bz]});var On=d(9366);class y{}y.\u0275fac=function(i){return new(i||y)},y.\u0275mod=t.oAB({type:y}),y.\u0275inj=t.cJS({imports:[_.ez,Z,On.q,j.X,p.uH,q.A0,a.u5,a.UX]})}}]);