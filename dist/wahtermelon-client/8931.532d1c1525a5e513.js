"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[8931],{8931:(T,w,u)=>{u.r(w),u.d(w,{NcdModule:()=>pi});var c=u(177),d=u(60),b=u(3895),m=u(5383);let F;function R(i,o,t=!1){t&&F?F.unsubscribe():F=i.subscribe(()=>o())}var e=u(4438),f=u(3318),k=u(2160),J=u(41),h=u(9217),n=u(9417),p=u(614);const A=[{id:"family_hx_hypertension",desc:"Hypertension"},{id:"family_hx_stroke",desc:"Stroke"},{id:"family_hx_heart_attack",desc:"Heart Attack"},{id:"family_hx_diabetes",desc:"Diabetes"},{id:"family_hx_asthma",desc:"Asthma"},{id:"family_hx_cancer",desc:"Cancer"},{id:"family_hx_kidney_disease",desc:"Kidney Disease"}],q=[{code:"C",desc:"Circumcised"},{code:"U",desc:"Uncircumcised"}],D=[{question_id:"1",question_e:"Have you felt any pain or discomfort, or any pressure or heaviness in your chest?",question_t:"Nakakaramdam ka ba ng pananakit o kabigatan ng iyong dibdib?"},{question_id:"2",question_e:"Do you feel pain in the center or left chest or left arm?",question_t:"Ang pananakit ba ay nararanasan sa gitna o kaliwang bahagi ng dibdib, o sa kaliwang braso?"},{question_id:"3",question_e:"Do you feel chest pain when you're walking uphill or in a hurry?",question_t:"Nararamdaman mo ba ito kapag ikaw ay nagmamadali o naglalakad nang mabilis o paakyat?"},{question_id:"4",question_e:"Do you sit down when you feel the pain while walking?",question_t:"Tumitigil ka ba sa paglalakad kapag sumasakit ang iyong dibdib?"},{question_id:"5",question_e:"Does the pain go away when you stand still or when you place a tablet under your tongue?",question_t:"Nawawala ba ang sakit kapag ikaw ay hindi kumilos o kapag naglagay ka ng gamot sa ilalim ng iyong dila?"},{question_id:"6",question_e:"Does the pain go away in less than 10 minutes?",question_t:"Nawawala ba ang sakit sa loob ng 10 minuto?"},{question_id:"7",question_e:"Have you ever had a severe chest pain which lasted for half an hour or more?",question_t:"Nakakaramdam ka ba ng pananakit ng dibdib na tumatagal ng kalahating oras o higit pa?"}],V=new n.gE({consult_id:new n.MJ(null),patient_id:new n.MJ(null),location:new n.MJ(null),client_type:new n.MJ(null),assessment_date:new n.MJ(null),family_hx_hypertension:new n.MJ(null),family_hx_stroke:new n.MJ(null),family_hx_heart_attack:new n.MJ(null),family_hx_diabetes:new n.MJ(null),family_hx_asthma:new n.MJ(null),family_hx_cancer:new n.MJ(null),family_hx_kidney_disease:new n.MJ(null),smoking:new n.MJ(null),alcohol_intake:new n.MJ(null),excessive_alcohol_intake:new n.MJ(null),high_fat:new n.MJ(null),intake_vegetables:new n.MJ(null),intake_fruits:new n.MJ(null),physical_activity:new n.MJ(null),presence_diabetes:new n.MJ(null),diabetes_medications:new n.MJ(null),polyphagia:new n.MJ(null),polydipsia:new n.MJ(null),polyuria:new n.MJ(null),obesity:new n.MJ(null),central_adiposity:new n.MJ(null),bmi:new n.MJ(null),waist_line:new n.MJ(null),raised_bp:new n.MJ(null),avg_systolic:new n.MJ(null),avg_diastolic:new n.MJ(null),systolic_1st:new n.MJ(null),diastolic_1st:new n.MJ(null),systolic_2nd:new n.MJ(null),diastolic_2nd:new n.MJ(null)});var v=u(5794);const O=i=>({"invalid-input":i});function P(i,o){1&i&&(e.j41(0,"label",9),e.EFF(1,"N/A"),e.k0s())}function X(i,o){if(1&i&&(e.j41(0,"label"),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.riskAssessForm.value.obesity?"Yes":"No")}}function B(i,o){1&i&&(e.j41(0,"label",9),e.EFF(1,"N/A"),e.k0s())}function U(i,o){if(1&i&&(e.j41(0,"label"),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.riskAssessForm.value.central_adiposity?"Yes (at risk)":"No (not at risk)")}}function L(i,o){1&i&&(e.j41(0,"label",9),e.EFF(1,"N/A"),e.k0s())}function H(i,o){if(1&i&&(e.j41(0,"label"),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.riskAssessForm.value.waist_line+" cm")}}function K(i,o){1&i&&(e.j41(0,"label",9),e.EFF(1,"No 1st BP reading"),e.k0s())}function z(i,o){if(1&i&&(e.j41(0,"label"),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.riskAssessForm.value.systolic_1st+"/"+t.riskAssessForm.value.diastolic_1st)}}function Q(i,o){1&i&&(e.j41(0,"label",9),e.EFF(1,"No 2nd BP reading"),e.k0s())}function W(i,o){if(1&i&&(e.j41(0,"label"),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.riskAssessForm.value.systolic_2nd+"/"+t.riskAssessForm.value.diastolic_2nd)}}function Z(i,o){1&i&&(e.j41(0,"label",9),e.EFF(1,"N/A"),e.k0s())}function ee(i,o){if(1&i&&(e.j41(0,"label"),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.SpI(" ",t.riskAssessForm.value.avg_systolic+"/"+t.riskAssessForm.value.avg_diastolic," ")}}function te(i,o){1&i&&(e.j41(0,"label",9),e.EFF(1,"N/A"),e.k0s())}function ie(i,o){if(1&i&&(e.j41(0,"label"),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.riskAssessForm.value.raised_bp?"Yes":"No")}}function ne(i,o){if(1&i&&(e.j41(0,"option",42),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("ngValue",t.id),e.R7$(),e.JRh(t.desc)}}function se(i,o){if(1&i&&(e.j41(0,"option",43),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.desc)}}function oe(i,o){if(1&i&&(e.j41(0,"option",43),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.desc," ")}}function re(i,o){if(1&i&&(e.j41(0,"div",44)(1,"h4",4),e.EFF(2),e.k0s(),e.j41(3,"select",45),e.DNE(4,oe,2,2,"option",17),e.k0s()()),2&i){const t=o.$implicit,r=e.XpG(2);e.R7$(2),e.SpI("",t.desc,":"),e.R7$(),e.Y8G("formControlName",t.id)("name",t.id),e.R7$(),e.Y8G("ngForOf",r.logical)}}function ae(i,o){if(1&i&&(e.j41(0,"option",43),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.desc," ")}}function le(i,o){if(1&i&&(e.j41(0,"option",43),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.desc," ")}}function de(i,o){if(1&i&&(e.j41(0,"option",43),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.desc," ")}}function ce(i,o){if(1&i&&(e.j41(0,"option",43),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.desc," ")}}function ue(i,o){if(1&i&&(e.j41(0,"option",43),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.desc," ")}}function _e(i,o){if(1&i&&(e.j41(0,"option",43),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.desc," ")}}function me(i,o){if(1&i&&(e.j41(0,"option",43),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.desc," ")}}function pe(i,o){if(1&i&&(e.j41(0,"option",43),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.desc," ")}}function fe(i,o){if(1&i&&(e.j41(0,"option",43),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.desc," ")}}function he(i,o){if(1&i&&(e.j41(0,"option",43),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.desc," ")}}function ge(i,o){if(1&i&&(e.j41(0,"option",43),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.desc," ")}}function be(i,o){if(1&i&&(e.j41(0,"option",43),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.desc," ")}}function ke(i,o){if(1&i&&e.nrm(0,"fa-icon",46),2&i){const t=e.XpG(2);e.Y8G("icon",t.faSave)}}function ve(i,o){if(1&i&&e.nrm(0,"fa-icon",47),2&i){const t=e.XpG(2);e.Y8G("icon",t.faSpinner)}}function Fe(i,o){if(1&i){const t=e.RV6();e.j41(0,"form",10),e.bIt("ngSubmit",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.onSubmit())}),e.j41(1,"div",11)(2,"div",12)(3,"h4",2),e.EFF(4,"NCD High Risk Assessment"),e.k0s()(),e.j41(5,"div",13)(6,"h4",4),e.EFF(7,"Location:"),e.k0s(),e.j41(8,"select",14),e.bIt("change",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.checkDiabetes())}),e.DNE(9,ne,2,2,"option",15),e.k0s()(),e.j41(10,"div",13)(11,"h4",4),e.EFF(12,"Client Type: "),e.k0s(),e.j41(13,"select",16),e.DNE(14,se,2,2,"option",17),e.k0s()(),e.j41(15,"div",18)(16,"h4",4),e.EFF(17,"Assessment Date:"),e.k0s(),e.nrm(18,"input",19),e.k0s()(),e.j41(19,"div",20)(20,"div",21)(21,"h4",2),e.EFF(22,"Family History:"),e.k0s()(),e.DNE(23,re,5,4,"div",22),e.k0s(),e.j41(24,"div",20)(25,"div",21)(26,"h4",2),e.EFF(27,"Personal / Socio History:"),e.k0s()(),e.j41(28,"div",23)(29,"h1",4),e.EFF(30,"Smoking:"),e.k0s(),e.j41(31,"select",24),e.DNE(32,ae,2,2,"option",17),e.k0s()(),e.j41(33,"div",23)(34,"h1",4),e.EFF(35,"Alcohol Intake:"),e.k0s(),e.j41(36,"select",25),e.DNE(37,le,2,2,"option",17),e.k0s()(),e.j41(38,"div",23)(39,"h1",4),e.EFF(40,"Excessive Alcohol Intake:"),e.k0s(),e.j41(41,"select",26),e.DNE(42,de,2,2,"option",17),e.k0s()(),e.j41(43,"div",23)(44,"h1",4),e.EFF(45,"High Fat / High Salt Intake:"),e.k0s(),e.j41(46,"select",27),e.DNE(47,ce,2,2,"option",17),e.k0s()(),e.j41(48,"div",23)(49,"h1",4),e.EFF(50,"Dietary Fiber Intake of Fruits:"),e.k0s(),e.j41(51,"select",28),e.DNE(52,ue,2,2,"option",17),e.k0s()(),e.j41(53,"div",23)(54,"h1",4),e.EFF(55,"Physical Activity:"),e.k0s(),e.j41(56,"select",29),e.DNE(57,_e,2,2,"option",17),e.k0s()(),e.j41(58,"div",30)(59,"h1",4),e.EFF(60,"Dietary Fiber Intake of Vegetables:"),e.k0s(),e.j41(61,"select",31),e.DNE(62,me,2,2,"option",17),e.k0s()()(),e.j41(63,"div",20)(64,"div",21)(65,"h4",2),e.EFF(66,"Presence or Absence of Diabetes:"),e.k0s()(),e.j41(67,"div",32)(68,"h1",4),e.EFF(69,"Diagnose with Diabetes"),e.k0s(),e.j41(70,"select",33),e.bIt("change",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.checkDiabetes())}),e.DNE(71,pe,2,2,"option",17),e.k0s()(),e.j41(72,"div",32)(73,"h1",4),e.EFF(74,"Undertaking medications:"),e.k0s(),e.j41(75,"select",34),e.DNE(76,fe,2,2,"option",17),e.k0s()(),e.j41(77,"div",30)(78,"h1",4),e.EFF(79,"Polyphagia"),e.k0s(),e.j41(80,"select",35),e.DNE(81,he,2,2,"option",17),e.k0s()(),e.j41(82,"div",30)(83,"h1",4),e.EFF(84,"Polydipsia"),e.k0s(),e.j41(85,"select",36),e.DNE(86,ge,2,2,"option",17),e.k0s()(),e.j41(87,"div",30)(88,"h1",4),e.EFF(89,"Polyuria"),e.k0s(),e.j41(90,"select",37),e.DNE(91,be,2,2,"option",17),e.k0s()()(),e.j41(92,"div",38)(93,"button",39),e.DNE(94,ke,1,1,"fa-icon",40)(95,ve,1,1,"fa-icon",41),e.EFF(96),e.k0s()()()}if(2&i){const t=e.XpG();e.Y8G("formGroup",t.riskAssessForm),e.R7$(8),e.Y8G("ngClass",e.eq3(21,O,t.is_saving&&t.f.location.errors)),e.R7$(),e.Y8G("ngForOf",t.location),e.R7$(5),e.Y8G("ngForOf",t.clients),e.R7$(9),e.Y8G("ngForOf",t.family_history),e.R7$(9),e.Y8G("ngForOf",t.smoking),e.R7$(5),e.Y8G("ngForOf",t.alcohol),e.R7$(5),e.Y8G("ngForOf",t.logical2),e.R7$(5),e.Y8G("ngForOf",t.logical2),e.R7$(5),e.Y8G("ngForOf",t.logical2),e.R7$(5),e.Y8G("ngForOf",t.logical2),e.R7$(5),e.Y8G("ngForOf",t.logical2),e.R7$(9),e.Y8G("ngForOf",t.logical),e.R7$(5),e.Y8G("ngForOf",t.logical),e.R7$(5),e.Y8G("ngForOf",t.logical),e.R7$(5),e.Y8G("ngForOf",t.logical),e.R7$(5),e.Y8G("ngForOf",t.logical),e.R7$(2),e.Y8G("disabled",t.riskAssessForm.invalid),e.R7$(),e.Y8G("ngIf",!t.is_saving),e.R7$(),e.Y8G("ngIf",t.is_saving),e.R7$(),e.SpI(" ",t.is_saving?"Saving":"Save"," ")}}let j=(()=>{class i{onSubmit(){if(this.is_saving=!0,this.riskAssessForm.valid){let t;t=this.consult_details&&this.consult_details.assessment_date?this.http.update("non-communicable-disease/risk-assessment/",this.consult_details.id,this.riskAssessForm.value):this.http.post("non-communicable-disease/risk-assessment",this.riskAssessForm.value),t.subscribe({next:r=>{this.is_saving=!1,this.toastr.success("Recorded successfully!","Risk Assessment"),this.loadRisk.emit()},error:r=>console.log(r)})}}setAdiposity(t){let r;r="M"===this.patient_info.gender&&t>=90||"F"===this.patient_info.gender&&t>=80,this.riskAssessForm.patchValue({central_adiposity:r})}checkDiabetes(){2===this.riskAssessForm.value.location?(this.f.diabetes_medications.enable(),this.f.polyphagia.enable(),this.f.polydipsia.enable(),this.f.polyuria.enable(),this.f.client_type.enable()):this.f.client_type.disable()}getVitalsToday(t,r){t&&r&&(this.riskAssessForm.patchValue({assessment_date:(0,c.Yq)(r.consult_date,"yyyy-MM-dd","en","Asia/Manila")}),Object.entries(t).reverse().every(([s,a],l)=>{let _=a;return _.patient_bmi&&this.riskAssessForm.patchValue({bmi:_.patient_bmi}),_.patient_bmi&&this.riskAssessForm.patchValue({obesity:_.patient_bmi>=25}),_.patient_bmi_class&&(this.vitals_today.patient_bmi_class=_.patient_bmi_class),(0,c.Yq)(_.vitals_date,"yyyy-MM-dd","en","Asia/Manila")===(0,c.Yq)(r.consult_date,"yyyy-MM-dd","en","Asia/Manila")&&(_.bp_systolic&&(this.riskAssessForm.value.systolic_1st?this.riskAssessForm.value.systolic_1st&&!this.riskAssessForm.value.systolic_2nd?(this.riskAssessForm.patchValue({systolic_2nd:_.bp_systolic,diastolic_2nd:_.bp_diastolic}),this.setAverage()):(this.riskAssessForm.patchValue({systolic_1st:this.riskAssessForm.value.systolic_2nd,diastolic_1st:this.riskAssessForm.value.diastolic_2nd}),this.riskAssessForm.patchValue({systolic_2nd:_.bp_systolic,diastolic_2nd:_.bp_diastolic}),this.setAverage()):this.riskAssessForm.patchValue({systolic_1st:_.bp_systolic,diastolic_1st:_.bp_diastolic})),!this.riskAssessForm.value.waist_line&&_.patient_waist&&(this.riskAssessForm.patchValue({waist_line:_.patient_waist}),this.setAdiposity(_.patient_waist))),!(this.riskAssessForm.value.systolic_1st&&this.riskAssessForm.value.diastolic_1st&&this.riskAssessForm.value.systolic_2nd&&this.riskAssessForm.value.diastolic_2nd&&this.vitals_today.patient_waist>0&&Object(t).length-1===l)}),this.checkIfComplete())}checkIfComplete(){this.riskAssessForm.value.bmi&&void 0!==this.riskAssessForm.value.obesity&&this.riskAssessForm.value.avg_systolic&&this.riskAssessForm.value.avg_diastolic&&this.riskAssessForm.value.waist_line&&(this.show_form=!0)}setAverage(){this.riskAssessForm.patchValue({avg_systolic:(this.riskAssessForm.value.systolic_1st+this.riskAssessForm.value.systolic_2nd)/2,avg_diastolic:(this.riskAssessForm.value.diastolic_1st+this.riskAssessForm.value.diastolic_2nd)/2}),this.riskAssessForm.patchValue(this.riskAssessForm.value.avg_systolic>=140&&this.riskAssessForm.value.avg_diastolic>=90?{raised_bp:!0}:{raised_bp:!1})}loadLibraries(){this.http.get("libraries/ncd-locations").subscribe({next:t=>this.location=t.data,error:t=>console.log(t)}),this.http.get("libraries/ncd-smoking").subscribe({next:t=>this.smoking=t.data,error:t=>console.log(t)}),this.http.get("libraries/ncd-answers").subscribe({next:t=>this.logical=t.data,error:t=>console.log(t)}),this.http.get("libraries/ncd-answers-s2").subscribe({next:t=>this.logical2=t.data,error:t=>console.log(t)}),this.http.get("libraries/ncd-client-types").subscribe({next:t=>this.clients=t.data,error:t=>console.log(t)}),this.http.get("libraries/ncd-alcohol-intake").subscribe({next:t=>this.alcohol=t.data,error:t=>console.log(t)})}get f(){return this.riskAssessForm.controls}constructor(t,r,s){this.http=t,this.formBuilder=r,this.toastr=s,this.loadRisk=new e.bkB,this.faInforCircle=m.iW_,this.faSave=p.hSh,this.faSpinner=m.z1G,this.family_history=A,this.riskAssessForm=V,this.is_saving=!1,this.show_form=!1,this.vitals_today={patient_waist:null,patient_bmi_class:null}}ngOnChanges(t){this.patient_info&&this.consult_details&&this.creatFormValidation(),this.consult_details&&this.consult_details.assessment_date?(this.riskAssessForm.patchValue({...this.consult_details}),this.riskAssessForm.patchValue({assessment_date:(0,c.Yq)(this.consult_details.assessment_date,"yyyy-MM-dd","en","Asia/Manila")}),this.checkDiabetes(),this.show_form=!0):this.getVitalsToday(this.vitals,this.consult_details)}creatFormValidation(){let t;t=this.consult_details.assessment_date?this.consult_details.consult_id:this.consult_details.id,this.riskAssessForm=this.formBuilder.nonNullable.group({consult_id:[t],patient_id:[this.patient_info.id],location:[null,n.k0.required],client_type:[null,n.k0.required],assessment_date:[this.consult_details.consult_date,n.k0.required],family_hx_hypertension:[null,n.k0.required],family_hx_stroke:[null,n.k0.required],family_hx_heart_attack:[null,n.k0.required],family_hx_diabetes:[null,n.k0.required],family_hx_asthma:[null,n.k0.required],family_hx_cancer:[null,n.k0.required],family_hx_kidney_disease:[null,n.k0.required],smoking:[null,n.k0.required],alcohol_intake:[null,n.k0.required],excessive_alcohol_intake:[null,n.k0.required],high_fat:[null,n.k0.required],intake_vegetables:[null,n.k0.required],intake_fruits:[null,n.k0.required],physical_activity:[null,n.k0.required],presence_diabetes:[null,n.k0.required],diabetes_medications:[null,n.k0.required],waist_line:[null,n.k0.required],polyphagia:[null,n.k0.required],polydipsia:[null,n.k0.required],polyuria:[null,n.k0.required],obesity:[null,n.k0.required],central_adiposity:[null,n.k0.required],bmi:[null,n.k0.required],raised_bp:[null,n.k0.required],avg_systolic:[null,n.k0.required],avg_diastolic:[null,n.k0.required],systolic_1st:[null,n.k0.required],diastolic_1st:[null,n.k0.required],systolic_2nd:[null,n.k0.required],diastolic_2nd:[null,n.k0.required]}),this.checkDiabetes()}ngOnInit(){this.loadLibraries()}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(f.k),e.rXU(n.ok),e.rXU(v.tw))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-risk-assessment"]],inputs:{patient_info:"patient_info",consult_details:"consult_details",vitals:"vitals",ncd_details:"ncd_details"},outputs:{loadRisk:"loadRisk"},standalone:!1,features:[e.OA$],decls:45,vars:16,consts:[[1,"grid","grid-cols-12","shadow-md","rounded-xl","mb-8","mt-8"],[1,"col-span-12","flex","justify-between","w-full","bg-yellow-500","px-5","py-3","rounded-tl","rounded-tr"],[1,"font-bold","text-white","text-md","mt-2","mb-1"],[1,"text-sm","col-span-3","w-full","px-5","mt-5","mb-4","relative"],[1,"mb-1"],["class","text-red-500",4,"ngIf"],[4,"ngIf"],[1,"text-sm","col-span-3","w-full","px-5","mb-5","relative"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"text-red-500"],[3,"ngSubmit","formGroup"],[1,"grid","grid-cols-12","item-start","flex-wrap","shadow-md","rounded-xl","mb-8","mt-8"],[1,"col-span-12","flex","bg-blue-500","px-5","py-2","rounded-tl","rounded-tr"],[1,"text-sm","col-span-4","px-5","mt-4","mb-4"],["formControlName","location","name","location",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full",3,"change","ngClass"],[3,"ngValue",4,"ngFor","ngForOf"],["formControlName","client_type",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full"],[3,"value",4,"ngFor","ngForOf"],[1,"text-sm","col-span-4","px-5","mt-4","mb-6"],["formControlName","assessment_date","type","date","name","assessment_date","disabled","",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full","disabled:bg-gray-300"],[1,"grid","grid-cols-12","shadow-md","rounded-xl","mb-8"],[1,"col-span-12","flex","justify-between","w-full","bg-blue-500","px-5","py-3","rounded-tl","rounded-tr"],["class","text-sm col-span-4 w-full px-5 mt-4 mb-4",4,"ngFor","ngForOf"],[1,"text-sm","col-span-4","w-full","px-5","mt-4","mb-4","relative"],["formControlName","smoking","name","smoking",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full"],["formControlName","alcohol_intake","name","alcohol_intake",1,"text-sm","-select","border-gray-200","border","p-2.5","rounded-md","w-full"],["formControlName","excessive_alcohol_intake","name","excessive_alcohol_intake",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full"],["formControlName","high_fat","name","high_fat",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full"],["formControlName","intake_fruits","name","intake_fruits",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full"],["formControlName","physical_activity","name","physical_activity",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full"],[1,"text-sm","col-span-4","w-full","px-5","mt-4","mb-6","relative"],["formControlName","intake_vegetables","name","intake_vegetables",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full"],[1,"text-sm","col-span-6","w-full","px-5","mt-4","mb-6","relative"],["formControlName","presence_diabetes","name","presence_diabetes",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full",3,"change"],["formControlName","diabetes_medications","name","diabetes_medications",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full"],["formControlName","polyphagia","name","polyphagia",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full"],["formControlName","polydipsia","name","polydipsia",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full"],["formControlName","polyuria","name","polyuria",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full"],[1,"flex","justify-end"],["type","submit","name","add-btn",1,"btn-save","px-10","disabled:bg-gray-300",3,"disabled"],[3,"icon",4,"ngIf"],["animation","spin",3,"icon",4,"ngIf"],[3,"ngValue"],[3,"value"],[1,"text-sm","col-span-4","w-full","px-5","mt-4","mb-4"],[1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full",3,"formControlName","name"],[3,"icon"],["animation","spin",3,"icon"]],template:function(r,s){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"h4",2),e.EFF(3,"Patient have the following symptoms:"),e.k0s()(),e.j41(4,"div",3)(5,"h1",4),e.EFF(6,"Obesity:"),e.k0s(),e.DNE(7,P,2,0,"label",5)(8,X,2,1,"label",6),e.k0s(),e.j41(9,"div",3)(10,"h1",4),e.EFF(11,"BMI:"),e.k0s(),e.j41(12,"label"),e.EFF(13),e.k0s()(),e.j41(14,"div",3)(15,"h1",4),e.EFF(16,"Central Adiposity:"),e.k0s(),e.DNE(17,B,2,0,"label",5)(18,U,2,1,"label",6),e.k0s(),e.j41(19,"div",3)(20,"h1",4),e.EFF(21,"Waist Circumference:"),e.k0s(),e.DNE(22,L,2,0,"label",5)(23,H,2,1,"label",6),e.k0s(),e.j41(24,"div",7)(25,"h1",4),e.EFF(26,"BP 1st Reading:"),e.k0s(),e.DNE(27,K,2,0,"label",5)(28,z,2,1,"label",6),e.k0s(),e.j41(29,"div",7)(30,"h1",4),e.EFF(31,"BP 2nd Reading:"),e.k0s(),e.DNE(32,Q,2,0,"label",5)(33,W,2,1,"label",6),e.k0s(),e.j41(34,"div",7)(35,"h1",4),e.EFF(36,"Average Blood Pressure:"),e.k0s(),e.DNE(37,Z,2,0,"label",5)(38,ee,2,1,"label",6),e.k0s(),e.j41(39,"div",7)(40,"h1",4),e.EFF(41,"Raised Blood Pressure (>=140/90): "),e.k0s(),e.DNE(42,te,2,0,"label",5)(43,ie,2,1,"label",6),e.k0s()(),e.DNE(44,Fe,97,23,"form",8)),2&r&&(e.R7$(7),e.Y8G("ngIf",!s.riskAssessForm.value.bmi),e.R7$(),e.Y8G("ngIf",s.riskAssessForm.value.bmi),e.R7$(5),e.SpI("",s.riskAssessForm.value.bmi," "),e.R7$(4),e.Y8G("ngIf",!s.riskAssessForm.value.waist_line),e.R7$(),e.Y8G("ngIf",s.riskAssessForm.value.waist_line),e.R7$(4),e.Y8G("ngIf",!s.riskAssessForm.value.waist_line),e.R7$(),e.Y8G("ngIf",s.riskAssessForm.value.waist_line),e.R7$(4),e.Y8G("ngIf",!s.riskAssessForm.value.systolic_1st),e.R7$(),e.Y8G("ngIf",s.riskAssessForm.value.systolic_1st),e.R7$(4),e.Y8G("ngIf",!s.riskAssessForm.value.systolic_2nd),e.R7$(),e.Y8G("ngIf",s.riskAssessForm.value.systolic_2nd),e.R7$(4),e.Y8G("ngIf",!s.riskAssessForm.value.systolic_2nd),e.R7$(),e.Y8G("ngIf",s.riskAssessForm.value.avg_systolic),e.R7$(4),e.Y8G("ngIf",!s.riskAssessForm.value.avg_systolic),e.R7$(),e.Y8G("ngIf",s.riskAssessForm.value.avg_systolic),e.R7$(),e.Y8G("ngIf",s.show_form))},dependencies:[c.YU,c.Sq,c.bT,d.aY,n.qT,n.xH,n.y7,n.me,n.wz,n.BC,n.cb,n.j4,n.JD],encapsulation:2})}}return i})();const ye=i=>({"background-color":i}),we=i=>({color:i});function Re(i,o){if(1&i&&(e.j41(0,"div",1)(1,"div",2)(2,"h4",3),e.EFF(3,"Risk Stratification Details"),e.k0s()(),e.j41(4,"table",4)(5,"tbody")(6,"tr",5)(7,"td",6),e.EFF(8,"Risk Level"),e.k0s(),e.j41(9,"td",7),e.EFF(10),e.k0s()(),e.j41(11,"tr",5)(12,"td",6),e.EFF(13,"Location of Assessment"),e.k0s(),e.j41(14,"td",8),e.EFF(15),e.k0s()(),e.j41(16,"tr",5)(17,"td",6),e.EFF(18,"Presence of Diabetes"),e.k0s(),e.j41(19,"td",6),e.EFF(20),e.k0s()(),e.j41(21,"tr",5)(22,"td",6),e.EFF(23,"Patient Gender"),e.k0s(),e.j41(24,"td",6),e.EFF(25),e.k0s()(),e.j41(26,"tr",5)(27,"td",6),e.EFF(28,"Patient Age"),e.k0s(),e.j41(29,"td",6),e.EFF(30),e.k0s()(),e.j41(31,"tr",5)(32,"td",6),e.EFF(33,"Smoking Status"),e.k0s(),e.j41(34,"td",6),e.EFF(35),e.k0s()(),e.j41(36,"tr",9)(37,"td",6),e.EFF(38,"Actual Systolic Blood Pressure"),e.k0s(),e.j41(39,"td",6),e.EFF(40),e.k0s()()()(),e.j41(41,"div",10)(42,"h1",11),e.EFF(43,"Health Information"),e.k0s(),e.j41(44,"ul",12)(45,"li",13),e.EFF(46,"All individuals with persistent raised BP \u2265 160/100 mmHg should be given antihypertensive treatment."),e.k0s(),e.j41(47,"li",13),e.EFF(48,"All patients with established diabetes and cardiovascular disease (coronary heart disease, myocardial infarction, transient ischaemic attacks, cerebrovascular disease or peripheral vascular disease); if stable, should continue the treatment already prescribed and be considered as with risk > 30%."),e.k0s(),e.j41(49,"li",13),e.EFF(50,"All individuals with total cholesterol at or above 8 mmol/l (320mg/dl) should be given lifestyle advise and statins."),e.k0s()(),e.j41(51,"ul",12)(52,"li",13),e.EFF(53,"Counsel on diet, physical activity, smoking cessation, (Protocol 3P and 4P)."),e.k0s(),e.j41(54,"li",13),e.EFF(55,"If risk < 10%, follow up in 12 months."),e.k0s(),e.j41(56,"li",13),e.EFF(57,"If risk 10 to < 20%, follow up every 3 months until the targets are met, then 6-9 months thereafter."),e.k0s()(),e.j41(58,"ul",12)(59,"li",13),e.EFF(60,"Counsel on diet, physical activity, smoking cessation, (Protocols 3P and 4P)."),e.k0s(),e.j41(61,"li",13),e.EFF(62,"Persistent BP \u2265 140/90 mmHg (in DM \u2265 130/80 mmHg) consider a low dose of one of the drugs. Hydrochlorthiazide 25-50 mg daily. Enalapril 5-20 mg daily. Atenolol 50-100 mg daily. Amiodipine 5-10 mg daily"),e.k0s(),e.j41(63,"li",13),e.EFF(64,"Follow-up every 3-6 months."),e.k0s()(),e.j41(65,"ul",14)(66,"li",13),e.EFF(67,"Counsel on diet, physical activity, smoking cessation."),e.k0s(),e.j41(68,"li",13),e.EFF(69,"Persistent BP \u2265 130/80 should be given one of the drugs: thiazide, ACE inhibitor, beta blocker, calcium channel blocker. "),e.k0s(),e.j41(70,"li",13),e.EFF(71,"Give a statin."),e.k0s(),e.j41(72,"li",13),e.EFF(73,"Follow-up every three months."),e.k0s()()()()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngStyle",e.eq3(9,ye,null==t.risk_strat?null:t.risk_strat.color)),e.R7$(8),e.Y8G("ngStyle",e.eq3(11,we,null==t.risk_strat?null:t.risk_strat.color)),e.R7$(),e.JRh(null==t.risk_strat?null:t.risk_strat.risk_level),e.R7$(5),e.JRh(null==t.risk_strat?null:t.risk_strat.type),e.R7$(5),e.JRh(null!=t.risk_strat&&t.risk_strat.diabetes_present?"Y":"N"),e.R7$(5),e.JRh("M"===(null==t.info?null:t.info.gender)?"Male":"Female"),e.R7$(5),e.JRh(null==t.info?null:t.info.age),e.R7$(5),e.JRh(null!=t.risk_strat&&t.risk_strat.smoking_status?"Y":"N"),e.R7$(5),e.JRh(null==t.risk_strat?null:t.risk_strat.sbp)}}let G=(()=>{class i{loadRiskStrat(){this.http.get("non-communicable-disease/risk-stratification",{params:{patient_id:this.patient_id}}).subscribe({next:r=>{this.show_form=!0,this.info=r.data[0],this.risk_strat=r.risk_stratification},error:r=>console.log(r)})}constructor(t,r){this.http=t,this.toastr=r,this.faInfoCircle=m.iW_,this.show_form=!1}ngOnInit(){this.loadRiskStrat()}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(f.k),e.rXU(v.tw))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-risk-stratification"]],inputs:{patient_id:"patient_id",consult_details:"consult_details"},standalone:!1,decls:1,vars:1,consts:[["class","grid grid-cols-12 item-start flex-wrap shadow-md rounded-xl mb-4 mt-8",4,"ngIf"],[1,"grid","grid-cols-12","item-start","flex-wrap","shadow-md","rounded-xl","mb-4","mt-8"],[1,"col-span-12","flex","px-5","py-3","rounded-tl","rounded-tr",3,"ngStyle"],[1,"font-bold","text-white","text-md","mt-2","mb-2"],[1,"text-sm","col-span-6","col-start-1","table-auto","border-r-2","border-gray-200"],[1,"border-b-2","border-gray-200"],[1,"px-5","py-3"],[1,"px-5","py-3","text-gray","font-bold","text-lg",3,"ngStyle"],[1,"px-5","py-3","capitalize"],[1,""],[1,"text-sm","col-span-6","col-start-7","table-auto","overflow-y-auto","h-96"],[1,"px-5","py-5","font-bold"],[1,"list-disc","px-8"],[1,"py-3"],[1,"list-disc","px-8","mb-4"]],template:function(r,s){1&r&&e.DNE(0,Re,74,13,"div",0),2&r&&e.Y8G("ngIf",s.show_form)},dependencies:[c.bT,c.B3],encapsulation:2})}}return i})();const Ce=new n.gE({consult_ncd_risk_id:new n.MJ(null),patient_ncd_id:new n.MJ(null),consult_id:new n.MJ(null),patient_id:new n.MJ(null),question1:new n.MJ(null),question2:new n.MJ(null),question3:new n.MJ(null),question4:new n.MJ(null),question5:new n.MJ(null),question6:new n.MJ(null),question7:new n.MJ(null),question8:new n.MJ(null),angina_heart_attack:new n.MJ(null),stroke_tia:new n.MJ(null)}),I=i=>({"bg-red-400":i}),N=i=>({"text-red-400":i});function xe(i,o){if(1&i&&(e.j41(0,"option",25),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.desc," ")}}function Ee(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",21)(1,"div",22)(2,"h1",10),e.EFF(3),e.k0s(),e.j41(4,"h1",23),e.EFF(5),e.k0s()(),e.j41(6,"div",13)(7,"select",24),e.bIt("change",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.getAnginaValue())}),e.DNE(8,xe,2,2,"option",15),e.k0s()()()}if(2&i){const t=o.$implicit,r=e.XpG(2);e.R7$(3),e.Lme("",t.question_id,". ",t.question_e," "),e.R7$(2),e.JRh(t.question_t),e.R7$(2),e.Y8G("formControlName","question"+t.question_id)("name","question"+t.question_id),e.R7$(),e.Y8G("ngForOf",r.logical2)}}function je(i,o){if(1&i&&(e.j41(0,"option",25),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.desc," ")}}function Ge(i,o){if(1&i&&e.nrm(0,"fa-icon",26),2&i){const t=e.XpG(2);e.Y8G("icon",t.faSave)}}function Ie(i,o){if(1&i&&e.nrm(0,"fa-icon",27),2&i){const t=e.XpG(2);e.Y8G("icon",t.faSpinner)}}function Ne(i,o){if(1&i){const t=e.RV6();e.j41(0,"form",1),e.bIt("ngSubmit",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.onSubmit())}),e.j41(1,"div",2)(2,"div",3)(3,"h4",4),e.EFF(4,"Angina or Heart Attack"),e.k0s()(),e.DNE(5,Ee,9,6,"div",5),e.nrm(6,"div",6),e.j41(7,"p",7)(8,"b"),e.EFF(9,"Note:"),e.k0s(),e.EFF(10," If the answer is "),e.j41(11,"b"),e.EFF(12,"YES"),e.k0s(),e.EFF(13," to either questions 3, 4, 5, 6, or 7, the patient may have angina or heart attack, and must see a doctor. "),e.k0s()(),e.j41(14,"div",8)(15,"div",3)(16,"h4",4),e.EFF(17,"Stroke or Transient Ischemic Attack"),e.k0s()(),e.j41(18,"div",9)(19,"h1",10),e.EFF(20," 8. Have you experienced any of the following: "),e.k0s(),e.j41(21,"ul",11)(22,"li"),e.EFF(23,"Difficulty in talking."),e.k0s(),e.j41(24,"li"),e.EFF(25,"Weakness of arm and/or legs on one side of the body or numbness on one side of the body?"),e.k0s()(),e.j41(26,"h1",12),e.EFF(27," Have you experienced any of the following: "),e.k0s(),e.j41(28,"ul",11)(29,"li"),e.EFF(30,"Hirap sa pagsasalita."),e.k0s(),e.j41(31,"li"),e.EFF(32,"Panghihina ng braso at/o ng binti o pamamanhid ng kalahating bahagi ng katawan?"),e.k0s()()(),e.j41(33,"div",13)(34,"select",14),e.bIt("change",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.getStrokeTia())}),e.DNE(35,je,2,2,"option",15),e.k0s()(),e.nrm(36,"div",16),e.j41(37,"p",7)(38,"b"),e.EFF(39,"Note:"),e.k0s(),e.EFF(40," If the answer to question 8 is "),e.j41(41,"b"),e.EFF(42,"YES"),e.k0s(),e.EFF(43,", the patient may be having TIA or stroke, and must see a doctor. "),e.k0s()(),e.j41(44,"div",17)(45,"button",18),e.DNE(46,Ge,1,1,"fa-icon",19)(47,Ie,1,1,"fa-icon",20),e.EFF(48," Save "),e.k0s()()()}if(2&i){const t=e.XpG();e.Y8G("formGroup",t.questionnaireForm),e.R7$(2),e.Y8G("ngClass",e.eq3(10,I,"Y"===t.questionnaireForm.value.angina_heart_attack)),e.R7$(3),e.Y8G("ngForOf",t.questionnaire),e.R7$(2),e.Y8G("ngClass",e.eq3(12,N,"Y"===t.questionnaireForm.value.angina_heart_attack)),e.R7$(8),e.Y8G("ngClass",e.eq3(14,I,"Y"===t.questionnaireForm.value.stroke_tia)),e.R7$(20),e.Y8G("ngForOf",t.logical2),e.R7$(2),e.Y8G("ngClass",e.eq3(16,N,"Y"===t.questionnaireForm.value.stroke_tia)),e.R7$(8),e.Y8G("disabled",t.questionnaireForm.invalid||t.is_saving),e.R7$(),e.Y8G("ngIf",!t.is_saving),e.R7$(),e.Y8G("ngIf",t.is_saving)}}let M=(()=>{class i{loadLibraries(){this.http.get("libraries/ncd-answers-s2").subscribe({next:t=>{this.logical2=t.data},error:t=>console.log(t)})}getAnginaValue(){this.questionnaireForm.patchValue("Y"===this.questionnaireForm.value.question3||"Y"===this.questionnaireForm.value.question4||"Y"===this.questionnaireForm.value.question5||"Y"===this.questionnaireForm.value.question6||"Y"===this.questionnaireForm.value.question7?{angina_heart_attack:"Y"}:{angina_heart_attack:"N"})}getStrokeTia(){this.questionnaireForm.patchValue("Y"===this.questionnaireForm.value.question8?{stroke_tia:"Y"}:{stroke_tia:"N"})}identify(t,r){return r.id}onSubmit(){this.is_saving=!0,this.questionnaireForm.valid&&this.http.post("non-communicable-disease/risk-questionnaire",this.questionnaireForm.value).subscribe({next:t=>{this.toastr.success("Recorded successfully!","Questionnaire"),this.is_saving=!1},error:t=>console.log(t)})}getRecord(){this.consult_details&&(this.questionnaireForm.patchValue({...this.consult_details.riskQuestionnaire}),this.getAnginaValue(),this.getStrokeTia(),this.show_form=!0)}createForm(){this.consult_details&&this.consult_details.assessment_date&&(this.questionnaireForm=this.formBuilder.nonNullable.group({consult_ncd_risk_id:[this.consult_details.id],patient_ncd_id:[this.consult_details.patient_ncd_id],consult_id:[this.consult_details.consult_id,n.k0.required],patient_id:[this.consult_details.patient_id,n.k0.required],question1:[null,n.k0.required],question2:[null,n.k0.required],question3:[null,n.k0.required],question4:[null,n.k0.required],question5:[null,n.k0.required],question6:[null,n.k0.required],question7:[null,n.k0.required],question8:[null,n.k0.required],angina_heart_attack:[null,n.k0.required],stroke_tia:[null,n.k0.required]}),this.getRecord())}ngOnChanges(t){this.createForm()}constructor(t,r,s){this.http=t,this.formBuilder=r,this.toastr=s,this.faInfoCircle=m.iW_,this.faSave=p.hSh,this.faSpinner=m.z1G,this.questionnaireForm=Ce,this.is_saving=!1,this.show_form=!1,this.questionnaire=D}ngOnInit(){this.loadLibraries()}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(f.k),e.rXU(n.ok),e.rXU(v.tw))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-questionnaire"]],inputs:{patient_id:"patient_id",consult_details:"consult_details"},standalone:!1,features:[e.OA$],decls:1,vars:1,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"grid","grid-cols-12","item-start","flex-wrap","shadow-md","rounded-xl","mb-8","mt-8"],[1,"col-span-12","flex","bg-blue-500","px-5","py-3","rounded-t-xl",3,"ngClass"],[1,"font-bold","text-white","text-md","mt-2","mb-2"],["class","col-span-full grid grid-cols-12",4,"ngFor","ngForOf"],[1,"text-sm","col-start-1","col-span-12","border-b-2","border-gray-200","mt-2","mb-4"],[1,"text-sm","col-start-1","col-span-12","w-full","px-5","mt-2","mb-4",3,"ngClass"],[1,"grid","grid-cols-12","item-start","flex-wrap","shadow-md","rounded-xl","mb-4","mt-8"],[1,"text-sm","col-start-1","col-span-9","w-full","px-5","mt-4","mb-4"],[1,"mb-1"],[1,"list-disc","px-8"],[1,"mb-1","px-4","mt-2"],[1,"col-start-10","col-span-3","px-5"],["formControlName","question8","name","question8",1,"text-sm","mt-4","bg-white","border-gray-300","border","px-2","p-2.5","rounded-md","w-full",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"col-start-1","col-span-12","border-b-2","border-gray-200","mt-2","mb-1"],[1,"flex","justify-end"],["type","submit",1,"btn-save","px-10","disabled:bg-gray-300",3,"disabled"],["class","mr-2",3,"icon",4,"ngIf"],["class","mr-2","animation","spin",3,"icon",4,"ngIf"],[1,"col-span-full","grid","grid-cols-12"],[1,"text-sm","col-start-1","col-span-9","w-full","px-5","mt-4","mb-4","grid","grid-cols-1"],[1,"pl-3","italic"],[1,"text-sm","mt-4","bg-white","border-gray-300","border","px-2","p-2.5","rounded-md","w-full",3,"change","formControlName","name"],[3,"value"],[1,"mr-2",3,"icon"],["animation","spin",1,"mr-2",3,"icon"]],template:function(r,s){1&r&&e.DNE(0,Ne,49,18,"form",0),2&r&&e.Y8G("ngIf",s.show_form)},dependencies:[c.YU,c.Sq,c.bT,d.aY,n.qT,n.xH,n.y7,n.wz,n.BC,n.cb,n.j4,n.JD],encapsulation:2})}}return i})();function Me(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",18)(1,"input",19),e.mxI("ngModelChange",function(s){const a=e.eBV(t).$implicit,l=e.XpG();return e.DH7(l.patient_diagnosis[a.id],s)||(l.patient_diagnosis[a.id]=s),e.Njj(s)}),e.k0s(),e.j41(2,"label",20),e.EFF(3),e.k0s()()}if(2&i){const t=o.$implicit,r=e.XpG();e.R7$(),e.x72("id","patient_diagnosis",t.id,""),e.R50("ngModel",r.patient_diagnosis[t.id]),e.R7$(),e.x72("for","patient_diagnosis",t.id,""),e.R7$(),e.JRh(t.desc)}}function $e(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",18)(1,"input",19),e.mxI("ngModelChange",function(s){const a=e.eBV(t).$implicit,l=e.XpG();return e.DH7(l.patient_target_organ[a.id],s)||(l.patient_target_organ[a.id]=s),e.Njj(s)}),e.k0s(),e.j41(2,"label",20),e.EFF(3),e.k0s()()}if(2&i){const t=o.$implicit,r=e.XpG();e.R7$(),e.x72("id","patient_target_organ",t.id,""),e.R50("ngModel",r.patient_target_organ[t.id]),e.R7$(),e.x72("for","patient_target_organ",t.id,""),e.R7$(),e.JRh(t.desc)}}function Ye(i,o){if(1&i&&(e.j41(0,"option",24),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.desc," ")}}function Se(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",18)(1,"h1",21),e.EFF(2),e.k0s(),e.j41(3,"select",22),e.mxI("ngModelChange",function(s){const a=e.eBV(t).$implicit,l=e.XpG();return e.DH7(l.ncd_record[a.code],s)||(l.ncd_record[a.code]=s),e.Njj(s)}),e.DNE(4,Ye,2,2,"option",23),e.k0s()()}if(2&i){const t=o.$implicit,r=e.XpG();e.R7$(2),e.JRh(t.desc),e.R7$(),e.R50("ngModel",r.ncd_record[t.code]),e.R7$(),e.Y8G("ngForOf",r.physical_examination_result)}}function Te(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",18)(1,"input",19),e.mxI("ngModelChange",function(s){const a=e.eBV(t).$implicit,l=e.XpG();return e.DH7(l.patient_counseling[a.id],s)||(l.patient_counseling[a.id]=s),e.Njj(s)}),e.k0s(),e.j41(2,"label",25),e.EFF(3),e.k0s()()}if(2&i){const t=o.$implicit,r=e.XpG();e.R7$(),e.x72("id","patient_counseling",t.id,""),e.R50("ngModel",r.patient_counseling[t.id]),e.R7$(),e.x72("for","patient_counseling",t.id,""),e.Y8G("value",t.id),e.R7$(),e.JRh(t.desc)}}function Je(i,o){if(1&i&&e.nrm(0,"fa-icon",26),2&i){const t=e.XpG();e.Y8G("icon",t.faSave)}}function Ae(i,o){if(1&i&&e.nrm(0,"fa-icon",27),2&i){const t=e.XpG();e.Y8G("icon",t.faSpinner)}}let $=(()=>{class i{loadLibraries(){Object.entries(this.libraries).forEach(([t,r],s)=>{let a=r;this.http.get("libraries/"+a.url).subscribe({next:l=>{this[a.var_name]=l.data},error:l=>console.log(l)})})}getRecord(){this.consult_details.patientNcdRecord&&(this.ncd_record=this.consult_details.patientNcdRecord,this.consult_details&&Object.keys(this.consult_details.ncdRecordTargetOrgan).length>0&&(this.patient_target_organ=this.loadIndexSelected(this.consult_details.ncdRecordTargetOrgan,"target_organ_code")),this.consult_details&&Object.keys(this.consult_details.ncdRecordDiagnosis).length>0&&(this.patient_diagnosis=this.loadIndexSelected(this.consult_details.ncdRecordDiagnosis,"diagnosis_code")),this.consult_details&&Object.keys(this.consult_details.ncdRecordCounselling).length>0&&(this.patient_counseling=this.loadIndexSelected(this.consult_details.ncdRecordCounselling,"counselling_code")))}loadIndexSelected(t,r){let s=[];return Object.keys(t).length>0&&Object.entries(t).forEach(([a,l],_)=>{s[l[r]]=!0}),s}onSubmit(){this.ncd_record.patient_ncd_id=this.consult_details.patient_ncd_id,this.ncd_record.consult_ncd_risk_id=this.consult_details.id,this.ncd_record.patient_id=this.consult_details.patient_id,this.ncd_record.consultation_date=(0,c.Yq)(this.consult_details.assessment_date,"yyyy-MM-dd","en","Asia/Manila"),this.ncd_record.diagnosis_code=this.getIndexVal(this.patient_diagnosis),this.ncd_record.counselling_code=this.getIndexVal(this.patient_counseling),this.ncd_record.target_organ_code=this.getIndexVal(this.patient_target_organ),this.http.post("non-communicable-disease/patient-record",this.ncd_record).subscribe({next:t=>{console.log(t),this.toastr.success("Successfully recorded!","NCD Record")},error:t=>console.log(t)})}getIndexVal(t){let r=[];return t.forEach((s,a)=>{!0===s&&r.push(a)}),r}constructor(t,r){this.http=t,this.toastr=r,this.faSave=p.hSh,this.faInfoCircle=m.iW_,this.faSpinner=m.z1G,this.is_saving=!1,this.patient_counseling=[],this.patient_target_organ=[],this.patient_diagnosis=[],this.ncd_record={current_medications:null,palpitation_heart:null,peripheral_pulses:null,abdomen:null,heart:null,lungs:null,sensation_feet:null,other_findings:null,other_infos:null},this.logical=[{code:"Y",desc:"Yes"},{code:"N",desc:"No"},{code:"U",desc:"Unknown"},{code:"X",desc:"Not Applicable"}],this.physical_examination=[{code:"palpitation_heart",desc:"Palpitation of heart"},{code:"peripheral_pulses",desc:"Palpation of peripheral pulses"},{code:"abdomen",desc:"Palpation of abdomen"},{code:"heart",desc:"Auscultation of heart"},{code:"lungs",desc:"Auscultation of lungs"},{code:"sensation_feet",desc:"If DM, sensation of feet and foot pulses"}],this.libraries=[{var_name:"counselling",url:"ncd-record-counselling"},{var_name:"diagnosis",url:"ncd-record-diagnosis"},{var_name:"target_organ",url:"ncd-record-target-organ"},{var_name:"physical_examination_result",url:"ncd-physical-exam"}]}ngOnInit(){this.loadLibraries()}ngOnChanges(t){this.getRecord()}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(f.k),e.rXU(v.tw))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-patient-record"]],inputs:{patient_id:"patient_id",consult_details:"consult_details"},standalone:!1,features:[e.OA$],decls:53,vars:10,consts:[[1,"grid","grid-cols-12","item-start","flex-wrap","shadow-md","rounded-xl","mb-8","mt-8"],[1,"col-span-12","flex","bg-blue-500","px-5","py-3","rounded-t-xl"],[1,"font-bold","text-white","text-md","mt-2","mb-2"],[1,"col-span-12"],[1,"text-sm","col-span-12","px-5","mt-4"],[1,"font-bold","text-md","mt-2","mb-2","text-lg","text-blue-500"],[1,"text-sm","col-span-12","px-5","mb-6","ml-5"],[1,"mb-1","font-semibold"],["name","text","rows","4",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full",3,"ngModelChange","ngModel"],[1,"text-sm","col-span-12","px-5"],[1,"col-span-12","grid","grid-cols-12","gap-4","ml-10","mb-6"],["class","text-sm col-span-6 ",4,"ngFor","ngForOf"],[1,"col-span-12","grid","grid-cols-12","gap-4","ml-10","mb-6","mr-5"],["class","text-sm col-span-6",4,"ngFor","ngForOf"],[1,"col-span-12","flex","justify-end","mr-5","mb-5"],["type","button",1,"btn-save","px-10","disabled:bg-gray-300",3,"click","disabled"],["class","mr-3",3,"icon",4,"ngIf"],["class","mr-3","animation","spin",3,"icon",4,"ngIf"],[1,"text-sm","col-span-6"],["type","checkbox",1,"h-4","w-4","border-gray-400","text-blue-500","rounded-md","mr-3",3,"ngModelChange","ngModel"],[1,"ml-1","align-middle"],[1,"mb-1"],["name","family_hx_hypertension",1,"text-sm","form-select","bg-white","border-gray-200","border","p-2.5","rounded-md","w-full",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"ml-1","align-middle",3,"value"],[1,"mr-3",3,"icon"],["animation","spin",1,"mr-3",3,"icon"]],template:function(r,s){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"h4",2),e.EFF(3,"Patient NCD Consulting Record"),e.k0s()(),e.j41(4,"div",3)(5,"div",4)(6,"h4",5),e.EFF(7,"Current Medications"),e.k0s()(),e.j41(8,"div",6)(9,"h4",7),e.EFF(10,"List current medications"),e.k0s(),e.j41(11,"textarea",8),e.mxI("ngModelChange",function(l){return e.DH7(s.ncd_record.current_medications,l)||(s.ncd_record.current_medications=l),l}),e.k0s()()(),e.j41(12,"div",3)(13,"div",9)(14,"h4",5),e.EFF(15,"Diagnosis & Associated Clinical Conditions"),e.k0s()(),e.j41(16,"div",10),e.DNE(17,Me,4,6,"div",11),e.k0s()(),e.j41(18,"div",3)(19,"div",9)(20,"h4",5),e.EFF(21,"Target Organ Damage"),e.k0s()(),e.j41(22,"div",10),e.DNE(23,$e,4,6,"div",11),e.k0s()(),e.j41(24,"div",3)(25,"div",9)(26,"h4",5),e.EFF(27,"Physical Examination"),e.k0s()(),e.j41(28,"div",12),e.DNE(29,Se,5,3,"div",13),e.k0s(),e.j41(30,"div",6)(31,"h4",7),e.EFF(32,"Other significant findings/ Laboratory results"),e.k0s(),e.j41(33,"textarea",8),e.mxI("ngModelChange",function(l){return e.DH7(s.ncd_record.other_findings,l)||(s.ncd_record.other_findings=l),l}),e.k0s()()(),e.j41(34,"div",3)(35,"div",9)(36,"h4",5),e.EFF(37,"Provided Counselling On"),e.k0s()(),e.j41(38,"div",10),e.DNE(39,Te,4,7,"div",11),e.k0s()(),e.j41(40,"div",3)(41,"div",4)(42,"h4",5),e.EFF(43,"Others"),e.k0s()(),e.j41(44,"div",6)(45,"h4",7),e.EFF(46,"Other information"),e.k0s(),e.j41(47,"textarea",8),e.mxI("ngModelChange",function(l){return e.DH7(s.ncd_record.other_infos,l)||(s.ncd_record.other_infos=l),l}),e.k0s()()(),e.j41(48,"div",14)(49,"button",15),e.bIt("click",function(){return s.onSubmit()}),e.DNE(50,Je,1,1,"fa-icon",16)(51,Ae,1,1,"fa-icon",17),e.EFF(52," Save "),e.k0s()()()),2&r&&(e.R7$(11),e.R50("ngModel",s.ncd_record.current_medications),e.R7$(6),e.Y8G("ngForOf",s.diagnosis),e.R7$(6),e.Y8G("ngForOf",s.target_organ),e.R7$(6),e.Y8G("ngForOf",s.physical_examination),e.R7$(4),e.R50("ngModel",s.ncd_record.other_findings),e.R7$(6),e.Y8G("ngForOf",s.counselling),e.R7$(8),e.R50("ngModel",s.ncd_record.other_infos),e.R7$(2),e.Y8G("disabled",s.is_saving),e.R7$(),e.Y8G("ngIf",!s.is_saving),e.R7$(),e.Y8G("ngIf",s.is_saving))},dependencies:[c.Sq,c.bT,d.aY,n.xH,n.y7,n.me,n.Zm,n.wz,n.BC,n.vS],encapsulation:2})}}return i})();const qe=[{code:"Y",desc:"Yes"},{code:"N",desc:"No"}],De=[{code:"a",desc:"Positive"},{code:"b",desc:"Negative"},{code:"c",desc:"Suspect Cancer"}],Ve=new n.gE({ncd_id:new n.MJ(null),patient_id:new n.MJ(null),facility_code:new n.MJ(null),abdomen_code:new n.MJ(null),abdomen_remarks:new n.MJ(null),abdominal_surgery:new n.MJ(null),abdominal_surgery_remarks:new n.MJ(null),abortion:new n.MJ(null),allergies:new n.MJ(null),allergies_remarks:new n.MJ(null),any_spouse:new n.MJ(null),any_spouse_remarks:new n.MJ(null),breast_code:new n.MJ(null),breast_remarks:new n.MJ(null),cancer:new n.MJ(null),cancer_remarks:new n.MJ(null),chest_code:new n.MJ(null),chest_remarks:new n.MJ(null),children:new n.MJ(null),cigarettes:new n.MJ(null),client:new n.MJ(null),client_remarks:new n.MJ(null),counseling:new n.MJ(null),current_medication:new n.MJ(null),duration:new n.MJ(null),first_intercourse:new n.MJ(null),first_preg:new n.MJ(null),full_term:new n.MJ(null),gravidity:new n.MJ(null),heart_code:new n.MJ(null),heart_remarks:new n.MJ(null),heent_code:new n.MJ(null),heent_remarks:new n.MJ(null),livebirths:new n.MJ(null),medication_remarks:new n.MJ(null),months:new n.MJ(null),pap_smear:new n.MJ(null),pap_smear_findings:new n.MJ(null),parity:new n.MJ(null),pelvic_code:new n.MJ(null),pelvic_remarks:new n.MJ(null),preterm:new n.MJ(null),previous_screening:new n.MJ(null),recto_vaginal:new n.MJ(null),sexual_partners:new n.MJ(null),skin_code:new n.MJ(null),skin_remarks:new n.MJ(null),smoking:new n.MJ(null),smoking_remarks:new n.MJ(null),spouse:new n.MJ(null),treatment:new n.MJ(null),vaginal_bleeding:new n.MJ(null),vaginal_discharge:new n.MJ(null),via_findings:new n.MJ(null),via_result:new n.MJ(null),years:new n.MJ(null),glands:new n.MJ(null),glands_remarks:new n.MJ(null),speculum:new n.MJ(null),speculum_remarks:new n.MJ(null),motion_tenderness:new n.MJ(null),tenderness:new n.MJ(null),size:new n.MJ(null),shape:new n.MJ(null),uterus:new n.MJ(null),menarche:new n.MJ(null),lmp:new n.MJ(null),aog:new n.MJ(null),bleeding_pattern:new n.MJ(null),pads:new n.MJ(null),referral:new n.MJ(null)}),g=i=>({"rounded-b-xl":i});function Oe(i,o){1&i&&(e.j41(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"h4",16),e.EFF(5,"Number of children"),e.k0s(),e.nrm(6,"input",17),e.k0s()()()())}function Pe(i,o){if(1&i&&(e.j41(0,"option",64),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.JRh(t.desc)}}function Xe(i,o){if(1&i&&(e.j41(0,"option",64),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.JRh(t.desc)}}function Be(i,o){if(1&i&&(e.j41(0,"option",64),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.JRh(t.desc)}}function Ue(i,o){if(1&i&&(e.j41(0,"option",64),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.JRh(t.desc)}}function Le(i,o){if(1&i&&(e.j41(0,"option",64),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.JRh(t.desc)}}function He(i,o){if(1&i&&(e.j41(0,"option",64),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.JRh(t.code)}}function Ke(i,o){if(1&i&&(e.j41(0,"option",64),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.JRh(t.desc)}}function ze(i,o){if(1&i&&(e.j41(0,"option",64),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.JRh(t.desc)}}function Qe(i,o){if(1&i&&(e.j41(0,"option",64),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.JRh(t.desc)}}function We(i,o){if(1&i&&(e.j41(0,"option",64),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.JRh(t.desc)}}function Ze(i,o){if(1&i&&(e.j41(0,"option",64),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.JRh(t.desc)}}function et(i,o){if(1&i&&(e.j41(0,"option",64),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.JRh(t.desc)}}function tt(i,o){if(1&i&&(e.j41(0,"option",64),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.JRh(t.desc)}}function it(i,o){if(1&i&&(e.j41(0,"div",12)(1,"div",18)(2,"h4",19),e.EFF(3,"A. OB-GYNE History"),e.k0s()(),e.j41(4,"div",13)(5,"h4",20),e.EFF(6,"Menstrual history"),e.k0s(),e.j41(7,"div",21)(8,"div",22)(9,"h4",16),e.EFF(10,"Menarche"),e.k0s(),e.nrm(11,"input",23),e.k0s(),e.j41(12,"div",22)(13,"h4",16),e.EFF(14,"Last menstrual period (LMP)"),e.k0s(),e.nrm(15,"input",24),e.k0s(),e.j41(16,"div",22)(17,"h4",16),e.EFF(18,"AOG"),e.k0s(),e.nrm(19,"input",25),e.k0s(),e.j41(20,"div",22)(21,"h4",16),e.EFF(22,"Menstrual bleeding pattern"),e.k0s(),e.j41(23,"select",26)(24,"option",27),e.EFF(25,"Regular"),e.k0s(),e.j41(26,"option",28),e.EFF(27,"Irregular"),e.k0s()()(),e.j41(28,"div",22)(29,"h4",16),e.EFF(30,"Number of pads/day"),e.k0s(),e.nrm(31,"input",29),e.k0s()()(),e.j41(32,"div",30)(33,"h4",20),e.EFF(34,"Menstrual history"),e.k0s(),e.j41(35,"div",21)(36,"div",15)(37,"h4",16),e.EFF(38,"Gravidity"),e.k0s(),e.nrm(39,"input",31),e.k0s(),e.j41(40,"div",15)(41,"h4",16),e.EFF(42,"Parity"),e.k0s(),e.nrm(43,"input",32),e.k0s(),e.j41(44,"div",33)(45,"h4",16),e.EFF(46,"Full-term"),e.k0s(),e.nrm(47,"input",34),e.k0s(),e.j41(48,"div",33)(49,"h4",16),e.EFF(50,"Preterm"),e.k0s(),e.nrm(51,"input",35),e.k0s(),e.j41(52,"div",33)(53,"h4",16),e.EFF(54,"Abortion"),e.k0s(),e.nrm(55,"input",36),e.k0s(),e.j41(56,"div",33)(57,"h4",16),e.EFF(58,"Livebirths"),e.k0s(),e.nrm(59,"input",37),e.k0s(),e.j41(60,"div",15)(61,"h4",16),e.EFF(62,"Age at first full term pregnancy (high risk if below 17 years old)"),e.k0s(),e.nrm(63,"input",38),e.k0s()()(),e.j41(64,"div",30)(65,"h4",20),e.EFF(66,"Oral Contraceptives Use (Duration)"),e.k0s(),e.j41(67,"div",21)(68,"div",15)(69,"h4",16),e.EFF(70,"Number of years"),e.k0s(),e.nrm(71,"input",39),e.k0s(),e.j41(72,"div",15)(73,"h4",16),e.EFF(74,"Number of months"),e.k0s(),e.nrm(75,"input",40),e.k0s()()(),e.j41(76,"div",30)(77,"h4",20),e.EFF(78,"History of previous cervical cancer screening"),e.k0s(),e.j41(79,"div",21)(80,"div",22)(81,"h4",16),e.EFF(82,"History of previous screening"),e.k0s(),e.j41(83,"select",41),e.DNE(84,Pe,2,2,"option",42),e.k0s()(),e.j41(85,"div",22)(86,"h4",16),e.EFF(87,"VIA (Result)"),e.k0s(),e.j41(88,"select",43),e.DNE(89,Xe,2,2,"option",42),e.k0s()(),e.j41(90,"div",22)(91,"h4",16),e.EFF(92,"Pap smear (Result)"),e.k0s(),e.j41(93,"select",44),e.DNE(94,Be,2,2,"option",42),e.k0s()()()(),e.j41(95,"div",30)(96,"h4",20),e.EFF(97,"History of abnormal vaginal discharge / bleeding"),e.k0s(),e.j41(98,"div",21)(99,"div",15)(100,"h4",16),e.EFF(101,"Discharge"),e.k0s(),e.j41(102,"select",45),e.DNE(103,Ue,2,2,"option",42),e.k0s()(),e.j41(104,"div",15)(105,"h4",16),e.EFF(106,"Bleeding"),e.k0s(),e.j41(107,"select",46),e.DNE(108,Le,2,2,"option",42),e.k0s()()()(),e.j41(109,"div",18)(110,"h4",19),e.EFF(111,"B. Sexual History"),e.k0s()(),e.j41(112,"div",13)(113,"h4",20),e.EFF(114,"History"),e.k0s(),e.j41(115,"div",21)(116,"div",22)(117,"h4",16),e.EFF(118,"Age at first intercourse"),e.k0s(),e.nrm(119,"input",47),e.k0s(),e.j41(120,"div",22)(121,"h4",16),e.EFF(122,"Number of sexual partner/s"),e.k0s(),e.nrm(123,"input",48),e.k0s(),e.j41(124,"div",22)(125,"h4",16),e.EFF(126,"Spouse/Partner/s"),e.k0s(),e.j41(127,"select",49),e.DNE(128,He,2,2,"option",42),e.k0s()()()(),e.j41(129,"div",13)(130,"h4",20),e.EFF(131,"STI History"),e.k0s(),e.j41(132,"div",21)(133,"div",22)(134,"h4",16),e.EFF(135,"Client"),e.k0s(),e.j41(136,"select",50),e.DNE(137,Ke,2,2,"option",42),e.k0s()(),e.j41(138,"div",51)(139,"h4",16),e.EFF(140,"Specify"),e.k0s(),e.nrm(141,"input",52),e.k0s(),e.j41(142,"div",22)(143,"h4",16),e.EFF(144,"Any of spouse/partner/s"),e.k0s(),e.j41(145,"select",53),e.DNE(146,ze,2,2,"option",42),e.k0s()(),e.j41(147,"div",51)(148,"h4",16),e.EFF(149,"Specify"),e.k0s(),e.nrm(150,"input",54),e.k0s()()(),e.j41(151,"div",18)(152,"h4",19),e.EFF(153,"C. Family and Social History"),e.k0s()(),e.j41(154,"div",13)(155,"div",21)(156,"div",22)(157,"h4",16),e.EFF(158,"Family history of cancer"),e.k0s(),e.j41(159,"select",55),e.DNE(160,Qe,2,2,"option",42),e.k0s()(),e.j41(161,"div",51)(162,"h4",16),e.EFF(163,"Specify"),e.k0s(),e.nrm(164,"input",56),e.k0s(),e.j41(165,"div",22)(166,"h4",16),e.EFF(167,"Smoking"),e.k0s(),e.j41(168,"select",57),e.DNE(169,We,2,2,"option",42),e.k0s()(),e.j41(170,"div",22)(171,"h4",16),e.EFF(172,"Year started"),e.k0s(),e.nrm(173,"input",17),e.k0s(),e.j41(174,"div",22)(175,"h4",16),e.EFF(176,"Number of cigarettes sticks/day"),e.k0s(),e.nrm(177,"input",17),e.k0s()()(),e.j41(178,"div",18)(179,"h4",19),e.EFF(180,"D. Medical History"),e.k0s()(),e.j41(181,"div",13)(182,"div",21)(183,"div",22)(184,"h4",16),e.EFF(185,"Current medication"),e.k0s(),e.j41(186,"select",58),e.DNE(187,Ze,2,2,"option",42),e.k0s()(),e.j41(188,"div",51)(189,"h4",16),e.EFF(190,"Specify"),e.k0s(),e.nrm(191,"input",59),e.k0s(),e.j41(192,"div",22)(193,"h4",16),e.EFF(194,"Allergies"),e.k0s(),e.j41(195,"select",60),e.DNE(196,et,2,2,"option",42),e.k0s()(),e.j41(197,"div",51)(198,"h4",16),e.EFF(199,"Specify"),e.k0s(),e.nrm(200,"input",61),e.k0s(),e.j41(201,"div",22)(202,"h4",16),e.EFF(203,"Abdominal surgery"),e.k0s(),e.j41(204,"select",62),e.DNE(205,tt,2,2,"option",42),e.k0s()(),e.j41(206,"div",51)(207,"h4",16),e.EFF(208,"Specify"),e.k0s(),e.nrm(209,"input",63),e.k0s()()()()),2&i){const t=e.XpG();e.R7$(84),e.Y8G("ngForOf",t.answer_yna),e.R7$(5),e.Y8G("ngForOf",t.answer_screening),e.R7$(5),e.Y8G("ngForOf",t.answer_screening),e.R7$(9),e.Y8G("ngForOf",t.answer_yna),e.R7$(5),e.Y8G("ngForOf",t.answer_yna),e.R7$(20),e.Y8G("ngForOf",t.circumcision),e.R7$(9),e.Y8G("ngForOf",t.answer_yn),e.R7$(9),e.Y8G("ngForOf",t.answer_yn),e.R7$(14),e.Y8G("ngForOf",t.answer_yn),e.R7$(9),e.Y8G("ngForOf",t.answer_yn),e.R7$(18),e.Y8G("ngForOf",t.answer_yn),e.R7$(9),e.Y8G("ngForOf",t.answer_yn),e.R7$(9),e.Y8G("ngForOf",t.answer_yn)}}function nt(i,o){1&i&&e.nrm(0,"div",12)}function st(i,o){if(1&i&&(e.j41(0,"option",64),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.JRh(t.desc)}}function ot(i,o){if(1&i&&(e.j41(0,"option",64),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.JRh(t.desc)}}function rt(i,o){if(1&i&&(e.j41(0,"div",12)(1,"div",13)(2,"div",65)(3,"div",15)(4,"h4",16),e.EFF(5,"VIA findings"),e.k0s(),e.j41(6,"select",66),e.DNE(7,st,2,2,"option",42),e.k0s()(),e.j41(8,"div",15)(9,"h4",16),e.EFF(10,"Pap smear findings"),e.k0s(),e.j41(11,"select",67),e.DNE(12,ot,2,2,"option",42),e.k0s()()()()()),2&i){const t=e.XpG();e.R7$(7),e.Y8G("ngForOf",t.answer_screening),e.R7$(5),e.Y8G("ngForOf",t.answer_screening)}}function at(i,o){1&i&&(e.j41(0,"div",12)(1,"div",13)(2,"div",65)(3,"div",68)(4,"h4",16),e.EFF(5,"Counseling"),e.k0s(),e.j41(6,"textarea",69),e.EFF(7,"\n            "),e.k0s()()()()())}function lt(i,o){1&i&&(e.j41(0,"div",12)(1,"div",13)(2,"div",65)(3,"div",68)(4,"h4",16),e.EFF(5,"Treatment and other care given"),e.k0s(),e.j41(6,"textarea",70),e.EFF(7,"\n            "),e.k0s()()()()())}function dt(i,o){1&i&&(e.j41(0,"div",12)(1,"div",13)(2,"div",65)(3,"div",68)(4,"h4",16),e.EFF(5,"Referral"),e.k0s(),e.j41(6,"textarea",71),e.EFF(7,"\n            "),e.k0s()()()()())}function ct(i,o){if(1&i&&e.nrm(0,"fa-icon",72),2&i){const t=e.XpG();e.Y8G("icon",t.faSave)}}function ut(i,o){if(1&i&&e.nrm(0,"fa-icon",73),2&i){const t=e.XpG();e.Y8G("icon",t.faSpinner)}}let Y=(()=>{class i{loadLibraries(){}onSubmit(){this.is_saving=!0}toggleModal(t){this.modals[t]=void 0!==this.modals[t]&&!this.modals[t]}constructor(t){this.http=t,this.faSpinner=m.z1G,this.faInfoCircle=m.iW_,this.faTimes=m.GRI,this.faSave=m.hSh,this.faChevronCircleDown=m.DqM,this.faChevronCircleUp=m.AeV,this.modals=[],this.casdtForm=Ve,this.is_saving=!1,this.size=[{code:"small",desc:"Small"},{code:"normal",desc:"Normal"},{code:"large",desc:"Large"}],this.shape=[{code:"pear",desc:"Pear Shaped"},{code:"horn",desc:"Horn Shaped"},{code:"heart",desc:"Heart Shaped"},{code:"double",desc:"Double"},{code:"tshaped",desc:"T-Shaped"},{code:"tipped",desc:"Tipped"}],this.position=[{code:"mid",desc:"Mid"},{code:"anteflexed",desc:"Anteflexed"},{code:"retroflexed",desc:"Retroflexed"},{code:"retroverted",desc:"Retroverted"},{code:"anteverted",desc:"Anteverted"}],this.circumcision=q,this.answer_yn=qe,this.answer_screening=De}ngOnInit(){console.log(this.casdtForm)}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(f.k))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-casdt"]],standalone:!1,decls:55,vars:40,consts:[[3,"ngSubmit","formGroup"],[1,"grid","grid-cols-12","item-start","flex-wrap","shadow-md","rounded-xl","mb-4","mt-4"],[1,"col-span-12","flex","justify-between","bg-blue-500","p-3","rounded-t-xl",3,"ngClass"],[1,"font-bold","text-white"],["type","button",1,"text-white",3,"click"],["size","lg",3,"icon"],["class","col-span-12",4,"ngIf"],[1,"grid","grid-cols-12","item-start","flex-wrap","shadow-md","rounded-xl","mb-4"],[1,"flex","justify-end","w-full"],["type","submit",1,"btn-save","px-10","disabled:bg-gray-300",3,"disabled"],["class","mr-3",3,"icon",4,"ngIf"],["class","mr-3","animation","spin",3,"icon",4,"ngIf"],[1,"col-span-12"],[1,"text-sm","col-span-12","px-5","mb-6","ml-5"],[1,"col-span-12","grid","grid-cols-12","gap-4","mt-4"],[1,"text-sm","col-span-6"],[1,"mb-1","font-semibold"],["name","children","formControlName","children","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],[1,"text-sm","col-span-12","px-5","mt-4"],[1,"font-bold","text-md","mt-2","mb-2","text-lg","text-blue-500"],[1,"mb-1","text-md","uppercase","font-bold"],[1,"col-span-12","grid","grid-cols-12","gap-4"],[1,"text-sm","col-span-4"],["name","menarche","formControlName","menarche",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","lmp","formControlName","lmp","type","date",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","aog","formControlName","aog","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","bleeding_pattern","formControlName","bleeding_pattern",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["value","R"],["value","I"],["name","pads","formControlName","pads","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],[1,"text-sm","col-span-12","px-5","mb-6","ml-5","mt-12"],["name","gravidity","formControlName","gravidity","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","parity","formControlName","parity","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],[1,"text-sm","col-span-3"],["name","full_term","formControlName","full_term","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","preterm","formControlName","preterm","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","abortion","formControlName","abortion","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","livebirths","formControlName","livebirths","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","first_preg","formControlName","first_preg","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","years","formControlName","years","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","months","formControlName","months","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","previous_screening","formControlName","previous_screening",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],[3,"value",4,"ngFor","ngForOf"],["name","via_result","formControlName","via_result",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","pap_smear","formControlName","pap_smear",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","vaginal_discharge","formControlName","vaginal_discharge",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","vaginal_bleeding","formControlName","vaginal_bleeding",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","first_intercourse","formControlName","first_intercourse","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","sexual_partners","formControlName","sexual_partners","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","spouse","formControlName","spouse",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","client","formControlName","client",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],[1,"text-sm","col-span-8"],["name","client_remarks","formControlName","client_remarks","type","text",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","any_spouse","formControlName","any_spouse",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","any_spouse_remarks","formControlName","any_spouse_remarks","type","text",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","cancer","formControlName","cancer",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","cancer_remarks","formControlName","cancer_remarks","type","text",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","smoking","formControlName","smoking",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","current_medication","formControlName","current_medication",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","medication_remarks","formControlName","medication_remarks","type","text",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","allergies","formControlName","allergies",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","allergies_remarks","formControlName","allergies_remarks","type","text",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","abdominal_surgery","formControlName","abdominal_surgery",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","abdominal_surgery_remarks","formControlName","abdominal_surgery_remarks","type","text",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],[3,"value"],[1,"col-span-12","grid","grid-cols-12","gap-4","mt-5"],["name","via_findings","formControlName","via_findings",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","pap_smear_findings","formControlName","pap_smear_findings",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],[1,"text-sm","col-span-12"],["name","counseling","formControlName","counseling","rows","4",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","treatment","formControlName","treatment","rows","4",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],["name","referral","formControlName","referral","rows","4",1,"text-sm","border","border-gray-200","p-2.5","rounded","bg-white","w-full"],[1,"mr-3",3,"icon"],["animation","spin",1,"mr-3",3,"icon"]],template:function(r,s){1&r&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return s.onSubmit()}),e.j41(1,"div",1)(2,"div",2)(3,"h4",3),e.EFF(4,"I. Personal Information"),e.k0s(),e.j41(5,"button",4),e.bIt("click",function(){return s.toggleModal("I")}),e.nrm(6,"fa-icon",5),e.k0s()(),e.DNE(7,Oe,7,0,"div",6),e.k0s(),e.j41(8,"div",7)(9,"div",2)(10,"h4",3),e.EFF(11,"II. History Taking"),e.k0s(),e.j41(12,"button",4),e.bIt("click",function(){return s.toggleModal("II")}),e.nrm(13,"fa-icon",5),e.k0s()(),e.DNE(14,it,210,13,"div",6),e.k0s(),e.j41(15,"div",7)(16,"div",2)(17,"h4",3),e.EFF(18,"III. Physical Examination"),e.k0s(),e.j41(19,"button",4),e.bIt("click",function(){return s.toggleModal("III")}),e.nrm(20,"fa-icon",5),e.k0s()(),e.DNE(21,nt,1,0,"div",6),e.k0s(),e.j41(22,"div",7)(23,"div",2)(24,"h4",3),e.EFF(25,"IV. Screening Results"),e.k0s(),e.j41(26,"button",4),e.bIt("click",function(){return s.toggleModal("IV")}),e.nrm(27,"fa-icon",5),e.k0s()(),e.DNE(28,rt,13,2,"div",6),e.k0s(),e.j41(29,"div",7)(30,"div",2)(31,"h4",3),e.EFF(32,"V. Counseling Given"),e.k0s(),e.j41(33,"button",4),e.bIt("click",function(){return s.toggleModal("V")}),e.nrm(34,"fa-icon",5),e.k0s()(),e.DNE(35,at,8,0,"div",6),e.k0s(),e.j41(36,"div",7)(37,"div",2)(38,"h4",3),e.EFF(39,"VI. Treatment and Other Care Given"),e.k0s(),e.j41(40,"button",4),e.bIt("click",function(){return s.toggleModal("VI")}),e.nrm(41,"fa-icon",5),e.k0s()(),e.DNE(42,lt,8,0,"div",6),e.k0s(),e.j41(43,"div",7)(44,"div",2)(45,"h4",3),e.EFF(46,"VII. Referral"),e.k0s(),e.j41(47,"button",4),e.bIt("click",function(){return s.toggleModal("VII")}),e.nrm(48,"fa-icon",5),e.k0s()(),e.DNE(49,dt,8,0,"div",6),e.k0s(),e.j41(50,"div",8)(51,"button",9),e.DNE(52,ct,1,1,"fa-icon",10)(53,ut,1,1,"fa-icon",11),e.EFF(54),e.k0s()()()),2&r&&(e.Y8G("formGroup",s.casdtForm),e.R7$(2),e.Y8G("ngClass",e.eq3(26,g,void 0!==s.modals.I&&!s.modals.I)),e.R7$(4),e.Y8G("icon",void 0===s.modals.I||s.modals.I?s.faChevronCircleUp:s.faChevronCircleDown),e.R7$(),e.Y8G("ngIf",void 0===s.modals.I||s.modals.I),e.R7$(2),e.Y8G("ngClass",e.eq3(28,g,void 0!==s.modals.II&&!s.modals.II)),e.R7$(4),e.Y8G("icon",void 0===s.modals.II||s.modals.II?s.faChevronCircleUp:s.faChevronCircleDown),e.R7$(),e.Y8G("ngIf",void 0===s.modals.II||s.modals.II),e.R7$(2),e.Y8G("ngClass",e.eq3(30,g,void 0!==s.modals.III&&!s.modals.III)),e.R7$(4),e.Y8G("icon",void 0===s.modals.III||s.modals.III?s.faChevronCircleUp:s.faChevronCircleDown),e.R7$(),e.Y8G("ngIf",void 0===s.modals.III||s.modals.III),e.R7$(2),e.Y8G("ngClass",e.eq3(32,g,void 0!==s.modals.IV&&!s.modals.IV)),e.R7$(4),e.Y8G("icon",void 0===s.modals.IV||s.modals.IV?s.faChevronCircleUp:s.faChevronCircleDown),e.R7$(),e.Y8G("ngIf",void 0===s.modals.IV||s.modals.IV),e.R7$(2),e.Y8G("ngClass",e.eq3(34,g,void 0!==s.modals.V&&!s.modals.V)),e.R7$(4),e.Y8G("icon",void 0===s.modals.V||s.modals.V?s.faChevronCircleUp:s.faChevronCircleDown),e.R7$(),e.Y8G("ngIf",void 0===s.modals.V||s.modals.V),e.R7$(2),e.Y8G("ngClass",e.eq3(36,g,void 0!==s.modals.VI&&!s.modals.VI)),e.R7$(4),e.Y8G("icon",void 0===s.modals.VI||s.modals.VI?s.faChevronCircleUp:s.faChevronCircleDown),e.R7$(),e.Y8G("ngIf",void 0===s.modals.VI||s.modals.VI),e.R7$(2),e.Y8G("ngClass",e.eq3(38,g,void 0!==s.modals.VII&&!s.modals.VII)),e.R7$(4),e.Y8G("icon",void 0===s.modals.VII||s.modals.VII?s.faChevronCircleUp:s.faChevronCircleDown),e.R7$(),e.Y8G("ngIf",void 0===s.modals.VII||s.modals.VII),e.R7$(2),e.Y8G("disabled",s.is_saving),e.R7$(),e.Y8G("ngIf",!s.is_saving),e.R7$(),e.Y8G("ngIf",s.is_saving),e.R7$(),e.SpI(" ",s.is_saving?"Saving":"Save"," "))},dependencies:[c.YU,c.Sq,c.bT,d.aY,n.qT,n.xH,n.y7,n.me,n.Q0,n.wz,n.BC,n.cb,n.j4,n.JD],encapsulation:2})}}return i})();const _t=new n.gE({consult_ncd_risk_id:new n.MJ(""),patient_ncd_id:new n.MJ(""),patient_id:new n.MJ(""),date_taken:new n.MJ(""),fbs:new n.MJ(""),rbs:new n.MJ(""),raised_blood_glucose:new n.MJ("")}),mt=new n.gE({consult_ncd_risk_id:new n.MJ(""),patient_ncd_id:new n.MJ(""),patient_id:new n.MJ(""),date_taken:new n.MJ(""),total_cholesterol:new n.MJ(""),raised_blood_lipid:new n.MJ("")}),pt=new n.gE({consult_ncd_risk_id:new n.MJ(""),patient_ncd_id:new n.MJ(""),patient_id:new n.MJ(""),date_taken:new n.MJ(""),ketone:new n.MJ(""),presence_of_urine_ketone:new n.MJ("")}),ft=new n.gE({consult_ncd_risk_id:new n.MJ(""),patient_ncd_id:new n.MJ(""),patient_id:new n.MJ(""),date_taken:new n.MJ(""),protein:new n.MJ(""),presence_of_urine_protein:new n.MJ("")}),C=i=>({"bg-red-200 border border-red-300":i});function ht(i,o){1&i&&(e.j41(0,"div")(1,"li"),e.EFF(2,"FBS >= 126 mg/dl"),e.k0s(),e.j41(3,"li"),e.EFF(4,"RBS >= 200 mg/dl"),e.k0s()())}function gt(i,o){1&i&&(e.j41(0,"div")(1,"li"),e.EFF(2,"FBS < 126 mg/dl"),e.k0s(),e.j41(3,"li"),e.EFF(4,"RBS < 200 mg/dl"),e.k0s()())}function bt(i,o){if(1&i&&(e.j41(0,"div",22)(1,"h4",5),e.EFF(2),e.k0s(),e.j41(3,"ul",23),e.DNE(4,ht,5,0,"div",24)(5,gt,5,0,"div",24),e.k0s(),e.nrm(6,"input",25),e.k0s()),2&i){const t=e.XpG();e.Y8G("ngClass",e.eq3(4,C,!0===t.glucoseForm.value.raised_blood_glucose)),e.R7$(2),e.JRh(!0===t.glucoseForm.value.raised_blood_glucose?"Raised blood glucose":"Normal blood glucose"),e.R7$(2),e.Y8G("ngIf",!0===t.glucoseForm.value.raised_blood_glucose),e.R7$(),e.Y8G("ngIf",!1===t.glucoseForm.value.raised_blood_glucose)}}function kt(i,o){if(1&i&&e.nrm(0,"fa-icon",26),2&i){const t=e.XpG();e.Y8G("icon",t.faSpinner)}}function vt(i,o){if(1&i&&e.nrm(0,"fa-icon",27),2&i){const t=e.XpG();e.Y8G("icon",t.faSave)}}function Ft(i,o){1&i&&(e.j41(0,"div")(1,"li"),e.EFF(2,"Cholesterol >= 200mg/100ml"),e.k0s()())}function yt(i,o){1&i&&(e.j41(0,"div")(1,"li"),e.EFF(2,"Cholesterol < 200mg/100ml"),e.k0s()())}function wt(i,o){if(1&i&&(e.j41(0,"div",22)(1,"h4",5),e.EFF(2),e.k0s(),e.j41(3,"ul",23),e.DNE(4,Ft,3,0,"div",24)(5,yt,3,0,"div",24),e.k0s(),e.nrm(6,"input",28),e.k0s()),2&i){const t=e.XpG();e.Y8G("ngClass",e.eq3(4,C,!0===t.bloodLipidForm.value.raised_blood_lipid)),e.R7$(2),e.JRh(!0===t.bloodLipidForm.value.raised_blood_lipid?"Raised blood lipids":"Normal blood lipids"),e.R7$(2),e.Y8G("ngIf",!0===t.bloodLipidForm.value.raised_blood_lipid),e.R7$(),e.Y8G("ngIf",!1===t.bloodLipidForm.value.raised_blood_lipid)}}function Rt(i,o){if(1&i&&e.nrm(0,"fa-icon",26),2&i){const t=e.XpG();e.Y8G("icon",t.faSpinner)}}function Ct(i,o){if(1&i&&e.nrm(0,"fa-icon",27),2&i){const t=e.XpG();e.Y8G("icon",t.faSave)}}function xt(i,o){if(1&i&&(e.j41(0,"option",29),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.desc)}}function Et(i,o){if(1&i&&(e.j41(0,"div",22)(1,"h4",5),e.EFF(2),e.k0s(),e.nrm(3,"input",30),e.k0s()),2&i){const t=e.XpG();e.Y8G("ngClass",e.eq3(2,C,!0===t.urineKetonesForm.value.presence_of_urine_ketone)),e.R7$(2),e.JRh(!0===t.urineKetonesForm.value.presence_of_urine_ketone?"Traces or amount of urine ketone was found":"No traces or amount of urine ketone was found")}}function jt(i,o){if(1&i&&e.nrm(0,"fa-icon",26),2&i){const t=e.XpG();e.Y8G("icon",t.faSpinner)}}function Gt(i,o){if(1&i&&e.nrm(0,"fa-icon",27),2&i){const t=e.XpG();e.Y8G("icon",t.faSave)}}function It(i,o){if(1&i&&(e.j41(0,"option",29),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.desc)}}function Nt(i,o){if(1&i&&(e.j41(0,"div",22)(1,"h4",5),e.EFF(2),e.k0s(),e.nrm(3,"input",31),e.k0s()),2&i){const t=e.XpG();e.Y8G("ngClass",e.eq3(2,C,!0===t.urineProteinForm.value.presence_of_urine_protein)),e.R7$(2),e.JRh(!0===t.urineProteinForm.value.presence_of_urine_protein?"Traces or amount of urine protein was found":"No traces or amount of urine protein was found")}}function Mt(i,o){if(1&i&&e.nrm(0,"fa-icon",26),2&i){const t=e.XpG();e.Y8G("icon",t.faSpinner)}}function $t(i,o){if(1&i&&e.nrm(0,"fa-icon",27),2&i){const t=e.XpG();e.Y8G("icon",t.faSave)}}let Yt=(()=>{class i{loadLibraries(){this.http.get("libraries/ncd-risk-screening-urine-ketones").subscribe({next:t=>this.ketones_list=t.data,error:t=>console.log(t)}),this.http.get("libraries/ncd-risk-screening-urine-protein").subscribe({next:t=>this.protein_list=t.data,error:t=>console.log(t)})}loadScreenings(){this.consult_details&&(this.consult_details.riskScreeningGlucose&&(this.consult_details.riskScreeningGlucose.date_taken=(0,c.Yq)(this.consult_details.riskScreeningGlucose.date_taken,"yyyy-MM-dd","en","Asia/Manila"),this.glucoseForm.patchValue({...this.consult_details.riskScreeningGlucose}),this.glucoseForm.addControl("id",this.formBuilder.control(this.consult_details.riskScreeningGlucose.id)),this.raisedGlucose()),this.consult_details.riskScreeningLipid&&(this.consult_details.riskScreeningLipid.date_taken=(0,c.Yq)(this.consult_details.riskScreeningLipid.date_taken,"yyyy-MM-dd","en","Asia/Manila"),this.bloodLipidForm.patchValue({...this.consult_details.riskScreeningLipid}),this.bloodLipidForm.addControl("id",this.formBuilder.control(this.consult_details.riskScreeningLipid.id)),this.raisedLipids()),this.consult_details.riskScreeningKetones&&(this.consult_details.riskScreeningKetones.date_taken=(0,c.Yq)(this.consult_details.riskScreeningKetones.date_taken,"yyyy-MM-dd","en","Asia/Manila"),this.urineKetonesForm.patchValue({...this.consult_details.riskScreeningKetones}),this.urineKetonesForm.addControl("id",this.formBuilder.control(this.consult_details.riskScreeningKetones.id)),this.urineKetone()),this.consult_details.riskScreeningProtein&&(this.consult_details.riskScreeningProtein.date_taken=(0,c.Yq)(this.consult_details.riskScreeningProtein.date_taken,"yyyy-MM-dd","en","Asia/Manila"),this.urineProteinForm.patchValue({...this.consult_details.riskScreeningProtein}),this.urineProteinForm.addControl("id",this.formBuilder.control(this.consult_details.riskScreeningProtein.id)),this.urineProtein()))}raisedGlucose(){(this.glucoseForm.value.fbs>0||this.glucoseForm.value.rbs>0)&&this.glucoseForm.patchValue(this.glucoseForm.value.fbs>=126||this.glucoseForm.value.rbs>=200?{raised_blood_glucose:!0}:{raised_blood_glucose:!1})}raisedLipids(){this.bloodLipidForm.value.total_cholesterol>0&&this.bloodLipidForm.patchValue(this.bloodLipidForm.value.total_cholesterol>=5.1?{raised_blood_lipid:!0}:{raised_blood_lipid:!1})}urineKetone(){this.urineKetonesForm.value.ketone&&this.urineKetonesForm.patchValue("1"!==this.urineKetonesForm.value.ketone?{presence_of_urine_ketone:!0}:{presence_of_urine_ketone:!1})}urineProtein(){this.urineProteinForm.value.protein&&this.urineProteinForm.patchValue("1"!=this.urineProteinForm.value.protein?{presence_of_urine_protein:!0}:{presence_of_urine_protein:!1})}onSubmit(t,r){if(this.is_saving[t]=!0,this[t+"Form"].valid){let s=this.getURL(t);this.http.post(s,this[t+"Form"].value).subscribe({next:a=>{this.is_saving[t]=!1,this.toastr.success("Recorded successfully!","Risk screening")},error:a=>console.log(a)})}}getURL(t){switch(t){case"glucose":return this.urls[0].url;case"bloodLipid":return this.urls[1].url;case"urineKetones":return this.urls[2].url;case"urineProtein":return this.urls[3].url}}constructor(t,r,s){this.http=t,this.formBuilder=r,this.toastr=s,this.faInfoCircle=m.iW_,this.faSave=p.hSh,this.faSpinner=m.z1G,this.is_saving={glucose:!1,bloodLipid:!1,urineKetones:!1,urineProtein:!1},this.glucoseForm=_t,this.bloodLipidForm=mt,this.urineKetonesForm=pt,this.urineProteinForm=ft,this.urls=[{group:"glucoseForm",url:"non-communicable-disease/risk-screening-blood-glucose"},{group:"bloodLipidForm",url:"non-communicable-disease/risk-screening-blood-lipid"},{group:"urineKetonesForm",url:"non-communicable-disease/risk-screening-urine-ketones"},{group:"urineProteinForm",url:"non-communicable-disease/risk-screening-urine-protein"}]}createForm(){let t=this.consult_details.id,r=this.consult_details.patient_ncd_id;this.glucoseForm=this.formBuilder.nonNullable.group({consult_ncd_risk_id:[t,n.k0.required],patient_ncd_id:[r,n.k0.required],patient_id:[this.patient_id],date_taken:[null,n.k0.required],fbs:[null],rbs:[null],raised_blood_glucose:[null,n.k0.required]}),this.bloodLipidForm=this.formBuilder.nonNullable.group({consult_ncd_risk_id:[t,n.k0.required],patient_ncd_id:[r,n.k0.required],patient_id:[this.patient_id],date_taken:[null,n.k0.required],total_cholesterol:[null,n.k0.required],raised_blood_lipid:[null,n.k0.required]}),this.urineKetonesForm=this.formBuilder.nonNullable.group({consult_ncd_risk_id:[t,n.k0.required],patient_ncd_id:[r,n.k0.required],patient_id:[this.patient_id],date_taken:[null,n.k0.required],ketone:[null,n.k0.required],presence_of_urine_ketone:[null,n.k0.required]}),this.urineProteinForm=this.formBuilder.nonNullable.group({consult_ncd_risk_id:[t,n.k0.required],patient_ncd_id:[r,n.k0.required],patient_id:[this.patient_id],date_taken:[null,n.k0.required],protein:[null,n.k0.required],presence_of_urine_protein:[null,n.k0.required]})}ngOnInit(){this.loadLibraries()}ngOnChanges(t){this.consult_details&&this.consult_details.assessment_date&&(this.createForm(),this.loadScreenings())}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(f.k),e.rXU(n.ok),e.rXU(v.tw))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-risk-screening"]],inputs:{patient_id:"patient_id",consult_details:"consult_details"},standalone:!1,features:[e.OA$],decls:82,vars:26,consts:[[1,"grid","grid-cols-12","item-start","flex-wrap","shadow-md","rounded-xl","mb-8","mt-8","overflow-y-auto"],[1,"col-span-12","row-start-1","flex","bg-blue-500","px-5","py-3","rounded-tl","rounded-tr"],[1,"font-bold","text-white","text-md","mt-2","mb-2"],[1,"col-span-12","grid","grid-cols-12","gap-x-5","px-5",3,"ngSubmit","formGroup"],[1,"text-sm","col-span-4","mt-4","mb-4"],[1,"mb-2"],["name","date_taken","formControlName","date_taken","type","date","placeholder","mm/dd/yyyy",1,"text-sm","border-gray-200","border","p-2.5","rounded-md","w-full"],["name","fbs","formControlName","fbs","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","w-full",3,"input"],["name","rbs","formControlName","rbs","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","w-full",3,"input"],["class","text-sm col-span-12 mb-6 p-3 rounded-lg",3,"ngClass",4,"ngIf"],[1,"col-span-12","flex","justify-end","border-t","border-slate-200","pt-5"],["type","submit",1,"btn-save","px-10","mr-5","mb-5","disabled:bg-gray-400",3,"disabled"],["class","mr-2","animation","spin",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],[1,"col-span-12","flex","bg-blue-500","px-5","py-3","rounded-tl","rounded-tr"],[1,"relative","text-sm","col-span-6","mt-4","mb-4"],[1,"text-sm","col-span-6","mt-4","mb-4"],["name","total_cholesterol","formControlName","total_cholesterol","type","number",1,"text-sm","border","border-gray-200","p-2.5","rounded","w-full",3,"input"],["name","ketone","formControlName","ketone",1,"text-sm","border","border-gray-200","p-2.5","rounded","w-full",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"grid","grid-cols-12","item-start","flex-wrap","shadow-md","rounded-xl","mb-4","mt-8","overflow-y-auto"],["name","protein","formControlName","protein",1,"text-sm","border","border-gray-200","p-2.5","rounded","w-full",3,"change"],[1,"text-sm","col-span-12","mb-6","p-3","rounded-lg",3,"ngClass"],[1,"list-disc","pl-10"],[4,"ngIf"],["hidden","","name","raised_blood_glucose","formControlName","raised_blood_glucose","type","text","disabled","",1,"text-sm","border","border-gray-200","p-2.5","rounded","w-full","disabled:bg-gray-300"],["animation","spin",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"],["hidden","","name","raised_blood_lipid","formControlName","raised_blood_lipid","type","text","disabled","",1,"text-sm","border","border-gray-200","p-2.5","rounded","w-full","disabled:bg-gray-300"],[3,"value"],["hidden","","name","presence_of_urine_ketone","formControlName","presence_of_urine_ketone","type","text","disabled","",1,"text-sm","border","border-gray-200","p-2.5","rounded","w-full","disabled:bg-gray-300"],["hidden","","name","presence_of_urine_protein","formControlName","presence_of_urine_protein","type","text","disabled","",1,"text-sm","border","border-gray-200","p-2.5","rounded","w-full","disabled:bg-gray-300"]],template:function(r,s){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"h4",2),e.EFF(3,"Blood Glucose Test"),e.k0s()(),e.j41(4,"form",3),e.bIt("ngSubmit",function(){return s.onSubmit("glucose",s.glucoseForm.value)}),e.j41(5,"div",4)(6,"h4",5),e.EFF(7,"Date Taken"),e.k0s(),e.nrm(8,"input",6),e.k0s(),e.j41(9,"div",4)(10,"h4",5),e.EFF(11,"If atleast 8 hours, record FBS (mg/dl)"),e.k0s(),e.j41(12,"input",7),e.bIt("input",function(){return s.raisedGlucose()}),e.k0s()(),e.j41(13,"div",4)(14,"h4",5),e.EFF(15,"Record RBS (mg/dl)"),e.k0s(),e.j41(16,"input",8),e.bIt("input",function(){return s.raisedGlucose()}),e.k0s()(),e.DNE(17,bt,7,6,"div",9),e.j41(18,"div",10)(19,"button",11),e.DNE(20,kt,1,1,"fa-icon",12)(21,vt,1,1,"fa-icon",13),e.EFF(22),e.k0s()()()(),e.j41(23,"div",0)(24,"div",14)(25,"h4",2),e.EFF(26,"Blood Lipid Test"),e.k0s()(),e.j41(27,"form",3),e.bIt("ngSubmit",function(){return s.onSubmit("bloodLipid",s.bloodLipidForm.value)}),e.j41(28,"div",15)(29,"h4",5),e.EFF(30,"Date Taken"),e.k0s(),e.nrm(31,"input",6),e.k0s(),e.j41(32,"div",16)(33,"h4",5),e.EFF(34,"Total Cholesterol (mmol/l)"),e.k0s(),e.j41(35,"input",17),e.bIt("input",function(){return s.raisedLipids()}),e.k0s()(),e.DNE(36,wt,7,6,"div",9),e.j41(37,"div",10)(38,"button",11),e.DNE(39,Rt,1,1,"fa-icon",12)(40,Ct,1,1,"fa-icon",13),e.EFF(41),e.k0s()()()(),e.j41(42,"div",0)(43,"div",14)(44,"h4",2),e.EFF(45,"Urine Test for Ketones"),e.k0s()(),e.j41(46,"form",3),e.bIt("ngSubmit",function(){return s.onSubmit("urineKetones",s.urineKetonesForm.value)}),e.j41(47,"div",15)(48,"h4",5),e.EFF(49,"Date Taken"),e.k0s(),e.nrm(50,"input",6),e.k0s(),e.j41(51,"div",16)(52,"h4",5),e.EFF(53,"Urine Ketone"),e.k0s(),e.j41(54,"select",18),e.bIt("change",function(){return s.urineKetone()}),e.DNE(55,xt,2,2,"option",19),e.k0s()(),e.DNE(56,Et,4,4,"div",9),e.j41(57,"div",10)(58,"button",11),e.DNE(59,jt,1,1,"fa-icon",12)(60,Gt,1,1,"fa-icon",13),e.EFF(61),e.k0s()()()(),e.j41(62,"div",20)(63,"div",14)(64,"h4",2),e.EFF(65,"Urine Test for Protein"),e.k0s()(),e.j41(66,"form",3),e.bIt("ngSubmit",function(){return s.onSubmit("urineProtein",s.urineProteinForm.value)}),e.j41(67,"div",15)(68,"h4",5),e.EFF(69,"Date Taken"),e.k0s(),e.nrm(70,"input",6),e.k0s(),e.j41(71,"div",16)(72,"h4",5),e.EFF(73,"Urine Protein"),e.k0s(),e.j41(74,"select",21),e.bIt("change",function(){return s.urineProtein()}),e.DNE(75,It,2,2,"option",19),e.k0s()(),e.DNE(76,Nt,4,4,"div",9),e.j41(77,"div",10)(78,"button",11),e.DNE(79,Mt,1,1,"fa-icon",12)(80,$t,1,1,"fa-icon",13),e.EFF(81),e.k0s()()()()),2&r&&(e.R7$(4),e.Y8G("formGroup",s.glucoseForm),e.R7$(13),e.Y8G("ngIf",s.glucoseForm.value.raised_blood_glucose),e.R7$(2),e.Y8G("disabled",s.glucoseForm.invalid||!s.glucoseForm.value.rbs&&!s.glucoseForm.value.fbs||s.is_saving.glucose),e.R7$(),e.Y8G("ngIf",s.is_saving.glucose),e.R7$(),e.Y8G("ngIf",!s.is_saving.glucose),e.R7$(),e.SpI(" ",s.is_saving.glucose?"Saving":s.glucoseForm.value.id?"Update":"Save"," "),e.R7$(5),e.Y8G("formGroup",s.bloodLipidForm),e.R7$(9),e.Y8G("ngIf",s.bloodLipidForm.value.raised_blood_lipid),e.R7$(2),e.Y8G("disabled",s.bloodLipidForm.invalid||s.is_saving.bloodLipid),e.R7$(),e.Y8G("ngIf",s.is_saving.bloodLipid),e.R7$(),e.Y8G("ngIf",!s.is_saving.bloodLipid),e.R7$(),e.SpI(" ",s.is_saving.bloodLipid?"Saving":s.bloodLipidForm.value.id?"Update":"Save"," "),e.R7$(5),e.Y8G("formGroup",s.urineKetonesForm),e.R7$(9),e.Y8G("ngForOf",s.ketones_list),e.R7$(),e.Y8G("ngIf",s.urineKetonesForm.value.presence_of_urine_ketone),e.R7$(2),e.Y8G("disabled",s.urineKetonesForm.invalid||s.is_saving.urineKetones),e.R7$(),e.Y8G("ngIf",s.is_saving.urineKetones),e.R7$(),e.Y8G("ngIf",!s.is_saving.urineKetones),e.R7$(),e.SpI(" ",s.is_saving.urineKetones?"Saving":s.urineKetonesForm.value.id?"Update":"Save"," "),e.R7$(5),e.Y8G("formGroup",s.urineProteinForm),e.R7$(9),e.Y8G("ngForOf",s.protein_list),e.R7$(),e.Y8G("ngIf",s.urineProteinForm.value.presence_of_urine_protein),e.R7$(2),e.Y8G("disabled",s.urineProteinForm.invalid||s.is_saving.urineProtein),e.R7$(),e.Y8G("ngIf",s.is_saving.urineProtein),e.R7$(),e.Y8G("ngIf",!s.is_saving.urineProtein),e.R7$(),e.SpI(" ",s.is_saving.urineProtein?"Saving":s.urineProteinForm.value.id?"Update":"Save"," "))},dependencies:[c.YU,c.Sq,c.bT,d.aY,n.qT,n.xH,n.y7,n.me,n.Q0,n.wz,n.BC,n.cb,n.j4,n.JD],encapsulation:2})}}return i})();var St=u(7468);const Jt=()=>({standalone:!0});function At(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",37)(1,"input",38),e.mxI("ngModelChange",function(s){const a=e.eBV(t).$implicit,l=e.XpG();return e.DH7(l.complaints[a.code],s)||(l.complaints[a.code]=s),e.Njj(s)}),e.k0s(),e.j41(2,"label",39),e.EFF(3),e.k0s()()}if(2&i){const t=o.$implicit,r=e.XpG();e.R7$(),e.Y8G("name",t.code),e.R50("ngModel",r.complaints[t.code]),e.Y8G("ngModelOptions",e.lJ4(6,Jt)),e.BMQ("id",t.code),e.R7$(),e.BMQ("for",t.code),e.R7$(),e.JRh(t.desc)}}function qt(i,o){if(1&i&&(e.j41(0,"option",40),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.SpI(" ",t.desc," ")}}function Dt(i,o){if(1&i&&(e.j41(0,"option",41),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.SpI(" ",t.desc," ")}}function Vt(i,o){if(1&i&&(e.j41(0,"option",41),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.SpI(" ",t.desc," ")}}function Ot(i,o){if(1&i&&(e.j41(0,"option",41),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.SpI(" ",t.desc," ")}}function Pt(i,o){if(1&i&&(e.j41(0,"option",41),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.SpI(" ",t.desc," ")}}function Xt(i,o){if(1&i&&(e.j41(0,"option",42),e.EFF(1),e.k0s()),2&i){const t=o.$implicit;e.Y8G("value",t.code),e.R7$(),e.SpI(" ",t.desc," ")}}function Bt(i,o){if(1&i&&e.nrm(0,"fa-icon",43),2&i){const t=e.XpG();e.Y8G("icon",t.faSave)}}function Ut(i,o){if(1&i&&e.nrm(0,"fa-icon",44),2&i){const t=e.XpG();e.Y8G("icon",t.faSpinner)}}let S=(()=>{class i{onSubmit(){this.is_saving=!0;let t=[];Object.entries(this.complaints).forEach(([r,s],a)=>{s&&t.push({eye_complaint:r})}),this.casdt2Form.patchValue({complaint:t}),console.log(this.casdt2Form),this.casdt2Form.valid&&this.http.post("non-communicable-disease/risk-casdt2",this.casdt2Form.value).subscribe({next:()=>{this.toastr.success("Recorded successfully!","Casdt2"),this.is_saving=!1},error:r=>{this.http.showError(r.error.message,"Casdt2")}})}createForm(){this.casdt2Form=this.formBuilder.nonNullable.group({id:[""],consult_ncd_risk_id:[this.consult_details.id,[n.k0.required]],patient_ncd_id:[this.consult_details.patient_ncd_id,[n.k0.required]],consult_id:[this.consult_details.consult_id,[n.k0.required]],patient_id:[this.consult_details.patient_id,[n.k0.required]],eye_complaint:[null],complaint:[null],eye_refer:[null],unaided:[null,n.k0.required],pinhole:[null,n.k0.required],improved:[null,n.k0.required],aided:[null,n.k0.required],eye_refer_prof:[null]}),this.consult_details.riskCasdt2&&this.casdt2Form.patchValue({...this.consult_details.riskCasdt2[0]}),this.consult_details&&this.consult_details.eye_complaints.length>0&&Object.entries(this.consult_details.eye_complaints).forEach(([t,r],s)=>{this.complaints[r.eye_complaint]=!0}),console.log(this.casdt2Form.value)}lodFormLibraries(){const t=this.http.get("libraries/ncd-eye-complaint"),r=this.http.get("libraries/ncd-eye-refer"),s=this.http.get("libraries/ncd-eye-vision-screen"),a=this.http.get("libraries/ncd-eye-refer-prof");(0,St.p)([t,r,s,a]).subscribe({next:([l,_,y,x])=>{this.eye_complaints=l.data,this.eye_refer=_.data,this.eye_vision_screen=y.data,this.eye_refer_prof=x.data,this.show_form=!0,this.createForm()},error:l=>{this.http.showError(l.error.message,"Casdt2 Library")}})}constructor(t,r,s){this.http=t,this.toastr=r,this.formBuilder=s,this.casdt2Form=function Tt(){return new n.gE({id:new n.MJ(null),consult_ncd_risk_id:new n.MJ(null),patient_ncd_id:new n.MJ(null),patient_id:new n.MJ(null),consult_id:new n.MJ(null),complaint:new n.MJ(null),eye_complaint:new n.MJ(null),eye_refer:new n.MJ(null),unaided:new n.MJ(null),pinhole:new n.MJ(null),improved:new n.MJ(null),aided:new n.MJ(null),eye_refer_prof:new n.MJ(null)})}(),this.faSave=p.hSh,this.faSpinner=m.z1G,this.faInfoCircle=m.iW_,this.show_form=!1,this.eye_complaints=[],this.eye_refer=[],this.complaints=[],this.is_saving=!1}ngOnInit(){console.log(this.consult_details),this.lodFormLibraries()}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(f.k),e.rXU(v.tw),e.rXU(n.ok))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-casdt2"]],inputs:{patient_id:"patient_id",consult_details:"consult_details",vaccine_details:"vaccine_details"},standalone:!1,decls:66,vars:13,consts:[[3,"ngSubmit","formGroup"],[1,"grid","grid-cols-12","flex","item-start","flex-wrap","shadow-md","rounded-xl","mb-8","mt-8","overflow-y-auto"],[1,"col-span-12","flex","bg-blue-500","px-5","py-3","rounded-tl","rounded-tr"],[1,"font-bold","text-white","text-md","mt-2","mb-2"],[1,""],[1,"peer","text-white","hover:text-white","z-50","px-2",3,"icon"],[1,"absolute","text-sm","bg-gradient-to-b","from-stone-500","to-gray-400","p-2","rounded","border","border-gray-500","text-white","drop-shadow-lg","opacity-90","border-check","z-50","w-60","invisible","peer-hover:visible"],[1,"font-bold","drop-shadow-lg"],[1,"font-light","drop-shadow-lg"],[1,"col-start-1","col-span-12","px-5","mt-4","mb-6"],[1,"font-bold"],["class","text-sm col-span-4 w-full px-5 mb-6 select-none",4,"ngFor","ngForOf"],[1,"text-sm","col-start-1","col-span-12","w-full","px-5","mt-2","mb-6"],[1,"mb-2","font-semibold"],["name","eye_refer","formControlName","eye_refer","appendTo","body",1,"text-sm","bg-white","border","border-gray-200","p-2.5","rounded","w-full"],["ng-value","vision.desc",3,"selected","value",4,"ngFor","ngForOf"],[1,"col-start-1","col-span-12","row-start-1","border-b-2","border-gray-300","mt-2","mb-2"],[1,"grid","grid-cols-12","item-start","flex-wrap","shadow-md","rounded-xl","mb-8","mt-8"],[1,"col-span-12","row-start-1","flex","bg-blue-500","px-5","py-3","rounded-tl","rounded-tr"],[1,"col-start-1","col-span-12","row-start-2","px-5","mt-4","mb-4"],[1,"text-sm","col-start-1","col-span-3","w-full","row-start-3","px-5","mt-2","mb-4"],[1,"mb-2"],["name","unaided","formControlName","unaided",1,"text-sm","bg-white","border","border-gray-200","p-2.5","rounded","w-full"],["ng-value","vision.desc",3,"value",4,"ngFor","ngForOf"],[1,"text-sm","col-start-4","col-span-3","w-full","row-start-3","px-5","mt-2","mb-4"],["name","pinhole","formControlName","pinhole",1,"text-sm","bg-white","border","border-gray-200","p-2.5","rounded","w-full"],[1,"text-sm","col-start-7","col-span-3","w-full","row-start-3","px-5","mt-2","mb-4"],["name","improved","formControlName","improved",1,"text-sm","bg-white","border","border-gray-200","p-2.5","rounded","w-full"],[1,"text-sm","col-start-10","col-span-3","w-full","row-start-3","px-5","mt-2","mb-4"],["name","aided","formControlName","aided",1,"text-sm","bg-white","border","border-gray-200","p-2.5","rounded","w-full"],[1,"text-sm","col-start-1","col-span-12","w-full","row-start-4","px-5","mt-2","mb-6"],["name","eye_refer_prof","formControlName","eye_refer_prof",1,"text-sm","bg-white","border","border-gray-200","p-2.5","rounded","w-full"],["ng-value","refers.desc",3,"selected","value",4,"ngFor","ngForOf"],[1,"col-span-12","flex","justify-center","mb-5"],["type","submit","name","add-btn",1,"btn-save","px-10"],[3,"icon",4,"ngIf"],["animation","spin",3,"icon",4,"ngIf"],[1,"text-sm","col-span-4","w-full","px-5","mb-6","select-none"],["type","checkbox",1,"input-checkbox","h-4","w-4","border-gray-400","text-blue-500",3,"ngModelChange","name","ngModel","ngModelOptions"],[1,"ml-1","align-middle"],["ng-value","vision.desc",3,"selected","value"],["ng-value","vision.desc",3,"value"],["ng-value","refers.desc",3,"selected","value"],[3,"icon"],["animation","spin",3,"icon"]],template:function(r,s){1&r&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return s.onSubmit()}),e.j41(1,"div",1)(2,"div",2)(3,"h4",3),e.EFF(4,"Eye Assessment"),e.k0s(),e.j41(5,"div",4),e.nrm(6,"fa-icon",5),e.j41(7,"div",6)(8,"h1",7),e.EFF(9,"IMPORTANT"),e.k0s(),e.j41(10,"p",8),e.EFF(11,"Once saved, the information will be displayed in the input boxes and shall not be editable unless Edit button is pressed."),e.k0s()()()(),e.j41(12,"div",9)(13,"h4",10),e.EFF(14,"A. Eye Complaints (Check all applicable)"),e.k0s()(),e.DNE(15,At,4,7,"div",11),e.j41(16,"div",12)(17,"h1",13),e.EFF(18,"Refer immediately to opthalmologist"),e.k0s(),e.j41(19,"select",14),e.DNE(20,qt,2,2,"option",15),e.k0s()()(),e.nrm(21,"div",16),e.j41(22,"div",17)(23,"div",18)(24,"h4",3),e.EFF(25,"Vision Assessment"),e.k0s(),e.j41(26,"div",4),e.nrm(27,"fa-icon",5),e.j41(28,"div",6)(29,"h1",7),e.EFF(30,"IMPORTANT"),e.k0s(),e.j41(31,"p",8),e.EFF(32,"Once saved, the information will be displayed in the input boxes and shall not be editable unless Edit button is pressed."),e.k0s()()()(),e.j41(33,"div",19)(34,"h4",10),e.EFF(35,"B. Vision Screening"),e.k0s()(),e.j41(36,"div",20)(37,"h1",21),e.EFF(38,"Unaided"),e.k0s(),e.j41(39,"select",22),e.DNE(40,Dt,2,2,"option",23),e.k0s()(),e.j41(41,"div",24)(42,"h1",21),e.EFF(43,"Pinhole"),e.k0s(),e.j41(44,"select",25),e.DNE(45,Vt,2,2,"option",23),e.k0s()(),e.j41(46,"div",26)(47,"h1",21),e.EFF(48,"Improved"),e.k0s(),e.j41(49,"select",27),e.DNE(50,Ot,2,2,"option",23),e.k0s()(),e.j41(51,"div",28)(52,"h1",21),e.EFF(53,"Aided"),e.k0s(),e.j41(54,"select",29),e.DNE(55,Pt,2,2,"option",23),e.k0s()(),e.j41(56,"div",30)(57,"h1",21),e.EFF(58,"Refer to eyecare professional"),e.k0s(),e.j41(59,"select",31),e.DNE(60,Xt,2,2,"option",32),e.k0s()(),e.j41(61,"div",33)(62,"button",34),e.DNE(63,Bt,1,1,"fa-icon",35)(64,Ut,1,1,"fa-icon",36),e.EFF(65),e.k0s()()()()),2&r&&(e.Y8G("formGroup",s.casdt2Form),e.R7$(6),e.Y8G("icon",s.faInfoCircle),e.R7$(9),e.Y8G("ngForOf",s.eye_complaints),e.R7$(5),e.Y8G("ngForOf",s.eye_refer),e.R7$(7),e.Y8G("icon",s.faInfoCircle),e.R7$(13),e.Y8G("ngForOf",s.eye_vision_screen),e.R7$(5),e.Y8G("ngForOf",s.eye_vision_screen),e.R7$(5),e.Y8G("ngForOf",s.eye_vision_screen),e.R7$(5),e.Y8G("ngForOf",s.eye_vision_screen),e.R7$(5),e.Y8G("ngForOf",s.eye_refer_prof),e.R7$(3),e.Y8G("ngIf",!s.is_saving),e.R7$(),e.Y8G("ngIf",s.is_saving),e.R7$(),e.SpI(" ",s.is_saving?"Saving":"Save"," "))},dependencies:[c.Sq,c.bT,d.aY,n.qT,n.xH,n.y7,n.Zm,n.wz,n.BC,n.cb,n.vS,n.j4,n.JD],encapsulation:2})}}return i})();function Lt(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",7),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.toggleModal())}),e.nrm(1,"fa-icon",8),e.EFF(2," End Visit "),e.k0s()}if(2&i){const t=e.XpG();e.R7$(),e.Y8G("icon",t.faDoorClosed)}}function Ht(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",2),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.switchTab(2))}),e.EFF(1," RISK SCREENING "),e.k0s()}if(2&i){const t=e.XpG(2);e.HbH(2===t.module?"text-blue-500 border-b-2 border-blue-500 font-bold":"hover:-translate-y-1 hover:scale-110 transition ease-in-out delay-400 duration-300")}}function Kt(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",2),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.switchTab(3))}),e.EFF(1," QUESTIONNAIRE "),e.k0s()}if(2&i){const t=e.XpG(2);e.HbH(3===t.module?"text-blue-500 border-b-2 border-blue-500 font-bold":"hover:-translate-y-1 hover:scale-110 transition ease-in-out delay-400 duration-300")}}function zt(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",2),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.switchTab(4))}),e.EFF(1," RISK STRATIFICATION "),e.k0s()}if(2&i){const t=e.XpG(2);e.HbH(4===t.module?"text-blue-500 border-b-2 border-blue-500 font-bold":"hover:-translate-y-1 hover:scale-110 transition ease-in-out delay-400 duration-300")}}function Qt(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",2),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.switchTab(5))}),e.EFF(1," PATIENT RECORD "),e.k0s()}if(2&i){const t=e.XpG(2);e.HbH(5===t.module?"text-blue-500 border-b-2 border-blue-500 font-bold":"hover:-translate-y-1 hover:scale-110 transition ease-in-out delay-400 duration-300")}}function Wt(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",2),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.switchTab(7))}),e.EFF(1," CASDT 2 "),e.k0s()}if(2&i){const t=e.XpG(2);e.HbH(7===t.module?"text-blue-500 border-b-2 border-blue-500 font-bold":"hover:-translate-y-1 hover:scale-110 transition ease-in-out delay-400 duration-300")}}function Zt(i,o){if(1&i){const t=e.RV6();e.j41(0,"app-risk-assessment",17),e.bIt("loadRisk",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.loadRisk())}),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("patient_info",t.patient_info)("consult_details",t.consult_details)("vitals",t.vitals)}}function ei(i,o){if(1&i&&e.nrm(0,"app-risk-screening",18),2&i){const t=e.XpG(2);e.Y8G("patient_id",t.patient_id)("consult_details",t.consult_details)}}function ti(i,o){if(1&i&&e.nrm(0,"app-questionnaire",19),2&i){const t=e.XpG(2);e.Y8G("consult_details",t.consult_details)}}function ii(i,o){if(1&i&&e.nrm(0,"app-risk-stratification",18),2&i){const t=e.XpG(2);e.Y8G("patient_id",t.patient_id)("consult_details",t.consult_details)}}function ni(i,o){if(1&i&&e.nrm(0,"app-patient-record",18),2&i){const t=e.XpG(2);e.Y8G("patient_id",t.patient_id)("consult_details",t.consult_details)}}function si(i,o){if(1&i&&e.nrm(0,"app-casdt",18),2&i){const t=e.XpG(2);e.Y8G("patient_id",t.patient_id)("consult_details",t.consult_details)}}function oi(i,o){if(1&i&&e.nrm(0,"app-casdt2",20),2&i){const t=e.XpG(2);e.Y8G("patient_id",t.patient_id)("consult_details",t.consult_details)("vaccine_details",t.vaccine_details)}}function ri(i,o){if(1&i){const t=e.RV6();e.j41(0,"div"),e.nrm(1,"div",9),e.j41(2,"nav",10)(3,"button",2),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.switchTab(1))}),e.EFF(4," RISK ASSESSMENT "),e.k0s(),e.DNE(5,Ht,2,2,"button",11)(6,Kt,2,2,"button",11)(7,zt,2,2,"button",11)(8,Qt,2,2,"button",11)(9,Wt,2,2,"button",11),e.k0s(),e.j41(10,"div",12),e.DNE(11,Zt,1,3,"app-risk-assessment",13)(12,ei,1,2,"app-risk-screening",14)(13,ti,1,1,"app-questionnaire",15)(14,ii,1,2,"app-risk-stratification",14)(15,ni,1,2,"app-patient-record",14)(16,si,1,2,"app-casdt",14)(17,oi,1,3,"app-casdt2",16),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(3),e.HbH(1===t.module?"text-blue-500 border-b-2 border-blue-500 font-bold":"hover:-translate-y-1 hover:scale-110 transition ease-in-out delay-400 duration-300"),e.R7$(2),e.Y8G("ngIf",null==t.consult_details?null:t.consult_details.assessment_date),e.R7$(),e.Y8G("ngIf",null==t.consult_details?null:t.consult_details.assessment_date),e.R7$(),e.Y8G("ngIf",null==t.consult_details?null:t.consult_details.assessment_date),e.R7$(),e.Y8G("ngIf",null==t.consult_details?null:t.consult_details.assessment_date),e.R7$(),e.Y8G("ngIf",t.show_casdt2),e.R7$(2),e.Y8G("ngIf",1===t.module),e.R7$(),e.Y8G("ngIf",2===t.module),e.R7$(),e.Y8G("ngIf",3===t.module),e.R7$(),e.Y8G("ngIf",4===t.module),e.R7$(),e.Y8G("ngIf",5===t.module),e.R7$(),e.Y8G("ngIf",6===t.module),e.R7$(),e.Y8G("ngIf",7===t.module)}}function ai(i,o){if(1&i){const t=e.RV6();e.j41(0,"tr",28)(1,"td",29),e.EFF(2),e.nI1(3,"date"),e.nI1(4,"date"),e.k0s(),e.nrm(5,"td",30),e.j41(6,"td",30),e.EFF(7),e.k0s(),e.j41(8,"td",30)(9,"button",31),e.bIt("click",function(){const s=e.eBV(t).$implicit,a=e.XpG(3);return e.Njj(a.openNCD(s))}),e.EFF(10),e.k0s()()()}if(2&i){const t=o.$implicit;e.R7$(2),e.SpI(" ",t.assessment_date?e.brH(3,3,t.assessment_date,"MM/dd/yyyy","Asia/Manila"):e.brH(4,7,t.consult_date,"MM/dd/yyyy","Asia/Manila")," "),e.R7$(5),e.SpI(" ",t.location?1===t.location?"Community":"Facility":"-"," "),e.R7$(3),e.SpI(" ",t.consult_done?"View":"Open"," ")}}function li(i,o){if(1&i&&(e.j41(0,"tbody"),e.DNE(1,ai,11,11,"tr",27),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.ncd_list)("ngForTrackBy",t.identify)}}function di(i,o){if(1&i&&(e.j41(0,"div")(1,"div",21)(2,"div",22),e.EFF(3," NCD Visits "),e.k0s(),e.j41(4,"div",23)(5,"table",24)(6,"thead",25)(7,"tr")(8,"th",26),e.EFF(9,"Assessment Date"),e.k0s(),e.j41(10,"th",26),e.EFF(11,"Risk Stratification"),e.k0s(),e.j41(12,"th",26),e.EFF(13,"Location"),e.k0s(),e.j41(14,"th",26),e.EFF(15,"Actions"),e.k0s()()(),e.DNE(16,li,2,2,"tbody",5),e.k0s()()()()),2&i){const t=e.XpG();e.R7$(16),e.Y8G("ngIf",t.ncd_list)}}function ci(i,o){if(1&i){const t=e.RV6();e.j41(0,"app-end-visit",32),e.bIt("toggleModal",function(s){e.eBV(t);const a=e.XpG();return e.Njj(a.toggleModal(s))}),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("consult_id",t.consult_details_temp.id)("patient_id",t.consult_details_temp.patient?t.consult_details_temp.patient.id:t.consult_details_temp.patient_id)("consult_date",t.consult_details_temp.consult_date)("pt_group","ncd")}}const ui=[{path:"",component:(()=>{class i{ngOnDestroy(){R(this.patientInfo.reloadNCDVitals,this.loadVitals,!0)}openNCD(t){this.router.navigate(["/patient/ncd",{id:t.patient_id??t.patient.id,consult_id:t.consult_id??t.id}]),this.consult_details=t,this.modules=2}toggleModal(){this.show_end=!this.show_end}loadNCD(t,r){this.http.get("non-communicable-disease/risk-assessment",{params:{consult_id:t}}).subscribe({next:a=>{a.data.length>0?(a.data[0].consult_date=a.data[0].assessment_date,this.consult_details=a.data[0]):this.consult_details=this.consult_details_temp;let l=this.ageService.calcuateAge(this.patient_info.birthdate,this.consult_details.consult_date);console.log(l),"year"===l.type&&l.age>=60&&(this.show_casdt2=!0)},error:a=>console.log(a)})}loadRisk(){this.http.get("non-communicable-disease/risk-assessment",{params:{patient_id:this.patient_id,sort:"-assessment_date"}}).subscribe({next:r=>{this.risk_list=r.data,this.risk_list&&this.fillConsult()},error:r=>console.log(r)})}loadConsult(){this.http.get("consultation/records",{params:{patient_id:this.patient_id,pt_group:"ncd",sort:"-consult_date"}}).subscribe({next:r=>{this.ncd_list=r.data,this.consult_details_temp=r.data[0],Object.entries(r.data).forEach(([s,a],l)=>{a.id===Number(this.consult_id)&&(this.consult_details_temp=a)}),this.loadRisk()},error:r=>console.log(r)})}fillConsult(){Object.entries(this.ncd_list).forEach(([t,r],s)=>{let a=r,l=this.risk_list.find(_=>_.consult_id===a.id);l&&(this.ncd_list[s]=l,this.ncd_list[s].consult_done=a.consult_done),Object.keys(this.ncd_list).length-1===s&&this.loadNCD(this.consult_id)})}loadVitals(){this.http.get("patient-vitals/vitals",{params:{patient_id:this.patient_id,sort:"-vitals_date",per_page:15}}).subscribe({next:t=>{let r=t.data;if(r.length>0){let a=t.data[0].bp_diastolic;r[0].bp_systolic=t.data[0].bp_systolic,r[0].bp_diastolic=a,this.vitals=r}},error:t=>console.log(t)})}patientVitals(t){}constructor(t,r,s,a,l){this.route=t,this.http=r,this.router=s,this.patientInfo=a,this.ageService=l,this.show_end=!1,this.faDoorClosed=m.K_I,this.show_casdt2=!1,this.loadVitals=this.loadVitals.bind(this),R(a.reloadNCDVitals,this.loadVitals)}ngOnInit(){this.show_casdt2=!1,this.module=1,this.modules=1,this.patient_info=this.http.getPatientInfo(),this.patient_id=this.route.snapshot.paramMap.get("id"),this.consult_id=this.route.snapshot.paramMap.get("consult_id"),this.loadConsult(),this.loadVitals()}switchTab(t){this.module=0,this.module=t}switchTabs(t){this.modules=0,this.modules=t}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(b.nX),e.rXU(f.k),e.rXU(b.Ix),e.rXU(k.d),e.rXU(J.V))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-ncd"]],standalone:!1,decls:11,vars:8,consts:[[1,"flex"],[1,"flex","flex-row","whitespace-nowrap","text-sm","max-w-xl","mt-5"],[1,"text-gray-600","border-b-2","border-gray-200","block","hover:text-blue-500","hover:border-blue-500","mr-6","pb-2",3,"click"],[1,"ml-auto"],["type","button","class","btn-end-visit ml-auto mt-5",3,"click",4,"ngIf"],[4,"ngIf"],[3,"consult_id","patient_id","consult_date","pt_group","toggleModal",4,"ngIf"],["type","button",1,"btn-end-visit","ml-auto","mt-5",3,"click"],[1,"mr-1",3,"icon"],[1,"text-gray-600","border","border-slate-100","mt-5"],[1,"mt-4","flex","flex-row","whitespace-nowrap","sm:text-xs","md:text-xs","overflow-x-auto","no-scrollbar","lg:text-xs"],["class","text-gray-600 border-b-2 border-gray-200 block hover:text-blue-500 hover:border-blue-500 mr-6 pb-2",3,"class","click",4,"ngIf"],[1,"grid","grid-col-8"],[3,"patient_info","consult_details","vitals","loadRisk",4,"ngIf"],[3,"patient_id","consult_details",4,"ngIf"],[3,"consult_details",4,"ngIf"],[3,"patient_id","consult_details","vaccine_details",4,"ngIf"],[3,"loadRisk","patient_info","consult_details","vitals"],[3,"patient_id","consult_details"],[3,"consult_details"],[3,"patient_id","consult_details","vaccine_details"],[1,"border","border-slate-200","shadow-md","rounded-xl","mt-5"],[1,"w-full","bg-green-500","text-white","rounded-t-xl","p-3","font-semibold"],[1,"w-full","p-5"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"text-center","py-3","px-3","w-3/12"],["class","bg-white border-b last:border-0",4,"ngFor","ngForOf","ngForTrackBy"],[1,"bg-white","border-b","last:border-0"],[1,"py-4","px-3","text-center"],["scope","row",1,"py-4","px-3","font-medium","text-gray-900","text-center"],["type","button",1,"btn-save",3,"click"],[3,"toggleModal","consult_id","patient_id","consult_date","pt_group"]],template:function(r,s){1&r&&(e.j41(0,"div",0)(1,"nav",1)(2,"button",2),e.bIt("click",function(){return s.switchTabs(1)}),e.EFF(3," NCD HISTORY "),e.k0s(),e.j41(4,"button",2),e.bIt("click",function(){return s.switchTabs(2)}),e.EFF(5," NCD CONSULT "),e.k0s()(),e.j41(6,"div",3),e.DNE(7,Lt,3,1,"button",4),e.k0s()(),e.DNE(8,ri,18,14,"div",5)(9,di,17,1,"div",5)(10,ci,1,4,"app-end-visit",6)),2&r&&(e.R7$(2),e.HbH(1===s.modules?"text-blue-500 border-b-2 border-blue-500 font-bold":"hover:-translate-y-1 hover:scale-110 transition ease-in-out delay-400 duration-300"),e.R7$(2),e.HbH(2===s.modules?"text-blue-500 border-b-2 border-blue-500 font-bold":"hover:-translate-y-1 hover:scale-110 transition ease-in-out delay-400 duration-300"),e.R7$(3),e.Y8G("ngIf",!(null!=s.consult_details&&s.consult_details.consult_done)),e.R7$(),e.Y8G("ngIf",2===s.modules),e.R7$(),e.Y8G("ngIf",1===s.modules),e.R7$(),e.Y8G("ngIf",s.ncd_list&&s.show_end))},dependencies:[c.Sq,c.bT,d.aY,h.u,j,G,M,$,Y,Yt,S,c.vh],styles:[".what[_ngcontent-%COMP%]:active{color:#00f;text-decoration:underline}"]})}}return i})()},{path:"risk-stratification",component:G},{path:"risk-assessment",component:j},{path:"questionnaire",component:M},{path:"patient-record",component:$},{path:"casdt",component:Y},{path:"casdt2",component:S}];let _i=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[b.iI.forChild(ui),b.iI]})}}return i})();var mi=u(8761);let pi=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[c.MD,d.dX,_i,n.YN,n.X1,h.u,mi.MQ]})}}return i})()},9217:(T,w,u)=>{u.d(w,{u:()=>f});var c=u(177),d=u(4438),b=u(9417),m=u(60),F=u(3318),R=u(3895),e=u(5794);let f=(()=>{class k{onSubmit(){let h;this.is_saving=!0,h=this.consult_date&&this.pt_group?{patient_id:this.patient_id,consult_date:this.consult_date,pt_group:this.pt_group,consult_done:!0}:{},this.http.update("consultation/records/",this.consult_id,h).subscribe({next:n=>{this.is_saving=!1,this.toastr.info("Visit was ended"),this.router.navigate(["/patient/itr",{id:this.patient_id}])},error:n=>console.log(n)})}constructor(h,n,p){this.http=h,this.router=n,this.toastr=p,this.toggleModal=new d.bkB,this.is_saving=!1}closeModal(){this.toggleModal.emit("end_visit")}static{this.\u0275fac=function(n){return new(n||k)(d.rXU(F.k),d.rXU(R.Ix),d.rXU(e.tw))}}static{this.\u0275cmp=d.VBU({type:k,selectors:[["app-end-visit"]],inputs:{consult_id:"consult_id",consult_date:"consult_date",patient_id:"patient_id",pt_group:"pt_group"},outputs:{toggleModal:"toggleModal"},decls:20,vars:5,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"h-40"],[1,"flex","item-start","flex-wrap","pb-5"],[1,"grid","grid-cols-3","px-3","py-3","mt-10","mx-10","w-full","rounded-lg","text-center"],[1,"col-span-3","text-left","mb-2","pb-2","border-b","border-slate-200","font-semibold","text-lg"],[1,"col-span-3","text-left","mb-2","pb-2","text-sm"],[1,"flex","justify-end","py-2","px-5","space-x-4","rounded-b"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-300","rounded","text-sm","font-medium","my-2","px-6","py-2.5","transition","duration-150","ease-in-out",3,"click"],["type","button",1,"text-white","bg-rose-500","enabled:hover:ring-2","enabled:focus:outline-none","enabled:hover:ring-rose-300","disabled:opacity-75","font-medium","rounded","text-sm","my-2","px-6","py-2.5","text-center","transition","duration-150","ease-in-out",3,"click","disabled"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"]],template:function(n,p){1&n&&(d.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),d.EFF(5," End Visit "),d.k0s()(),d.j41(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),d.EFF(10," Do you really want to end this visit? "),d.k0s(),d.j41(11,"div",9),d.EFF(12),d.nI1(13,"date"),d.k0s()()()(),d.j41(14,"div",10)(15,"button",11),d.bIt("click",function(){return p.closeModal()}),d.EFF(16,"Cancel"),d.k0s(),d.j41(17,"button",12),d.bIt("click",function(){return p.onSubmit()}),d.EFF(18,"End Visit"),d.k0s()()()()(),d.nrm(19,"div",13)),2&n&&(d.R7$(12),d.SpI(" Visit date & time: ",d.i5U(13,2,p.consult_date,"MM/dd/yyyy hh:mm:ss a")," "),d.R7$(5),d.Y8G("disabled",p.is_saving))},dependencies:[m.dX,b.YN,c.MD,c.vh],encapsulation:2,changeDetection:0})}}return k})()}}]);