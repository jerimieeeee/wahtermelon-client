"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[3819],{2101:(S,k,_)=>{_.d(k,{U:()=>w});var e=_(177),t=_(4438),D=_(9417),F=_(60),T=_(5383),v=_(7468),f=_(3318),x=_(5794);function l(g,E){if(1&g){const i=t.RV6();t.j41(0,"tr")(1,"td",26),t.EFF(2),t.k0s(),t.j41(3,"td",27),t.EFF(4),t.nI1(5,"currency"),t.k0s(),t.j41(6,"td")(7,"input",28),t.bIt("keyup",function(){const d=t.eBV(i).$implicit,r=t.XpG(2);return t.Njj(r.computeBalance(d.key,"pSeniorCitizenDiscount"))}),t.mxI("ngModelChange",function(d){const r=t.eBV(i).$implicit,n=t.XpG(2);return t.DH7(n.summary_list[r.key].pSeniorCitizenDiscount,d)||(n.summary_list[r.key].pSeniorCitizenDiscount=d),t.Njj(d)}),t.k0s()(),t.j41(8,"td")(9,"input",28),t.bIt("keyup",function(){const d=t.eBV(i).$implicit,r=t.XpG(2);return t.Njj(r.computeBalance(d.key,"pPWDDiscount"))}),t.mxI("ngModelChange",function(d){const r=t.eBV(i).$implicit,n=t.XpG(2);return t.DH7(n.summary_list[r.key].pPWDDiscount,d)||(n.summary_list[r.key].pPWDDiscount=d),t.Njj(d)}),t.k0s()(),t.j41(10,"td")(11,"input",28),t.bIt("keyup",function(){const d=t.eBV(i).$implicit,r=t.XpG(2);return t.Njj(r.computeBalance(d.key,"pPCSO"))}),t.mxI("ngModelChange",function(d){const r=t.eBV(i).$implicit,n=t.XpG(2);return t.DH7(n.summary_list[r.key].pPCSO,d)||(n.summary_list[r.key].pPCSO=d),t.Njj(d)}),t.k0s()(),t.j41(12,"td")(13,"input",28),t.bIt("keyup",function(){const d=t.eBV(i).$implicit,r=t.XpG(2);return t.Njj(r.computeBalance(d.key,"pDSWD"))}),t.mxI("ngModelChange",function(d){const r=t.eBV(i).$implicit,n=t.XpG(2);return t.DH7(n.summary_list[r.key].pDSWD,d)||(n.summary_list[r.key].pDSWD=d),t.Njj(d)}),t.k0s()(),t.j41(14,"td")(15,"input",28),t.bIt("keyup",function(){const d=t.eBV(i).$implicit,r=t.XpG(2);return t.Njj(r.computeBalance(d.key,"pDOHMAP"))}),t.mxI("ngModelChange",function(d){const r=t.eBV(i).$implicit,n=t.XpG(2);return t.DH7(n.summary_list[r.key].pDOHMAP,d)||(n.summary_list[r.key].pDOHMAP=d),t.Njj(d)}),t.k0s()(),t.j41(16,"td")(17,"input",28),t.bIt("keyup",function(){const d=t.eBV(i).$implicit,r=t.XpG(2);return t.Njj(r.computeBalance(d.key,"pHMO"))}),t.mxI("ngModelChange",function(d){const r=t.eBV(i).$implicit,n=t.XpG(2);return t.DH7(n.summary_list[r.key].pHMO,d)||(n.summary_list[r.key].pHMO=d),t.Njj(d)}),t.k0s()()()}if(2&g){const i=E.$implicit,c=t.XpG(2);t.R7$(2),t.JRh(i.value.label),t.R7$(2),t.SpI(" ",t.i5U(5,8,i.value.pChargesNetOfApplicableVat,"PHP")," "),t.R7$(3),t.R50("ngModel",c.summary_list[i.key].pSeniorCitizenDiscount),t.R7$(2),t.R50("ngModel",c.summary_list[i.key].pPWDDiscount),t.R7$(2),t.R50("ngModel",c.summary_list[i.key].pPCSO),t.R7$(2),t.R50("ngModel",c.summary_list[i.key].pDSWD),t.R7$(2),t.R50("ngModel",c.summary_list[i.key].pDOHMAP),t.R7$(2),t.R50("ngModel",c.summary_list[i.key].pHMO)}}function p(g,E){if(1&g&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&g){const i=E.$implicit;t.R7$(),t.JRh(i)}}function m(g,E){if(1&g&&t.nrm(0,"fa-icon",29),2&g){const i=t.XpG(2);t.Y8G("icon",i.faDownload)}}function b(g,E){if(1&g&&t.nrm(0,"fa-icon",30),2&g){const i=t.XpG(2);t.Y8G("icon",i.faCircleNotch)}}function y(g,E){if(1&g&&(t.j41(0,"tr")(1,"td",31),t.EFF(2),t.k0s(),t.j41(3,"td",32),t.EFF(4),t.k0s(),t.j41(5,"td",32),t.EFF(6),t.k0s(),t.j41(7,"td",33),t.EFF(8),t.nI1(9,"currency"),t.k0s(),t.j41(10,"td",33),t.EFF(11),t.nI1(12,"currency"),t.k0s()()),2&g){const i=E.$implicit;t.R7$(2),t.JRh(i.added_item?i.added_item:i.konsulta_medicine.desc),t.R7$(2),t.JRh(i.added_item?"OTHERS":i.konsulta_medicine.category),t.R7$(2),t.JRh(i.quantity),t.R7$(2),t.JRh(t.i5U(9,5,i.unit_price,"PHP")),t.R7$(3),t.JRh(t.i5U(12,8,i.total_price,"PHP"))}}function h(g,E){1&g&&(t.j41(0,"tr")(1,"td",34),t.EFF(2,"No item on this list"),t.k0s()())}function C(g,E){if(1&g&&(t.j41(0,"tr")(1,"td",31),t.EFF(2),t.k0s(),t.j41(3,"td",32),t.EFF(4),t.k0s(),t.j41(5,"td",32),t.EFF(6),t.k0s(),t.j41(7,"td",33),t.EFF(8),t.nI1(9,"currency"),t.k0s(),t.j41(10,"td",33),t.EFF(11),t.nI1(12,"currency"),t.k0s()()),2&g){const i=E.$implicit;t.R7$(2),t.JRh(i.item_list.added_item?i.item_list.added_item:i.item_list.lib_item_claim.item_name),t.R7$(2),t.JRh(i.added_item||i.item_list.added_item?"OTHERS":i.item_list.lib_item_claim.category),t.R7$(2),t.JRh(i.quantity),t.R7$(2),t.JRh(t.i5U(9,5,i.unit_price,"PHP")),t.R7$(3),t.JRh(t.i5U(12,8,i.total_price,"PHP"))}}function R(g,E){1&g&&(t.j41(0,"tr")(1,"td",34),t.EFF(2,"No item on this list"),t.k0s()())}function M(g,E){if(1&g&&(t.j41(0,"div",36)(1,"div",22),t.EFF(2),t.k0s(),t.j41(3,"table",23)(4,"thead")(5,"tr")(6,"th"),t.EFF(7,"Item Name"),t.k0s(),t.j41(8,"th"),t.EFF(9,"Category"),t.k0s(),t.j41(10,"th"),t.EFF(11,"Quantity"),t.k0s(),t.j41(12,"th"),t.EFF(13,"Unit Price"),t.k0s(),t.j41(14,"th"),t.EFF(15,"Total"),t.k0s()()(),t.j41(16,"tbody"),t.DNE(17,C,13,11,"tr",9)(18,R,3,0,"tr",24),t.k0s()()()),2&g){const i=t.XpG().$implicit,c=t.XpG(2);t.R7$(2),t.SpI(" ",i.value.label," "),t.R7$(15),t.Y8G("ngForOf",c[i.value.listVariable]),t.R7$(),t.Y8G("ngIf",c.supplies_list.length<1)}}function P(g,E){if(1&g&&(t.qex(0),t.DNE(1,M,19,3,"div",35),t.bVm()),2&g){const i=E.$implicit;t.R7$(),t.Y8G("ngIf","prescription_list"!==i.value.listVariable&&"professional_list"!==i.value.listVariable)}}function I(g,E){if(1&g){const i=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div"),t.EFF(4),t.k0s()(),t.j41(5,"table",5)(6,"thead")(7,"tr")(8,"th",6),t.EFF(9,"CATEGORY"),t.k0s(),t.j41(10,"th",6),t.EFF(11,"AMOUNT"),t.k0s(),t.j41(12,"th",7),t.EFF(13,"DISCOUNTS"),t.k0s()(),t.j41(14,"tr")(15,"th",8),t.EFF(16,"Senior Citizen"),t.k0s(),t.j41(17,"th"),t.EFF(18,"PWD"),t.k0s(),t.j41(19,"th"),t.EFF(20,"PCSO"),t.k0s(),t.j41(21,"th"),t.EFF(22,"DSWD"),t.k0s(),t.j41(23,"th"),t.EFF(24,"DOHMAP"),t.k0s(),t.j41(25,"th"),t.EFF(26,"HMO"),t.k0s()()(),t.j41(27,"tbody"),t.DNE(28,l,18,11,"tr",9),t.nI1(29,"keyvalue"),t.j41(30,"tr",10)(31,"td",11),t.EFF(32," Total Amount "),t.k0s(),t.j41(33,"td",12),t.EFF(34),t.nI1(35,"currency"),t.k0s()(),t.j41(36,"tr",10)(37,"td",11),t.EFF(38," HCI Fee "),t.k0s(),t.j41(39,"td",12),t.EFF(40),t.nI1(41,"currency"),t.k0s()(),t.j41(42,"tr",10)(43,"td",11),t.EFF(44," Professional Fee "),t.k0s(),t.j41(45,"td",12),t.EFF(46),t.nI1(47,"currency"),t.k0s()(),t.j41(48,"tr",10)(49,"td",11),t.EFF(50," Total Discount "),t.k0s(),t.j41(51,"td",12),t.EFF(52),t.nI1(53,"currency"),t.k0s()(),t.j41(54,"tr",10)(55,"td",13),t.EFF(56," Balance: "),t.k0s(),t.j41(57,"td",12),t.EFF(58),t.nI1(59,"currency"),t.k0s()(),t.j41(60,"tr",10)(61,"td",13),t.EFF(62," Patients Balance: "),t.k0s(),t.j41(63,"td",12),t.EFF(64),t.nI1(65,"currency"),t.k0s()()()(),t.j41(66,"div",14)(67,"ul",15),t.DNE(68,p,2,1,"li",9),t.k0s()(),t.j41(69,"div",16)(70,"button",17),t.bIt("click",function(){t.eBV(i);const d=t.XpG();return t.Njj(d.downloadEsoa())}),t.DNE(71,m,1,1,"fa-icon",18)(72,b,1,1,"fa-icon",19),t.EFF(73),t.k0s()()(),t.j41(74,"div",20)(75,"div",21)(76,"div",22),t.EFF(77," Drugs and Medicine "),t.k0s(),t.j41(78,"table",23)(79,"thead")(80,"tr")(81,"th"),t.EFF(82,"Name"),t.k0s(),t.j41(83,"th"),t.EFF(84,"Category"),t.k0s(),t.j41(85,"th"),t.EFF(86,"Quantity"),t.k0s(),t.j41(87,"th"),t.EFF(88,"Unit Price"),t.k0s(),t.j41(89,"th"),t.EFF(90,"Total"),t.k0s()()(),t.j41(91,"tbody"),t.DNE(92,y,13,11,"tr",9)(93,h,3,0,"tr",24),t.k0s()()()(),t.j41(94,"div",25),t.DNE(95,P,2,1,"ng-container",9),t.nI1(96,"keyvalue"),t.k0s()()}if(2&g){const i=t.XpG();t.R7$(4),t.SpI("Summary of Fees - ",i.transmittal_number,""),t.R7$(24),t.Y8G("ngForOf",t.i5U(29,16,i.summary_list,i.keepOriginalOrder)),t.R7$(6),t.SpI(" ",t.i5U(35,19,i.totalAmount,"PHP")," "),t.R7$(6),t.SpI(" (",t.i5U(41,22,i.caseRateAmount,"PHP"),") "),t.R7$(6),t.SpI(" (",t.i5U(47,25,i.profFee,"PHP"),") "),t.R7$(6),t.SpI(" (",t.i5U(53,28,i.computedDiscount.Items+i.computedDiscount.Prof,"PHP"),") "),t.R7$(6),t.SpI(" ",t.i5U(59,31,i.totalBalance,"PHP")," "),t.R7$(6),t.SpI(" ",t.i5U(65,34,i.totalBalance<0?0:i.totalBalance,"PHP")," "),t.R7$(4),t.Y8G("ngForOf",i.esoa_erros),t.R7$(2),t.Y8G("disabled",i.disable_button||i.generating_xml),t.R7$(),t.Y8G("ngIf",!i.generating_xml),t.R7$(),t.Y8G("ngIf",i.generating_xml),t.R7$(),t.SpI(" Save",i.generating_xml?"ing":""," Esoa XML "),t.R7$(19),t.Y8G("ngForOf",i.prescription_list),t.R7$(),t.Y8G("ngIf",i.prescription_list.length<1),t.R7$(2),t.Y8G("ngForOf",t.i5U(96,37,i.summary_list,i.keepOriginalOrder))}}function j(g,E){if(1&g&&(t.j41(0,"div",37)(1,"div",38),t.nrm(2,"fa-icon",39),t.k0s(),t.j41(3,"div",38),t.EFF(4," Loading.... "),t.k0s()()),2&g){const i=t.XpG();t.R7$(2),t.Y8G("icon",i.faCircleNotch)}}let w=(()=>{class g{downloadEsoa(){this.generating_xml=!0,this.esoa_erros=void 0;let i=this.generateJSON();i.transmittal_number=this.transmittal_number,i.eclaims_upload_id=this.eclaims_upload_id,this.http.post("eclaims/validate-esoa",i,{responseType:"text"}).subscribe({next:c=>{this.downloadXml(c)},error:c=>{console.log(c.error),this.toastr.error(c.error.message,"Error"),this.generating_xml=!1}})}downloadXml(i){const c="string"==typeof i?i:(new XMLSerializer).serializeToString(i),d=new Blob([c],{type:"application/octet-stream"}),r=window.URL.createObjectURL(d),n=document.createElement("a");n.href=r;const o=`ESOA_${(0,e.Yq)(new Date,"yyyyMMdd_HHmm","en","Asia/Manila")}`;n.download=o+".xml",document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(r),this.toastr.success("eSoa successfully downloaded","ESOA"),this.generating_xml=!1}generateJSON(){this.item_list=[];let i={},c={SummaryOfFees:{}},d={ItemizedBillingItems:[]},r={ProfessionalFees:[]};console.log(this.summary_list),Object.entries(this.summary_list).forEach(([o,a])=>{"ProfessionalFee"!==o&&(c.SummaryOfFees[o]={pChargesNetOfApplicableVat:Number(a.pChargesNetOfApplicableVat).toFixed(2),pSeniorCitizenDiscount:Number(a.pSeniorCitizenDiscount).toFixed(2),pPWDDiscount:Number(a.pPWDDiscount).toFixed(2),pPCSO:Number(a.pPCSO).toFixed(2),pDSWD:Number(a.pDSWD).toFixed(2),pDOHMAP:Number(a.pDOHMAP).toFixed(2),pHMO:Number(a.pHMO).toFixed(2)},d.ItemizedBillingItems=this.getItemizedItemJSON(a,o))});let n=Number(this.totalSummary)-Number(this.computedDiscount.Items)-Number(this.caseRateAmount),s=n<0?0:n;return c.SummaryOfFees.PhilHealth={pTotalCaseRateAmount:this.caseRateAmount},c.SummaryOfFees.Balance={pAmount:s.toFixed(2)},r.ProfessionalFees=this.getProfJSON(),i={esoa_summary:c,esoa_items:d,esoa_prof:r},i}getProfJSON(){let c=Number(this.summary_list.ProfessionalFee.pChargesNetOfApplicableVat-(this.summary_list.ProfessionalFee.pSeniorCitizenDiscount-this.summary_list.ProfessionalFee.pPWDDiscount-this.summary_list.ProfessionalFee.pPCSO-this.summary_list.ProfessionalFee.pDSWD-this.summary_list.ProfessionalFee.pDOHMAP-this.summary_list.ProfessionalFee.pHMO)-this.profFee),d=c<0?0:c;return[{ProfessionalFee:{ProfessionalInfo:{pPAN:this.caseRateAttendant.accreditation_number,pLastName:this.caseRateAttendant.last_name,pFirstName:this.caseRateAttendant.first_name,pMiddleName:this.caseRateAttendant.middle_name,pSuffixName:""},SummaryOfFee:{pChargesNetOfApplicableVat:Number(this.summary_list.ProfessionalFee.pChargesNetOfApplicableVat).toFixed(2),pSeniorCitizenDiscount:Number(this.summary_list.ProfessionalFee.pSeniorCitizenDiscount).toFixed(2),pPWDDiscount:Number(this.summary_list.ProfessionalFee.pPWDDiscount).toFixed(2),pPCSO:Number(this.summary_list.ProfessionalFee.pPCSO).toFixed(2),pDSWD:Number(this.summary_list.ProfessionalFee.pDSWD).toFixed(2),pDOHMAP:Number(this.summary_list.ProfessionalFee.pDOHMAP).toFixed(2),pHMO:Number(this.summary_list.ProfessionalFee.pHMO).toFixed(2)}},PhilHealth:{pTotalCaseRateAmount:this.profFee},Balance:{pAmount:d}}]}getItemizedItemJSON(i,c){return Object.entries(this[i.listVariable]).forEach(([d,r])=>{let n="DrugsAndMedicine"===c?this.listJsonMeds(r):this.listJsonItem(r);this.item_list.push({ItemizedBillingItem:n})}),this.item_list}listJsonMeds(i){let c={};return c={pServiceDate:(0,e.Yq)(this.consult_details.consult_date,"MM-dd-yyyy","en","Asia/Manila"),pCategory:"DrugsAndMedicine",pUnitOfMeasurement:"",pUnitPrice:Number(i.unit_price).toFixed(2),pQuantity:String(i.quantity),pTotalAmount:Number(i.total_price).toFixed(2)},i.konsulta_medicine?(c.pItemCode=i.konsulta_medicine?String(i.konsulta_medicine.code):"",c.pItemName=i.konsulta_medicine?i.konsulta_medicine.desc:i.added_medicine):(c.pItemCode="",c.pItemName=i.medicine?i.medicine.drug_name:i.added_medicine),c}listJsonItem(i){let c={};return c={pServiceDate:(0,e.Yq)(this.consult_details.consult_date,"MM-dd-yyyy","en","Asia/Manila"),pItemCode:i.item_list.lib_item_claim?String(i.item_list.lib_item_claim.id):"",pCategory:i.item_list.lib_item_claim?i.item_list.lib_item_claim.category:"Others",pItemName:i.item_list.lib_item_claim?i.item_list.lib_item_claim.item_name:i.item_list.added_item,pUnitOfMeasurement:"",pUnitPrice:Number(i.unit_price).toFixed(2),pQuantity:String(i.quantity),pTotalAmount:Number(i.total_price).toFixed(2)},c}getList(i){return this[i]||[]}computeBalance(i,c){this.totalDiscount[i]=Number(this.summary_list[i].pSeniorCitizenDiscount)+Number(this.summary_list[i].pPWDDiscount)+Number(this.summary_list[i].pPCSO)+Number(this.summary_list[i].pDSWD)+Number(this.summary_list[i].pDOHMAP)+Number(this.summary_list[i].pHMO),this.computedDiscount.Items=0,this.computedDiscount.Prof=0,Object.entries(this.totalDiscount).forEach(([d,r])=>{"ProfessionalFee"===d&&(this.computedDiscount.Prof+=r),"ProfessionalFee"!==d&&(this.computedDiscount.Items+=r)}),this.totalBalance=this.totalAmount-this.computedDiscount.Items-this.computedDiscount.Prof-this.caseRateAmount-this.profFee}getConsultDetails(){this.show_form=!1,this.http.get("consultation/records",{params:{id:this.consult_id}}).subscribe({next:c=>{this.consult_details=c.data[0],this.getEsoaItems()},error:c=>{this.toastr.error(c.error.message,"ESOAs")}})}getEsoaItems(){const i=this.http.get("eclaims/eclaims-caserate",{params:{id:this.caserate_details.id}}),c=this.http.get("medicine/prescriptions",{params:{consult_id:this.consult_id}}),d=this.http.get("consultation/item-supplies",{params:{consult_id:this.consult_id,category:"MedicalSupplies"}}),r=this.http.get("consultation/item-supplies",{params:{consult_id:this.consult_id,category:"OperatingRoomFees"}}),n=this.http.get("consultation/item-supplies",{params:{consult_id:this.consult_id,category:"LaboratoryAndDiagnostic"}}),s=this.http.get("consultation/item-supplies",{params:{consult_id:this.consult_id,category:"RoomAndBoard"}}),o=this.http.get("consultation/item-supplies",{params:{consult_id:this.consult_id,category:"Others"}});(0,v.p)([i,d,r,s,c,o,n]).subscribe({next:([a,u,O,N,U,A,B])=>{this.caseRateAttendant=a.data[0].attendant,this.profFee=a.data[0].prof_fee,this.caseRateAmount=a.data[0].hci_fee,this.supplies_list=u.data,this.operating_list=O.data,this.room_list=N.data,this.prescription_list=U.data,this.others_list=A.data,this.professional_list=a.data[0],this.laboratory_list=B.data,this.computeTotalSummary()},error:a=>{this.toastr.error(a.error.message,"ESOAs")}})}getSavedEsoa(){this.http.get("eclaims/eclaims-esoa",{params:{eclaims_upload_id:this.eclaims_upload_id}}).subscribe({next:c=>{c.data.length>0?this.patchTotalSummary(c.data):(console.log(2),this.show_form=!0)},error:c=>{console.log(c)}})}patchTotalSummary(i){this.totalSummary=0,console.log(this.summary_list),Object.entries(i).forEach(([c,d])=>{console.log(d),this.summary_list[d.category].pDOHMAP=d.pDOHMAP,this.summary_list[d.category].pDSWD=d.pDSWD,this.summary_list[d.category].pHMO=d.pHMO,this.summary_list[d.category].pPCSO=d.pPCSO,this.summary_list[d.category].pPWDDiscount=d.pPWDDiscount,this.summary_list[d.category].pSeniorCitizenDiscount=d.pSeniorCitizenDiscount,this.computeBalance(d.category)}),this.disable_button=!1,this.show_form=!0}computeTotalSummary(){this.totalBalance=0,this.totalAmount=0,this.totalSummary=0,Object.entries(this.summary_list).forEach(([i,c])=>{c.pChargesNetOfApplicableVat=0,this.totalDiscount[i]=0,"professional_list"===c.listVariable?c.pChargesNetOfApplicableVat=Number(this.professional_list.prof_pTotalAmount?this.professional_list.prof_pTotalAmount:this.professional_list.prof_fee):(this[c.listVariable].forEach(d=>{c.pChargesNetOfApplicableVat+=d.quantity*d.unit_price||0}),this.totalSummary+=c.pChargesNetOfApplicableVat),this.totalAmount+=c.pChargesNetOfApplicableVat}),this.totalBalance=this.totalAmount-this.profFee-this.caseRateAmount,this.getSavedEsoa(),this.disable_button=!1}closeModal(){this.toggleModal.emit("esoa")}constructor(i,c){this.http=i,this.toastr=c,this.toggleModal=new t.bkB,this.faCircleNotch=T.s4k,this.faDownload=T.cbP,this.generating_xml=!1,this.show_form=!1,this.totalDiscount=[],this.item_list=[],this.caseRateAmount=0,this.profFee=0,this.supplies_list=[],this.prescription_list=[],this.operating_list=[],this.room_list=[],this.others_list=[],this.professional_list=[],this.laboratory_list=[],this.keepOriginalOrder=()=>0,this.summary_list={DrugsAndMedicine:{label:"Drugs and Medicine",listVariable:"prescription_list",pChargesNetOfApplicableVat:0,pSeniorCitizenDiscount:0,pPWDDiscount:0,pPCSO:0,pDSWD:0,pDOHMAP:0,pHMO:0},MedicalSupplies:{label:"Medical Supplies",listVariable:"supplies_list",pChargesNetOfApplicableVat:0,pSeniorCitizenDiscount:0,pPWDDiscount:0,pPCSO:0,pDSWD:0,pDOHMAP:0,pHMO:0},LaboratoryAndDiagnostic:{label:"Laboratory and Diagnostics",listVariable:"laboratory_list",pChargesNetOfApplicableVat:0,pSeniorCitizenDiscount:0,pPWDDiscount:0,pPCSO:0,pDSWD:0,pDOHMAP:0,pHMO:0},OperatingRoomFees:{label:"Operating Room",listVariable:"operating_list",pChargesNetOfApplicableVat:0,pSeniorCitizenDiscount:0,pPWDDiscount:0,pPCSO:0,pDSWD:0,pDOHMAP:0,pHMO:0},RoomAndBoard:{label:"Room and Board",listVariable:"room_list",pChargesNetOfApplicableVat:0,pSeniorCitizenDiscount:0,pPWDDiscount:0,pPCSO:0,pDSWD:0,pDOHMAP:0,pHMO:0},ProfessionalFee:{label:"Professional Fee",listVariable:"professional_list",pChargesNetOfApplicableVat:0,pSeniorCitizenDiscount:0,pPWDDiscount:0,pPCSO:0,pDSWD:0,pDOHMAP:0,pHMO:0},Others:{label:"Others",listVariable:"others_list",pChargesNetOfApplicableVat:0,pSeniorCitizenDiscount:0,pPWDDiscount:0,pPCSO:0,pDSWD:0,pDOHMAP:0,pHMO:0}},this.computedDiscount={Items:0,Prof:0},this.totalSummary=0,this.disable_button=!0}ngOnInit(){console.log(this.consult_details),this.consult_id=this.http.getUrlParams().consult_id,this.program_name=this.http.getUrlParams().loc,this.getConsultDetails()}static{this.\u0275fac=function(c){return new(c||g)(t.rXU(f.k),t.rXU(x.tw))}}static{this.\u0275cmp=t.VBU({type:g,selectors:[["app-esoa"]],inputs:{consult_details:"consult_details",program_id:"program_id",caserate_details:"caserate_details",transmittal_number:"transmittal_number",eclaims_upload_id:"eclaims_upload_id"},outputs:{toggleModal:"toggleModal"},decls:2,vars:2,consts:[["class","flex flex-col justify-center overflow-y-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-100",4,"ngIf"],["class","flex flex-col justify-center",4,"ngIf"],[1,"flex","flex-col","justify-center","overflow-y-auto","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"flex","flex-col","w-full","justify-center","border","border-gray-200","mt-3"],[1,"w-full","bg-green-500","text-white","pl-3","py-2","font-semibold","flex","justify-between"],[1,"w-full","table-auto","text-xs"],["rowspan","2",1,"w-1/12"],["colspan","7",1,"w-8/12"],[1,""],[4,"ngFor","ngForOf"],[1,"text-right","py-2"],["colspan","7",1,"text-right","pr-2"],["colspan","1",1,"text-right","pr-2","font-semibold","text-base"],["colspan","7 ",1,"text-right","pr-2"],[1,"w-full","text-left","text-rose-500","italic","mx-5","font-semibold","text-sm"],[1,"list-item"],[1,"flex","justify-end","m-3"],["type","button",1,"btn-save",3,"click","disabled"],[3,"icon",4,"ngIf"],["animation","spin",3,"icon",4,"ngIf"],[1,"flex","w-full","justify-center","pt-3"],[1,"mb-3","w-full","flex","flex-col"],[1,"w-full","bg-orange-500","text-white","pl-3","py-2","font-semibold"],[1,"w-full","table-auto","text-xs","border","border-gray-200"],[4,"ngIf"],[1,"flex","flex-col","w-full","justify-center"],[1,"pl-2"],[1,"text-right","pr-2"],["type","number",1,"input",3,"keyup","ngModelChange","ngModel"],[3,"icon"],["animation","spin",3,"icon"],[1,"py-2","px-3"],[1,"py-2","px-3","text-center"],[1,"py-2","px-3","text-right"],["colspan","5",1,"text-center","italic"],["class","mb-3 w-full flex flex-col mx-auto",4,"ngIf"],[1,"mb-3","w-full","flex","flex-col","mx-auto"],[1,"flex","flex-col","justify-center"],[1,"flex","justify-center"],["animation","spin",1,"text-2xl","text-blue-500",3,"icon"]],template:function(c,d){1&c&&t.DNE(0,I,97,40,"div",0)(1,j,5,1,"div",1),2&c&&(t.Y8G("ngIf",d.show_form),t.R7$(),t.Y8G("ngIf",!d.show_form))},dependencies:[e.MD,e.Sq,e.bT,e.oe,e.lG,F.dX,F.aY,D.YN,D.me,D.Q0,D.BC,D.vS],encapsulation:2})}}return g})()},8917:(S,k,_)=>{_.d(k,{q:()=>r});var e=_(177),t=_(4438),D=_(614),F=_(5383),T=_(3318),v=_(5794),f=_(60),x=_(9417),l=_(3825);function p(n,s){if(1&n){const o=t.RV6();t.j41(0,"button",16),t.bIt("click",function(){t.eBV(o);const u=t.XpG();return t.Njj(u.getEncryptedXml())}),t.nrm(1,"fa-icon",17),t.EFF(2," Upload Claim "),t.k0s()}if(2&n){const o=t.XpG();t.Y8G("disabled",o.is_uploading||!o.show_form||o.show_confirm_form),t.R7$(),t.Y8G("icon",o.faUpload)}}function m(n,s){if(1&n&&(t.j41(0,"option",26),t.EFF(1),t.k0s()),2&n){const o=s.$implicit;t.Y8G("value",o.code),t.R7$(),t.JRh(o.desc)}}function b(n,s){if(1&n&&t.nrm(0,"fa-icon",27),2&n){const o=t.XpG(2);t.Y8G("icon",o.faFileArrowUp)}}function y(n,s){if(1&n&&t.nrm(0,"fa-icon",28),2&n){const o=t.XpG(2);t.Y8G("icon",o.faCircleNotch)}}function h(n,s){if(1&n){const o=t.RV6();t.j41(0,"div",18)(1,"div")(2,"select",19),t.mxI("ngModelChange",function(u){t.eBV(o);const O=t.XpG();return t.DH7(O.doc_type,u)||(O.doc_type=u),t.Njj(u)}),t.DNE(3,m,2,2,"option",20),t.k0s()(),t.j41(4,"div",21)(5,"input",22),t.bIt("change",function(u){t.eBV(o);const O=t.XpG();return t.Njj(O.readXML(u.target.files[0]))}),t.k0s()(),t.j41(6,"div")(7,"button",23),t.bIt("click",function(){t.eBV(o);const u=t.XpG();return t.Njj(u.uploadDocs(u.file_to_upload))}),t.DNE(8,b,1,1,"fa-icon",24)(9,y,1,1,"fa-icon",25),t.EFF(10," Upload Document "),t.k0s()()()}if(2&n){const o=t.XpG();t.R7$(2),t.R50("ngModel",o.doc_type),t.R7$(),t.Y8G("ngForOf",o.doc_list),t.R7$(4),t.Y8G("disabled",!o.file_to_upload||!o.doc_type||o.is_uploading||!o.show_form),t.R7$(),t.Y8G("ngIf",!o.is_uploading),t.R7$(),t.Y8G("ngIf",o.is_uploading)}}function C(n,s){if(1&n){const o=t.RV6();t.j41(0,"tr",37)(1,"td",38),t.EFF(2),t.k0s(),t.j41(3,"td",39),t.EFF(4),t.k0s(),t.j41(5,"td",40)(6,"fa-icon",41),t.bIt("click",function(){const u=t.eBV(o).$implicit,O=t.XpG(3);return t.Njj(O.toggleModal("delete-item",u))}),t.k0s()()()}if(2&n){const o=s.$implicit,a=t.XpG(3);t.R7$(2),t.SpI(" ",o.doc_type_code," "),t.R7$(2),t.SpI(" ",a.getFileName(o.doc_url)," "),t.R7$(2),t.Y8G("icon",a.faTrash)}}function R(n,s){if(1&n&&(t.j41(0,"tbody"),t.DNE(1,C,7,3,"tr",36),t.k0s()),2&n){const o=t.XpG(2);t.R7$(),t.Y8G("ngForOf",o.uploaded_docs)}}function M(n,s){if(1&n&&(t.j41(0,"tbody")(1,"tr")(2,"td",42)(3,"div",43)(4,"div",44),t.nrm(5,"fa-icon",28),t.k0s(),t.j41(6,"div",45),t.EFF(7," Fetching uploaded documents... "),t.k0s()()()()()),2&n){const o=t.XpG(2);t.R7$(5),t.Y8G("icon",o.faCircleNotch)}}function P(n,s){if(1&n&&(t.j41(0,"div",29)(1,"table",30)(2,"thead",31)(3,"tr")(4,"th",32),t.EFF(5,"Document Type"),t.k0s(),t.j41(6,"th",33),t.EFF(7,"Document URL"),t.k0s(),t.j41(8,"th",34),t.EFF(9,"Action"),t.k0s()()(),t.DNE(10,R,2,1,"tbody",35)(11,M,8,1,"tbody",35),t.k0s()()),2&n){const o=t.XpG();t.R7$(10),t.Y8G("ngIf",o.show_form),t.R7$(),t.Y8G("ngIf",!o.show_form)}}function I(n,s){1&n&&(t.j41(0,"span"),t.EFF(1,","),t.k0s())}function j(n,s){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.DNE(2,I,2,0,"span",35),t.k0s()),2&n){const o=s.$implicit,a=s.last;t.R7$(),t.SpI(" ",o.doc_type_code,""),t.R7$(),t.Y8G("ngIf",!a)}}function w(n,s){if(1&n&&t.nrm(0,"fa-icon",52),2&n){const o=t.XpG(2);t.Y8G("icon",o.faCircleNotch)}}function g(n,s){if(1&n){const o=t.RV6();t.j41(0,"div",46)(1,"div",47),t.EFF(2," Are you sure all required documents have been uploaded and want to proceed on uploading this claim? "),t.k0s(),t.j41(3,"div",47)(4,"strong"),t.EFF(5,"Uploaded documents:\xa0"),t.k0s(),t.DNE(6,j,3,2,"span",12),t.k0s(),t.j41(7,"div",48)(8,"div")(9,"button",49),t.bIt("click",function(){t.eBV(o);const u=t.XpG();return t.Njj(u.confirmUpload())}),t.EFF(10," Cancel "),t.k0s(),t.j41(11,"button",50),t.bIt("click",function(){t.eBV(o);const u=t.XpG();return t.Njj(u.uploadClaim())}),t.DNE(12,w,1,1,"fa-icon",51),t.EFF(13),t.k0s()()()()}if(2&n){const o=t.XpG();t.R7$(6),t.Y8G("ngForOf",o.uploaded_docs),t.R7$(3),t.Y8G("disabled",o.is_uploading_claim),t.R7$(2),t.Y8G("disabled",o.is_uploading_claim),t.R7$(),t.Y8G("ngIf",o.is_uploading_claim),t.R7$(),t.SpI(" ",o.is_uploading_claim?"Uploading":"Upload"," ")}}function E(n,s){if(1&n&&(t.j41(0,"div",53)(1,"div",44),t.nrm(2,"fa-icon",28),t.k0s(),t.j41(3,"div",45),t.EFF(4," Retrieving XML... "),t.k0s()()),2&n){const o=t.XpG();t.R7$(2),t.Y8G("icon",o.faCircleNotch)}}function i(n,s){1&n&&(t.j41(0,"span"),t.EFF(1,","),t.k0s())}function c(n,s){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.DNE(2,i,2,0,"span",35),t.k0s()),2&n){const o=s.$implicit,a=s.last;t.R7$(),t.SpI(" ",o,""),t.R7$(),t.Y8G("ngIf",!a)}}function d(n,s){if(1&n){const o=t.RV6();t.j41(0,"app-delete-item",54),t.bIt("toggleModal",function(u){t.eBV(o);const O=t.XpG();return t.Njj(O.toggleModal(u))}),t.k0s()}if(2&n){const o=t.XpG();t.Y8G("url",o.delete_url)("delete_id",o.selected_doc_id)("delete_desc",o.delete_desc)}}let r=(()=>{class n{confirmUpload(){this.show_confirm_form=!this.show_confirm_form}getFileName(o){return o.split("/")[6]}getEncryptedXml(){this.is_retrieving_xml=!0,this.http.post("eclaims/create-enc-xml",{pHospitalTransmittalNo:this.selected_pHospitalTransmittalNo,program_desc:this.program_name}).subscribe({next:a=>{this.is_retrieving_xml=!1,this.confirmUpload(),this.encryptedXml=a.xml},error:a=>console.log(a)})}uploadClaim(){this.is_uploading_claim=!0,this.http.post("eclaims/upload-claim",{encryptedXml:this.encryptedXml,program_code:"cc"===this.program_name||"fp"===this.program_name?"mc":this.program_name}).subscribe({next:a=>{this.updateUploadData(a)},error:a=>{this.is_uploading_claim=!1,this.toastr.error(a.error.message,"Upload Claim",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0})}})}updateUploadData(o){let a=o["@attributes"],u={pHospitalTransmittalNo:this.selected_pHospitalTransmittalNo,pTransmissionControlNumber:a.pTransmissionControlNumber,pReceiptTicketNumber:a.pReceiptTicketNumber,pStatus:"IN PROCESS",pTransmissionDate:(0,e.Yq)(a.pTransmissionDate,"yyyy-MM-dd","en","Asia/Manila"),pTransmissionTime:(0,e.Yq)(new Date,"HH:mm:ss","en","Asia/Manila"),isSuccess:"Y",program_desc:this.program_name,program_code:"cc"===this.program_name||"fp"===this.program_name?"mc":this.program_name};this.http.post("eclaims/eclaims-upload",u).subscribe({next:O=>{this.ticket_number=O.data.pReceiptTicketNumber,this.toastr.success("Ticket Number: "+this.ticket_number,"Claim Uploaded!",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0}),this.is_uploading_claim=!1,this.closeModal()},error:O=>console.log(O)})}deleteDocs(o){}loadDocs(){this.show_form=!1,this.http.get("eclaims/eclaims-doc",{params:{pHospitalTransmittalNo:this.selected_pHospitalTransmittalNo,required:"N"}}).subscribe({next:a=>{console.log(a),this.uploaded_docs=a.data,this.show_form=!0},error:a=>console.log(a)})}uploadDocs(o){this.is_uploading=!0;const a=new FormData;if(!["application/pdf","text/xml","application/xml"].includes(this.file_to_upload.type))return this.is_uploading=!1,void this.toastr.error("Only PDF or XML files are allowed.","File Upload",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0});this.file_to_upload.size>2097152?(this.is_uploading=!1,this.toastr.error("File size exceeds the allowed limit 2MB","File Upload",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0})):(a.append("doc",this.file_to_upload),a.append("doc_type_code",this.doc_type),a.append("pHospitalTransmittalNo",this.selected_pHospitalTransmittalNo),a.append("program_desc",this.program_name),a.append("patient_id",this.patient.id),a.append("required","N"),this.http.post("eclaims/eclaims-doc",a).subscribe({next:O=>{console.log(O),this.loadDocs(),this.resetForm(),this.is_uploading=!1,this.toastr.success("Successfully uploaded.","EClaims Docs")},error:O=>{console.log(O),this.is_uploading=!1}}))}resetForm(){this.doc_type=null,this.file_to_upload=null}readXML(o){this.file_to_upload=o}getLibraries(){this.http.get("libraries/eclaims-doc-type").subscribe({next:o=>{this.doc_list=o.data,this.loadDocs()},error:o=>console.log(o)})}closeModal(){this.modalToggle.emit("upload-claims")}toggleModal(o,a){this.selected_doc_id=a?a.id:null,this.delete_desc=this.delete_desc+" "+(a?a.doc_type_code:""),this.modals[o]=!this.modals[o],!1===this.modals["delete-item"]&&this.loadDocs()}constructor(o,a){this.http=o,this.toastr=a,this.modalToggle=new t.bkB,this.faPenToSquare=D.LFz,this.faUpload=F.JmV,this.faTrash=F.yLS,this.faFileArrowUp=F.OFY,this.faCircleNotch=F.s4k,this.file_to_upload=null,this.doc_type=null,this.is_uploading=!1,this.uploading_claim=!1,this.modals=[],this.arr_CR4652=["CF2","CSF","CF3","SOA w/ CTC"],this.arr_CR4651=["CF2","CSF","CF3","SOA w/ CTC"],this.arr_CR4683=["CF2","CSF","CF3","SOA w/ CTC","Pink Card"],this.arr_CR4684=["CF2","CSF","CF3","SOA w/ CTC","Pink Card"],this.arr_CR4687=["CF2","CSF + NBS Sticker","PMRF","SOA w/ CTC","Birth Certificate"],this.arr_CR4656=["CF2","CSF","Treatment Card","SOA w/ CTC"],this.arr_CR4657=["CF2","CSF","Treatment Card","SOA w/ CTC"],this.arr_CR4658=["CF2","CSF","Treatment Card","SOA w/ CTC","Summary Report"],this.arr_CR4685=["CF2","CSF + Serial Sticker","SOA w/ CTC"],this.arr_CR0385=["CF2","CSF + Serial Number of Box","SOA w/ CTC"],this.arr_CR0456=["CF2","CSF","SOA"],this.arr_CR4655=["CF2","CSF","Smear Test for OMP"],this.is_retrieving_xml=!1,this.confirm_upload=!1,this.show_confirm_form=!1,this.is_uploading_claim=!1,this.show_ticket_number=!1,this.show_form=!1,this.delete_url="eclaims/eclaims-doc/",this.delete_desc="eClaims Document"}ngOnInit(){this.getLibraries(),this.required_docs=this["arr_"+this.caserate_code]}static{this.\u0275fac=function(a){return new(a||n)(t.rXU(T.k),t.rXU(v.tw))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-upload-claims"]],inputs:{selected_pHospitalTransmittalNo:"selected_pHospitalTransmittalNo",program_name:"program_name",patient:"patient",caserate_code:"caserate_code",selected_ticket_number:"selected_ticket_number"},outputs:{modalToggle:"modalToggle"},standalone:!1,decls:22,vars:8,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","55"],[1,"relative","p-4","w-full","max-w-4xl","h-full","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],["type","button","class","disabled:bg-gray-400 bg-white px-3 py-1 text-blue-500 rounded-md",3,"disabled","click",4,"ngIf"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],["class","grid grid-cols-3 gap-x-4 mx-5 my-2",4,"ngIf"],["class","shadow-md sm:rounded-lg m-4",4,"ngIf"],["class","grid grid-cols-1 m-8 rounded-md border border-rose-500 bg-rose-100 text-rose-700 p-5",4,"ngIf"],["class","grid grid-cols-1 mt-16",4,"ngIf"],[1,"flex","justify-between","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],[4,"ngFor","ngForOf"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-300","rounded","text-sm","font-medium","px-6","py-2.5","transition","duration-150","ease-in-out","transform","hover:scale-110",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[3,"url","delete_id","delete_desc","toggleModal",4,"ngIf"],["type","button",1,"disabled:bg-gray-400","bg-white","px-3","py-1","text-blue-500","rounded-md",3,"click","disabled"],[1,"pr-2",3,"icon"],[1,"grid","grid-cols-3","gap-x-4","mx-5","my-2"],["id","suffix_name","name","suffix_name",1,"input","mt-5",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","justify-center","mx-auto","py-5"],["type","file","id","formFile",1,"form-control","w-full","px-3","py-1.5","text-base","font-normal","text-gray-700","bg-white","bg-clip-padding","border","border-solid","border-gray-300","rounded-lg","transition","ease-in-out","m-0","focus:text-gray-700","focus:bg-white","focus:border-blue-600","focus:outline-none",3,"change"],["type","button",1,"mt-5","disabled:bg-gray-400","py-2","px-3","mb-5","bg-blue-500","text-white","rounded-lg","text-sm",3,"click","disabled"],[3,"icon",4,"ngIf"],["animation","spin",3,"icon",4,"ngIf"],[3,"value"],[3,"icon"],["animation","spin",3,"icon"],[1,"shadow-md","sm:rounded-lg","m-4"],[1,"table-fixed","w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6","text-center","w-3/12"],["scope","col",1,"py-3","px-6","text-center","w-7/12"],["scope","col",1,"py-3","px-6","text-center","w-2/12"],[4,"ngIf"],["class","bg-white border-b",4,"ngFor","ngForOf"],[1,"bg-white","border-b"],[1,"py-4","px-6","text-center","w-3/12"],[1,"py-4","px-6","w-7/12","whitespace-normal"],[1,"py-4","px-6","text-center","w-2/12"],[1,"mx-0","my-0","text-rose-500","hover:cursor-pointer","flex-none","mr-2",3,"click","icon"],["colspan","3"],[1,"grid","grid-cols-1","my-14"],[1,"flex","justify-center","text-blue-500"],[1,"flex","justify-center"],[1,"grid","grid-cols-1","m-8","rounded-md","border","border-rose-500","bg-rose-100","text-rose-700","p-5"],[1,"flex","mb-5"],[1,"flex","justify-end"],["type","button",1,"btn-save","bg-gray-400",3,"click","disabled"],["type","button",1,"btn-save","bg-rose-500","ml-5",3,"click","disabled"],["animation","spin","class","pr-2",3,"icon",4,"ngIf"],["animation","spin",1,"pr-2",3,"icon"],[1,"grid","grid-cols-1","mt-16"],[3,"toggleModal","url","delete_id","delete_desc"]],template:function(a,u){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.EFF(5),t.k0s(),t.j41(6,"div"),t.DNE(7,p,3,2,"button",5),t.k0s()(),t.j41(8,"div",6),t.DNE(9,h,11,5,"div",7)(10,P,12,2,"div",8)(11,g,14,5,"div",9)(12,E,5,1,"div",10),t.k0s(),t.j41(13,"div",11)(14,"div")(15,"strong"),t.EFF(16,"Required documents:"),t.k0s(),t.DNE(17,c,3,2,"span",12),t.k0s(),t.j41(18,"button",13),t.bIt("click",function(){return u.closeModal()}),t.EFF(19,"Close"),t.k0s()()()()(),t.nrm(20,"div",14),t.DNE(21,d,1,3,"app-delete-item",15)),2&a&&(t.R7$(5),t.SpI(" CLAIM: ",u.selected_pHospitalTransmittalNo," "),t.R7$(2),t.Y8G("ngIf",!u.selected_ticket_number),t.R7$(2),t.Y8G("ngIf",!u.is_retrieving_xml&&!u.show_confirm_form),t.R7$(),t.Y8G("ngIf",!u.is_retrieving_xml&&!u.show_confirm_form),t.R7$(),t.Y8G("ngIf",!u.is_retrieving_xml&&u.show_confirm_form),t.R7$(),t.Y8G("ngIf",u.is_retrieving_xml),t.R7$(5),t.Y8G("ngForOf",u.required_docs),t.R7$(4),t.Y8G("ngIf",u.modals["delete-item"]))},dependencies:[e.Sq,e.bT,f.aY,x.xH,x.y7,x.wz,x.BC,x.vS,l.c],encapsulation:2})}}return n})()},6929:(S,k,_)=>{_.d(k,{L:()=>d});var e=_(4438),t=_(614),D=_(5383),F=_(3318),T=_(5794),v=_(177),f=_(60),x=_(9417),l=_(3825);function p(r,n){if(1&r&&(e.j41(0,"option",25),e.EFF(1),e.k0s()),2&r){const s=n.$implicit;e.Y8G("value",s.code),e.R7$(),e.JRh(s.desc)}}function m(r,n){if(1&r&&e.nrm(0,"fa-icon",26),2&r){const s=e.XpG(2);e.Y8G("icon",s.faFileArrowUp)}}function b(r,n){if(1&r&&e.nrm(0,"fa-icon",27),2&r){const s=e.XpG(2);e.Y8G("icon",s.faCircleNotch)}}function y(r,n){if(1&r){const s=e.RV6();e.j41(0,"div",17)(1,"div")(2,"select",18),e.mxI("ngModelChange",function(a){e.eBV(s);const u=e.XpG();return e.DH7(u.doc_type,a)||(u.doc_type=a),e.Njj(a)}),e.DNE(3,p,2,2,"option",19),e.k0s()(),e.j41(4,"div",20)(5,"input",21),e.bIt("change",function(a){e.eBV(s);const u=e.XpG();return e.Njj(u.readXML(a.target.files[0]))}),e.k0s()(),e.j41(6,"div")(7,"button",22),e.bIt("click",function(){e.eBV(s);const a=e.XpG();return e.Njj(a.uploadDocs(a.file_to_upload))}),e.DNE(8,m,1,1,"fa-icon",23)(9,b,1,1,"fa-icon",24),e.EFF(10," Upload Document "),e.k0s()()()}if(2&r){const s=e.XpG();e.R7$(2),e.R50("ngModel",s.doc_type),e.R7$(),e.Y8G("ngForOf",s.doc_list),e.R7$(4),e.Y8G("disabled",!s.file_to_upload||!s.doc_type||s.is_uploading||!s.show_form),e.R7$(),e.Y8G("ngIf",!s.is_uploading),e.R7$(),e.Y8G("ngIf",s.is_uploading)}}function h(r,n){if(1&r){const s=e.RV6();e.j41(0,"tr",36)(1,"td",37),e.EFF(2),e.k0s(),e.j41(3,"td",38),e.EFF(4),e.k0s(),e.j41(5,"td",39)(6,"fa-icon",40),e.bIt("click",function(){const a=e.eBV(s).$implicit,u=e.XpG(3);return e.Njj(u.toggleModal("delete-item",a))}),e.k0s()()()}if(2&r){const s=n.$implicit,o=e.XpG(3);e.R7$(2),e.SpI(" ",s.doc_type_code," "),e.R7$(2),e.SpI(" ",o.getFileName(s.doc_url)," "),e.R7$(2),e.Y8G("icon",o.faTrash)}}function C(r,n){if(1&r&&(e.j41(0,"tbody"),e.DNE(1,h,7,3,"tr",35),e.k0s()),2&r){const s=e.XpG(2);e.R7$(),e.Y8G("ngForOf",s.uploaded_docs)}}function R(r,n){if(1&r&&(e.j41(0,"tbody")(1,"tr")(2,"td",41)(3,"div",42)(4,"div",43),e.nrm(5,"fa-icon",27),e.k0s(),e.j41(6,"div",44),e.EFF(7," Fetching uploaded documents... "),e.k0s()()()()()),2&r){const s=e.XpG(2);e.R7$(5),e.Y8G("icon",s.faCircleNotch)}}function M(r,n){if(1&r&&(e.j41(0,"div",28)(1,"table",29)(2,"thead",30)(3,"tr")(4,"th",31),e.EFF(5,"Document Type"),e.k0s(),e.j41(6,"th",32),e.EFF(7,"Document URL"),e.k0s(),e.j41(8,"th",33),e.EFF(9,"Action"),e.k0s()()(),e.DNE(10,C,2,1,"tbody",34)(11,R,8,1,"tbody",34),e.k0s()()),2&r){const s=e.XpG();e.R7$(10),e.Y8G("ngIf",s.show_form),e.R7$(),e.Y8G("ngIf",!s.show_form)}}function P(r,n){1&r&&(e.j41(0,"span"),e.EFF(1,","),e.k0s())}function I(r,n){if(1&r&&(e.j41(0,"span"),e.EFF(1),e.DNE(2,P,2,0,"span",34),e.k0s()),2&r){const s=n.$implicit,o=n.last;e.R7$(),e.SpI(" ",s.doc_type_code,""),e.R7$(),e.Y8G("ngIf",!o)}}function j(r,n){if(1&r&&e.nrm(0,"fa-icon",51),2&r){const s=e.XpG(2);e.Y8G("icon",s.faCircleNotch)}}function w(r,n){if(1&r){const s=e.RV6();e.j41(0,"div",45)(1,"div",46),e.EFF(2," Are you sure all required documents have been uploaded and want to proceed on uploading this claim? "),e.k0s(),e.j41(3,"div",46)(4,"strong"),e.EFF(5,"Uploaded documents:\xa0"),e.k0s(),e.DNE(6,I,3,2,"span",13),e.k0s(),e.j41(7,"div",47)(8,"div")(9,"button",48),e.bIt("click",function(){e.eBV(s);const a=e.XpG();return e.Njj(a.confirmUpload())}),e.EFF(10," Cancel "),e.k0s(),e.j41(11,"button",49),e.bIt("click",function(){e.eBV(s);const a=e.XpG();return e.Njj(a.uploadClaim())}),e.DNE(12,j,1,1,"fa-icon",50),e.EFF(13),e.k0s()()()()}if(2&r){const s=e.XpG();e.R7$(6),e.Y8G("ngForOf",s.uploaded_docs),e.R7$(3),e.Y8G("disabled",s.is_uploading_claim),e.R7$(2),e.Y8G("disabled",s.is_uploading_claim),e.R7$(),e.Y8G("ngIf",s.is_uploading_claim),e.R7$(),e.SpI(" ",s.is_uploading_claim?"Uploading":"Upload"," ")}}function g(r,n){if(1&r&&(e.j41(0,"div",52)(1,"div",43),e.nrm(2,"fa-icon",27),e.k0s(),e.j41(3,"div",44),e.EFF(4," Retrieving XML... "),e.k0s()()),2&r){const s=e.XpG();e.R7$(2),e.Y8G("icon",s.faCircleNotch)}}function E(r,n){1&r&&(e.j41(0,"span"),e.EFF(1,","),e.k0s())}function i(r,n){if(1&r&&(e.j41(0,"span"),e.EFF(1),e.DNE(2,E,2,0,"span",34),e.k0s()),2&r){const s=n.$implicit,o=n.last;e.R7$(),e.SpI(" ",s,""),e.R7$(),e.Y8G("ngIf",!o)}}function c(r,n){if(1&r){const s=e.RV6();e.j41(0,"app-delete-item",53),e.bIt("toggleModal",function(a){e.eBV(s);const u=e.XpG();return e.Njj(u.toggleModal(a))}),e.k0s()}if(2&r){const s=e.XpG();e.Y8G("url",s.delete_url)("delete_id",s.selected_doc_id)("delete_desc",s.delete_desc)}}let d=(()=>{class r{confirmUpload(){this.show_confirm_form=!this.show_confirm_form}getFileName(s){return s.split("/")[6]}getEncryptedXml(){this.is_retrieving_xml=!0,this.http.post("eclaims/create-required-xml",{pHospitalTransmittalNo:this.selected_pHospitalTransmittalNo,program_desc:this.program_name,program_code:"cc"===this.program_name||"fp"===this.program_name?"mc":this.program_name}).subscribe({next:o=>{this.is_retrieving_xml=!1,this.confirmUpload(),this.encryptedXml=o.xml},error:o=>console.log(o)})}uploadClaim(){this.is_uploading_claim=!0,this.http.post("eclaims/add-required-docs",{encryptedXml:this.encryptedXml,program_code:"cc"===this.program_name||"fp"===this.program_name?"mc":this.program_name,pClaimSeriesLhio:this.selected_series_lhio}).subscribe({next:o=>{this.updateUploadData()},error:o=>{this.is_uploading_claim=!1,this.toastr.error(o.error.message,"Upload Claim",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0})}})}updateUploadData(){this.http.post("eclaims/eclaims-upload",{pHospitalTransmittalNo:this.selected_pHospitalTransmittalNo,pStatus:"IN PROCESS",program_code:"cc"===this.program_name||"fp"===this.program_name?"mc":this.program_name}).subscribe({next:o=>{this.ticket_number=o.data.pReceiptTicketNumber,this.toastr.success("Ticket Number: "+this.ticket_number,"Claim Uploaded!",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0}),this.is_uploading_claim=!1,this.closeModal()},error:o=>console.log(o)})}deleteDocs(s){}loadDocs(){this.show_form=!1,this.http.get("eclaims/eclaims-doc",{params:{pHospitalTransmittalNo:this.selected_pHospitalTransmittalNo,required:"Y",program_code:"cc"===this.program_name||"fp"===this.program_name?"mc":this.program_name}}).subscribe({next:o=>{this.uploaded_docs=o.data,this.show_form=!0},error:o=>console.log(o)})}uploadDocs(s){this.is_uploading=!0;const o=new FormData;this.file_to_upload.size>2097152?(this.is_uploading=!1,this.toastr.error("File size exceeds the allowed limit 2MB","File Upload",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0})):(o.append("doc",this.file_to_upload),o.append("doc_type_code",this.doc_type),o.append("pHospitalTransmittalNo",this.selected_pHospitalTransmittalNo),o.append("program_desc",this.program_name),o.append("patient_id",this.patient.id),o.append("required","Y"),this.http.post("eclaims/eclaims-doc",o).subscribe({next:a=>{this.loadDocs(),this.resetForm(),this.is_uploading=!1,this.toastr.success("Successfully uploaded.","EClaims Docs")},error:a=>console.log(a)}))}resetForm(){this.doc_type=null,this.file_to_upload=null}readXML(s){this.file_to_upload=s}getLibraries(){this.http.get("libraries/eclaims-doc-type").subscribe({next:s=>{this.doc_list=s.data,this.loadDocs()},error:s=>console.log(s)})}closeModal(){this.modalToggle.emit("upload-required-claims")}toggleModal(s,o){this.selected_doc_id=o?o.id:null,this.delete_desc=this.delete_desc+" "+(o?o.doc_type_code:""),this.modals[s]=!this.modals[s],!1===this.modals["delete-item"]&&this.loadDocs()}constructor(s,o){this.http=s,this.toastr=o,this.modalToggle=new e.bkB,this.faPenToSquare=t.LFz,this.faUpload=D.JmV,this.faTrash=D.yLS,this.faFileArrowUp=D.OFY,this.faCircleNotch=D.s4k,this.file_to_upload=null,this.doc_type=null,this.is_uploading=!1,this.uploading_claim=!1,this.modals=[],this.arr_CR4652=["CF2","CSF","CF3","SOA w/ CTC"],this.arr_CR4651=["CF2","CSF","CF3","SOA w/ CTC"],this.arr_CR4683=["CF2","CSF","CF3","SOA w/ CTC","Pink Card"],this.arr_CR4684=["CF2","CSF","CF3","SOA w/ CTC","Pink Card"],this.arr_CR4687=["CF2","CSF + NBS Sticker","PMRF","SOA w/ CTC","Birth Certificate"],this.arr_CR4656=["CF2","CSF","Treatment Card","SOA w/ CTC"],this.arr_CR4657=["CF2","CSF","Treatment Card","SOA w/ CTC"],this.arr_CR4658=["CF2","CSF","Treatment Card","SOA w/ CTC","Summary Report"],this.arr_CR4685=["CF2","CSF + Serial Sticker","SOA w/ CTC"],this.arr_CR0385=["CF2","CSF + Serial Number of Box","SOA w/ CTC"],this.arr_CR0456=["CF2","CSF","SOA"],this.arr_CR4655=["CF2","CSF","Smear Test for OMP"],this.is_retrieving_xml=!1,this.confirm_upload=!1,this.show_confirm_form=!1,this.is_uploading_claim=!1,this.show_ticket_number=!1,this.show_form=!1,this.delete_url="eclaims/eclaims-doc/",this.delete_desc="eClaims Document"}ngOnInit(){this.getLibraries(),this.required_docs=this["arr_"+this.caserate_code]}static{this.\u0275fac=function(o){return new(o||r)(e.rXU(F.k),e.rXU(T.tw))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-upload-required-claims"]],inputs:{selected_pHospitalTransmittalNo:"selected_pHospitalTransmittalNo",program_name:"program_name",patient:"patient",caserate_code:"caserate_code",selected_ticket_number:"selected_ticket_number",selected_series_lhio:"selected_series_lhio",selected_transmission_control_no:"selected_transmission_control_no"},outputs:{modalToggle:"modalToggle"},standalone:!1,decls:24,vars:9,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","55"],[1,"relative","p-4","w-full","max-w-4xl","h-full","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],["type","button",1,"disabled:bg-gray-400","bg-white","px-3","py-1","text-blue-500","rounded-md",3,"click","disabled"],[1,"pr-2",3,"icon"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],["class","grid grid-cols-3 gap-x-4 mx-5 my-2",4,"ngIf"],["class","shadow-md sm:rounded-lg m-4",4,"ngIf"],["class","grid grid-cols-1 m-8 rounded-md border border-rose-500 bg-rose-100 text-rose-700 p-5",4,"ngIf"],["class","grid grid-cols-1 mt-16",4,"ngIf"],[1,"flex","justify-between","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],[4,"ngFor","ngForOf"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-300","rounded","text-sm","font-medium","px-6","py-2.5","transition","duration-150","ease-in-out","transform","hover:scale-110",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[3,"url","delete_id","delete_desc","toggleModal",4,"ngIf"],[1,"grid","grid-cols-3","gap-x-4","mx-5","my-2"],["id","suffix_name","name","suffix_name",1,"input","mt-5",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","justify-center","mx-auto","py-5"],["type","file","id","formFile",1,"form-control","w-full","px-3","py-1.5","text-base","font-normal","text-gray-700","bg-white","bg-clip-padding","border","border-solid","border-gray-300","rounded-lg","transition","ease-in-out","m-0","focus:text-gray-700","focus:bg-white","focus:border-blue-600","focus:outline-none",3,"change"],["type","button",1,"mt-5","disabled:bg-gray-400","py-2","px-3","mb-5","bg-blue-500","text-white","rounded-lg","text-sm",3,"click","disabled"],[3,"icon",4,"ngIf"],["animation","spin",3,"icon",4,"ngIf"],[3,"value"],[3,"icon"],["animation","spin",3,"icon"],[1,"shadow-md","sm:rounded-lg","m-4"],[1,"table-fixed","w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6","text-center","w-3/12"],["scope","col",1,"py-3","px-6","text-center","w-7/12"],["scope","col",1,"py-3","px-6","text-center","w-2/12"],[4,"ngIf"],["class","bg-white border-b",4,"ngFor","ngForOf"],[1,"bg-white","border-b"],[1,"py-4","px-6","text-center","w-3/12"],[1,"py-4","px-6","w-7/12","whitespace-normal"],[1,"py-4","px-6","text-center","w-2/12"],[1,"mx-0","my-0","text-rose-500","hover:cursor-pointer","flex-none","mr-2",3,"click","icon"],["colspan","3"],[1,"grid","grid-cols-1","my-14"],[1,"flex","justify-center","text-blue-500"],[1,"flex","justify-center"],[1,"grid","grid-cols-1","m-8","rounded-md","border","border-rose-500","bg-rose-100","text-rose-700","p-5"],[1,"flex","mb-5"],[1,"flex","justify-end"],["type","button",1,"btn-save","bg-gray-400",3,"click","disabled"],["type","button",1,"btn-save","bg-rose-500","ml-5",3,"click","disabled"],["animation","spin","class","pr-2",3,"icon",4,"ngIf"],["animation","spin",1,"pr-2",3,"icon"],[1,"grid","grid-cols-1","mt-16"],[3,"toggleModal","url","delete_id","delete_desc"]],template:function(o,a){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e.EFF(5),e.k0s(),e.j41(6,"div")(7,"button",5),e.bIt("click",function(){return a.getEncryptedXml()}),e.nrm(8,"fa-icon",6),e.EFF(9," Upload Required Docs "),e.k0s()()(),e.j41(10,"div",7),e.DNE(11,y,11,5,"div",8)(12,M,12,2,"div",9)(13,w,14,5,"div",10)(14,g,5,1,"div",11),e.k0s(),e.j41(15,"div",12)(16,"div")(17,"strong"),e.EFF(18,"Required documents:"),e.k0s(),e.DNE(19,i,3,2,"span",13),e.k0s(),e.j41(20,"button",14),e.bIt("click",function(){return a.closeModal()}),e.EFF(21,"Close"),e.k0s()()()()(),e.nrm(22,"div",15),e.DNE(23,c,1,3,"app-delete-item",16)),2&o&&(e.R7$(5),e.SpI(" CLAIM: ",a.selected_pHospitalTransmittalNo," "),e.R7$(2),e.Y8G("disabled",a.is_uploading||!a.show_form||a.show_confirm_form),e.R7$(),e.Y8G("icon",a.faUpload),e.R7$(3),e.Y8G("ngIf",!a.is_retrieving_xml&&!a.show_confirm_form),e.R7$(),e.Y8G("ngIf",!a.is_retrieving_xml&&!a.show_confirm_form),e.R7$(),e.Y8G("ngIf",!a.is_retrieving_xml&&a.show_confirm_form),e.R7$(),e.Y8G("ngIf",a.is_retrieving_xml),e.R7$(5),e.Y8G("ngForOf",a.required_docs),e.R7$(4),e.Y8G("ngIf",a.modals["delete-item"]))},dependencies:[v.Sq,v.bT,f.aY,x.xH,x.y7,x.wz,x.BC,x.vS,l.c],encapsulation:2})}}return r})()},1470:(S,k,_)=>{_.d(k,{o:()=>D});var e=_(177),t=_(4438);let D=(()=>{class F{constructor(){this.toggleModal=new t.bkB}closeModal(){this.toggleModal.emit("voucher-details")}parseReason(v){if(!v)return"";let f="object"==typeof v?JSON.stringify(v):v;if("["!==f.charAt(0)&&"{"!==f.charAt(0))return f;f=JSON.parse(f);const x=h=>{if("object"!=typeof h||null===h)return h;h["@attributes"]&&delete(h={...h,...h["@attributes"]})["@attributes"];for(const C in h)"object"==typeof h[C]&&(h[C]=Array.isArray(h[C])?h[C].map(R=>x(R)):x(h[C]));return h};f=x(f);const l=h=>{let C='<table border="1" cellpadding="5" cellspacing="0" style="border-collapse: collapse; width: 100%; margin-bottom: 10px;">';C+="<thead><tr><th>Key</th><th>Value</th></tr></thead><tbody>";for(const[R,M]of h)C+=`<tr><td><b>${R}</b></td><td>${M??""}</td></tr>`;return C+="</tbody></table>",C};let p="";const m=[],b=[];for(const[h,C]of Object.entries(f))"CHARGE"!==h?m.push([h,C]):b.push([h,C]);p+=l(m);const y=f.CHARGE||[];return Array.isArray(y)&&y.forEach((h,C)=>{p+=`<div><strong>CHARGE ${C+1}</strong></div>`,p+=l(Object.entries(h))}),p}static{this.\u0275fac=function(f){return new(f||F)}}static{this.\u0275cmp=t.VBU({type:F,selectors:[["app-voucher-details"]],inputs:{voucher_details:"voucher_details"},outputs:{toggleModal:"toggleModal"},decls:12,vars:1,consts:[["id","defaultModal","tabindex","-1","aria-hidden","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-full","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"overflow-y-auto","scrollbar-thin","h-96","scrollbar-thumb-gray-400","scrollbar-track-gray-100","flex","justify-center"],[3,"innerHTML"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"text-white","bg-orange-500","hover:ring-2","focus:outline-none","hover:ring-orange-300","rounded","text-sm","font-medium","px-6","py-2.5","transition","duration-150","ease-in-out","transform","hover:scale-110",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"]],template:function(f,x){1&f&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.EFF(5," VOUCHER DETAILS "),t.k0s()(),t.j41(6,"div",5),t.nrm(7,"span",6),t.k0s(),t.j41(8,"div",7)(9,"button",8),t.bIt("click",function(){return x.closeModal()}),t.EFF(10,"Close"),t.k0s()()()()(),t.nrm(11,"div",9)),2&f&&(t.R7$(7),t.Y8G("innerHTML",x.parseReason(x.voucher_details),t.npT))},dependencies:[e.MD],encapsulation:2})}}return F})()},4959:(S,k,_)=>{_.d(k,{u:()=>b});var e=_(177),t=_(60),D=_(4626),F=_(9417),T=_(928),v=_(9726),f=_(1410),x=_(3825),l=_(2101),p=_(1470),m=_(4438);let b=(()=>{class y{static{this.\u0275fac=function(R){return new(R||y)}}static{this.\u0275mod=m.$C({type:y})}static{this.\u0275inj=m.G2t({imports:[e.MD,t.dX,D.J,F.X1,F.YN,T.ER,v.jN,f.x,x.c,l.U,p.o]})}}return y})()},3825:(S,k,_)=>{_.d(k,{c:()=>x});var e=_(4438),t=_(9417),D=_(60),F=_(5383),T=_(3318),v=_(5794);const f=["confirmCode"];let x=(()=>{class l{generateCode(){this.is_loading=!1,this.confirmation_code=null,this.confirm_code=Math.floor(1e3*Math.random()).toString().padStart(4,"0")}onSubmit(){this.is_loading=!0,this.confirm_code===this.confirmation_code?this.http.delete(this.url,this.delete_id).subscribe({next:()=>{this.is_loading=!1,this.toastr.error("Record was deleted!"),this.closeModal()},error:m=>{console.log(m),this.is_loading=!1,this.generateCode()}}):(this.generateCode(),this.toastr.info("Code mismatch, please try again","Incorrect Code"))}closeModal(){this.toggleModal.emit("delete-item")}constructor(m,b){this.http=m,this.toastr=b,this.toggleModal=new e.bkB,this.faTrash=F.yLS,this.confirm_code="0000",this.is_loading=!1}ngOnChanges(m){this.generateCode()}ngAfterViewInit(){this.inputElement.nativeElement.focus()}static{this.\u0275fac=function(b){return new(b||l)(e.rXU(T.k),e.rXU(v.tw))}}static{this.\u0275cmp=e.VBU({type:l,selectors:[["app-delete-item"]],viewQuery:function(b,y){if(1&b&&e.GBs(f,5),2&b){let h;e.mGM(h=e.lsd())&&(y.inputElement=h.first)}},inputs:{url:"url",delete_id:"delete_id",delete_desc:"delete_desc"},outputs:{toggleModal:"toggleModal"},features:[e.OA$],decls:29,vars:8,consts:[["confirmCode",""],["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-red-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"flex","item-start","flex-wrap","pb-5"],[1,"grid","grid-cols-3","px-5","py-5","mt-10","mx-10","w-full","bg-red-50","rounded-lg","text-center"],[1,"col-span-3","text-left","mb-2","pb-2","border-b","border-slate-200"],[1,"col-span-1","text-sm","px-5","py-2","mt-2"],[1,"block","mb-3"],[1,"font-bold","text-2xl","select-none"],["for","confirmCode"],["name","confirmCode","type","text",1,"mt-2","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","pl-3","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"keyup.enter","ngModelChange","ngModel"],[1,"col-span-1","mt-11"],["type","button",1,"my-auto","text-white","bg-red-500","enabled:hover:ring-2","enabled:focus:outline-none","enabled:hover:ring-red-300","disabled:bg-gray-300","font-medium","rounded","text-sm","px-6","py-2.5","text-center","transition","duration-150","ease-in-out",3,"click","disabled"],[1,"mx-0","my-0","text-white",3,"icon"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-200","rounded","text-sm","font-medium","my-2","px-6","py-2.5","transition","duration-150","ease-in-out",3,"click","disabled"],[1,"opacity-50","fixed","inset-0","z-[59]","bg-black"]],template:function(b,y){if(1&b){const h=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h3",5),e.EFF(5),e.k0s()(),e.j41(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),e.EFF(10),e.k0s(),e.j41(11,"div",10)(12,"span",11),e.EFF(13,"Delete Code"),e.k0s(),e.j41(14,"span",12),e.EFF(15),e.k0s()(),e.j41(16,"div",10)(17,"label",13),e.EFF(18,"Enter Code"),e.k0s(),e.j41(19,"input",14,0),e.bIt("keyup.enter",function(){return e.eBV(h),e.Njj(y.onSubmit())}),e.mxI("ngModelChange",function(R){return e.eBV(h),e.DH7(y.confirmation_code,R)||(y.confirmation_code=R),e.Njj(R)}),e.k0s()(),e.j41(21,"div",15)(22,"button",16),e.bIt("click",function(){return e.eBV(h),e.Njj(y.onSubmit())}),e.nrm(23,"fa-icon",17),e.EFF(24," Delete "),e.k0s()()()()(),e.j41(25,"div",18)(26,"button",19),e.bIt("click",function(){return e.eBV(h),e.Njj(y.closeModal())}),e.EFF(27,"Cancel"),e.k0s()()()()(),e.nrm(28,"div",20)}2&b&&(e.R7$(5),e.Lme(" Delete ",y.delete_desc,": ",y.delete_id," "),e.R7$(5),e.SpI(" Your are about to delete a ",y.delete_desc," record for this patient. Please enter the generated delete code in order to proceed. "),e.R7$(5),e.JRh(y.confirm_code),e.R7$(4),e.R50("ngModel",y.confirmation_code),e.R7$(3),e.Y8G("disabled",!y.confirmation_code||y.is_loading),e.R7$(),e.Y8G("icon",y.faTrash),e.R7$(3),e.Y8G("disabled",y.is_loading))},dependencies:[D.dX,D.aY,t.YN,t.me,t.BC,t.vS],encapsulation:2,changeDetection:0})}}return l})()},9726:(S,k,_)=>{_.d(k,{GV:()=>T,jN:()=>v});var e=_(4438);let t=(()=>{class f{_printStyle=[];_styleSheetFile="";setPrintStyle(l){this._printStyle=[];for(let p in l)l.hasOwnProperty(p)&&this._printStyle.push((p+JSON.stringify(l[p])).replace(/['"]+/g,""))}returnStyleValues(){return`<style> ${this._printStyle.join(" ").replace(/,/g,";")} </style>`}returnStyleSheetLinkTags(){return this._styleSheetFile}setStyleSheetFile(l){let p=function(m){return`<link rel="stylesheet" type="text/css" href="${m}">`};if(-1!==l.indexOf(",")){const m=l.split(",");this._styleSheetFile=m.map(b=>p(b)).join("")}else this._styleSheetFile=p(l)}updateInputDefaults(l){for(let p=0;p<l.length;p++){const m=l[p];m.defaultValue=m.value,m.checked&&(m.defaultChecked=!0)}}updateSelectDefaults(l){for(let p=0;p<l.length;p++){const m=l[p];m.options[m.selectedIndex].defaultSelected=!0}}updateTextAreaDefaults(l){for(let p=0;p<l.length;p++){const m=l[p];m.defaultValue=m.value}}canvasToImageHtml(l){return`<img src="${l.toDataURL()}" style="max-width: 100%;">`}updateCanvasToImage(l){for(let p=0;p<l.length;p++){const m=this.canvasToImageHtml(l[p]);l[p].insertAdjacentHTML("afterend",m),l[p].remove()}}getHtmlContents(l){const p=document.getElementById(l);if(!p)return null;const m=p.getElementsByTagName("input"),b=p.getElementsByTagName("select"),y=p.getElementsByTagName("textarea"),h=p.getElementsByTagName("canvas");return this.updateInputDefaults(m),this.updateSelectDefaults(b),this.updateTextAreaDefaults(y),this.updateCanvasToImage(h),p.innerHTML}getElementTag(l){const p=[],m=document.getElementsByTagName(l);for(let b=0;b<m.length;b++)p.push(m[b].outerHTML);return p.join("\r\n")}print(l){let p="",m="",b="top=0,left=0,height=auto,width=auto";const y=this.getElementTag("base");l.useExistingCss&&(p=this.getElementTag("style"),m=this.getElementTag("link")),l.openNewTab&&(b="");const h=this.getHtmlContents(l.printSectionId);if(!h)return void console.error(`Print section with id ${l.printSectionId} not found.`);const C=window.open("","_blank",b);C?(C.document.open(),C.document.write(`\n          <html>\n            <head>\n              <title>${l.printTitle?l.printTitle:""}</title>\n              ${y}\n              ${this.returnStyleValues()}\n              ${this.returnStyleSheetLinkTags()}\n              ${p}\n              ${m}\n            </head>\n            <body ${l.bodyClass?`class="${l.bodyClass}"`:""}>\n              ${h}\n              <script defer>\n                function triggerPrint(event) {\n                  window.removeEventListener('load', triggerPrint, false);\n                  ${l.previewOnly?"":`setTimeout(function() {\n                    closeWindow(window.print());\n                  }, ${l.printDelay});`}\n                }\n                function closeWindow(){\n                  ${l.closeWindow?"window.close();":""}\n                }\n                window.addEventListener('load', triggerPrint, false);\n              <\/script>\n            </body>\n          </html>`),C.document.close()):console.error("Could not open print window.")}static \u0275fac=function(p){return new(p||f)};static \u0275prov=e.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}return f})();class F{printSectionId=null;printTitle=null;useExistingCss=!1;bodyClass="";openNewTab=!1;previewOnly=!1;closeWindow=!0;printDelay=0;constructor(x){x&&Object.assign(this,x)}}let T=(()=>{class f extends t{printOptions=new F;set previewOnly(l){this.printOptions={...this.printOptions,previewOnly:l}}set printSectionId(l){this.printOptions={...this.printOptions,printSectionId:l}}set printTitle(l){this.printOptions={...this.printOptions,printTitle:l}}set useExistingCss(l){this.printOptions={...this.printOptions,useExistingCss:l}}set printDelay(l){this.printOptions={...this.printOptions,printDelay:l}}set closeWindow(l){this.printOptions={...this.printOptions,closeWindow:l}}set bodyClass(l){this.printOptions={...this.printOptions,bodyClass:l}}set openNewTab(l){this.printOptions={...this.printOptions,openNewTab:l}}set printStyle(l){super.setPrintStyle(l)}set styleSheetFile(l){super.setStyleSheetFile(l)}print(){super.print(this.printOptions)}static \u0275fac=(()=>{let l;return function(m){return(l||(l=e.xGo(f)))(m||f)}})();static \u0275dir=e.FsC({type:f,selectors:[["button","ngxPrint",""]],hostBindings:function(p,m){1&p&&e.bIt("click",function(){return m.print()})},inputs:{previewOnly:"previewOnly",printSectionId:"printSectionId",printTitle:"printTitle",useExistingCss:"useExistingCss",printDelay:"printDelay",closeWindow:"closeWindow",bodyClass:"bodyClass",openNewTab:"openNewTab",printStyle:"printStyle",styleSheetFile:"styleSheetFile"},features:[e.Vt3]})}return f})(),v=(()=>{class f{static \u0275fac=function(p){return new(p||f)};static \u0275mod=e.$C({type:f});static \u0275inj=e.G2t({})}return f})()}}]);