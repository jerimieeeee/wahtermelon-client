"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[209],{1209:(q,g,s)=>{s.r(g),s.d(g,{AccountListModule:()=>L});var l=s(6814),_=s(3602),d=s(590),t=s(5879),h=s(265),m=s(5597),p=s(6223);function A(n,c){if(1&n&&(t.TgZ(0,"button",17),t._UZ(1,"fa-icon",18),t._uU(2," Updating "),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faSpinner)}}function y(n,c){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const e=c.$implicit;t.xp6(1),t.Oqu(e.value)}}function v(n,c){if(1&n&&(t.TgZ(0,"div",19)(1,"div",20)(2,"ul",21),t.YNc(3,y,2,1,"li",22),t.ALo(4,"keyvalue"),t.qZA()()()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",t.lcZ(4,1,e.submit_error))}}const Z=function(n){return{"bg-gray-50":n}},C=function(n){return{"text-red-500":n}},f=function(n){return{"peer-checked:bg-gray-600":n}};function T(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"tr",23)(1,"th",24),t._uU(2),t.qZA(),t.TgZ(3,"td",25),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td",25),t._uU(7),t.qZA(),t.TgZ(8,"td",25),t._uU(9),t.qZA(),t.TgZ(10,"td",25),t._uU(11),t.qZA(),t.TgZ(12,"td",26)(13,"div")(14,"input",27),t.NdJ("ngModelChange",function(o){const r=t.CHM(e).index,u=t.oxw();return t.KtG(u.account_list[r].reports_flag=o)})("change",function(){const i=t.CHM(e).index,r=t.oxw();return t.KtG(r.updateActive(r.account_list[i],i))}),t.qZA(),t._UZ(15,"label",28),t.qZA()(),t.TgZ(16,"td",26)(17,"label",29)(18,"input",30),t.NdJ("ngModelChange",function(o){const r=t.CHM(e).index,u=t.oxw();return t.KtG(u.account_list[r].is_active=o)})("change",function(){const i=t.CHM(e).index,r=t.oxw();return t.KtG(r.updateActive(r.account_list[i],i))}),t.qZA(),t._UZ(19,"div",31),t.qZA()()()}if(2&n){const e=c.$implicit,a=c.odd,o=c.index,i=t.oxw();t.Q6J("ngClass",t.VKq(20,Z,a))("ngClass",t.VKq(22,C,!e.employer)),t.xp6(2),t.HOy(" ",e.last_name,", ",e.first_name," ","NA"===e.middle_name?"":e.middle_name," ","NA"===e.suffix_name?"":e.suffix_name," "),t.xp6(2),t.hij(" ",t.Dn7(5,16,e.birtdate,"MM/dd/yyyy","Asia/Manila")," "),t.xp6(3),t.hij(" ",e.gender," "),t.xp6(2),t.hij(" ",e.contact_number," "),t.xp6(2),t.hij(" ",e.email," "),t.xp6(3),t.Q6J("ngModel",i.account_list[o].reports_flag)("disabled",i.is_updating||!i.account_list[o].is_active),t.xp6(1),t.Q6J("ngClass",t.VKq(24,f,i.is_updating)),t.xp6(3),t.Q6J("ngModel",i.account_list[o].is_active)("disabled",i.is_updating),t.xp6(1),t.Q6J("ngClass",t.VKq(26,f,i.is_updating))}}function w(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",32)(2,"div",33)(3,"div")(4,"p",34),t._uU(5," Showing "),t.TgZ(6,"span",35),t._uU(7),t.qZA(),t._uU(8," to "),t.TgZ(9,"span",35),t._uU(10),t.qZA(),t._uU(11," of "),t.TgZ(12,"span",35),t._uU(13),t.qZA(),t._uU(14," results "),t.qZA()(),t.TgZ(15,"div")(16,"nav",36)(17,"button",37),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.loadAccount(1))}),t._UZ(18,"fa-icon",38),t.qZA(),t.TgZ(19,"button",39),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.loadAccount(o.current_page-1))}),t._UZ(20,"fa-icon",38),t._uU(21,"Previous "),t.qZA(),t.TgZ(22,"button",39),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.loadAccount(o.current_page+1))}),t._uU(23," Next"),t._UZ(24,"fa-icon",40),t.qZA(),t.TgZ(25,"button",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.loadAccount(o.last_page))}),t._UZ(26,"fa-icon",40),t.qZA()()()()()()}if(2&n){const e=t.oxw();t.xp6(7),t.Oqu(e.from),t.xp6(3),t.Oqu(e.to),t.xp6(3),t.Oqu(e.total),t.xp6(4),t.Q6J("disabled",1===e.current_page),t.xp6(1),t.Q6J("icon",e.faAnglesLeft),t.xp6(1),t.Q6J("disabled",1===e.current_page),t.xp6(1),t.Q6J("icon",e.faChevronLeft),t.xp6(2),t.Q6J("disabled",e.current_page===e.last_page),t.xp6(2),t.Q6J("icon",e.faChevronRight),t.xp6(1),t.Q6J("disabled",e.current_page===e.last_page),t.xp6(1),t.Q6J("icon",e.faAnglesRight)}}const U=[{path:"",component:(()=>{var n;class c{loadAccount(a){let o={params:{}};this.search_item&&(o.params["filter[search]"]=this.search_item),a&&(o.params.page=a),o.params.per_page=this.per_page,this.http.get("users",o).subscribe({next:i=>{console.log(i.data),this.account_list=i.data,this.current_page=i.meta.current_page,this.last_page=i.meta.last_page,this.from=i.meta.from,this.to=i.meta.to,this.total=i.meta.total},error:i=>console.log(i)})}updateReports(a,o){}updateActive(a,o,i){this.is_updating=!0;let r=a;const u=r.id,b=r.email;r.birthdate=(0,l.p6)(r.birthdate,"yyyy-MM-dd","en","Asia/Manila"),r.employer_code=r.employer?r.employer.code:null,r.designation_code=r.designation?r.designation.code:null,r.facility_code=r.facility?r.facility.code:null,delete r.email,delete r.id,this.http.update("users/",u,r).subscribe({next:x=>{this.is_updating=!1,r.email=b,r.id=u},error:x=>{"status"===i&&(this.account_list[o].is_active=!r.is_active),"reports"===i&&(this.account_list[o].reports_flag=!r.reports_flag),this.submit_error=x.error.errors,r.email=b,this.is_updating=!1}})}constructor(a){this.http=a,this.faSpinner=d.LM3,this.faChevronLeft=d.A35,this.faChevronRight=d._tD,this.faAnglesLeft=d._Wx,this.faAnglesRight=d.ccb,this.faSearch=d.wn1,this.is_updating=!1,this.per_page=10}ngOnInit(){this.loadAccount()}}return(n=c).\u0275fac=function(a){return new(a||n)(t.Y36(h.O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-account-list"]],decls:38,vars:6,consts:[[1,"bg-white","border","border-solid","border-slate-100","rounded-xl","shadow-md"],[1,"border","border-solid","border-slate-100","rounded-t-xl","font-semibold","justify-between"],[1,"flex","border","border-solid","border-slate-100","rounded-t-xl","p-3","font-semibold","justify-between"],[1,"text-blue-500","text-lg","pt-2","pl-5"],["class","text-white-500 bg-amber-500 active:bg-amber-300 hover:bg-amber-600 text-sm px-4 py-2 rounded hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150","type","button",4,"ngIf"],[1,"border","border-gray-400","rounded-md"],["type","text","placeholder","Search family",1,"form-input","border-0","text-sm","p-1","m-1","border-r","border-gray-400",3,"ngModel","ngModelChange","keyup.enter"],["type","button",1,"text-blue-500","w-9","h-9",3,"click"],[1,"-ml-1",3,"icon"],["class","col-span-8 bg-red-200 rounded border border-red-300 text-red-900 text-sm",4,"ngIf"],[1,"overflow-x-auto","relative","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400","mb-5"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6"],["scope","col",1,"py-3","px-6","text-center"],["class","bg-white border-t",3,"ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],["type","button",1,"text-white-500","bg-amber-500","active:bg-amber-300","hover:bg-amber-600","text-sm","px-4","py-2","rounded","hover:shadow-lg","outline-none","focus:outline-none","mr-1","mb-1","ease-linear","transition-all","duration-150"],["spin","true",1,"mr-3",3,"icon"],[1,"col-span-8","bg-red-200","rounded","border","border-red-300","text-red-900","text-sm"],[1,"block","p-3","pl-10"],[1,"list-disc"],[4,"ngFor","ngForOf"],[1,"bg-white","border-t",3,"ngClass"],["scope","row",1,"py-4","px-6","font-medium","whitespace-nowrap"],[1,"py-4","px-6"],[1,"py-4","px-6","text-center"],["type","checkbox",1,"input-checkbox",3,"ngModel","disabled","ngModelChange","change"],[1,"",3,"ngClass"],[1,"inline-flex","relative","items-center","cursor-pointer"],["type","checkbox",1,"sr-only","peer",3,"ngModel","disabled","ngModelChange","change"],[1,"w-14","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-blue-300","rounded-full","peer","peer-checked:after:translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:left-[8px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","peer-checked:bg-blue-600","disabled:opacity-7",3,"ngClass"],[1,"bg-white","px-4","py-3","flex","items-center","justify-between","border-t","border-gray-200","sm:px-6"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"text-sm","text-gray-700"],[1,"font-medium"],["aria-label","Pagination",1,"relative","z-0","inline-flex","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"disabled","click"],[1,"block","h-15","w-15","text-gray-500","pr-1",3,"icon"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","bg-white","text-sm","font-medium","text-gray-700","hover:bg-gray-50",3,"disabled","click"],[1,"h-5","w-5","text-gray-500",3,"icon"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"disabled","click"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4," User accounts "),t.qZA(),t.TgZ(5,"div"),t.YNc(6,A,3,1,"button",4),t.qZA(),t.TgZ(7,"div",5)(8,"input",6),t.NdJ("ngModelChange",function(r){return o.search_item=r})("keyup.enter",function(){return o.loadAccount()}),t.qZA(),t.TgZ(9,"button",7),t.NdJ("click",function(){return o.loadAccount()}),t._UZ(10,"fa-icon",8),t.qZA()()(),t.YNc(11,v,5,3,"div",9),t.TgZ(12,"div")(13,"div",10)(14,"table",11)(15,"thead",12)(16,"tr")(17,"th",13),t._uU(18,"Name"),t.qZA(),t.TgZ(19,"th",13),t._uU(20,"Birthdate"),t.qZA(),t.TgZ(21,"th",13),t._uU(22,"Gender"),t.qZA(),t.TgZ(23,"th",13),t._uU(24,"Contact Number"),t.qZA(),t.TgZ(25,"th",13),t._uU(26,"Email Address"),t.qZA(),t.TgZ(27,"th",14),t._uU(28,"Provincial "),t._UZ(29,"br"),t._uU(30," Report"),t.qZA(),t.TgZ(31,"th",14),t._uU(32,"Active "),t._UZ(33,"br"),t._uU(34," Status"),t.qZA()()(),t.TgZ(35,"tbody"),t.YNc(36,T,20,28,"tr",15),t.qZA()()()()(),t.YNc(37,w,27,11,"div",16),t.qZA()),2&a&&(t.xp6(6),t.Q6J("ngIf",o.is_updating),t.xp6(2),t.Q6J("ngModel",o.search_item),t.xp6(2),t.Q6J("icon",o.faSearch),t.xp6(1),t.Q6J("ngIf",o.submit_error),t.xp6(25),t.Q6J("ngForOf",o.account_list),t.xp6(1),t.Q6J("ngIf",(null==o.account_list?null:o.account_list.length)>=1))},dependencies:[l.mk,l.sg,l.O5,m.BN,p.Fj,p.Wl,p.JJ,p.On,l.uU,l.Nd]}),c})()}];let M=(()=>{var n;class c{}return(n=c).\u0275fac=function(a){return new(a||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[_.Bz.forChild(U),_.Bz]}),c})(),L=(()=>{var n;class c{}return(n=c).\u0275fac=function(a){return new(a||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.ez,M,m.uH,p.u5]}),c})()}}]);