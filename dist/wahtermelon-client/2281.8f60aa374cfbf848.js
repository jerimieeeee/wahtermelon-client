"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[2281],{2281:(j,x,_)=>{_.r(x),_.d(x,{AdolescentModule:()=>Cs});var c=_(177),d=_(3895),a=_(5383),F=_(7468),e=_(4438),h=_(3318),p=_(5794),n=_(9417),S=_(9217),m=_(60);function b(s,l){1&s&&(e.j41(0,"p",32),e.EFF(1,"This date already exists!"),e.k0s())}function f(s,l){if(1&s&&(e.j41(0,"option",33),e.EFF(1),e.nI1(2,"titlecase"),e.k0s()),2&s){const t=l.$implicit;e.Y8G("value",t.name),e.R7$(),e.JRh(e.bMT(2,2,t.name))}}function y(s,l){if(1&s&&(e.j41(0,"option",33),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.Y8G("value",t.code),e.R7$(),e.JRh(t.desc)}}function k(s,l){if(1&s&&(e.j41(0,"option",33),e.EFF(1),e.nI1(2,"titlecase"),e.k0s()),2&s){const t=l.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(e.bMT(2,2,t.desc))}}function G(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",34)(1,"div",35)(2,"input",36),e.bIt("change",function(i){e.eBV(t);const r=e.XpG();return r.openModal(),e.Njj(!i.target.checked&&r.visitForm.patchValue({refusal_reason:"",other_refusal:""}))}),e.k0s(),e.j41(3,"label",37),e.EFF(4," The patient/guardian Withdrew Consent. "),e.k0s()()()}}function A(s,l){if(1&s&&(e.j41(0,"option",33),e.EFF(1),e.nI1(2,"titlecase"),e.k0s()),2&s){const t=l.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(e.bMT(2,2,t.desc))}}function M(s,l){if(1&s&&(e.j41(0,"div",5)(1,"div")(2,"label",38),e.EFF(3,"Reason for Refusal"),e.k0s(),e.j41(4,"select",39),e.DNE(5,A,3,4,"option",11),e.k0s()()()),2&s){const t=e.XpG();e.R7$(5),e.Y8G("ngForOf",t.refusal_reasons)}}function E(s,l){1&s&&(e.j41(0,"div",5)(1,"div")(2,"label",40),e.EFF(3,"Please Specify if Others"),e.k0s(),e.nrm(4,"input",41),e.k0s()())}function I(s,l){if(1&s&&e.nrm(0,"fa-icon",42),2&s){const t=e.XpG();e.Y8G("icon",t.faSave)}}function T(s,l){if(1&s&&e.nrm(0,"fa-icon",43),2&s){const t=e.XpG();e.Y8G("icon",t.faSpinner)}}function $(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",44)(1,"label",45),e.EFF(2),e.k0s(),e.j41(3,"select",46),e.mxI("ngModelChange",function(i){const r=e.eBV(t).$implicit,u=e.XpG();return e.DH7(u.rapid_ans[r.id],i)||(u.rapid_ans[r.id]=i),e.Njj(i)}),e.j41(4,"option",47),e.EFF(5,"Hindi Sumagot"),e.k0s(),e.j41(6,"option",48),e.EFF(7,"Hindi"),e.k0s(),e.j41(8,"option",49),e.EFF(9,"Oo"),e.k0s()()()}if(2&s){const t=l.$implicit,o=e.XpG();e.R7$(),e.BMQ("for",t.id),e.R7$(),e.Lme("",t.sequence,". ",t.question,""),e.R7$(),e.FS9("name",t.id),e.R50("ngModel",o.rapid_ans[t.id]),e.Y8G("disabled",!o.selected_asrh_consult),e.BMQ("id",t.id)}}function Y(s,l){if(1&s&&e.nrm(0,"fa-icon",42),2&s){const t=e.XpG();e.Y8G("icon",t.faSave)}}function H(s,l){if(1&s&&e.nrm(0,"fa-icon",43),2&s){const t=e.XpG();e.Y8G("icon",t.faSpinner)}}function D(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",50)(1,"div",51)(2,"div",52)(3,"div",53)(4,"h3",54),e.EFF(5," Confirmation "),e.k0s()(),e.j41(6,"div",55)(7,"form",56)(8,"p"),e.EFF(9,"Are you sure the patient refused to conduct the Rapid HEEADSSS Assessment?"),e.k0s()()(),e.j41(10,"div",57)(11,"button",58),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleServiceModal())}),e.EFF(12,"No"),e.k0s(),e.j41(13,"button",59),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.acceptModal())}),e.nrm(14,"fa-icon"),e.EFF(15),e.k0s()()()()()}if(2&s){const t=e.XpG();e.R7$(15),e.SpI(" ",t.is_saving?"Saving":"Yes"," ")}}function V(s,l){1&s&&e.nrm(0,"div",60)}let X=(()=>{class s{onSubmit(){var t=[];if(console.log(this.selected_asrh_consult,"test"),Object.entries(this.rapid_ans).forEach(([i,r])=>{"-"!=r&&t.push({lib_rapid_questionnaire_id:i,answer:r})}),t.length>1){let i=this.http.getUserID();var o={consult_asrh_rapid_id:this.selected_asrh_consult.id,patient_id:this.patient_id,user_id:i,answers:t};console.log(o),this.is_saving2=!0,this.http.post("asrh/rapid-answer",o).subscribe({next:r=>{this.is_saving2=!1,this.toastr.success("Rapid Assessment Answers was "+(0!==this.selected_asrh_consult?.answers?.length?"updated":"saved")+" successfuly","Success"),console.log(r,"display save rapid answers"),this.updateSelectedASRH.emit(r)},error:r=>console.log(r),complete:()=>console.log("success")})}}reloadData(){this.http.get("asrh/rapid",{params:{patient_id:this.patient_id}}).subscribe({next:o=>{this.selected_asrh_consult=o.data,this.updateSelectedASRH.emit(this.selected_asrh_consult)},error:o=>console.log(o)})}patchData(){this.selected_asrh_consult?(this.visitForm.patchValue({assessment_date:this.selected_asrh_consult?.assessment_date,lib_asrh_client_type_code:this.selected_asrh_consult?.lib_asrh_client_type_code,client_type:this.selected_asrh_consult?.client_type,other_client_type:this.selected_asrh_consult?.other_client_type,lib_asrh_living_arrangement_type_id:this.selected_asrh_consult?.lib_asrh_living_arrangement_type_id,refused_flag:this.selected_asrh_consult?.refused_flag,done_flag:this.selected_asrh_consult?.done_flag,done_date:this.selected_asrh_consult?.done_date,lib_asrh_refusal_reason_id:this.selected_asrh_consult?.lib_asrh_refusal_reason_id,refusal_reason_other:this.selected_asrh_consult?.refusal_reason_other}),console.log(this.selected_asrh_consult,"patch data working selected asrh"),console.log("patch data working"),this.loadSelected(),this.show_form=!0):this.visitForm.patchValue({assessment_date:this.max_date})}validateForm(){this.visitForm=this.formBuilder.group({id:[""],patient_id:[this.patient_id,[n.k0.required,n.k0.minLength(1)]],assessment_date:["",[n.k0.required,n.k0.minLength(1),this.noFutureDateValidator]],lib_asrh_client_type_code:[{value:"",disabled:!0},[n.k0.required,n.k0.minLength(1)]],client_type:["",[n.k0.required,n.k0.minLength(1)]],other_client_type:[{value:"",disabled:!0},[n.k0.required]],refused_flag:[!1],lib_asrh_living_arrangement_type_id:["",[n.k0.required,n.k0.minLength(1)]],done_flag:[!1],done_date:[""],lib_asrh_refusal_reason_id:[{value:"",disabled:!0},[n.k0.required,n.k0.minLength(1)]],refusal_reason_other:[{value:"",disabled:!0},[n.k0.required,n.k0.minLength(1)]]}),this.disableForm(),this.disableForm2(),this.disableForm3(),this.disableForm4(),this.disableForm5(),this.patchData(),this.patchData(),this.show_form=!0}noFutureDateValidator(t){return new Date(t.value)>new Date?{futureDate:!0}:null}createRapid(){const t=this.visitForm.get("assessment_date")?.value;if(this.patient_asrh_history.some(i=>i.assessment_date===t)&&1===this.patient_asrh_history.done_flag)alert("Assessment date already exists! Choose a different date.");else{this.is_saving=!0;const i={...this.visitForm.value};i.done_flag||delete i.done_date,null===this.selected_asrh_consult?this.http.post("asrh/rapid",i).subscribe({next:r=>{this.is_saving=!1,this.toastr.success("Rapid Assessment Details was saved successfully"),this.updateSelectedASRH2.emit(r.data.id)},error:r=>{this.is_saving=!1,console.log(r)},complete:()=>console.log("success")}):this.http.update("asrh/rapid/",this.selected_asrh_consult.id,i).subscribe({next:r=>{this.is_saving=!1,this.toastr.success("Rapid Assessment Details was updated successfully"),this.updateSelectedASRH.emit(r),console.log(r,"rapid details")},error:r=>{this.is_saving=!1,console.log(r)},complete:()=>console.log("success")})}}disableForm(){this.visitForm.get("client_type")?.valueChanges.subscribe(t=>{const o=this.visitForm.get("lib_asrh_client_type_code");"walk-in"===t||""===t?(o?.reset(),o?.disable()):o?.enable()})}disableForm2(){this.visitForm.get("lib_asrh_client_type_code")?.valueChanges.subscribe(t=>{const o=this.visitForm.get("other_client_type");99!=t?(o?.reset(),o?.disable()):o?.enable()})}disableForm3(){const t=this.selected_asrh_consult?.answers?.length||0,o=this.visitForm.get("status"),i=this.visitForm.get("refer_to_user_id");0===t?(o?.reset(),o?.disable(),i?.reset(),i?.disable()):(o?.enable(),i?.enable())}disableForm4(){this.visitForm.get("refused_flag")?.valueChanges.subscribe(t=>{const o=this.visitForm.get("lib_asrh_refusal_reason_id");!0!==t||""===t?(o?.reset(),o?.disable()):o?.enable()})}disableForm5(){this.visitForm.get("lib_asrh_refusal_reason_id")?.valueChanges.subscribe(t=>{const o=this.visitForm.get("refusal_reason_other");99!=t||""===t?(o?.reset(),o?.disable()):o?.enable()})}getSelectedAsrhAnswersLength(){return this.selected_asrh_consult?.answers?.length||0}loadSelected(){this.selected_asrh_consult&&this.selected_asrh_consult?.answers.forEach(t=>{this.rapid_ans[t.question.id]=t.answer})}loadRapidLib(){this.http.get("libraries/rapid-questionnaire").subscribe({next:t=>{this.rapid_questions=t.data,this.loadLibraries(),this.loadUsers(),this.show_form=!0},error:t=>console.log(t)})}loadUsers(){this.http.get("users",{params:{per_page:"all",aja_flag:1}}).subscribe({next:t=>{this.physicians=t.data,console.log(this.physicians,"users")},error:t=>console.log(t)})}allQuestionsAnswered(){return null===this.selected_asrh_consult||0===this.selected_asrh_consult?.answers?.length?this.rapid_questions.every(t=>this.rapid_ans[t.id]&&""!==this.rapid_ans[t.id]):0!==this.selected_asrh_consult?.answers?.length?this.selected_asrh_consult?.answers?.some(t=>(this.rapid_ans[t.question.id]||"")!==(t.answer||""))??!1:void 0}toggleModal(t){this.modals[t]=!this.modals[t],console.log("toggle modal")}openModal(){this.toggleServiceModal()}closeModal(){this.showModal=!1,this.visitForm.get("refused_flag")?.setValue(!1)}toggleServiceModal(){this.showServiceModal=!this.showServiceModal,this.visitForm.get("refused_flag")?.setValue(!1)}acceptModal(){this.showServiceModal=!this.showServiceModal,this.visitForm.get("refused_flag")?.setValue(!0)}dateToday(){this.today_date=(new Date).toISOString().split("T")[0]}isDuplicateDate(){const t=this.visitForm.get("assessment_date")?.value,o=this.visitForm.get("done_flag")?.value;return this.patient_asrh_history.some(i=>i.assessment_date===t&&(i.done_flag!==o||i.done_flag===o)&&i.assessment_date!==this.selected_asrh_consult?.assessment_date)}disableEnterKey(t){t.preventDefault()}loadLibraries(){const t=this.http.get("libraries/refusal-reason"),o=this.http.get("libraries/living-arrangement");(0,F.p)([t,o]).subscribe({next:([i,r])=>{this.refusal_reasons=i.data,this.living_conditions=r.data,this.show_form=!0,console.log(this.living_conditions,this.client_types,"libraries"),console.log(this.refusal_reasons,this.client_types,"libraries")},error:i=>console.log(i)})}constructor(t,o,i){this.http=t,this.formBuilder=o,this.toastr=i,this.loadASRH2=new e.bkB,this.updateSelectedASRH=new e.bkB,this.updateSelectedASRH2=new e.bkB,this.faCalendarDay=a.isQ,this.faPlus=a.QLR,this.faSave=a.hSh,this.faTimes=a.GRI,this.faPencil=a.zLW,this.faCircleCheck=a.QRE,this.faCaretRight=a.fU5,this.faInfoCircle=a.iW_,this.faSpinner=a.z1G,this.is_saving=!1,this.is_saving2=!1,this.show_form=!1,this.showModal=!1,this.rapid_questions=[],this.refusal_reasons=[],this.living_conditions=[],this.rapid_ans={},this.rapidForm={rapid_status:[]},this.modals=[],this.type_client=[{name:"walk-in",id:"1"},{name:"referred",id:"2"}],this.statuses=[{name:"done",id:"1"},{name:"refused",id:"2"}],this.max_date=(0,c.Yq)(new Date,"yyyy-MM-dd","en","Asia/Manila"),this.visitForm=new n.gE({patient_id:new n.MJ(""),assessment_date:new n.MJ(""),client_type:new n.MJ(""),lib_asrh_client_type_code:new n.MJ(""),other_client_type:new n.MJ(""),lib_asrh_living_arrangement_type_id:new n.MJ(""),refused_flag:new n.MJ(!1),done_flag:new n.MJ(!1),done_date:new n.MJ(""),lib_asrh_refusal_reason_id:new n.MJ(""),refusal_reason_other:new n.MJ("")}),this.showServiceModal=!1}ngOnChanges(t){this.patchData(),this.disableForm3(),this.disableForm5()}ngOnInit(){console.log(this.patient_asrh_history,"patient asrh history main"),this.validateForm(),this.loadRapidLib()}static{this.\u0275fac=function(o){return new(o||s)(e.rXU(h.k),e.rXU(n.ok),e.rXU(p.tw))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-rapid-heeadsss"]],inputs:{patient_id:"patient_id",client_types:"client_types",selected_asrh_consult:"selected_asrh_consult",patient_asrh_history:"patient_asrh_history"},outputs:{loadASRH2:"loadASRH2",updateSelectedASRH:"updateSelectedASRH",updateSelectedASRH2:"updateSelectedASRH2"},standalone:!1,features:[e.OA$],decls:55,vars:22,consts:[[1,"m-5","border","border-slate-200","rounded-lg"],[1,"bg-blue-500","text-sm","text-white","rounded-t-md","py-2","pl-5","font-semibold","select-none"],[1,"mx-5","mb",3,"ngClass"],[1,"mt-1","grid","grid-cols-16","gap-x-4","w-full","mb-10",3,"submit","keydown.enter","formGroup"],[1,"grid","grid-cols-12"],[1,"col-span-6","px-5","pt-5"],["for","assessment_date",1,"text-sm","font-semibold"],["type","date","name","assessment_date","id","assessment_date","formControlName","assessment_date",1,"input",3,"max"],["class","text-sm mt-2 text-red-500",4,"ngIf"],["for","client_type",1,"text-sm","font-semibold"],["name","client_type","id","client_type","formControlName","client_type",1,"input"],[3,"value",4,"ngFor","ngForOf"],["name","client_type","id","client_type","formControlName","lib_asrh_client_type_code",1,"input"],["for","other_client_type",1,"text-sm","font-semibold"],["type","input","name","other_client_type","id","other_client_type","formControlName","other_client_type",1,"input"],["for","lib_asrh_living_arrangement_type_id",1,"text-sm","font-semibold"],["name","lib_asrh_living_arrangement_type_id","id","lib_asrh_living_arrangement_type_id","formControlName","lib_asrh_living_arrangement_type_id",1,"input"],["class","col-span-12 col-start-1 grid gap-x-4 ",4,"ngIf"],["class","col-span-6 px-5 pt-5",4,"ngIf"],[1,"flex","justify-center","mb-10"],[1,"btn-save",3,"click","disabled"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin","class","mr-2",3,"icon",4,"ngIf"],[1,"m-5","border","border-slate-200","rounded-lg",3,"ngClass"],[1,"bg-blue-500","text-sm","text-white","rounded-t-md","py-2","pl-5","font-semibold"],[1,"mx-5","mb"],[1,"mt-1","w-full","py-5","px-5"],["class","grid grid-cols-12 mt-2 align-middle",4,"ngFor","ngForOf"],[1,"flex","justify-center","mt-5","mb-5"],[1,"btn-save","mt-4",3,"click","disabled"],["id","defaultModal","tabindex","-1","class","overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 w-full md:inset-0 h-modal md:h-full justify-center items-center flex","aria-modal","true","role","dialog","style","z-index:60",4,"ngIf"],["class","opacity-50 fixed inset-0 z-50 bg-black",4,"ngIf"],[1,"text-sm","mt-2","text-red-500"],[3,"value"],[1,"col-span-12","col-start-1","grid","gap-x-4"],[1,"mt-5","px-5"],["type","checkbox","id","refused_flag","formControlName","refused_flag",1,"input-checkbox",3,"change"],["for","refused_flag",1,"text-sm"],["for","lib_asrh_refusal_reason_id",1,"text-sm","font-semibold"],["name","lib_asrh_refusal_reason_id","id","lib_asrh_refusal_reason_id","formControlName","lib_asrh_refusal_reason_id",1,"input"],["for","refusal_reason_other",1,"text-sm","font-semibold"],["type","input","name","refusal_reason_other","id","refusal_reason_other","formControlName","refusal_reason_other",1,"input"],[1,"mr-2",3,"icon"],["animation","spin",1,"mr-2",3,"icon"],[1,"grid","grid-cols-12","mt-2","align-middle"],[1,"text-sm","col-span-9","col-start-1","mt-3"],[1,"input","align-middle","text-sm","col-span-2","col-start-11",3,"ngModelChange","ngModel","name","disabled"],["value","x"],["value","2"],["value","1"],["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-2xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500"],[1,"text-sm","font-bold","text-white"],[1,"overflow-y-auto","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"text-left","m-5"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-gray-400",3,"click"],["type","submit",1,"btn-save","px-10","disabled:bg-gray-300",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2," Rapid HEEADSSSS Assessment Details "),e.k0s(),e.j41(3,"div",2)(4,"form",3),e.bIt("submit",function(){return i.createRapid()})("keydown.enter",function(u){return u.preventDefault()}),e.j41(5,"div",4)(6,"div",5)(7,"label",6),e.EFF(8,"Assessment Date"),e.k0s(),e.nrm(9,"input",7),e.DNE(10,b,2,0,"p",8),e.k0s(),e.j41(11,"div",5)(12,"div")(13,"label",9),e.EFF(14,"Client Type"),e.k0s(),e.j41(15,"select",10),e.DNE(16,f,3,4,"option",11),e.k0s()()(),e.j41(17,"div",5)(18,"div")(19,"label",9),e.EFF(20,"Referred From"),e.k0s(),e.j41(21,"select",12),e.DNE(22,y,2,2,"option",11),e.k0s()()(),e.j41(23,"div",5)(24,"label",13),e.EFF(25,"Please Specify if Others"),e.k0s(),e.nrm(26,"input",14),e.k0s(),e.j41(27,"div",5)(28,"div")(29,"label",15),e.EFF(30,"Living Condition"),e.k0s(),e.j41(31,"select",16),e.DNE(32,k,3,4,"option",11),e.k0s()()(),e.DNE(33,G,5,0,"div",17)(34,M,6,1,"div",18)(35,E,5,0,"div",18),e.k0s()(),e.j41(36,"div",19)(37,"button",20),e.bIt("click",function(){return i.createRapid(),i.visitForm.markAsPristine()}),e.DNE(38,I,1,1,"fa-icon",21)(39,T,1,1,"fa-icon",22),e.EFF(40),e.k0s()()()(),e.j41(41,"div",23)(42,"div",24),e.EFF(43," Rapid HEEADSSSS Assessment Answers "),e.k0s(),e.j41(44,"div",25)(45,"form")(46,"div",26),e.DNE(47,$,10,7,"div",27),e.k0s(),e.j41(48,"div",28)(49,"button",29),e.bIt("click",function(){return i.onSubmit()}),e.DNE(50,Y,1,1,"fa-icon",21)(51,H,1,1,"fa-icon",22),e.EFF(52),e.k0s()()()()(),e.DNE(53,D,16,1,"div",30)(54,V,1,0,"div",31)),2&o&&(e.R7$(3),e.Y8G("ngClass",!0===(null==i.selected_asrh_consult?null:i.selected_asrh_consult.done_flag)&&!0===(null==i.selected_asrh_consult||null==i.selected_asrh_consult.comprehensive?null:i.selected_asrh_consult.comprehensive.done_flag)||!0===(null==i.selected_asrh_consult?null:i.selected_asrh_consult.refused_flag)||!0===(null==i.selected_asrh_consult||null==i.selected_asrh_consult.comprehensive?null:i.selected_asrh_consult.comprehensive.refused_flag)?"pointer-events-none select-none":""),e.R7$(),e.Y8G("formGroup",i.visitForm),e.R7$(5),e.Y8G("max",i.max_date),e.R7$(),e.Y8G("ngIf",i.isDuplicateDate()),e.R7$(6),e.Y8G("ngForOf",i.type_client),e.R7$(6),e.Y8G("ngForOf",i.client_types),e.R7$(10),e.Y8G("ngForOf",i.living_conditions),e.R7$(),e.Y8G("ngIf",1!==(null==i.selected_asrh_consult?null:i.selected_asrh_consult.done_flag)),e.R7$(),e.Y8G("ngIf",!0===i.visitForm.value.refused_flag),e.R7$(),e.Y8G("ngIf",!0===i.visitForm.value.refused_flag),e.R7$(2),e.Y8G("disabled",i.is_saving||i.visitForm.invalid||!i.visitForm.dirty||i.isDuplicateDate()),e.R7$(),e.Y8G("ngIf",!i.is_saving),e.R7$(),e.Y8G("ngIf",i.is_saving),e.R7$(),e.SpI(" ",null!=i.selected_asrh_consult&&i.selected_asrh_consult.id?i.is_saving?"Updating":"Update":i.is_saving?"Saving":"Save"," "),e.R7$(),e.Y8G("ngClass",1===(null==i.selected_asrh_consult?null:i.selected_asrh_consult.done_flag)&&!0===(null==i.selected_asrh_consult||null==i.selected_asrh_consult.comprehensive?null:i.selected_asrh_consult.comprehensive.done_flag)||1===(null==i.selected_asrh_consult?null:i.selected_asrh_consult.refused_flag)||!0===(null==i.selected_asrh_consult||null==i.selected_asrh_consult.comprehensive?null:i.selected_asrh_consult.comprehensive.refused_flag)?"pointer-events-none select-none":""),e.R7$(6),e.Y8G("ngForOf",i.rapid_questions),e.R7$(2),e.Y8G("disabled",i.is_saving2||!i.allQuestionsAnswered()),e.R7$(),e.Y8G("ngIf",!i.is_saving2),e.R7$(),e.Y8G("ngIf",i.is_saving2),e.R7$(),e.SpI(" ",null!==i.selected_asrh_consult&&0!==(null==i.selected_asrh_consult||null==i.selected_asrh_consult.answers?null:i.selected_asrh_consult.answers.length)?i.is_saving?"Updating":"Update":i.is_saving?"Saving":"Save"," "),e.R7$(),e.Y8G("ngIf",i.showServiceModal),e.R7$(),e.Y8G("ngIf",i.showServiceModal))},dependencies:[c.YU,c.Sq,c.bT,m.aY,n.qT,n.xH,n.y7,n.me,n.Zm,n.wz,n.BC,n.cb,n.vS,n.cV,n.j4,n.JD,c.PV],encapsulation:2})}}return s})();function N(s,l){1&s&&(e.j41(0,"option",26),e.EFF(1,"No AJA Trained"),e.k0s())}function q(s,l){if(1&s&&(e.j41(0,"option",27),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.Y8G("value",t.id),e.R7$(),e.E5c("",null==t?null:t.last_name,", ",null==t?null:t.first_name," ",null==t?null:t.middle_name,"")}}function B(s,l){if(1&s&&(e.j41(0,"div",4)(1,"label",28),e.EFF(2,"Referral Date"),e.k0s(),e.nrm(3,"input",29),e.k0s()),2&s){const t=e.XpG();e.R7$(3),e.Y8G("max",t.max_date)("value",t.date_today)}}function J(s,l){if(1&s&&(e.j41(0,"div",4)(1,"label",28),e.EFF(2,"Done Date"),e.k0s(),e.nrm(3,"input",30),e.k0s()),2&s){const t=e.XpG();e.R7$(3),e.Y8G("max",t.max_date)("value",t.date_today)}}function U(s,l){1&s&&(e.j41(0,"div")(1,"div",31),e.EFF(2," No Algorithm to Display. "),e.k0s()())}function L(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",35),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2).$implicit;return e.Njj(i.collapsed=!i.collapsed)}),e.EFF(1),e.k0s()}if(2&s){const t=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",t.collapsed?"Hide":"Show"," Algorithm ")}}function O(s,l){if(1&s&&(e.j41(0,"div",42),e.nrm(1,"span",43),e.k0s()),2&s){const t=e.XpG().$implicit,o=e.XpG(4);e.R7$(),e.Y8G("innerHTML",o.parseReason(t.ask_instruction),e.npT)}}function z(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",37)(1,"div",38),e.EFF(2),e.j41(3,"button",39),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.collapsed=!i.collapsed)}),e.nrm(4,"fa-icon",40),e.k0s()(),e.DNE(5,O,2,1,"div",41),e.k0s()}if(2&s){const t=l.$implicit,o=e.XpG(4);e.R7$(2),e.Lme(" ",t.code," - ",t.desc," "),e.R7$(2),e.Y8G("icon",t.collapsed?o.faChevronDown:o.faChevronUp),e.R7$(),e.Y8G("ngIf",!t.collapsed)}}function P(s,l){if(1&s&&(e.j41(0,"div"),e.DNE(1,z,6,4,"div",36),e.k0s()),2&s){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("ngForOf",t.question.algorithm)}}function Q(s,l){if(1&s&&(e.j41(0,"div")(1,"div",33),e.EFF(2),e.DNE(3,L,2,1,"button",34),e.k0s(),e.DNE(4,P,2,1,"div",16),e.k0s()),2&s){const t=e.XpG().$implicit;e.R7$(2),e.SpI(" ",t.question.question," "),e.R7$(),e.Y8G("ngIf",(null==t.question.algorithm?null:t.question.algorithm.length)>0),e.R7$(),e.Y8G("ngIf",t.collapsed)}}function W(s,l){if(1&s&&(e.j41(0,"div",32),e.DNE(1,Q,5,3,"div",16),e.k0s()),2&s){const t=l.$implicit;e.R7$(),e.Y8G("ngIf","1"===t.answer)}}function K(s,l){if(1&s&&e.nrm(0,"fa-icon",44),2&s){const t=e.XpG();e.Y8G("icon",t.faSave)}}function Z(s,l){if(1&s&&e.nrm(0,"fa-icon",45),2&s){const t=e.XpG();e.Y8G("icon",t.faSpinner)}}let ee=(()=>{class s{createRapid(){this.is_saving=!0,this.http.update("asrh/rapid/",this.selected_asrh_consult.id,this.visitForm.value).subscribe({next:t=>{this.is_saving=!1,this.toastr.success("Rapid Assessment Details was Updated Successfuly"),this.updateSelectedASRH.emit(t),console.log(t,"rapid details")},error:t=>console.log(t),complete:()=>console.log("success")})}selectVisit(){this.selected=this.selected_asrh_consult,this.validateForm()}parseReason(t){if(console.log(t,"parseReason"),t){let o="object"==typeof t?JSON.stringify(t):t,i="";if("["===o.charAt(0))o=JSON.parse(o);else{if("{"!==o.charAt(0))return o;o=JSON.parse(o)}const r=u=>{Object.entries(u).forEach(([g,v])=>{"object"==typeof v&&null!==v?r(v):i+=`${v}<br>`})};return r(o),i}return""}loadUsers(){this.http.get("users",{params:{per_page:"all",aja_flag:1}}).subscribe({next:t=>{this.physicians=t.data,console.log(this.physicians,"users")},error:t=>console.log(t)})}patchData(){this.selected_asrh_consult&&(this.visitForm.patchValue({patient_id:this.patient_id,assessment_date:this.selected_asrh_consult?.assessment_date,client_type:this.selected_asrh_consult?.client_type,lib_asrh_client_type_code:this.selected_asrh_consult?.lib_asrh_client_type_code,other_client_type:this.selected_asrh_consult?.other_client_type,refused_flag:this.selected_asrh_consult?.refused_flag,refer_to_user_id:this.selected_asrh_consult?.refer_to_user_id,done_flag:this.selected_asrh_consult?.done_flag,done_date:this.selected_asrh_consult?.done_date||this.max_date,referral_date:this.selected_asrh_consult?.referral_date||this.max_date,algorithm_remarks:this.selected_asrh_consult?.algorithm_remarks,lib_asrh_living_arrangement_type_id:this.selected_asrh_consult?.lib_asrh_living_arrangement_type_id}),console.log(this.selected_asrh_consult,"patch data working selected asrh"),console.log("patch data working"))}validateForm(){const t={patient_id:[this.patient_id,[n.k0.required,n.k0.minLength(1)]],assessment_date:[this.selected_asrh_consult?.assessment_date,[n.k0.required,n.k0.minLength(1)]],lib_asrh_client_type_code:[this.selected_asrh_consult?.lib_asrh_client_type_code||"",[n.k0.required,n.k0.minLength(1)]],client_type:[this.selected_asrh_consult?.client_type,[n.k0.required,n.k0.minLength(1)]],other_client_type:[this.selected_asrh_consult?.other_client_type||"",[n.k0.required]],refer_to_user_id:[this.selected_asrh_consult?.refer_to_user_id||""],done_flag:[this.selected_asrh_consult.done_flag,[n.k0.required,n.k0.minLength(1)]],done_date:[this.selected_asrh_consult?.done_date,[n.k0.required,n.k0.minLength(1)]],refused_flag:[this.selected_asrh_consult?.refused_flag,[n.k0.required,n.k0.minLength(1)]],referral_date:[this.selected_asrh_consult?.referral_date||""],algorithm_remarks:[this.selected_asrh_consult?.algorithm_remarks,[n.k0.required,n.k0.minLength(50)]],lib_asrh_living_arrangement_type_id:[this.selected_asrh_consult?.lib_asrh_living_arrangement_type_id,[n.k0.required,n.k0.minLength(1)]]};null===this.selected_asrh_consult?.lib_asrh_client_type_code&&(t.lib_asrh_client_type_code=[{value:"",disabled:!0},[n.k0.required,n.k0.minLength(1)]]),null===this.selected_asrh_consult?.other_client_type&&(t.other_client_type=[{value:"",disabled:!0},[n.k0.required]]),this.visitForm=this.formBuilder.group(t),this.disableForm(),this.disableForm2(),this.patchData()}checkAnswers(t){let o=!1;return Object.entries(t).forEach(([i,r],u)=>{console.log(r.answer),"1"===r.answer&&(o=!0)}),o}disableForm(){this.visitForm.get("client_type")?.valueChanges.subscribe(t=>{const o=this.visitForm.get("lib_asrh_client_type_code");"walk-in"===t||""===t?(o?.reset(),o?.disable()):o?.enable()})}disableForm2(){this.visitForm.get("lib_asrh_client_type_code")?.valueChanges.subscribe(t=>{const o=this.visitForm.get("other_client_type");99!=t?(o?.reset(),o?.disable()):o?.enable()})}constructor(t,o,i){this.http=t,this.formBuilder=o,this.toastr=i,this.loadASRH=new e.bkB,this.updateSelectedASRH=new e.bkB,this.faSave=a.hSh,this.faChevronCircleUp=a.AeV,this.faChevronCircleDown=a.DqM,this.faSpinner=a.z1G,this.faChevronUp=a.w2A,this.faChevronDown=a.Jt$,this.show_content=!0,this.is_saving=!1,this.toggle_content=!0,this.asrh_visit_history=[],this.rapid_history=[],this.max_date=(0,c.Yq)(new Date,"yyyy-MM-dd","en","Asia/Manila"),this.date_today=(0,c.Yq)(new Date,"MM/dd/yyyy","en","Asia/Manila"),this.visitForm=new n.gE({patient_id:new n.MJ(""),assessment_date:new n.MJ(""),client_type:new n.MJ(""),lib_asrh_client_type_code:new n.MJ(""),other_client_type:new n.MJ(""),refused_flag:new n.MJ(!1),refer_to_user_id:new n.MJ(""),referral_date:new n.MJ(""),done_flag:new n.MJ(!1),done_date:new n.MJ(""),algorithm_remarks:new n.MJ(""),lib_asrh_living_arrangement_type_id:new n.MJ("")})}ngOnInit(){this.loadUsers(),this.selectVisit(),console.log(this.selected_asrh_consult,"check mo selected rapid")}ngOnChanges(t){this.show_content=this.toggle_content}static{this.\u0275fac=function(o){return new(o||s)(e.rXU(h.k),e.rXU(n.ok),e.rXU(p.tw))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-assessment-summary"]],inputs:{patient_id:"patient_id",selected_asrh_consult:"selected_asrh_consult"},outputs:{loadASRH:"loadASRH",updateSelectedASRH:"updateSelectedASRH"},standalone:!1,features:[e.OA$],decls:31,vars:15,consts:[[1,"m-5","border","border-slate-200","rounded-lg","select-none"],[1,"bg-blue-500","text-sm","text-white","rounded-t-md","py-2","pl-5","font-semibold","select-none"],[3,"formGroup"],[1,"grid","grid-cols-12","justify-between",3,"ngClass"],[1,"col-span-6","px-5","pt-5"],[3,"ngClass"],["for","refer_to",1,"text-sm","font-semibold"],["name","refer_to_user_id","id","refer_to_user_id","formControlName","refer_to_user_id",1,"input",3,"disabled"],["value","","disabled","","selected","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[1,"col-span-6","pt-8"],[1,"mt-5","px-5"],["type","checkbox","id","done_flag","formControlName","done_flag",1,"input-checkbox"],["for","done_flag",1,"text-sm"],["class","col-span-6 px-5 pt-5",4,"ngIf"],[1,"mt-10","w-full","border-t","border-gray-200","py-5",3,"ngClass"],[4,"ngIf"],["class","mt-1 w-full",4,"ngFor","ngForOf"],[1,"mt-10","w-full","border-t","border-gray-200","py-5"],[1,"h-92"],[1,"py-5","px-5"],["rows","13","id","remarks","placeholder","Remarks","formControlName","algorithm_remarks",1,"text-sm","placeholder-slate-400","w-full","rounded-md","border-gray-300"],[1,"flex","justify-center","mt-10"],[1,"btn-save",3,"click","disabled"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin","class","mr-2",3,"icon",4,"ngIf"],["value","","disabled","","selected",""],[3,"value"],["for","done_date",1,"text-sm","font-semibold"],["type","date","name","done_date","id","done_date","formControlName","referral_date",1,"input",3,"max","value"],["type","date","name","done_date","id","done_date","formControlName","done_date",1,"input",3,"max","value"],[1,"text-sm","flex","justify-center","mt-5"],[1,"mt-1","w-full"],[1,"text-sm","py-4","px-5","flex","justify-between"],["class","bg-blue-500 text-white px-2 py-1 rounded",3,"click",4,"ngIf"],[1,"bg-blue-500","text-white","px-2","py-1","rounded",3,"click"],["class","text-sm py-4 px-5 rounded-t-md pl-5",4,"ngFor","ngForOf"],[1,"text-sm","py-4","px-5","rounded-t-md","pl-5"],[1,"bg-blue-500","text-sm","text-white","rounded-t-md","py-2","pl-5","font-semibold","flex","justify-between"],[1,"text-white","py-1","rounded","ml-2",3,"click"],["size","md",1,"pr-2",3,"icon"],["class","border-gray-300 border px-5 py-5",4,"ngIf"],[1,"border-gray-300","border","px-5","py-5"],[3,"innerHTML"],[1,"mr-2",3,"icon"],["animation","spin",1,"mr-2",3,"icon"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2," Assessment Summary "),e.k0s(),e.j41(3,"form",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"label",6),e.EFF(8,"Refer To"),e.k0s(),e.j41(9,"select",7),e.DNE(10,N,2,0,"option",8)(11,q,2,4,"option",9),e.k0s()()(),e.j41(12,"div",10)(13,"div",11),e.nrm(14,"input",12),e.j41(15,"label",13),e.EFF(16," Done with RAPID HEEADSSS. "),e.k0s()()(),e.DNE(17,B,4,2,"div",14)(18,J,4,2,"div",14),e.k0s(),e.j41(19,"div",15),e.DNE(20,U,3,0,"div",16)(21,W,2,1,"div",17),e.j41(22,"div",18)(23,"div",19)(24,"div",20),e.nrm(25,"textarea",21),e.k0s()(),e.j41(26,"div",22)(27,"button",23),e.bIt("click",function(){return i.createRapid(),i.visitForm.markAsPristine()}),e.DNE(28,K,1,1,"fa-icon",24)(29,Z,1,1,"fa-icon",25),e.EFF(30),e.k0s()()()()()()),2&o&&(e.R7$(3),e.Y8G("formGroup",i.visitForm),e.R7$(),e.Y8G("ngClass",!0===(null==i.selected_asrh_consult?null:i.selected_asrh_consult.done_flag)&&!0===(null==i.selected_asrh_consult||null==i.selected_asrh_consult.comprehensive?null:i.selected_asrh_consult.comprehensive.done_flag)||!0===(null==i.selected_asrh_consult?null:i.selected_asrh_consult.refused_flag)||!0===(null==i.selected_asrh_consult||null==i.selected_asrh_consult.comprehensive?null:i.selected_asrh_consult.comprehensive.refused_flag)?"pointer-events-none select-none":""),e.R7$(2),e.Y8G("ngClass",0===(null==i.physicians?null:i.physicians.length)?"pointer-events-none select-none":""),e.R7$(3),e.Y8G("disabled",0===(null==i.physicians?null:i.physicians.length)),e.R7$(),e.Y8G("ngIf",0===(null==i.physicians?null:i.physicians.length)),e.R7$(),e.Y8G("ngForOf",i.physicians),e.R7$(6),e.Y8G("ngIf",i.visitForm.get("refer_to_user_id").value),e.R7$(),e.Y8G("ngIf",i.visitForm.get("done_flag").value),e.R7$(),e.Y8G("ngClass",1===(null==i.selected_asrh_consult?null:i.selected_asrh_consult.done_flag)&&!0===(null==i.selected_asrh_consult||null==i.selected_asrh_consult.comprehensive?null:i.selected_asrh_consult.comprehensive.done_flag)||1===(null==i.selected_asrh_consult?null:i.selected_asrh_consult.refused_flag)||!0===(null==i.selected_asrh_consult||null==i.selected_asrh_consult.comprehensive?null:i.selected_asrh_consult.comprehensive.refused_flag)?"pointer-events-none select-none":""),e.R7$(),e.Y8G("ngIf",!i.checkAnswers(i.selected_asrh_consult.answers)),e.R7$(),e.Y8G("ngForOf",null==i.selected_asrh_consult?null:i.selected_asrh_consult.answers),e.R7$(6),e.Y8G("disabled",i.is_saving||i.visitForm.invalid||!i.visitForm.dirty),e.R7$(),e.Y8G("ngIf",!i.is_saving),e.R7$(),e.Y8G("ngIf",i.is_saving),e.R7$(),e.SpI(" ",null!=i.selected_asrh_consult&&i.selected_asrh_consult.refer_to_user_id?i.is_saving?"Updating":"Update":i.is_saving?"Saving":"Save"," "))},dependencies:[c.YU,c.Sq,c.bT,m.aY,n.qT,n.xH,n.y7,n.me,n.Zm,n.wz,n.BC,n.cb,n.j4,n.JD],encapsulation:2})}}return s})();function te(s,l){if(1&s&&(e.j41(0,"div",22)(1,"div",23)(2,"label",24),e.EFF(3),e.k0s()()()),2&s){const t=l.$implicit;e.R7$(3),e.SpI(" ",t.question,"")}}function se(s,l){if(1&s&&(e.j41(0,"div",13)(1,"div",14),e.EFF(2),e.k0s(),e.j41(3,"div",15)(4,"p"),e.EFF(5),e.k0s()(),e.nrm(6,"div",16),e.j41(7,"div",17),e.DNE(8,te,4,1,"div",18),e.j41(9,"div",19)(10,"div",20),e.nrm(11,"textarea",21),e.k0s()()()()),2&s){const t=e.XpG().$implicit;e.R7$(2),e.SpI(" ",t.desc," "),e.R7$(3),e.JRh(t.instruction),e.R7$(3),e.Y8G("ngForOf",t.questions)}}function ie(s,l){if(1&s&&(e.j41(0,"div",11),e.DNE(1,se,12,3,"div",12),e.k0s()),2&s){const t=l.$implicit;e.R7$(),e.Y8G("ngIf","H01"===t.code)}}function ne(s,l){if(1&s&&e.nrm(0,"fa-icon",25),2&s){const t=e.XpG(2);e.Y8G("icon",t.faSave)}}function oe(s,l){if(1&s&&e.nrm(0,"fa-icon",26),2&s){const t=e.XpG(2);e.Y8G("icon",t.faSpinner)}}function le(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",3)(1,"div",4),e.EFF(2," Comprehensive HEEADSSS Assessment "),e.k0s(),e.j41(3,"form",5),e.DNE(4,ie,2,1,"div",6),e.j41(5,"div",7)(6,"button",8),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return i.onSubmit(),e.Njj(i.homeForm.markAsPristine())}),e.DNE(7,ne,1,1,"fa-icon",9)(8,oe,1,1,"fa-icon",10),e.EFF(9),e.k0s()()()()}if(2&s){const t=e.XpG();e.Y8G("ngClass",!0===(null==t.selected_asrh_consult?null:t.selected_asrh_consult.done_flag)&&!0===(null==t.selected_asrh_consult||null==t.selected_asrh_consult.comprehensive?null:t.selected_asrh_consult.comprehensive.done_flag)||!0===(null==t.selected_asrh_consult?null:t.selected_asrh_consult.refused_flag)||!0===(null==t.selected_asrh_consult||null==t.selected_asrh_consult.comprehensive?null:t.selected_asrh_consult.comprehensive.refused_flag)?"pointer-events-none select-none":""),e.R7$(3),e.Y8G("formGroup",t.homeForm),e.R7$(),e.Y8G("ngForOf",t.compre_questions),e.R7$(2),e.Y8G("disabled",t.is_saving||t.homeForm.invalid||!t.homeForm.dirty),e.R7$(),e.Y8G("ngIf",!t.is_saving),e.R7$(),e.Y8G("ngIf",t.is_saving),e.R7$(),e.SpI(" ",null!=t.selected_asrh_consult&&null!=t.selected_asrh_consult.comprehensive&&t.selected_asrh_consult.comprehensive.home_notes?t.is_saving?"Updating":"Update":t.is_saving?"Saving":"Save"," ")}}function ae(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",27)(1,"div",28)(2,"div",29)(3,"div",30)(4,"h3",31),e.EFF(5," Confirmation "),e.k0s()(),e.j41(6,"div",32)(7,"form",33)(8,"p"),e.EFF(9,"Are you sure the patient refused to conduct the Rapid HEEADSSS Assessment?"),e.k0s()()(),e.j41(10,"div",34)(11,"button",35),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleServiceModal())}),e.EFF(12,"No"),e.k0s(),e.j41(13,"button",36),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.acceptModal())}),e.nrm(14,"fa-icon"),e.EFF(15),e.k0s()()()()()}if(2&s){const t=e.XpG();e.R7$(15),e.SpI(" ",t.is_saving?"Saving":"Yes"," ")}}function re(s,l){1&s&&e.nrm(0,"div",37)}let ce=(()=>{class s{onSubmit(){console.log(this.homeForm.value,"display visit details"),this.is_saving=!0,this.http.post("asrh/comprehensive",this.homeForm.value).subscribe({next:t=>{this.toastr.success("Home was "+(null!==this.selected_asrh_consult?.comprehensive?.home_notes?"updated":"saved")+" successfuly","Success"),this.is_saving=!1,this.updateSelectedASRH.emit(t),console.log(this.homeForm,"checker home")},complete:()=>{console.log("success")},error:t=>{console.log(t)}})}validateForm(){this.homeForm=this.formBuilder.group({id:[""],patient_id:[this.patient_id],consult_asrh_rapid_id:[this.selected_asrh_consult?.id,[n.k0.required,n.k0.minLength(1)]],assessment_date:[this.selected_asrh_consult?.comprehensive?.assessment_date,[n.k0.required,n.k0.minLength(1)]],consent_flag:["",[n.k0.required,n.k0.minLength(1)]],home_notes:["",[n.k0.required,n.k0.minLength(50)]],done_flag:[!1],refused_flag:[!1]}),this.patchCompre()}LoadCompre(){this.http.get("asrh/comprehensive",{params:{patient_id:this.patient_id}}).subscribe({next:o=>{this.asrh_compre_history=o.data[0],console.log(this.asrh_compre_history,"hugot ng compre history"),this.patchCompre()},complete:()=>{},error:o=>{console.log(o)}})}patchCompre(){this.selected_asrh_consult&&(this.homeForm.patchValue({consent_flag:this.selected_asrh_consult?.comprehensive?.consent_flag,home_notes:this.selected_asrh_consult?.comprehensive?.home_notes,refused_flag:this.selected_asrh_consult?.comprehensive?.refused_flag}),console.log(this.selected_asrh_consult,"load compre home working"))}disableForm(){const t=this.selected_asrh_consult?.comprehensive?.home_notes,o=this.selected_asrh_consult?.comprehensive?.spirituality_notes,i=this.homeForm.get("status");console.log(t,o,"home and spirituality"),null===t||null===o?(i?.reset(),i?.disable()):i?.enable()}disableForm2(){const t=this.homeForm.get("status");null===this.selected_asrh_consult?.comprehensive?(t?.reset(),t?.disable()):t?.enable()}openModal(){this.toggleServiceModal()}closeModal(){this.showModal=!1,this.homeForm.get("refused_flag")?.setValue(!1)}toggleServiceModal(){this.showServiceModal=!this.showServiceModal,this.homeForm.get("refused_flag")?.setValue(!1)}acceptModal(){this.showServiceModal=!this.showServiceModal,this.homeForm.get("refused_flag")?.setValue(!0)}constructor(t,o,i,r){this.http=t,this.formBuilder=o,this.toastr=i,this.router=r,this.updateSelectedASRH=new e.bkB,this.faCalendarDay=a.isQ,this.faPlus=a.QLR,this.faSave=a.hSh,this.faTimes=a.GRI,this.faPencil=a.zLW,this.faCircleCheck=a.QRE,this.faCaretRight=a.fU5,this.faInfoCircle=a.iW_,this.faSpinner=a.z1G,this.is_saving=!1,this.asrh_compre_history=[],this.show_form=!1,this.comprehensive_q=[],this.homeForm=new n.gE({id:new n.MJ(""),patient_id:new n.MJ(""),consult_asrh_rapid_id:new n.MJ(""),assessment_date:new n.MJ(""),consent_flag:new n.MJ(!1),done_flag:new n.MJ(!1),home_notes:new n.MJ("")}),this.statuses=[{name:"done",id:"1"},{name:"refused",id:"2"}],this.showModal=!1,this.showServiceModal=!1}ngOnInit(){this.validateForm(),this.comprehensive_q=this.compre_questions}static{this.\u0275fac=function(o){return new(o||s)(e.rXU(h.k),e.rXU(n.ok),e.rXU(p.tw),e.rXU(d.Ix))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-home"]],inputs:{compre_questions:"compre_questions",patient_id:"patient_id",selected_asrh_consult:"selected_asrh_consult"},outputs:{updateSelectedASRH:"updateSelectedASRH"},standalone:!1,decls:3,vars:3,consts:[["class","m-5 border border-slate-200 rounded-lg",3,"ngClass",4,"ngIf"],["id","defaultModal","tabindex","-1","class","overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 w-full md:inset-0 h-modal md:h-full justify-center items-center flex","aria-modal","true","role","dialog","style","z-index:60",4,"ngIf"],["class","opacity-50 fixed inset-0 z-50 bg-black",4,"ngIf"],[1,"m-5","border","border-slate-200","rounded-lg",3,"ngClass"],[1,"bg-blue-500","text-sm","text-white","rounded-t-md","py-2","pl-5","font-semibold"],[1,"mx-5","mb-6",3,"formGroup"],["class","mt-1 w-full",4,"ngFor","ngForOf"],[1,"flex","justify-center","mt-5"],[1,"btn-save","mt-4",3,"click","disabled"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin","class","mr-2",3,"icon",4,"ngIf"],[1,"mt-1","w-full"],["class","",4,"ngIf"],[1,""],[1,"text-md","text-blue-500","rounded-t-md","font-semibold","py-4"],[1,"text-sm","mb-5"],[1,"mt-1","w-full","border-t","border-gray-200","mb-5"],[1,"columns-2"],["class","h-full",4,"ngFor","ngForOf"],[1,"h-92"],[1,"py-3.5"],["rows","13","id","home_notes","placeholder","Remarks","formControlName","home_notes",1,"text-sm","placeholder-slate-400","w-full","rounded-md","border-gray-300"],[1,"h-full"],[1,"py-1"],[1,"text-sm"],[1,"mr-2",3,"icon"],["animation","spin",1,"mr-2",3,"icon"],["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-2xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500"],[1,"text-sm","font-bold","text-white"],[1,"overflow-y-auto","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"text-left","m-5"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-gray-400",3,"click"],["type","submit",1,"btn-save","px-10","disabled:bg-gray-300",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"]],template:function(o,i){1&o&&e.DNE(0,le,10,7,"div",0)(1,ae,16,1,"div",1)(2,re,1,0,"div",2),2&o&&(e.Y8G("ngIf",!i.show_form),e.R7$(),e.Y8G("ngIf",i.showServiceModal),e.R7$(),e.Y8G("ngIf",i.showServiceModal))},dependencies:[c.YU,c.Sq,c.bT,m.aY,n.qT,n.me,n.BC,n.cb,n.cV,n.j4,n.JD],encapsulation:2})}}return s})();function de(s,l){if(1&s&&(e.j41(0,"div",22)(1,"div",23)(2,"label",24),e.EFF(3),e.k0s()()()),2&s){const t=l.$implicit;e.R7$(3),e.SpI(" ",t.question,"")}}function _e(s,l){if(1&s&&(e.j41(0,"div",13)(1,"div",14),e.EFF(2),e.k0s(),e.j41(3,"div",15)(4,"p"),e.EFF(5),e.k0s()(),e.nrm(6,"div",16),e.j41(7,"div",17),e.DNE(8,de,4,1,"div",18),e.j41(9,"div",19)(10,"div",20),e.nrm(11,"textarea",21),e.k0s()()()()),2&s){const t=e.XpG().$implicit;e.R7$(2),e.SpI(" ",t.desc," "),e.R7$(3),e.JRh(t.instruction),e.R7$(3),e.Y8G("ngForOf",t.questions)}}function ue(s,l){if(1&s&&(e.j41(0,"div",11),e.DNE(1,_e,12,3,"div",12),e.k0s()),2&s){const t=l.$implicit;e.R7$(),e.Y8G("ngIf","E02"===t.code)}}function he(s,l){if(1&s&&e.nrm(0,"fa-icon",25),2&s){const t=e.XpG(2);e.Y8G("icon",t.faSave)}}function pe(s,l){if(1&s&&e.nrm(0,"fa-icon",26),2&s){const t=e.XpG(2);e.Y8G("icon",t.faSpinner)}}function me(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",3)(1,"div",4),e.EFF(2," Comprehensive HEEADSSS Assessment "),e.k0s(),e.j41(3,"form",5),e.DNE(4,ue,2,1,"div",6),e.j41(5,"div",7)(6,"button",8),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return i.onSubmit(),e.Njj(i.eatingForm.markAsPristine())}),e.DNE(7,he,1,1,"fa-icon",9)(8,pe,1,1,"fa-icon",10),e.EFF(9),e.k0s()()()()}if(2&s){const t=e.XpG();e.Y8G("ngClass",!0===(null==t.selected_asrh_consult?null:t.selected_asrh_consult.done_flag)&&!0===(null==t.selected_asrh_consult||null==t.selected_asrh_consult.comprehensive?null:t.selected_asrh_consult.comprehensive.done_flag)||!0===(null==t.selected_asrh_consult?null:t.selected_asrh_consult.refused_flag)||!0===(null==t.selected_asrh_consult||null==t.selected_asrh_consult.comprehensive?null:t.selected_asrh_consult.comprehensive.refused_flag)?"pointer-events-none select-none":""),e.R7$(3),e.Y8G("formGroup",t.eatingForm),e.R7$(),e.Y8G("ngForOf",t.compre_questions),e.R7$(2),e.Y8G("disabled",t.is_saving||t.eatingForm.invalid||!t.eatingForm.dirty),e.R7$(),e.Y8G("ngIf",!t.is_saving),e.R7$(),e.Y8G("ngIf",t.is_saving),e.R7$(),e.SpI(" ",null!=t.selected_asrh_consult&&null!=t.selected_asrh_consult.comprehensive&&t.selected_asrh_consult.comprehensive.eating_notes?t.is_saving?"Updating":"Update":t.is_saving?"Saving":"Save"," ")}}function fe(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",27)(1,"div",28)(2,"div",29)(3,"div",30)(4,"h3",31),e.EFF(5," Confirmation "),e.k0s()(),e.j41(6,"div",32)(7,"form",33)(8,"p"),e.EFF(9,"Are you sure the patient refused to conduct the Rapid HEEADSSS Assessment?"),e.k0s()()(),e.j41(10,"div",34)(11,"button",35),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleServiceModal())}),e.EFF(12,"No"),e.k0s(),e.j41(13,"button",36),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.acceptModal())}),e.nrm(14,"fa-icon"),e.EFF(15),e.k0s()()()()()}if(2&s){const t=e.XpG();e.R7$(15),e.SpI(" ",t.is_saving?"Saving":"Yes"," ")}}function ge(s,l){1&s&&e.nrm(0,"div",37)}let ve=(()=>{class s{onSubmit(){console.log(this.eatingForm.value,"display visit details"),this.is_saving=!0,this.http.post("asrh/comprehensive",this.eatingForm.value).subscribe({next:t=>{this.toastr.success("Eating was "+(null!==this.selected_asrh_consult.comprehensive.eating_notes?"updated":"saved")+" successfuly","Success"),this.is_saving=!1,this.updateSelectedASRH.emit(t),console.log(this.eatingForm,"checker education")},complete:()=>{},error:t=>{console.log(t)}})}validateForm(){this.eatingForm=this.formBuilder.group({id:[""],patient_id:[this.patient_id],consult_asrh_rapid_id:[this.selected_asrh_consult.id,[n.k0.required,n.k0.minLength(1)]],assessment_date:[this.selected_asrh_consult?.comprehensive?.assessment_date,[n.k0.required,n.k0.minLength(1)]],eating_notes:["",[n.k0.required,n.k0.minLength(50)]],done_flag:[!1],consent_flag:["",[n.k0.required,n.k0.minLength(1)]],refused_flag:[!1]}),this.patchCompre()}patchCompre(){this.selected_asrh_consult&&(this.eatingForm.patchValue({eating_notes:this.selected_asrh_consult?.comprehensive?.eating_notes,refused_flag:this.selected_asrh_consult?.comprehensive?.refused_flag,consent_flag:this.selected_asrh_consult?.comprehensive?.consent_flag}),console.log(this.selected_asrh_consult.comprehensive,"load compre home working"))}LoadCompre(){this.http.get("asrh/comprehensive",{params:{patient_id:this.patient_id}}).subscribe({next:o=>{this.asrh_compre_history=o.data[0],console.log(this.asrh_compre_history,"hugot ng compre history"),this.patchCompre()},complete:()=>{},error:o=>{console.log(o)}})}openModal(){this.toggleServiceModal()}closeModal(){this.showModal=!1,this.eatingForm.get("refused_flag")?.setValue(!1)}toggleServiceModal(){this.showServiceModal=!this.showServiceModal,this.eatingForm.get("refused_flag")?.setValue(!1)}acceptModal(){this.showServiceModal=!this.showServiceModal,this.eatingForm.get("refused_flag")?.setValue(!0)}constructor(t,o,i,r){this.http=t,this.formBuilder=o,this.toastr=i,this.router=r,this.updateSelectedASRH=new e.bkB,this.faCalendarDay=a.isQ,this.faPlus=a.QLR,this.faSave=a.hSh,this.faTimes=a.GRI,this.faPencil=a.zLW,this.faCircleCheck=a.QRE,this.faCaretRight=a.fU5,this.faInfoCircle=a.iW_,this.faSpinner=a.z1G,this.is_saving=!1,this.show_form=!1,this.asrh_compre_history=[],this.eatingForm=new n.gE({id:new n.MJ(""),patient_id:new n.MJ(""),consult_asrh_rapid_id:new n.MJ(""),assessment_date:new n.MJ(""),consent_flag:new n.MJ("false"),refused_flag:new n.MJ("false"),eating_notes:new n.MJ(""),done_flag:new n.MJ(!1)}),this.showModal=!1,this.showServiceModal=!1}ngOnInit(){this.validateForm()}static{this.\u0275fac=function(o){return new(o||s)(e.rXU(h.k),e.rXU(n.ok),e.rXU(p.tw),e.rXU(d.Ix))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-eating"]],inputs:{compre_questions:"compre_questions",patient_id:"patient_id",asrh_visit_history:"asrh_visit_history",selected_asrh_consult:"selected_asrh_consult"},outputs:{updateSelectedASRH:"updateSelectedASRH"},standalone:!1,decls:3,vars:3,consts:[["class","m-5 border border-slate-200 rounded-lg",3,"ngClass",4,"ngIf"],["id","defaultModal","tabindex","-1","class","overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 w-full md:inset-0 h-modal md:h-full justify-center items-center flex","aria-modal","true","role","dialog","style","z-index:60",4,"ngIf"],["class","opacity-50 fixed inset-0 z-50 bg-black",4,"ngIf"],[1,"m-5","border","border-slate-200","rounded-lg",3,"ngClass"],[1,"bg-blue-500","text-sm","text-white","rounded-t-md","py-2","pl-5","font-semibold"],[1,"mx-5","mb-6",3,"formGroup"],["class","mt-1 w-full",4,"ngFor","ngForOf"],[1,"flex","justify-center","mt-5"],[1,"btn-save","mt-4",3,"click","disabled"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin","class","mr-2",3,"icon",4,"ngIf"],[1,"mt-1","w-full"],["class","",4,"ngIf"],[1,""],[1,"text-md","text-blue-500","rounded-t-md","font-semibold","py-4"],[1,"text-sm","mb-5"],[1,"mt-1","w-full","border-t","border-gray-200","mb-5"],[1,"columns-2"],["class","h-full",4,"ngFor","ngForOf"],[1,"h-92"],[1,"py-3.5"],["rows","13","id","eating_notes","placeholder","Remarks","formControlName","eating_notes",1,"text-sm","placeholder-slate-400","w-full","rounded-md","border-gray-300"],[1,"h-full"],[1,"py-1"],[1,"text-sm"],[1,"mr-2",3,"icon"],["animation","spin",1,"mr-2",3,"icon"],["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-2xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500"],[1,"text-sm","font-bold","text-white"],[1,"overflow-y-auto","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"text-left","m-5"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-gray-400",3,"click"],["type","submit",1,"btn-save","px-10","disabled:bg-gray-300",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"]],template:function(o,i){1&o&&e.DNE(0,me,10,7,"div",0)(1,fe,16,1,"div",1)(2,ge,1,0,"div",2),2&o&&(e.Y8G("ngIf",!i.show_form),e.R7$(),e.Y8G("ngIf",i.showServiceModal),e.R7$(),e.Y8G("ngIf",i.showServiceModal))},dependencies:[c.YU,c.Sq,c.bT,m.aY,n.qT,n.me,n.BC,n.cb,n.cV,n.j4,n.JD],encapsulation:2})}}return s})();function be(s,l){if(1&s&&(e.j41(0,"div",22)(1,"div",23)(2,"label",24),e.EFF(3),e.k0s()()()),2&s){const t=l.$implicit;e.R7$(3),e.SpI(" ",t.question,"")}}function ye(s,l){if(1&s&&(e.j41(0,"div",13)(1,"div",14),e.EFF(2),e.k0s(),e.j41(3,"div",15)(4,"p"),e.EFF(5),e.k0s()(),e.nrm(6,"div",16),e.j41(7,"div",17),e.DNE(8,be,4,1,"div",18),e.j41(9,"div",19)(10,"div",20),e.nrm(11,"textarea",21),e.k0s()()()()),2&s){const t=e.XpG().$implicit;e.R7$(2),e.SpI(" ",t.desc," "),e.R7$(3),e.JRh(t.instruction),e.R7$(3),e.Y8G("ngForOf",t.questions)}}function Se(s,l){if(1&s&&(e.j41(0,"div",11),e.DNE(1,ye,12,3,"div",12),e.k0s()),2&s){const t=l.$implicit;e.R7$(),e.Y8G("ngIf","E01"===t.code)}}function xe(s,l){if(1&s&&e.nrm(0,"fa-icon",25),2&s){const t=e.XpG(2);e.Y8G("icon",t.faSave)}}function Fe(s,l){if(1&s&&e.nrm(0,"fa-icon",26),2&s){const t=e.XpG(2);e.Y8G("icon",t.faSpinner)}}function ke(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",3)(1,"div",4),e.EFF(2," Comprehensive HEEADSSS Assessment "),e.k0s(),e.j41(3,"form",5),e.DNE(4,Se,2,1,"div",6),e.j41(5,"div",7)(6,"button",8),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return i.onSubmit(),e.Njj(i.educationForm.markAsPristine())}),e.DNE(7,xe,1,1,"fa-icon",9)(8,Fe,1,1,"fa-icon",10),e.EFF(9),e.k0s()()()()}if(2&s){const t=e.XpG();e.Y8G("ngClass",!0===(null==t.selected_asrh_consult?null:t.selected_asrh_consult.done_flag)&&!0===(null==t.selected_asrh_consult||null==t.selected_asrh_consult.comprehensive?null:t.selected_asrh_consult.comprehensive.done_flag)||!0===(null==t.selected_asrh_consult?null:t.selected_asrh_consult.refused_flag)||!0===(null==t.selected_asrh_consult||null==t.selected_asrh_consult.comprehensive?null:t.selected_asrh_consult.comprehensive.refused_flag)?"pointer-events-none select-none":""),e.R7$(3),e.Y8G("formGroup",t.educationForm),e.R7$(),e.Y8G("ngForOf",t.compre_questions),e.R7$(2),e.Y8G("disabled",t.is_saving||t.educationForm.invalid||!t.educationForm.dirty),e.R7$(),e.Y8G("ngIf",!t.is_saving),e.R7$(),e.Y8G("ngIf",t.is_saving),e.R7$(),e.SpI(" ",null!=t.selected_asrh_consult&&null!=t.selected_asrh_consult.comprehensive&&t.selected_asrh_consult.comprehensive.education_notes?t.is_saving?"Updating":"Update":t.is_saving?"Saving":"Save"," ")}}function we(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",27)(1,"div",28)(2,"div",29)(3,"div",30)(4,"h3",31),e.EFF(5," Confirmation "),e.k0s()(),e.j41(6,"div",32)(7,"form",33)(8,"p"),e.EFF(9,"Are you sure the patient refused to conduct the Rapid HEEADSSS Assessment?"),e.k0s()()(),e.j41(10,"div",34)(11,"button",35),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleServiceModal())}),e.EFF(12,"No"),e.k0s(),e.j41(13,"button",36),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.acceptModal())}),e.nrm(14,"fa-icon"),e.EFF(15),e.k0s()()()()()}if(2&s){const t=e.XpG();e.R7$(15),e.SpI(" ",t.is_saving?"Saving":"Yes"," ")}}function Re(s,l){1&s&&e.nrm(0,"div",37)}let Ce=(()=>{class s{onSubmit(){console.log(this.educationForm.value,"display visit details"),this.is_saving=!0,this.http.post("asrh/comprehensive",this.educationForm.value).subscribe({next:t=>{this.toastr.success("Education was "+(null!==this.selected_asrh_consult.comprehensive.education_notes?"updated":"saved")+" successfuly","Success"),this.is_saving=!1,this.updateSelectedASRH.emit(t),console.log(this.educationForm,"checker education")},complete:()=>{},error:t=>{console.log(t)}})}validateForm(){this.educationForm=this.formBuilder.group({id:[""],patient_id:[this.patient_id],consult_asrh_rapid_id:[this.selected_asrh_consult?.id,[n.k0.required,n.k0.minLength(1)]],assessment_date:[this.selected_asrh_consult?.comprehensive?.assessment_date,[n.k0.required,n.k0.minLength(1)]],education_notes:["",[n.k0.required,n.k0.minLength(50)]],consent_flag:["",[n.k0.required,n.k0.minLength(1)]],done_flag:[!1],refused_flag:[!1]}),this.patchCompre()}patchCompre(){this.selected_asrh_consult&&(this.educationForm.patchValue({education_notes:this.selected_asrh_consult?.comprehensive?.education_notes,refused_flag:this.selected_asrh_consult?.comprehensive?.refused_flag,consent_flag:this.selected_asrh_consult?.comprehensive?.consent_flag}),console.log(this.selected_asrh_consult.comprehensive,"load compre home working"))}LoadCompre(){this.http.get("asrh/comprehensive",{params:{patient_id:this.patient_id}}).subscribe({next:o=>{this.asrh_compre_history=o.data[0],console.log(this.asrh_compre_history,"hugot ng compre history"),this.patchCompre()},complete:()=>{},error:o=>{console.log(o)}})}openModal(){this.toggleServiceModal()}closeModal(){this.showModal=!1,this.educationForm.get("refused_flag")?.setValue(!1)}toggleServiceModal(){this.showServiceModal=!this.showServiceModal,this.educationForm.get("refused_flag")?.setValue(!1)}acceptModal(){this.showServiceModal=!this.showServiceModal,this.educationForm.get("refused_flag")?.setValue(!0)}constructor(t,o,i,r){this.http=t,this.formBuilder=o,this.router=i,this.toastr=r,this.updateSelectedASRH=new e.bkB,this.faCalendarDay=a.isQ,this.faPlus=a.QLR,this.faSave=a.hSh,this.faTimes=a.GRI,this.faPencil=a.zLW,this.faCircleCheck=a.QRE,this.faCaretRight=a.fU5,this.faInfoCircle=a.iW_,this.faSpinner=a.z1G,this.is_saving=!1,this.show_form=!1,this.asrh_compre_history=[],this.educationForm=new n.gE({id:new n.MJ(""),patient_id:new n.MJ(""),consult_asrh_rapid_id:new n.MJ(""),assessment_date:new n.MJ(""),refused_flag:new n.MJ("false"),education_notes:new n.MJ(""),done_flag:new n.MJ(!1),consent_flag:new n.MJ(!1)}),this.showModal=!1,this.showServiceModal=!1}ngOnInit(){this.validateForm()}static{this.\u0275fac=function(o){return new(o||s)(e.rXU(h.k),e.rXU(n.ok),e.rXU(d.Ix),e.rXU(p.tw))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-education"]],inputs:{compre_questions:"compre_questions",patient_id:"patient_id",asrh_visit_history:"asrh_visit_history",selected_asrh_consult:"selected_asrh_consult"},outputs:{updateSelectedASRH:"updateSelectedASRH"},standalone:!1,decls:3,vars:3,consts:[["class","m-5 border border-slate-200 rounded-lg",3,"ngClass",4,"ngIf"],["id","defaultModal","tabindex","-1","class","overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 w-full md:inset-0 h-modal md:h-full justify-center items-center flex","aria-modal","true","role","dialog","style","z-index:60",4,"ngIf"],["class","opacity-50 fixed inset-0 z-50 bg-black",4,"ngIf"],[1,"m-5","border","border-slate-200","rounded-lg",3,"ngClass"],[1,"bg-blue-500","text-sm","text-white","rounded-t-md","py-2","pl-5","font-semibold"],[1,"mx-5","mb-6",3,"formGroup"],["class","mt-1 w-full",4,"ngFor","ngForOf"],[1,"flex","justify-center","mt-5"],[1,"btn-save","mt-4",3,"click","disabled"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin","class","mr-2",3,"icon",4,"ngIf"],[1,"mt-1","w-full"],["class","",4,"ngIf"],[1,""],[1,"text-md","text-blue-500","rounded-t-md","font-semibold","py-4"],[1,"text-sm","mb-5"],[1,"mt-1","w-full","border-t","border-gray-200","mb-5"],[1,"columns-2"],["class","h-full",4,"ngFor","ngForOf"],[1,"h-92"],[1,"py-3.5"],["rows","13","id","home_notes","placeholder","Remarks","formControlName","education_notes",1,"text-sm","placeholder-slate-400","w-full","rounded-md","border-gray-300"],[1,"h-full"],[1,"py-1"],[1,"text-sm"],[1,"mr-2",3,"icon"],["animation","spin",1,"mr-2",3,"icon"],["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-2xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500"],[1,"text-sm","font-bold","text-white"],[1,"overflow-y-auto","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"text-left","m-5"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-gray-400",3,"click"],["type","submit",1,"btn-save","px-10","disabled:bg-gray-300",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"]],template:function(o,i){1&o&&e.DNE(0,ke,10,7,"div",0)(1,we,16,1,"div",1)(2,Re,1,0,"div",2),2&o&&(e.Y8G("ngIf",!i.show_form),e.R7$(),e.Y8G("ngIf",i.showServiceModal),e.R7$(),e.Y8G("ngIf",i.showServiceModal))},dependencies:[c.YU,c.Sq,c.bT,m.aY,n.qT,n.me,n.BC,n.cb,n.cV,n.j4,n.JD],encapsulation:2})}}return s})();function je(s,l){if(1&s&&(e.j41(0,"div",22)(1,"div",23)(2,"label",24),e.EFF(3),e.k0s()()()),2&s){const t=l.$implicit;e.R7$(3),e.SpI(" ",t.question,"")}}function Ge(s,l){if(1&s&&(e.j41(0,"div",13)(1,"div",14),e.EFF(2),e.k0s(),e.j41(3,"div",15)(4,"p"),e.EFF(5),e.k0s()(),e.nrm(6,"div",16),e.j41(7,"div",17),e.DNE(8,je,4,1,"div",18),e.j41(9,"div",19)(10,"div",20),e.nrm(11,"textarea",21),e.k0s()()()()),2&s){const t=e.XpG().$implicit;e.R7$(2),e.SpI(" ",t.desc," "),e.R7$(3),e.JRh(t.instruction),e.R7$(3),e.Y8G("ngForOf",t.questions)}}function Ae(s,l){if(1&s&&(e.j41(0,"div",11),e.DNE(1,Ge,12,3,"div",12),e.k0s()),2&s){const t=l.$implicit;e.R7$(),e.Y8G("ngIf","A01"===t.code)}}function Me(s,l){if(1&s&&e.nrm(0,"fa-icon",25),2&s){const t=e.XpG(2);e.Y8G("icon",t.faSave)}}function Ee(s,l){if(1&s&&e.nrm(0,"fa-icon",26),2&s){const t=e.XpG(2);e.Y8G("icon",t.faSpinner)}}function Ie(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",3)(1,"div",4),e.EFF(2," Comprehensive HEEADSSS Assessment "),e.k0s(),e.j41(3,"form",5),e.DNE(4,Ae,2,1,"div",6),e.j41(5,"div",7)(6,"button",8),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return i.onSubmit(),e.Njj(i.activitiesForm.markAsPristine())}),e.DNE(7,Me,1,1,"fa-icon",9)(8,Ee,1,1,"fa-icon",10),e.EFF(9),e.k0s()()()()}if(2&s){const t=e.XpG();e.Y8G("ngClass",!0===(null==t.selected_asrh_consult?null:t.selected_asrh_consult.done_flag)&&!0===(null==t.selected_asrh_consult||null==t.selected_asrh_consult.comprehensive?null:t.selected_asrh_consult.comprehensive.done_flag)||!0===(null==t.selected_asrh_consult?null:t.selected_asrh_consult.refused_flag)||!0===(null==t.selected_asrh_consult||null==t.selected_asrh_consult.comprehensive?null:t.selected_asrh_consult.comprehensive.refused_flag)?"pointer-events-none select-none":""),e.R7$(3),e.Y8G("formGroup",t.activitiesForm),e.R7$(),e.Y8G("ngForOf",t.compre_questions),e.R7$(2),e.Y8G("disabled",t.is_saving||t.activitiesForm.invalid||!t.activitiesForm.dirty),e.R7$(),e.Y8G("ngIf",!t.is_saving),e.R7$(),e.Y8G("ngIf",t.is_saving),e.R7$(),e.SpI(" ",null!=t.selected_asrh_consult&&null!=t.selected_asrh_consult.comprehensive&&t.selected_asrh_consult.comprehensive.activities_notes?t.is_saving?"Updating":"Update":t.is_saving?"Saving":"Save"," ")}}function Te(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",27)(1,"div",28)(2,"div",29)(3,"div",30)(4,"h3",31),e.EFF(5," Confirmation "),e.k0s()(),e.j41(6,"div",32)(7,"form",33)(8,"p"),e.EFF(9,"Are you sure the patient refused to conduct the Rapid HEEADSSS Assessment?"),e.k0s()()(),e.j41(10,"div",34)(11,"button",35),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleServiceModal())}),e.EFF(12,"No"),e.k0s(),e.j41(13,"button",36),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.acceptModal())}),e.nrm(14,"fa-icon"),e.EFF(15),e.k0s()()()()()}if(2&s){const t=e.XpG();e.R7$(15),e.SpI(" ",t.is_saving?"Saving":"Yes"," ")}}function $e(s,l){1&s&&e.nrm(0,"div",37)}let Ye=(()=>{class s{onSubmit(){console.log(this.activitiesForm.value,"display visit details"),this.is_saving=!0,this.http.post("asrh/comprehensive",this.activitiesForm.value).subscribe({next:t=>{this.toastr.success("Activities was "+(null!==this.selected_asrh_consult.comprehensive.activities_notes?"updated":"saved")+" successfuly","Success"),this.is_saving=!1,this.updateSelectedASRH.emit(t),console.log(this.activitiesForm,"checker education")},complete:()=>{},error:t=>{console.log(t)}})}validateForm(){this.activitiesForm=this.formBuilder.group({id:[""],patient_id:[this.patient_id],consult_asrh_rapid_id:[this.selected_asrh_consult?.id,[n.k0.required,n.k0.minLength(1)]],assessment_date:[this.selected_asrh_consult?.comprehensive?.assessment_date,[n.k0.required,n.k0.minLength(1)]],activities_notes:["",[n.k0.required,n.k0.minLength(50)]],done_flag:[!1],consent_flag:["",[n.k0.required,n.k0.minLength(1)]],refused_flag:[!1]}),this.patchCompre()}patchCompre(){this.selected_asrh_consult&&this.activitiesForm.patchValue({activities_notes:this.selected_asrh_consult?.comprehensive?.activities_notes,consent_flag:this.selected_asrh_consult?.comprehensive?.consent_flag,refused_flag:this.selected_asrh_consult?.comprehensive?.refused_flag})}LoadCompre(){this.loadASRH.emit(),this.http.get("asrh/comprehensive",{params:{patient_id:this.patient_id}}).subscribe({next:o=>{this.asrh_compre_history=o.data[0],console.log(this.asrh_compre_history,"hugot ng compre history"),this.patchCompre()},complete:()=>{},error:o=>{console.log(o)}})}openModal(){this.toggleServiceModal()}closeModal(){this.showModal=!1,this.activitiesForm.get("refused_flag")?.setValue(!1)}toggleServiceModal(){this.showServiceModal=!this.showServiceModal,this.activitiesForm.get("refused_flag")?.setValue(!1)}acceptModal(){this.showServiceModal=!this.showServiceModal,this.activitiesForm.get("refused_flag")?.setValue(!0)}constructor(t,o,i,r){this.http=t,this.formBuilder=o,this.toastr=i,this.router=r,this.loadASRH=new e.bkB,this.updateSelectedASRH=new e.bkB,this.faCalendarDay=a.isQ,this.faPlus=a.QLR,this.faSave=a.hSh,this.faTimes=a.GRI,this.faPencil=a.zLW,this.faCircleCheck=a.QRE,this.faCaretRight=a.fU5,this.faInfoCircle=a.iW_,this.faSpinner=a.z1G,this.is_saving=!1,this.show_form=!1,this.asrh_compre_history=[],this.asrh_main_history=[],this.activitiesForm=new n.gE({id:new n.MJ(""),patient_id:new n.MJ(""),consult_asrh_rapid_id:new n.MJ(""),assessment_date:new n.MJ(""),activities_notes:new n.MJ(""),done_flag:new n.MJ(!1),consent_flag:new n.MJ("false"),refused_flag:new n.MJ("false")}),this.showModal=!1,this.showServiceModal=!1}ngOnInit(){this.validateForm()}static{this.\u0275fac=function(o){return new(o||s)(e.rXU(h.k),e.rXU(n.ok),e.rXU(p.tw),e.rXU(d.Ix))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-activities"]],inputs:{compre_questions:"compre_questions",patient_id:"patient_id",asrh_visit_history:"asrh_visit_history",selected_asrh_consult:"selected_asrh_consult"},outputs:{loadASRH:"loadASRH",updateSelectedASRH:"updateSelectedASRH"},standalone:!1,decls:3,vars:3,consts:[["class","m-5 border border-slate-200 rounded-lg",3,"ngClass",4,"ngIf"],["id","defaultModal","tabindex","-1","class","overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 w-full md:inset-0 h-modal md:h-full justify-center items-center flex","aria-modal","true","role","dialog","style","z-index:60",4,"ngIf"],["class","opacity-50 fixed inset-0 z-50 bg-black",4,"ngIf"],[1,"m-5","border","border-slate-200","rounded-lg",3,"ngClass"],[1,"bg-blue-500","text-sm","text-white","rounded-t-md","py-2","pl-5","font-semibold"],[1,"mx-5","mb-6",3,"formGroup"],["class","mt-1 w-full",4,"ngFor","ngForOf"],[1,"flex","justify-center","mt-5"],[1,"btn-save","mt-4",3,"click","disabled"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin","class","mr-2",3,"icon",4,"ngIf"],[1,"mt-1","w-full"],["class","",4,"ngIf"],[1,""],[1,"text-md","text-blue-500","rounded-t-md","font-semibold","py-4"],[1,"text-sm","mb-5"],[1,"mt-1","w-full","border-t","border-gray-200","mb-5"],[1,"columns-2"],["class","h-full",4,"ngFor","ngForOf"],[1,"h-92"],[1,"py-3.5"],["rows","13","id","drugs.id","placeholder","Remarks","formControlName","activities_notes",1,"text-sm","placeholder-slate-400","w-full","rounded-md","border-gray-300"],[1,"h-full"],[1,"py-1"],[1,"text-sm"],[1,"mr-2",3,"icon"],["animation","spin",1,"mr-2",3,"icon"],["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-2xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500"],[1,"text-sm","font-bold","text-white"],[1,"overflow-y-auto","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"text-left","m-5"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-gray-400",3,"click"],["type","submit",1,"btn-save","px-10","disabled:bg-gray-300",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"]],template:function(o,i){1&o&&e.DNE(0,Ie,10,7,"div",0)(1,Te,16,1,"div",1)(2,$e,1,0,"div",2),2&o&&(e.Y8G("ngIf",!i.show_form),e.R7$(),e.Y8G("ngIf",i.showServiceModal),e.R7$(),e.Y8G("ngIf",i.showServiceModal))},dependencies:[c.YU,c.Sq,c.bT,m.aY,n.qT,n.me,n.BC,n.cb,n.cV,n.j4,n.JD],encapsulation:2})}}return s})();function He(s,l){if(1&s&&(e.j41(0,"div",22)(1,"div",23)(2,"label",24),e.EFF(3),e.k0s()()()),2&s){const t=l.$implicit;e.R7$(3),e.SpI(" ",t.question,"")}}function De(s,l){if(1&s&&(e.j41(0,"div",13)(1,"div",14),e.EFF(2),e.k0s(),e.j41(3,"div",15)(4,"p"),e.EFF(5),e.k0s()(),e.nrm(6,"div",16),e.j41(7,"div",17),e.DNE(8,He,4,1,"div",18),e.j41(9,"div",19)(10,"div",20),e.nrm(11,"textarea",21),e.k0s()()()()),2&s){const t=e.XpG().$implicit;e.R7$(2),e.SpI(" ",t.desc," "),e.R7$(3),e.JRh(t.instruction),e.R7$(3),e.Y8G("ngForOf",t.questions)}}function Ve(s,l){if(1&s&&(e.j41(0,"div",11),e.DNE(1,De,12,3,"div",12),e.k0s()),2&s){const t=l.$implicit;e.R7$(),e.Y8G("ngIf","D01"===t.code)}}function Xe(s,l){if(1&s&&e.nrm(0,"fa-icon",25),2&s){const t=e.XpG(2);e.Y8G("icon",t.faSave)}}function Ne(s,l){if(1&s&&e.nrm(0,"fa-icon",26),2&s){const t=e.XpG(2);e.Y8G("icon",t.faSpinner)}}function qe(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",3)(1,"div",4),e.EFF(2," Comprehensive HEEADSSS Assessment "),e.k0s(),e.j41(3,"form",5),e.DNE(4,Ve,2,1,"div",6),e.j41(5,"div",7)(6,"button",8),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return i.onSubmit(),e.Njj(i.drugsForm.markAsPristine())}),e.DNE(7,Xe,1,1,"fa-icon",9)(8,Ne,1,1,"fa-icon",10),e.EFF(9),e.k0s()()()()}if(2&s){const t=e.XpG();e.Y8G("ngClass",!0===(null==t.selected_asrh_consult?null:t.selected_asrh_consult.done_flag)&&!0===(null==t.selected_asrh_consult||null==t.selected_asrh_consult.comprehensive?null:t.selected_asrh_consult.comprehensive.done_flag)||!0===(null==t.selected_asrh_consult?null:t.selected_asrh_consult.refused_flag)||!0===(null==t.selected_asrh_consult||null==t.selected_asrh_consult.comprehensive?null:t.selected_asrh_consult.comprehensive.refused_flag)?"pointer-events-none select-none":""),e.R7$(3),e.Y8G("formGroup",t.drugsForm),e.R7$(),e.Y8G("ngForOf",t.compre_questions),e.R7$(2),e.Y8G("disabled",t.is_saving||t.drugsForm.invalid||!t.drugsForm.dirty),e.R7$(),e.Y8G("ngIf",!t.is_saving),e.R7$(),e.Y8G("ngIf",t.is_saving),e.R7$(),e.SpI(" ",null!=t.selected_asrh_consult&&null!=t.selected_asrh_consult.comprehensive&&t.selected_asrh_consult.comprehensive.drugs_notes?t.is_saving?"Updating":"Update":t.is_saving?"Saving":"Save"," ")}}function Be(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",27)(1,"div",28)(2,"div",29)(3,"div",30)(4,"h3",31),e.EFF(5," Confirmation "),e.k0s()(),e.j41(6,"div",32)(7,"form",33)(8,"p"),e.EFF(9,"Are you sure the patient refused to conduct the Rapid HEEADSSS Assessment?"),e.k0s()()(),e.j41(10,"div",34)(11,"button",35),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleServiceModal())}),e.EFF(12,"No"),e.k0s(),e.j41(13,"button",36),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.acceptModal())}),e.nrm(14,"fa-icon"),e.EFF(15),e.k0s()()()()()}if(2&s){const t=e.XpG();e.R7$(15),e.SpI(" ",t.is_saving?"Saving":"Yes"," ")}}function Je(s,l){1&s&&e.nrm(0,"div",37)}let Ue=(()=>{class s{onSubmit(){console.log(this.drugsForm.value,"display visit details"),this.is_saving=!0,this.http.post("asrh/comprehensive",this.drugsForm.value).subscribe({next:t=>{this.toastr.success("Drugs was "+(null!==this.selected_asrh_consult.comprehensive.drugs_notes?"updated":"saved")+" successfuly","Success"),this.is_saving=!1,this.updateSelectedASRH.emit(t),console.log(this.drugsForm,"checker education")},complete:()=>{},error:t=>{console.log(t)}})}validateForm(){this.drugsForm=this.formBuilder.group({id:[""],patient_id:[this.patient_id],consult_asrh_rapid_id:[this.selected_asrh_consult?.id,[n.k0.required,n.k0.minLength(1)]],assessment_date:[this.selected_asrh_consult?.comprehensive?.assessment_date,[n.k0.required,n.k0.minLength(1)]],drugs_notes:["",[n.k0.required,n.k0.minLength(50)]],done_flag:[!1],consent_flag:["",[n.k0.required,n.k0.minLength(1)]],refused_flag:[!1]}),this.patchCompre()}patchCompre(){this.selected_asrh_consult&&this.drugsForm.patchValue({drugs_notes:this.selected_asrh_consult?.comprehensive?.drugs_notes,refused_flag:this.selected_asrh_consult?.comprehensive?.refused_flag,consent_flag:this.selected_asrh_consult?.comprehensive?.consent_flag})}LoadCompre(){this.http.get("asrh/comprehensive",{params:{patient_id:this.patient_id}}).subscribe({next:o=>{this.asrh_compre_history=o.data[0],console.log(this.asrh_compre_history,"hugot ng compre history"),this.patchCompre()},complete:()=>{},error:o=>{console.log(o)}})}openModal(){this.toggleServiceModal()}closeModal(){this.showModal=!1,this.drugsForm.get("refused_flag")?.setValue(!1)}toggleServiceModal(){this.showServiceModal=!this.showServiceModal,this.drugsForm.get("refused_flag")?.setValue(!1)}acceptModal(){this.showServiceModal=!this.showServiceModal,this.drugsForm.get("refused_flag")?.setValue(!0)}constructor(t,o,i,r){this.http=t,this.formBuilder=o,this.toastr=i,this.router=r,this.updateSelectedASRH=new e.bkB,this.faCalendarDay=a.isQ,this.faPlus=a.QLR,this.faSave=a.hSh,this.faTimes=a.GRI,this.faPencil=a.zLW,this.faCircleCheck=a.QRE,this.faCaretRight=a.fU5,this.faInfoCircle=a.iW_,this.faSpinner=a.z1G,this.is_saving=!1,this.show_form=!1,this.asrh_compre_history=[],this.drugsForm=new n.gE({id:new n.MJ(""),patient_id:new n.MJ(""),consult_asrh_rapid_id:new n.MJ(""),assessment_date:new n.MJ(""),drugs_notes:new n.MJ(""),done_flag:new n.MJ(!1),consent_flag:new n.MJ("false"),refused_flag:new n.MJ("false")}),this.showModal=!1,this.showServiceModal=!1}ngOnInit(){this.validateForm()}static{this.\u0275fac=function(o){return new(o||s)(e.rXU(h.k),e.rXU(n.ok),e.rXU(p.tw),e.rXU(d.Ix))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-drugs"]],inputs:{compre_questions:"compre_questions",patient_id:"patient_id",asrh_visit_history:"asrh_visit_history",selected_asrh_consult:"selected_asrh_consult"},outputs:{updateSelectedASRH:"updateSelectedASRH"},standalone:!1,decls:3,vars:3,consts:[["class","m-5 border border-slate-200 rounded-lg",3,"ngClass",4,"ngIf"],["id","defaultModal","tabindex","-1","class","overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 w-full md:inset-0 h-modal md:h-full justify-center items-center flex","aria-modal","true","role","dialog","style","z-index:60",4,"ngIf"],["class","opacity-50 fixed inset-0 z-50 bg-black",4,"ngIf"],[1,"m-5","border","border-slate-200","rounded-lg",3,"ngClass"],[1,"bg-blue-500","text-sm","text-white","rounded-t-md","py-2","pl-5","font-semibold"],[1,"mx-5","mb-6",3,"formGroup"],["class","mt-1 w-full",4,"ngFor","ngForOf"],[1,"flex","justify-center","mt-5"],[1,"btn-save","mt-4",3,"click","disabled"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin","class","mr-2",3,"icon",4,"ngIf"],[1,"mt-1","w-full"],["class","",4,"ngIf"],[1,""],[1,"text-md","text-blue-500","rounded-t-md","font-semibold","py-4"],[1,"text-sm","mb-5"],[1,"mt-1","w-full","border-t","border-gray-200","mb-5"],[1,"columns-2"],["class","h-full",4,"ngFor","ngForOf"],[1,"h-92"],[1,"py-3.5"],["rows","13","id","drugs.id","placeholder","Remarks","formControlName","drugs_notes",1,"text-sm","placeholder-slate-400","w-full","rounded-md","border-gray-300"],[1,"h-full"],[1,"py-1"],[1,"text-sm"],[1,"mr-2",3,"icon"],["animation","spin",1,"mr-2",3,"icon"],["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-2xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500"],[1,"text-sm","font-bold","text-white"],[1,"overflow-y-auto","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"text-left","m-5"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-gray-400",3,"click"],["type","submit",1,"btn-save","px-10","disabled:bg-gray-300",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"]],template:function(o,i){1&o&&e.DNE(0,qe,10,7,"div",0)(1,Be,16,1,"div",1)(2,Je,1,0,"div",2),2&o&&(e.Y8G("ngIf",!i.show_form),e.R7$(),e.Y8G("ngIf",i.showServiceModal),e.R7$(),e.Y8G("ngIf",i.showServiceModal))},dependencies:[c.YU,c.Sq,c.bT,m.aY,n.qT,n.me,n.BC,n.cb,n.cV,n.j4,n.JD],encapsulation:2})}}return s})();function Le(s,l){if(1&s&&(e.j41(0,"div",25)(1,"div",26)(2,"label",27),e.EFF(3),e.k0s()()()),2&s){const t=l.$implicit;e.R7$(3),e.SpI(" ",t.question,"")}}function Oe(s,l){if(1&s&&(e.j41(0,"div",13)(1,"div",14),e.EFF(2),e.k0s(),e.j41(3,"div",15)(4,"p"),e.EFF(5),e.k0s()(),e.j41(6,"div",16),e.nrm(7,"input",17),e.j41(8,"label",18),e.EFF(9," Risky Behaviour for STI's "),e.k0s()(),e.nrm(10,"div",19),e.j41(11,"div",20),e.DNE(12,Le,4,1,"div",21),e.j41(13,"div",22)(14,"div",23),e.nrm(15,"textarea",24),e.k0s()()()()),2&s){const t=e.XpG().$implicit;e.R7$(2),e.SpI(" ",t.desc," "),e.R7$(3),e.JRh(t.instruction),e.R7$(7),e.Y8G("ngForOf",t.questions)}}function ze(s,l){if(1&s&&(e.j41(0,"div",11),e.DNE(1,Oe,16,3,"div",12),e.k0s()),2&s){const t=l.$implicit;e.R7$(),e.Y8G("ngIf","S01"===t.code)}}function Pe(s,l){if(1&s&&e.nrm(0,"fa-icon",28),2&s){const t=e.XpG(2);e.Y8G("icon",t.faSave)}}function Qe(s,l){if(1&s&&e.nrm(0,"fa-icon",29),2&s){const t=e.XpG(2);e.Y8G("icon",t.faSpinner)}}function We(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",3)(1,"div",4),e.EFF(2," Comprehensive HEEADSSS Assessment "),e.k0s(),e.j41(3,"form",5),e.DNE(4,ze,2,1,"div",6),e.j41(5,"div",7)(6,"button",8),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return i.onSubmit(),e.Njj(i.sexualityForm.markAsPristine())}),e.DNE(7,Pe,1,1,"fa-icon",9)(8,Qe,1,1,"fa-icon",10),e.EFF(9),e.k0s()()()()}if(2&s){const t=e.XpG();e.Y8G("ngClass",!0===(null==t.selected_asrh_consult?null:t.selected_asrh_consult.done_flag)&&!0===(null==t.selected_asrh_consult||null==t.selected_asrh_consult.comprehensive?null:t.selected_asrh_consult.comprehensive.done_flag)||!0===(null==t.selected_asrh_consult?null:t.selected_asrh_consult.refused_flag)||!0===(null==t.selected_asrh_consult||null==t.selected_asrh_consult.comprehensive?null:t.selected_asrh_consult.comprehensive.refused_flag)?"pointer-events-none select-none":""),e.R7$(3),e.Y8G("formGroup",t.sexualityForm),e.R7$(),e.Y8G("ngForOf",t.compre_questions),e.R7$(2),e.Y8G("disabled",t.is_saving||t.sexualityForm.invalid||!t.sexualityForm.dirty),e.R7$(),e.Y8G("ngIf",!t.is_saving),e.R7$(),e.Y8G("ngIf",t.is_saving),e.R7$(),e.SpI(" ",null!=t.selected_asrh_consult&&null!=t.selected_asrh_consult.comprehensive&&t.selected_asrh_consult.comprehensive.sexuality_notes?t.is_saving?"Updating":"Update":t.is_saving?"Saving":"Save"," ")}}function Ke(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",30)(1,"div",31)(2,"div",32)(3,"div",33)(4,"h3",34),e.EFF(5," Confirmation "),e.k0s()(),e.j41(6,"div",35)(7,"form",36)(8,"p"),e.EFF(9,"Are you sure the patient refused to conduct the Rapid HEEADSSS Assessment?"),e.k0s()()(),e.j41(10,"div",37)(11,"button",38),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleServiceModal())}),e.EFF(12,"No"),e.k0s(),e.j41(13,"button",39),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.acceptModal())}),e.nrm(14,"fa-icon"),e.EFF(15),e.k0s()()()()()}if(2&s){const t=e.XpG();e.R7$(15),e.SpI(" ",t.is_saving?"Saving":"Yes"," ")}}function Ze(s,l){1&s&&e.nrm(0,"div",40)}let et=(()=>{class s{onSubmit(){console.log(this.sexualityForm.value,"display visit details"),this.is_saving=!0,this.http.post("asrh/comprehensive",this.sexualityForm.value).subscribe({next:t=>{this.toastr.success("Sexuality was "+(null!==this.selected_asrh_consult.comprehensive.sexuality_notes?"updated":"saved")+" successfuly","Success"),this.is_saving=!1,this.updateSelectedASRH.emit(t),console.log(this.sexualityForm,"checker education")},complete:()=>{},error:t=>{console.log(t)}})}validateForm(){this.sexualityForm=this.formBuilder.group({id:[""],patient_id:[this.patient_id],consult_asrh_rapid_id:[this.selected_asrh_consult?.id,[n.k0.required,n.k0.minLength(1)]],assessment_date:[this.selected_asrh_consult?.comprehensive?.assessment_date,[n.k0.required,n.k0.minLength(1)]],risky_behavior:[[!1],[n.k0.required,n.k0.minLength(1)]],sexuality_notes:["",[n.k0.required,n.k0.minLength(50)]],done_flag:[!1],consent_flag:["",[n.k0.required,n.k0.minLength(1)]],refused_flag:[!1]}),this.patchCompre()}patchCompre(){this.selected_asrh_consult&&this.sexualityForm.patchValue({sexuality_notes:this.selected_asrh_consult?.comprehensive?.sexuality_notes,risky_behavior:this.selected_asrh_consult?.comprehensive?.risky_behavior,refused_flag:this.selected_asrh_consult?.comprehensive?.refused_flag,consent_flag:this.selected_asrh_consult?.comprehensive?.consent_flag})}LoadCompre(){this.loadASRH.emit(),this.http.get("asrh/comprehensive",{params:{patient_id:this.patient_id}}).subscribe({next:o=>{this.asrh_compre_history=o.data[0],console.log(this.asrh_compre_history,"hugot ng compre history"),this.patchCompre()},complete:()=>{},error:o=>{console.log(o)}})}openModal(){this.toggleServiceModal()}closeModal(){this.showModal=!1,this.sexualityForm.get("refused_flag")?.setValue(!1)}toggleServiceModal(){this.showServiceModal=!this.showServiceModal,this.sexualityForm.get("refused_flag")?.setValue(!1)}acceptModal(){this.showServiceModal=!this.showServiceModal,this.sexualityForm.get("refused_flag")?.setValue(!0)}constructor(t,o,i,r){this.http=t,this.formBuilder=o,this.toastr=i,this.router=r,this.loadASRH=new e.bkB,this.updateSelectedASRH=new e.bkB,this.faCalendarDay=a.isQ,this.faPlus=a.QLR,this.faSave=a.hSh,this.faTimes=a.GRI,this.faPencil=a.zLW,this.faCircleCheck=a.QRE,this.faCaretRight=a.fU5,this.faInfoCircle=a.iW_,this.faSpinner=a.z1G,this.is_saving=!1,this.show_form=!1,this.asrh_compre_history=[],this.asrh_main_history=[],this.sexualityForm=new n.gE({id:new n.MJ(""),patient_id:new n.MJ(""),consult_asrh_rapid_id:new n.MJ(""),assessment_date:new n.MJ(""),risky_behavior:new n.MJ(!1),sexuality_notes:new n.MJ(""),done_flag:new n.MJ(!1),consent_flag:new n.MJ("false"),refused_flag:new n.MJ("false")}),this.showModal=!1,this.showServiceModal=!1}ngOnInit(){this.validateForm()}static{this.\u0275fac=function(o){return new(o||s)(e.rXU(h.k),e.rXU(n.ok),e.rXU(p.tw),e.rXU(d.Ix))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-sexuality"]],inputs:{compre_questions:"compre_questions",patient_id:"patient_id",asrh_visit_history:"asrh_visit_history",selected_asrh_consult:"selected_asrh_consult"},outputs:{loadASRH:"loadASRH",updateSelectedASRH:"updateSelectedASRH"},standalone:!1,decls:3,vars:3,consts:[["class","m-5 border border-slate-200 rounded-lg",3,"ngClass",4,"ngIf"],["id","defaultModal","tabindex","-1","class","overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 w-full md:inset-0 h-modal md:h-full justify-center items-center flex","aria-modal","true","role","dialog","style","z-index:60",4,"ngIf"],["class","opacity-50 fixed inset-0 z-50 bg-black",4,"ngIf"],[1,"m-5","border","border-slate-200","rounded-lg",3,"ngClass"],[1,"bg-blue-500","text-sm","text-white","rounded-t-md","py-2","pl-5","font-semibold"],[1,"mx-5","mb-6",3,"formGroup"],["class","mt-1 w-full",4,"ngFor","ngForOf"],[1,"flex","justify-center","mt-5"],[1,"btn-save","mt-4",3,"click","disabled"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin","class","mr-2",3,"icon",4,"ngIf"],[1,"mt-1","w-full"],["class","",4,"ngIf"],[1,""],[1,"text-md","text-blue-500","rounded-t-md","font-semibold","py-4"],[1,"text-sm","mb-4","flex","justify-between"],[1,"mb-5"],["type","checkbox","id","seriously_injured","formControlName","risky_behavior",1,"input-checkbox"],["for","seriously_injured",1,"ml-1","text-sm"],[1,"mt-1","w-full","border-t","border-gray-200","mb-5"],[1,"columns-2"],["class","h-full",4,"ngFor","ngForOf"],[1,"h-92"],[1,"py-3.5"],["rows","13","id","sexuality.id","placeholder","Remarks","formControlName","sexuality_notes",1,"text-sm","placeholder-slate-400","w-full","rounded-md","border-gray-300"],[1,"h-full"],[1,"py-1"],[1,"text-sm"],[1,"mr-2",3,"icon"],["animation","spin",1,"mr-2",3,"icon"],["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-2xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500"],[1,"text-sm","font-bold","text-white"],[1,"overflow-y-auto","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"text-left","m-5"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-gray-400",3,"click"],["type","submit",1,"btn-save","px-10","disabled:bg-gray-300",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"]],template:function(o,i){1&o&&e.DNE(0,We,10,7,"div",0)(1,Ke,16,1,"div",1)(2,Ze,1,0,"div",2),2&o&&(e.Y8G("ngIf",!i.show_form),e.R7$(),e.Y8G("ngIf",i.showServiceModal),e.R7$(),e.Y8G("ngIf",i.showServiceModal))},dependencies:[c.YU,c.Sq,c.bT,m.aY,n.qT,n.me,n.Zm,n.BC,n.cb,n.cV,n.j4,n.JD],encapsulation:2})}}return s})();function tt(s,l){if(1&s&&(e.j41(0,"div",25)(1,"div",26)(2,"label",27),e.EFF(3),e.k0s()()()),2&s){const t=l.$implicit;e.R7$(3),e.SpI(" ",t.question,"")}}function st(s,l){if(1&s&&(e.j41(0,"div",13)(1,"div",14),e.EFF(2),e.k0s(),e.j41(3,"div",15)(4,"p"),e.EFF(5),e.k0s()(),e.j41(6,"div",16),e.nrm(7,"input",17),e.j41(8,"label",18),e.EFF(9," History of Self Harm "),e.k0s()(),e.nrm(10,"div",19),e.j41(11,"div",20),e.DNE(12,tt,4,1,"div",21),e.j41(13,"div",22)(14,"div",23),e.nrm(15,"textarea",24),e.k0s()()()()),2&s){const t=e.XpG().$implicit;e.R7$(2),e.SpI(" ",t.desc," "),e.R7$(3),e.JRh(t.instruction),e.R7$(7),e.Y8G("ngForOf",t.questions)}}function it(s,l){if(1&s&&(e.j41(0,"div",11),e.DNE(1,st,16,3,"div",12),e.k0s()),2&s){const t=l.$implicit;e.R7$(),e.Y8G("ngIf","S02"===t.code)}}function nt(s,l){if(1&s&&e.nrm(0,"fa-icon",28),2&s){const t=e.XpG(2);e.Y8G("icon",t.faSave)}}function ot(s,l){if(1&s&&e.nrm(0,"fa-icon",29),2&s){const t=e.XpG(2);e.Y8G("icon",t.faSpinner)}}function lt(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",3)(1,"div",4),e.EFF(2," Comprehensive HEEADSSS Assessment "),e.k0s(),e.j41(3,"form",5),e.DNE(4,it,2,1,"div",6),e.j41(5,"div",7)(6,"button",8),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return i.onSubmit(),e.Njj(i.suicideForm.markAsPristine())}),e.DNE(7,nt,1,1,"fa-icon",9)(8,ot,1,1,"fa-icon",10),e.EFF(9),e.k0s()()()()}if(2&s){const t=e.XpG();e.Y8G("ngClass",!0===(null==t.selected_asrh_consult?null:t.selected_asrh_consult.done_flag)&&!0===(null==t.selected_asrh_consult||null==t.selected_asrh_consult.comprehensive?null:t.selected_asrh_consult.comprehensive.done_flag)||!0===(null==t.selected_asrh_consult?null:t.selected_asrh_consult.refused_flag)||!0===(null==t.selected_asrh_consult||null==t.selected_asrh_consult.comprehensive?null:t.selected_asrh_consult.comprehensive.refused_flag)?"pointer-events-none select-none":""),e.R7$(3),e.Y8G("formGroup",t.suicideForm),e.R7$(),e.Y8G("ngForOf",t.compre_questions),e.R7$(2),e.Y8G("disabled",t.is_saving||t.suicideForm.invalid||!t.suicideForm.dirty),e.R7$(),e.Y8G("ngIf",!t.is_saving),e.R7$(),e.Y8G("ngIf",t.is_saving),e.R7$(),e.SpI(" ",null!=t.selected_asrh_consult&&null!=t.selected_asrh_consult.comprehensive&&t.selected_asrh_consult.comprehensive.suicide_notes?t.is_saving?"Updating":"Update":t.is_saving?"Saving":"Save"," ")}}function at(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",30)(1,"div",31)(2,"div",32)(3,"div",33)(4,"h3",34),e.EFF(5," Confirmation "),e.k0s()(),e.j41(6,"div",35)(7,"form",36)(8,"p"),e.EFF(9,"Are you sure the patient refused to conduct the Rapid HEEADSSS Assessment?"),e.k0s()()(),e.j41(10,"div",37)(11,"button",38),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleServiceModal())}),e.EFF(12,"No"),e.k0s(),e.j41(13,"button",39),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.acceptModal())}),e.nrm(14,"fa-icon"),e.EFF(15),e.k0s()()()()()}if(2&s){const t=e.XpG();e.R7$(15),e.SpI(" ",t.is_saving?"Saving":"Yes"," ")}}function rt(s,l){1&s&&e.nrm(0,"div",40)}let ct=(()=>{class s{onSubmit(){console.log(this.suicideForm.value,"display visit details"),this.is_saving=!0,this.http.post("asrh/comprehensive",this.suicideForm.value).subscribe({next:t=>{this.toastr.success("Suicide & Depression was "+(null!==this.selected_asrh_consult.comprehensive.suicide_notes?"updated":"saved")+" successfuly","Success"),this.is_saving=!1,this.updateSelectedASRH.emit(t),console.log(this.suicideForm,"checker education")},complete:()=>{},error:t=>{console.log(t)}})}validateForm(){this.suicideForm=this.formBuilder.group({id:[""],patient_id:[this.patient_id],consult_asrh_rapid_id:[this.selected_asrh_consult?.id,[n.k0.required,n.k0.minLength(1)]],assessment_date:[this.selected_asrh_consult?.comprehensive?.assessment_date,[n.k0.required,n.k0.minLength(1)]],suicide_notes:["",[n.k0.required,n.k0.minLength(50)]],self_harm:[[!1],[n.k0.required,n.k0.minLength(1)]],done_flag:[!1],consent_flag:["",[n.k0.required,n.k0.minLength(1)]],refused_flag:[!1]}),this.patchCompre()}patchCompre(){this.selected_asrh_consult&&this.suicideForm.patchValue({suicide_notes:this.selected_asrh_consult?.comprehensive?.suicide_notes,self_harm:this.selected_asrh_consult?.comprehensive?.self_harm,refused_flag:this.selected_asrh_consult?.comprehensive?.refused_flag,consent_flag:this.selected_asrh_consult?.comprehensive?.consent_flag})}LoadCompre(){this.http.get("asrh/comprehensive",{params:{patient_id:this.patient_id}}).subscribe({next:o=>{this.asrh_compre_history=o.data[0],console.log(this.asrh_compre_history,"hugot ng compre history"),this.patchCompre()},complete:()=>{},error:o=>{console.log(o)}})}openModal(){this.toggleServiceModal()}closeModal(){this.showModal=!1,this.suicideForm.get("refused_flag")?.setValue(!1)}toggleServiceModal(){this.showServiceModal=!this.showServiceModal,this.suicideForm.get("refused_flag")?.setValue(!1)}acceptModal(){this.showServiceModal=!this.showServiceModal,this.suicideForm.get("refused_flag")?.setValue(!0)}constructor(t,o,i,r){this.http=t,this.formBuilder=o,this.toastr=i,this.router=r,this.updateSelectedASRH=new e.bkB,this.faCalendarDay=a.isQ,this.faPlus=a.QLR,this.faSave=a.hSh,this.faTimes=a.GRI,this.faPencil=a.zLW,this.faCircleCheck=a.QRE,this.faCaretRight=a.fU5,this.faInfoCircle=a.iW_,this.faSpinner=a.z1G,this.is_saving=!1,this.show_form=!1,this.asrh_compre_history=[],this.suicideForm=new n.gE({id:new n.MJ(""),patient_id:new n.MJ(""),consult_asrh_rapid_id:new n.MJ(""),assessment_date:new n.MJ(""),suicide_notes:new n.MJ(""),self_harm:new n.MJ(""),done_flag:new n.MJ(!1),consent_flag:new n.MJ("false"),refused_flag:new n.MJ("false")}),this.showModal=!1,this.showServiceModal=!1}ngOnInit(){this.validateForm()}static{this.\u0275fac=function(o){return new(o||s)(e.rXU(h.k),e.rXU(n.ok),e.rXU(p.tw),e.rXU(d.Ix))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-suicide-depression"]],inputs:{compre_questions:"compre_questions",patient_id:"patient_id",asrh_visit_history:"asrh_visit_history",selected_asrh_consult:"selected_asrh_consult"},outputs:{updateSelectedASRH:"updateSelectedASRH"},standalone:!1,decls:3,vars:3,consts:[["class","m-5 border border-slate-200 rounded-lg",3,"ngClass",4,"ngIf"],["id","defaultModal","tabindex","-1","class","overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 w-full md:inset-0 h-modal md:h-full justify-center items-center flex","aria-modal","true","role","dialog","style","z-index:60",4,"ngIf"],["class","opacity-50 fixed inset-0 z-50 bg-black",4,"ngIf"],[1,"m-5","border","border-slate-200","rounded-lg",3,"ngClass"],[1,"bg-blue-500","text-sm","text-white","rounded-t-md","py-2","pl-5","font-semibold"],[1,"mx-5","mb-6",3,"formGroup"],["class","mt-1 w-full",4,"ngFor","ngForOf"],[1,"flex","justify-center","mt-5"],[1,"btn-save","mr-5","mt-4",3,"click","disabled"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin","class","mr-2",3,"icon",4,"ngIf"],[1,"mt-1","w-full"],["class","",4,"ngIf"],[1,""],[1,"text-md","text-blue-500","rounded-t-md","font-semibold","py-4"],[1,"text-sm","mb-5"],[1,"mb-5"],["type","checkbox","id","seriously_injured","formControlName","self_harm",1,"input-checkbox"],["for","self_harm",1,"ml-1","text-sm"],[1,"mt-1","w-full","border-t","border-gray-200","mb-5"],[1,"columns-2"],["class","h-full",4,"ngFor","ngForOf"],[1,"h-92"],[1,"py-3.5"],["rows","13","id","suicide.id","placeholder","Remarks","formControlName","suicide_notes",1,"text-sm","placeholder-slate-400","w-full","rounded-md","border-gray-300"],[1,"h-full"],[1,"py-1"],[1,"text-sm"],[1,"mr-2",3,"icon"],["animation","spin",1,"mr-2",3,"icon"],["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-2xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500"],[1,"text-sm","font-bold","text-white"],[1,"overflow-y-auto","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"text-left","m-5"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-gray-400",3,"click"],["type","submit",1,"btn-save","px-10","disabled:bg-gray-300",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"]],template:function(o,i){1&o&&e.DNE(0,lt,10,7,"div",0)(1,at,16,1,"div",1)(2,rt,1,0,"div",2),2&o&&(e.Y8G("ngIf",!i.show_form),e.R7$(),e.Y8G("ngIf",i.showServiceModal),e.R7$(),e.Y8G("ngIf",i.showServiceModal))},dependencies:[c.YU,c.Sq,c.bT,m.aY,n.qT,n.me,n.Zm,n.BC,n.cb,n.cV,n.j4,n.JD],encapsulation:2})}}return s})();function dt(s,l){if(1&s&&(e.j41(0,"div",25)(1,"div",26)(2,"label",27),e.EFF(3),e.k0s()()()),2&s){const t=l.$implicit;e.R7$(3),e.SpI(" ",t.question,"")}}function _t(s,l){if(1&s&&(e.j41(0,"div",13)(1,"div",14),e.EFF(2),e.k0s(),e.j41(3,"div",15)(4,"p"),e.EFF(5),e.k0s()(),e.j41(6,"div",16),e.nrm(7,"input",17),e.j41(8,"label",18),e.EFF(9," Injured from an Accident? "),e.k0s()(),e.nrm(10,"div",19),e.j41(11,"div",20),e.DNE(12,dt,4,1,"div",21),e.j41(13,"div",22)(14,"div",23),e.nrm(15,"textarea",24),e.k0s()()()()),2&s){const t=e.XpG().$implicit;e.R7$(2),e.SpI(" ",t.desc," "),e.R7$(3),e.JRh(t.instruction),e.R7$(7),e.Y8G("ngForOf",t.questions)}}function ut(s,l){if(1&s&&(e.j41(0,"div",11),e.DNE(1,_t,16,3,"div",12),e.k0s()),2&s){const t=l.$implicit;e.R7$(),e.Y8G("ngIf","S03"===t.code)}}function ht(s,l){if(1&s&&e.nrm(0,"fa-icon",28),2&s){const t=e.XpG(2);e.Y8G("icon",t.faSave)}}function pt(s,l){if(1&s&&e.nrm(0,"fa-icon",29),2&s){const t=e.XpG(2);e.Y8G("icon",t.faSpinner)}}function mt(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",3)(1,"div",4),e.EFF(2," Comprehensive HEEADSSS Assessment "),e.k0s(),e.j41(3,"form",5),e.DNE(4,ut,2,1,"div",6),e.j41(5,"div",7)(6,"button",8),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return i.onSubmit(),e.Njj(i.safetyForm.markAsPristine())}),e.DNE(7,ht,1,1,"fa-icon",9)(8,pt,1,1,"fa-icon",10),e.EFF(9),e.k0s()()()()}if(2&s){const t=e.XpG();e.Y8G("ngClass",!0===(null==t.selected_asrh_consult?null:t.selected_asrh_consult.done_flag)&&!0===(null==t.selected_asrh_consult||null==t.selected_asrh_consult.comprehensive?null:t.selected_asrh_consult.comprehensive.done_flag)||!0===(null==t.selected_asrh_consult?null:t.selected_asrh_consult.refused_flag)||!0===(null==t.selected_asrh_consult||null==t.selected_asrh_consult.comprehensive?null:t.selected_asrh_consult.comprehensive.refused_flag)?"pointer-events-none select-none":""),e.R7$(3),e.Y8G("formGroup",t.safetyForm),e.R7$(),e.Y8G("ngForOf",t.compre_questions),e.R7$(2),e.Y8G("disabled",t.is_saving||t.safetyForm.invalid||!t.safetyForm.dirty),e.R7$(),e.Y8G("ngIf",!t.is_saving),e.R7$(),e.Y8G("ngIf",t.is_saving),e.R7$(),e.SpI(" ",null!=t.selected_asrh_consult&&null!=t.selected_asrh_consult.comprehensive&&t.selected_asrh_consult.comprehensive.safety_notes?t.is_saving?"Updating":"Update":t.is_saving?"Saving":"Save"," ")}}function ft(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",30)(1,"div",31)(2,"div",32)(3,"div",33)(4,"h3",34),e.EFF(5," Confirmation "),e.k0s()(),e.j41(6,"div",35)(7,"form",36)(8,"p"),e.EFF(9,"Are you sure the patient refused to conduct the Rapid HEEADSSS Assessment?"),e.k0s()()(),e.j41(10,"div",37)(11,"button",38),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleServiceModal())}),e.EFF(12,"No"),e.k0s(),e.j41(13,"button",39),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.acceptModal())}),e.nrm(14,"fa-icon"),e.EFF(15),e.k0s()()()()()}if(2&s){const t=e.XpG();e.R7$(15),e.SpI(" ",t.is_saving?"Saving":"Yes"," ")}}function gt(s,l){1&s&&e.nrm(0,"div",40)}let vt=(()=>{class s{onSubmit(){console.log(this.safetyForm.value,"display visit details"),this.is_saving=!0,this.http.post("asrh/comprehensive",this.safetyForm.value).subscribe({next:t=>{this.toastr.success("Safety was "+(null!==this.selected_asrh_consult.comprehensive.safety_notes?"updated":"saved")+" successfuly","Success"),this.is_saving=!1,this.updateSelectedASRH.emit(t),console.log(this.safetyForm,"checker education")},complete:()=>{},error:t=>{console.log(t)}})}validateForm(){this.safetyForm=this.formBuilder.group({id:[""],patient_id:[this.patient_id],consult_asrh_rapid_id:[this.selected_asrh_consult?.id,[n.k0.required,n.k0.minLength(1)]],assessment_date:[this.selected_asrh_consult?.comprehensive?.assessment_date,[n.k0.required,n.k0.minLength(1)]],safety_notes:["",[n.k0.required,n.k0.minLength(50)]],seriously_injured:["",[n.k0.required,n.k0.minLength(1)]],done_flag:[!1],consent_flag:["",[n.k0.required,n.k0.minLength(1)]],refused_flag:[!1]}),this.patchCompre()}patchCompre(){this.selected_asrh_consult&&this.safetyForm.patchValue({safety_notes:this.selected_asrh_consult?.comprehensive?.safety_notes,seriously_injured:this.selected_asrh_consult?.comprehensive?.seriously_injured,refused_flag:this.selected_asrh_consult?.comprehensive?.refused_flag,consent_flag:this.selected_asrh_consult?.comprehensive?.consent_flag})}LoadCompre(){this.http.get("asrh/comprehensive",{params:{patient_id:this.patient_id}}).subscribe({next:o=>{this.asrh_compre_history=o.data[0],console.log(this.asrh_compre_history,"hugot ng compre history"),this.patchCompre()},complete:()=>{},error:o=>{console.log(o)}})}openModal(){this.toggleServiceModal()}closeModal(){this.showModal=!1,this.safetyForm.get("refused_flag")?.setValue(!1)}toggleServiceModal(){this.showServiceModal=!this.showServiceModal,this.safetyForm.get("refused_flag")?.setValue(!1)}acceptModal(){this.showServiceModal=!this.showServiceModal,this.safetyForm.get("refused_flag")?.setValue(!0)}constructor(t,o,i,r){this.http=t,this.formBuilder=o,this.toastr=i,this.router=r,this.updateSelectedASRH=new e.bkB,this.faCalendarDay=a.isQ,this.faPlus=a.QLR,this.faSave=a.hSh,this.faTimes=a.GRI,this.faPencil=a.zLW,this.faCircleCheck=a.QRE,this.faCaretRight=a.fU5,this.faInfoCircle=a.iW_,this.faSpinner=a.z1G,this.is_saving=!1,this.show_form=!1,this.asrh_compre_history=[],this.safetyForm=new n.gE({id:new n.MJ(""),patient_id:new n.MJ(""),consult_asrh_rapid_id:new n.MJ(""),assessment_date:new n.MJ(""),safety_notes:new n.MJ(""),seriously_injured:new n.MJ(""),done_flag:new n.MJ(!1),consent_flag:new n.MJ("false"),refused_flag:new n.MJ("false")}),this.showModal=!1,this.showServiceModal=!1}ngOnInit(){this.validateForm()}static{this.\u0275fac=function(o){return new(o||s)(e.rXU(h.k),e.rXU(n.ok),e.rXU(p.tw),e.rXU(d.Ix))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-safety"]],inputs:{compre_questions:"compre_questions",patient_id:"patient_id",asrh_visit_history:"asrh_visit_history",selected_asrh_consult:"selected_asrh_consult"},outputs:{updateSelectedASRH:"updateSelectedASRH"},standalone:!1,decls:3,vars:3,consts:[["class","m-5 border border-slate-200 rounded-lg",3,"ngClass",4,"ngIf"],["id","defaultModal","tabindex","-1","class","overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 w-full md:inset-0 h-modal md:h-full justify-center items-center flex","aria-modal","true","role","dialog","style","z-index:60",4,"ngIf"],["class","opacity-50 fixed inset-0 z-50 bg-black",4,"ngIf"],[1,"m-5","border","border-slate-200","rounded-lg",3,"ngClass"],[1,"bg-blue-500","text-sm","text-white","rounded-t-md","py-2","pl-5","font-semibold"],[1,"mx-5","mb-6",3,"formGroup"],["class","mt-1 w-full",4,"ngFor","ngForOf"],[1,"flex","justify-center","mt-5"],[1,"btn-save","mt-4",3,"click","disabled"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin","class","mr-2",3,"icon",4,"ngIf"],[1,"mt-1","w-full"],["class","",4,"ngIf"],[1,""],[1,"text-md","text-blue-500","rounded-t-md","font-semibold","py-4"],[1,"text-sm","mb-4","flex","justify-between"],[1,"mb-5"],["type","checkbox","id","seriously_injured","formControlName","seriously_injured",1,"input-checkbox"],["for","seriously_injured",1,"ml-1","text-sm"],[1,"mt-1","w-full","border-t","border-gray-200","mb-5"],[1,"columns-2"],["class","h-full",4,"ngFor","ngForOf"],[1,"h-92"],[1,"py-3.5"],["rows","13","id","safety.id","placeholder","Remarks","formControlName","safety_notes",1,"text-sm","placeholder-slate-400","w-full","rounded-md","border-gray-300"],[1,"h-full"],[1,"py-1"],[1,"text-sm"],[1,"mr-2",3,"icon"],["animation","spin",1,"mr-2",3,"icon"],["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-2xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500"],[1,"text-sm","font-bold","text-white"],[1,"overflow-y-auto","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"text-left","m-5"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-gray-400",3,"click"],["type","submit",1,"btn-save","px-10","disabled:bg-gray-300",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"]],template:function(o,i){1&o&&e.DNE(0,mt,10,7,"div",0)(1,ft,16,1,"div",1)(2,gt,1,0,"div",2),2&o&&(e.Y8G("ngIf",!i.show_form),e.R7$(),e.Y8G("ngIf",i.showServiceModal),e.R7$(),e.Y8G("ngIf",i.showServiceModal))},dependencies:[c.YU,c.Sq,c.bT,m.aY,n.qT,n.me,n.Zm,n.BC,n.cb,n.cV,n.j4,n.JD],encapsulation:2})}}return s})();function bt(s,l){if(1&s&&(e.j41(0,"div",27)(1,"div",28)(2,"label",29),e.EFF(3),e.k0s()()()),2&s){const t=l.$implicit;e.R7$(3),e.SpI(" ",t.question,"")}}function yt(s,l){if(1&s&&(e.j41(0,"div",18)(1,"div",19),e.EFF(2),e.k0s(),e.j41(3,"div",20)(4,"p"),e.EFF(5),e.k0s()(),e.nrm(6,"div",21),e.j41(7,"div",22),e.DNE(8,bt,4,1,"div",23),e.j41(9,"div",24)(10,"div",25),e.nrm(11,"textarea",26),e.k0s()()()()),2&s){const t=e.XpG().$implicit;e.R7$(2),e.SpI(" ",t.desc," "),e.R7$(3),e.JRh(t.instruction),e.R7$(3),e.Y8G("ngForOf",t.questions)}}function St(s,l){if(1&s&&(e.j41(0,"div",16),e.DNE(1,yt,12,3,"div",17),e.k0s()),2&s){const t=l.$implicit;e.R7$(),e.Y8G("ngIf","S04"===t.code)}}function xt(s,l){1&s&&(e.j41(0,"div",30)(1,"label",31),e.EFF(2,"Done Date"),e.k0s(),e.nrm(3,"input",32),e.k0s())}function Ft(s,l){if(1&s&&e.nrm(0,"fa-icon",33),2&s){const t=e.XpG(2);e.Y8G("icon",t.faSave)}}function kt(s,l){if(1&s&&e.nrm(0,"fa-icon",34),2&s){const t=e.XpG(2);e.Y8G("icon",t.faSpinner)}}function wt(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",3)(1,"div",4),e.EFF(2," Comprehensive HEEADSSS Assessment "),e.k0s(),e.j41(3,"form",5),e.DNE(4,St,2,1,"div",6),e.j41(5,"div",7),e.nrm(6,"input",8),e.j41(7,"label",9),e.EFF(8," Done COMPREHENSIVE HEEADSSS "),e.k0s()(),e.j41(9,"div",10),e.DNE(10,xt,4,0,"div",11),e.k0s(),e.j41(11,"div",12)(12,"button",13),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return i.onSubmit(),e.Njj(i.spiritualityForm.markAsPristine())}),e.DNE(13,Ft,1,1,"fa-icon",14)(14,kt,1,1,"fa-icon",15),e.EFF(15),e.k0s()()()()}if(2&s){const t=e.XpG();e.Y8G("ngClass",!0===(null==t.selected_asrh_consult?null:t.selected_asrh_consult.done_flag)&&!0===(null==t.selected_asrh_consult||null==t.selected_asrh_consult.comprehensive?null:t.selected_asrh_consult.comprehensive.done_flag)||!0===(null==t.selected_asrh_consult?null:t.selected_asrh_consult.refused_flag)||!0===(null==t.selected_asrh_consult||null==t.selected_asrh_consult.comprehensive?null:t.selected_asrh_consult.comprehensive.refused_flag)?"pointer-events-none select-none":""),e.R7$(3),e.Y8G("formGroup",t.spiritualityForm),e.R7$(),e.Y8G("ngForOf",t.compre_questions),e.R7$(6),e.Y8G("ngIf",t.spiritualityForm.get("done_flag").value),e.R7$(2),e.Y8G("disabled",t.is_saving||t.spiritualityForm.invalid||!t.spiritualityForm.dirty),e.R7$(),e.Y8G("ngIf",!t.is_saving),e.R7$(),e.Y8G("ngIf",t.is_saving),e.R7$(),e.SpI(" ",null!=t.selected_asrh_consult&&null!=t.selected_asrh_consult.comprehensive&&t.selected_asrh_consult.comprehensive.spirituality_notes?t.is_saving?"Updating":"Update":t.is_saving?"Saving":"Save"," ")}}function Rt(s,l){if(1&s&&(e.j41(0,"div",29),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.R7$(),e.SpI(" ",t," ")}}function Ct(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",35)(1,"div",36)(2,"div",37)(3,"div",38)(4,"h3",39),e.EFF(5," The following fields are required for you to complete the comprehensive HEEADSSS assessment: "),e.k0s()(),e.j41(6,"div",40)(7,"div",41),e.DNE(8,Rt,2,1,"div",42),e.k0s()(),e.j41(9,"div",43)(10,"button",44),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleServiceModal())}),e.EFF(11,"Ok"),e.k0s()()()()()}if(2&s){const t=e.XpG();e.R7$(8),e.Y8G("ngForOf",t.errors)}}function jt(s,l){1&s&&e.nrm(0,"div",45)}let Gt=(()=>{class s{onSubmit(){console.log(this.spiritualityForm.value,"display visit details"),this.is_saving=!0,this.http.post("asrh/comprehensive",this.spiritualityForm.value).subscribe({next:t=>{this.toastr.success(`Spirituality was ${this.selected_asrh_consult?.comprehensive?.spirituality_notes?"updated":"saved"} successfully`,"Success"),this.is_saving=!1,this.updateSelectedASRH.emit(t)},error:t=>{console.error(t),this.is_saving=!1,this.errors=[],t.error&&t.error.errors?Object.entries(t.error.errors).forEach(([o,i])=>{Array.isArray(i)&&i.forEach(r=>{const g=`${o.charAt(0).toUpperCase()+o.slice(1).replace(/_/g," ")}`.split(" ")[0];this.errors.includes(g)||this.errors.push(g)})}):this.errors.push("An unknown error occurred."),this.errors.length>0&&(this.showServiceModal=!0),this.toastr.error("Please fill up the required notes","Error")}})}validateForm(){this.spiritualityForm=this.formBuilder.group({id:[""],patient_id:[this.patient_id],consult_asrh_rapid_id:[this.selected_asrh_consult?.id,[n.k0.required,n.k0.minLength(1)]],assessment_date:[this.selected_asrh_consult?.comprehensive?.assessment_date,[n.k0.required,n.k0.minLength(1)]],spirituality_notes:["",[n.k0.required,n.k0.minLength(50)]],home_notes:[""],eating_notes:[""],activities_notes:[""],drugs_notes:[""],education_notes:[""],safety_notes:[""],sexuality_notes:[""],suicide_notes:[""],done_flag:[this.selected_asrh_consult?.comprehensive?.done_flag],consent_flag:["",[n.k0.required,n.k0.minLength(1)]],refused_flag:[!1]}),this.spiritualityForm.addControl("done_date",!0===this.selected_asrh_consult?.comprehensive?.done_flag?new n.MJ(this.selected_asrh_consult?.comprehensive?.done_date,[n.k0.required,n.k0.minLength(1)]):new n.MJ(null));const t=this.spiritualityForm.get("done_date"),o=this.spiritualityForm.get("done_flag"),i=this.spiritualityForm.get("home_notes"),r=this.spiritualityForm.get("eating_notes"),u=this.spiritualityForm.get("education_notes"),g=this.spiritualityForm.get("activities_notes"),v=this.spiritualityForm.get("drugs_notes"),w=this.spiritualityForm.get("safety_notes"),R=this.spiritualityForm.get("sexuality_notes"),C=this.spiritualityForm.get("suicide_notes");t&&o&&o.valueChanges.subscribe(js=>{!0===js?(t.enable(),i.enable(),r.enable(),u.enable(),g.enable(),v.enable(),w.enable(),R.enable(),C.enable()):(t.disable(),i.disable(),r.disable(),u.disable(),g.disable(),v.disable(),w.disable(),R.disable(),C.disable())}),this.patchCompre()}patchCompre(){this.selected_asrh_consult&&this.spiritualityForm.patchValue({spirituality_notes:this.selected_asrh_consult?.comprehensive.spirituality_notes,home_notes:this.selected_asrh_consult?.comprehensive?.home_notes,eating_notes:this.selected_asrh_consult?.comprehensive?.eating_notes,education_notes:this.selected_asrh_consult?.comprehensive?.education_notes,activities_notes:this.selected_asrh_consult?.comprehensive?.activities_notes,drugs_notes:this.selected_asrh_consult?.comprehensive?.drugs_notes,safety_notes:this.selected_asrh_consult?.comprehensive?.safety_notes,sexuality_notes:this.selected_asrh_consult?.comprehensive?.sexuality_notes,suicide_notes:this.selected_asrh_consult?.comprehensive?.suicide_notes,done_date:this.selected_asrh_consult?.comprehensive?.done_date||this.max_date,done_flag:this.selected_asrh_consult?.comprehensive?.done_flag,refused_flag:this.selected_asrh_consult?.comprehensive?.refused_flag,consent_flag:this.selected_asrh_consult?.comprehensive?.consent_flag})}LoadCompre(){this.http.get("asrh/comprehensive",{params:{patient_id:this.patient_id}}).subscribe({next:o=>{this.asrh_compre_history=o.data[0],console.log(this.asrh_compre_history,"hugot ng compre history"),this.patchCompre()},complete:()=>{},error:o=>{console.log(o)}})}openModal(){this.toggleServiceModal()}closeModal(){this.showModal=!1,this.spiritualityForm.get("refused_flag")?.setValue(!1)}toggleServiceModal(){this.showServiceModal=!this.showServiceModal,this.spiritualityForm.get("refused_flag")?.setValue(!1)}acceptModal(){this.showServiceModal=!this.showServiceModal,this.spiritualityForm.get("refused_flag")?.setValue(!0)}constructor(t,o,i,r){this.http=t,this.formBuilder=o,this.toastr=i,this.router=r,this.updateSelectedASRH=new e.bkB,this.faCalendarDay=a.isQ,this.faPlus=a.QLR,this.faSave=a.hSh,this.faTimes=a.GRI,this.faPencil=a.zLW,this.faCircleCheck=a.QRE,this.faCaretRight=a.fU5,this.faInfoCircle=a.iW_,this.faSpinner=a.z1G,this.is_saving=!1,this.show_form=!1,this.asrh_compre_history=[],this.max_date=(0,c.Yq)(new Date,"yyyy-MM-dd","en","Asia/Manila"),this.spiritualityForm=new n.gE({id:new n.MJ(""),patient_id:new n.MJ(""),consult_asrh_rapid_id:new n.MJ(""),assessment_date:new n.MJ(""),spirituality_notes:new n.MJ(""),home_notes:new n.MJ(""),eating_notes:new n.MJ(""),education_notes:new n.MJ(""),activities_notes:new n.MJ(""),drugs_notes:new n.MJ(""),safety_notes:new n.MJ(""),sexuality_notes:new n.MJ(""),suicide_notes:new n.MJ(""),done_status:new n.MJ(!1),done_flag:new n.MJ(!1),done_date:new n.MJ(""),consent_flag:new n.MJ(!1),refused_flag:new n.MJ(!1)}),this.errors=[],this.showModal=!1,this.showServiceModal=!1}ngOnInit(){this.validateForm()}static{this.\u0275fac=function(o){return new(o||s)(e.rXU(h.k),e.rXU(n.ok),e.rXU(p.tw),e.rXU(d.Ix))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-spirituality"]],inputs:{compre_questions:"compre_questions",patient_id:"patient_id",asrh_visit_history:"asrh_visit_history",selected_asrh_consult:"selected_asrh_consult"},outputs:{updateSelectedASRH:"updateSelectedASRH"},standalone:!1,decls:3,vars:3,consts:[["class","m-5 border border-slate-200 rounded-lg",3,"ngClass",4,"ngIf"],["id","defaultModal","tabindex","-1","class","overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 w-full md:inset-0 h-modal md:h-full justify-center items-center flex","aria-modal","true","role","dialog","style","z-index:60",4,"ngIf"],["class","opacity-50 fixed inset-0 z-50 bg-black",4,"ngIf"],[1,"m-5","border","border-slate-200","rounded-lg",3,"ngClass"],[1,"bg-blue-500","text-sm","text-white","rounded-t-md","py-2","pl-5","font-semibold"],[1,"mx-5","mb-6",3,"formGroup"],["class","mt-1 w-full",4,"ngFor","ngForOf"],[1,"mb-4","mt-5","flex","justify-center"],["type","checkbox","id","done_flag","formControlName","done_flag",1,"input-checkbox"],["for","done_flag",1,"ml-1","text-sm"],[1,"flex","justify-center"],["class","col-span-3 justify-center",4,"ngIf"],[1,"flex","justify-center","mt-5"],[1,"btn-save","mt-4",3,"click","disabled"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin","class","mr-2",3,"icon",4,"ngIf"],[1,"mt-1","w-full"],["class","",4,"ngIf"],[1,""],[1,"text-md","text-blue-500","rounded-t-md","font-semibold","py-4"],[1,"text-sm","mb-5"],[1,"mt-1","w-full","border-t","border-gray-200","mb-5"],[1,"columns-2"],["class","h-full",4,"ngFor","ngForOf"],[1,"h-92"],[1,"py-3.5"],["rows","13","id","spirituality.id","placeholder","Remarks","formControlName","spirituality_notes",1,"text-sm","placeholder-slate-400","w-full","rounded-md","border-gray-300"],[1,"h-full"],[1,"py-1"],[1,"text-sm"],[1,"col-span-3","justify-center"],["for","done_date",1,"text-sm","font-semibold"],["type","date","name","done_date","id","done_date","formControlName","done_date",1,"input"],[1,"mr-2",3,"icon"],["animation","spin",1,"mr-2",3,"icon"],["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-2xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-orange-500"],[1,"text-sm","font-bold","text-white"],[1,"overflow-y-auto","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"p-4"],["class","text-sm",4,"ngFor","ngForOf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-gray-400",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"]],template:function(o,i){1&o&&e.DNE(0,wt,16,8,"div",0)(1,Ct,12,1,"div",1)(2,jt,1,0,"div",2),2&o&&(e.Y8G("ngIf",!i.show_form),e.R7$(),e.Y8G("ngIf",i.showServiceModal),e.R7$(),e.Y8G("ngIf",i.showServiceModal))},dependencies:[c.YU,c.Sq,c.bT,m.aY,n.qT,n.me,n.Zm,n.BC,n.cb,n.j4,n.JD],encapsulation:2})}}return s})();var At=_(1626);function Mt(s,l){if(1&s&&(e.j41(0,"option",20),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.Y8G("value",t.code),e.R7$(),e.JRh(t.desc)}}let Et=(()=>{class s{closeModal(){this.toggleModal.emit("referral")}validateForm(){this.referralForm=this.formBuilder.group({id:[""],patient_id:["",[n.k0.required,n.k0.minLength(1)]],asrh_id:["",[n.k0.required,n.k0.minLength(1)]],referral_date:[{value:"",disabled:!0},[n.k0.required,n.k0.minLength(1)]],referral_to:["",[n.k0.required,n.k0.minLength(1)]],remarks:["",[n.k0.required,n.k0.minLength(1)]]})}constructor(t,o){this.http=t,this.formBuilder=o,this.toggleModal=new e.bkB,this.faSave=a.hSh,this.faChevronCircleUp=a.AeV,this.faChevronCircleDown=a.DqM,this.faSpinner=a.z1G,this.faChevronUp=a.w2A,this.faChevronDown=a.Jt$,this.faCircleNotch=a.s4k,this.show_content=!0,this.is_saving=!1,this.toggle_content=!0,this.referralForm=new n.gE({patient_id:new n.MJ(""),asrh_id:new n.MJ(""),referral_date:new n.MJ(""),referral_to:new n.MJ(""),remarks:new n.MJ("")})}ngOnInit(){this.validateForm(),console.log(this.client_types)}static{this.\u0275fac=function(o){return new(o||s)(e.rXU(At.Qq),e.rXU(n.ok))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-referral-modal"]],inputs:{client_types:"client_types"},outputs:{toggleModal:"toggleModal"},standalone:!1,decls:29,vars:2,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500"],[1,"text-sm","font-bold","text-white"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"text-left","m-5"],[1,"grid","grid-cols-4","gap-4"],[1,"col-span-6","px-5","pt-5"],["for","referral_date",1,"text-sm","font-semibold"],["type","date","name","referral_date","id","referral_date","formControlName","referral_date",1,"input"],["for","referral_to",1,"text-sm","font-semibold"],["name","referral_to","id","referral_to","formControlName","referral_to",1,"input"],[3,"value",4,"ngFor","ngForOf"],["for","remarks",1,"text-sm","font-semibold"],["type","input","name","remarks","id","remarks","formControlName","remarks",1,"input"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-gray-400",3,"click"],["type","submit",1,"btn-save","px-10","disabled:bg-gray-300"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[3,"value"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e.EFF(5," Referral "),e.k0s()(),e.j41(6,"div",5)(7,"form",6)(8,"div",7)(9,"div",8)(10,"label",9),e.EFF(11,"Referral Date"),e.k0s(),e.nrm(12,"input",10),e.k0s(),e.j41(13,"div",8)(14,"label",11),e.EFF(15,"Refer To"),e.k0s(),e.j41(16,"select",12),e.DNE(17,Mt,2,2,"option",13),e.k0s()(),e.j41(18,"div",8)(19,"label",14),e.EFF(20,"Reason"),e.k0s(),e.nrm(21,"input",15),e.k0s()()()(),e.j41(22,"div",16)(23,"button",17),e.bIt("click",function(){return i.closeModal()}),e.EFF(24,"Close"),e.k0s(),e.j41(25,"button",18),e.nrm(26,"fa-icon"),e.EFF(27),e.k0s()()()()(),e.nrm(28,"div",19)),2&o&&(e.R7$(17),e.Y8G("ngForOf",i.client_types),e.R7$(10),e.SpI(" ",i.is_saving?"Saving":"Save"," "))},dependencies:[c.Sq,m.aY,n.qT,n.xH,n.y7,n.me,n.wz,n.BC,n.cb,n.cV,n.JD],encapsulation:2})}}return s})();function It(s,l){if(1&s&&(e.j41(0,"option",25),e.EFF(1),e.nI1(2,"titlecase"),e.k0s()),2&s){const t=l.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(e.bMT(2,2,t.desc))}}function Tt(s,l){if(1&s&&(e.j41(0,"div",4)(1,"div")(2,"label",22),e.EFF(3),e.k0s(),e.j41(4,"select",23),e.DNE(5,It,3,4,"option",24),e.k0s()()()),2&s){const t=e.XpG();e.R7$(3),e.JRh(t.consentForm.value.consent_flag?"Withdrawal Reason":" Refusal Reason"),e.R7$(2),e.Y8G("ngForOf",t.refusal_reasons)}}function $t(s,l){1&s&&(e.j41(0,"div",4)(1,"div")(2,"label",26),e.EFF(3,"Please Specify if Others"),e.k0s(),e.nrm(4,"input",27),e.k0s()())}function Yt(s,l){if(1&s&&(e.j41(0,"option",25),e.EFF(1),e.nI1(2,"titlecase"),e.k0s()),2&s){const t=l.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(e.bMT(2,2,t.desc))}}function Ht(s,l){if(1&s&&(e.j41(0,"div",28)(1,"label",29),e.EFF(2,"Guardian Type"),e.k0s(),e.j41(3,"select",30),e.DNE(4,Yt,3,4,"option",24),e.k0s()()),2&s){const t=e.XpG();e.R7$(4),e.Y8G("ngForOf",t.consent_type)}}function Dt(s,l){1&s&&(e.j41(0,"div",28)(1,"label",31),e.EFF(2,"Please Specify if Others"),e.k0s(),e.nrm(3,"input",32),e.k0s())}function Vt(s,l){if(1&s&&e.nrm(0,"fa-icon",33),2&s){const t=e.XpG();e.Y8G("icon",t.faSave)}}function Xt(s,l){if(1&s&&e.nrm(0,"fa-icon",34),2&s){const t=e.XpG();e.Y8G("icon",t.faCircleNotch)}}function Nt(s,l){if(1&s){const t=e.RV6();e.j41(0,"div",35)(1,"div",36)(2,"div",37)(3,"div",38)(4,"h3",39),e.EFF(5," Confirmation "),e.k0s()(),e.j41(6,"div",40)(7,"form",41)(8,"p"),e.EFF(9,"Are you sure the patient refused to conduct the Comprehensive HEEADSSS Assessment?"),e.k0s()()(),e.j41(10,"div",42)(11,"button",43),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleServiceModal())}),e.EFF(12,"No"),e.k0s(),e.j41(13,"button",44),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.acceptModal())}),e.EFF(14),e.k0s()()()()()}if(2&s){const t=e.XpG();e.R7$(14),e.SpI(" ",t.is_saving?"Saving":"Yes"," ")}}function qt(s,l){1&s&&e.nrm(0,"div",45)}let Bt=(()=>{class s{onSubmit(){console.log(this.consentForm.value,"display visit details"),this.is_saving=!0,this.http.post("asrh/comprehensive",this.consentForm.value).subscribe({next:t=>{this.toastr.success("Comprehensive Details was saved successfuly"),this.is_saving=!1,this.updateSelectedASRH.emit(t),console.log(this.consentForm,"checker home")},complete:()=>{console.log("success")},error:t=>{console.log(t)}})}validateForm(){this.consentForm=this.formBuilder.group({id:[""],patient_id:[this.patient_id],consult_asrh_rapid_id:[this.selected_asrh_consult?.id,[n.k0.required,n.k0.minLength(1)]],assessment_date:["",[n.k0.required,n.k0.minLength(1)]],lib_asrh_consent_type_id:["",[n.k0.required,n.k0.minLength(1)]],consent_type_other:[{value:"",disabled:!0},[n.k0.required,n.k0.minLength(1)]],consent_flag:[!1],refused_flag:[!1],done_flag:[!1],lib_asrh_refusal_reason_id:[{value:"",disabled:!0},[n.k0.required,n.k0.minLength(1)]],refusal_reason_other:[{value:"",disabled:!0},[n.k0.required,n.k0.minLength(1)]]}),this.consentForm.get("refused_flag")?.valueChanges.subscribe(t=>{t?(this.consentForm.get("lib_asrh_consent_type_id")?.clearValidators(),this.consentForm.get("consent_type_other")?.clearValidators(),this.consentForm.get("lib_asrh_consent_type_id")?.disable(),this.consentForm.get("consent_type_other")?.disable()):(this.consentForm.get("lib_asrh_consent_type_id")?.setValidators([n.k0.required,n.k0.minLength(1)]),this.consentForm.get("consent_type_other")?.setValidators([n.k0.required,n.k0.minLength(1)]),this.consentForm.get("lib_asrh_consent_type_id")?.enable(),this.consentForm.get("consent_type_other")?.enable()),this.consentForm.get("lib_asrh_consent_type_id")?.updateValueAndValidity(),this.consentForm.get("consent_type_other")?.updateValueAndValidity()}),this.consentForm.get("refused_flag")?.valueChanges.subscribe(t=>{t||this.consentForm.get("refused_flag")?.setValue(!1,{emitEvent:!1})}),this.consentForm.get("consent_flag")?.valueChanges.subscribe(t=>{t||this.consentForm.get("consent_flag")?.setValue(!1,{emitEvent:!1})}),this.disableForm(),this.disableForm4(),this.disableForm5(),this.patchCompre()}patchCompre(){this.selected_asrh_consult&&(this.consentForm.patchValue({assessment_date:this.selected_asrh_consult?.comprehensive?.assessment_date||this.max_date,consent_flag:this.selected_asrh_consult?.comprehensive?.consent_flag,refused_flag:this.selected_asrh_consult?.comprehensive?.refused_flag,lib_asrh_consent_type_id:this.selected_asrh_consult?.comprehensive?.lib_asrh_consent_type_id,consent_type_other:this.selected_asrh_consult?.comprehensive?.consent_type_other,lib_asrh_refusal_reason_id:this.selected_asrh_consult?.comprehensive?.lib_asrh_refusal_reason_id,refusal_reason_other:this.selected_asrh_consult?.comprehensive?.refusal_reason_other}),console.log(this.selected_asrh_consult,"load compre home working"))}toggleModal(t){this.modals[t]=!this.modals[t],console.log("toggle modal")}openModal(){this.toggleServiceModal()}closeModal(){this.showModal=!1,this.consentForm.get("refused_flag")?.setValue(!1)}toggleServiceModal(){this.showServiceModal=!this.showServiceModal,this.consentForm.get("refused_flag")?.setValue(!1)}acceptModal(){this.showServiceModal=!this.showServiceModal,this.consentForm.get("refused_flag")?.setValue(!0)}openChild(){this.opened.emit()}disableForm(){this.consentForm.get("lib_asrh_consent_type_id")?.valueChanges.subscribe(t=>{const o=this.consentForm.get("consent_type_other");99!=t||""===t?(o?.reset(),o?.disable()):o?.enable()})}loadConsentLib(){this.http.get("libraries/consent-type").subscribe({next:t=>{this.consent_type=t.data,console.log(this.consent_type,"consent_type")},error:t=>console.log(t)})}loadReasonLib(){this.http.get("libraries/refusal-reason").subscribe({next:t=>{this.refusal_reasons=t.data,console.log(this.consent_type,"consent_type")},error:t=>console.log(t)})}disableForm4(){this.consentForm.get("refused_flag")?.valueChanges.subscribe(t=>{const o=this.consentForm.get("lib_asrh_refusal_reason_id");!0!==t||""===t?(o?.reset(),o?.disable()):o?.enable()})}disableForm5(){this.consentForm.get("lib_asrh_refusal_reason_id")?.valueChanges.subscribe(t=>{const o=this.consentForm.get("refusal_reason_other");99!=t||""===t?(o?.reset(),o?.disable()):o?.enable()})}constructor(t,o,i,r,u){this.http=t,this.router=o,this.toastr=i,this.route=r,this.formBuilder=u,this.updateSelectedASRH=new e.bkB,this.opened=new e.bkB,this.faCalendar=a.okg,this.faTimes=a.GRI,this.faDoorClosed=a.K_I,this.faCircleNotch=a.s4k,this.faSave=a.hSh,this.showModal=!1,this.hideButton=!0,this.pages=1,this.module=1,this.module_compre=1,this.show_end=!1,this.fetching_history=!1,this.show_form=!1,this.compre_questions=[],this.client_types=[],this.patient_asrh_history=[],this.modals=[],this.consent_type=[],this.refusal_reasons=[],this.is_saving=!1,this.max_date=(0,c.Yq)(new Date,"yyyy-MM-dd","en","Asia/Manila"),this.date_today=(0,c.Yq)(new Date,"MM/dd/yyyy","en","Asia/Manila"),this.guardians=[{name:"Parent",id:"1"},{name:"Legal Guardian",id:"2"},{name:"Others",id:"3"}],this.consentForm=new n.gE({id:new n.MJ(""),patient_id:new n.MJ(""),consult_asrh_rapid_id:new n.MJ(""),assessment_date:new n.MJ(""),consent_flag:new n.MJ(!1),refused_flag:new n.MJ(!1),homeNotes:new n.MJ(""),lib_asrh_consent_type_id:new n.MJ(""),lib_asrh_refusal_reason_id:new n.MJ(""),refusal_reason_other:new n.MJ("")}),this.showServiceModal=!1}ngOnChanges(t){this.patchCompre(),this.disableForm4(),this.disableForm5()}ngOnInit(){this.patient_id=this.route.snapshot.paramMap.get("id"),this.consult_id=this.route.snapshot.paramMap.get("consult_id"),this.user_info=this.http.getUserFromJSON(),this.user_facility=this.http.getUserFacility(),this.loadConsentLib(),this.loadReasonLib(),this.validateForm(),console.log(this.consentForm,"user_info")}static{this.\u0275fac=function(o){return new(o||s)(e.rXU(h.k),e.rXU(d.Ix),e.rXU(p.tw),e.rXU(d.nX),e.rXU(n.ok))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-consent"]],inputs:{selected_asrh_consult:"selected_asrh_consult"},outputs:{updateSelectedASRH:"updateSelectedASRH",opened:"opened"},standalone:!1,features:[e.OA$],decls:30,vars:14,consts:[[1,"col-span-12","col-start-1","grid","gap-x-4","mb-5","m-5","border","border-slate-200","rounded-lg",3,"ngClass"],[1,"bg-blue-500","text-sm","text-white","rounded-t-md","py-2","pl-5","font-semibold"],[1,"grid","grid-cols-16","gap-x-4","w-full","mb-10",3,"formGroup"],[1,"grid","grid-cols-12"],[1,"col-span-6","px-5","pt-5"],["for","assessment_date",1,"text-sm","font-semibold"],["type","date","name","assessment_date","id","assessment_date","formControlName","assessment_date",1,"input",3,"max"],[1,"col-span-6","grid","gap-x-4","mt-12"],[1,"px-5"],["type","checkbox","id","refused_flag","formControlName","refused_flag",1,"input-checkbox",3,"change"],["for","refused_flag",1,"text-sm"],["class","col-span-6 px-5 pt-5",4,"ngIf"],[1,"col-span-6","grid","gap-x-4","mt-10"],["type","checkbox","id","consent_flag","formControlName","consent_flag",1,"input-checkbox"],["for","consent_flag",1,"text-sm"],["class","px-5 mt-10",4,"ngIf"],[1,"flex","justify-center","mb-10"],[1,"btn-save",3,"click","disabled"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin","class","mr-2",3,"icon",4,"ngIf"],["id","defaultModal","tabindex","-1","class","overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 w-full md:inset-0 h-modal md:h-full justify-center items-center flex","aria-modal","true","role","dialog","style","z-index:60",4,"ngIf"],["class","opacity-50 fixed inset-0 z-50 bg-black",4,"ngIf"],["for","lib_asrh_refusal_reason_id",1,"text-sm","font-semibold"],["name","lib_asrh_refusal_reason_id","id","lib_asrh_refusal_reason_id","formControlName","lib_asrh_refusal_reason_id",1,"input"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["for","refusal_reason_other",1,"text-sm","font-semibold"],["type","input","name","refusal_reason_other","id","refusal_reason_other","formControlName","refusal_reason_other",1,"input"],[1,"px-5","mt-10"],["for","lib_asrh_consent_type_id",1,"text-sm","font-semibold"],["name","lib_asrh_consent_type_id","id","lib_asrh_consent_type_id","formControlName","lib_asrh_consent_type_id",1,"input"],["for","consent_type_other",1,"text-sm","font-semibold"],["type","input","name","consent_type_other","id","consent_type_other","formControlName","consent_type_other",1,"input"],[1,"mr-2",3,"icon"],["animation","spin",1,"mr-2",3,"icon"],["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-2xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500"],[1,"text-sm","font-bold","text-white"],[1,"overflow-y-auto","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"text-left","m-5"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-gray-400",3,"click"],["type","submit",1,"btn-save","px-10","disabled:bg-gray-300",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2," Comprehensive HEEADSSS Assessment "),e.k0s(),e.j41(3,"form",2)(4,"div",3)(5,"div",4)(6,"label",5),e.EFF(7,"Assessment Date"),e.k0s(),e.nrm(8,"input",6),e.k0s(),e.j41(9,"div",7)(10,"div",8)(11,"input",9),e.bIt("change",function(){return i.openModal()}),e.k0s(),e.j41(12,"label",10),e.EFF(13),e.k0s()(),e.DNE(14,Tt,6,2,"div",11)(15,$t,5,0,"div",11),e.k0s(),e.j41(16,"div",12)(17,"div",8),e.nrm(18,"input",13),e.j41(19,"label",14),e.EFF(20," The patient/guardian has read, fully understood, and signed the patient consent form. "),e.k0s()(),e.DNE(21,Ht,5,1,"div",15)(22,Dt,4,0,"div",15),e.k0s()()(),e.j41(23,"div",16)(24,"button",17),e.bIt("click",function(){return i.onSubmit(),i.consentForm.markAsPristine()}),e.DNE(25,Vt,1,1,"fa-icon",18)(26,Xt,1,1,"fa-icon",19),e.EFF(27),e.k0s()()(),e.DNE(28,Nt,15,1,"div",20)(29,qt,1,0,"div",21)),2&o&&(e.Y8G("ngClass",!0===(null==i.selected_asrh_consult?null:i.selected_asrh_consult.done_flag)&&!0===(null==i.selected_asrh_consult||null==i.selected_asrh_consult.comprehensive?null:i.selected_asrh_consult.comprehensive.done_flag)||!0===(null==i.selected_asrh_consult?null:i.selected_asrh_consult.refused_flag)||!0===(null==i.selected_asrh_consult||null==i.selected_asrh_consult.comprehensive?null:i.selected_asrh_consult.comprehensive.refused_flag)?"pointer-events-none select-none":""),e.R7$(3),e.Y8G("formGroup",i.consentForm),e.R7$(5),e.Y8G("max",i.max_date),e.R7$(5),e.SpI(" ",i.consentForm.value.consent_flag?"The patient/guardian Withdrew Consent":" The patient/guardian Refused to Conduct the Assessment."," "),e.R7$(),e.Y8G("ngIf",!0===i.consentForm.value.refused_flag),e.R7$(),e.Y8G("ngIf",!0===i.consentForm.value.refused_flag),e.R7$(6),e.Y8G("ngIf",!0===i.consentForm.value.consent_flag),e.R7$(),e.Y8G("ngIf",!0===i.consentForm.value.consent_flag),e.R7$(2),e.Y8G("disabled",i.is_saving||!i.consentForm.dirty||i.consentForm.invalid),e.R7$(),e.Y8G("ngIf",!i.is_saving),e.R7$(),e.Y8G("ngIf",i.is_saving),e.R7$(),e.SpI(" ",null!=i.selected_asrh_consult&&null!=i.selected_asrh_consult.comprehensive&&i.selected_asrh_consult.comprehensive.assessment_date?i.is_saving?"Updating":"Update":i.is_saving?"Saving":"Save"," "),e.R7$(),e.Y8G("ngIf",i.showServiceModal),e.R7$(),e.Y8G("ngIf",i.showServiceModal))},dependencies:[c.YU,c.Sq,c.bT,m.aY,n.qT,n.xH,n.y7,n.me,n.Zm,n.wz,n.BC,n.cb,n.cV,n.j4,n.JD,c.PV],encapsulation:2})}}return s})();function Jt(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",15),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleModal("end_visit"))}),e.EFF(1," End Visit "),e.k0s()}}function Ut(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",21),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.switchTab(2))}),e.EFF(1," ASSESSMENT SUMMARY "),e.k0s()}if(2&s){const t=e.XpG(2);e.HbH(2===t.module?"tabs-main-true w-44":"tabs-main-false w-44")}}function Lt(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",21),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.switchTab(3))}),e.EFF(1," COMPREHENSIVE HEEADSSSS "),e.k0s()}if(2&s){const t=e.XpG(2);e.HbH(3===t.module?"tabs-main-true w-44":"tabs-main-false w-44")}}function Ot(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.toggleModal("referral"))}),e.EFF(1," Referral "),e.k0s()}}function zt(s,l){if(1&s){const t=e.RV6();e.j41(0,"nav",16)(1,"div",17)(2,"button",18),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.switchTab(1))}),e.EFF(3," RAPID HEEADSSSS "),e.k0s(),e.DNE(4,Ut,2,2,"button",19)(5,Lt,2,2,"button",19),e.k0s(),e.j41(6,"div",17),e.DNE(7,Ot,2,0,"button",20),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(2),e.HbH(1===t.module?"tabs-main-true w-40":"tabs-main-false w-40"),e.R7$(2),e.Y8G("ngIf",12===(null==t.selected_asrh_consult?null:t.selected_asrh_consult.answers.length)),e.R7$(),e.Y8G("ngIf",(null==t.selected_asrh_consult?null:t.selected_asrh_consult.refer_to_user_id)===t.user_info.id&&!0===t.user_info.aja_flag),e.R7$(2),e.Y8G("ngIf",t.selected_asrh_consult)}}function Pt(s,l){if(1&s){const t=e.RV6();e.j41(0,"app-consent",23),e.bIt("loadASRH",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.loadASRH())})("updateSelectedASRH",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.updateSelectedASRH(i))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("patient_id",t.patient_id)("compre_questions",t.compre_questions)("asrh_visit_history",t.asrh_visit_history)("selected_asrh_consult",t.selected_asrh_consult)}}function Qt(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",21),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.switchTabCompre(2))}),e.EFF(1," EDUCATION & EMPLOYMENT "),e.k0s()}if(2&s){const t=e.XpG(2);e.HbH(2===t.module_compre?"tabs-main-true w-44":"tabs-main-false w-44")}}function Wt(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",25),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.switchTabCompre(3))}),e.EFF(1," EATING "),e.k0s()}if(2&s){const t=e.XpG(2);e.HbH(3===t.module_compre?"tabs-main-true w-24":"tabs-main-false w-24")}}function Kt(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",25),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.switchTabCompre(4))}),e.EFF(1," ACTIVITIES "),e.k0s()}if(2&s){const t=e.XpG(2);e.HbH(4===t.module_compre?"tabs-main-true w-24":"tabs-main-false w-24")}}function Zt(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",25),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.switchTabCompre(5))}),e.EFF(1," DRUGS "),e.k0s()}if(2&s){const t=e.XpG(2);e.HbH(5===t.module_compre?"tabs-main-true w-24":"tabs-main-false w-24")}}function es(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",25),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.switchTabCompre(6))}),e.EFF(1," SEXUALITY "),e.k0s()}if(2&s){const t=e.XpG(2);e.HbH(6===t.module_compre?"tabs-main-true w-24":"tabs-main-false w-24")}}function ts(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",28),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.switchTabCompre(7))}),e.EFF(1," SUICIDE & DEPRESSION "),e.k0s()}if(2&s){const t=e.XpG(2);e.HbH(7===t.module_compre?"tabs-main-true w-36":"tabs-main-false w-36")}}function ss(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",25),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.switchTabCompre(8))}),e.EFF(1," SAFETY "),e.k0s()}if(2&s){const t=e.XpG(2);e.HbH(8===t.module_compre?"tabs-main-true w-24":"tabs-main-false w-24")}}function is(s,l){if(1&s){const t=e.RV6();e.j41(0,"button",25),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.switchTabCompre(9))}),e.EFF(1," SPIRITUALITY "),e.k0s()}if(2&s){const t=e.XpG(2);e.HbH(9===t.module_compre?"tabs-main-true w-24":"tabs-main-false w-24")}}function ns(s,l){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"nav",16)(2,"div",24)(3,"button",25),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.switchTabCompre(1))}),e.EFF(4," HOME "),e.k0s(),e.DNE(5,Qt,2,2,"button",19)(6,Wt,2,2,"button",26)(7,Kt,2,2,"button",26)(8,Zt,2,2,"button",26)(9,es,2,2,"button",26)(10,ts,2,2,"button",27)(11,ss,2,2,"button",26)(12,is,2,2,"button",26),e.k0s()()()}if(2&s){const t=e.XpG();e.R7$(3),e.HbH(1===t.module_compre?"tabs-main-true w-24":"tabs-main-false w-24"),e.R7$(2),e.Y8G("ngIf",null!==(null==t.selected_asrh_consult?null:t.selected_asrh_consult.comprehensive)),e.R7$(),e.Y8G("ngIf",null!==(null==t.selected_asrh_consult?null:t.selected_asrh_consult.comprehensive)),e.R7$(),e.Y8G("ngIf",null!==(null==t.selected_asrh_consult?null:t.selected_asrh_consult.comprehensive)),e.R7$(),e.Y8G("ngIf",null!==(null==t.selected_asrh_consult?null:t.selected_asrh_consult.comprehensive)),e.R7$(),e.Y8G("ngIf",null!==(null==t.selected_asrh_consult?null:t.selected_asrh_consult.comprehensive)),e.R7$(),e.Y8G("ngIf",null!==(null==t.selected_asrh_consult?null:t.selected_asrh_consult.comprehensive)),e.R7$(),e.Y8G("ngIf",null!==(null==t.selected_asrh_consult?null:t.selected_asrh_consult.comprehensive)),e.R7$(),e.Y8G("ngIf",null!==(null==t.selected_asrh_consult?null:t.selected_asrh_consult.comprehensive))}}function os(s,l){1&s&&(e.j41(0,"div",32),e.nrm(1,"div",33),e.j41(2,"div",34),e.EFF(3,"Fetching history..."),e.k0s()())}function ls(s,l){1&s&&(e.j41(0,"td",44)(1,"div",45),e.EFF(2," No records to show... "),e.k0s()())}function as(s,l){if(1&s){const t=e.RV6();e.j41(0,"tr",40),e.DNE(1,ls,3,0,"td",41),e.j41(2,"td",42),e.EFF(3),e.nI1(4,"date"),e.k0s(),e.j41(5,"td",42),e.EFF(6),e.k0s(),e.j41(7,"td",42),e.EFF(8),e.nI1(9,"date"),e.k0s(),e.j41(10,"td",42),e.EFF(11),e.k0s(),e.j41(12,"td",42)(13,"button",43),e.bIt("click",function(){const i=e.eBV(t).$implicit,r=e.XpG(3);return r.switchTab(1),e.Njj(r.openASRHConsult(i))}),e.EFF(14),e.k0s()()()}if(2&s){const t=l.$implicit,o=e.XpG(3);e.R7$(),e.Y8G("ngIf",!o.patient_asrh_history),e.R7$(2),e.SpI(" ",e.i5U(4,6,null==t?null:t.assessment_date,"MM/dd/yyyy")," "),e.R7$(3),e.SpI(" ",!0===(null==t?null:t.done_flag)?"Done":!0===(null==t?null:t.refused_flag)?"Refused":"Ongoing"," "),e.R7$(2),e.SpI(" ",null!=t&&null!=t.comprehensive&&t.comprehensive.assessment_date?e.i5U(9,9,null==t||null==t.comprehensive?null:t.comprehensive.assessment_date,"MM/dd/yyyy"):"-"," "),e.R7$(3),e.SpI(" ",!0===(null==t||null==t.comprehensive?null:t.comprehensive.done_flag)?"Done":!0===(null==t||null==t.comprehensive?null:t.comprehensive.refused_flag)&&!0===(null==t||null==t.comprehensive?null:t.comprehensive.consent_flag)?"Withdrew Consent":!0===(null==t||null==t.comprehensive?null:t.comprehensive.refused_flag)?"Refused":null===(null==t?null:t.comprehensive)?"-":"Ongoing"," "),e.R7$(3),e.SpI(" ",!0===(null==t?null:t.done_flag)&&!0===(null==t||null==t.comprehensive?null:t.comprehensive.done_flag)||!0===(null==t?null:t.refused_flag)||!0===(null==t||null==t.comprehensive?null:t.comprehensive.refused_flag)?"View":"Open"," ")}}function rs(s,l){if(1&s){const t=e.RV6();e.j41(0,"tr",40)(1,"td",44)(2,"div",46)(3,"div",47),e.EFF(4,"No records to show..."),e.k0s(),e.j41(5,"div",47)(6,"button",48),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.switchPage(2))}),e.EFF(7," create record "),e.k0s()()()()()}}function cs(s,l){if(1&s&&(e.j41(0,"table",35)(1,"thead",36)(2,"tr")(3,"th",37),e.EFF(4,"RAPID Assessment Date"),e.k0s(),e.j41(5,"th",37),e.EFF(6,"Status"),e.k0s(),e.j41(7,"th",37),e.EFF(8,"COMPREHENSIVE Assessment Date"),e.k0s(),e.j41(9,"th",37),e.EFF(10,"Status"),e.k0s(),e.j41(11,"th",37),e.EFF(12,"Action"),e.k0s()()(),e.j41(13,"tbody"),e.DNE(14,as,15,12,"tr",38)(15,rs,8,0,"tr",39),e.k0s()()),2&s){const t=e.XpG(2);e.R7$(14),e.Y8G("ngForOf",t.patient_asrh_history),e.R7$(),e.Y8G("ngIf",0===(null==t.patient_asrh_history?null:t.patient_asrh_history.length))}}function ds(s,l){if(1&s&&(e.j41(0,"div",29),e.DNE(1,os,4,0,"div",30)(2,cs,16,2,"table",31),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.fetching_history),e.R7$(),e.Y8G("ngIf",t.fetching_history)}}function _s(s,l){if(1&s){const t=e.RV6();e.j41(0,"app-rapid-heeadsss",49),e.bIt("updateSelectedASRH",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.updateSelectedASRH(i))})("updateSelectedASRH2",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.updateSelectedASRH2(i))})("loadASRH",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.loadASRH())})("loadASRH2",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.loadASRH2())}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("patient_id",t.patient_id)("client_types",t.client_types)("asrh_visit_history",t.asrh_visit_history)("patient_asrh_history",t.patient_asrh_history)("selected_asrh_consult",t.selected_asrh_consult)}}function us(s,l){if(1&s){const t=e.RV6();e.j41(0,"app-assessment-summary",50),e.bIt("loadASRH",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.loadASRH())})("updateSelectedASRH",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.updateSelectedASRH(i))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("patient_id",t.patient_id)("asrh_visit_history",t.asrh_visit_history)("selected_asrh_consult",t.selected_asrh_consult)}}function hs(s,l){if(1&s){const t=e.RV6();e.j41(0,"app-home",23),e.bIt("loadASRH",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.loadASRH())})("updateSelectedASRH",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.updateSelectedASRH(i))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("patient_id",t.patient_id)("compre_questions",t.compre_questions)("asrh_visit_history",t.asrh_visit_history)("selected_asrh_consult",t.selected_asrh_consult)}}function ps(s,l){if(1&s){const t=e.RV6();e.j41(0,"app-education",23),e.bIt("loadASRH",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.loadASRH())})("updateSelectedASRH",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.updateSelectedASRH(i))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("patient_id",t.patient_id)("compre_questions",t.compre_questions)("asrh_visit_history",t.asrh_visit_history)("selected_asrh_consult",t.selected_asrh_consult)}}function ms(s,l){if(1&s){const t=e.RV6();e.j41(0,"app-eating",23),e.bIt("loadASRH",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.loadASRH())})("updateSelectedASRH",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.updateSelectedASRH(i))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("patient_id",t.patient_id)("compre_questions",t.compre_questions)("asrh_visit_history",t.asrh_visit_history)("selected_asrh_consult",t.selected_asrh_consult)}}function fs(s,l){if(1&s){const t=e.RV6();e.j41(0,"app-activities",23),e.bIt("loadASRH",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.loadASRH())})("updateSelectedASRH",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.updateSelectedASRH(i))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("patient_id",t.patient_id)("compre_questions",t.compre_questions)("asrh_visit_history",t.asrh_visit_history)("selected_asrh_consult",t.selected_asrh_consult)}}function gs(s,l){if(1&s){const t=e.RV6();e.j41(0,"app-drugs",23),e.bIt("loadASRH",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.loadASRH())})("updateSelectedASRH",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.updateSelectedASRH(i))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("patient_id",t.patient_id)("compre_questions",t.compre_questions)("asrh_visit_history",t.asrh_visit_history)("selected_asrh_consult",t.selected_asrh_consult)}}function vs(s,l){if(1&s){const t=e.RV6();e.j41(0,"app-sexuality",23),e.bIt("loadASRH",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.loadASRH())})("updateSelectedASRH",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.updateSelectedASRH(i))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("patient_id",t.patient_id)("compre_questions",t.compre_questions)("asrh_visit_history",t.asrh_visit_history)("selected_asrh_consult",t.selected_asrh_consult)}}function bs(s,l){if(1&s){const t=e.RV6();e.j41(0,"app-suicide-depression",51),e.bIt("loadASRH",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.loadASRH())})("updateSelectedASRH",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.updateSelectedASRH(i))})("updateSelectedASRH2",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.updateSelectedASRH2(i))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("patient_id",t.patient_id)("compre_questions",t.compre_questions)("asrh_visit_history",t.asrh_visit_history)("selected_asrh_consult",t.selected_asrh_consult)}}function ys(s,l){if(1&s){const t=e.RV6();e.j41(0,"app-safety",23),e.bIt("loadASRH",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.loadASRH())})("updateSelectedASRH",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.updateSelectedASRH(i))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("patient_id",t.patient_id)("compre_questions",t.compre_questions)("asrh_visit_history",t.asrh_visit_history)("selected_asrh_consult",t.selected_asrh_consult)}}function Ss(s,l){if(1&s){const t=e.RV6();e.j41(0,"app-spirituality",23),e.bIt("loadASRH",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.loadASRH())})("updateSelectedASRH",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.updateSelectedASRH(i))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("patient_id",t.patient_id)("compre_questions",t.compre_questions)("asrh_visit_history",t.asrh_visit_history)("selected_asrh_consult",t.selected_asrh_consult)}}function xs(s,l){if(1&s){const t=e.RV6();e.j41(0,"app-end-visit",52),e.bIt("toggleModal",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.toggleModal(i))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("consult_id",t.consult_id)("consult_date",null==t.consult_details?null:t.consult_details.consult_date)("patient_id",null==t.consult_details?null:t.consult_details.patient.id)("pt_group",null==t.consult_details?null:t.consult_details.pt_group)}}function Fs(s,l){if(1&s){const t=e.RV6();e.j41(0,"app-referral-modal",53),e.bIt("toggleModal",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.toggleModal(i))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("client_types",t.client_types)}}function ks(s,l){if(1&s){const t=e.RV6();e.j41(0,"app-confirm-modal",54),e.bIt("toggleModal",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.toggleModal(i))}),e.k0s()}}const ws=[{path:"",component:(()=>{class s{switchPage(t){1===t&&this.loadASRH(),this.pages=t}switchTab(t){this.module=t,3===t&&this.switchTabCompre(1)}switchTabCompre(t){this.module_compre=t}updateSelectedASRH(){console.log("selected id"),this.http.get("asrh/rapid/"+this.selected_asrh_consult.id).subscribe({next:t=>{this.selected_asrh_consult=t.data,this.fetching_history=!0,console.log(this.selected_asrh_consult,"selected_asrh_consult main")},error:t=>console.log(t)})}updateSelectedASRH2(t){console.log("selected id"),this.http.get("asrh/rapid/"+t).subscribe({next:o=>{this.selected_asrh_consult=o.data,this.fetching_history=!0,console.log(this.selected_asrh_consult,"selected_asrh_consult main")},error:o=>console.log(o)})}openASRHConsult(t){this.selected_asrh_consult=t,console.log(this.selected_asrh_consult,"selected_asrh_consult"),this.pages=2,console.log()}toggleModal(t){this.modals[t]=!this.modals[t],console.log("toggle modal")}loadLibraries(){const t=this.http.get("libraries/comprehensive"),o=this.http.get("libraries/asrh-client-type");(0,F.p)([t,o]).subscribe({next:([i,r])=>{this.compre_questions=i.data,this.client_types=r.data,console.log(this.compre_questions,this.client_types,"libraries")},error:i=>console.log(i)})}loadASRH(){this.selected_asrh_consult=null,this.fetching_history=!0,this.http.get("asrh/rapid",{params:{patient_id:this.patient_id}}).subscribe({next:o=>{this.patient_asrh_history=o.data,this.patient_asrh_history.sort((r,u)=>{const g=new Date(r.assessment_date),v=new Date(u.assessment_date);return v>g?1:v<g?-1:0});const i=this.patient_asrh_history.find(r=>!(r?.done_flag&&r?.comprehensive?.done_flag||r?.refused_flag||r?.comprehensive?.refused_flag));this.selected_asrh_consult=i||null,this.fetching_history=!0,console.log(this.selected_asrh_consult,"selected_asrh_consult")},error:o=>console.log(o)})}loadASRH2(){this.fetching_history=!0,this.http.get("asrh/rapid",{params:{patient_id:this.patient_id}}).subscribe({next:o=>{this.patient_asrh_history=o.data[0],this.fetching_history=!0,console.log(this.patient_asrh_history,"selected_asrh_consult sa main")},error:o=>console.log(o)})}loadConsultDetails(){this.http.get("consultation/records",{params:{patient_id:this.patient_id,id:this.consult_id}}).subscribe({next:t=>{this.consult_details=t.data[0],console.log(this.consult_details,"consult details"),this.loadASRH(),this.loadLibraries(),this.show_form=!0,this.fetching_history=!0},error:t=>console.log(t)})}constructor(t,o,i,r,u){this.http=t,this.router=o,this.toastr=i,this.route=r,this.formBuilder=u,this.faCalendar=a.okg,this.faTimes=a.GRI,this.faDoorClosed=a.K_I,this.faCircleNotch=a.s4k,this.showModal=!1,this.hideButton=!0,this.pages=1,this.module=1,this.module_compre=null,this.show_end=!1,this.fetching_history=!1,this.show_form=!1,this.compre_questions=[],this.client_types=[],this.patient_asrh_history=[],this.modals=[],this.is_saving=!1}ngOnInit(){this.patient_id=this.route.snapshot.paramMap.get("id"),this.consult_id=this.route.snapshot.paramMap.get("consult_id"),this.user_info=this.http.getUserFromJSON(),this.user_facility=this.http.getUserFacility(),this.loadConsultDetails(),console.log(this.user_info,"user_info")}ngOnChanges(t){console.log("ngOnChanges triggered in Parent!")}onChildOpened(){console.log("Child component was opened!")}static{this.\u0275fac=function(o){return new(o||s)(e.rXU(h.k),e.rXU(d.Ix),e.rXU(p.tw),e.rXU(d.nX),e.rXU(n.ok))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-adolescent"]],standalone:!1,features:[e.OA$],decls:26,vars:24,consts:[[1,"flex"],[1,"mt-4","flex","flex-row","border-b","border-slate-300","text-xs"],[1,"tabs-main","w-36",3,"click"],[1,"ml-auto"],["type","button","class","btn-end-visit ml-auto mt-5",3,"click",4,"ngIf"],["class","mt-2 flex justify-between border-b border-slate-300 text-xs",4,"ngIf"],[3,"patient_id","compre_questions","asrh_visit_history","selected_asrh_consult","loadASRH","updateSelectedASRH",4,"ngIf"],[4,"ngIf"],["class","my-5 w-full border border-gray-200 shadow-md rounded-xl",4,"ngIf"],[3,"patient_id","client_types","asrh_visit_history","patient_asrh_history","selected_asrh_consult","updateSelectedASRH","updateSelectedASRH2","loadASRH","loadASRH2",4,"ngIf"],[3,"patient_id","asrh_visit_history","selected_asrh_consult","loadASRH","updateSelectedASRH",4,"ngIf"],[3,"patient_id","compre_questions","asrh_visit_history","selected_asrh_consult","loadASRH","updateSelectedASRH","updateSelectedASRH2",4,"ngIf"],[3,"consult_id","consult_date","patient_id","pt_group","toggleModal",4,"ngIf"],[3,"client_types","toggleModal",4,"ngIf"],[3,"toggleModal",4,"ngIf"],["type","button",1,"btn-end-visit","ml-auto","mt-5",3,"click"],[1,"mt-2","flex","justify-between","border-b","border-slate-300","text-xs"],[1,"flex","flex-row"],[1,"tabs-main","w-40",3,"click"],["class","tabs-main w-44",3,"class","click",4,"ngIf"],["type","button","class","bg-blue-500 px-3 py-2  rounded text-white hover:opacity-75",3,"click",4,"ngIf"],[1,"tabs-main","w-44",3,"click"],["type","button",1,"bg-blue-500","px-3","py-2","rounded","text-white","hover:opacity-75",3,"click"],[3,"loadASRH","updateSelectedASRH","patient_id","compre_questions","asrh_visit_history","selected_asrh_consult"],[1,"flex","flex-row","ml-1"],[1,"tabs-main","w-24",3,"click"],["class","tabs-main w-24",3,"class","click",4,"ngIf"],["class","tabs-main w-32",3,"class","click",4,"ngIf"],[1,"tabs-main","w-32",3,"click"],[1,"my-5","w-full","border","border-gray-200","shadow-md","rounded-xl"],["class","flex flex-col justify-end",4,"ngIf"],["class","w-full text-sm text-left",4,"ngIf"],[1,"flex","flex-col","justify-end"],[1,"w-full","flex","justify-center"],[1,"w-full","flex","justify-center","pb-10","font-semibold"],[1,"w-full","text-sm","text-left"],[1,"text-xs","text-white","uppercase","bg-blue-500"],["scope","col",1,"py-3","px-6"],["class","bg-white border-b",4,"ngFor","ngForOf"],["class","bg-white border-b",4,"ngIf"],[1,"bg-white","border-b"],["colspan","7",4,"ngIf"],[1,"py-4","px-6"],["type","button",1,"rounded-md","bg-blue-500","text-white","py-1","px-2",3,"click"],["colspan","7"],[1,"text-center"],[1,"text-center","py-3","flex","flex-col"],[1,"flex","justify-center"],["type","button",1,"mt-3","bg-blue-500","px-3","py-1","rounded-md","text-white","hover:opacity-75",3,"click"],[3,"updateSelectedASRH","updateSelectedASRH2","loadASRH","loadASRH2","patient_id","client_types","asrh_visit_history","patient_asrh_history","selected_asrh_consult"],[3,"loadASRH","updateSelectedASRH","patient_id","asrh_visit_history","selected_asrh_consult"],[3,"loadASRH","updateSelectedASRH","updateSelectedASRH2","patient_id","compre_questions","asrh_visit_history","selected_asrh_consult"],[3,"toggleModal","consult_id","consult_date","patient_id","pt_group"],[3,"toggleModal","client_types"],[3,"toggleModal"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"nav",1)(2,"button",2),e.bIt("click",function(){return i.switchPage(1)}),e.EFF(3," VISIT HISTORY "),e.k0s(),e.j41(4,"button",2),e.bIt("click",function(){return i.switchPage(2),i.switchTab(1)}),e.EFF(5),e.k0s()(),e.j41(6,"div",3),e.DNE(7,Jt,2,0,"button",4),e.k0s()(),e.DNE(8,zt,8,5,"nav",5)(9,Pt,1,4,"app-consent",6)(10,ns,13,10,"div",7)(11,ds,3,2,"div",8)(12,_s,1,5,"app-rapid-heeadsss",9)(13,us,1,3,"app-assessment-summary",10)(14,hs,1,4,"app-home",6)(15,ps,1,4,"app-education",6)(16,ms,1,4,"app-eating",6)(17,fs,1,4,"app-activities",6)(18,gs,1,4,"app-drugs",6)(19,vs,1,4,"app-sexuality",6)(20,bs,1,4,"app-suicide-depression",11)(21,ys,1,4,"app-safety",6)(22,Ss,1,4,"app-spirituality",6)(23,xs,1,4,"app-end-visit",12)(24,Fs,1,1,"app-referral-modal",13)(25,ks,1,0,"app-confirm-modal",14)),2&o&&(e.R7$(2),e.HbH(1===i.pages?"tabs-main-true rounded-t-md":"tabs-main-false"),e.R7$(2),e.HbH(2===i.pages?"tabs-main-true rounded-t-md":"tabs-main-false"),e.R7$(),e.SpI(" ",i.selected_asrh_consult?"DETAILS":"ADOLESCENT HEALTH"," "),e.R7$(2),e.Y8G("ngIf",!(null!=i.consult_details&&i.consult_details.consult_done)&&(null==i.consult_details?null:i.consult_details.facility.code)===i.user_facility),e.R7$(),e.Y8G("ngIf",2===i.pages),e.R7$(),e.Y8G("ngIf",2===i.pages&&3===i.module),e.R7$(),e.Y8G("ngIf",2===i.pages&&3===i.module&&!0===(null==i.selected_asrh_consult||null==i.selected_asrh_consult.comprehensive?null:i.selected_asrh_consult.comprehensive.consent_flag)),e.R7$(),e.Y8G("ngIf",1===i.pages),e.R7$(),e.Y8G("ngIf",2===i.pages&&1===i.module),e.R7$(),e.Y8G("ngIf",2===i.pages&&2===i.module),e.R7$(),e.Y8G("ngIf",2===i.pages&&3===i.module&&1===i.module_compre&&!0===(null==i.selected_asrh_consult||null==i.selected_asrh_consult.comprehensive?null:i.selected_asrh_consult.comprehensive.consent_flag)),e.R7$(),e.Y8G("ngIf",2===i.pages&&3===i.module&&2===i.module_compre),e.R7$(),e.Y8G("ngIf",2===i.pages&&3===i.module&&3===i.module_compre),e.R7$(),e.Y8G("ngIf",2===i.pages&&3===i.module&&4===i.module_compre),e.R7$(),e.Y8G("ngIf",2===i.pages&&3===i.module&&5===i.module_compre),e.R7$(),e.Y8G("ngIf",2===i.pages&&3===i.module&&6===i.module_compre),e.R7$(),e.Y8G("ngIf",2===i.pages&&3===i.module&&7===i.module_compre),e.R7$(),e.Y8G("ngIf",2===i.pages&&3===i.module&&8===i.module_compre),e.R7$(),e.Y8G("ngIf",2===i.pages&&3===i.module&&9===i.module_compre),e.R7$(),e.Y8G("ngIf",i.modals.end_visit),e.R7$(),e.Y8G("ngIf",i.modals.referral),e.R7$(),e.Y8G("ngIf",i.modals["confirm-modal"]))},dependencies:[c.Sq,c.bT,S.u,X,ee,ce,ve,Ce,Ye,Ue,et,ct,vt,Gt,Et,Bt,c.vh],encapsulation:2})}}return s})()}];let Rs=(()=>{class s{static{this.\u0275fac=function(o){return new(o||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[d.iI.forChild(ws),d.iI]})}}return s})(),Cs=(()=>{class s{static{this.\u0275fac=function(o){return new(o||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[c.MD,Rs,m.dX,n.YN,n.X1,S.u]})}}return s})()},9217:(j,x,_)=>{_.d(x,{u:()=>n});var c=_(177),d=_(4438),a=_(9417),F=_(60),e=_(3318),h=_(3895),p=_(5794);let n=(()=>{class S{onSubmit(){let b;this.is_saving=!0,b=this.consult_date&&this.pt_group?{patient_id:this.patient_id,consult_date:this.consult_date,pt_group:this.pt_group,consult_done:!0}:{},this.http.update("consultation/records/",this.consult_id,b).subscribe({next:f=>{this.is_saving=!1,this.toastr.info("Visit was ended"),this.router.navigate(["/patient/itr",{id:this.patient_id}])},error:f=>console.log(f)})}constructor(b,f,y){this.http=b,this.router=f,this.toastr=y,this.toggleModal=new d.bkB,this.is_saving=!1}closeModal(){this.toggleModal.emit("end_visit")}static{this.\u0275fac=function(f){return new(f||S)(d.rXU(e.k),d.rXU(h.Ix),d.rXU(p.tw))}}static{this.\u0275cmp=d.VBU({type:S,selectors:[["app-end-visit"]],inputs:{consult_id:"consult_id",consult_date:"consult_date",patient_id:"patient_id",pt_group:"pt_group"},outputs:{toggleModal:"toggleModal"},decls:20,vars:5,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"h-40"],[1,"flex","item-start","flex-wrap","pb-5"],[1,"grid","grid-cols-3","px-3","py-3","mt-10","mx-10","w-full","rounded-lg","text-center"],[1,"col-span-3","text-left","mb-2","pb-2","border-b","border-slate-200","font-semibold","text-lg"],[1,"col-span-3","text-left","mb-2","pb-2","text-sm"],[1,"flex","justify-end","py-2","px-5","space-x-4","rounded-b"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-300","rounded","text-sm","font-medium","my-2","px-6","py-2.5","transition","duration-150","ease-in-out",3,"click"],["type","button",1,"text-white","bg-rose-500","enabled:hover:ring-2","enabled:focus:outline-none","enabled:hover:ring-rose-300","disabled:opacity-75","font-medium","rounded","text-sm","my-2","px-6","py-2.5","text-center","transition","duration-150","ease-in-out",3,"click","disabled"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"]],template:function(f,y){1&f&&(d.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),d.EFF(5," End Visit "),d.k0s()(),d.j41(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),d.EFF(10," Do you really want to end this visit? "),d.k0s(),d.j41(11,"div",9),d.EFF(12),d.nI1(13,"date"),d.k0s()()()(),d.j41(14,"div",10)(15,"button",11),d.bIt("click",function(){return y.closeModal()}),d.EFF(16,"Cancel"),d.k0s(),d.j41(17,"button",12),d.bIt("click",function(){return y.onSubmit()}),d.EFF(18,"End Visit"),d.k0s()()()()(),d.nrm(19,"div",13)),2&f&&(d.R7$(12),d.SpI(" Visit date & time: ",d.i5U(13,2,y.consult_date,"MM/dd/yyyy hh:mm:ss a")," "),d.R7$(5),d.Y8G("disabled",y.is_saving))},dependencies:[F.dX,a.YN,c.MD,c.vh],encapsulation:2,changeDetection:0})}}return S})()}}]);