"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[375],{3316:(U,A,p)=>{p.d(A,{h:()=>Fe});var r=p(590),e=p(5879),y=p(265),f=p(2425),m=p(6814),d=p(5597),c=p(607),l=p(6223);function h(i,n){if(1&i&&(e.TgZ(0,"option",22),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.AsE("",t.code," - ",t.caserate_code,"")}}function v(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",15)(1,"div",16)(2,"label",17),e._uU(3,"Caserate"),e.qZA(),e.TgZ(4,"select",18),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.caserate_field=a)}),e.YNc(5,h,2,3,"option",19),e.qZA()(),e.TgZ(6,"div",20)(7,"button",21),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.selectCaserate())}),e._uU(8," Select "),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.caserate_field),e.xp6(1),e.Q6J("ngForOf",t.caserate_list)}}function x(i,n){if(1&i&&(e.TgZ(0,"div",25),e._UZ(1,"img",26),e.TgZ(2,"div",27)(3,"span",28),e._uU(4),e.qZA(),e.TgZ(5,"span",29),e._uU(6),e.qZA(),e.TgZ(7,"span",30),e._uU(8),e.qZA(),e.TgZ(9,"span",31),e._uU(10),e.qZA(),e.TgZ(11,"span",32),e._uU(12),e.qZA(),e.TgZ(13,"span",33),e._uU(14),e.qZA(),e.TgZ(15,"span",34),e._uU(16),e.qZA(),e.TgZ(17,"span",35),e._uU(18),e.ALo(19,"date"),e.qZA(),e.TgZ(20,"span",36),e._uU(21),e.qZA(),e.TgZ(22,"span",37),e._uU(23),e.qZA(),e.TgZ(24,"span",38),e._uU(25),e.qZA(),e.TgZ(26,"span",39),e._uU(27),e.qZA(),e.TgZ(28,"span",40),e._uU(29),e.ALo(30,"date"),e.qZA(),e.TgZ(31,"span",41),e._uU(32),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(4),e.Oqu(null==t.pbef_result?null:t.pbef_result.ASOF),e.xp6(2),e.Oqu(null==t.pbef_result?null:t.pbef_result.TRACKING_NUMBER),e.xp6(2),e.Oqu(null==t.program_creds?null:t.program_creds.facility_name),e.xp6(2),e.Oqu(null==t.program_creds?null:t.program_creds.accreditation_number),e.xp6(2),e.Oqu(null==t.pbef_result?null:t.pbef_result.MEMBER.PIN),e.xp6(2),e.HOy("",null==t.pbef_result?null:t.pbef_result.MEMBER.LASTNAME,", ",null==t.pbef_result?null:t.pbef_result.MEMBER.FIRSTNAME," ",null==t.pbef_result?null:t.pbef_result.MEMBER.MIDDLENAME," ",null==t.pbef_result?null:t.pbef_result.MEMBER.SUFFIX,""),e.xp6(2),e.Oqu("DD"===t.patient_philhealth.membership_type_id?t.patient_philhealth.member_gender:t.patient.gender),e.xp6(2),e.Oqu(e.Dn7(19,20,null==t.pbef_result?null:t.pbef_result.MEMBER.BIRTHDATE,"MM/dd/yyyy","Asia/Manila")),e.xp6(3),e.Oqu(null==t.pbef_result?null:t.pbef_result.MEMBER.MEMBER_CATEGORY_DESC),e.xp6(2),e.HOy("",null==t.pbef_result?null:t.pbef_result.PATIENT.LASTNAME,", ",null==t.pbef_result?null:t.pbef_result.PATIENT.FIRSTNAME," ",null==t.pbef_result?null:t.pbef_result.PATIENT.MIDDLENAME," ",null==t.pbef_result?null:t.pbef_result.PATIENT.SUFFIX,""),e.xp6(2),e.Oqu(null==t.pbef_result?null:t.pbef_result.CONFINMENT.ADMITTED),e.xp6(2),e.Oqu(t.patient.gender),e.xp6(2),e.Oqu(e.Dn7(30,24,null==t.pbef_result?null:t.pbef_result.PATIENT.BIRTHDATE,"MM/dd/yyyy","Asia/Manila")),e.xp6(3),e.Oqu(null==t.pbef_result?null:t.pbef_result.ISOK)}}function g(i,n){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,x,33,28,"div",24),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.show_form)}}function _(i,n){if(1&i&&(e.TgZ(0,"div",42)(1,"div",43),e._UZ(2,"fa-icon",44),e.qZA(),e.TgZ(3,"div",45),e._uU(4," Checking PhilHealth Claims Eligibility... "),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("icon",t.faCircleNotch)}}let C=(()=>{var i;class n{exportP(){let s="PBEF_"+this.patient.last_name.toUpperCase()+"_"+this.patient.first_name.toUpperCase()+"_"+(0,m.p6)(new Date,"yyyyMMdd","en","Asia/Manila");this.pdf_exported=!0,this.exportAsService.save(this.exportAsPdf,s).subscribe(()=>{this.pdf_exported=!1})}selectCaserate(){this.selected_caserate=this.caserate_field,this.getParams()}getParams(){switch(this.show_form=!1,this.program_name){case"tb":this.paramsTb();break;case"cc":this.paramsCc()}}paramsTb(){let s,a;"89221"===this.selected_caserate.code&&(s=this.selected_case.case_holding.treatment_start,a=new Date(this.selected_case.case_holding.continuation_start),a.setDate(a.getDate()-1)),"89222"===this.selected_caserate.code&&(s=this.selected_case.case_holding.continuation_start,a=this.selected_case.case_holding.treatment_end),this.getPbef(s,a)}paramsCc(){}getPbef(s,a){let o=(0,m.p6)(s,"MM-dd-yyyy","en","Asia/Manila"),u=(0,m.p6)(a,"MM-dd-yyyy","en","Asia/Manila");this.show_form=!1;let T={program_code:this.program_name,member_pin:this.patient_philhealth.philhealth_id,member_last_name:"DD"===this.patient_philhealth.membership_type_id?this.patient_philhealth.member_last_name.toUpperCase():this.patient.last_name.toUpperCase(),member_first_name:"DD"===this.patient_philhealth.membership_type_id?this.patient_philhealth.member_first_name.toUpperCase():this.patient.first_name.toUpperCase(),member_middle_name:"DD"===this.patient_philhealth.membership_type_id?this.patient_philhealth.member_middle_name.toUpperCase():this.patient.middle_name.toUpperCase(),member_suffix_name:"DD"===this.patient_philhealth.membership_type_id?"NA"===this.patient_philhealth.member_suffix_name?"":this.patient_philhealth.member_suffix_name.toUpperCase():"NA"===this.patient.suffix_name?"":this.patient.suffix_name.toUpperCase(),member_birthdate:(0,m.p6)("DD"===this.patient_philhealth.membership_type_id?this.patient_philhealth.member_birthdate:this.patient.birthdate,"MM-dd-yyyy","en","Asia/Manila"),patient_is:"DD"===this.patient_philhealth.membership_type_id?this.patient_philhealth.member_relation_id:"M",admission_date:o,discharge_date:u,patient_last_name:this.patient.last_name.toUpperCase(),patient_first_name:this.patient.first_name.toUpperCase(),patient_middle_name:this.patient.middle_name.toUpperCase(),patient_suffix_name:"NA"===this.patient.suffix_name?"":this.patient.suffix_name.toUpperCase(),patient_birthdate:(0,m.p6)(this.patient.birthdate,"MM-dd-yyyy","en","Asia/Manila"),patient_gender:this.patient.gender};this.http.post("eclaims/check-claim-eligibility",T).subscribe({next:b=>{this.pbef_result=b,this.show_form=!0,console.log(this.pbef_result),console.log(this.pbef_result.ASOF)},error:b=>console.log(b)})}closeModal(){this.toggleModal.emit("pbef")}constructor(s,a,o){this.http=s,this.toastr=a,this.exportAsService=o,this.toggleModal=new e.vpe,this.faFilePdf=r.gSj,this.faCircleNotch=r.IJ7,this.pdf_exported=!1,this.show_form=!1,this.exportAsPdf={type:"pdf",elementIdOrContent:"mainForm",options:{image:{type:"jpeg",quality:1},html2canvas:{scale:3},margin:[1,1,1,1],pagebreak:{mode:["avoid-all","css","legacy"],before:["#medForm2","#medForm3"]},jsPDF:{orientation:"portrait",format:"a4",precision:16}}}}ngOnInit(){1===this.caserate_list.length&&(console.log(this.caserate_list),this.selected_caserate=this.caserate_list[0],this.getParams())}}return(i=n).\u0275fac=function(s){return new(s||i)(e.Y36(y.O),e.Y36(f._W),e.Y36(c.f))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-pbef"]],inputs:{selected_case:"selected_case",patient:"patient",patient_philhealth:"patient_philhealth",program_name:"program_name",caserate_list:"caserate_list",program_creds:"program_creds"},outputs:{toggleModal:"toggleModal"},decls:17,vars:6,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-4xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-orange-400"],[1,"text-sm","font-bold","text-white"],[1,"bg-white","text-orange-400","rounded-md","px-2","py-1","disabled:opacity-50",3,"disabled","click"],[3,"icon","spin"],[1,"overflow-y-auto","max-h-[500px]","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],["src","./assets/img/philhealth-pbef.jpg","hidden",""],["class","flex w-2/3 mx-auto",4,"ngIf"],["class","w-full",4,"ngIf"],["class","grid grid-cols-1 my-20",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-gray-400",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"flex","w-2/3","mx-auto"],[1,"p-2","w-1/2"],["for","caserate_field"],["name","caserate_field","id","caserate_field",1,"input",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"mt-8"],["type","button",1,"btn-save",3,"click"],[3,"ngValue"],[1,"w-full"],["class","relative text-xs w-[210mm] h-[297mm]","id","mainForm",4,"ngIf"],["id","mainForm",1,"relative","text-xs","w-[210mm]","h-[297mm]"],["src","./assets/img/philhealth-pbef.jpg"],[1,"ml-60"],[1,"absolute","top-[53.3mm]"],[1,"absolute","top-[58.7mm]"],[1,"absolute","top-[70mm]"],[1,"absolute","top-[75.5mm]"],[1,"absolute","top-[87.9mm]"],[1,"absolute","top-[91.8mm]"],[1,"absolute","top-[95.7mm]"],[1,"absolute","top-[99.7mm]"],[1,"absolute","top-[103.6mm]"],[1,"absolute","top-[120.1mm]"],[1,"absolute","top-[123.8mm]"],[1,"absolute","top-[127.8mm]"],[1,"absolute","top-[131.8mm]"],[1,"absolute","top-[144.3mm]","left-[105mm]"],[1,"grid","grid-cols-1","my-20"],[1,"flex","justify-center","text-blue-500"],["spin","true",3,"icon"],[1,"flex","justify-center"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5," Eligibility "),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return a.exportP()}),e._UZ(7,"fa-icon",6),e.qZA()(),e.TgZ(8,"div",7),e._UZ(9,"img",8),e.YNc(10,v,9,2,"div",9),e.YNc(11,g,2,1,"div",10),e.YNc(12,_,5,1,"div",11),e.qZA(),e.TgZ(13,"div",12)(14,"button",13),e.NdJ("click",function(){return a.closeModal()}),e._uU(15,"Close"),e.qZA()()()()(),e._UZ(16,"div",14)),2&s&&(e.xp6(6),e.Q6J("disabled",!a.show_form||a.pdf_exported||!a.pbef_result),e.xp6(1),e.Q6J("icon",a.pdf_exported?a.faCircleNotch:a.faFilePdf)("spin",a.pdf_exported),e.xp6(3),e.Q6J("ngIf",!a.selected_caserate),e.xp6(1),e.Q6J("ngIf",a.selected_caserate),e.xp6(1),e.Q6J("ngIf",a.selected_caserate&&!a.show_form))},dependencies:[m.sg,m.O5,d.BN,l.YN,l.Kr,l.EJ,l.JJ,l.On,m.uU]}),n})();var w=p(1449);function N(i,n){if(1&i&&(e.TgZ(0,"div",14),e._UZ(1,"img",15),e.TgZ(2,"p",16),e._uU(3),e.ALo(4,"slice"),e.qZA(),e.TgZ(5,"p",17),e._uU(6),e.ALo(7,"slice"),e.qZA(),e.TgZ(8,"p",18),e._uU(9),e.ALo(10,"slice"),e.qZA(),e.TgZ(11,"p",19),e._uU(12),e.qZA(),e.TgZ(13,"p",20),e._uU(14),e.qZA(),e.TgZ(15,"p",21),e._uU(16),e.qZA(),e.TgZ(17,"p",22),e._uU(18),e.qZA(),e.TgZ(19,"p",23),e._uU(20),e.ALo(21,"date"),e.qZA(),e.TgZ(22,"p",24),e._uU(23),e.ALo(24,"date"),e.qZA(),e.TgZ(25,"p",25),e._uU(26),e.ALo(27,"date"),e.qZA()()),2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.Dn7(4,10,t.patient_philhealth.philhealth_id,0,2)),e.xp6(3),e.Oqu(e.Dn7(7,14,t.patient_philhealth.philhealth_id,3,11)),e.xp6(3),e.Oqu(e.Dn7(10,18,t.patient_philhealth.philhealth_id,11,12)),e.xp6(3),e.Oqu("MM"===t.patient_philhealth.membership_type_id?t.patient.last_name:t.patient_philhealth.member_last_name),e.xp6(2),e.Oqu("MM"===t.patient_philhealth.membership_type_id?t.patient.first_name:t.patient_philhealth.member_first_name),e.xp6(2),e.Oqu("MM"===t.patient_philhealth.membership_type_id?"NA"===t.patient.suffix_name?"":t.patient.suffix_name:"NA"===t.patient_philhealth.suffix_name?"":t.patient_philhealth.suffix_name),e.xp6(2),e.Oqu("MM"===t.patient_philhealth.membership_type_id?t.patient.middle_name:t.patient_philhealth.member_middle_name),e.xp6(2),e.Oqu(e.xi3(21,22,"MM"===t.patient_philhealth.membership_type_id?t.patient.birthdate:t.patient_philhealth.member_birthdate,"MM")),e.xp6(3),e.Oqu(e.xi3(24,25,"MM"===t.patient_philhealth.membership_type_id?t.patient.birthdate:t.patient_philhealth.member_birthdate,"dd")),e.xp6(3),e.Oqu(e.xi3(27,28,"MM"===t.patient_philhealth.membership_type_id?t.patient.birthdate:t.patient_philhealth.member_birthdate,"yyyy"))}}function I(i,n){if(1&i&&(e.TgZ(0,"div",26)(1,"div",27),e._UZ(2,"fa-icon",28),e.qZA(),e.TgZ(3,"div",29),e._uU(4," Checking PhilHealth Claims Eligibility... "),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("icon",t.faCircleNotch)}}let k=(()=>{var i;class n{exportP(){this.pdf_exported=!0,this.exportAsService.save(this.exportAsPdf,"GBV Medical").subscribe(()=>{this.pdf_exported=!1})}getCreds(){this.http.get("settings/philhealth-credentials").subscribe({next:a=>{console.log(a),this.program_creds=a.data[0]},error:a=>console.log(a)})}closeModal(){this.toggleModal.emit("cf1")}constructor(s,a,o){this.http=s,this.toastr=a,this.exportAsService=o,this.toggleModal=new e.vpe,this.faFilePdf=w.gSj,this.faCircleNotch=r.IJ7,this.program_code="mc",this.pdf_exported=!1,this.show_form=!0,this.exportAsPdf={type:"pdf",elementIdOrContent:"mainForm",options:{image:{type:"jpeg",quality:1},html2canvas:{scale:3},margin:[1,1,1,1],pagebreak:{mode:["avoid-all","css","legacy"],before:["#medForm2","#medForm3"]},jsPDF:{orientation:"portrait",format:"a4",precision:16}}}}ngOnInit(){console.log(this.patient)}}return(i=n).\u0275fac=function(s){return new(s||i)(e.Y36(y.O),e.Y36(f._W),e.Y36(c.f))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-cf1"]],inputs:{selected_case:"selected_case",patient:"patient",program_creds:"program_creds",patient_philhealth:"patient_philhealth"},outputs:{toggleModal:"toggleModal"},decls:16,vars:4,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-4xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-orange-400"],[1,"text-sm","font-bold","text-white"],[1,"bg-white","text-orange-400","rounded-md","px-2","py-1",3,"disabled","click"],[3,"icon"],[1,"overflow-y-auto","h-[500px]","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],["src","./assets/img/philhealth-cf1.jpg","hidden",""],["class","relative text-xs w-[215.9mm] h-[330.2mm]","id","mainForm",4,"ngIf"],["class","grid grid-cols-1 my-20",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-gray-400",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],["id","mainForm",1,"relative","text-xs","w-[215.9mm]","h-[330.2mm]"],["src","./assets/img/philhealth-cf1.jpg"],[1,"absolute","top-[75.4mm]","left-[92.5mm]","tracking-[0.92em]"],[1,"absolute","top-[75.4mm]","left-[103.8mm]","tracking-[0.92em]"],[1,"absolute","top-[75.8mm]","left-[145mm]","tracking-[0.93em]"],[1,"absolute","top-[85.5mm]","left-[10mm]"],[1,"absolute","top-[85.5mm]","left-[50mm]"],[1,"absolute","top-[85.5mm]","left-[95mm]"],[1,"absolute","top-[85.5mm]","left-[128mm]"],[1,"absolute","top-[85.5mm]","left-[163mm]","tracking-[0.87em]"],[1,"absolute","top-[85.5mm]","left-[174mm]","tracking-[0.87em]"],[1,"absolute","top-[85.5mm]","left-[184.7mm]","tracking-[0.86em]"],[1,"grid","grid-cols-1","my-20"],[1,"flex","justify-center","text-blue-500"],["spin","true",3,"icon"],[1,"flex","justify-center"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5," Claim Form 1 "),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return a.exportP()}),e._UZ(7,"fa-icon",6),e.qZA()(),e.TgZ(8,"div",7),e._UZ(9,"img",8),e.YNc(10,N,28,31,"div",9),e.YNc(11,I,5,1,"div",10),e.qZA(),e.TgZ(12,"div",11)(13,"button",12),e.NdJ("click",function(){return a.closeModal()}),e._uU(14,"Close"),e.qZA()()()()(),e._UZ(15,"div",13)),2&s&&(e.xp6(6),e.Q6J("disabled",a.pdf_exported),e.xp6(1),e.Q6J("icon",a.faFilePdf),e.xp6(3),e.Q6J("ngIf",a.show_form),e.xp6(1),e.Q6J("ngIf",!a.show_form))},dependencies:[m.O5,d.BN,m.OU,m.uU]}),n})();function F(i,n){if(1&i&&e._UZ(0,"fa-icon",17),2&i){const t=e.oxw();e.Q6J("icon",t.faCircleNotch)}}function O(i,n){if(1&i&&(e.TgZ(0,"option",25),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.AsE("",t.code," - ",t.caserate_code,"")}}function D(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",18)(1,"div",19)(2,"label",20),e._uU(3,"Caserate"),e.qZA(),e.TgZ(4,"select",21),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.caserate_field=a)}),e.YNc(5,O,2,3,"option",22),e.qZA()(),e.TgZ(6,"div",23)(7,"button",24),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.selectCaserate())}),e._uU(8," Select "),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.caserate_field),e.xp6(1),e.Q6J("ngForOf",t.caserate_list)}}function P(i,n){1&i&&(e.TgZ(0,"span",71),e._uU(1,"\u2714"),e.qZA())}function J(i,n){1&i&&(e.TgZ(0,"span",72),e._uU(1,"\u2714"),e.qZA())}function S(i,n){1&i&&(e.TgZ(0,"span",73),e._uU(1,"\u2714"),e.qZA())}function Q(i,n){1&i&&(e.TgZ(0,"span",74),e._uU(1,"\u2714"),e.qZA())}function L(i,n){if(1&i&&(e.TgZ(0,"div")(1,"span",75),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"span",76),e._uU(5),e.ALo(6,"date"),e.qZA(),e.TgZ(7,"span",77),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"span",78),e._uU(11),e.ALo(12,"date"),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(e.xi3(3,4,t.eclaimsForm.value.pCheckUpDate1,"MM-dd-yyyy")),e.xp6(3),e.Oqu(e.xi3(6,7,t.eclaimsForm.value.pCheckUpDate2,"MM-dd-yyyy")),e.xp6(3),e.Oqu(e.xi3(9,10,t.eclaimsForm.value.pCheckUpDate3,"MM-dd-yyyy")),e.xp6(3),e.Oqu(e.xi3(12,13,t.eclaimsForm.value.pCheckUpDate4,"MM-dd-yyyy"))}}function R(i,n){if(1&i&&(e.TgZ(0,"div")(1,"span",79),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"span",80),e._uU(5),e.ALo(6,"date"),e.qZA(),e.TgZ(7,"span",81),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"span",82),e._uU(11),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"span",83),e._uU(14),e.ALo(15,"date"),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(e.xi3(3,5,t.eclaimsForm.value.pDay0ARV,"MM-dd-yyyy")),e.xp6(3),e.Oqu(e.xi3(6,8,t.eclaimsForm.value.pDay3ARV,"MM-dd-yyyy")),e.xp6(3),e.Oqu(e.xi3(9,11,t.eclaimsForm.value.pDay7ARV,"MM-dd-yyyy")),e.xp6(3),e.Oqu(e.xi3(12,14,t.eclaimsForm.value.pRIG,"MM-dd-yyyy")),e.xp6(3),e.Oqu(e.xi3(15,17,t.eclaimsForm.value.pABPOthers,"MM-dd-yyyy"))}}function Y(i,n){1&i&&(e.TgZ(0,"span",87),e._uU(1,"\u2714"),e.qZA())}function H(i,n){1&i&&(e.TgZ(0,"span",88),e._uU(1,"\u2714"),e.qZA())}function B(i,n){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Y,2,0,"span",84),e.YNc(2,H,2,0,"span",85),e.TgZ(3,"span",86),e._uU(4,"NEW CAT I"),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf","89221"===t.eclaimsForm.value.code),e.xp6(1),e.Q6J("ngIf","89222"===t.eclaimsForm.value.code)}}function j(i,n){1&i&&(e.TgZ(0,"div")(1,"span",89),e._uU(2,"\u2714"),e.qZA(),e.TgZ(3,"span",90),e._uU(4,"\u2714"),e.qZA(),e.TgZ(5,"span",91),e._uU(6,"\u2714"),e.qZA(),e.TgZ(7,"span",92),e._uU(8,"\u2714"),e.qZA(),e.TgZ(9,"span",93),e._uU(10,"\u2714"),e.qZA(),e.TgZ(11,"span",94),e._uU(12,"\u2714"),e.qZA(),e.TgZ(13,"span",95),e._uU(14,"\u2714"),e.qZA(),e.TgZ(15,"span",96),e._uU(16,"\u2714"),e.qZA(),e.TgZ(17,"span",97),e._uU(18,"\u2714"),e.qZA()())}function V(i,n){if(1&i&&(e.TgZ(0,"div")(1,"span",98),e._uU(2,"\u2714"),e.qZA(),e.TgZ(3,"span",99),e._uU(4),e.qZA(),e.TgZ(5,"span",100),e._uU(6),e.qZA(),e.TgZ(7,"span",101),e._uU(8),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(4),e.Oqu("PHP "+t.eclaimsForm.value.hci_fee),e.xp6(2),e.Oqu("PHP "+t.eclaimsForm.value.prof_fee),e.xp6(2),e.Oqu("PHP "+t.eclaimsForm.value.caserate_fee)}}function K(i,n){if(1&i&&(e.TgZ(0,"div")(1,"span",102),e._uU(2,"\u2714"),e.qZA(),e.TgZ(3,"span",103),e._uU(4),e.qZA(),e.TgZ(5,"span",104),e._uU(6),e.qZA(),e.TgZ(7,"span",105),e._uU(8),e.qZA(),e.TgZ(9,"span",106),e._uU(10),e.qZA(),e.TgZ(11,"span",107),e._uU(12),e.qZA(),e.TgZ(13,"span",108),e._uU(14),e.qZA(),e.TgZ(15,"span",109),e._uU(16),e.qZA(),e.TgZ(17,"span",110),e._uU(18),e.qZA(),e.TgZ(19,"span",111),e._uU(20),e.qZA(),e.TgZ(21,"span",112),e._uU(22),e.qZA(),e.TgZ(23,"span",113),e._uU(24),e.qZA(),e.TgZ(25,"span",114),e._uU(26),e.qZA(),e.TgZ(27,"span",115),e._uU(28),e.qZA(),e.TgZ(29,"span",116),e._uU(30),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(4),e.Oqu("PHP "+t.eclaimsForm.value.hci_pTotalActualCharges),e.xp6(2),e.Oqu("PHP "+t.eclaimsForm.value.hci_pDiscount),e.xp6(2),e.Oqu("PHP "+t.eclaimsForm.value.hci_pPhilhealthBenefit),e.xp6(2),e.Oqu(t.eclaimsForm.value.hci_pTotalAmount),e.xp6(2),e.Oqu("PHP "+t.eclaimsForm.value.prof_pTotalActualCharges),e.xp6(2),e.Oqu("PHP "+t.eclaimsForm.value.prof_pDiscount),e.xp6(2),e.Oqu("PHP "+t.eclaimsForm.value.prof_pPhilhealthBenefit),e.xp6(2),e.Oqu(t.eclaimsForm.value.prof_pTotalAmount),e.xp6(2),e.Oqu(t.eclaimsForm.value.meds_flag?"\u2714":""),e.xp6(2),e.Oqu(t.eclaimsForm.value.meds_flag?"":"\u2714"),e.xp6(2),e.Oqu(t.eclaimsForm.value.meds_pDMSTotalAmount),e.xp6(2),e.Oqu(t.eclaimsForm.value.meds_pExaminations_flag?"\u2714":""),e.xp6(2),e.Oqu(t.eclaimsForm.value.meds_pExaminations_flag?"":"\u2714"),e.xp6(2),e.Oqu(t.eclaimsForm.value.meds_pExamTotalAmount)}}function W(i,n){if(1&i&&(e.TgZ(0,"div",30),e._UZ(1,"img",31)(2,"img",32),e.TgZ(3,"span",33),e._uU(4),e.qZA(),e.TgZ(5,"span",34),e._uU(6),e.qZA(),e.TgZ(7,"span",35),e._uU(8),e.qZA(),e.TgZ(9,"span",36),e._uU(10),e.qZA(),e.TgZ(11,"span",37),e._uU(12),e.qZA(),e.TgZ(13,"span",38),e._uU(14),e.qZA(),e.TgZ(15,"span",39),e._uU(16),e.qZA(),e.TgZ(17,"span",40),e._uU(18),e.qZA(),e.TgZ(19,"span",41),e._uU(20),e.qZA(),e.TgZ(21,"span",42),e._uU(22),e.ALo(23,"date"),e.qZA(),e.TgZ(24,"span",43),e._uU(25),e.ALo(26,"date"),e.qZA(),e.TgZ(27,"span",44),e._uU(28),e.ALo(29,"date"),e.qZA(),e.TgZ(30,"span",45),e._uU(31),e.ALo(32,"slice"),e.qZA(),e.TgZ(33,"span",46),e._uU(34),e.ALo(35,"slice"),e.qZA(),e.YNc(36,P,2,0,"span",47),e.ALo(37,"slice"),e.YNc(38,J,2,0,"span",48),e.ALo(39,"slice"),e.TgZ(40,"span",49),e._uU(41),e.ALo(42,"date"),e.qZA(),e.TgZ(43,"span",50),e._uU(44),e.ALo(45,"date"),e.qZA(),e.TgZ(46,"span",51),e._uU(47),e.ALo(48,"date"),e.qZA(),e.TgZ(49,"span",52),e._uU(50),e.ALo(51,"slice"),e.qZA(),e.TgZ(52,"span",53),e._uU(53),e.ALo(54,"slice"),e.qZA(),e.YNc(55,S,2,0,"span",54),e.ALo(56,"slice"),e.YNc(57,Q,2,0,"span",55),e.ALo(58,"slice"),e.TgZ(59,"span",56),e._uU(60,"\u2714"),e.qZA(),e.TgZ(61,"span",57),e._uU(62),e.qZA(),e.TgZ(63,"span",58),e._uU(64),e.qZA(),e.TgZ(65,"span",59),e._uU(66),e.qZA(),e.TgZ(67,"span",60),e._uU(68),e.qZA(),e.TgZ(69,"span",61),e._uU(70),e.ALo(71,"date"),e.qZA(),e.TgZ(72,"span",62),e._uU(73),e.qZA(),e.YNc(74,L,13,16,"div",28),e.YNc(75,R,16,20,"div",28),e.YNc(76,B,5,2,"div",28),e.YNc(77,j,19,0,"div",28),e.TgZ(78,"span",63),e._uU(79),e.ALo(80,"slice"),e.qZA(),e.TgZ(81,"span",64),e._uU(82),e.ALo(83,"slice"),e.qZA(),e.TgZ(84,"span",65),e._uU(85),e.ALo(86,"slice"),e.qZA(),e.TgZ(87,"span",66),e._uU(88),e.qZA(),e.TgZ(89,"span",67),e._uU(90),e.ALo(91,"date"),e.qZA(),e.TgZ(92,"span",68),e._uU(93),e.ALo(94,"date"),e.qZA(),e.TgZ(95,"span",69),e._uU(96),e.ALo(97,"date"),e.qZA(),e.TgZ(98,"span",70),e._uU(99,"\u2714"),e.qZA(),e.YNc(100,V,9,3,"div",28),e.YNc(101,K,31,14,"div",28),e.qZA()),2&i){const t=e.oxw(2);e.xp6(4),e.Oqu(null==t.program_creds?null:t.program_creds.accreditation_number),e.xp6(2),e.Oqu(null==t.program_creds?null:t.program_creds.facility_name),e.xp6(2),e.Oqu(null==t.facility?null:t.facility.barangay.name),e.xp6(2),e.Oqu(null==t.facility?null:t.facility.municipality.name),e.xp6(2),e.Oqu(null==t.facility?null:t.facility.province.name),e.xp6(2),e.Oqu(null==t.patient?null:t.patient.last_name),e.xp6(2),e.Oqu(null==t.patient?null:t.patient.first_name),e.xp6(2),e.Oqu("NA"!==(null==t.patient?null:t.patient.suffix_name)?null==t.patient?null:t.patient.suffix_name:""),e.xp6(2),e.Oqu(null==t.patient?null:t.patient.middle_name),e.xp6(2),e.Oqu(e.xi3(23,45,t.eclaimsForm.value.admission_date,"MM")),e.xp6(3),e.Oqu(e.xi3(26,48,t.eclaimsForm.value.admission_date,"dd")),e.xp6(3),e.Oqu(e.xi3(29,51,t.eclaimsForm.value.admission_date,"yyyy")),e.xp6(3),e.Oqu(e.Dn7(32,54,t.eclaimsForm.value.admission_time,0,2)),e.xp6(3),e.Oqu(e.Dn7(35,58,t.eclaimsForm.value.admission_time,3,5)),e.xp6(2),e.Q6J("ngIf","AM"===e.Dn7(37,62,t.eclaimsForm.value.admission_time,5,7)),e.xp6(2),e.Q6J("ngIf","PM"===e.Dn7(39,66,t.eclaimsForm.value.admission_time,5,7)),e.xp6(3),e.Oqu(e.xi3(42,70,t.eclaimsForm.value.discharge_date,"MM")),e.xp6(3),e.Oqu(e.xi3(45,73,t.eclaimsForm.value.discharge_date,"dd")),e.xp6(3),e.Oqu(e.xi3(48,76,t.eclaimsForm.value.discharge_date,"yyyy")),e.xp6(3),e.Oqu(e.Dn7(51,79,t.eclaimsForm.value.discharge_time,0,2)),e.xp6(3),e.Oqu(e.Dn7(54,83,t.eclaimsForm.value.discharge_time,3,5)),e.xp6(2),e.Q6J("ngIf","AM"===e.Dn7(56,87,t.eclaimsForm.value.discharge_time,5,7)),e.xp6(2),e.Q6J("ngIf","PM"===e.Dn7(58,91,t.eclaimsForm.value.discharge_time,5,7)),e.xp6(5),e.Oqu(t.eclaimsForm.value.admit_dx),e.xp6(2),e.Oqu(t.eclaimsForm.value.discharge_dx),e.xp6(2),e.Oqu(t.eclaimsForm.value.icd10_code),e.xp6(2),e.Oqu(t.eclaimsForm.value.code),e.xp6(2),e.Oqu(e.xi3(71,95,t.eclaimsForm.value.attendant_sign_date,"MM-dd-yyyy")),e.xp6(3),e.Oqu(t.eclaimsForm.value.code),e.xp6(1),e.Q6J("ngIf","mc"===t.program_name),e.xp6(1),e.Q6J("ngIf","ab"===t.program_name),e.xp6(1),e.Q6J("ngIf","tb"===t.program_name),e.xp6(1),e.Q6J("ngIf","cc"===t.program_name),e.xp6(2),e.Oqu(e.Dn7(80,98,t.eclaimsForm.value.attendant_accreditation_code,0,4)),e.xp6(3),e.Oqu(e.Dn7(83,102,t.eclaimsForm.value.attendant_accreditation_code,4,11)),e.xp6(3),e.Oqu(e.Dn7(86,106,t.eclaimsForm.value.attendant_accreditation_code,11,12)),e.xp6(3),e.HOy("",t.eclaimsForm.value.attendant_last_name,", ",t.eclaimsForm.value.attendant_first_name," ",t.eclaimsForm.value.attendant_middle_name," ","NA"!==t.eclaimsForm.value.attendant_suffix_name?t.eclaimsForm.value.attendant_suffix_name:"",""),e.xp6(2),e.Oqu(e.xi3(91,110,t.eclaimsForm.value.attendant_sign_date,"MM")),e.xp6(3),e.Oqu(e.xi3(94,113,t.eclaimsForm.value.attendant_sign_date,"dd")),e.xp6(3),e.Oqu(e.xi3(97,116,t.eclaimsForm.value.attendant_sign_date,"yyyy")),e.xp6(4),e.Q6J("ngIf",t.eclaimsForm.value.enough_benefit_flag),e.xp6(1),e.Q6J("ngIf",!t.eclaimsForm.value.enough_benefit_flag)}}function G(i,n){if(1&i&&(e.TgZ(0,"li",120),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.key," is required ")}}function $(i,n){if(1&i&&(e.TgZ(0,"ul"),e.YNc(1,G,2,1,"li",119),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Q6J("ngIf","INVALID"===t.value.status)}}function X(i,n){if(1&i&&(e.TgZ(0,"div")(1,"div",117),e.YNc(2,$,2,1,"ul",118),e.ALo(3,"keyvalue"),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",e.lcZ(3,1,t.eclaimsForm.controls))}}function z(i,n){if(1&i&&(e.TgZ(0,"ul")(1,"li",120),e._uU(2),e.ALo(3,"date"),e.qZA()()),2&i){const t=n.$implicit;e.xp6(2),e.AsE(" Trimester ",t.trimester,": ",e.xi3(3,2,t.prenatal_date,"MM-dd-yyyy")," ")}}function ee(i,n){if(1&i&&(e.TgZ(0,"div")(1,"div",117),e._uU(2," Maternal care visits invalid or incomplete "),e.YNc(3,z,4,5,"ul",118),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("ngForOf",null==t.selected_case?null:t.selected_case.prenatal_visit)}}function te(i,n){if(1&i&&(e.TgZ(0,"div",121)(1,"div",122),e._UZ(2,"fa-icon",123),e.qZA(),e.TgZ(3,"div",124),e._uU(4," Checking PhilHealth Claims CF2... "),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("icon",t.faCircleNotch)}}function ae(i,n){if(1&i&&(e.TgZ(0,"div",26),e.YNc(1,W,102,119,"div",27),e.YNc(2,X,4,3,"div",28),e.YNc(3,ee,4,1,"div",28),e.YNc(4,te,5,1,"div",29),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.show_form&&t.eclaimsForm.valid),e.xp6(1),e.Q6J("ngIf",t.show_form&&t.eclaimsForm.invalid),e.xp6(1),e.Q6J("ngIf",t.show_form&&t.mc_error),e.xp6(1),e.Q6J("ngIf",!t.show_form)}}let ie=(()=>{var i;class n{submitQue(){this.que_form=!0,this.http.post("eclaims/eclaims-xml",this.eclaimsForm.value).subscribe({next:s=>{this.toastr.success("Successfully saved",(this.eclaimsForm.value.transmittalNumber?"Update":"Queue")+" Claim"),this.que_form=!1,this.closeModal()},error:s=>console.log(s)})}paramsTb(){this.f.pTBType.setValidators([l.kI.required]),this.f.pNTPCardNo.setValidators([l.kI.required]);let s={attendant_sign_date:null,pTBType:null,admission_date:null,discharge_date:null};if("89221"===this.selected_caserate.code){s.pTBType="I",s.attendant_sign_date=(0,m.p6)(this.selected_case.case_holding.treatment_start,"yyyy-MM-dd","en","Asia/Manila"),s.admission_date=(0,m.p6)(this.selected_case.case_holding.treatment_start,"yyyy-MM-dd","en","Asia/Manila");let a=new Date(this.selected_case.case_holding.continuation_start);a.setDate(a.getDate()-1),s.discharge_date=(0,m.p6)(a,"yyyy-MM-dd","en","Asia/Manila")}"89222"===this.selected_caserate.code&&(s.pTBType="M",s.attendant_sign_date=(0,m.p6)(this.selected_case.case_holding.treatment_start,"yyyy-MM-dd","en","Asia/Manila"),s.admission_date=(0,m.p6)(this.selected_case.case_holding.continuation_start,"yyyy-MM-dd","en","Asia/Manila"),s.discharge_date=(0,m.p6)(this.selected_case.case_holding.treatment_end,"yyyy-MM-dd","en","Asia/Manila")),this.eclaimsForm.patchValue({attendant_sign_date:s.attendant_sign_date,pTBType:s.pTBType,pNTPCardNo:this.selected_case.case_holding.case_number,admission_date:s.admission_date,admission_time:(0,m.p6)((new Date).setHours(8),"hh:mma","en","Asia/Manila"),discharge_date:s.discharge_date,discharge_time:(0,m.p6)((new Date).setHours(8),"hh:mma","en","Asia/Manila")}),this.getCreds()}paramsCc(s){this.f.pEssentialNewbornCare.setValidators([l.kI.required]),this.f.pNewbornHearingScreeningTest.setValidators([l.kI.required]),this.f.pNewbornScreeningTest.setValidators([l.kI.required]),this.f.pFilterCardNo.setValidators([l.kI.required]);let a="N",o=0,u=!1;this.selected_case.consultccdevservices&&Object.entries(this.selected_case.consultccdevservices).forEach(([T,b],Z)=>{"HEAR"===b.service_id?a="Y":o+=1}),s&&Object.entries(s).forEach(([T,b],Z)=>{if("HEPB"===b.vaccine_id)return u=!0,1}),this.eclaimsForm.patchValue({attendant_sign_date:(0,m.p6)(this.selected_case.admission_date,"yyyy-MM-dd","en","Asia/Manila"),admission_date:(0,m.p6)(this.selected_case.admission_date,"yyyy-MM-dd","en","Asia/Manila"),admission_time:(0,m.p6)(this.selected_case.admission_date,"hh:mma","en","Asia/Manila"),discharge_date:(0,m.p6)(this.selected_case.discharge_date,"yyyy-MM-dd","en","Asia/Manila"),discharge_time:(0,m.p6)(this.selected_case.discharge_date,"hh:mma","en","Asia/Manila"),pNewbornHearingScreeningTest:a,pNewbornScreeningTest:this.selected_case.nbs_filter?"Y":"N",pFilterCardNo:this.selected_case.nbs_filter,pEssentialNewbornCare:"Y"===a&&u?"Y":"N"}),this.getCreds()}paramsAb(){this.f.pDay0ARV.setValidators([l.kI.required]),this.f.pDay3ARV.setValidators([l.kI.required]),this.f.pDay7ARV.setValidators([l.kI.required]),this.f.pRIG.setValidators([l.kI.required]),this.f.pABPOthers.setValidators([l.kI.required]),this.eclaimsForm.patchValue({pDay0ARV:(0,m.p6)(this.selected_case.abPostExposure.day0_date,"yyyy-MM-dd","en","Asia/Manila"),pDay3ARV:(0,m.p6)(this.selected_case.abPostExposure.day3_date,"yyyy-MM-dd","en","Asia/Manila"),pDay7ARV:(0,m.p6)(this.selected_case.abPostExposure.day7_date,"yyyy-MM-dd","en","Asia/Manila"),pRIG:(0,m.p6)(this.selected_case.abPostExposure.rig_date,"yyyy-MM-dd","en","Asia/Manila"),pABPOthers:(0,m.p6)(this.selected_case.abPostExposure.other_vacc_date,"yyyy-MM-dd","en","Asia/Manila"),pABPSpecify:this.selected_case.abPostExposure.remarks,attendant_sign_date:(0,m.p6)(this.selected_case.abPostExposure.day0_date,"yyyy-MM-dd","en","Asia/Manila"),admission_date:(0,m.p6)(this.selected_case.abPostExposure.day0_date,"yyyy-MM-dd","en","Asia/Manila"),admission_time:(0,m.p6)((new Date).setHours(8),"hh:mma","en","Asia/Manila"),discharge_date:(0,m.p6)(this.selected_case.abPostExposure.day7_date,"yyyy-MM-dd","en","Asia/Manila"),discharge_time:(0,m.p6)((new Date).setHours(8),"hh:mma","en","Asia/Manila")}),console.log(this.eclaimsForm.value),console.log(this.selected_case.abPostExposure),this.getCreds()}paramsMc(){if(this.f.pCheckUpDate1.setValidators([l.kI.required]),this.f.pCheckUpDate2.setValidators([l.kI.required]),this.f.pCheckUpDate3.setValidators([l.kI.required]),this.f.pCheckUpDate4.setValidators([l.kI.required]),Object.keys(this.selected_case.prenatal_visit).length<4&&this.selected_case.prenatal_visit[0].trimester<3)this.mc_error=!0,this.show_form=!0;else{let T,b,Z,s=null,a=null,o=null,u=null;Object.entries(this.selected_case.prenatal_visit).reverse().forEach(([Oe,M],q)=>{if(0===q&&!s&&(s=M.prenatal_date),1===q&&!a&&(a=M.prenatal_date),2===q&&!o&&(o=M.prenatal_date),q>2&&!u&&3===M.trimester)return u=M.prenatal_date,!0}),"ANC01"===this.selected_caserate.code||"ANC02"===this.selected_caserate.code?(T=new Date(u),b=new Date(s),Z=new Date(u)):(T=this.selected_case.post_registration.discharge_date,b=this.selected_case.post_registration.admission_date,Z=this.selected_case.post_registration.discharge_date),this.eclaimsForm.patchValue({pCheckUpDate1:s,pCheckUpDate2:a,pCheckUpDate3:o,pCheckUpDate4:u,attendant_sign_date:(0,m.p6)(T,"yyyy-MM-dd","en","Asia/Manila"),admission_date:(0,m.p6)(b,"yyyy-MM-dd","en","Asia/Manila"),admission_time:(0,m.p6)(b,"hh:mma","en","Asia/Manila"),discharge_date:(0,m.p6)(Z,"yyyy-MM-dd","en","Asia/Manila"),discharge_time:(0,m.p6)(Z,"hh:mma","en","Asia/Manila")}),this.getCreds()}}paramsMl(){this.eclaimsForm.patchValue({attendant_sign_date:(0,m.p6)(this.eclaimsForm.value.caserate_date,"yyyy-MM-dd","en","Asia/Manila"),admission_date:(0,m.p6)(this.eclaimsForm.value.caserate_date,"yyyy-MM-dd","en","Asia/Manila"),admission_time:(0,m.p6)((new Date).setHours(8),"hh:mma","en","Asia/Manila"),discharge_date:(0,m.p6)(this.eclaimsForm.value.caserate_date,"yyyy-MM-dd","en","Asia/Manila"),discharge_time:(0,m.p6)((new Date).setHours(17),"hh:mma","en","Asia/Manila")}),this.getCreds()}paramsFp(){this.f.pICDCode.setValidators([l.kI.required])}getCreds(){this.http.get("settings/philhealth-credentials",{params:{"filter[program_code]":"cc"!==this.program_name?this.program_name:"mc"}}).subscribe({next:a=>{this.program_creds=a.data[0],this.show_form=!0},error:a=>console.log(a)})}getVaccine(){return"Y"}get f(){return this.eclaimsForm.controls}loadCf2Params(){switch(this.program_name){case"tb":this.paramsTb();break;case"cc":this.http.get("patient-vaccines/vaccines-records",{params:{patient_id:this.selected_case.patient_id}}).subscribe({next:a=>{this.paramsCc(a.data)}});break;case"mc":this.paramsMc();break;case"ab":this.paramsAb();break;case"fb":this.paramsFp()}}selectCaserate(){this.selected_caserate=this.caserate_field,this.createForm()}exportP(){let s="CF2_"+this.patient.last_name.toUpperCase()+"_"+this.patient.first_name.toUpperCase()+"_"+(0,m.p6)(new Date,"yyyyMMdd","en","Asia/Manila");this.pdf_exported=!0,this.exportAsService.save(this.exportAsPdf,s).subscribe(()=>{this.pdf_exported=!1})}createForm(){this.show_form=!1,this.eclaimsForm=this.formBuilder.group({patient_id:[null,l.kI.required],facility_code:[this.facility.code,l.kI.required],program_desc:[null,l.kI.required],program_id:[null,l.kI.required],admit_dx:[null,l.kI.required],caserate_date:[null,l.kI.required],caserate_code:[null,l.kI.required],code:[null,l.kI.required],description:[null,l.kI.required],discharge_dx:[null,l.kI.required],icd10_code:[null,l.kI.required],hci_fee:[null,l.kI.required],prof_fee:[null,l.kI.required],caserate_fee:[null,l.kI.required],admission_date:[null,l.kI.required],admission_time:[null,l.kI.required],discharge_date:[null,l.kI.required],discharge_time:[null,l.kI.required],eclaims_caserate_list_id:[null,l.kI.required],attendant_accreditation_code:[null,l.kI.required],attendant_last_name:[null,l.kI.required],attendant_first_name:[null,l.kI.required],attendant_middle_name:[null],attendant_suffix_name:[null],attendant_sign_date:[null,l.kI.required],pTBType:[null],pNTPCardNo:[null],pDay0ARV:[null],pDay3ARV:[null],pDay7ARV:[null],pRIG:[null],pABPOthers:[null],pABPSpecify:[null],pEssentialNewbornCare:[null],pNewbornHearingScreeningTest:[null],pNewbornScreeningTest:[null],pFilterCardNo:[null],pCheckUpDate1:[null],pCheckUpDate2:[null],pCheckUpDate3:[null],pCheckUpDate4:[null],pICDCode:[null],transmittalNumber:[null],enough_benefit_flag:[null],hci_pTotalActualCharges:[null],hci_pDiscount:[null],hci_pPhilhealthBenefit:[null],hci_pTotalAmount:[null],prof_pTotalActualCharges:[null],prof_pDiscount:[null],prof_pPhilhealthBenefit:[null],prof_pTotalAmount:[null],meds_flag:[null],meds_pDMSTotalAmount:[null],meds_pExaminations_flag:[null],meds_pExamTotalAmount:[null],hmo_flag:[null],others_flag:[null]}),this.eclaimsForm.patchValue({...this.selected_caserate}),this.eclaimsForm.patchValue({eclaims_caserate_list_id:this.selected_caserate.id,attendant_accreditation_code:this.selected_caserate.attendant.accreditation_number,attendant_last_name:this.selected_caserate.attendant.last_name,attendant_first_name:this.selected_caserate.attendant.first_name,attendant_middle_name:this.selected_caserate.attendant.middle_name,attendant_suffix_name:"NA"!==this.selected_caserate.attendant.suffix_name?this.selected_caserate.attendant.suffix_name:"",transmittalNumber:this.selected_transmittalNumber??null}),this.loadCf2Params()}closeModal(){this.toggleModal.emit("cf2")}constructor(s,a,o,u){this.http=s,this.toastr=a,this.exportAsService=o,this.formBuilder=u,this.toggleModal=new e.vpe,this.faFilePdf=w.gSj,this.faCircleNotch=r.IJ7,this.pdf_exported=!1,this.show_form=!0,this.que_form=!1,this.eclaimsForm=function E(){return new l.cw({patient_id:new l.NI(null),facility_code:new l.NI(null),program_desc:new l.NI(null),program_id:new l.NI(null),admit_dx:new l.NI(null),caserate_date:new l.NI(null),caserate_code:new l.NI(null),code:new l.NI(null),description:new l.NI(null),discharge_dx:new l.NI(null),icd10_code:new l.NI(null),hci_fee:new l.NI(null),prof_fee:new l.NI(null),caserate_fee:new l.NI(null),admission_date:new l.NI(null),admission_time:new l.NI(null),discharge_date:new l.NI(null),discharge_time:new l.NI(null),eclaims_caserate_list_id:new l.NI(null),attendant_accreditation_code:new l.NI(null),attendant_last_name:new l.NI(null),attendant_first_name:new l.NI(null),attendant_middle_name:new l.NI(null),attendant_suffix_name:new l.NI(null),attendant_sign_date:new l.NI(null),pTBType:new l.NI(null),pNTPCardNo:new l.NI(null),pDay0ARV:new l.NI(null),pDay3ARV:new l.NI(null),pDay7ARV:new l.NI(null),pRIG:new l.NI(null),pABPOthers:new l.NI(null),pABPSpecify:new l.NI(null),pEssentialNewbornCare:new l.NI(null),pNewbornHearingScreeningTest:new l.NI(null),pNewbornScreeningTest:new l.NI(null),pFilterCardNo:new l.NI(null),pCheckUpDate1:new l.NI(null),pCheckUpDate2:new l.NI(null),pCheckUpDate3:new l.NI(null),pCheckUpDate4:new l.NI(null),pICDCode:new l.NI(null),transmittalNumber:new l.NI(null),enough_benefit_flag:new l.NI(null),hci_pTotalActualCharges:new l.NI(null),hci_pDiscount:new l.NI(null),hci_pPhilhealthBenefit:new l.NI(null),hci_pTotalAmount:new l.NI(null),prof_pTotalActualCharges:new l.NI(null),prof_pDiscount:new l.NI(null),prof_pPhilhealthBenefit:new l.NI(null),prof_pTotalAmount:new l.NI(null),meds_flag:new l.NI(null),meds_pDMSTotalAmount:new l.NI(null),meds_pExaminations_flag:new l.NI(null),meds_pExamTotalAmount:new l.NI(null),hmo_flag:new l.NI(null),others_flag:new l.NI(null)})}(),this.date_today=(0,m.p6)(new Date,"yyyy-MM-dd","en","Asia/Manila"),this.mc_error=!1,this.exportAsPdf={type:"pdf",elementIdOrContent:"mainForm",options:{image:{type:"jpeg",quality:1},html2canvas:{scale:2},margin:[0,0,0,0],pagebreak:{mode:["avoid-all","css","legacy"]},jsPDF:{orientation:"portrait",unit:"mm",format:[216,330]}}}}ngOnInit(){this.facility=this.http.getUserFromJSON().facility,1===this.caserate_list.length&&(this.selected_caserate=this.caserate_list[0],this.createForm())}}return(i=n).\u0275fac=function(s){return new(s||i)(e.Y36(y.O),e.Y36(f._W),e.Y36(c.f),e.Y36(l.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-cf2"]],inputs:{patient:"patient",program_id:"program_id",program_name:"program_name",caserate_list:"caserate_list",selected_case:"selected_case",selected_transmittalNumber:"selected_transmittalNumber"},outputs:{toggleModal:"toggleModal"},decls:21,vars:7,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-4xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-orange-400"],[1,"text-sm","font-bold","text-white"],[1,"bg-white","text-orange-400","rounded-md","px-2","py-1","mr-3","disabled:opacity-50",3,"disabled","click"],["spin","true","class","pr-1",3,"icon",4,"ngIf"],[1,"bg-white","text-orange-400","rounded-md","px-2","py-1","disabled:opacity-50",3,"disabled","click"],[3,"icon"],[1,"overflow-y-auto","max-h-[500px]","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],["src","./assets/img/philhealth-cf2-1.jpg","hidden","",1,"w-[216mm]","h-[330mm]"],["src","./assets/img/philhealth-cf2-2.jpg","hidden","",1,"w-[216mm]","h-[330mm]"],["class","flex w-2/3 mx-auto",4,"ngIf"],["class","w-full",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-gray-400",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],["spin","true",1,"pr-1",3,"icon"],[1,"flex","w-2/3","mx-auto"],[1,"p-2","w-1/2"],["for","caserate_field"],["name","caserate_field","id","caserate_field",1,"input",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"mt-8"],["type","button",1,"btn-save",3,"click"],[3,"ngValue"],[1,"w-full"],["class","text-sm text-center uppercase font-semibold relative w-[216mm] h-[660mm]","id","mainForm",4,"ngIf"],[4,"ngIf"],["class","grid grid-cols-1 my-20",4,"ngIf"],["id","mainForm",1,"text-sm","text-center","uppercase","font-semibold","relative","w-[216mm]","h-[660mm]"],["src","./assets/img/philhealth-cf2-1.jpg",1,"w-[216mm]","h-[330mm]"],["src","./assets/img/philhealth-cf2-2.jpg",1,"w-[216mm]","h-[330mm]"],[1,"absolute","top-[67.8mm]","left-[117mm]","tracking-[0.45em]"],[1,"absolute","top-[73mm]","left-[61mm]","w-[147mm]"],[1,"absolute","top-[79mm]","left-[28mm]","w-[73mm]"],[1,"absolute","top-[79mm]","left-[104mm]","w-[51mm]"],[1,"absolute","top-[79mm]","left-[159mm]","w-[48mm]"],[1,"absolute","top-[95.3mm]","left-[44mm]","w-[38.5mm]"],[1,"absolute","top-[95.3mm]","left-[87mm]","w-[41.5mm]"],[1,"absolute","top-[95.3mm]","left-[1320mm]","w-[29.5mm]"],[1,"absolute","top-[95.3mm]","left-[165mm]","w-[42.2mm]"],[1,"absolute","top-[126mm]","left-[70mm]","w-[8.5mm]","tracking-[0.4em]"],[1,"absolute","top-[126mm]","left-[81.5mm]","w-[8.5mm]","tracking-[0.4em]"],[1,"absolute","top-[126mm]","left-[93.5mm]","w-[17mm]","tracking-[0.55em]"],[1,"absolute","top-[126mm]","left-[139mm]","w-[8.5mm]","tracking-[0.55em]"],[1,"absolute","top-[126mm]","left-[150mm]","w-[8.5mm]","tracking-[0.55em]"],["class","absolute top-[126mm] left-[165mm] w-[8.5mm] tracking-[0.55em]",4,"ngIf"],["class","absolute top-[126mm] left-[180mm] w-[8.5mm] tracking-[0.55em]",4,"ngIf"],[1,"absolute","top-[131.5mm]","left-[70mm]","w-[8.5mm]","tracking-[0.4em]"],[1,"absolute","top-[131.5mm]","left-[81.5mm]","w-[8.5mm]","tracking-[0.4em]"],[1,"absolute","top-[131.5mm]","left-[93.5mm]","w-[17mm]","tracking-[0.55em]"],[1,"absolute","top-[131.5mm]","left-[139mm]","w-[8.5mm]","tracking-[0.55em]"],[1,"absolute","top-[131.5mm]","left-[150mm]","w-[8.5mm]","tracking-[0.55em]"],["class","absolute top-[131.5mm] left-[165mm] w-[8.5mm] tracking-[0.55em]",4,"ngIf"],["class","absolute top-[131.5mm] left-[180mm] w-[8.5mm] tracking-[0.55em]",4,"ngIf"],[1,"absolute","top-[142.6mm]","left-[11.8mm]"],[1,"absolute","top-[176.5mm]","left-[10mm]","w-[196mm]"],[1,"absolute","top-[193.5mm]","left-[15mm]","w-[24.5mm]"],[1,"absolute","top-[193.5mm]","left-[43.5mm]","w-[20mm]"],[1,"absolute","top-[193.5mm]","left-[115mm]","w-[20.5mm]"],[1,"absolute","top-[193.5mm]","left-[139.5mm]","w-[22mm]"],[1,"absolute","top-[317.5mm]","left-[60mm]","w-[61mm]"],[1,"absolute","top-[352mm]","left-[35mm]","w-[17mm]","tracking-[0.4em]"],[1,"absolute","top-[352mm]","left-[55mm]","w-[29.8mm]","tracking-[0.5em]"],[1,"absolute","top-[352mm]","left-[87.5mm]","w-[4.5mm]"],[1,"absolute","top-[358.5mm]","left-[20mm]","w-[83mm]"],[1,"absolute","top-[368mm]","left-[44mm]","w-[8.7mm]","tracking-[0.45em]"],[1,"absolute","top-[368mm]","left-[55mm]","w-[8.7mm]","tracking-[0.45em]"],[1,"absolute","top-[368mm]","left-[66.5mm]","w-[17.3mm]","tracking-[0.5em]"],[1,"absolute","top-[358.5mm]","left-[117.5mm]"],[1,"absolute","top-[126mm]","left-[165mm]","w-[8.5mm]","tracking-[0.55em]"],[1,"absolute","top-[126mm]","left-[180mm]","w-[8.5mm]","tracking-[0.55em]"],[1,"absolute","top-[131.5mm]","left-[165mm]","w-[8.5mm]","tracking-[0.55em]"],[1,"absolute","top-[131.5mm]","left-[180mm]","w-[8.5mm]","tracking-[0.55em]"],[1,"absolute","top-[264mm]","left-[17.5mm]","w-[45mm]"],[1,"absolute","top-[264mm]","left-[70mm]","w-[41mm]"],[1,"absolute","top-[264mm]","left-[117.5mm]","w-[37mm]"],[1,"absolute","top-[264mm]","left-[161.5mm]","w-[45mm]"],[1,"absolute","top-[280.5mm]","left-[17mm]","w-[45mm]"],[1,"absolute","top-[280.5mm]","left-[55mm]","w-[45mm]"],[1,"absolute","top-[280.5mm]","left-[97mm]","w-[45mm]"],[1,"absolute","top-[280.5mm]","left-[125mm]","w-[45mm]"],[1,"absolute","top-[280.5mm]","left-[174mm]","w-[45mm]"],["class","absolute top-[270.5mm] left-[46.3mm]",4,"ngIf"],["class","absolute top-[270.5mm] left-[80mm]",4,"ngIf"],[1,"absolute","top-[270.5mm]","left-[115mm]"],[1,"absolute","top-[270.5mm]","left-[46.3mm]"],[1,"absolute","top-[270.5mm]","left-[80mm]"],[1,"absolute","top-[297mm]","left-[15mm]"],[1,"absolute","top-[297mm]","left-[57.7mm]"],[1,"absolute","top-[297mm]","left-[93.5mm]"],[1,"absolute","top-[297mm]","left-[133mm]"],[1,"absolute","top-[297mm]","left-[166.5mm]"],[1,"absolute","top-[302mm]","left-[15mm]"],[1,"absolute","top-[302mm]","left-[57.7mm]"],[1,"absolute","top-[302mm]","left-[93.5mm]"],[1,"absolute","top-[302mm]","left-[133mm]"],[1,"absolute","top-[438.5mm]","left-[12.5mm]"],[1,"absolute","top-[451mm]","left-[113mm]","w-[83.5mm]"],[1,"absolute","top-[456.5mm]","left-[113mm]","w-[83.5mm]"],[1,"absolute","top-[461.5mm]","left-[113mm]","w-[83.5mm]"],[1,"absolute","top-[468mm]","left-[12.5mm]"],[1,"absolute","top-[500mm]","left-[50mm]"],[1,"absolute","top-[500mm]","left-[82mm]"],[1,"absolute","top-[500mm]","left-[117mm]"],[1,"absolute","top-[495mm]","left-[165mm]"],[1,"absolute","top-[520mm]","left-[50mm]"],[1,"absolute","top-[520mm]","left-[82mm]"],[1,"absolute","top-[520mm]","left-[117mm]"],[1,"absolute","top-[512mm]","left-[165mm]"],[1,"absolute","top-[537mm]","left-[148mm]"],[1,"absolute","top-[537mm]","left-[126mm]"],[1,"absolute","top-[537mm]","left-[175mm]"],[1,"absolute","top-[545mm]","left-[148mm]"],[1,"absolute","top-[545mm]","left-[126mm]"],[1,"absolute","top-[545mm]","left-[175mm]"],[1,"border","border-orange-400","bg-orange-50","text-orange-700","rounded-md","m-5","p-3"],[4,"ngFor","ngForOf"],["class","text-sm font-semibold",4,"ngIf"],[1,"text-sm","font-semibold"],[1,"grid","grid-cols-1","my-20"],[1,"flex","justify-center","text-blue-500"],["spin","true",3,"icon"],[1,"flex","justify-center"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5," Claim Form 2 "),e.qZA(),e.TgZ(6,"div")(7,"button",5),e.NdJ("click",function(){return a.submitQue()}),e.YNc(8,F,1,1,"fa-icon",6),e._uU(9),e.qZA(),e.TgZ(10,"button",7),e.NdJ("click",function(){return a.exportP()}),e._UZ(11,"fa-icon",8),e.qZA()()(),e.TgZ(12,"div",9),e._UZ(13,"img",10)(14,"img",11),e.YNc(15,D,9,2,"div",12),e.YNc(16,ae,5,4,"div",13),e.qZA(),e.TgZ(17,"div",14)(18,"button",15),e.NdJ("click",function(){return a.closeModal()}),e._uU(19,"Close"),e.qZA()()()()(),e._UZ(20,"div",16)),2&s&&(e.xp6(7),e.Q6J("disabled",!a.selected_caserate||a.que_form),e.xp6(1),e.Q6J("ngIf",a.que_form),e.xp6(1),e.hij(" ",a.eclaimsForm.value.transmittalNumber?"Update":"Queue"," "),e.xp6(1),e.Q6J("disabled",!a.selected_caserate||a.pdf_exported||a.que_form),e.xp6(1),e.Q6J("icon",a.faFilePdf),e.xp6(4),e.Q6J("ngIf",!a.selected_caserate),e.xp6(1),e.Q6J("ngIf",a.selected_caserate))},dependencies:[m.sg,m.O5,d.BN,l.YN,l.Kr,l.EJ,l.JJ,l.On,m.OU,m.uU,m.Nd]}),n})();var se=p(3146);function le(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.getEncryptedXml())}),e._UZ(1,"fa-icon",17),e._uU(2," Upload Claim "),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",t.is_uploading||!t.show_form||t.show_confirm_form),e.xp6(1),e.Q6J("icon",t.faUpload)}}function ne(i,n){if(1&i&&(e.TgZ(0,"option",25),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.desc)}}function oe(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",18)(1,"div")(2,"select",19),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.doc_type=a)}),e.YNc(3,ne,2,2,"option",20),e.qZA()(),e.TgZ(4,"div",21)(5,"input",22),e.NdJ("change",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.readXML(a.target.files[0]))}),e.qZA()(),e.TgZ(6,"div")(7,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.uploadDocs(a.file_to_upload))}),e._UZ(8,"fa-icon",24),e._uU(9," Upload Document "),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.doc_type),e.xp6(1),e.Q6J("ngForOf",t.doc_list),e.xp6(4),e.Q6J("disabled",!t.file_to_upload||!t.doc_type||t.is_uploading||!t.show_form),e.xp6(1),e.Q6J("icon",t.is_uploading?t.faCircleNotch:t.faFileArrowUp)("spin",t.is_uploading)}}function re(i,n){if(1&i&&(e.TgZ(0,"tr",33)(1,"td",34),e._uU(2),e.qZA(),e.TgZ(3,"td",35),e._uU(4),e.qZA(),e._UZ(5,"td",36),e.qZA()),2&i){const t=n.$implicit,s=e.oxw(3);e.xp6(2),e.hij(" ",t.doc_type_code," "),e.xp6(2),e.hij(" ",s.getFileName(t.doc_url)," ")}}function me(i,n){if(1&i&&(e.TgZ(0,"tbody"),e.YNc(1,re,6,2,"tr",32),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.uploaded_docs)}}function pe(i,n){if(1&i&&(e.TgZ(0,"tbody")(1,"tr")(2,"td",37)(3,"div",38)(4,"div",39),e._UZ(5,"fa-icon",40),e.qZA(),e.TgZ(6,"div",41),e._uU(7," Fetching uploaded documents... "),e.qZA()()()()()),2&i){const t=e.oxw(2);e.xp6(5),e.Q6J("icon",t.faCircleNotch)}}function de(i,n){if(1&i&&(e.TgZ(0,"div",26)(1,"table",27)(2,"thead",28)(3,"tr")(4,"th",29),e._uU(5,"Document Type"),e.qZA(),e.TgZ(6,"th",30),e._uU(7,"Document URL"),e.qZA()()(),e.YNc(8,me,2,1,"tbody",31),e.YNc(9,pe,8,1,"tbody",31),e.qZA()()),2&i){const t=e.oxw();e.xp6(8),e.Q6J("ngIf",t.show_form),e.xp6(1),e.Q6J("ngIf",!t.show_form)}}function ce(i,n){1&i&&(e.TgZ(0,"span"),e._uU(1,","),e.qZA())}function _e(i,n){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,ce,2,0,"span",31),e.qZA()),2&i){const t=n.$implicit,s=n.last;e.xp6(1),e.hij(" ",t.doc_type_code,""),e.xp6(1),e.Q6J("ngIf",!s)}}function ue(i,n){if(1&i&&e._UZ(0,"fa-icon",48),2&i){const t=e.oxw(2);e.Q6J("icon",t.faCircleNotch)}}function ge(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",42)(1,"div",43),e._uU(2," Are you sure all required documents have been uploaded and want to proceed on uploading this claim? "),e.qZA(),e.TgZ(3,"div",43)(4,"strong"),e._uU(5,"Uploaded documents:\xa0"),e.qZA(),e.YNc(6,_e,3,2,"span",12),e.qZA(),e.TgZ(7,"div",44)(8,"div")(9,"button",45),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.confirmUpload())}),e._uU(10," Cancel "),e.qZA(),e.TgZ(11,"button",46),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.uploadClaim())}),e.YNc(12,ue,1,1,"fa-icon",47),e._uU(13),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngForOf",t.uploaded_docs),e.xp6(3),e.Q6J("disabled",t.is_uploading_claim),e.xp6(2),e.Q6J("disabled",t.is_uploading_claim),e.xp6(1),e.Q6J("ngIf",t.is_uploading_claim),e.xp6(1),e.hij(" ",t.is_uploading_claim?"Uploading":"Upload"," ")}}function fe(i,n){if(1&i&&(e.TgZ(0,"div",49)(1,"div",39),e._UZ(2,"fa-icon",40),e.qZA(),e.TgZ(3,"div",41),e._uU(4," Retrieving XML... "),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("icon",t.faCircleNotch)}}function he(i,n){1&i&&(e.TgZ(0,"span"),e._uU(1,","),e.qZA())}function be(i,n){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,he,2,0,"span",31),e.qZA()),2&i){const t=n.$implicit,s=n.last;e.xp6(1),e.hij(" ",t,""),e.xp6(1),e.Q6J("ngIf",!s)}}function xe(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-delete-item",50),e.NdJ("toggleModal",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.toggleModal(a))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("url",t.delete_url)("delete_id",t.selected_doc_id)("delete_desc",t.delete_desc)}}let ye=(()=>{var i;class n{confirmUpload(){this.show_confirm_form=!this.show_confirm_form}getFileName(s){return s.split("/")[6]}getEncryptedXml(){this.is_retrieving_xml=!0,this.http.post("eclaims/create-enc-xml",{pHospitalTransmittalNo:this.selected_pHospitalTransmittalNo,program_desc:this.program_name}).subscribe({next:a=>{this.is_retrieving_xml=!1,this.confirmUpload(),console.log(a),this.encryptedXml=a.xml},error:a=>console.log(a)})}uploadClaim(){this.is_uploading_claim=!0,this.http.post("eclaims/upload-claim",{encryptedXml:this.encryptedXml,program_code:"cc"!==this.program_name?this.program_name:"mc"}).subscribe({next:a=>{console.log(a),this.updateUploadData(a)},error:a=>{console.log(a),this.is_uploading_claim=!1,this.toastr.error(a.error.message,"Upload Claim",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0})}})}updateUploadData(s){let a={pHospitalTransmittalNo:this.selected_pHospitalTransmittalNo,pTransmissionControlNumber:s.pTransmissionControlNumber,pReceiptTicketNumber:s.pReceiptTicketNumber,pStatus:"IN PROCESS",pTransmissionDate:(0,m.p6)(s.pTransmissionDate,"yyyy-MM-dd","en","Asia/Manila"),pTransmissionTime:(0,m.p6)(new Date,"HH:mm:ss","en","Asia/Manila"),isSuccess:"Y",program_desc:this.program_name};console.log(a),this.http.post("eclaims/eclaims-upload",a).subscribe({next:o=>{console.log(o),this.ticket_number=o.data.pReceiptTicketNumber,this.toastr.success("Ticket Number: "+this.ticket_number,"Claim Uploaded!",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0}),this.is_uploading_claim=!1,this.closeModal()},error:o=>console.log(o)})}deleteDocs(s){}loadDocs(){this.show_form=!1,this.http.get("eclaims/eclaims-doc",{params:{pHospitalTransmittalNo:this.selected_pHospitalTransmittalNo}}).subscribe({next:a=>{console.log(a),this.uploaded_docs=a.data,this.show_form=!0},error:a=>console.log(a)})}uploadDocs(s){this.is_uploading=!0;const a=new FormData;this.file_to_upload.size>2097152?(this.is_uploading=!1,this.toastr.error("File size exceeds the allowed limit 2MB","File Upload",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0})):(a.append("doc",this.file_to_upload),a.append("doc_type_code",this.doc_type),a.append("pHospitalTransmittalNo",this.selected_pHospitalTransmittalNo),a.append("program_desc",this.program_name),a.append("patient_id",this.patient.id),this.http.post("eclaims/eclaims-doc",a).subscribe({next:o=>{console.log(o),this.loadDocs(),this.resetForm(),this.is_uploading=!1,this.toastr.success("Successfully uploaded.","EClaims Docs")},error:o=>console.log(o)}))}resetForm(){this.doc_type=null,this.file_to_upload=null}readXML(s){this.file_to_upload=s}getLibraries(){this.http.get("libraries/eclaims-doc-type").subscribe({next:s=>{console.log(s),this.doc_list=s.data,this.loadDocs()},error:s=>console.log(s)})}closeModal(){this.modalToggle.emit("upload-claims")}toggleModal(s,a){a&&console.log(a),this.selected_doc_id=a?a.id:null,this.delete_desc=this.delete_desc+" "+(a?a.doc_type_code:""),this.modals[s]=!this.modals[s]}constructor(s,a){this.http=s,this.toastr=a,this.modalToggle=new e.vpe,this.faPenToSquare=w.Yai,this.faUpload=r.cf$,this.faTrash=r.$aW,this.faFileArrowUp=r.PQh,this.faCircleNotch=r.IJ7,this.file_to_upload=null,this.doc_type=null,this.is_uploading=!1,this.uploading_claim=!1,this.modals=[],this.arr_CR4652=["CF2","CSF","CF3","SOA w/ CTC"],this.arr_CR4651=["CF2","CSF","CF3","SOA w/ CTC"],this.arr_CR4683=["CF2","CSF","CF3","SOA w/ CTC","Pink Card"],this.arr_CR4684=["CF2","CSF","CF3","SOA w/ CTC","Pink Card"],this.arr_CR4687=["CF2","CSF + NBS Sticker","PMRF","SOA w/ CTC","Birth Certificate"],this.arr_CR4656=["CF2","CSF","Treatment Card","SOA w/ CTC"],this.arr_CR4657=["CF2","CSF","Treatment Card","SOA w/ CTC"],this.arr_CR4658=["CF2","CSF","Treatment Card","SOA w/ CTC","Summary Report"],this.arr_CR4685=["CF2","CSF + Serial Sticker","SOA w/ CTC"],this.arr_CR0385=["CF2","CSF + Serial Number of Box","SOA w/ CTC"],this.arr_CR0456=["CF2","CSF","SOA"],this.arr_CR4655=["CF2","CSF","Smear Test for OMP"],this.is_retrieving_xml=!1,this.confirm_upload=!1,this.show_confirm_form=!1,this.is_uploading_claim=!1,this.show_ticket_number=!1,this.show_form=!1,this.delete_url="eclaims/eclaims-doc/",this.delete_desc="eClaims Document"}ngOnInit(){this.getLibraries(),console.log(this.selected_pHospitalTransmittalNo),console.log(this.caserate_code),this.required_docs=this["arr_"+this.caserate_code],console.log(this.required_docs)}}return(i=n).\u0275fac=function(s){return new(s||i)(e.Y36(y.O),e.Y36(f._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-upload-claims"]],inputs:{selected_pHospitalTransmittalNo:"selected_pHospitalTransmittalNo",program_name:"program_name",patient:"patient",caserate_code:"caserate_code",selected_ticket_number:"selected_ticket_number"},outputs:{modalToggle:"modalToggle"},decls:22,vars:8,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","55"],[1,"relative","p-4","w-full","max-w-4xl","h-full","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],["type","button","class","disabled:bg-gray-400 bg-white px-3 py-1 text-blue-500 rounded-md",3,"disabled","click",4,"ngIf"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],["class","grid grid-cols-3 gap-x-4 mx-5 my-2",4,"ngIf"],["class","shadow-md sm:rounded-lg m-4",4,"ngIf"],["class","grid grid-cols-1 m-8 rounded-md border border-rose-500 bg-rose-100 text-rose-700 p-5",4,"ngIf"],["class","grid grid-cols-1 mt-16",4,"ngIf"],[1,"flex","justify-between","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],[4,"ngFor","ngForOf"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-300","rounded","text-sm","font-medium","px-6","py-2.5","transition","duration-150","ease-in-out","transform","hover:scale-110",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[3,"url","delete_id","delete_desc","toggleModal",4,"ngIf"],["type","button",1,"disabled:bg-gray-400","bg-white","px-3","py-1","text-blue-500","rounded-md",3,"disabled","click"],[1,"pr-2",3,"icon"],[1,"grid","grid-cols-3","gap-x-4","mx-5","my-2"],["id","suffix_name","name","suffix_name",1,"input","mt-5",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","justify-center","mx-auto","py-5"],["type","file","id","formFile",1,"form-control","w-full","px-3","py-1.5","text-base","font-normal","text-gray-700","bg-white","bg-clip-padding","border","border-solid","border-gray-300","rounded-lg","transition","ease-in-out","m-0","focus:text-gray-700","focus:bg-white","focus:border-blue-600","focus:outline-none",3,"change"],["type","button",1,"mt-5","disabled:bg-gray-400","py-2","px-3","mb-5","bg-blue-500","text-white","rounded-lg","text-sm",3,"disabled","click"],[3,"icon","spin"],[3,"value"],[1,"shadow-md","sm:rounded-lg","m-4"],[1,"table-fixed","w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6","text-center","w-3/12"],["scope","col",1,"py-3","px-6","text-center","w-7/12"],[4,"ngIf"],["class","bg-white border-b",4,"ngFor","ngForOf"],[1,"bg-white","border-b"],[1,"py-4","px-6","text-center","w-3/12"],[1,"py-4","px-6","w-7/12","whitespace-normal"],[1,"py-4","px-6","text-center","w-2/12"],["colspan","3"],[1,"grid","grid-cols-1","my-14"],[1,"flex","justify-center","text-blue-500"],["spin","true",3,"icon"],[1,"flex","justify-center"],[1,"grid","grid-cols-1","m-8","rounded-md","border","border-rose-500","bg-rose-100","text-rose-700","p-5"],[1,"flex","mb-5"],[1,"flex","justify-end"],["type","button",1,"btn-save","bg-gray-400",3,"disabled","click"],["type","button",1,"btn-save","bg-rose-500","ml-5",3,"disabled","click"],["spin","true","class","pr-2",3,"icon",4,"ngIf"],["spin","true",1,"pr-2",3,"icon"],[1,"grid","grid-cols-1","mt-16"],[3,"url","delete_id","delete_desc","toggleModal"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5),e.qZA(),e.TgZ(6,"div"),e.YNc(7,le,3,2,"button",5),e.qZA()(),e.TgZ(8,"div",6),e.YNc(9,oe,10,5,"div",7),e.YNc(10,de,10,2,"div",8),e.YNc(11,ge,14,5,"div",9),e.YNc(12,fe,5,1,"div",10),e.qZA(),e.TgZ(13,"div",11)(14,"div")(15,"strong"),e._uU(16,"Required documents:"),e.qZA(),e.YNc(17,be,3,2,"span",12),e.qZA(),e.TgZ(18,"button",13),e.NdJ("click",function(){return a.closeModal()}),e._uU(19,"Close"),e.qZA()()()()(),e._UZ(20,"div",14),e.YNc(21,xe,1,3,"app-delete-item",15)),2&s&&(e.xp6(5),e.hij(" CLAIM: ",a.selected_pHospitalTransmittalNo," "),e.xp6(2),e.Q6J("ngIf",!a.selected_ticket_number),e.xp6(2),e.Q6J("ngIf",!a.is_retrieving_xml&&!a.show_confirm_form),e.xp6(1),e.Q6J("ngIf",!a.is_retrieving_xml&&!a.show_confirm_form),e.xp6(1),e.Q6J("ngIf",!a.is_retrieving_xml&&a.show_confirm_form),e.xp6(1),e.Q6J("ngIf",a.is_retrieving_xml),e.xp6(5),e.Q6J("ngForOf",a.required_docs),e.xp6(4),e.Q6J("ngIf",a.modals["delete-item"]))},dependencies:[m.sg,m.O5,d.BN,l.YN,l.Kr,l.EJ,l.JJ,l.On,se.N]}),n})();function Ce(i,n){1&i&&(e.TgZ(0,"span",18),e._uU(1," There are no credential for the selected program "),e.qZA())}function Te(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,o=e.oxw(2);return e.KtG(o.toggleModal("upload-claims",a))}),e._UZ(1,"fa-icon",28),e._uU(2),e.qZA()}if(2&i){const t=e.oxw().$implicit,s=e.oxw(2);e.xp6(1),e.Q6J("icon",s.faUpload),e.xp6(1),e.hij(" ",t.pReceiptTicketNumber?"Reupload Docs":"Upload Claim"," ")}}function ve(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,o=e.oxw(2);return e.KtG(o.reopenCf2("cf2",a))}),e._UZ(1,"fa-icon",28),e._uU(2," Update CF2 XML "),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("icon",t.faPenToSquare)}}function Ae(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,o=e.oxw(2);return e.KtG(o.checkSeries(a))}),e._UZ(1,"fa-icon",31),e._uU(2," Get Series Lhio "),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("disabled",t.is_refreshing),e.xp6(1),e.Q6J("icon",t.is_refreshing?t.faRotate:t.faReceipt)("spin",t.is_refreshing)}}function Ze(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,o=e.oxw(2);return e.KtG(o.getClaimStatus(a,a.pStatus))}),e._UZ(1,"fa-icon",31),e._uU(2),e.qZA()}if(2&i){const t=e.oxw().$implicit,s=e.oxw(2);e.Q6J("disabled",s.is_refreshing),e.xp6(1),e.Q6J("icon",s.is_refreshing?s.faRotate:s.faClipboardQuestion)("spin",s.is_refreshing),e.xp6(1),e.hij(" Check ","DENIED"===t.pStatus?"Reason":"Status"," ")}}function we(i,n){if(1&i&&(e.TgZ(0,"tr",20)(1,"td"),e._uU(2),e._UZ(3,"br"),e._uU(4),e.qZA(),e.TgZ(5,"td",21),e._uU(6),e._UZ(7,"br"),e._uU(8),e._UZ(9,"br"),e._uU(10),e.qZA(),e.TgZ(11,"td",22),e._uU(12),e.qZA(),e.TgZ(13,"td",22),e._uU(14),e.qZA(),e.TgZ(15,"td",22),e._uU(16),e.qZA(),e.TgZ(17,"td",23),e.YNc(18,Te,3,2,"button",24),e.YNc(19,ve,3,1,"button",25),e.YNc(20,Ae,3,3,"button",26),e.YNc(21,Ze,3,4,"button",26),e.qZA()()),2&i){const t=n.$implicit;let s,a,o,u,T;e.xp6(2),e.hij(" ",t.caserate.caserate_code," "),e.xp6(2),e.hij(" ",t.caserate.code," "),e.xp6(2),e.hij(" 1. ",t.pHospitalTransmittalNo," "),e.xp6(2),e.hij(" 2. ",null!==(s=t.pReceiptTicketNumber)&&void 0!==s?s:"-"," "),e.xp6(2),e.hij(" 3. ",null!==(a=t.pClaimSeriesLhio)&&void 0!==a?a:"-"," "),e.xp6(2),e.hij(" ",null!==(o=t.pTransmissionDate)&&void 0!==o?o:"-"," "),e.xp6(2),e.hij(" ",null!==(u=t.pStatus)&&void 0!==u?u:"IN QUEUE"," "),e.xp6(2),e.hij(" ",null!==(T=t.denied_reason)&&void 0!==T?T:"-"," "),e.xp6(2),e.Q6J("ngIf","DENIED"!==t.pStatus&&"WITH CHEQUE"!==t.pStatus),e.xp6(1),e.Q6J("ngIf",!t.pReceiptTicketNumber),e.xp6(1),e.Q6J("ngIf",t.pReceiptTicketNumber&&!t.pClaimSeriesLhio),e.xp6(1),e.Q6J("ngIf",t.pClaimSeriesLhio&&!t.denied_reason)}}function Me(i,n){1&i&&(e.TgZ(0,"tr")(1,"td",32),e._uU(2," No record found "),e.qZA()())}function Ue(i,n){if(1&i&&(e.TgZ(0,"tbody"),e.YNc(1,we,22,12,"tr",19),e.YNc(2,Me,3,0,"tr",13),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.eclaims_list),e.xp6(1),e.Q6J("ngIf",0===t.eclaims_list.length)}}function qe(i,n){if(1&i&&(e.TgZ(0,"tbody")(1,"tr")(2,"td",33)(3,"div",34)(4,"div",35),e._UZ(5,"fa-icon",36),e.qZA(),e.TgZ(6,"div",37),e._uU(7," Fetching claims... "),e.qZA()()()()()),2&i){const t=e.oxw();e.xp6(5),e.Q6J("icon",t.faCircleNotch)}}function Ne(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-pbef",38),e.NdJ("toggleModal",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.toggleModal(a))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("patient",t.patient)("patient_philhealth",t.patient_philhealth)("program_name",t.program_name)("program_creds",t.program_creds)("selected_case",t.selected_case)("caserate_list",t.caserate_list)}}function Ie(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-cf1",39),e.NdJ("toggleModal",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.toggleModal(a))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("patient",t.patient)("patient_philhealth",t.patient_philhealth)("program_creds",t.program_creds)}}function ke(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-cf2",40),e.NdJ("toggleModal",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.toggleModal(a))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("patient",t.patient)("program_name",t.program_name)("program_id",t.program_id)("caserate_list",t.caserate_list)("selected_case",t.selected_case)("selected_transmittalNumber",t.selected_transmittalNumber)}}function Ee(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-upload-claims",41),e.NdJ("modalToggle",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.toggleModal(a))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("patient",t.patient)("program_name",t.program_name)("selected_pHospitalTransmittalNo",t.selected_pHospitalTransmittalNo)("caserate_code",t.selected_caserate_code)("selected_ticket_number",t.selected_ticket_number)}}let Fe=(()=>{var i;class n{getEclaimsList(){this.show_form=!1,this.http.get("eclaims/eclaims-upload",{params:{patient_id:this.patient.id,program_desc:this.program_name}}).subscribe({next:a=>{if(this.eclaims_list=a.data,Object.keys(this.eclaims_list).length>0){let o=[];Object.entries(this.eclaims_list).forEach(([u,T],b)=>{o.push(T.caserate.id)}),this.getCaserate(o)}else this.getCaserate()},error:a=>console.log(a)})}getCaserate(s){console.log(s);let a={program_id:this.program_id,program_desc:this.program_name};a.eclaims_id_arr=s?s.join(","):null,this.http.get("eclaims/eclaims-caserate",{params:a}).subscribe({next:o=>{this.caserate_list=o.data,this.show_cf2=Object.keys(this.caserate_list).length>0,this.show_form=!0},error:o=>console.log(o)})}refreshClaims(){this.is_refreshing=!0}checkSeries(s){console.log(s),this.is_refreshing=!0,this.http.post("eclaims/get-claims-map",{pReceiptTicketNumber:s.pReceiptTicketNumber,program_code:"cc"!==this.program_name?this.program_name:"mc"}).subscribe({next:o=>{console.log(o),s.pClaimSeriesLhio=o.MAPPING.pClaimSeriesLhio,s.pStatus="IN PROCESS",this.updateUploadClaim(s)},error:o=>{console.log(o),this.is_refreshing=!1,this.toastr.error(o.error.message,"Series LHIO",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0})}})}getClaimStatus(s,a){this.is_refreshing=!0,this.http.post("eclaims/get-claim-status",{series_lhio:s.pClaimSeriesLhio,program_code:"cc"!==this.program_name?this.program_name:"mc"}).subscribe({next:u=>{this.iterateMessage(u,s,a)},error:u=>{this.is_refreshing=!1,this.http.showError(u.error.message,"Claims Status")}})}iterateMessage(s,a,o){let u;switch(console.log(s),a.pStatus=s.CLAIM.pStatus,o){case"DENIED":a.denied_reason=s.CLAIM.DENIED.REASON.pReason,u="As of: "+s.pAsOf+" "+s.pAsOfTime+"<br />"+s.CLAIM.DENIED.REASON.pReason;break;case"WITH CHEQUE":console.log(s.CLAIM.PAYMENT.PAYEE),u="As of: "+s.pAsOf+" "+s.pAsOfTime,Object.entries(s.CLAIM.PAYMENT.PAYEE).forEach(([T,b],Z)=>{console.log(b),u="As of: "+s.pAsOf+" "+s.pAsOfTime,u+="<br />Voucher No: "+b.pVoucherNo,u+="<br />Check Amount: "+b.pCheckAmount});default:u="As of: "+s.pAsOf+" "+s.pAsOfTime}this.showInfoToastr(u,s.CLAIM.pStatus),this.updateUploadClaim(a),this.is_refreshing=!1}showInfoToastr(s,a){this.toastr.info(s,a,{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0,enableHtml:!0})}updateUploadClaim(s){this.http.post("eclaims/eclaims-upload",s).subscribe({next:a=>{this.is_refreshing=!1},error:a=>{console.log(a)}})}getCreds(){this.http.get("settings/philhealth-credentials",{params:{"filter[program_code]":"cc"!==this.program_name?this.program_name:"mc"}}).subscribe({next:a=>{a.data[0]&&(this.program_creds=a.data[0]),this.getEclaimsList()},error:a=>console.log(a)})}reopenCf2(s,a){this.caserate_list=[a.caserate],this.selected_transmittalNumber=a.pHospitalTransmittalNo,this.modal[s]=!this.modal[s]}toggleModal(s,a){console.log(a),this.selected_pHospitalTransmittalNo=a?.pHospitalTransmittalNo??null,this.selected_caserate_code=a?.caserate.caserate_code??null,this.selected_ticket_number=a?.pReceiptTicketNumber??null,this.modal[s]=!this.modal[s],"cf2"===s&&!this.modal.cf2&&this.getEclaimsList(),"upload-claims"===s&&!this.modal["upload-claims"]&&this.getEclaimsList()}constructor(s,a){this.http=s,this.toastr=a,this.faRotate=r.go9,this.faUpload=r.cf$,this.faCircleNotch=r.IJ7,this.faReceipt=r.dLy,this.faClipboardQuestion=r.irx,this.faPenToSquare=r.Yai,this.pending_list=[],this.modal=[],this.is_refreshing=!1,this.show_form=!1,this.show_cf2=!1}ngOnInit(){this.patient=this.http.getPatientInfo(),this.patient_philhealth=this.patient.philhealthLatest,this.patient_philhealth&&this.getCreds()}}return(i=n).\u0275fac=function(s){return new(s||i)(e.Y36(y.O),e.Y36(f._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-eclaims"]],inputs:{program_id:"program_id",program_name:"program_name",selected_case:"selected_case"},decls:40,vars:9,consts:[[1,"mb-16","w-full"],[1,"block","shadow","p-4","mt-4","rounded-xl","text-gray-600"],[1,"text-sky-500","font-bold","flex","justify-between","py-2"],["class","flex rounded-md border border-yellow-500 bg-yellow-100 text-yellow-700 text-sm font-normal p-3",4,"ngIf"],[1,"text-sm","font-normal"],["type","button",1,"w-32","px-3","py-2","rounded-md","bg-blue-500","text-sm","text-white","ml-auto","mr-1","disabled:bg-gray-400",3,"disabled","click"],[1,"border","border-slate-200","shadow-md","rounded-xl"],[1,"w-full","bg-blue-500","text-white","rounded-t-xl","p-3","font-semibold","flex","justify-between"],[1,"w-full","p-5","overflow-x-auto"],[1,"table-fixed","w-full","text-sm","text-left","text-gray-500"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700"],["scope","col",1,"py-3","px-3"],["scope","col",1,"py-3","w-1/5"],[4,"ngIf"],[3,"patient","patient_philhealth","program_name","program_creds","selected_case","caserate_list","toggleModal",4,"ngIf"],[3,"patient","patient_philhealth","program_creds","toggleModal",4,"ngIf"],[3,"patient","program_name","program_id","caserate_list","selected_case","selected_transmittalNumber","toggleModal",4,"ngIf"],[3,"patient","program_name","selected_pHospitalTransmittalNo","caserate_code","selected_ticket_number","modalToggle",4,"ngIf"],[1,"flex","rounded-md","border","border-yellow-500","bg-yellow-100","text-yellow-700","text-sm","font-normal","p-3"],["class","bg-white border-b last:border-0",4,"ngFor","ngForOf"],[1,"bg-white","border-b","last:border-0"],[1,"py-4","px-3","text-xs"],[1,"py-4","px-3"],[1,"py-4","px-3","text-center","grid","grid-cols-1"],["class","bg-blue-500 text-white rounded-md p-0.5 mb-3 disabled:opacity-75","type","button",3,"click",4,"ngIf"],["class","bg-rose-500 text-white rounded-md p-0.5 mb-3 disabled:opacity-75","type","button",3,"click",4,"ngIf"],["class","bg-green-500 text-white rounded-md p-0.5 mb-3 disabled:opacity-75","type","button",3,"disabled","click",4,"ngIf"],["type","button",1,"bg-blue-500","text-white","rounded-md","p-0.5","mb-3","disabled:opacity-75",3,"click"],[3,"icon"],["type","button",1,"bg-rose-500","text-white","rounded-md","p-0.5","mb-3","disabled:opacity-75",3,"click"],["type","button",1,"bg-green-500","text-white","rounded-md","p-0.5","mb-3","disabled:opacity-75",3,"disabled","click"],[3,"icon","spin"],["colspan","6",1,"text-center","italic"],["colspan","7"],[1,"grid","grid-cols-1","my-16"],[1,"flex","justify-center","text-blue-500"],["spin","true",3,"icon"],[1,"flex","justify-center"],[3,"patient","patient_philhealth","program_name","program_creds","selected_case","caserate_list","toggleModal"],[3,"patient","patient_philhealth","program_creds","toggleModal"],[3,"patient","program_name","program_id","caserate_list","selected_case","selected_transmittalNumber","toggleModal"],[3,"patient","program_name","selected_pHospitalTransmittalNo","caserate_code","selected_ticket_number","modalToggle"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2)(3,"div"),e.YNc(4,Ce,2,0,"span",3),e.qZA(),e.TgZ(5,"div",4)(6,"button",5),e.NdJ("click",function(){return a.toggleModal("pbef")}),e._uU(7," PBEF "),e.qZA(),e.TgZ(8,"button",5),e.NdJ("click",function(){return a.toggleModal("cf2")}),e._uU(9," CF2 "),e.qZA()()(),e.TgZ(10,"div",6)(11,"div",7)(12,"span"),e._uU(13,"Eclaims"),e.qZA()(),e.TgZ(14,"div",8)(15,"table",9)(16,"thead",10)(17,"tr")(18,"th",11),e._uU(19,"Caserate"),e.qZA(),e.TgZ(20,"th",12),e._uU(21," 1. Transmittal Number "),e._UZ(22,"br"),e._uU(23," 2. Ticket Number "),e._UZ(24,"br"),e._uU(25," 3. Claim Series Lhio "),e.qZA(),e.TgZ(26,"th",11),e._uU(27,"Transmittal Date"),e.qZA(),e.TgZ(28,"th",11),e._uU(29,"Claim Status"),e.qZA(),e.TgZ(30,"th",11),e._uU(31,"Details"),e.qZA(),e.TgZ(32,"th",11),e._uU(33,"Action"),e.qZA()()(),e.YNc(34,Ue,3,2,"tbody",13),e.YNc(35,qe,8,1,"tbody",13),e.qZA()()()()(),e.YNc(36,Ne,1,6,"app-pbef",14),e.YNc(37,Ie,1,3,"app-cf1",15),e.YNc(38,ke,1,6,"app-cf2",16),e.YNc(39,Ee,1,5,"app-upload-claims",17)),2&s&&(e.xp6(4),e.Q6J("ngIf",a.show_form&&!a.program_creds),e.xp6(2),e.Q6J("disabled",!a.program_creds||0===(null==a.caserate_list?null:a.caserate_list.length)),e.xp6(2),e.Q6J("disabled",!a.program_creds||0===(null==a.caserate_list?null:a.caserate_list.length)),e.xp6(26),e.Q6J("ngIf",a.show_form),e.xp6(1),e.Q6J("ngIf",!a.show_form),e.xp6(1),e.Q6J("ngIf",a.modal.pbef),e.xp6(1),e.Q6J("ngIf",a.modal.cf1),e.xp6(1),e.Q6J("ngIf",a.modal.cf2),e.xp6(1),e.Q6J("ngIf",a.modal["upload-claims"]))},dependencies:[m.sg,m.O5,d.BN,C,k,ie,ye]}),n})()},8048:(U,A,p)=>{p.d(A,{q:()=>v});var r=p(6814),e=p(5597),y=p(6903),f=p(6223),m=p(2982),d=p(4504),c=p(607),l=p(3146),h=p(5879);let v=(()=>{var x;class g{}return(x=g).\u0275fac=function(C){return new(C||x)},x.\u0275mod=h.oAB({type:x}),x.\u0275inj=h.cJS({imports:[r.ez,e.uH,y.X,f.UX,f.u5,m.Tm,d.K,c.a,l.N]}),g})()},3146:(U,A,p)=>{p.d(A,{N:()=>l});var r=p(5879),e=p(6223),y=p(5597),f=p(590),m=p(265),d=p(2425);const c=["confirmCode"];let l=(()=>{var h;class v{generateCode(){this.is_loading=!1,this.confirmation_code=null,this.confirm_code=Math.floor(1e3*Math.random()).toString().padStart(4,"0")}onSubmit(){this.is_loading=!0,this.confirm_code===this.confirmation_code?this.http.delete(this.url,this.delete_id).subscribe({next:()=>{this.is_loading=!1,this.toastr.error("Record was deleted!"),this.closeModal()},error:g=>{console.log(g),this.is_loading=!1,this.generateCode()}}):(this.generateCode(),this.toastr.info("Code mismatch, please try again","Incorrect Code"))}closeModal(){this.toggleModal.emit("delete-item")}constructor(g,_){this.http=g,this.toastr=_,this.toggleModal=new r.vpe,this.faTrash=f.$aW,this.confirm_code="0000",this.is_loading=!1}ngOnChanges(g){this.generateCode()}ngAfterViewInit(){this.inputElement.nativeElement.focus()}}return(h=v).\u0275fac=function(g){return new(g||h)(r.Y36(m.O),r.Y36(d._W))},h.\u0275cmp=r.Xpm({type:h,selectors:[["app-delete-item"]],viewQuery:function(g,_){if(1&g&&r.Gf(c,5),2&g){let C;r.iGM(C=r.CRH())&&(_.inputElement=C.first)}},inputs:{url:"url",delete_id:"delete_id",delete_desc:"delete_desc"},outputs:{toggleModal:"toggleModal"},standalone:!0,features:[r.TTD,r.jDz],decls:29,vars:8,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-red-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"flex","item-start","flex-wrap","pb-5"],[1,"grid","grid-cols-3","px-5","py-5","mt-10","mx-10","w-full","bg-red-50","rounded-lg","text-center"],[1,"col-span-3","text-left","mb-2","pb-2","border-b","border-slate-200"],[1,"col-span-1","text-sm","px-5","py-2","mt-2"],[1,"block","mb-3"],[1,"font-bold","text-2xl","select-none"],["for","confirmCode"],["name","confirmCode","type","text",1,"mt-2","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","pl-3","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModel","keyup.enter","ngModelChange"],["confirmCode",""],[1,"col-span-1","mt-11"],["type","button",1,"my-auto","text-white","bg-red-500","enabled:hover:ring-2","enabled:focus:outline-none","enabled:hover:ring-red-300","disabled:bg-gray-300","font-medium","rounded","text-sm","px-6","py-2.5","text-center","transition","duration-150","ease-in-out",3,"disabled","click"],[1,"mx-0","my-0","text-white",3,"icon"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-200","rounded","text-sm","font-medium","my-2","px-6","py-2.5","transition","duration-150","ease-in-out",3,"disabled","click"],[1,"opacity-50","fixed","inset-0","z-[59]","bg-black"]],template:function(g,_){1&g&&(r.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),r._uU(5),r.qZA()(),r.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),r._uU(10),r.qZA(),r.TgZ(11,"div",9)(12,"span",10),r._uU(13,"Delete Code"),r.qZA(),r.TgZ(14,"span",11),r._uU(15),r.qZA()(),r.TgZ(16,"div",9)(17,"label",12),r._uU(18,"Enter Code"),r.qZA(),r.TgZ(19,"input",13,14),r.NdJ("keyup.enter",function(){return _.onSubmit()})("ngModelChange",function(w){return _.confirmation_code=w}),r.qZA()(),r.TgZ(21,"div",15)(22,"button",16),r.NdJ("click",function(){return _.onSubmit()}),r._UZ(23,"fa-icon",17),r._uU(24," Delete "),r.qZA()()()()(),r.TgZ(25,"div",18)(26,"button",19),r.NdJ("click",function(){return _.closeModal()}),r._uU(27,"Cancel"),r.qZA()()()()(),r._UZ(28,"div",20)),2&g&&(r.xp6(5),r.AsE(" Delete ",_.delete_desc,": ",_.delete_id," "),r.xp6(5),r.hij(" Your are about to delete a ",_.delete_desc," record for this patient. Please enter the generated delete code in order to proceed. "),r.xp6(5),r.Oqu(_.confirm_code),r.xp6(4),r.Q6J("ngModel",_.confirmation_code),r.xp6(3),r.Q6J("disabled",!_.confirmation_code||_.is_loading),r.xp6(1),r.Q6J("icon",_.faTrash),r.xp6(3),r.Q6J("disabled",_.is_loading))},dependencies:[y.uH,y.BN,e.u5,e.Fj,e.JJ,e.On],changeDetection:0}),v})()},279:(U,A,p)=>{p.d(A,{F:()=>l});var r=p(6814),e=p(5879),y=p(6223),f=p(5597),m=p(265),d=p(3602),c=p(2425);let l=(()=>{var h;class v{onSubmit(){let g;this.is_saving=!0,g=this.consult_date&&this.pt_group?{patient_id:this.patient_id,consult_date:this.consult_date,pt_group:this.pt_group,consult_done:!0}:{},this.http.update("consultation/records/",this.consult_id,g).subscribe({next:_=>{console.log(_),this.is_saving=!1,this.toastr.info("Visit was ended"),this.router.navigate(["/patient/itr",{id:this.patient_id}])},error:_=>console.log(_)})}constructor(g,_,C){this.http=g,this.router=_,this.toastr=C,this.toggleModal=new e.vpe,this.is_saving=!1}closeModal(){this.toggleModal.emit("end_visit")}}return(h=v).\u0275fac=function(g){return new(g||h)(e.Y36(m.O),e.Y36(d.F0),e.Y36(c._W))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-end-visit"]],inputs:{consult_id:"consult_id",consult_date:"consult_date",patient_id:"patient_id",pt_group:"pt_group"},outputs:{toggleModal:"toggleModal"},standalone:!0,features:[e.jDz],decls:20,vars:5,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"h-40"],[1,"flex","item-start","flex-wrap","pb-5"],[1,"grid","grid-cols-3","px-3","py-3","mt-10","mx-10","w-full","rounded-lg","text-center"],[1,"col-span-3","text-left","mb-2","pb-2","border-b","border-slate-200","font-semibold","text-lg"],[1,"col-span-3","text-left","mb-2","pb-2","text-sm"],[1,"flex","justify-end","py-2","px-5","space-x-4","rounded-b"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-300","rounded","text-sm","font-medium","my-2","px-6","py-2.5","transition","duration-150","ease-in-out",3,"click"],["type","button",1,"text-white","bg-rose-500","enabled:hover:ring-2","enabled:focus:outline-none","enabled:hover:ring-rose-300","disabled:opacity-75","font-medium","rounded","text-sm","my-2","px-6","py-2.5","text-center","transition","duration-150","ease-in-out",3,"disabled","click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"]],template:function(g,_){1&g&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5," End Visit "),e.qZA()(),e.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),e._uU(10," Do you really want to end this visit? "),e.qZA(),e.TgZ(11,"div",9),e._uU(12),e.ALo(13,"date"),e.qZA()()()(),e.TgZ(14,"div",10)(15,"button",11),e.NdJ("click",function(){return _.closeModal()}),e._uU(16,"Cancel"),e.qZA(),e.TgZ(17,"button",12),e.NdJ("click",function(){return _.onSubmit()}),e._uU(18,"End Visit"),e.qZA()()()()(),e._UZ(19,"div",13)),2&g&&(e.xp6(12),e.hij(" Visit date & time: ",e.xi3(13,2,_.consult_date,"MM/dd/yyyy hh:mm:ss a")," "),e.xp6(5),e.Q6J("disabled",_.is_saving))},dependencies:[f.uH,y.u5,r.ez,r.uU],changeDetection:0}),v})()},4504:(U,A,p)=>{p.d(A,{I:()=>e,K:()=>y});var r=p(5879);let e=(()=>{class f{constructor(){this._printStyle=[],this.previewOnly=!1,this.useExistingCss=!1,this.printDelay=0,this._styleSheetFile=""}set printStyle(d){for(let c in d)d.hasOwnProperty(c)&&this._printStyle.push((c+JSON.stringify(d[c])).replace(/['"]+/g,""));this.returnStyleValues()}returnStyleValues(){return`<style> ${this._printStyle.join(" ").replace(/,/g,";")} </style>`}set styleSheetFile(d){let c=function(l){return`<link rel="stylesheet" type="text/css" href="${l}">`};if(-1!==d.indexOf(",")){const l=d.split(",");for(let h of l)this._styleSheetFile=this._styleSheetFile+c(h)}else this._styleSheetFile=c(d)}returnStyleSheetLinkTags(){return this._styleSheetFile}getElementTag(d){const c=[],l=document.getElementsByTagName(d);for(let h=0;h<l.length;h++)c.push(l[h].outerHTML);return c.join("\r\n")}getFormData(d){for(var c=0;c<d.length;c++)d[c].defaultValue=d[c].value,d[c].checked&&(d[c].defaultChecked=!0)}getHtmlContents(){let d=document.getElementById(this.printSectionId),c=d.getElementsByTagName("input");this.getFormData(c);let l=d.getElementsByTagName("textarea");return this.getFormData(l),d.innerHTML}print(){let d,c,l="",h="";const v=this.getElementTag("base");this.useExistingCss&&(l=this.getElementTag("style"),h=this.getElementTag("link")),d=this.getHtmlContents(),c=window.open("","_blank","top=0,left=0,height=auto,width=auto"),c.document.open(),c.document.write(`\n      <html>\n        <head>\n          <title>${this.printTitle?this.printTitle:""}</title>\n          ${v}\n          ${this.returnStyleValues()}\n          ${this.returnStyleSheetLinkTags()}\n          ${l}\n          ${h}\n        </head>\n        <body>\n          ${d}\n          <script defer>\n            function triggerPrint(event) {\n              window.removeEventListener('load', triggerPrint, false);\n              ${this.previewOnly?"":`setTimeout(function() {\n                closeWindow(window.print());\n              }, ${this.printDelay});`}\n            }\n            function closeWindow(){\n                window.close();\n            }\n            window.addEventListener('load', triggerPrint, false);\n          <\/script>\n        </body>\n      </html>`),c.document.close()}}return f.\u0275fac=function(d){return new(d||f)},f.\u0275dir=r.lG2({type:f,selectors:[["button","ngxPrint",""]],hostBindings:function(d,c){1&d&&r.NdJ("click",function(){return c.print()})},inputs:{previewOnly:"previewOnly",printSectionId:"printSectionId",printTitle:"printTitle",useExistingCss:"useExistingCss",printDelay:"printDelay",printStyle:"printStyle",styleSheetFile:"styleSheetFile"}}),f})(),y=(()=>{class f{}return f.\u0275fac=function(d){return new(d||f)},f.\u0275mod=r.oAB({type:f}),f.\u0275inj=r.cJS({}),f})()}}]);