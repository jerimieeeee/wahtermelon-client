"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[124],{2124:(nt,u,_)=>{_.r(u),_.d(u,{XmlUploadModule:()=>c});var a=_(6895),g=_(2325),d=_(2687),t=_(1571),v=_(4691),x=_(7185),m=_(433),f=_(2216);function h(o,l){if(1&o&&(t.TgZ(0,"div",22)(1,"span",23),t._uU(2),t.qZA(),t._uU(3),t.ALo(4,"json"),t.qZA()),2&o){const e=l.$implicit;t.xp6(2),t.hij("",e.key,":"),t.xp6(1),t.hij(" ",t.lcZ(4,2,e.value)," ")}}function Z(o,l){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,h,5,4,"div",21),t.ALo(2,"keyvalue"),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.value))}}function b(o,l){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,Z,3,3,"div",19),t.ALo(2,"keyvalue"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.value))}}function T(o,l){if(1&o&&(t.TgZ(0,"div",22)(1,"span",23),t._uU(2),t.qZA(),t._uU(3),t.ALo(4,"json"),t.qZA()),2&o){const e=l.$implicit;t.xp6(2),t.hij("",e.key,":"),t.xp6(1),t.hij(" ",t.lcZ(4,2,e.value)," ")}}function A(o,l){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,T,5,4,"div",21),t.ALo(2,"keyvalue"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.value))}}function U(o,l){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,b,3,3,"div",20),t.YNc(2,A,3,3,"div",20),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.Q6J("ngIf",e.value.length>0),t.xp6(1),t.Q6J("ngIf",!e.value.length)}}function y(o,l){if(1&o&&(t.TgZ(0,"tr",18),t.YNc(1,U,3,2,"div",19),t.ALo(2,"keyvalue"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.xml_to_view.ENLISTMENTS))}}function w(o,l){if(1&o&&(t.TgZ(0,"div",22)(1,"span",23),t._uU(2),t.qZA(),t._uU(3),t.ALo(4,"json"),t.qZA()),2&o){const e=l.$implicit;t.xp6(2),t.hij("",e.key,":"),t.xp6(1),t.hij(" ",t.lcZ(4,2,e.value)," ")}}function C(o,l){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,w,5,4,"div",21),t.ALo(2,"keyvalue"),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.value))}}function X(o,l){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,C,3,3,"div",19),t.ALo(2,"keyvalue"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.value))}}function N(o,l){if(1&o&&(t.TgZ(0,"div",22)(1,"span",23),t._uU(2),t.qZA(),t._uU(3),t.ALo(4,"json"),t.qZA()),2&o){const e=l.$implicit;t.xp6(2),t.hij("",e.key,":"),t.xp6(1),t.hij(" ",t.lcZ(4,2,e.value)," ")}}function k(o,l){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,N,5,4,"div",21),t.ALo(2,"keyvalue"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.value))}}function J(o,l){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,X,3,3,"div",20),t.YNc(2,k,3,3,"div",20),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.Q6J("ngIf",e.value.length>0),t.xp6(1),t.Q6J("ngIf",!e.value.length)}}function q(o,l){if(1&o&&(t.TgZ(0,"tr",18),t.YNc(1,J,3,2,"div",19),t.ALo(2,"keyvalue"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.xml_to_view.PROFILING))}}function M(o,l){if(1&o&&(t.TgZ(0,"div",22)(1,"span",23),t._uU(2),t.qZA(),t._uU(3),t.ALo(4,"json"),t.qZA()),2&o){const e=l.$implicit;t.xp6(2),t.hij("",e.key,":"),t.xp6(1),t.hij(" ",t.lcZ(4,2,e.value)," ")}}function L(o,l){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,M,5,4,"div",21),t.ALo(2,"keyvalue"),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.value))}}function j(o,l){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,L,3,3,"div",19),t.ALo(2,"keyvalue"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.value))}}function I(o,l){if(1&o&&(t.TgZ(0,"div",22)(1,"span",23),t._uU(2),t.qZA(),t._uU(3),t.ALo(4,"json"),t.qZA()),2&o){const e=l.$implicit;t.xp6(2),t.hij("",e.key,":"),t.xp6(1),t.hij(" ",t.lcZ(4,2,e.value)," ")}}function Q(o,l){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,I,5,4,"div",21),t.ALo(2,"keyvalue"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.value))}}function F(o,l){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,j,3,3,"div",20),t.YNc(2,Q,3,3,"div",20),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.Q6J("ngIf",e.value.length>0),t.xp6(1),t.Q6J("ngIf",!e.value.length)}}function Y(o,l){if(1&o&&(t.TgZ(0,"tr",18),t.YNc(1,F,3,2,"div",19),t.ALo(2,"keyvalue"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.xml_to_view.SOAPS))}}function O(o,l){if(1&o&&(t.TgZ(0,"div",22)(1,"span",23),t._uU(2),t.qZA(),t._uU(3),t.ALo(4,"json"),t.qZA()),2&o){const e=l.$implicit;t.xp6(2),t.hij("",e.key,":"),t.xp6(1),t.hij(" ",t.lcZ(4,2,e.value)," ")}}function $(o,l){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,O,5,4,"div",21),t.ALo(2,"keyvalue"),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.value))}}function S(o,l){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,$,3,3,"div",19),t.ALo(2,"keyvalue"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.value))}}function E(o,l){if(1&o&&(t.TgZ(0,"div",22)(1,"span",23),t._uU(2),t.qZA(),t._uU(3),t.ALo(4,"json"),t.qZA()),2&o){const e=l.$implicit;t.xp6(2),t.hij("",e.key,":"),t.xp6(1),t.hij(" ",t.lcZ(4,2,e.value)," ")}}function G(o,l){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,E,5,4,"div",21),t.ALo(2,"keyvalue"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.value))}}function H(o,l){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,S,3,3,"div",20),t.YNc(2,G,3,3,"div",20),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.Q6J("ngIf",e.value.length>0),t.xp6(1),t.Q6J("ngIf",!e.value.length)}}function B(o,l){if(1&o&&(t.TgZ(0,"tr",18),t.YNc(1,H,3,2,"div",19),t.ALo(2,"keyvalue"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.xml_to_view.DIAGNOSTICEXAMRESULTS))}}function D(o,l){if(1&o&&(t.TgZ(0,"div",22)(1,"span",23),t._uU(2),t.qZA(),t._uU(3),t.ALo(4,"json"),t.qZA()),2&o){const e=l.$implicit;t.xp6(2),t.hij("",e.key,":"),t.xp6(1),t.hij(" ",t.lcZ(4,2,e.value)," ")}}function R(o,l){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,D,5,4,"div",21),t.ALo(2,"keyvalue"),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.value))}}function K(o,l){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,R,3,3,"div",19),t.ALo(2,"keyvalue"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.value))}}function P(o,l){if(1&o&&(t.TgZ(0,"div",22)(1,"span",23),t._uU(2),t.qZA(),t._uU(3),t.ALo(4,"json"),t.qZA()),2&o){const e=l.$implicit;t.xp6(2),t.hij("",e.key,":"),t.xp6(1),t.hij(" ",t.lcZ(4,2,e.value)," ")}}function z(o,l){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,P,5,4,"div",21),t.ALo(2,"keyvalue"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.value))}}function W(o,l){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,K,3,3,"div",20),t.YNc(2,z,3,3,"div",20),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.Q6J("ngIf",e.value.length>0),t.xp6(1),t.Q6J("ngIf",!e.value.length)}}function V(o,l){if(1&o&&(t.TgZ(0,"tr",18),t.YNc(1,W,3,2,"div",19),t.ALo(2,"keyvalue"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.xml_to_view.MEDICINES))}}function tt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"table",10)(1,"tbody")(2,"tr",11),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.toggleAccordion("enlistment"))}),t.TgZ(3,"td",12),t._uU(4,"ENLISTMENTS"),t.qZA()(),t.YNc(5,y,3,3,"tr",13),t.TgZ(6,"tr",11),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.toggleAccordion("profiling"))}),t.TgZ(7,"td",14),t._uU(8,"PROFILING"),t.qZA()(),t.YNc(9,q,3,3,"tr",13),t.TgZ(10,"tr",11),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.toggleAccordion("soaps"))}),t.TgZ(11,"td",15),t._uU(12,"SOAPS"),t.qZA()(),t.YNc(13,Y,3,3,"tr",13),t.TgZ(14,"tr",11),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.toggleAccordion("diagnostic"))}),t.TgZ(15,"td",16),t._uU(16,"DIAGNOSTIC EXAM RESULTS"),t.qZA()(),t.YNc(17,B,3,3,"tr",13),t.TgZ(18,"tr",11),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.toggleAccordion("medicines"))}),t.TgZ(19,"td",17),t._uU(20,"MEDICINE"),t.qZA()(),t.YNc(21,V,3,3,"tr",13),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.accordion.enlistment),t.xp6(4),t.Q6J("ngIf",e.accordion.profiling),t.xp6(4),t.Q6J("ngIf",e.accordion.soaps),t.xp6(4),t.Q6J("ngIf",e.accordion.diagnostic),t.xp6(4),t.Q6J("ngIf",e.accordion.medicines)}}class r{toggleAccordion(l){this.accordion[l]=!this.accordion[l]}closeModal(){this.toggleModal.emit({name:"uploaded-xml",data:null})}constructor(){this.toggleModal=new t.vpe,this.is_loading=!1,this.faSpinner=d.LM3,this.show_form=!1,this.enlistments=[],this.accordion=[]}ngOnInit(){this.show_form=!0}}function et(o,l){if(1&o&&(t.TgZ(0,"tr")(1,"td",16)(2,"div",17)(3,"div",18),t._UZ(4,"fa-icon",19),t.TgZ(5,"div",20),t._uU(6," Uploading XML... "),t.qZA()()()()()),2&o){const e=t.oxw();t.xp6(4),t.Q6J("icon",e.faCircleNotch)}}function ot(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"app-uploaded-xml",21),t.NdJ("toggleModal",function(n){t.CHM(e);const it=t.oxw();return t.KtG(it.toggleModal(n))}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("xml_to_view",e.xml_to_view)}}r.\u0275fac=function(l){return new(l||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-uploaded-xml"]],inputs:{xml_to_view:"xml_to_view"},outputs:{toggleModal:"toggleModal"},decls:12,vars:1,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-4xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100","flex","justify-center"],["class","w-10/12 border border-slate-300 rounded-lg",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"btn-save","bg-gray-400","px-10",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"w-10/12","border","border-slate-300","rounded-lg"],[1,"cursor-pointer","h-10",3,"click"],[1,"font-bold","text-center","bg-green-300","w-full"],["class","border-b border-slate-200",4,"ngIf"],[1,"font-bold","text-center","bg-blue-300","w-full"],[1,"font-bold","text-center","bg-yellow-300","w-full"],[1,"font-bold","text-center","bg-red-300","w-full"],[1,"font-bold","text-center","bg-orange-300","w-full"],[1,"border-b","border-slate-200"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","pb-5 text-sm",4,"ngFor","ngForOf"],[1,"pb-5","text-sm"],[1,"font-semibold"]],template:function(l,e){1&l&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5," XML CONTENT "),t.qZA()(),t.TgZ(6,"div",5),t.YNc(7,tt,22,5,"table",6),t.qZA(),t.TgZ(8,"div",7)(9,"button",8),t.NdJ("click",function(){return e.closeModal()}),t._uU(10,"Close"),t.qZA()()()()(),t._UZ(11,"div",9)),2&l&&(t.xp6(7),t.Q6J("ngIf",e.show_form))},dependencies:[a.sg,a.O5,a.Ts,a.Nd]});class s{toggleModal(l){this.modals[l.name]=!this.modals[l.name],l.data&&(console.log(typeof this.uploaded_list),Object.entries(l.data).forEach(([e,i],n)=>{console.log(i),this.uploaded_list.push(i)}),localStorage.setItem("uploaded-xml",JSON.stringify(this.uploaded_list)),console.log(this.uploaded_list))}openModal(){this.toggleModal({name:"uploaded-xml"})}readXML(l){this.file_to_upload=l}uploadFile(l){this.is_uploading=!0;const e=new FormData;this.file_upload_count=l.length,this.uploaded_count=0;for(let i=0;i<l.length;i++){let n=l[i].name.split(".");"enc"===n[n.length-1]&&(this.uploaded_count+=1,e.append("xml[]",l[i]))}e.append("cipher_key",this.cipher_key),console.log(e.get("cipher_key")),console.log(this.file_upload_count,this.uploaded_count),this.http.post("konsulta/upload-xml",e).subscribe({next:i=>{console.log(i),this.resetInput(),this.showToast("success","Uploaded "+this.uploaded_count+" of "+this.file_upload_count+" files","Upload Success")},error:i=>{this.resetInput()}})}showToast(l,e,i){this.toastr[l](e,i,{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0})}resetInput(){this.is_uploading=!1,this.file_to_upload=null,this.xmlFile=null}viewContent(l){this.xml_to_view=l,this.openModal()}loadList(l){let e={params:{}};l&&(e.params.page=l),e.params.per_page=this.per_page,this.http.get("konsulta/imported-xml",e).subscribe({next:i=>{console.log(i.data),this.xml_list=i.data,this.current_page=i.meta.current_page,this.last_page=i.meta.last_page,this.from=i.meta.from,this.to=i.meta.to,this.total=i.meta.total},error:i=>console.log(i)})}constructor(l,e){this.http=l,this.toastr=e,this.faCircleNotch=d.IJ7,this.faSearch=d.wn1,this.faCalendarDays=d.WRo,this.faArrowsRotate=d.T80,this.faUpload=d.cf$,this.faClipboardList=d.OGB,this.per_page=10,this.xml_list=[],this.modals=[],this.uploaded_list=[],this.file_to_upload=null,this.xmlFile=null,this.cipher_key="PHilheaLthDuMmyciPHerKeyS",this.uploaded_count=0,this.is_uploading=!1}ngOnInit(){this.loadList()}}s.\u0275fac=function(l){return new(l||s)(t.Y36(v.O),t.Y36(x._W))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-xml-upload"]],decls:24,vars:6,consts:[[1,"bg-white","border","border-solid","border-slate-100","rounded-xl","shadow-md","h-full"],[1,"border","border-solid","border-slate-100","rounded-t-xl","font-semibold","justify-between","h-full"],[1,"flex","flex-col","justify-center","w-2/5","rounded-lg","border","border-slate-200","mx-auto","my-28"],[1,"bg-blue-500","text-white","text-lg","rounded-t-lg","p-2"],[1,"w-3/4","flex","justify-center","mx-auto","py-5"],["type","file","id","formFile","multiple","",1,"form-control","w-full","px-3","py-1.5","text-base","font-normal","text-gray-700","bg-white","bg-clip-padding","border","border-solid","border-gray-300","rounded-lg","transition","ease-in-out","m-0","focus:text-gray-700","focus:bg-white","focus:border-blue-600","focus:outline-none",3,"ngModel","change","ngModelChange"],[1,"w-3/4","flex","justify-center","mx-auto","pb-5"],["type","text","placeholder","enter cipher key",1,"rounded-lg","w-full","px-3","py-2","border","border-solid","border-gray-300","text-sm","placeholder-gray-400",3,"ngModel","ngModelChange"],[1,"w-3/4","flex","justify-center","mx-auto"],["type","button",1,"disabled:bg-gray-400","w-full","py-2","mb-5","bg-blue-500","text-white","rounded-lg","text-sm",3,"disabled","click"],[1,"",3,"icon"],[1,"w-full"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400","mb-5","hidden"],[1,"text-center"],[4,"ngIf"],[3,"xml_to_view","toggleModal",4,"ngIf"],["colspan","2"],[1,"grid","grid-cols-1","w-full","mt-10"],[1,"flex","justify-center","mt-3"],["spin","true",1,"text-lg","mr-2","text-blue-500",3,"icon"],[1,"text-center","italic","pt-1"],[3,"xml_to_view","toggleModal"]],template:function(l,e){1&l&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4," Upload XMLs "),t.qZA(),t.TgZ(5,"div",4)(6,"input",5),t.NdJ("change",function(n){return e.readXML(n.target.files)})("ngModelChange",function(n){return e.xmlFile=n}),t.qZA()(),t.TgZ(7,"div",6)(8,"input",7),t.NdJ("ngModelChange",function(n){return e.cipher_key=n}),t.qZA()(),t.TgZ(9,"div",8)(10,"button",9),t.NdJ("click",function(){return e.uploadFile(e.file_to_upload)}),t._UZ(11,"fa-icon",10),t._uU(12," Upload XML "),t.qZA()()(),t.TgZ(13,"div",11)(14,"table",12)(15,"thead")(16,"tr")(17,"th",13),t._uU(18,"Name"),t.qZA(),t.TgZ(19,"th",13),t._uU(20,"Birthdate"),t.qZA()()(),t.TgZ(21,"tbody"),t.YNc(22,et,7,1,"tr",14),t.qZA()()()()(),t.YNc(23,ot,1,1,"app-uploaded-xml",15)),2&l&&(t.xp6(6),t.Q6J("ngModel",e.xmlFile),t.xp6(2),t.Q6J("ngModel",e.cipher_key),t.xp6(2),t.Q6J("disabled",!e.file_to_upload||!e.cipher_key),t.xp6(1),t.Q6J("icon",e.faUpload),t.xp6(11),t.Q6J("ngIf",e.is_uploading),t.xp6(1),t.Q6J("ngIf",e.modals["uploaded-xml"]))},dependencies:[a.O5,m.Fj,m.JJ,m.On,f.BN,r]});const lt=[{path:"",component:s}];class p{}p.\u0275fac=function(l){return new(l||p)},p.\u0275mod=t.oAB({type:p}),p.\u0275inj=t.cJS({imports:[g.Bz.forChild(lt),g.Bz]});class c{}c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[a.ez,p,m.u5,f.uH]})}}]);