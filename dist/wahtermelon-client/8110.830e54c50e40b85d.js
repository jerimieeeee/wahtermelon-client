"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[8110],{8110:(R,F,c)=>{c.r(F),c.d(F,{DentalModule:()=>ve});var a=c(177),d=c(3895),_=c(5383),t=c(4438),g=c(3318),f=c(60),b=c(614),C=c(8761),s=c(9417),y=c(5794);const h=i=>({"rounded-b":i});function p(i,l){if(1&i){const e=t.RV6();t.j41(0,"span",21)(1,"span")(2,"fa-icon",22),t.bIt("click",function(){const o=t.eBV(e);return t.Njj((0,o.clear)(o.item))}),t.k0s()(),t.j41(3,"span"),t.EFF(4),t.k0s()()}if(2&i){const e=l.item,n=t.XpG(2);t.R7$(2),t.Y8G("icon",n.faXmark),t.R7$(2),t.JRh(e.complaint_desc)}}function u(i,l){if(1&i&&(t.j41(0,"div",23)(1,"div")(2,"h5",24),t.EFF(3),t.k0s()()()),2&i){const e=l.item,n=l.searchTerm;t.R7$(2),t.Y8G("ngOptionHighlight",n),t.R7$(),t.JRh(e.complaint_desc)}}function v(i,l){if(1&i&&t.nrm(0,"fa-icon",28),2&i){const e=t.XpG(3);t.Y8G("icon",e.faCircleNotch)}}function k(i,l){if(1&i&&t.nrm(0,"fa-icon",29),2&i){const e=t.XpG(3);t.Y8G("icon",e.faSave)}}function x(i,l){if(1&i){const e=t.RV6();t.j41(0,"button",25),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.onSubmit())}),t.DNE(1,v,1,1,"fa-icon",26)(2,k,1,1,"fa-icon",27),t.EFF(3),t.k0s()}if(2&i){const e=t.XpG(2);t.Y8G("disabled",e.is_saving),t.R7$(),t.Y8G("ngIf",e.is_saving),t.R7$(),t.Y8G("ngIf",!e.is_saving),t.R7$(),t.SpI(" ",e.is_saving?"Saving":"Save"," ")}}function N(i,l){if(1&i){const e=t.RV6();t.j41(0,"div")(1,"div",8)(2,"button",9),t.nrm(3,"fa-icon",10),t.k0s(),t.j41(4,"div",11)(5,"ng-select",12),t.mxI("ngModelChange",function(o){t.eBV(e);const r=t.XpG();return t.DH7(r.selectedComplaint,o)||(r.selectedComplaint=o),t.Njj(o)}),t.DNE(6,p,5,2,"ng-template",13)(7,u,4,2,"ng-template",14),t.k0s()()(),t.j41(8,"div",15)(9,"label",16),t.EFF(10,"Complaint notes"),t.k0s(),t.j41(11,"textarea",17),t.mxI("ngModelChange",function(o){t.eBV(e);const r=t.XpG();return t.DH7(r.consult_notes.complaint,o)||(r.consult_notes.complaint=o),t.Njj(o)}),t.k0s()(),t.j41(12,"div",15)(13,"label",16),t.EFF(14,"History notes"),t.k0s(),t.j41(15,"textarea",18),t.mxI("ngModelChange",function(o){t.eBV(e);const r=t.XpG();return t.DH7(r.consult_notes.history,o)||(r.consult_notes.history=o),t.Njj(o)}),t.k0s()(),t.j41(16,"div",19),t.DNE(17,x,4,4,"button",20),t.k0s()()}if(2&i){const e=t.XpG();t.R7$(3),t.Y8G("icon",e.faPlusSquare),t.R7$(2),t.Y8G("disabled",e.consult_done||!e.allowed_to_edit)("items",e.complaints)("multiple",!0)("closeOnSelect",!1)("hideSelected",!0)("clearable",!1),t.R50("ngModel",e.selectedComplaint),t.R7$(6),t.R50("ngModel",e.consult_notes.complaint),t.R7$(4),t.R50("ngModel",e.consult_notes.history),t.R7$(2),t.Y8G("ngIf",!e.consult_done&&e.allowed_to_edit)}}let G=(()=>{class i{onSubmit(){this.is_saving=!0,this.http.post("consultation/complaint",{notes_id:this.consult_details.consult_notes.id,consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,complaints:this.selectedComplaint}).subscribe({next:n=>{this.saveNotes()},error:n=>{this.http.showError(n.error.message,"Complaint History")}})}saveNotes(){this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,complaint:this.consult_notes.complaint,history:this.consult_notes.history}).subscribe({next:()=>{this.is_saving=!1,this.showToastr(),this.loadConsult.emit()},error:n=>{this.http.showError(n.error.message,"Complaint History")}})}showToastr(){this.toastr.success("Successfully updated!","Complaint")}loadLib(){this.http.get("libraries/complaint").subscribe(e=>{this.complaints=e.data,this.loadSelected(),this.show_form=!0})}loadSelected(){this.gbv_complaints=[],this.show_gbv_form=!1,this.have_open_gbv=!1;let e=[];this.consult_details.consult_notes&&this.consult_details.consult_notes.complaints&&Object.entries(this.consult_details.consult_notes.complaints).forEach(([n,o],r)=>{e.push(o.complaint_id)}),this.selectedComplaint=e}getPatientGbv(){this.http.get("gender-based-violence/patient-gbv",{params:{patient_id:this.consult_details.patient.id}}).subscribe({next:n=>{n.data.length>0&&!n.data[0].outcome_date&&(this.have_open_gbv=!0),this.show_gbv_form=!0},error:n=>console.log(n)})}ngOnChanges(e){this.show_content=this.toggle_content,this.consult_details&&(this.complaints&&this.loadSelected(),this.consult_notes=this.consult_details.consult_notes,this.consult_done=this.consult_details.consult_done)}toggleModal(e){this.modals[e]=!this.modals[e],"gbv_referral"===e&&this.getPatientGbv()}constructor(e,n){this.http=e,this.toastr=n,this.loadConsult=new t.bkB,this.faPlusSquare=b.CHJ,this.faSave=b.hSh,this.faChevronCircleUp=_.AeV,this.faChevronCircleDown=_.DqM,this.faCircleNotch=_.s4k,this.faXmark=_.Jyw,this.selectedComplaint=[],this.consult_notes={complaint:null,history:null},this.modals=[],this.show_content=!0,this.is_saving=!1,this.consult_done=!1,this.show_form=!1,this.enable_edit=!1,this.show_gbv_form=!1,this.have_open_gbv=!1}ngOnInit(){this.loadLib(),this.allowed_to_edit=!0}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(g.k),t.rXU(y.tw))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-complaint-history"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",have_complaint:"have_complaint",allowed_to_edit:"allowed_to_edit"},outputs:{loadConsult:"loadConsult"},features:[t.OA$],decls:10,vars:5,consts:[[1,"grid","grid-cols-10","mb-5"],[1,"col-span-2","pt-2","pr-5","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[1,"flex","mb-2","p-4"],["type","submit",1,"inline-flex","p-1","items-center","text-gray-50","bg-sky-400","rounded-l-md","border","border-gray-300"],[1,"text-white","fa-xl",3,"icon"],[1,"chips-container"],["placeholder","search","bindLabel","complaint_desc","bindValue","complaint_id","placeholder","Select Complaint",1,"select-chips",3,"ngModelChange","disabled","items","multiple","closeOnSelect","hideSelected","clearable","ngModel"],["ng-label-tmp",""],["ng-option-tmp",""],[1,"grid","grid-cols-1","px-4","pb-4"],["for","complaint_notes",1,"font-semibold","pl-1"],["rows","3","id","complaint_notes","placeholder","Complaint Notes",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"ngModelChange","ngModel"],["rows","3","id","history_notes","placeholder","History of Current Illness",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"ngModelChange","ngModel"],[1,"flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[1,"px-2","py-1","rounded-md","text-sm"],[1,"text-xs","mr-1","hover:text-slate-100","hover:cursor-pointer",3,"click","icon"],[1,"grid","grid-flow-col","auto-cols-max"],[3,"ngOptionHighlight"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"click","disabled"],["class","mr-2","animation","spin",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["animation","spin",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div",1),t.EFF(2," Chief Complaint and History of Current Illness "),t.k0s(),t.j41(3,"div",2)(4,"div",3)(5,"span",4),t.EFF(6," Complaints "),t.j41(7,"button",5),t.bIt("click",function(){return o.show_content=!o.show_content}),t.nrm(8,"fa-icon",6),t.k0s()(),t.DNE(9,N,18,11,"div",7),t.k0s()()()),2&n&&(t.R7$(5),t.Y8G("ngClass",t.eq3(3,h,!o.show_content)),t.R7$(3),t.Y8G("icon",o.show_content?o.faChevronCircleUp:o.faChevronCircleDown),t.R7$(),t.Y8G("ngIf",o.show_content&&o.show_form))},dependencies:[a.MD,a.YU,a.bT,f.dX,f.aY,C.MQ,C.vr,C.Uq,C.ZZ,s.YN,s.me,s.BC,s.vS],encapsulation:2})}}return i})();const H=i=>({"rounded-b":i});function X(i,l){if(1&i&&(t.j41(0,"ul",28)(1,"li"),t.EFF(2),t.k0s()()),2&i){const e=l.$implicit;t.R7$(2),t.JRh(null==e.lib_complaints?null:e.lib_complaints.complaint_desc)}}function O(i,l){if(1&i&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&i){const e=l.$implicit;t.R7$(),t.SpI(" ",e.diagnosis.class_name," ")}}function V(i,l){if(1&i&&(t.j41(0,"div",29)(1,"span",30),t.EFF(2,"remarks:"),t.k0s(),t.EFF(3),t.k0s()),2&i){let e;const n=t.XpG().$implicit;t.R7$(3),t.SpI(" ",null!==(e=n.consult_notes.idx_remarks)&&void 0!==e?e:"-"," ")}}function B(i,l){if(1&i&&(t.j41(0,"li")(1,"span",31),t.EFF(2),t.k0s(),t.EFF(3),t.k0s()),2&i){const e=l.$implicit;t.R7$(2),t.SpI("",e.lib_icd10.icd10_code,":"),t.R7$(),t.SpI(" ",e.lib_icd10.icd10_desc," ")}}function J(i,l){if(1&i&&(t.j41(0,"div",29)(1,"span",30),t.EFF(2,"remarks:"),t.k0s(),t.EFF(3),t.k0s()),2&i){let e;const n=t.XpG().$implicit;t.R7$(3),t.SpI(" ",null!==(e=n.consult_notes.fdx_remarks)&&void 0!==e?e:"-"," ")}}function U(i,l){if(1&i&&(t.j41(0,"tr",13)(1,"td",14)(2,"div",15)(3,"span",16),t.EFF(4),t.nI1(5,"date"),t.k0s(),t.j41(6,"span",17),t.EFF(7),t.nI1(8,"date"),t.k0s()()(),t.j41(9,"td",18)(10,"div",15)(11,"span",19)(12,"span",20),t.EFF(13,"Complaint notes:"),t.k0s(),t.EFF(14),t.k0s(),t.DNE(15,X,3,1,"ul",21),t.j41(16,"span",22)(17,"span",20),t.EFF(18,"History notes:"),t.k0s(),t.EFF(19),t.k0s()(),t.j41(20,"div",23)(21,"span",20),t.EFF(22,"Initial Diagnosis:"),t.k0s(),t.j41(23,"ul",24),t.DNE(24,O,2,1,"li",25),t.k0s(),t.DNE(25,V,4,1,"div",26),t.k0s(),t.j41(26,"div",27)(27,"span",20),t.EFF(28,"Final Diagnosis:"),t.k0s(),t.j41(29,"ul",24),t.DNE(30,B,4,2,"li",25),t.k0s(),t.DNE(31,J,4,1,"div",26),t.k0s(),t.j41(32,"div",27)(33,"span",19)(34,"span",20),t.EFF(35,"Treatment Plan:"),t.k0s(),t.EFF(36),t.k0s()()()()),2&i){let e,n,o;const r=l.$implicit;t.R7$(4),t.JRh(t.brH(5,10,r.consult_date,"MM/dd/yyyy","Asia/Manila")),t.R7$(3),t.JRh(t.i5U(8,14,r.consult_date,"hh:mm:ss a")),t.R7$(7),t.SpI(" ",null!==(e=r.consult_notes.complaint)&&void 0!==e?e:"-"," "),t.R7$(),t.Y8G("ngForOf",r.consult_notes.complaints),t.R7$(4),t.SpI(" ",null!==(n=r.consult_notes.history)&&void 0!==n?n:"-"," "),t.R7$(5),t.Y8G("ngForOf",r.consult_notes.initialdx),t.R7$(),t.Y8G("ngIf",r.consult_notes.idx_remarks),t.R7$(5),t.Y8G("ngForOf",r.consult_notes.finaldx),t.R7$(),t.Y8G("ngIf",r.consult_notes.fdx_remarks),t.R7$(5),t.SpI(" ",null!==(o=r.consult_notes.plan)&&void 0!==o?o:"-"," ")}}function P(i,l){if(1&i&&(t.j41(0,"table",10)(1,"thead")(2,"tr",11)(3,"th"),t.EFF(4,"Date"),t.k0s(),t.j41(5,"th"),t.EFF(6,"Details"),t.k0s()()(),t.j41(7,"tbody"),t.DNE(8,U,37,17,"tr",12),t.k0s()()),2&i){const e=t.XpG();t.R7$(8),t.Y8G("ngForOf",e.visit_list)}}function L(i,l){if(1&i){const e=t.RV6();t.j41(0,"div")(1,"nav",36)(2,"button",37),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.loadPreviousVisit(1))}),t.nrm(3,"fa-icon",38),t.k0s(),t.j41(4,"button",39),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.loadPreviousVisit(o.current_page-1))}),t.nrm(5,"fa-icon",38),t.EFF(6,"Previous "),t.k0s(),t.j41(7,"button",39),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.loadPreviousVisit(o.current_page+1))}),t.EFF(8," Next"),t.nrm(9,"fa-icon",40),t.k0s(),t.j41(10,"button",41),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.loadPreviousVisit(o.last_page))}),t.nrm(11,"fa-icon",40),t.k0s()()()}if(2&i){const e=t.XpG(2);t.R7$(2),t.Y8G("disabled",1===e.current_page),t.R7$(),t.Y8G("icon",e.faAnglesLeft),t.R7$(),t.Y8G("disabled",1===e.current_page),t.R7$(),t.Y8G("icon",e.faChevronLeft),t.R7$(2),t.Y8G("disabled",e.current_page===e.last_page),t.R7$(2),t.Y8G("icon",e.faChevronRight),t.R7$(),t.Y8G("disabled",e.current_page===e.last_page),t.R7$(),t.Y8G("icon",e.faAnglesRight)}}function A(i,l){if(1&i&&(t.j41(0,"div")(1,"div",32)(2,"div",33)(3,"div")(4,"p",34),t.EFF(5," Showing "),t.j41(6,"span",35),t.EFF(7),t.k0s(),t.EFF(8," to "),t.j41(9,"span",35),t.EFF(10),t.k0s(),t.EFF(11," of "),t.j41(12,"span",35),t.EFF(13),t.k0s(),t.EFF(14," results "),t.k0s()(),t.DNE(15,L,12,8,"div",9),t.k0s()()()),2&i){const e=t.XpG();t.R7$(7),t.JRh(e.from),t.R7$(3),t.JRh(e.to),t.R7$(3),t.JRh(e.total),t.R7$(2),t.Y8G("ngIf",e.total>=6)}}let E=(()=>{class i{loadPreviousVisit(e){this.http.get("consultation/records",{params:{patient_id:this.patient_id,per_page:this.per_page,sort:"-consult_date",pt_group:this.pt_group,page:e,not_consult_id:this.consult_id}}).subscribe({next:o=>{this.visit_list=o.data,this.current_page=o.meta.current_page,this.last_page=o.meta.last_page,this.from=o.meta.from,this.to=o.meta.to,this.total=o.meta.total},error:o=>console.log(o)})}constructor(e,n){this.route=e,this.http=n,this.show_content=!1,this.faChevronCircleUp=_.AeV,this.faChevronCircleDown=_.DqM,this.faChevronLeft=_.Wzs,this.faChevronRight=_.XkK,this.faAnglesLeft=_.rNr,this.faAnglesRight=_.up_,this.per_page=5}ngOnInit(){this.patient_id=this.route.snapshot.paramMap.get("id"),this.consult_id=this.route.snapshot.paramMap.get("consult_id"),this.show_content=!0,this.loadPreviousVisit(1)}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(d.nX),t.rXU(g.k))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-consult-history"]],inputs:{toggle_content:"toggle_content",allowed_to_edit:"allowed_to_edit",pt_group:"pt_group"},decls:12,vars:6,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-green-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],["class","w-full table-auto",4,"ngIf"],[4,"ngIf"],[1,"w-full","table-auto"],[1,"border-b","border-solid","border-gray-200"],["class","text-left mt-3 align-top border-t border-slate-200 text-sm",4,"ngFor","ngForOf"],[1,"text-left","mt-3","align-top","border-t","border-slate-200","text-sm"],[1,"p-3","w-2/12"],[1,"grid","grid-cols-1"],[1,"font-semibold","w-full"],[1,"text-sm","w-full"],[1,"p-3","w-7/12"],[1,"w-full","mb-3"],[1,"font-semibold"],["class","list-disc last:mb-3 ml-10",4,"ngFor","ngForOf"],[1,"w-full","my-2","py-2"],[1,"grid","grid-cols-1","text-left"],[1,"list-disc","ml-10"],[4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],[1,"grid","grid-cols-1","text-left","mt-2","pt-2"],[1,"list-disc","last:mb-3","ml-10"],[1,"mt-2"],[1,"text-sm","italic"],[1,"font-semibold","text-sm"],[1,"bg-white","px-4","py-4","flex","items-center","justify-between","border-t","border-gray-200","sm:px-6"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"text-sm","text-gray-700"],[1,"font-medium"],["aria-label","Pagination",1,"relative","z-0","inline-flex","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","disabled"],[1,"block","h-15","w-15","text-gray-500","pr-1",3,"icon"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","bg-white","text-sm","font-medium","text-gray-700","hover:bg-gray-50",3,"click","disabled"],[1,"h-5","w-5","text-gray-500",3,"icon"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","disabled"]],template:function(n,o){1&n&&(t.nrm(0,"hr",0),t.j41(1,"div",1)(2,"div",2),t.EFF(3," Diagnosis History "),t.k0s(),t.j41(4,"div",3)(5,"div",4)(6,"span",5),t.EFF(7," Previous History "),t.j41(8,"button",6),t.bIt("click",function(){return o.show_content=!o.show_content}),t.nrm(9,"fa-icon",7),t.k0s()(),t.DNE(10,P,9,1,"table",8)(11,A,16,4,"div",9),t.k0s()()()),2&n&&(t.R7$(6),t.Y8G("ngClass",t.eq3(4,H,!o.show_content)),t.R7$(3),t.Y8G("icon",o.show_content?o.faChevronCircleUp:o.faChevronCircleDown),t.R7$(),t.Y8G("ngIf",o.show_content),t.R7$(),t.Y8G("ngIf",o.total>=1))},dependencies:[a.MD,a.YU,a.Sq,a.bT,a.vh,f.dX,f.aY],encapsulation:2})}}return i})();var S=c(2505),I=c(2038),T=c(9217),$=c(943),M=c(7468);function W(i,l){if(1&i&&(t.j41(0,"div",15),t.nrm(1,"input",16),t.j41(2,"label",17),t.EFF(3),t.k0s()()),2&i){const e=l.$implicit;t.R7$(),t.Y8G("formControlName",e.column_name),t.BMQ("id",e.column_name),t.R7$(),t.BMQ("for",e.column_name),t.R7$(),t.JRh(e.desc)}}function K(i,l){if(1&i&&(t.j41(0,"div",15),t.nrm(1,"input",16),t.j41(2,"label",17),t.EFF(3),t.k0s()()),2&i){const e=l.$implicit;t.R7$(),t.Y8G("formControlName",e.column_name),t.R7$(2),t.JRh(e.desc)}}function Q(i,l){if(1&i&&t.nrm(0,"fa-icon",18),2&i){const e=t.XpG();t.Y8G("icon",e.faSave)}}function q(i,l){if(1&i&&t.nrm(0,"fa-icon",19),2&i){const e=t.XpG();t.Y8G("icon",e.faSpinner)}}let Z=(()=>{class i{onSubmit(){this.is_saving=!0,this.http.post("dental/medical-social",this.medicalSocialForm.value).subscribe({next:e=>{this.toastr.success("Successfully "+(this.medicalSocialForm.value.id?"updated":"recorded"),"Medical & Social History"),this.loadSelectedConsult.emit(),this.is_saving=!1},error:e=>{this.http.showError(e.error.message,"Dental Medical and Social History")}})}loadLibraries(){const e=this.http.get("libraries/dental-medical-history"),n=this.http.get("libraries/dental-social-history");(0,M.p)([e,n]).subscribe({next:([o,r])=>{this.lib_medical_history=o.data,this.lib_social_history=r.data,this.show_form=!0},error:o=>{this.http.showError(o.error.message,"Dental History Library")}}),this.patchData()}patchData(){this.medicalSocialForm.patchValue(this.selected_visit.dentalMedicalSocials?{...this.selected_visit.dentalMedicalSocials}:{patient_id:this.selected_visit.patient.id})}addHospHistory(){}constructor(e,n){this.http=e,this.toastr=n,this.loadSelectedConsult=new t.bkB,this.faSpinner=_.z1G,this.faSave=b.hSh,this.faPlus=_.QLR,this.is_saving=!1,this.show_form=!1,this.medicalSocialForm=function z(){return new s.gE({id:new s.MJ(null),patient_id:new s.MJ(null),allergies_flag:new s.MJ(!1),hypertension_flag:new s.MJ(!1),diabetes_flag:new s.MJ(!1),blood_disorder_flag:new s.MJ(!1),heart_disease_flag:new s.MJ(!1),thyroid_flag:new s.MJ(!1),hepatitis_flag:new s.MJ(!1),malignancy_flag:new s.MJ(!1),blood_transfusion_flag:new s.MJ(!1),tattoo_flag:new s.MJ(!1),medical_others_flag:new s.MJ(!1),medical_remarks:new s.MJ(""),sweet_flag:new s.MJ(!1),tabacco_flag:new s.MJ(!1),alcohol_flag:new s.MJ(!1),nut_flag:new s.MJ(!1),social_others_flag:new s.MJ(!1),social_remarks:new s.MJ("")})}()}ngOnInit(){this.loadLibraries()}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(g.k),t.rXU(y.tw))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-history"]],inputs:{selected_visit:"selected_visit"},outputs:{loadSelectedConsult:"loadSelectedConsult"},standalone:!1,decls:24,vars:7,consts:[[1,"pt-5"],[1,"border","border-solid","border-gray-200","rounded-lg"],[1,"bg-blue-500","w-full","text-white","p-3","rounded-t-lg","font-semibold"],[3,"ngSubmit","formGroup"],[1,"col-span-1","px-5"],[1,"border-b","border-slate-200","my-3","text-gray-800","uppercase","text-sm"],[1,"grid","grid-cols-3","pl-3"],["class","col-span-1 mb-2",4,"ngFor","ngForOf"],[1,"block","m-3"],["rows","2","id","medical_remarks","formControlName","medical_remarks","placeholder","Remarks",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50"],["rows","2","id","social_remarks","formControlName","social_remarks","placeholder","Remarks",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50"],[1,"text-right","m-5"],["type","submit",1,"btn-save",3,"disabled"],["class","mr-3",3,"icon",4,"ngIf"],["class","mr-3","animation","spin",3,"icon",4,"ngIf"],[1,"col-span-1","mb-2"],["type","checkbox",1,"input-checkbox",3,"formControlName"],[1,"pl-2","text-sm"],[1,"mr-3",3,"icon"],["animation","spin",1,"mr-3",3,"icon"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3," History "),t.k0s(),t.j41(4,"form",3),t.bIt("ngSubmit",function(){return o.onSubmit()}),t.j41(5,"div",4)(6,"div",5),t.EFF(7," Medical History "),t.k0s(),t.j41(8,"div",6),t.DNE(9,W,4,4,"div",7),t.k0s(),t.j41(10,"div",8),t.nrm(11,"textarea",9),t.k0s()(),t.j41(12,"div",4)(13,"div",5),t.EFF(14," Dietary/Social History "),t.k0s(),t.j41(15,"div",6),t.DNE(16,K,4,2,"div",7),t.k0s(),t.j41(17,"div",8),t.nrm(18,"textarea",10),t.k0s()(),t.j41(19,"div",11)(20,"button",12),t.DNE(21,Q,1,1,"fa-icon",13)(22,q,1,1,"fa-icon",14),t.EFF(23),t.k0s()()()()()),2&n&&(t.R7$(4),t.Y8G("formGroup",o.medicalSocialForm),t.R7$(5),t.Y8G("ngForOf",o.lib_medical_history),t.R7$(7),t.Y8G("ngForOf",o.lib_social_history),t.R7$(4),t.Y8G("disabled",o.is_saving),t.R7$(),t.Y8G("ngIf",!o.is_saving),t.R7$(),t.Y8G("ngIf",o.is_saving),t.R7$(),t.SpI(" ",o.is_saving?"Saving":"Save"," "))},dependencies:[a.Sq,a.bT,f.aY,s.qT,s.me,s.Zm,s.BC,s.cb,s.j4,s.JD],encapsulation:2})}}return i})();const tt=[11,12,13,14,15,16,17,18,21,22,23,24,25,26,27,28,31,32,33,34,35,36,37,38,41,42,43,44,45,46,47,48],et=[51,52,53,54,55,61,62,63,64,65,71,72,73,74,75,81,82,83,84,85],it=[{id:"D",desc:"Decayed"},{id:"F",desc:"Filled"},{id:"JC",desc:"Jacket Crown"},{id:"M",desc:"Missing"},{id:"P",desc:"Pontic"},{id:"S",desc:"Supernumerary"},{id:"Un",desc:"Unerupted"},{id:"Dx",desc:"For Extraction"},{id:"Y",desc:"Sound/Sealed"}],D=[[{tooth_number:18,condition:null},{tooth_number:17,condition:null},{tooth_number:16,condition:null},{tooth_number:15,condition:null},{tooth_number:14,condition:null},{tooth_number:13,condition:null},{tooth_number:12,condition:null},{tooth_number:11,condition:null},{tooth_number:21,condition:null},{tooth_number:22,condition:null},{tooth_number:23,condition:null},{tooth_number:24,condition:null},{tooth_number:25,condition:null},{tooth_number:26,condition:null},{tooth_number:27,condition:null},{tooth_number:28,condition:null}],[{tooth_number:48,condition:null},{tooth_number:47,condition:null},{tooth_number:46,condition:null},{tooth_number:45,condition:null},{tooth_number:44,condition:null},{tooth_number:43,condition:null},{tooth_number:42,condition:null},{tooth_number:41,condition:null},{tooth_number:31,condition:null},{tooth_number:32,condition:null},{tooth_number:33,condition:null},{tooth_number:34,condition:null},{tooth_number:35,condition:null},{tooth_number:36,condition:null},{tooth_number:37,condition:null},{tooth_number:38,condition:null}]],Y=[[{tooth_number:55,condition:null},{tooth_number:54,condition:null},{tooth_number:53,condition:null},{tooth_number:52,condition:null},{tooth_number:51,condition:null},{tooth_number:61,condition:null},{tooth_number:62,condition:null},{tooth_number:63,condition:null},{tooth_number:64,condition:null},{tooth_number:65,condition:null}],[{tooth_number:85,condition:null},{tooth_number:84,condition:null},{tooth_number:83,condition:null},{tooth_number:82,condition:null},{tooth_number:81,condition:null},{tooth_number:71,condition:null},{tooth_number:72,condition:null},{tooth_number:73,condition:null},{tooth_number:74,condition:null},{tooth_number:75,condition:null}]];var j=c(3825);function nt(i,l){if(1&i&&(t.j41(0,"option",20),t.EFF(1),t.k0s()),2&i){const e=l.$implicit;t.Y8G("value",e.code),t.R7$(),t.JRh(e.desc)}}function st(i,l){if(1&i&&t.nrm(0,"fa-icon",21),2&i){const e=t.XpG();t.Y8G("icon",e.faSave)}}function lt(i,l){if(1&i&&t.nrm(0,"fa-icon",22),2&i){const e=t.XpG();t.Y8G("icon",e.faCircleNotch)}}let at=(()=>{class i{get f(){return this.toothServiceForm.controls}onSubmit(){this.is_saving=!0,this.http.post("dental/tooth-service",this.toothServiceForm.value).subscribe({next:e=>{this.toastr.success("Successfully recorded","Tooth Service"),this.is_saving=!1,this.closeModal()},error:e=>{this.http.showError(e.error.message,"Tooth Service")}})}createForm(){this.toothServiceForm=this.formBuilder.nonNullable.group({id:[""],consult_id:[this.selected_visit.id,[s.k0.required]],patient_id:[this.selected_visit.patient.id,[s.k0.required]],tooth_number:[this.selected_tooth.tooth_number,[s.k0.required]],service_code:[null,[s.k0.required]],remarks:[null]})}loadLibraries(){this.http.get("libraries/dental-tooth-service").subscribe({next:e=>{this.tooth_services=e.data,this.createForm()},error:e=>{this.http.showError(e.error.message,"Tooth Services Library")}})}closeModal(){this.toggleModal.emit("tooth_services")}constructor(e,n,o){this.http=e,this.toastr=n,this.formBuilder=o,this.toggleModal=new t.bkB,this.faSave=b.hSh,this.faCircleNotch=_.s4k,this.tooth_services=[],this.is_saving=!1,this.toothServiceForm=new s.gE({consult_id:new s.MJ(""),patient_id:new s.MJ(""),tooth_number:new s.MJ(null),service_code:new s.MJ(null),remarks:new s.MJ(null)})}ngOnInit(){this.loadLibraries()}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(g.k),t.rXU(y.tw),t.rXU(s.ok))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-tooth-services"]],inputs:{selected_tooth:"selected_tooth",selected_visit:"selected_visit"},outputs:{toggleModal:"toggleModal"},standalone:!1,decls:26,vars:7,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"overflow-y-auto","h-auto","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"w-full","max-w-3xl","text-left","text-gray-500","dark:text-gray-400"],[3,"submit","formGroup"],[1,"m-5"],["for","service_code"],["id","service_code","formControlName","service_code",1,"input"],[3,"value",4,"ngFor","ngForOf"],["for","remarks"],["type","text","id","remarks","formControlName","remarks",1,"input"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"btn-save","bg-gray-400",3,"click"],["type","button h-10",1,"btn-save",3,"click","disabled"],[3,"icon",4,"ngIf"],["animation","spin",3,"icon",4,"ngIf"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[3,"value"],[3,"icon"],["animation","spin",3,"icon"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.EFF(5),t.k0s()(),t.j41(6,"div",5)(7,"div",6)(8,"form",7),t.bIt("submit",function(){return o.onSubmit()}),t.j41(9,"div",8)(10,"label",9),t.EFF(11,"Service Done"),t.k0s(),t.j41(12,"select",10),t.DNE(13,nt,2,2,"option",11),t.k0s()(),t.j41(14,"div",8)(15,"label",12),t.EFF(16,"Remarks"),t.k0s(),t.nrm(17,"input",13),t.k0s()()()(),t.j41(18,"div",14)(19,"button",15),t.bIt("click",function(){return o.closeModal()}),t.EFF(20,"Cancel"),t.k0s(),t.j41(21,"button",16),t.bIt("click",function(){return o.onSubmit()}),t.DNE(22,st,1,1,"fa-icon",17)(23,lt,1,1,"fa-icon",18),t.EFF(24),t.k0s()()()()(),t.nrm(25,"div",19)),2&n&&(t.R7$(5),t.SpI(" Service for Tooth (#",o.selected_tooth.tooth_number,") "),t.R7$(3),t.Y8G("formGroup",o.toothServiceForm),t.R7$(5),t.Y8G("ngForOf",o.tooth_services),t.R7$(8),t.Y8G("disabled",o.toothServiceForm.invalid||o.is_saving),t.R7$(),t.Y8G("ngIf",o.is_saving),t.R7$(),t.Y8G("ngIf",o.is_saving),t.R7$(),t.SpI(" ",o.is_saving?"Saving":"Save"," "))},dependencies:[a.Sq,a.bT,f.aY,s.qT,s.xH,s.y7,s.me,s.wz,s.BC,s.cb,s.j4,s.JD],encapsulation:2})}}return i})();function rt(i,l){1&i&&(t.j41(0,"span",35),t.EFF(1," (from previous visit) "),t.k0s())}function dt(i,l){if(1&i&&(t.j41(0,"option",45),t.EFF(1),t.k0s()),2&i){const e=l.$implicit;t.Y8G("value",e.id),t.R7$(),t.JRh(e.desc)}}function ct(i,l){if(1&i&&(t.j41(0,"option",45),t.EFF(1),t.k0s()),2&i){const e=l.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ","Y"===e.id?"\u2713":e.id," ")}}function _t(i,l){if(1&i){const e=t.RV6();t.j41(0,"div",54)(1,"button",55),t.bIt("click",function(o){t.eBV(e);const r=t.XpG(2).$implicit,m=t.XpG(4);return t.Njj(m.toggleModal("tooth_services",r,o))}),t.nrm(2,"fa-icon",56),t.k0s()()}if(2&i){const e=t.XpG(6);t.R7$(2),t.Y8G("icon",e.faAdd)}}function ut(i,l){if(1&i){const e=t.RV6();t.j41(0,"div")(1,"button",57),t.bIt("click",function(){t.eBV(e);const o=t.XpG().$implicit,r=t.XpG(6);return t.Njj(r.toggleModal("delete-service",o))}),t.nrm(2,"fa-icon",58),t.k0s(),t.EFF(3),t.k0s()}if(2&i){const e=t.XpG().$implicit,n=t.XpG(6);t.R7$(2),t.Y8G("icon",n.faTrash),t.R7$(),t.SpI(" ",e.service_code," ")}}function pt(i,l){1&i&&t.nrm(0,"br")}function mt(i,l){if(1&i&&(t.j41(0,"div"),t.DNE(1,ut,4,2,"div",34)(2,pt,1,0,"br",34),t.k0s()),2&i){const e=l.$implicit,n=l.last;t.R7$(),t.Y8G("ngIf",e),t.R7$(),t.Y8G("ngIf",!n)}}function ht(i,l){if(1&i&&(t.j41(0,"div",52),t.DNE(1,_t,3,1,"div",53)(2,mt,3,2,"div",6),t.k0s()),2&i){const e=t.XpG().$implicit,n=t.XpG(4);t.R7$(),t.Y8G("ngIf",!n.current_services[e.tooth_number]),t.R7$(),t.Y8G("ngForOf",n.current_services[e.tooth_number])}}function ft(i,l){if(1&i){const e=t.RV6();t.j41(0,"div",48)(1,"span",49),t.EFF(2),t.k0s(),t.j41(3,"div")(4,"select",50),t.mxI("ngModelChange",function(o){const r=t.eBV(e).$implicit,m=t.XpG(4);return t.DH7(m.tooth_condition[r.tooth_number],o)||(m.tooth_condition[r.tooth_number]=o),t.Njj(o)}),t.DNE(5,ct,2,2,"option",39),t.k0s()(),t.DNE(6,ht,3,2,"div",51),t.k0s()}if(2&i){const e=l.$implicit,n=t.XpG(4);t.R7$(2),t.JRh(e.tooth_number),t.R7$(2),t.R50("ngModel",n.tooth_condition[e.tooth_number]),t.R7$(),t.Y8G("ngForOf",n.tooth_condition_legend),t.R7$(),t.Y8G("ngIf",n.consultCondition)}}function gt(i,l){if(1&i&&(t.j41(0,"div",46),t.DNE(1,ft,7,4,"div",47),t.k0s()),2&i){const e=l.$implicit;t.R7$(),t.Y8G("ngForOf",e)}}function bt(i,l){if(1&i&&t.nrm(0,"fa-icon",56),2&i){const e=t.XpG(3);t.Y8G("icon",e.faSave)}}function vt(i,l){if(1&i&&t.nrm(0,"fa-icon",59),2&i){const e=t.XpG(3);t.Y8G("icon",e.faCircleNotch)}}function Ct(i,l){if(1&i){const e=t.RV6();t.j41(0,"div")(1,"div",36)(2,"span",37),t.EFF(3,"Tooth Condition"),t.k0s(),t.j41(4,"select",38),t.mxI("ngModelChange",function(o){t.eBV(e);const r=t.XpG().$implicit,m=t.XpG();return t.DH7(m.condition[r.title],o)||(m.condition[r.title]=o),t.Njj(o)}),t.bIt("change",function(){t.eBV(e);const o=t.XpG().$implicit,r=t.XpG();return t.Njj(r.updateConditions(o.title))}),t.DNE(5,dt,2,2,"option",39),t.k0s()(),t.DNE(6,gt,2,1,"div",40),t.j41(7,"div",41)(8,"button",42),t.bIt("click",function(){t.eBV(e);const o=t.XpG().$implicit,r=t.XpG();return t.Njj(r.onSubmit(o.title))}),t.DNE(9,bt,1,1,"fa-icon",43)(10,vt,1,1,"fa-icon",44),t.EFF(11),t.k0s()()()}if(2&i){const e=t.XpG().$implicit,n=t.XpG();t.R7$(4),t.R50("ngModel",n.condition[e.title]),t.R7$(),t.Y8G("ngForOf",n.tooth_condition_legend),t.R7$(),t.Y8G("ngForOf",e.chart),t.R7$(2),t.Y8G("disabled",n.is_saving),t.R7$(),t.Y8G("ngIf",!n.is_saving),t.R7$(),t.Y8G("ngIf",n.is_saving),t.R7$(),t.SpI(" ",n.is_saving?"Saving ":"Save "," Tooth Condition ")}}function yt(i,l){if(1&i){const e=t.RV6();t.j41(0,"fieldset",29)(1,"legend",30)(2,"button",31),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.toggleChart(o.title))}),t.nrm(3,"fa-icon",32),t.k0s(),t.EFF(4),t.DNE(5,rt,2,0,"span",33),t.k0s(),t.DNE(6,Ct,12,7,"div",34),t.k0s()}if(2&i){const e=l.$implicit,n=t.XpG();t.R7$(3),t.Y8G("icon",n.show_chart[e.title]?n.faChevronCircleUp:n.faChevronCircleDown),t.R7$(),t.SpI(" ",e.title," TOOTH CHART "),t.R7$(),t.Y8G("ngIf",!n.consultCondition),t.R7$(),t.Y8G("ngIf",n.show_chart[e.title])}}function Ft(i,l){if(1&i&&(t.j41(0,"div",60)(1,"strong"),t.EFF(2),t.k0s(),t.EFF(3),t.k0s()),2&i){const e=l.$implicit;t.R7$(2),t.JRh("Y"===e.id?"\u2713":e.id),t.R7$(),t.SpI(": ",e.desc," ")}}function kt(i,l){if(1&i&&(t.j41(0,"div")(1,"strong"),t.EFF(2),t.k0s(),t.EFF(3),t.k0s()),2&i){const e=l.$implicit;t.R7$(2),t.JRh(e.code),t.R7$(),t.SpI(": ",e.desc," ")}}function xt(i,l){if(1&i&&(t.j41(0,"td"),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",e.tooth_number," ")}}function jt(i,l){if(1&i&&(t.j41(0,"td"),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.JRh(t.i5U(2,1,e.consult.consult_date,"MM/dd/yyyy"))}}function wt(i,l){if(1&i&&(t.j41(0,"td"),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.tooth_service.desc)}}function Rt(i,l){if(1&i){const e=t.RV6();t.j41(0,"td")(1,"button",61),t.bIt("click",function(){t.eBV(e);const o=t.XpG().$implicit,r=t.XpG();return t.Njj(r.toggleModal("delete-service",o))}),t.nrm(2,"fa-icon",56),t.k0s()()}if(2&i){const e=t.XpG(2);t.R7$(2),t.Y8G("icon",e.faTrash)}}function Gt(i,l){if(1&i&&(t.j41(0,"tr"),t.DNE(1,xt,2,1,"td",34)(2,jt,3,4,"td",34)(3,wt,2,1,"td",34)(4,Rt,3,1,"td",34),t.k0s()),2&i){const e=l.$implicit,n=t.XpG();t.HbH(e.consult_id===n.selected_visit.id?"bg-yellow-100":""),t.R7$(),t.Y8G("ngIf",e),t.R7$(),t.Y8G("ngIf",e),t.R7$(),t.Y8G("ngIf",e),t.R7$(),t.Y8G("ngIf",e)}}function Et(i,l){if(1&i&&(t.j41(0,"div",62),t.nrm(1,"input",63),t.j41(2,"label",64),t.EFF(3),t.k0s()()),2&i){const e=l.$implicit;t.R7$(),t.Y8G("formControlName",e.column_name),t.BMQ("id",e.column_name),t.R7$(),t.BMQ("for",e.column_name),t.R7$(),t.JRh(e.desc)}}function St(i,l){if(1&i&&t.nrm(0,"fa-icon",65),2&i){const e=t.XpG();t.Y8G("icon",e.faSave)}}function It(i,l){if(1&i&&t.nrm(0,"fa-icon",66),2&i){const e=t.XpG();t.Y8G("icon",e.faCircleNotch)}}function Tt(i,l){if(1&i){const e=t.RV6();t.j41(0,"app-delete-item",67),t.bIt("toggleModal",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.toggleModal("delete-service"))}),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("url",e.url)("delete_id",e.delete_id)("delete_desc",e.delete_desc)}}function $t(i,l){if(1&i){const e=t.RV6();t.j41(0,"app-tooth-services",68),t.bIt("toggleModal",function(o){t.eBV(e);const r=t.XpG();return t.Njj(r.toggleModal(o))}),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("selected_tooth",e.selected_tooth)("selected_visit",e.selected_visit)}}let Mt=(()=>{class i{toggleChart(e){this.show_chart[e]=!this.show_chart[e]}submitCondition(){this.saving_oralCondition=!0,this.http.post("dental/oral-condition",this.oralConditionForm.value).subscribe({next:()=>{this.saving_oralCondition=!1,this.loadSelectedConsult.emit(),this.toastr.success("Successfully Recorded","Oral Health Condition")},error:e=>{this.http.showError(e.error.message,"Oral Health Condition")}})}onSubmit(e){this.is_saving=!0;let n=[];("adult"===e?this.adult_tooth_arr:this.temp_tooth_arr).forEach(m=>{n.push({tooth_number:m,tooth_condition:this.tooth_condition[m]})}),this.http.post("dental/tooth-condition",{patient_id:this.selected_visit.patient.id,consult_id:this.selected_visit.id,tooth_arr:n}).subscribe({next:()=>{this.is_saving=!1,this.loadSelectedConsult.emit(),this.toastr.success("Successfully Recorded","Tooth Condition")},error:m=>{this.http.showError(m.error.message,"Tooth Condition"),this.is_saving=!1}})}patchToothCondition(){this.consultCondition=Object.keys(this.selected_visit.consultToothCondition).length>0,Object.entries(this.consultCondition?this.selected_visit.consultToothCondition:this.selected_visit.latestToothCondition).forEach(([n,o],r)=>{this.tooth_condition[o.tooth_number]=o.tooth_condition}),this.selected_visit.dentalOralHealthCondition&&this.oralConditionForm.patchValue({...this.selected_visit.dentalOralHealthCondition})}toggleModal(e,n,o){o&&o.preventDefault(),"delete-service"===e&&n&&(this.url="dental/tooth-service/",this.delete_desc="Tooth Service",this.delete_id=n.id),this.selected_tooth=n,this.modals[e]=!this.modals[e],this.modals[e]||this.loadSelectedConsult.emit()}iterateServices(e){this.service_list=this.selected_visit.dentalToothService,this.current_services=[],Object.keys(this.selected_visit.dentalToothService).length>0&&Object.entries(this.selected_visit.dentalToothService).forEach(([n,o],r)=>{this.selected_visit.id===o.consult_id&&(this.current_services[o.tooth_number]?this.current_services[o.tooth_number].push({service_code:o.service_code,id:o.id}):this.current_services[o.tooth_number]=[{service_code:o.service_code,id:o.id}])}),this.createForm()}createForm(){this.oralConditionForm=this.formBuilder.nonNullable.group({patient_id:[this.selected_visit.patient.id,[s.k0.required]],consult_id:[this.selected_visit.id,[s.k0.required]],healthy_gums_flag:[!1],orally_fit_flag:[!1],oral_rehab_flag:[!1],dental_caries_flag:[!1],gingivitis_flag:[!1],periodontal_flag:[!1],debris_flag:[!1],calculus_flag:[!1],abnormal_growth_flag:[!1],cleft_lip_flag:[!1],supernumerary_flag:[!1],dento_facial_flag:[!1],others_flag:[!1],remarks:[null]}),this.patchToothCondition()}loadLibraries(){const e=this.http.get("libraries/dental-tooth-service"),n=this.http.get("libraries/dental-oral-condition");(0,M.p)([e,n]).subscribe({next:([o,r])=>{this.tooth_service_legend=o.data,this.oral_health_condition=r.data,this.iterateServices(!1)},error:o=>{this.http.showError(o.error.message,"Condition and Service Library")}})}updateConditions(e){("adult"===e?this.adult_tooth_arr:this.temp_tooth_arr).forEach(o=>{delete this.tooth_condition[o],this.tooth_condition[o]||(this.tooth_condition[o]=this.condition[e])})}constructor(e,n,o){this.http=e,this.toastr=n,this.formBuilder=o,this.loadSelectedConsult=new t.bkB,this.oralConditionForm=function ot(){return new s.gE({id:new s.MJ(null),patient_id:new s.MJ(null),consult_id:new s.MJ(null),healthy_gums_flag:new s.MJ(!1),orally_fit_flag:new s.MJ(!1),oral_rehab_flag:new s.MJ(!1),dental_caries_flag:new s.MJ(!1),gingivitis_flag:new s.MJ(!1),periodontal_flag:new s.MJ(!1),debris_flag:new s.MJ(!1),calculus_flag:new s.MJ(!1),abnormal_growth_flag:new s.MJ(!1),cleft_lip_flag:new s.MJ(!1),supernumerary_flag:new s.MJ(!1),dento_facial_flag:new s.MJ(""),others_flag:new s.MJ(""),remarks:new s.MJ("")})}(),this.adult_tooth_conditions=D,this.temp_tooth_condition=Y,this.adult_tooth_arr=tt,this.temp_tooth_arr=et,this.tooth_condition_legend=it,this.faTrash=_.yLS,this.faAdd=_.vkJ,this.faCheck=_.e68,this.faSave=b.hSh,this.faCircleNotch=_.s4k,this.faChevronCircleDown=_.DqM,this.faChevronCircleUp=_.AeV,this.modals=[],this.condition=[],this.service_list=[],this.current_services=[],this.tooth_condition=[],this.tooth_service_legend=[],this.is_saving=!1,this.show_form=!1,this.consultCondition=!1,this.show_chart={adult:!0,temporary:!0},this.tooth_chart=[{chart:D,title:"adult"},{chart:Y,title:"temporary"}],this.saving_oralCondition=!1}ngOnChanges(e){this.iterateServices(!0)}ngOnInit(){this.loadLibraries()}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(g.k),t.rXU(y.tw),t.rXU(s.ok))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-condition"]],inputs:{selected_visit:"selected_visit"},outputs:{loadSelectedConsult:"loadSelectedConsult"},standalone:!1,features:[t.OA$],decls:46,vars:12,consts:[["class","border border-slate-200 w-full rounded-md my-2",4,"ngFor","ngForOf"],[1,"border","border-slate-200","w-full","rounded-md","mb-2"],[1,"ml-5","font-semibold","text-xs"],[1,"grid","grid-cols-3","m-5","text-sm"],["class","flex",4,"ngFor","ngForOf"],[1,"border","border-slate-200","w-full","rounded-md"],[4,"ngFor","ngForOf"],[1,"mt-5","border","border-solid","border-gray-200","rounded-lg"],[1,"bg-blue-500","w-full","text-white","p-3","rounded-t-lg","justify-between","flex"],[1,"flex","flex-col","justify-center"],[1,"table-auto","w-11/12","text-center","m-5","mx-auto","border","border-slate-300","rounded-lg","shadow-md"],[1,"border-b"],[1,"px-3"],[3,"class",4,"ngFor","ngForOf"],[1,"pt-5"],[1,"border","border-solid","border-gray-200","rounded-lg"],[1,"bg-blue-500","w-full","text-white","p-3","rounded-t-lg","font-semibold"],[3,"ngSubmit","formGroup"],[1,"col-span-1","p-3"],[1,"grid","grid-cols-3","pl-3"],["class","col-span-1 mb-1",4,"ngFor","ngForOf"],[1,"block","m-3"],["rows","2","id","remarks","formControlName","remarks","placeholder","Remarks",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50"],[1,"text-right","m-5"],["type","submit",1,"btn-save",3,"disabled"],["class","mr-3",3,"icon",4,"ngIf"],["class","mr-3","animation","spin",3,"icon",4,"ngIf"],[3,"url","delete_id","delete_desc","toggleModal",4,"ngIf"],[3,"selected_tooth","selected_visit","toggleModal",4,"ngIf"],[1,"border","border-slate-200","w-full","rounded-md","my-2"],[1,"ml-3","text-sm","bg-blue-200","px-5","py-1","rounded-md","uppercase"],["type","button",3,"click"],[1,"mr-1","text-blue-500",3,"icon"],["class","text-red-500 text-sm lowercase",4,"ngIf"],[4,"ngIf"],[1,"text-red-500","text-sm","lowercase"],[1,"flex","justify-center","w-full","mt-3"],[1,"text-sm","mt-3"],[1,"input","w-32","mx-3",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","flex flex-wrap justify-center my-3 first:mt-24 mx-auto",4,"ngFor","ngForOf"],[1,"flex","justify-center","w-full","mb-3"],[1,"btn-save","h-9","mt-1",3,"click","disabled"],[3,"icon",4,"ngIf"],["animation","spin",3,"icon",4,"ngIf"],[3,"value"],[1,"flex","flex-wrap","justify-center","my-3","first:mt-24","mx-auto"],["class","w-14",4,"ngFor","ngForOf"],[1,"w-14"],[1,"ml-5"],[1,"input",3,"ngModelChange","ngModel"],["class","text-xs bg-gray-100 w-full border border-gray-300 px-0.5 mt-1",4,"ngIf"],[1,"text-xs","bg-gray-100","w-full","border","border-gray-300","px-0.5","mt-1"],["class","flex justify-center",4,"ngIf"],[1,"flex","justify-center"],["type","button",1,"text-xs","bg-blue-400","text-white","w-5","m-0.5","pb-0.5","rounded-full",3,"click"],[3,"icon"],[3,"click"],[1,"text-red-500",3,"icon"],["animation","spin",3,"icon"],[1,"flex"],["type","button",1,"text-red-500",3,"click"],[1,"col-span-1","mb-1"],["type","checkbox",1,"input-checkbox",3,"formControlName"],[1,"pl-2","text-sm"],[1,"mr-3",3,"icon"],["animation","spin",1,"mr-3",3,"icon"],[3,"toggleModal","url","delete_id","delete_desc"],[3,"toggleModal","selected_tooth","selected_visit"]],template:function(n,o){1&n&&(t.DNE(0,yt,7,4,"fieldset",0),t.j41(1,"fieldset",1)(2,"legend",2),t.EFF(3,"TOOTH CONDITION LEGEND"),t.k0s(),t.j41(4,"div",3),t.DNE(5,Ft,4,2,"div",4),t.k0s()(),t.j41(6,"fieldset",5)(7,"legend",2),t.EFF(8,"TOOTH SERVICE LEGEND"),t.k0s(),t.j41(9,"div",3),t.DNE(10,kt,4,2,"div",6),t.k0s()(),t.j41(11,"div",7)(12,"div",8)(13,"span"),t.EFF(14,"Tooth Services"),t.k0s()(),t.j41(15,"div",9)(16,"table",10)(17,"thead",11)(18,"tr")(19,"th",12),t.EFF(20,"Tooth Number"),t.k0s(),t.j41(21,"th",12),t.EFF(22,"Date of Service"),t.k0s(),t.j41(23,"th",12),t.EFF(24,"Service Done"),t.k0s(),t.j41(25,"th",12),t.EFF(26,"Action"),t.k0s()()(),t.j41(27,"tbody"),t.DNE(28,Gt,5,6,"tr",13),t.k0s()()()(),t.j41(29,"div",14)(30,"div",15)(31,"div",16),t.EFF(32," Oral Health Condition "),t.k0s(),t.j41(33,"form",17),t.bIt("ngSubmit",function(){return o.submitCondition()}),t.j41(34,"div",18)(35,"div",19),t.DNE(36,Et,4,4,"div",20),t.k0s(),t.j41(37,"div",21),t.nrm(38,"textarea",22),t.k0s()(),t.j41(39,"div",23)(40,"button",24),t.DNE(41,St,1,1,"fa-icon",25)(42,It,1,1,"fa-icon",26),t.EFF(43),t.k0s()()()()(),t.DNE(44,Tt,1,3,"app-delete-item",27)(45,$t,1,2,"app-tooth-services",28)),2&n&&(t.Y8G("ngForOf",o.tooth_chart),t.R7$(5),t.Y8G("ngForOf",o.tooth_condition_legend),t.R7$(5),t.Y8G("ngForOf",o.tooth_service_legend),t.R7$(18),t.Y8G("ngForOf",o.service_list),t.R7$(5),t.Y8G("formGroup",o.oralConditionForm),t.R7$(3),t.Y8G("ngForOf",o.oral_health_condition),t.R7$(4),t.Y8G("disabled",o.saving_oralCondition),t.R7$(),t.Y8G("ngIf",!o.saving_oralCondition),t.R7$(),t.Y8G("ngIf",o.saving_oralCondition),t.R7$(),t.SpI(" ",o.saving_oralCondition?"Saving":"Save"," "),t.R7$(),t.Y8G("ngIf",o.modals["delete-service"]),t.R7$(),t.Y8G("ngIf",o.modals.tooth_services))},dependencies:[a.Sq,a.bT,f.aY,s.qT,s.xH,s.y7,s.me,s.Zm,s.wz,s.BC,s.cb,s.vS,s.j4,s.JD,j.c,at,a.vh],encapsulation:2})}}return i})();function Dt(i,l){if(1&i&&(t.j41(0,"option",21),t.EFF(1),t.k0s()),2&i){const e=l.$implicit;t.Y8G("value",e.id),t.R7$(),t.JRh(e.desc)}}function Yt(i,l){if(1&i&&t.nrm(0,"fa-icon",22),2&i){const e=t.XpG();t.Y8G("icon",e.faPlus)}}function Nt(i,l){if(1&i&&t.nrm(0,"fa-icon",23),2&i){const e=t.XpG();t.Y8G("icon",e.faCircleNotch)}}function Ht(i,l){if(1&i&&(t.j41(0,"span"),t.nrm(1,"br"),t.EFF(2),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(2),t.JRh(e.remarks)}}function Xt(i,l){if(1&i){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.DNE(3,Ht,3,1,"span",24),t.k0s(),t.j41(4,"td"),t.EFF(5),t.nI1(6,"date"),t.k0s(),t.j41(7,"td")(8,"button",25),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.toggleModal("delete-item",o))}),t.nrm(9,"fa-icon",26),t.k0s()()()}if(2&i){const e=l.$implicit,n=t.XpG();t.R7$(2),t.SpI(" ",e.service.desc," "),t.R7$(),t.Y8G("ngIf",e.remarks),t.R7$(2),t.JRh(t.i5U(6,4,e.service_date,"MM/dd/yyyy")),t.R7$(4),t.Y8G("icon",n.faTrash)}}function Ot(i,l){if(1&i){const e=t.RV6();t.j41(0,"app-delete-item",27),t.bIt("toggleModal",function(o){t.eBV(e);const r=t.XpG();return t.Njj(r.toggleModal(o))}),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("url",e.url)("delete_id",e.delete_id)("delete_desc",e.delete_desc)}}let Vt=(()=>{class i{onSubmit(){this.is_saving=!0,this.http.post("dental/service",this.dentalServiceForm.value).subscribe({next:e=>{this.is_saving=!1,this.loadSelectedConsult.emit(),this.createForm(),this.toastr.success("Successfully "+(this.dentalServiceForm.value.id?"updated":"recorded"),"Dental Service")},error:e=>{this.http.showError(e.error.message,"Dental Service"),this.is_saving=!1}})}createForm(){this.dentalServiceForm=this.formBuilder.group({id:[""],consult_id:[this.selected_visit.id,[s.k0.required]],patient_id:[this.selected_visit.patient.id,[s.k0.required]],service_date:["",[s.k0.required]],service_id:["",[s.k0.required]]})}toggleModal(e,n){n&&(this.delete_id=n.id),this.modals[e]=!this.modals[e],!1===this.modals[e]&&this.loadSelectedConsult.emit()}loadLibraries(){this.http.get("libraries/dental-service").subscribe({next:e=>{this.service_list=e.data,this.createForm()},error:e=>{this.http.showError(e.error.message,"Dental Services")}})}constructor(e,n,o){this.http=e,this.toastr=n,this.formBuilder=o,this.loadSelectedConsult=new t.bkB,this.faCircleNotch=_.s4k,this.faPlus=_.QLR,this.faTrash=_.yLS,this.is_saving=!1,this.modals=[],this.url="dental/service/",this.delete_desc="Dental Service",this.dentalServiceForm=new s.gE({id:new s.MJ(null),consult_id:new s.MJ(null),patient_id:new s.MJ(null),service_date:new s.MJ(null),service_id:new s.MJ(null)}),this.service_list=[]}ngOnInit(){this.loadLibraries()}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(g.k),t.rXU(y.tw),t.rXU(s.ok))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-services"]],inputs:{selected_visit:"selected_visit"},outputs:{loadSelectedConsult:"loadSelectedConsult"},standalone:!1,decls:35,vars:8,consts:[[1,"mt-5","border","border-solid","border-gray-200","rounded-lg"],[1,"bg-blue-500","w-full","text-white","p-3","rounded-t-lg","justify-between","flex"],[1,"flex","flex-col","justify-center"],[3,"submit","formGroup"],[1,"grid","grid-cols-5","m-3","p-3","gap-x-3","border","border-slate-300","shadow-md","rounded-md","bg-slate-100"],[1,"col-span-2"],["for","service_date"],["id","service_date","type","date","formControlName","service_date","placeholder","Service date",1,"input"],[1,"col-span-3"],["for","service_id"],["id","service_id","type","text","formControlName","service_id","placeholder","service",1,"input"],[3,"value",4,"ngFor","ngForOf"],[1,"col-span-5","flex","justify-end","mt-3"],["type","submit",1,"btn-save","text-xs",3,"disabled"],["class","mr-2",3,"icon",4,"ngIf"],["class","mr-2","animation","spin",3,"icon",4,"ngIf"],[1,"table-auto","w-11/12","text-center","m-5","mx-auto","border","border-slate-300","rounded-lg","shadow-md"],[1,"border-b"],[1,"px-3"],[4,"ngFor","ngForOf"],[3,"url","delete_id","delete_desc","toggleModal",4,"ngIf"],[3,"value"],[1,"mr-2",3,"icon"],["animation","spin",1,"mr-2",3,"icon"],[4,"ngIf"],["type","button",1,"text-red-500",3,"click"],[3,"icon"],[3,"toggleModal","url","delete_id","delete_desc"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"span"),t.EFF(3,"Dental Services"),t.k0s()(),t.j41(4,"div",2)(5,"form",3),t.bIt("submit",function(){return o.onSubmit()}),t.j41(6,"fieldset",4)(7,"legend"),t.EFF(8,"New service detail"),t.k0s(),t.j41(9,"div",5)(10,"label",6),t.EFF(11,"Service Date"),t.k0s(),t.nrm(12,"input",7),t.k0s(),t.j41(13,"div",8)(14,"label",9),t.EFF(15,"Service done"),t.k0s(),t.j41(16,"select",10),t.DNE(17,Dt,2,2,"option",11),t.k0s()(),t.j41(18,"div",12)(19,"button",13),t.DNE(20,Yt,1,1,"fa-icon",14)(21,Nt,1,1,"fa-icon",15),t.EFF(22),t.k0s()()()(),t.j41(23,"table",16)(24,"thead",17)(25,"tr")(26,"th",18),t.EFF(27,"Dental Service"),t.k0s(),t.j41(28,"th",18),t.EFF(29,"Date of Service"),t.k0s(),t.j41(30,"th",18),t.EFF(31,"Action"),t.k0s()()(),t.j41(32,"tbody"),t.DNE(33,Xt,10,7,"tr",19),t.k0s()()()(),t.DNE(34,Ot,1,3,"app-delete-item",20)),2&n&&(t.R7$(5),t.Y8G("formGroup",o.dentalServiceForm),t.R7$(12),t.Y8G("ngForOf",o.service_list),t.R7$(2),t.Y8G("disabled",o.dentalServiceForm.invalid||o.is_saving),t.R7$(),t.Y8G("ngIf",!o.is_saving),t.R7$(),t.Y8G("ngIf",o.is_saving),t.R7$(),t.SpI(" ",o.is_saving?"Saving":"Add"," "),t.R7$(11),t.Y8G("ngForOf",null==o.selected_visit?null:o.selected_visit.dentalService),t.R7$(),t.Y8G("ngIf",o.modals["delete-item"]))},dependencies:[a.Sq,a.bT,f.aY,s.qT,s.xH,s.y7,s.me,s.wz,s.BC,s.cb,s.j4,s.JD,j.c,a.vh],encapsulation:2})}}return i})();function Bt(i,l){if(1&i&&t.nrm(0,"fa-icon",21),2&i){const e=t.XpG();t.Y8G("icon",e.faPlus)}}function Jt(i,l){if(1&i&&t.nrm(0,"fa-icon",22),2&i){const e=t.XpG();t.Y8G("icon",e.faCircleNotch)}}function Ut(i,l){if(1&i){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.nI1(5,"date"),t.k0s(),t.j41(6,"td"),t.EFF(7),t.nI1(8,"date"),t.k0s(),t.j41(9,"td")(10,"button",23),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.toggleModal("delete-item",o))}),t.nrm(11,"fa-icon",24),t.k0s()()()}if(2&i){const e=l.$implicit,n=t.XpG();t.R7$(2),t.JRh(e.cause),t.R7$(2),t.JRh(t.i5U(5,4,e.admission_date,"MM/dd/yyyy")),t.R7$(3),t.JRh(t.i5U(8,7,e.discharge_date,"MM/dd/yyyy")),t.R7$(4),t.Y8G("icon",n.faTrash)}}function Pt(i,l){if(1&i){const e=t.RV6();t.j41(0,"app-delete-item",25),t.bIt("toggleModal",function(o){t.eBV(e);const r=t.XpG();return t.Njj(r.toggleModal(o))}),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("url",e.url)("delete_id",e.delete_id)("delete_desc",e.delete_desc)}}let Lt=(()=>{class i{onSubmit(){this.is_saving=!0,this.http.post("patient-hospitalizaion-history/history",this.hospitalizationHistoryForm.value).subscribe({next:e=>{this.is_saving=!1,this.loadSelectedConsult.emit(),this.createForm(),this.toastr.success("Successfully "+(this.hospitalizationHistoryForm.value.id?"updated":"recorded"),"Hospitalization History")},error:e=>{this.http.showError(e.error.message,"Hospitalization History"),this.is_saving=!1}})}toggleModal(e,n){n&&(this.delete_id=n.id),this.modals[e]=!this.modals[e],!1===this.modals[e]&&this.loadSelectedConsult.emit()}createForm(){this.hospitalizationHistoryForm=this.formBuilder.nonNullable.group({id:[""],patient_id:[this.selected_visit.patient.id,[s.k0.required]],admission_date:["",[s.k0.required]],discharge_date:["",[s.k0.required]],cause:["",[s.k0.required,s.k0.minLength(3)]]})}constructor(e,n,o){this.http=e,this.toastr=n,this.formBuilder=o,this.loadSelectedConsult=new t.bkB,this.faPlus=_.QLR,this.faCircleNotch=_.s4k,this.faSave=b.hSh,this.faTrash=_.yLS,this.modals=[],this.is_saving=!1,this.hospitalizationHistoryForm=new s.gE({id:new s.MJ(null),patient_id:new s.MJ(null),admission_date:new s.MJ(null),discharge_date:new s.MJ(null),cause:new s.MJ(null)}),this.url="patient-hospitalizaion-history/history/",this.delete_desc="Hospitalization history"}ngOnInit(){this.createForm()}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(g.k),t.rXU(y.tw),t.rXU(s.ok))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-hospitalization-history"]],inputs:{selected_visit:"selected_visit"},outputs:{loadSelectedConsult:"loadSelectedConsult"},standalone:!1,decls:40,vars:7,consts:[[1,"mt-5","border","border-solid","border-gray-200","rounded-lg"],[1,"bg-blue-500","w-full","text-white","p-3","rounded-t-lg","justify-between","flex"],[1,"flex","flex-col","justify-center"],[3,"submit","formGroup"],[1,"grid","grid-cols-2","m-3","p-3","gap-x-3","border","border-slate-300","shadow-md","rounded-md","bg-slate-100"],["for","admission_date"],["id","admission_date","type","date","formControlName","admission_date","placeholder","admission date",1,"input"],["for","discharge_date"],["id","discharge_date","type","date","formControlName","discharge_date","placeholder","discharge date",1,"input"],[1,"col-span-2"],["for","cause"],["id","cause","type","text","formControlName","cause","placeholder","Cause",1,"input"],[1,"col-span-2","flex","justify-end","mt-3"],["type","submit",1,"btn-save","text-xs",3,"disabled"],["class","mr-2",3,"icon",4,"ngIf"],["class","mr-2","animation","spin",3,"icon",4,"ngIf"],[1,"table-auto","w-11/12","text-center","m-5","mx-auto","border","border-slate-300","rounded-lg","shadow-md"],[1,"border-b"],[1,"px-3"],[4,"ngFor","ngForOf"],[3,"url","delete_id","delete_desc","toggleModal",4,"ngIf"],[1,"mr-2",3,"icon"],["animation","spin",1,"mr-2",3,"icon"],["type","button",1,"text-red-500",3,"click"],[3,"icon"],[3,"toggleModal","url","delete_id","delete_desc"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"span"),t.EFF(3,"Hospitalization History"),t.k0s()(),t.j41(4,"div",2)(5,"form",3),t.bIt("submit",function(){return o.onSubmit()}),t.j41(6,"fieldset",4)(7,"legend"),t.EFF(8,"Hospitalization Details"),t.k0s(),t.j41(9,"div")(10,"label",5),t.EFF(11,"Admission Date"),t.k0s(),t.nrm(12,"input",6),t.k0s(),t.j41(13,"div")(14,"label",7),t.EFF(15,"Discharge Date"),t.k0s(),t.nrm(16,"input",8),t.k0s(),t.j41(17,"div",9)(18,"label",10),t.EFF(19,"Cause of Hospitalization"),t.k0s(),t.nrm(20,"input",11),t.k0s(),t.j41(21,"div",12)(22,"button",13),t.DNE(23,Bt,1,1,"fa-icon",14)(24,Jt,1,1,"fa-icon",15),t.EFF(25),t.k0s()()()(),t.j41(26,"table",16)(27,"thead",17)(28,"tr")(29,"th",18),t.EFF(30,"Cause of Hospitalization"),t.k0s(),t.j41(31,"th",18),t.EFF(32,"Admission Date"),t.k0s(),t.j41(33,"th",18),t.EFF(34,"Discharge Date"),t.k0s(),t.j41(35,"th",18),t.EFF(36,"Action"),t.k0s()()(),t.j41(37,"tbody"),t.DNE(38,Ut,12,10,"tr",19),t.k0s()()()(),t.DNE(39,Pt,1,3,"app-delete-item",20)),2&n&&(t.R7$(5),t.Y8G("formGroup",o.hospitalizationHistoryForm),t.R7$(17),t.Y8G("disabled",o.hospitalizationHistoryForm.invalid||o.is_saving),t.R7$(),t.Y8G("ngIf",!o.is_saving),t.R7$(),t.Y8G("ngIf",o.is_saving),t.R7$(),t.SpI(" ",o.is_saving?"Saving":"Add"," "),t.R7$(13),t.Y8G("ngForOf",null==o.selected_visit?null:o.selected_visit.dentalHospitalizationHistory),t.R7$(),t.Y8G("ngIf",o.modals["delete-item"]))},dependencies:[a.Sq,a.bT,f.aY,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,j.c,a.vh],encapsulation:2})}}return i})();function At(i,l){if(1&i&&t.nrm(0,"fa-icon",20),2&i){const e=t.XpG();t.Y8G("icon",e.faPlus)}}function zt(i,l){if(1&i&&t.nrm(0,"fa-icon",21),2&i){const e=t.XpG();t.Y8G("icon",e.faCircleNotch)}}function Wt(i,l){if(1&i){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.nI1(5,"date"),t.k0s(),t.j41(6,"td")(7,"button",22),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.toggleModal("delete-item",o))}),t.nrm(8,"fa-icon",23),t.k0s()()()}if(2&i){const e=l.$implicit,n=t.XpG();t.R7$(2),t.JRh(e.operation),t.R7$(2),t.JRh(t.i5U(5,3,e.operation_date,"MM/dd/yyyy")),t.R7$(4),t.Y8G("icon",n.faTrash)}}function Kt(i,l){if(1&i){const e=t.RV6();t.j41(0,"app-delete-item",24),t.bIt("toggleModal",function(o){t.eBV(e);const r=t.XpG();return t.Njj(r.toggleModal(o))}),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("url",e.url)("delete_id",e.delete_id)("delete_desc",e.delete_desc)}}let Qt=(()=>{class i{onSubmit(){this.is_saving=!0,this.http.post("patient-surgical-history/history",this.surgicalHistoryForm.value).subscribe({next:e=>{this.is_saving=!1,this.loadSelectedConsult.emit(),this.createForm(),this.toastr.success("Successfully "+(this.surgicalHistoryForm.value.id?"updated":"recorded"),"Surgical History")},error:e=>{this.http.showError(e.error.message,"Surgical History"),this.is_saving=!1}})}get f(){return this.surgicalHistoryForm.controls}toggleModal(e,n){n&&(this.delete_id=n.id),this.modals[e]=!this.modals[e],!1===this.modals[e]&&this.loadSelectedConsult.emit()}createForm(){this.surgicalHistoryForm=this.formBuilder.nonNullable.group({id:[""],patient_id:[this.selected_visit.patient.id,[s.k0.required,s.k0.minLength(2)]],operation_date:["",[s.k0.required,s.k0.minLength(2)]],operation:["",[s.k0.required,s.k0.minLength(2)]]})}constructor(e,n,o){this.http=e,this.toastr=n,this.formBuilder=o,this.loadSelectedConsult=new t.bkB,this.faEdit=b.MT7,this.faPlus=_.QLR,this.faTrash=_.yLS,this.faCircleNotch=_.s4k,this.modals=[],this.is_saving=!1,this.surgicalHistoryForm=new s.gE({id:new s.MJ(null),patient_id:new s.MJ(null),operation_date:new s.MJ(null),operation:new s.MJ(null)}),this.url="patient-surgical-history/history/",this.delete_desc="Surgical history"}ngOnInit(){this.createForm()}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(g.k),t.rXU(y.tw),t.rXU(s.ok))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-surgical-history"]],inputs:{selected_visit:"selected_visit"},outputs:{loadSelectedConsult:"loadSelectedConsult"},standalone:!1,decls:34,vars:7,consts:[[1,"my-5","border","border-solid","border-gray-200","rounded-lg"],[1,"bg-blue-500","w-full","text-white","p-3","rounded-t-lg","justify-between","flex"],[1,"flex","flex-col","justify-center"],[3,"submit","formGroup"],[1,"grid","grid-cols-5","m-3","p-3","gap-x-3","border","border-slate-300","shadow-md","rounded-md","bg-slate-100"],[1,"col-span-2"],["for","operation_date"],["id","operation_date","type","date","formControlName","operation_date","placeholder","admission date",1,"input"],[1,"col-span-3"],["for","operation"],["id","operation","type","text","formControlName","operation","placeholder","Operation",1,"input"],[1,"col-span-5","flex","justify-end","mt-3"],["type","submit",1,"btn-save","text-xs",3,"disabled"],["class","mr-2",3,"icon",4,"ngIf"],["class","mr-2","animation","spin",3,"icon",4,"ngIf"],[1,"table-auto","w-11/12","text-center","m-5","mx-auto","border","border-slate-300","rounded-lg","shadow-md"],[1,"border-b"],[1,"px-3"],[4,"ngFor","ngForOf"],[3,"url","delete_id","delete_desc","toggleModal",4,"ngIf"],[1,"mr-2",3,"icon"],["animation","spin",1,"mr-2",3,"icon"],["type","button",1,"text-red-500",3,"click"],[3,"icon"],[3,"toggleModal","url","delete_id","delete_desc"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"span"),t.EFF(3,"Surgical History"),t.k0s()(),t.j41(4,"div",2)(5,"form",3),t.bIt("submit",function(){return o.onSubmit()}),t.j41(6,"fieldset",4)(7,"legend"),t.EFF(8,"Surgery Details"),t.k0s(),t.j41(9,"div",5)(10,"label",6),t.EFF(11,"Date of Operation"),t.k0s(),t.nrm(12,"input",7),t.k0s(),t.j41(13,"div",8)(14,"label",9),t.EFF(15,"Operation"),t.k0s(),t.nrm(16,"input",10),t.k0s(),t.j41(17,"div",11)(18,"button",12),t.DNE(19,At,1,1,"fa-icon",13)(20,zt,1,1,"fa-icon",14),t.EFF(21),t.k0s()()()(),t.j41(22,"table",15)(23,"thead",16)(24,"tr")(25,"th",17),t.EFF(26,"Operation Done"),t.k0s(),t.j41(27,"th",17),t.EFF(28,"Operation Date"),t.k0s(),t.j41(29,"th",17),t.EFF(30,"Action"),t.k0s()()(),t.j41(31,"tbody"),t.DNE(32,Wt,9,6,"tr",18),t.k0s()()()(),t.DNE(33,Kt,1,3,"app-delete-item",19)),2&n&&(t.R7$(5),t.Y8G("formGroup",o.surgicalHistoryForm),t.R7$(13),t.Y8G("disabled",o.surgicalHistoryForm.invalid||o.is_saving),t.R7$(),t.Y8G("ngIf",!o.is_saving),t.R7$(),t.Y8G("ngIf",o.is_saving),t.R7$(),t.SpI(" ",o.is_saving?"Saving":"Add"," "),t.R7$(11),t.Y8G("ngForOf",null==o.selected_visit?null:o.selected_visit.dentalSurgicalHistory),t.R7$(),t.Y8G("ngIf",o.modals["delete-item"]))},dependencies:[a.Sq,a.bT,f.aY,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,j.c,a.vh],encapsulation:2})}}return i})();function qt(i,l){if(1&i){const e=t.RV6();t.j41(0,"button",2),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.switchPage(1))}),t.EFF(1," VISIT DETAILS "),t.k0s()}if(2&i){const e=t.XpG();t.HbH(2===e.pages?"tabs-main-true rounded-t-md":"tabs-main-false")}}function Zt(i,l){if(1&i){const e=t.RV6();t.j41(0,"button",11),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.toggleModal("end_visit"))}),t.nrm(1,"fa-icon",12),t.EFF(2," End Visit "),t.k0s()}if(2&i){const e=t.XpG();t.R7$(),t.Y8G("icon",e.faDoorClosed)}}function te(i,l){if(1&i){const e=t.RV6();t.j41(0,"nav",13)(1,"div",14)(2,"button",15),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.switchTab(1))}),t.EFF(3," COMPLAINTS "),t.k0s(),t.j41(4,"button",15),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.switchTab(2))}),t.EFF(5," HISTORY "),t.k0s(),t.j41(6,"button",15),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.switchTab(3))}),t.EFF(7," TOOTH CONDITION & SERVICES "),t.k0s(),t.j41(8,"button",15),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.switchTab(4))}),t.EFF(9," DIAGNOSIS & TREATMENT "),t.k0s()()()}if(2&i){const e=t.XpG();t.R7$(2),t.HbH(1===e.module?"tabs-main-true":"tabs-main-false"),t.R7$(2),t.HbH(2===e.module?"tabs-main-true":"tabs-main-false"),t.R7$(2),t.HbH(3===e.module?"tabs-main-true":"tabs-main-false"),t.R7$(2),t.HbH(4===e.module?"tabs-main-true":"tabs-main-false")}}function ee(i,l){1&i&&(t.j41(0,"div",20),t.EFF(1," There is an ongoing TB treatment for this patient on another facility. You are not allowed to create a new treatment or view previous treatment from other facilities. "),t.k0s())}function ie(i,l){if(1&i&&(t.j41(0,"div",21)(1,"div",22),t.nrm(2,"fa-icon",23),t.k0s(),t.j41(3,"div",24),t.EFF(4,"Fetching history..."),t.k0s()()),2&i){const e=t.XpG(2);t.R7$(2),t.Y8G("icon",e.faCircleNotch)}}function oe(i,l){1&i&&(t.j41(0,"td",33)(1,"div",34),t.EFF(2," No records to show... "),t.k0s()())}function ne(i,l){if(1&i){const e=t.RV6();t.j41(0,"button",35),t.bIt("click",function(){t.eBV(e);const o=t.XpG(),r=o.$implicit,m=o.index,w=t.XpG(3);return t.Njj(w.switchPage(2,r,m))}),t.EFF(1),t.k0s()}if(2&i){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",e.consult_done?"View":"Open"," ")}}function se(i,l){if(1&i&&(t.j41(0,"tr",29),t.DNE(1,oe,3,0,"td",30),t.j41(2,"td",31),t.EFF(3),t.nI1(4,"date"),t.k0s(),t.j41(5,"td",31),t.EFF(6),t.k0s(),t.j41(7,"td",31),t.DNE(8,ne,2,1,"button",32),t.k0s()()),2&i){const e=l.$implicit,n=t.XpG(3);t.R7$(),t.Y8G("ngIf",!n.consult_details),t.R7$(2),t.SpI(" ",t.brH(4,4,e.consult_date,"MM/dd/yyyy","Asia/Manila")," "),t.R7$(3),t.SpI(" ",e.consult_done?"Done":"Ongoing"," "),t.R7$(2),t.Y8G("ngIf",n.user_facility===e.facility.code)}}function le(i,l){if(1&i&&(t.j41(0,"table",25)(1,"thead",26)(2,"tr")(3,"th",27),t.EFF(4,"Consult Date"),t.k0s(),t.j41(5,"th",27),t.EFF(6,"Status"),t.k0s(),t.j41(7,"th",27),t.EFF(8,"Action"),t.k0s()()(),t.j41(9,"tbody"),t.DNE(10,se,9,8,"tr",28),t.k0s()()),2&i){const e=t.XpG(2);t.R7$(10),t.Y8G("ngForOf",e.consult_details)}}function ae(i,l){if(1&i&&(t.j41(0,"div",16),t.DNE(1,ee,2,0,"div",17)(2,ie,5,1,"div",18)(3,le,11,1,"table",19),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.selected_dental_consult&&(null==e.selected_dental_consult?null:e.selected_dental_consult.facility_code)!==e.user_facility),t.R7$(),t.Y8G("ngIf",e.fetching_history),t.R7$(),t.Y8G("ngIf",!e.fetching_history&&e.patient_dental_history)}}function re(i,l){if(1&i){const e=t.RV6();t.j41(0,"app-pregnant-tag",40),t.bIt("loadConsult",function(o){t.eBV(e);const r=t.XpG(2);return t.Njj(r.loadSelectedConsult(o))}),t.k0s()}if(2&i){const e=t.XpG(2);t.Y8G("consult_details",e.selected_visit)("have_complaint",e.have_complaint)("allowed_to_edit",e.allowed_to_edit)}}function de(i,l){if(1&i){const e=t.RV6();t.j41(0,"div",36),t.DNE(1,re,1,3,"app-pregnant-tag",37),t.j41(2,"app-complaint-history",38),t.bIt("loadConsult",function(o){t.eBV(e);const r=t.XpG();return t.Njj(r.loadSelectedConsult(o))}),t.k0s(),t.nrm(3,"app-consult-history",39),t.k0s()}if(2&i){const e=t.XpG();t.R7$(),t.Y8G("ngIf","F"===e.selected_visit.patient.gender),t.R7$(),t.Y8G("toggle_content",e.toggle_content)("consult_details",e.selected_visit)("have_complaint",e.have_complaint)("allowed_to_edit",e.allowed_to_edit),t.R7$(),t.Y8G("pt_group","dn")}}function ce(i,l){if(1&i){const e=t.RV6();t.j41(0,"div")(1,"app-history",41),t.bIt("loadSelectedConsult",function(o){t.eBV(e);const r=t.XpG();return t.Njj(r.loadSelectedConsult(o))}),t.k0s(),t.j41(2,"app-hospitalization-history",41),t.bIt("loadSelectedConsult",function(o){t.eBV(e);const r=t.XpG();return t.Njj(r.loadSelectedConsult(o))}),t.k0s(),t.j41(3,"app-surgical-history",41),t.bIt("loadSelectedConsult",function(o){t.eBV(e);const r=t.XpG();return t.Njj(r.loadSelectedConsult(o))}),t.k0s()()}if(2&i){const e=t.XpG();t.R7$(),t.Y8G("selected_visit",e.selected_visit),t.R7$(),t.Y8G("selected_visit",e.selected_visit),t.R7$(),t.Y8G("selected_visit",e.selected_visit)}}function _e(i,l){if(1&i){const e=t.RV6();t.j41(0,"div")(1,"app-condition",41),t.bIt("loadSelectedConsult",function(o){t.eBV(e);const r=t.XpG();return t.Njj(r.loadSelectedConsult(o))}),t.k0s(),t.j41(2,"app-services",41),t.bIt("loadSelectedConsult",function(o){t.eBV(e);const r=t.XpG();return t.Njj(r.loadSelectedConsult(o))}),t.k0s()()}if(2&i){const e=t.XpG();t.R7$(),t.Y8G("selected_visit",e.selected_visit),t.R7$(),t.Y8G("selected_visit",e.selected_visit)}}function ue(i,l){if(1&i){const e=t.RV6();t.j41(0,"div")(1,"app-final-dx",38),t.bIt("loadConsult",function(o){t.eBV(e);const r=t.XpG();return t.Njj(r.loadSelectedConsult(o))}),t.k0s(),t.j41(2,"app-prescription",42),t.bIt("loadConsult",function(o){t.eBV(e);const r=t.XpG();return t.Njj(r.loadSelectedConsult(o))}),t.k0s()()}if(2&i){const e=t.XpG();t.R7$(),t.Y8G("toggle_content",e.toggle_content)("consult_details",e.selected_visit)("have_complaint",e.have_complaint)("allowed_to_edit",e.allowed_to_edit),t.R7$(),t.Y8G("toggle_content",e.toggle_content)("consult_details",e.selected_visit)("have_complaint",e.have_complaint)("allowed_to_edit",e.allowed_to_edit)("user_id",e.user_id)}}function pe(i,l){if(1&i){const e=t.RV6();t.j41(0,"app-end-visit",43),t.bIt("toggleModal",function(o){t.eBV(e);const r=t.XpG();return t.Njj(r.toggleModal(o))}),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("consult_id",null==e.selected_visit?null:e.selected_visit.id)("consult_date",null==e.selected_visit?null:e.selected_visit.consult_date)("patient_id",null==e.selected_visit?null:e.selected_visit.patient.id)("pt_group","tb")}}const me=[{path:"",component:(()=>{class i{loadSelectedConsult(){this.http.get("consultation/records",{params:{id:this.selected_visit.id,pt_group:"dn",disable_filter:1}}).subscribe({next:n=>{this.consult_details[this.item_index]=n.data[0],this.selected_visit=n.data[0]},error:n=>{this.http.showError(n.error.message,"Dental Consult")}})}loadConsult(){let n={pt_group:"dn",disable_filter:1,patient_id:this.route.snapshot.paramMap.get("id"),sort:"-consult_date"};this.http.get("consultation/records",{params:n}).subscribe({next:o=>{this.consult_details=o.data},error:o=>{this.http.showError(o.error.message,"Dental Consult")}})}toggleModal(e){this.modals[e]=!this.modals[e]}switchPage(e,n,o){2===e?(this.item_index=o,this.router.navigate(["/patient/dn",{id:n.patient.id,consult_id:n.id}])):this.module=1,this.pages=e,this.selected_visit=n||null}switchTab(e){this.module=e}constructor(e,n,o){this.http=e,this.router=n,this.route=o,this.selected_visit=null,this.pages=1,this.module=1,this.faDoorClosed=_.K_I,this.faCircleNotch=_.s4k,this.patient_dental_history=[],this.enable_edit=!1,this.allowed_to_edit=!0,this.have_complaint=!1,this.toggle_content=!0,this.modals=[],this.item_index=null}ngOnInit(){this.user_id=this.http.getUserID(),this.module=1,this.loadConsult(),this.user_facility=this.http.getUserFacility()}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(g.k),t.rXU(d.Ix),t.rXU(d.nX))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-dental"]],standalone:!1,decls:14,vars:11,consts:[[1,"flex"],[1,"mt-4","flex","flex-row","border-b","border-slate-300","text-xs"],[1,"tabs-main","w-36",3,"click"],["class","tabs-main w-36",3,"class","click",4,"ngIf"],[1,"ml-auto"],["type","button","class","btn-end-visit ml-auto mt-5",3,"click",4,"ngIf"],["class","mt-2 flex justify-between border-b border-slate-300 text-xs",4,"ngIf"],["class","my-5 w-full border border-gray-200 shadow-md rounded-xl",4,"ngIf"],["class","m-3",4,"ngIf"],[4,"ngIf"],[3,"consult_id","consult_date","patient_id","pt_group","toggleModal",4,"ngIf"],["type","button",1,"btn-end-visit","ml-auto","mt-5",3,"click"],[1,"mr-1",3,"icon"],[1,"mt-2","flex","justify-between","border-b","border-slate-300","text-xs"],[1,"flex","flex-row"],[1,"tabs-main","px-3",3,"click"],[1,"my-5","w-full","border","border-gray-200","shadow-md","rounded-xl"],["class","text-orange-800 border border-orange-400 bg-orange-100 rounded-md p-3 mb-2 w-full",4,"ngIf"],["class","flex flex-col",4,"ngIf"],["class","w-full text-sm text-left",4,"ngIf"],[1,"text-orange-800","border","border-orange-400","bg-orange-100","rounded-md","p-3","mb-2","w-full"],[1,"flex","flex-col"],[1,"w-full","flex","justify-center"],["animation","spin",1,"pt-10",3,"icon"],[1,"w-full","flex","justify-center","pb-10","font-semibold"],[1,"w-full","text-sm","text-left"],[1,"text-xs","text-white","uppercase","bg-blue-500"],["scope","col",1,"py-3","px-6"],["class","bg-white border-b",4,"ngFor","ngForOf"],[1,"bg-white","border-b"],["colspan","3",4,"ngIf"],[1,"py-4","px-6"],["type","button","class","rounded-md bg-blue-500 text-white py-1 px-2",3,"click",4,"ngIf"],["colspan","3"],[1,"text-center"],["type","button",1,"rounded-md","bg-blue-500","text-white","py-1","px-2",3,"click"],[1,"m-3"],[3,"consult_details","have_complaint","allowed_to_edit","loadConsult",4,"ngIf"],[3,"loadConsult","toggle_content","consult_details","have_complaint","allowed_to_edit"],[3,"pt_group"],[3,"loadConsult","consult_details","have_complaint","allowed_to_edit"],[3,"loadSelectedConsult","selected_visit"],[3,"loadConsult","toggle_content","consult_details","have_complaint","allowed_to_edit","user_id"],[3,"toggleModal","consult_id","consult_date","patient_id","pt_group"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"nav",1)(2,"button",2),t.bIt("click",function(){return o.switchPage(1)}),t.EFF(3," DENTAL VISITS "),t.k0s(),t.DNE(4,qt,2,2,"button",3),t.k0s(),t.j41(5,"div",4),t.DNE(6,Zt,3,1,"button",5),t.k0s()(),t.DNE(7,te,10,8,"nav",6)(8,ae,4,3,"div",7)(9,de,4,6,"div",8)(10,ce,4,3,"div",9)(11,_e,3,2,"div",9)(12,ue,3,9,"div",9)(13,pe,1,4,"app-end-visit",10)),2&n&&(t.R7$(2),t.HbH(1===o.pages?"tabs-main-true rounded-t-md":"tabs-main-false"),t.R7$(2),t.Y8G("ngIf",o.selected_visit||(null==o.selected_visit||null==o.selected_visit.facility?null:o.selected_visit.facility.code)===o.user_facility),t.R7$(2),t.Y8G("ngIf",o.selected_visit&&!(null!=o.selected_visit&&o.selected_visit.consult_done)),t.R7$(),t.Y8G("ngIf",2===o.pages),t.R7$(),t.Y8G("ngIf",1===o.pages),t.R7$(),t.Y8G("ngIf",2===o.pages&&1===o.module),t.R7$(),t.Y8G("ngIf",2===o.pages&&2===o.module),t.R7$(),t.Y8G("ngIf",2===o.pages&&3===o.module),t.R7$(),t.Y8G("ngIf",2===o.pages&&4===o.module),t.R7$(),t.Y8G("ngIf",o.modals.end_visit))},dependencies:[a.Sq,a.bT,f.aY,G,E,S._,I.W,T.u,$.B,Z,Mt,Vt,Lt,Qt,a.vh],encapsulation:2})}}return i})()}];let he=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[d.iI.forChild(me),d.iI]})}}return i})(),fe=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-general-survey"]],decls:2,vars:0,template:function(n,o){1&n&&(t.j41(0,"p"),t.EFF(1,"general-survey works!"),t.k0s())},dependencies:[a.MD],encapsulation:2})}}return i})();var ge=c(8249);let be=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-management"]],decls:2,vars:0,template:function(n,o){1&n&&(t.j41(0,"p"),t.EFF(1,"management works!"),t.k0s())},dependencies:[a.MD],encapsulation:2})}}return i})(),ve=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[a.MD,he,f.dX,s.YN,s.X1,G,E,S._,I.W,fe,ge.a,be,j.c,T.u,$.B]})}}return i})()},3825:(R,F,c)=>{c.d(F,{c:()=>C});var a=c(4438),d=c(9417),_=c(60),t=c(5383),g=c(3318),f=c(5794);const b=["confirmCode"];let C=(()=>{class s{generateCode(){this.is_loading=!1,this.confirmation_code=null,this.confirm_code=Math.floor(1e3*Math.random()).toString().padStart(4,"0")}onSubmit(){this.is_loading=!0,this.confirm_code===this.confirmation_code?this.http.delete(this.url,this.delete_id).subscribe({next:()=>{this.is_loading=!1,this.toastr.error("Record was deleted!"),this.closeModal()},error:h=>{console.log(h),this.is_loading=!1,this.generateCode()}}):(this.generateCode(),this.toastr.info("Code mismatch, please try again","Incorrect Code"))}closeModal(){this.toggleModal.emit("delete-item")}constructor(h,p){this.http=h,this.toastr=p,this.toggleModal=new a.bkB,this.faTrash=t.yLS,this.confirm_code="0000",this.is_loading=!1}ngOnChanges(h){this.generateCode()}ngAfterViewInit(){this.inputElement.nativeElement.focus()}static{this.\u0275fac=function(p){return new(p||s)(a.rXU(g.k),a.rXU(f.tw))}}static{this.\u0275cmp=a.VBU({type:s,selectors:[["app-delete-item"]],viewQuery:function(p,u){if(1&p&&a.GBs(b,5),2&p){let v;a.mGM(v=a.lsd())&&(u.inputElement=v.first)}},inputs:{url:"url",delete_id:"delete_id",delete_desc:"delete_desc"},outputs:{toggleModal:"toggleModal"},features:[a.OA$],decls:29,vars:8,consts:[["confirmCode",""],["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-red-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"flex","item-start","flex-wrap","pb-5"],[1,"grid","grid-cols-3","px-5","py-5","mt-10","mx-10","w-full","bg-red-50","rounded-lg","text-center"],[1,"col-span-3","text-left","mb-2","pb-2","border-b","border-slate-200"],[1,"col-span-1","text-sm","px-5","py-2","mt-2"],[1,"block","mb-3"],[1,"font-bold","text-2xl","select-none"],["for","confirmCode"],["name","confirmCode","type","text",1,"mt-2","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","pl-3","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"keyup.enter","ngModelChange","ngModel"],[1,"col-span-1","mt-11"],["type","button",1,"my-auto","text-white","bg-red-500","enabled:hover:ring-2","enabled:focus:outline-none","enabled:hover:ring-red-300","disabled:bg-gray-300","font-medium","rounded","text-sm","px-6","py-2.5","text-center","transition","duration-150","ease-in-out",3,"click","disabled"],[1,"mx-0","my-0","text-white",3,"icon"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-200","rounded","text-sm","font-medium","my-2","px-6","py-2.5","transition","duration-150","ease-in-out",3,"click","disabled"],[1,"opacity-50","fixed","inset-0","z-[59]","bg-black"]],template:function(p,u){if(1&p){const v=a.RV6();a.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h3",5),a.EFF(5),a.k0s()(),a.j41(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),a.EFF(10),a.k0s(),a.j41(11,"div",10)(12,"span",11),a.EFF(13,"Delete Code"),a.k0s(),a.j41(14,"span",12),a.EFF(15),a.k0s()(),a.j41(16,"div",10)(17,"label",13),a.EFF(18,"Enter Code"),a.k0s(),a.j41(19,"input",14,0),a.bIt("keyup.enter",function(){return a.eBV(v),a.Njj(u.onSubmit())}),a.mxI("ngModelChange",function(x){return a.eBV(v),a.DH7(u.confirmation_code,x)||(u.confirmation_code=x),a.Njj(x)}),a.k0s()(),a.j41(21,"div",15)(22,"button",16),a.bIt("click",function(){return a.eBV(v),a.Njj(u.onSubmit())}),a.nrm(23,"fa-icon",17),a.EFF(24," Delete "),a.k0s()()()()(),a.j41(25,"div",18)(26,"button",19),a.bIt("click",function(){return a.eBV(v),a.Njj(u.closeModal())}),a.EFF(27,"Cancel"),a.k0s()()()()(),a.nrm(28,"div",20)}2&p&&(a.R7$(5),a.Lme(" Delete ",u.delete_desc,": ",u.delete_id," "),a.R7$(5),a.SpI(" Your are about to delete a ",u.delete_desc," record for this patient. Please enter the generated delete code in order to proceed. "),a.R7$(5),a.JRh(u.confirm_code),a.R7$(4),a.R50("ngModel",u.confirmation_code),a.R7$(3),a.Y8G("disabled",!u.confirmation_code||u.is_loading),a.R7$(),a.Y8G("icon",u.faTrash),a.R7$(3),a.Y8G("disabled",u.is_loading))},dependencies:[_.dX,_.aY,d.YN,d.me,d.BC,d.vS],encapsulation:2,changeDetection:0})}}return s})()},9217:(R,F,c)=>{c.d(F,{u:()=>C});var a=c(177),d=c(4438),_=c(9417),t=c(60),g=c(3318),f=c(3895),b=c(5794);let C=(()=>{class s{onSubmit(){let h;this.is_saving=!0,h=this.consult_date&&this.pt_group?{patient_id:this.patient_id,consult_date:this.consult_date,pt_group:this.pt_group,consult_done:!0}:{},this.http.update("consultation/records/",this.consult_id,h).subscribe({next:p=>{this.is_saving=!1,this.toastr.info("Visit was ended"),this.router.navigate(["/patient/itr",{id:this.patient_id}])},error:p=>console.log(p)})}constructor(h,p,u){this.http=h,this.router=p,this.toastr=u,this.toggleModal=new d.bkB,this.is_saving=!1}closeModal(){this.toggleModal.emit("end_visit")}static{this.\u0275fac=function(p){return new(p||s)(d.rXU(g.k),d.rXU(f.Ix),d.rXU(b.tw))}}static{this.\u0275cmp=d.VBU({type:s,selectors:[["app-end-visit"]],inputs:{consult_id:"consult_id",consult_date:"consult_date",patient_id:"patient_id",pt_group:"pt_group"},outputs:{toggleModal:"toggleModal"},decls:20,vars:5,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"h-40"],[1,"flex","item-start","flex-wrap","pb-5"],[1,"grid","grid-cols-3","px-3","py-3","mt-10","mx-10","w-full","rounded-lg","text-center"],[1,"col-span-3","text-left","mb-2","pb-2","border-b","border-slate-200","font-semibold","text-lg"],[1,"col-span-3","text-left","mb-2","pb-2","text-sm"],[1,"flex","justify-end","py-2","px-5","space-x-4","rounded-b"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-300","rounded","text-sm","font-medium","my-2","px-6","py-2.5","transition","duration-150","ease-in-out",3,"click"],["type","button",1,"text-white","bg-rose-500","enabled:hover:ring-2","enabled:focus:outline-none","enabled:hover:ring-rose-300","disabled:opacity-75","font-medium","rounded","text-sm","my-2","px-6","py-2.5","text-center","transition","duration-150","ease-in-out",3,"click","disabled"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"]],template:function(p,u){1&p&&(d.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),d.EFF(5," End Visit "),d.k0s()(),d.j41(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),d.EFF(10," Do you really want to end this visit? "),d.k0s(),d.j41(11,"div",9),d.EFF(12),d.nI1(13,"date"),d.k0s()()()(),d.j41(14,"div",10)(15,"button",11),d.bIt("click",function(){return u.closeModal()}),d.EFF(16,"Cancel"),d.k0s(),d.j41(17,"button",12),d.bIt("click",function(){return u.onSubmit()}),d.EFF(18,"End Visit"),d.k0s()()()()(),d.nrm(19,"div",13)),2&p&&(d.R7$(12),d.SpI(" Visit date & time: ",d.i5U(13,2,u.consult_date,"MM/dd/yyyy hh:mm:ss a")," "),d.R7$(5),d.Y8G("disabled",u.is_saving))},dependencies:[t.dX,_.YN,a.MD,a.vh],encapsulation:2,changeDetection:0})}}return s})()}}]);