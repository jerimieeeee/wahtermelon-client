"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[333],{1333:(Zi,k,p)=>{p.r(k),p.d(k,{ConsultationModule:()=>vi});var d=p(6814),b=p(3602),_=p(590),y=p(6825),t=p(5879),U=p(6903);function L(n,s){if(1&n&&(t.TgZ(0,"div",7)(1,"div",8),t._UZ(2,"apx-chart",9),t.qZA()()),2&n){const e=t.oxw(3);t.xp6(2),t.Q6J("series",null==e.chartOptions?null:e.chartOptions.series)("chart",null==e.chartOptions?null:e.chartOptions.chart)("xaxis",null==e.chartOptions?null:e.chartOptions.xaxis)("stroke",null==e.chartOptions?null:e.chartOptions.stroke)("tooltip",null==e.chartOptions?null:e.chartOptions.tooltip)("dataLabels",null==e.chartOptions?null:e.chartOptions.dataLabels)("title",null==e.chartOptions?null:e.chartOptions.title)}}function G(n,s){if(1&n&&(t.TgZ(0,"div",10)(1,"div",11),t._UZ(2,"apx-chart",9),t.qZA()()),2&n){const e=t.oxw(3);t.xp6(2),t.Q6J("series",null==e.WeightChart?null:e.WeightChart.series)("chart",null==e.WeightChart?null:e.WeightChart.chart)("xaxis",null==e.WeightChart?null:e.WeightChart.xaxis)("stroke",null==e.WeightChart?null:e.WeightChart.stroke)("tooltip",null==e.WeightChart?null:e.WeightChart.tooltip)("dataLabels",null==e.WeightChart?null:e.WeightChart.dataLabels)("title",null==e.WeightChart?null:e.WeightChart.title)}}function R(n,s){if(1&n&&(t.TgZ(0,"div",10)(1,"div",12),t._UZ(2,"apx-chart",9),t.qZA()()),2&n){const e=t.oxw(3);t.xp6(2),t.Q6J("series",null==e.BmiChart?null:e.BmiChart.series)("chart",null==e.BmiChart?null:e.BmiChart.chart)("xaxis",null==e.BmiChart?null:e.BmiChart.xaxis)("stroke",null==e.BmiChart?null:e.BmiChart.stroke)("tooltip",null==e.BmiChart?null:e.BmiChart.tooltip)("dataLabels",null==e.BmiChart?null:e.BmiChart.dataLabels)("title",null==e.BmiChart?null:e.BmiChart.title)}}function $(n,s){if(1&n&&(t.TgZ(0,"div",4),t.YNc(1,L,3,7,"div",5),t.YNc(2,G,3,7,"div",6),t.YNc(3,R,3,7,"div",6),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.show_bp),t.xp6(1),t.Q6J("ngIf",e.show_weight),t.xp6(1),t.Q6J("ngIf",e.show_bmi)}}function V(n,s){if(1&n&&(t.TgZ(0,"div",1),t._UZ(1,"div",2),t.YNc(2,$,4,3,"div",3),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.show_graphs)}}let B=(()=>{var n;class s{patientVitals(o){this.vitals_graph.systolic=[],this.vitals_graph.diastolic=[],this.vitals_graph.bp_date=[],this.vitals_graph.weight=[],this.vitals_graph.weight_date=[],Object.entries(o).forEach(([i,l],r)=>{let c=l;c.bp_systolic&&(this.vitals_graph.systolic.push(c.bp_systolic),this.vitals_graph.diastolic.push(c.bp_diastolic),this.vitals_graph.bp_date.push(c.vitals_date)),c.patient_weight&&(this.vitals_graph.weight.push(c.patient_weight),this.vitals_graph.weight_date.push(c.vitals_date)),c.patient_bmi&&(this.vitals_graph.bmi.push(c.patient_bmi),this.vitals_graph.bmi_date.push(c.vitals_date))}),this.vitals_graph.systolic.length>0||this.vitals_graph.diastolic.length>0||this.vitals_graph.weight.length>0||this.vitals_graph.bmi.length>0?(this.selected_chart="all_chart",this.loadChart(this.selected_chart)):this.showChart=!1,this.generateAllChart()}generateBPChart(){this.chartOptions={series:[{name:"Systolic",data:this.vitals_graph.systolic},{name:"Diastolic",data:this.vitals_graph.diastolic}],chart:{height:200,type:"area"},dataLabels:{enabled:!1},stroke:{curve:"smooth"},title:{text:"Blood Pressure History"},xaxis:{type:"datetime",categories:this.vitals_graph.bp_date},tooltip:{x:{format:"MM/dd/yyyy HH:mm"}}}}generateWeightChart(){this.WeightChart={series:[{name:"Weight",data:this.vitals_graph.weight}],chart:{height:200,type:"line"},dataLabels:{enabled:!1},stroke:{curve:"smooth"},title:{text:"Weight History"},xaxis:{type:"datetime",categories:this.vitals_graph.weight_date},tooltip:{x:{format:"MM/dd/yyyy HH:mm"}}}}generateBMIChart(){this.BmiChart={series:[{name:"BMI",data:this.vitals_graph.bmi}],chart:{height:200,type:"line"},dataLabels:{enabled:!1},stroke:{curve:"smooth"},title:{text:"BMI History"},xaxis:{type:"datetime",categories:this.vitals_graph.bmi_date},tooltip:{x:{format:"MM/dd/yyyy HH:mm"}}}}loadChart(o){switch(this.show_bmi=!1,this.show_bp=!1,this.show_weight=!1,o){case"bp_chart":this.show_bp=!0;break;case"weight_chart":this.show_weight=!0;break;case"bmi_chart":this.show_bmi=!0;break;case"bmi_weight_chart":this.show_weight=!0,this.show_bmi=!0;break;case"bp_weight_chart":this.show_bp=!0,this.show_weight=!0;break;case"all_chart":this.show_bp=!0,this.show_weight=!0,this.show_bmi=!0}this.showChart=!0}generateAllChart(){this.generateBPChart(),this.generateWeightChart(),this.generateBMIChart()}constructor(o){this.router=o,this.showChart=!1,this.show_bmi=!1,this.show_bp=!1,this.show_weight=!1,this.show_graphs=!0,this.vitals_graph={systolic:[],diastolic:[],bp_date:[],weight:[],weight_date:[],bmi:[],bmi_date:[]}}ngOnChanges(o){this.vitals&&this.patientVitals(this.vitals)}ngOnInit(){}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(b.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-graphs"]],inputs:{vitals:"vitals"},features:[t.TTD],decls:1,vars:1,consts:[["class","grid grid-cols-1 w-full h-auto",4,"ngIf"],[1,"grid","grid-cols-1","w-full","h-auto"],[1,"w-full","flex","ml-5","font-semibold"],["class","cols-span-1 flex w-full mt-3",4,"ngIf"],[1,"cols-span-1","flex","w-full","mt-3"],["class","w-1/3 shadow px-2 mr-2 py-4 rounded-xl text-gray-600 border border-slate-100",4,"ngIf"],["class","w-1/3 shadow px-2 ml-2  py-4 rounded-xl text-gray-600 border border-slate-100",4,"ngIf"],[1,"w-1/3","shadow","px-2","mr-2","py-4","rounded-xl","text-gray-600","border","border-slate-100"],["id","bp-chart"],[3,"series","chart","xaxis","stroke","tooltip","dataLabels","title"],[1,"w-1/3","shadow","px-2","ml-2","py-4","rounded-xl","text-gray-600","border","border-slate-100"],["id","weight-chart"],["id","bmi-chart"]],template:function(o,i){1&o&&t.YNc(0,V,3,1,"div",0),2&o&&t.Q6J("ngIf",i.showChart)},dependencies:[d.O5,U.x],data:{animation:[(0,y.X$)("openCloseAccordion",[(0,y.eR)(":enter",[(0,y.oB)({height:0,opacity:0}),(0,y.jt)("200ms",(0,y.oB)({height:"100%",opacity:"100%"}))]),(0,y.eR)(":leave",[(0,y.jt)("200ms",(0,y.oB)({height:0,opacity:0}))])])]}}),s})();var q=p(2181),C=p(9397),v=p(1449),u=p(265),x=p(2425),g=p(5597),A=p(2756),J=p(4504);function z(n,s){if(1&n&&(t.TgZ(0,"span",22),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.konsulta_medicine.desc)}}function W(n,s){if(1&n&&(t.TgZ(0,"span",22),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.lnq("",e.added_medicine," ",e.dosage_quantity," ",e.unit_of_measurement.code,"")}}function X(n,s){if(1&n&&(t.TgZ(0,"span",55)(1,"div",56),t.YNc(2,z,2,1,"span",57),t.YNc(3,W,2,3,"span",57),t.TgZ(4,"span"),t._uU(5),t.qZA(),t._UZ(6,"br"),t.qZA()()),2&n){const e=s.$implicit;t.xp6(2),t.Q6J("ngIf",e.konsulta_medicine),t.xp6(1),t.Q6J("ngIf",!e.konsulta_medicine),t.xp6(2),t.AsE("",e.quantity," ",e.preparation.desc+(e.quantity>1?"s":""),"")}}function tt(n,s){if(1&n&&(t.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"div",16),t._UZ(5,"img",17),t.TgZ(6,"span",18),t._uU(7,"ELECTRONIC PRESCRIPTION SLIP (EPRESS)"),t.qZA()(),t.TgZ(8,"div",19),t._uU(9," To be filled-out by the facility (Pupunuan ng Pasilidad) "),t.qZA(),t.TgZ(10,"table",20)(11,"tbody")(12,"tr")(13,"td",21)(14,"span",22),t._uU(15,"HCI NAME:"),t.qZA(),t._UZ(16,"br"),t._uU(17),t.qZA(),t.TgZ(18,"td",23)(19,"span",22),t._uU(20,"Case No:"),t.qZA(),t._UZ(21,"br"),t._uU(22),t.qZA(),t.TgZ(23,"td",23)(24,"span",24),t._uU(25,"HCI Accreditation No.:"),t.qZA(),t._UZ(26,"br"),t._uU(27),t.qZA(),t.TgZ(28,"td",23)(29,"span",25),t._uU(30,"Transaction No.:"),t.qZA(),t._UZ(31,"br"),t._uU(32),t.qZA()(),t.TgZ(33,"tr")(34,"td",26)(35,"span",22),t._uU(36,"PIN (PhilHealth Identification No.):"),t.qZA(),t._UZ(37,"br"),t._uU(38),t.qZA(),t.TgZ(39,"td",26)(40,"span",22),t._uU(41,"Membership Category:"),t.qZA(),t._UZ(42,"br"),t._uU(43," \xa0 "),t.qZA(),t.TgZ(44,"td",26)(45,"span",22),t._uU(46,"Membership Type:"),t.qZA(),t._UZ(47,"br"),t.TgZ(48,"div",27)(49,"div"),t._UZ(50,"input",28),t.TgZ(51,"label"),t._uU(52,"Member"),t.qZA()(),t.TgZ(53,"div",29),t._UZ(54,"input",28),t.TgZ(55,"label"),t._uU(56,"Dependent"),t.qZA()()()()(),t.TgZ(57,"tr")(58,"td",21)(59,"span",22),t._uU(60,"Patient Name (Pangalan ng Pasyente):"),t.qZA(),t._UZ(61,"br"),t._uU(62),t.qZA(),t.TgZ(63,"td",30)(64,"span",22),t._uU(65,"Age (Edad):"),t.qZA(),t._UZ(66,"br"),t._uU(67),t.qZA(),t.TgZ(68,"td",30)(69,"span",22),t._uU(70,"Contact No. (Numero ng Telepono):"),t.qZA(),t._UZ(71,"br"),t._uU(72),t.qZA()()()(),t.TgZ(73,"div",31)(74,"div",32)(75,"div",33),t._UZ(76,"fa-icon",6),t.qZA(),t.TgZ(77,"div",34),t._uU(78,"USE GENERIC NAME"),t.qZA(),t._UZ(79,"div"),t.qZA(),t.TgZ(80,"div",35)(81,"div"),t.YNc(82,X,7,4,"span",36),t.qZA()(),t.TgZ(83,"div",37)(84,"div",38)(85,"div",39),t._uU(86," Next Dispensing Date: ___________________ "),t._UZ(87,"br"),t._uU(88," (Petsa ng susunod na bigay ng gamot) "),t.qZA()(),t.TgZ(89,"div",40)(90,"div",41)(91,"div"),t._uU(92,"Physician: "),t.TgZ(93,"span",42),t._uU(94),t.qZA()(),t.TgZ(95,"div"),t._uU(96,"PRC LIC No.: "),t.TgZ(97,"span",42),t._uU(98),t.qZA()(),t.TgZ(99,"div"),t._uU(100,"PTR No.: __________________________________"),t.qZA(),t.TgZ(101,"div"),t._uU(102,"S2 No.: ___________________________________"),t.qZA()()()()(),t.TgZ(103,"div",43),t._uU(104," Note: "),t._UZ(105,"br"),t._uU(106," \xa0 "),t.qZA(),t.TgZ(107,"div",44)(108,"div",45),t._uU(109," Did you received the above-mentioned medicines?"),t._UZ(110,"br"),t._uU(111," (Natanggap mo ba ang mga gamot na nabanggit?) "),t.qZA(),t.TgZ(112,"div",46),t._uU(113," __Yes (Oo) __No (Hindi) "),t.qZA()(),t.TgZ(114,"div",44)(115,"div",45),t._uU(116," Are you satisfied with the medicines you received?"),t._UZ(117,"br"),t._uU(118," (Nasiyahan ka ba sa mga gamot na natanggap mo?) "),t.qZA(),t.TgZ(119,"div",47),t._UZ(120,"input",48),t.TgZ(121,"div",49),t._UZ(122,"fa-icon",50)(123,"br"),t._uU(124," HAPPY "),t.qZA()(),t.TgZ(125,"div",47),t._UZ(126,"input",48),t.TgZ(127,"div",49),t._UZ(128,"fa-icon",50)(129,"br"),t._uU(130," NEUTRAL "),t.qZA()(),t.TgZ(131,"div",47),t._UZ(132,"input",48),t.TgZ(133,"div",49),t._UZ(134,"fa-icon",50)(135,"br"),t._uU(136," SAD "),t.qZA()()(),t.TgZ(137,"div",51)(138,"div",45),t._uU(139," For your comment, suggestion or complaint:"),t._UZ(140,"br"),t._uU(141," (Para sa iyong komento, mungkahi o reklamo): "),t.qZA()(),t._UZ(142,"div",51),t.TgZ(143,"div",52)(144,"div",45),t._uU(145," Note:"),t._UZ(146,"br"),t._uU(147," Accomplished form shall be submitted to Konsulta Provider"),t._UZ(148,"br"),t._uU(149," (Ang kumpletong form ay dapat Isumite sa tagapagbigay ng Konsulta) "),t.qZA(),t.TgZ(150,"div",53)(151,"div",54),t._uU(152," Philhealth Identification Number of Patient: "),t.TgZ(153,"span",42),t._uU(154),t.qZA()()()()()()()()),2&n){const e=t.oxw();t.xp6(17),t.hij(" ",null==e.facility?null:e.facility.konsulta_credential.facility_name," "),t.xp6(5),t.hij(" ",null==e.patient_info?null:e.patient_info.case_number," "),t.xp6(5),t.hij(" ",null==e.facility?null:e.facility.konsulta_credential.accreditation_number," "),t.xp6(5),t.hij(" ","S"+(null==e.consult_details?null:e.consult_details.transaction_number)," "),t.xp6(6),t.hij(" ",null==e.patient_philhealth?null:e.patient_philhealth.philhealth_id," "),t.xp6(12),t.Q6J("checked","MM"===(null==e.patient_philhealth?null:e.patient_philhealth.membership_type_id)),t.xp6(4),t.Q6J("checked","DD"===(null==e.patient_philhealth?null:e.patient_philhealth.membership_type_id)),t.xp6(8),t.HOy(" ",null==e.patient_info?null:e.patient_info.last_name,", ",null==e.patient_info?null:e.patient_info.first_name," ",null==e.patient_info?null:e.patient_info.middle_name," ","NA"===(null==e.patient_info?null:e.patient_info.suffix_name)?"":null==e.patient_info?null:e.patient_info.suffix_name," "),t.xp6(5),t.hij(" ",e.patient_age," "),t.xp6(5),t.hij(" ",null==e.patient_info?null:e.patient_info.mobile_number," "),t.xp6(4),t.Q6J("icon",e.faPrescription),t.xp6(6),t.Q6J("ngForOf",e.prescriptions),t.xp6(12),t.lnq(" ",e.prescriptions[0].prescriber.first_name," ","N/A"!==e.prescriptions[0].prescriber.middle_name?e.prescriptions[0].prescriber.middle_name:""," ",e.prescriptions[0].prescriber.last_name,""),t.xp6(4),t.Oqu(e.prescriptions[0].prescriber.prc_number),t.xp6(24),t.Q6J("icon",e.faFaceSmile),t.xp6(6),t.Q6J("icon",e.faFaceMeh),t.xp6(6),t.Q6J("icon",e.faFaceFrown),t.xp6(20),t.Oqu(null==e.patient_philhealth?null:e.patient_philhealth.philhealth_id)}}function et(n,s){if(1&n&&(t.TgZ(0,"div",58),t._UZ(1,"fa-icon",59),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faCircleNotch)}}let M=(()=>{var n;class s{closeModal(){this.toggleModal.emit("epres")}getAge(){this.http.get("patient-philhealth/philhealth",{params:{"filter[patient_id]":this.patient_info.id,per_page:"1",sort:"-enlistment_date"}}).subscribe({next:o=>{this.philhealth_info=o.data[0];let i={date_from:this.dateHelper.dateFormat(this.patient_info.birthdate),date_to:o.data[0].enlistment_date};this.http.post("konsulta/generate-age",i).subscribe({next:l=>{this.patient_age=l.data,this.show_form=!0},error:l=>console.log(l)})},error:o=>console.log(o)})}constructor(o,i){this.http=o,this.dateHelper=i,this.toggleModal=new t.vpe,this.faPrint=_.wf8,this.faFaceSmile=v.pkM,this.faFaceMeh=v.FRD,this.faFaceFrown=v.qfV,this.faCircleNotch=_.IJ7,this.faPrescription=_.h2$,this.show_form=!1}ngOnInit(){console.log(this.prescriptions),this.patient_info=this.http.getPatientInfo(),this.patient_philhealth=this.http.getPhilhealhtInfo(),this.facility=this.http.getUserFromJSON(),this.prescription_length=Object.keys(this.prescriptions).length,this.getAge()}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(u.O),t.Y36(A.Y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-epres"]],inputs:{prescriptions:"prescriptions",consult_details:"consult_details"},outputs:{toggleModal:"toggleModal"},decls:14,vars:4,consts:[["id","defaultModal","tabindex","-1","aria-hidden","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","max-w-4xl","h-full","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],["type","button","printSectionId","philhealth_form","ngxPrint","",1,"bg-white","text-blue-500","hover:bg-gray-100","hover:text-blue-400","px-2","py-1","rounded-md",3,"useExistingCss"],[3,"icon"],["class","overflow-y-auto scrollbar-thin h-96 scrollbar-thumb-gray-400 scrollbar-track-gray-100",4,"ngIf"],["class","h-96 flex justify-center align-middle w-full",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"text-white","bg-orange-500","hover:ring-2","focus:outline-none","hover:ring-orange-300","rounded","text-sm","font-medium","px-6","py-2.5","transition","duration-150","ease-in-out","transform","hover:scale-110",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"overflow-y-auto","scrollbar-thin","h-96","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"w-[210mm]","h-[297mm]","flex","justify-center","align-middle","bg-white"],["id","philhealth_form",1,"w-[195mm]","h-[272mm]","mt-[12.5mm]"],[1,"border-2","border-gray-400"],[1,"flex","justify-center","h-16","p-1"],["src","./assets/img/philhealth_logo_with_name.png",1,"h-16"],[1,"font-semibold","mt-4","ml-5","text-xl"],[1,"m-1","font-semibold","mt-3"],[1,"table-auto","border","border-gray-400","p-1","w-full","mb-5"],["colspan","6",1,"text-xs","border","border-gray-400"],[1,"font-semibold"],["colspan","2",1,"text-xs","border","border-gray-400"],[1,"font-semibold","text-xs"],[1,"font-semibold","text-sm"],["colspan","4",1,"text-xs","border","border-gray-400"],[1,"flex","justify-end"],["type","checkbox","disabled","",1,"input-checkbox","disabled:bg-gray-400","checked:bg-gray-400",3,"checked"],[1,"ml-3"],["colspan","3",1,"text-xs","border","border-gray-400"],[1,"h-fit","border","border-gray-400","flex","flex","flex-col","w-full"],[1,"flex-none","grid","grid-cols-3"],[1,"ml-4","mt-2","text-2xl"],[1,"flex","text-center","text-xl","font-bold"],[1,"grow","text-sm","grid","grid-cols-1","h-96"],["class","flex justify-center",4,"ngFor","ngForOf"],[1,"flex-none","grid","grid-cols-2"],[1,"relative","text-xs"],[1,"absolute","inset-x-0","bottom-0"],[1,"flex","justify-end","text-xs"],[1,"flex","flex-col"],[1,"underline"],[1,"text-[.6em]","border-b-2","border-dashed","border-gray-400","w-full","p-2"],[1,"flex","p-2","border-b-2","border-dotted","border-gray-400","w-full"],[1,"w-7/12","text-[.65em]"],[1,"text-[.65em]","mt-3","ml-5"],[1,"text-[.65em]","ml-5","flex","text-center"],["type","checkbox",1,"input-checkbox","mt-3"],[1,"ml-2"],[1,"text-xl",3,"icon"],[1,"flex","p-2","border-b-2","border-gray-400","w-full"],[1,"flex","p-1","w-full"],[1,"relative","text-[.65em]","w-5/12"],[1,"absolute","bottom-0","right-0"],[1,"flex","justify-center"],[1,"flex","flex-col","text-center"],["class","font-semibold",4,"ngIf"],[1,"h-96","flex","justify-center","align-middle","w-full"],["spin","true","size","2xl",1,"mt-20","text-blue-500",3,"icon"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5," electronic Prescription Slip (ePresS) "),t.qZA(),t.TgZ(6,"button",5),t._UZ(7,"fa-icon",6),t.qZA()(),t.YNc(8,tt,155,23,"div",7),t.YNc(9,et,2,1,"div",8),t.TgZ(10,"div",9)(11,"button",10),t.NdJ("click",function(){return i.closeModal()}),t._uU(12,"Close"),t.qZA()()()()(),t._UZ(13,"div",11)),2&o&&(t.xp6(6),t.Q6J("useExistingCss",!0),t.xp6(1),t.Q6J("icon",i.faPrint),t.xp6(1),t.Q6J("ngIf",i.show_form),t.xp6(1),t.Q6J("ngIf",!i.show_form))},dependencies:[d.sg,d.O5,g.BN,J.I],styles:["@page{size:auto;size:A4;margin:7mm}"]}),s})();var nt=p(6603);function it(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td",48),t._uU(2),t.qZA(),t.TgZ(3,"td",49),t._UZ(4,"fa-icon",6),t.qZA(),t.TgZ(5,"td",50),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td",50),t._uU(9),t.qZA()()),2&n){const e=s.$implicit,o=t.oxw(2);t.xp6(2),t.hij(" ",e.value.desc," "),t.xp6(2),t.Q6J("icon",e.value.with_result?o.faCheck:o.faXmark),t.xp6(2),t.hij(" ",e.value.with_result?t.xi3(7,4,e.value.with_result.laboratory_date,"MM/dd/yyyy"):"-"," "),t.xp6(3),t.hij(" ",e.value.with_result?e.value.with_result.user:"-"," ")}}function ot(n,s){if(1&n&&(t.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"div",16),t._UZ(5,"img",17),t.TgZ(6,"span",18),t._uU(7,"ELECTRONIC KONSULTA AVAILMENT SLIP (EKAS)"),t.qZA()(),t.TgZ(8,"div",19),t._uU(9," To be filled-out by the facility (Pupunuan ng Pasilidad) "),t.qZA(),t.TgZ(10,"table",20)(11,"tbody")(12,"tr")(13,"td",21)(14,"span",22),t._uU(15,"HCI NAME:"),t.qZA(),t._UZ(16,"br"),t._uU(17),t.qZA(),t.TgZ(18,"td",23)(19,"span",22),t._uU(20,"Case No:"),t.qZA(),t._UZ(21,"br"),t._uU(22),t.qZA(),t.TgZ(23,"td",23)(24,"span",24),t._uU(25,"HCI Accreditation No.:"),t.qZA(),t._UZ(26,"br"),t._uU(27),t.qZA(),t.TgZ(28,"td",23)(29,"span",25),t._uU(30,"Transaction No.:"),t.qZA(),t._UZ(31,"br"),t._uU(32),t.qZA()(),t.TgZ(33,"tr")(34,"td",21)(35,"span",22),t._uU(36,"PIN (PhilHealth Identification No.):"),t.qZA(),t._UZ(37,"br"),t._uU(38),t.qZA(),t.TgZ(39,"td",21)(40,"span",22),t._uU(41,"Membership Category (Kategorya ng Miyembro):"),t.qZA(),t._UZ(42,"br"),t._uU(43," \xa0 "),t.qZA()(),t.TgZ(44,"tr")(45,"td",21)(46,"span",22),t._uU(47,"Patient Name (Pangalan ng Pasyente):"),t.qZA(),t._UZ(48,"br"),t._uU(49),t.qZA(),t.TgZ(50,"td",26)(51,"span",22),t._uU(52,"Age (Edad):"),t.qZA(),t._UZ(53,"br"),t._uU(54),t.qZA(),t.TgZ(55,"td",26)(56,"span",22),t._uU(57,"Contact No. (Numero ng Telepono):"),t.qZA(),t._UZ(58,"br"),t._uU(59),t.qZA()(),t.TgZ(60,"tr")(61,"td",21)(62,"span",22),t._uU(63,"Membership Type:"),t.qZA(),t._UZ(64,"br"),t.TgZ(65,"div",27)(66,"div"),t._UZ(67,"input",28),t.TgZ(68,"label"),t._uU(69,"Member"),t.qZA()(),t.TgZ(70,"div",29),t._UZ(71,"input",28),t.TgZ(72,"label"),t._uU(73,"Dependent"),t.qZA()()()(),t.TgZ(74,"td",21)(75,"span",22),t._uU(76,"Authorization Transaction Code (ATC):"),t.qZA(),t._UZ(77,"br"),t._uU(78),t.qZA()()()(),t.TgZ(79,"table",30)(80,"thead")(81,"tr")(82,"th",31),t._uU(83," Konsulta Services "),t.qZA(),t.TgZ(84,"th",32),t._uU(85," Performed "),t._UZ(86,"br")(87,"fa-icon"),t.qZA(),t.TgZ(88,"th",33),t._uU(89," Date Performed "),t.qZA(),t.TgZ(90,"th",34),t._uU(91," Performed by "),t.qZA()()(),t.TgZ(92,"tbody"),t.YNc(93,it,10,7,"tr",35),t.ALo(94,"keyvalue"),t.qZA()(),t.TgZ(95,"div",36),t._uU(96," Note: "),t._UZ(97,"br"),t._uU(98," This form shall be provided to the Konsulta beneficiary "),t.qZA(),t.TgZ(99,"div",37)(100,"div",38),t._uU(101," Have you received the above-mentioned essential services?"),t._UZ(102,"br"),t._uU(103," (Natanggap mo ba ang mga pangunahing serbisyo na nabanggit?) "),t.qZA(),t.TgZ(104,"div",39),t._uU(105," __Yes (Oo) __No (Hindi) "),t.qZA()(),t.TgZ(106,"div",37)(107,"div",38),t._uU(108," How satisfied are you with the services provided?"),t._UZ(109,"br"),t._uU(110," (Gaano ka nasiyahan sa natanggap na serbisyo?) "),t.qZA(),t.TgZ(111,"div",40),t._UZ(112,"input",41),t.TgZ(113,"div",42),t._UZ(114,"fa-icon",43)(115,"br"),t._uU(116," HAPPY "),t.qZA()(),t.TgZ(117,"div",40),t._UZ(118,"input",41),t.TgZ(119,"div",42),t._UZ(120,"fa-icon",43)(121,"br"),t._uU(122," NEUTRAL "),t.qZA()(),t.TgZ(123,"div",40),t._UZ(124,"input",41),t.TgZ(125,"div",42),t._UZ(126,"fa-icon",43)(127,"br"),t._uU(128," SAD "),t.qZA()()(),t.TgZ(129,"div",44)(130,"div",38),t._uU(131," For your comment, suggestion or complaint:"),t._UZ(132,"br"),t._uU(133," (Para sa iyong komento, mungkahi o reklamo): "),t.qZA()(),t._UZ(134,"div",44),t.TgZ(135,"div",45)(136,"div",38),t._uU(137," Note:"),t._UZ(138,"br"),t._uU(139," Accomplished form shall be submitted to Konsulta Provider"),t._UZ(140,"br"),t._uU(141," (Ang kumpletong form ay dapat Isumite sa tagapagbigay ng Konsulta) "),t.qZA(),t.TgZ(142,"div",46),t._uU(143," Philhealth Identification Number of Patient: "),t.TgZ(144,"span",47),t._uU(145),t.qZA()()()()()()()),2&n){const e=t.oxw();t.xp6(17),t.hij(" ",null==e.facility?null:e.facility.konsulta_credential.facility_name," "),t.xp6(5),t.hij(" ",null==e.patient_info?null:e.patient_info.case_number," "),t.xp6(5),t.hij(" ",null==e.facility?null:e.facility.konsulta_credential.accreditation_number," "),t.xp6(5),t.hij(" ","S"+(null==e.consult_details?null:e.consult_details.transaction_number)," "),t.xp6(6),t.hij(" ",null==e.patient_philhealth?null:e.patient_philhealth.philhealth_id," "),t.xp6(11),t.HOy(" ",null==e.patient_info?null:e.patient_info.last_name,", ",null==e.patient_info?null:e.patient_info.first_name," ",null==e.patient_info?null:e.patient_info.middle_name," ","NA"===(null==e.patient_info?null:e.patient_info.suffix_name)?"":null==e.patient_info?null:e.patient_info.suffix_name," "),t.xp6(5),t.hij(" ",e.patient_age," "),t.xp6(5),t.hij(" ",null==e.patient_info?null:e.patient_info.mobile_number," "),t.xp6(8),t.Q6J("checked","MM"===(null==e.patient_philhealth?null:e.patient_philhealth.membership_type_id)),t.xp6(4),t.Q6J("checked","DD"===(null==e.patient_philhealth?null:e.patient_philhealth.membership_type_id)),t.xp6(7),t.hij(" ",!0===(null==e.consult_details?null:e.consult_details.walkedin_status)?"WALKEDIN":null!=e.consult_details&&e.consult_details.authorization_transaction_code?null==e.consult_details?null:e.consult_details.authorization_transaction_code:"WALKEDIN"," "),t.xp6(15),t.Q6J("ngForOf",t.lcZ(94,19,e.lab_arr)),t.xp6(21),t.Q6J("icon",e.faFaceSmile),t.xp6(6),t.Q6J("icon",e.faFaceMeh),t.xp6(6),t.Q6J("icon",e.faFaceFrown),t.xp6(19),t.Oqu(null==e.patient_philhealth?null:e.patient_philhealth.philhealth_id)}}function st(n,s){if(1&n&&(t.TgZ(0,"div",51),t._UZ(1,"fa-icon",52),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faCircleNotch)}}let N=(()=>{var n;class s{getResults(){Object.entries(this.lab_list).forEach(([o,i],l)=>{let r=this.nameService.getURL(i.laboratory.code);""!==r&&this.http.get(r,{params:{request_id:i.id}}).subscribe({next:c=>{c.data[0]&&this.lab_arr[i.laboratory.code]&&(this.lab_arr[i.laboratory.code].with_result=c.data[0])},error:c=>console.log(c)})}),this.getAge()}getAge(){this.http.get("patient-philhealth/philhealth",{params:{"filter[patient_id]":this.patient_info.id,per_page:"1",sort:"-enlistment_date"}}).subscribe({next:o=>{this.philhealth_info=o.data[0];let i={date_from:this.dateHelper.dateFormat(this.patient_info.birthdate),date_to:o.data[0].enlistment_date};this.http.post("konsulta/generate-age",i).subscribe({next:l=>{this.show_form=!0,this.patient_age=l.data},error:l=>console.log(l)})},error:o=>console.log(o)})}closeModal(){this.toggleModal.emit("ekas")}constructor(o,i,l){this.http=o,this.nameService=i,this.dateHelper=l,this.toggleModal=new t.vpe,this.faPrint=_.wf8,this.faFaceSmile=v.pkM,this.faFaceMeh=v.FRD,this.faFaceFrown=v.qfV,this.faCircleNotch=_.IJ7,this.faCheck=_.LEp,this.faXmark=_.g82,this.show_form=!1,this.lab_arr={CBC:{desc:"Complete Blood Count (CBC) w/ platelet count",with_result:null},LPFL:{desc:"Lipid profile (Total Cholesterol, Triglycerides, HDL Cholesterol, LDL Cholesterol)",with_result:null},FBS:{desc:"Fasting Blood Sugar (FBS)",with_result:null},OGTT:{desc:"Oral Glucose Tolerance Test",with_result:null},HBA:{desc:"Glycosylated Hemoglobin (HbA1c)",with_result:null},CRTN:{desc:"Creatinine",with_result:null},CXRAY:{desc:"Chest X-Ray",with_result:null},SPTM:{desc:"Sputum Microscopy",with_result:null},ECG:{desc:"Electrocardiogram (ECG)",with_result:null},URN:{desc:"Urinalysis",with_result:null},PSMR:{desc:"Pap smear",with_result:null},FCAL:{desc:"Fecalysis",with_result:null},FOBT:{desc:"Fecal Occult Blood Test",with_result:null}},this.lab_list_arr=[]}ngOnInit(){this.patient_info=this.http.getPatientInfo(),this.patient_philhealth=this.http.getPhilhealhtInfo(),this.facility=this.http.getUserFromJSON(),this.getResults()}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(u.O),t.Y36(nt.y),t.Y36(A.Y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-ekas"]],inputs:{lab_list:"lab_list",consult_details:"consult_details"},outputs:{toggleModal:"toggleModal"},decls:14,vars:4,consts:[["id","defaultModal","tabindex","-1","aria-hidden","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","max-w-4xl","h-full","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],["type","button","printSectionId","philhealth_form","ngxPrint","",1,"bg-white","text-blue-500","hover:bg-gray-100","hover:text-blue-400","px-2","py-1","rounded-md",3,"useExistingCss"],[3,"icon"],["class","overflow-y-auto scrollbar-thin h-96 scrollbar-thumb-gray-400 scrollbar-track-gray-100",4,"ngIf"],["class","h-96 flex justify-center align-middle w-full",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"text-white","bg-orange-500","hover:ring-2","focus:outline-none","hover:ring-orange-300","rounded","text-sm","font-medium","px-6","py-2.5","transition","duration-150","ease-in-out","transform","hover:scale-110",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"overflow-y-auto","scrollbar-thin","h-96","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"w-[210mm]","h-[297mm]","flex","justify-center","align-middle","bg-white"],["id","philhealth_form",1,"w-[195mm]","h-[272mm]","mt-[12.5mm]"],[1,"border-2","border-gray-400"],[1,"flex","justify-center","h-16","p-1"],["src","./assets/img/philhealth_logo_with_name.png",1,"h-16"],[1,"font-semibold","mt-4","ml-5","text-xl"],[1,"m-1","font-semibold","mt-3"],[1,"table-auto","border","border-gray-400","p-1","w-full"],["colspan","6",1,"text-xs","border","border-gray-400"],[1,"font-semibold"],["colspan","2",1,"text-xs","border","border-gray-400"],[1,"font-semibold","text-xs"],[1,"font-semibold","text-sm"],["colspan","3",1,"text-xs","border","border-gray-400"],[1,"flex","justify-end"],["type","checkbox","disabled","",1,"input-checkbox","disabled:bg-gray-400","checked:bg-gray-400",3,"checked"],[1,"ml-3"],[1,"table-auto","border","border-gray-400","border-collapse","w-full"],[1,"w-6/12","border","border-slate-700","text-[.8em]"],[1,"w-1/12","border","border-slate-700","text-[.8em]"],[1,"w-3/12","border","border-slate-700","text-[.8em]"],[1,"w-2/12","border","border-slate-700","text-[.8em]"],[4,"ngFor","ngForOf"],[1,"text-[.6em]","border-b-2","border-dashed","border-gray-400","w-full","p-2"],[1,"flex","p-2","border-b-2","border-dotted","border-gray-400","w-full"],[1,"w-7/12","text-[.65em]"],[1,"text-[.65em]","mt-3","ml-5"],[1,"text-[.65em]","ml-5","flex","text-center"],["type","checkbox",1,"input-checkbox","mt-3"],[1,"ml-2"],[1,"text-xl",3,"icon"],[1,"flex","p-2","border-b-2","border-gray-400","w-full"],[1,"flex","p-1","w-full"],[1,"text-[.65em]","mt-3","ml-5","align-bottom","justify-end","flex","mt-5"],[1,"underline"],[1,"border","border-slate-700","[.8em]"],[1,"border","border-slate-700","text-center","[.8em]"],[1,"border","border-slate-700","[.8em]","text-center"],[1,"h-96","flex","justify-center","align-middle","w-full"],["spin","true","size","2xl",1,"mt-20","text-blue-500",3,"icon"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5," electronic Konsulta Availment Slip (eKAS) "),t.qZA(),t.TgZ(6,"button",5),t._UZ(7,"fa-icon",6),t.qZA()(),t.YNc(8,ot,146,21,"div",7),t.YNc(9,st,2,1,"div",8),t.TgZ(10,"div",9)(11,"button",10),t.NdJ("click",function(){return i.closeModal()}),t._uU(12,"Close"),t.qZA()()()()(),t._UZ(13,"div",11)),2&o&&(t.xp6(6),t.Q6J("useExistingCss",!0),t.xp6(1),t.Q6J("icon",i.faPrint),t.xp6(1),t.Q6J("ngIf",i.show_form),t.xp6(1),t.Q6J("ngIf",!i.show_form))},dependencies:[d.sg,d.O5,g.BN,J.I,d.uU,d.Nd],styles:["@page{size:auto;size:A4;margin:7mm}"]}),s})();function lt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr",16)(1,"td",17)(2,"fa-icon",18),t.NdJ("click",function(){const l=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.toggleModal("delete",l))}),t.qZA(),t._uU(3),t.qZA(),t.TgZ(4,"th",19),t._uU(5),t.qZA(),t.TgZ(6,"td",17)(7,"fa-icon",20),t.NdJ("click",function(){const l=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.toggleModal("add",l))}),t.qZA()()()}if(2&n){const e=s.$implicit,o=t.oxw();t.xp6(2),t.Q6J("icon",o.faXmark),t.xp6(1),t.hij(" ",e.type," "),t.xp6(2),t.hij(" ",e.date_requested," "),t.xp6(2),t.Q6J("icon",o.faEdit)}}function at(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-ekas",21),t.NdJ("toggleModal",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.toggleModal(i))}),t.qZA()}}function rt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-epres",21),t.NdJ("toggleModal",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.toggleModal(i))}),t.qZA()}}let _t=(()=>{var n;class s{toggleModal(o){console.log(o),this.modal[o]=!this.modal[o]}loadDetails(){}constructor(o){this.http=o,this.faPrint=_.wf8,this.pending_list=[],this.modal=[]}ngOnInit(){this.active_loc_id=this.http.getUrlParams,this.patient_id=this.active_loc_id.patient_id,this.consult_id=this.active_loc_id.consult_id,this.loadDetails()}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(u.O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-konsulta"]],inputs:{consult_details:"consult_details"},decls:28,vars:3,consts:[[1,"mb-16","w-full"],[1,"block","shadow","p-4","mt-4","rounded-xl","text-gray-600"],[1,"text-sky-500","font-bold","flex","justify-between","py-2"],[1,"flex"],[1,"mt-2"],[1,"text-gray-500","text-sm"],["type","button",1,"px-3","py-2","rounded-md","bg-blue-500","text-sm","text-white","ml-auto","mr-3",3,"click"],["type","button",1,"px-3","py-2","rounded-md","bg-blue-500","text-sm","text-white","ml-auto",3,"click"],[1,"border","border-slate-200","shadow-md","rounded-xl"],[1,"w-full","bg-green-500","text-white","rounded-t-xl","p-3","font-semibold"],[1,"w-full","p-5"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6"],["class","bg-white border-b last:border-0",4,"ngFor","ngForOf"],[3,"toggleModal",4,"ngIf"],[1,"bg-white","border-b","last:border-0"],[1,"w-1/3","py-4","px-6"],["size","lg",1,"mx-0","my-0","text-rose-400","hover:cursor-pointer","flex-none","mr-2",3,"icon","click"],["scope","row",1,"w-1/3","py-4","px-6","font-medium","text-gray-900","whitespace-nowrap"],["size","lg",1,"mx-0","my-0","text-blue-500","hover:cursor-pointer","flex-none","mr-2",3,"icon","click"],[3,"toggleModal"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span",2)(3,"span",3)(4,"span",4),t._UZ(5,"span",5),t.qZA()(),t.TgZ(6,"div")(7,"button",6),t.NdJ("click",function(){return i.toggleModal("epres")}),t._uU(8," ePresS "),t.qZA(),t.TgZ(9,"button",7),t.NdJ("click",function(){return i.toggleModal("ekas")}),t._uU(10," eKas "),t.qZA()()(),t.TgZ(11,"div",8)(12,"div",9),t._uU(13," Konsulta visits "),t.qZA(),t.TgZ(14,"div",10)(15,"table",11)(16,"thead",12)(17,"tr")(18,"th",13),t._uU(19,"Lab type"),t.qZA(),t.TgZ(20,"th",13),t._uU(21,"Date requested"),t.qZA(),t.TgZ(22,"th",13),t._uU(23,"Action"),t.qZA()()(),t.TgZ(24,"tbody"),t.YNc(25,lt,8,4,"tr",14),t.qZA()()()()()(),t.YNc(26,at,1,0,"app-ekas",15),t.YNc(27,rt,1,0,"app-epres",15)),2&o&&(t.xp6(25),t.Q6J("ngForOf",i.pending_list),t.xp6(1),t.Q6J("ngIf",i.modal.ekas),t.xp6(1),t.Q6J("ngIf",i.modal.epres))},dependencies:[d.sg,d.O5,g.BN,M,N]}),s})();var dt=p(4593),a=p(6223),I=p(279);let Q=(()=>{var n;class s{onSubmit(){let o;this.is_saving=!0,o=this.consult_date&&this.pt_group?{patient_id:this.patient_id,consult_date:this.consult_date,pt_group:this.pt_group,consult_done:!1}:{},this.http.update("consultation/records/",this.consult_id,o).subscribe({next:i=>{console.log(i),this.is_saving=!1,this.toastr.info("Visit was reopened"),this.closeModal()},error:i=>console.log(i)})}constructor(o,i,l){this.http=o,this.router=i,this.toastr=l,this.toggleModal=new t.vpe,this.is_saving=!1}closeModal(){this.toggleModal.emit("end_visit")}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(u.O),t.Y36(b.F0),t.Y36(x._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-open-consult"]],inputs:{consult_id:"consult_id",consult_date:"consult_date",patient_id:"patient_id",pt_group:"pt_group"},outputs:{toggleModal:"toggleModal"},standalone:!0,features:[t.jDz],decls:20,vars:5,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"h-40"],[1,"flex","item-start","flex-wrap","pb-5"],[1,"grid","grid-cols-3","px-3","py-3","mt-10","mx-10","w-full","rounded-lg","text-center"],[1,"col-span-3","text-left","mb-2","pb-2","border-b","border-slate-200","font-semibold","text-lg"],[1,"col-span-3","text-left","mb-2","pb-2","text-sm"],[1,"flex","justify-end","py-2","px-5","space-x-4","rounded-b"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-300","rounded","text-sm","font-medium","my-2","px-6","py-2.5","transition","duration-150","ease-in-out",3,"click"],["type","button",1,"text-white","bg-green-500","enabled:hover:ring-2","enabled:focus:outline-none","enabled:hover:ring-rose-300","disabled:opacity-75","font-medium","rounded","text-sm","my-2","px-6","py-2.5","text-center","transition","duration-150","ease-in-out",3,"disabled","click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5," End Visit "),t.qZA()(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),t._uU(10," Do you really want to open this visit? "),t.qZA(),t.TgZ(11,"div",9),t._uU(12),t.ALo(13,"date"),t.qZA()()()(),t.TgZ(14,"div",10)(15,"button",11),t.NdJ("click",function(){return i.closeModal()}),t._uU(16,"Cancel"),t.qZA(),t.TgZ(17,"button",12),t.NdJ("click",function(){return i.onSubmit()}),t._uU(18,"Open Visit"),t.qZA()()()()(),t._UZ(19,"div",13)),2&o&&(t.xp6(12),t.hij(" Visit date & time: ",t.xi3(13,2,i.consult_date,"MM/dd/yyyy hh:mm:ss a")," "),t.xp6(5),t.Q6J("disabled",i.is_saving))},dependencies:[d.ez,d.uU]}),s})();var F=p(6719),D=p(5211),w=p(2096),O=p(3997),Y=p(3620),E=p(4664),S=p(6306),P=p(7398),H=p(8645),Z=p(8316);function ct(n,s){if(1&n&&t._UZ(0,"fa-icon",21),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSpinner)}}function pt(n,s){if(1&n&&t._UZ(0,"fa-icon",22),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSave)}}function ut(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onSubmit())}),t.YNc(1,ct,1,1,"fa-icon",19),t.YNc(2,pt,1,1,"fa-icon",20),t._uU(3),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("ngIf",e.is_saving),t.xp6(1),t.Q6J("ngIf",!e.is_saving),t.xp6(1),t.hij(" ",e.is_saving?"Saving":"Save"," ")}}function gt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",9)(2,"button",10),t._UZ(3,"fa-icon",11),t.qZA(),t.TgZ(4,"div",12)(5,"ng-select",13),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.selectedIdx=i)}),t.ALo(6,"async"),t.qZA()()(),t.TgZ(7,"div",14)(8,"textarea",15),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.idx_remarks=i)}),t.qZA()(),t.TgZ(9,"div",16),t.YNc(10,ut,4,4,"button",17),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("icon",e.faPlusSquare),t.xp6(2),t.Q6J("items",t.lcZ(6,10,e.idx$))("multiple",!0)("loading",e.idxLoading)("typeahead",e.searchInput$)("ngModel",e.selectedIdx)("disabled",e.consult_done||!e.allowed_to_edit),t.xp6(3),t.Q6J("disabled",e.consult_done||!e.allowed_to_edit)("ngModel",e.idx_remarks),t.xp6(2),t.Q6J("ngIf",!e.consult_done&&e.allowed_to_edit)}}const mt=function(n){return{"rounded-b":n}};let ht=(()=>{var n;class s{onSubmit(){this.is_saving=!0,this.selectedIdx&&Object.keys(this.selectedIdx).length>0?this.http.post("consultation/initial-diagnosis",{notes_id:this.consult_details.consult_notes.id,initial_diagnosis:this.selectedIdx}).subscribe({next:i=>{this.saveNotes()},error:i=>console.log(i)}):this.saveNotes()}saveNotes(){this.idx_remarks?this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,idx_remarks:this.idx_remarks}).subscribe({next:i=>{this.showToastr(),this.is_saving=!1},error:i=>console.log(i)}):(this.showToastr(),this.is_saving=!1)}showToastr(){this.toastr.success("Successfully updated!","Initial Diagnosis")}loadIdx(o){this.idx$=(0,D.z)((0,w.of)(o),this.searchInput$.pipe((0,q.h)(i=>null!==i&&i.length>=this.minLengthTerm),(0,O.x)(),(0,Y.b)(400),(0,C.b)(()=>this.idxLoading=!0),(0,E.w)(i=>this.getIdx(i).pipe((0,S.K)(()=>(0,w.of)([])),(0,C.b)(()=>this.idxLoading=!1)))))}getIdx(o=null){return this.http.get("libraries/diagnosis",{params:{"filter[search]":o}}).pipe((0,P.U)(i=>i.data))}loadSelected(){let o=[],i=[];this.initial_dx&&Object.keys(this.initial_dx).length>0?(Object.entries(this.initial_dx).forEach(([l,r],c)=>{let m=r;o.push(m.class_id.toString()),i.push(m.diagnosis)}),this.loadIdx(i),this.selectedIdx=o):this.loadIdx([])}ngOnChanges(o){this.show_content=this.toggle_content,this.consult_details&&(this.initial_dx=this.consult_details.consult_notes.initialdx,this.idx_remarks=this.consult_details.consult_notes.idx_remarks,this.consult_done=this.consult_details.consult_done,this.loadSelected())}constructor(o,i){this.http=o,this.toastr=i,this.faPlusSquare=_.CPW,this.faSave=_.r6l,this.faChevronCircleUp=_._qI,this.faChevronCircleDown=_.yh$,this.faSpinner=_.LM3,this.toastr_message=null,this.toastr_type=null,this.idxLoading=!1,this.show_content=!0,this.is_saving=!1,this.consult_done=!1,this.searchInput$=new H.x,this.minLengthTerm=3}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(u.O),t.Y36(x._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-initial-dx"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",allowed_to_edit:"allowed_to_edit"},features:[t.TTD],decls:11,vars:5,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[1,"flex","mb-2","p-4"],["type","submit",1,"inline-flex","p-1","items-center","text-gray-50","bg-sky-400","rounded-l-md","border","border-gray-300"],[1,"text-white","fa-xl",3,"icon"],[1,"chips-container"],["placeholder","search","typeToSearchText","search...","bindValue","class_id","bindLabel","class_name","notFoundText","No records found",1,"select-chips",3,"items","multiple","loading","typeahead","ngModel","disabled","ngModelChange"],[1,"flex","px-4","pb-4"],["rows","3","id","idx_remarks","placeholder","Initial Diagnosis remarks",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"disabled","ngModel","ngModelChange"],[1,"flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(o,i){1&o&&(t._UZ(0,"hr",0),t.TgZ(1,"div",1)(2,"div",2),t._uU(3," Diagnosis "),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"span",5),t._uU(7," Initial Diagnosis "),t.TgZ(8,"button",6),t.NdJ("click",function(){return i.show_content=!i.show_content}),t._UZ(9,"fa-icon",7),t.qZA()(),t.YNc(10,gt,11,12,"div",8),t.qZA()()()),2&o&&(t.xp6(6),t.Q6J("ngClass",t.VKq(3,mt,!i.show_content)),t.xp6(3),t.Q6J("icon",i.show_content?i.faChevronCircleUp:i.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",i.show_content))},dependencies:[d.mk,d.O5,g.BN,Z.w9,a.Fj,a.JJ,a.On,d.Ov]}),s})();function ft(n,s){if(1&n&&(t.TgZ(0,"div",18)(1,"h5",19)(2,"strong"),t._uU(3),t.qZA(),t._uU(4),t.qZA()()),2&n){const e=s.item,o=s.searchTerm;t.xp6(1),t.Q6J("ngOptionHighlight",o),t.xp6(2),t.hij("",e.icd10_code,":"),t.xp6(1),t.hij(" ",e.icd10_desc,"")}}function xt(n,s){if(1&n&&t._UZ(0,"fa-icon",23),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSpinner)}}function bt(n,s){if(1&n&&t._UZ(0,"fa-icon",24),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSave)}}function vt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onSubmit())}),t.YNc(1,xt,1,1,"fa-icon",21),t.YNc(2,bt,1,1,"fa-icon",22),t._uU(3),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("ngIf",e.is_saving),t.xp6(1),t.Q6J("ngIf",!e.is_saving),t.xp6(1),t.hij(" ",e.is_saving?"Saving":"Save"," ")}}function yt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",8)(2,"button",9),t._UZ(3,"fa-icon",10),t.qZA(),t.TgZ(4,"div",11)(5,"ng-select",12),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.selectedFdx=i)}),t.ALo(6,"async"),t.YNc(7,ft,5,3,"ng-template",13),t.qZA()()(),t.TgZ(8,"div",14)(9,"textarea",15),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.fdx_remarks=i)}),t.qZA()(),t.TgZ(10,"div",16),t.YNc(11,vt,4,4,"button",17),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("icon",e.faPlusSquare),t.xp6(2),t.Q6J("items",t.lcZ(6,10,e.fdx$))("multiple",!0)("loading",e.fdxLoading)("typeahead",e.searchInput$)("ngModel",e.selectedFdx)("disabled",e.consult_done||!e.allowed_to_edit),t.xp6(4),t.Q6J("disabled",e.consult_done||!e.allowed_to_edit)("ngModel",e.fdx_remarks),t.xp6(2),t.Q6J("ngIf",!e.consult_done&&e.allowed_to_edit)}}const Zt=function(n){return{"rounded-b":n}};let Ct=(()=>{var n;class s{onSubmit(){this.is_saving=!0,this.selectedFdx&&Object.keys(this.selectedFdx).length>0?this.http.post("consultation/final-diagnosis",{notes_id:this.consult_details.consult_notes.id,final_diagnosis:this.selectedFdx}).subscribe({next:i=>{this.saveNotes()},error:i=>console.log(i)}):this.saveNotes()}saveNotes(){this.fdx_remarks?this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,fdx_remarks:this.fdx_remarks}).subscribe({next:i=>{this.showToastr()},error:i=>console.log(i)}):this.showToastr()}showToastr(){this.is_saving=!1,this.toastr.success("Successfully updated!","Final Diagnosis")}loadFdx(o){this.fdx$=(0,D.z)((0,w.of)(o),this.searchInput$.pipe((0,q.h)(i=>null!==i&&i.length>=this.minLengthTerm),(0,O.x)(),(0,Y.b)(800),(0,C.b)(()=>this.fdxLoading=!0),(0,E.w)(i=>this.getFdx(i).pipe((0,S.K)(()=>(0,w.of)([])),(0,C.b)(()=>this.fdxLoading=!1)))))}getFdx(o=null){return this.http.get("libraries/icd10",{params:{"filter[search]":o}}).pipe((0,P.U)(i=>i.data))}loadSelected(){let o=[],i=[];this.final_dx&&Object.keys(this.final_dx).length>0?(Object.entries(this.final_dx).forEach(([l,r],c)=>{let m=r;o.push(m.icd10_code.toString()),i.push(m.lib_icd10)}),this.loadFdx(i),this.selectedFdx=o):this.loadFdx([])}ngOnChanges(o){this.show_content=this.toggle_content,this.consult_details&&(this.final_dx=this.consult_details.consult_notes.finaldx,this.fdx_remarks=this.consult_details.consult_notes.fdx_remarks,this.consult_done=this.consult_details.consult_done,this.loadSelected())}constructor(o,i){this.http=o,this.toastr=i,this.faPlusSquare=v.CPW,this.faChevronCircleUp=_._qI,this.faChevronCircleDown=_.yh$,this.faSave=_.r6l,this.faSpinner=_.LM3,this.fdxLoading=!1,this.show_content=!0,this.is_saving=!1,this.consult_done=!1,this.searchInput$=new H.x,this.minLengthTerm=3}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(u.O),t.Y36(x._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-final-dx"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",allowed_to_edit:"allowed_to_edit"},features:[t.TTD],decls:9,vars:5,consts:[[1,"grid","grid-cols-10","mt-4"],[1,"col-span-2","pt-2"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[1,"flex","mb-2","p-4"],["type","submit",1,"inline-flex","p-1","items-center","text-gray-50","bg-sky-400","rounded-l-md","border","border-gray-300"],[1,"text-white","fa-xl",3,"icon"],[1,"chips-container"],["placeholder","search","typeToSearchText","search...","bindValue","icd10_code","bindLabel","icd10_desc","notFoundText","No records found",1,"select-chips",3,"items","multiple","loading","typeahead","ngModel","disabled","ngModelChange"],["ng-option-tmp",""],[1,"flex","px-4","pb-4"],["rows","3","id","fdx_remarks","placeholder","Final Diagnosis remarks",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"disabled","ngModel","ngModelChange"],[1,"flex","justify-between"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[1,"whitespace-normal"],[1,"text-gray-700",3,"ngOptionHighlight"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0),t._UZ(1,"div",1),t.TgZ(2,"div",2)(3,"div",3)(4,"span",4),t._uU(5," Final Diagnosis "),t.TgZ(6,"button",5),t.NdJ("click",function(){return i.show_content=!i.show_content}),t._UZ(7,"fa-icon",6),t.qZA()(),t.YNc(8,yt,12,12,"div",7),t.qZA()()()),2&o&&(t.xp6(4),t.Q6J("ngClass",t.VKq(3,Zt,!i.show_content)),t.xp6(3),t.Q6J("icon",i.show_content?i.faChevronCircleUp:i.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",i.show_content))},dependencies:[d.mk,d.O5,g.BN,Z.w9,Z.ir,a.Fj,a.JJ,a.On,d.Ov]}),s})();function wt(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.key))}}function Tt(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.key))}}const qt=function(n){return{"text-blue-500":n}};function At(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"input",25),t.NdJ("ngModelChange",function(i){const r=t.CHM(e).$implicit,c=t.oxw(4);return t.KtG(c.physical_codes[r.pe_id]=i)})("change",function(){t.CHM(e);const i=t.oxw(4);return t.KtG(i.checkIsNormal())}),t.qZA(),t.TgZ(2,"label",26),t._uU(3),t.qZA()()}if(2&n){const e=s.$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("disabled",o.consult_done||!o.allowed_to_edit)("ngModel",o.physical_codes[e.pe_id]),t.uIk("id",e.pe_id),t.xp6(1),t.Q6J("ngClass",t.VKq(6,qt,1===e.konsulta_library_status)),t.uIk("for",e.pe_id),t.xp6(1),t.Oqu(e.pe_desc)}}function kt(n,s){if(1&n&&(t.TgZ(0,"div",23),t.YNc(1,At,4,8,"div",24),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.value)}}function Ut(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",27)(1,"span",28),t._uU(2,"Remarks: "),t.qZA(),t.TgZ(3,"input",29),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.physical_remarks[l.key+"_remarks"]=i)}),t.qZA()()}if(2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(3),t.Q6J("disabled",o.consult_done||!o.allowed_to_edit)("ngModel",o.physical_remarks[e.key+"_remarks"])}}function Jt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",18)(1,"div",19)(2,"button",6),t.NdJ("click",function(){const l=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.toggleItems(l.key))}),t._UZ(3,"fa-icon",20),t.YNc(4,wt,3,3,"span",8),t.YNc(5,Tt,3,3,"span",8),t.qZA()(),t.YNc(6,kt,2,1,"div",21),t.YNc(7,Ut,4,2,"div",22),t.qZA()}if(2&n){const e=s.$implicit,o=t.oxw(2);t.xp6(3),t.Q6J("icon",o.pe_item[e.key]?o.faChevronUp:o.faChevronDown),t.xp6(1),t.Q6J("ngIf","heent"!==e.key),t.xp6(1),t.Q6J("ngIf","heent"===e.key),t.xp6(1),t.Q6J("ngIf",void 0!==o.pe_item[e.key]&&o.pe_item[e.key]),t.xp6(1),t.Q6J("ngIf",void 0!==o.pe_item[e.key]&&o.pe_item[e.key])}}function Mt(n,s){if(1&n&&t._UZ(0,"fa-icon",33),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSpinner)}}function Nt(n,s){if(1&n&&t._UZ(0,"fa-icon",34),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSave)}}function It(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onSubmit())}),t.YNc(1,Mt,1,1,"fa-icon",31),t.YNc(2,Nt,1,1,"fa-icon",32),t._uU(3),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("ngIf",e.is_saving),t.xp6(1),t.Q6J("ngIf",!e.is_saving),t.xp6(1),t.hij(" ",e.is_saving?"Saving":"Save"," ")}}function Qt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",9)(2,"div",10)(3,"input",11),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.is_normal=i)})("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleNormal())}),t.qZA(),t.TgZ(4,"label",12),t._uU(5,"Essentially Normal"),t.qZA()(),t.YNc(6,Jt,8,5,"div",13),t.ALo(7,"keyvalue"),t.TgZ(8,"div")(9,"label",14),t._uU(10,"PE Remarks"),t.qZA(),t.TgZ(11,"input",15),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.physical_remarks.remarks=i)}),t.qZA()()(),t.TgZ(12,"div",16),t.YNc(13,It,4,4,"button",17),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.is_normal),t.xp6(3),t.Q6J("ngForOf",t.lcZ(7,4,e.pe_grouped)),t.xp6(5),t.Q6J("ngModel",e.physical_remarks.remarks),t.xp6(2),t.Q6J("ngIf",!e.consult_done&&e.allowed_to_edit)}}const Ft=function(n){return{"rounded-b":n}};let Dt=(()=>{var n;class s{toggleItems(o){this.pe_item[o]=!this.pe_item[o]}toggleNormal(){this.is_normal=!this.is_normal,this.physical_codes=[],this.physical_codes={ABDOMEN12:this.is_normal,CHEST06:this.is_normal,GENITOURINARY01:this.is_normal,HEART05:this.is_normal,HEENT11:this.is_normal,NEURO06:this.is_normal,RECTAL01:this.is_normal,SKIN15:this.is_normal}}onSubmit(){if(this.is_saving=!0,Object.keys(this.physical_codes).length>0){let o=[];Object.entries(this.physical_codes).forEach(([i,l],r)=>{!0===l&&o.push(i)}),this.saveCodes(o)}else this.saveNotes()}saveCodes(o){this.http.post("consultation/physical-exam",{notes_id:this.consult_notes.id,physical_exam:o}).subscribe({next:l=>{this.saveNotes()},error:l=>console.log(l)})}saveNotes(){let o;this.physical_remarks.notes_id=this.consult_notes.id,this.physical_remarks.patient_id=this.consult_details.patient.id,o=null===this.physical_remarks.id?this.http.post("consultation/physical-exam-remarks",this.physical_remarks):this.http.update("consultation/physical-exam-remarks/",this.physical_remarks.id,this.physical_remarks),o.subscribe({next:i=>{this.is_saving=!1,this.showToastr()},error:i=>console.log(i)})}showToastr(){this.toastr.success("Successfully updated!","Physical exam")}loadLibraries(){this.http.get("libraries/pe").subscribe(o=>{const l=o.data.reduce((r,c)=>{let m=!0;if(("BARTHOLINS"===c.category_id||"SPECULUM"===c.category_id)&&"M"===this.consult_details.patient.gender&&(m=!1),m){const T=r[c.category_id.toLowerCase()]||[];T.push(c),r[c.category_id.toLowerCase()]=T}return r},{});this.pe_grouped=l})}loadSelected(){Object.keys(this.consult_notes.physical_exam).length>0&&(Object.entries(this.consult_notes.physical_exam).forEach(([o,i],l)=>{this.physical_codes[i.pe_id]=!0}),this.checkIsNormal())}checkIsNormal(){this.is_normal=!!(this.physical_codes.ABDOMEN12&&this.physical_codes.CHEST06&&this.physical_codes.GENITOURINARY01&&this.physical_codes.HEART05&&this.physical_codes.HEENT11&&this.physical_codes.NEURO06&&this.physical_codes.RECTAL01&&this.physical_codes.SKIN15)}ngOnChanges(o){this.show_content=this.toggle_content,this.consult_details&&(this.consult_notes=this.consult_details.consult_notes,this.consult_done=this.consult_details.consult_done,this.loadSelected(),this.consult_notes.physical_exam_remarks&&(this.physical_remarks=this.consult_notes.physical_exam_remarks))}constructor(o,i){this.http=o,this.toastr=i,this.faSave=_.r6l,this.faChevronCircleUp=_._qI,this.faChevronCircleDown=_.yh$,this.faSpinner=_.LM3,this.faChevronDown=_.ptq,this.faChevronUp=_.mTx,this.pe_grouped={},this.physical_codes=[],this.pe_item=[],this.physical_remarks={id:null,abdomen_remarks:null,breast_remarks:null,chest_remarks:null,extremities_remarks:null,genitourinary_remarks:null,heart_remarks:null,heent_remarks:null,neuro_remarks:null,pelvic_remarks:null,rectal_remarks:null,skin_remarks:null,remarks:null},this.show_content=!1,this.consult_done=!1,this.is_saving=!1,this.is_normal=!1}ngOnInit(){this.loadLibraries()}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(u.O),t.Y36(x._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-physical-exam"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",allowed_to_edit:"allowed_to_edit"},features:[t.TTD],decls:11,vars:5,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[1,"w-full","p-5"],[1,"mb-2"],["id","is_normal","type","checkbox",1,"input-checkbox",3,"ngModel","ngModelChange","click"],["for","is_normal",1,"pl-1","font-semibold"],["class","grid grid-cols-1 gap-3 mb-3 border-b border-slate-200 pb-3 last:border-b-0",4,"ngFor","ngForOf"],["for",""],["type","text",1,"input",3,"ngModel","ngModelChange"],[1,"flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[1,"grid","grid-cols-1","gap-3","mb-3","border-b","border-slate-200","pb-3","last:border-b-0"],[1,"col-span-1","font-bold"],["size","md",1,"pr-2",3,"icon"],["class","col-span-1 grid grid-cols-2 gap-y-2",4,"ngIf"],["class","flex col-span-1",4,"ngIf"],[1,"col-span-1","grid","grid-cols-2","gap-y-2"],[4,"ngFor","ngForOf"],["type","checkbox",1,"rounded-md","border","border-gray-400","p-2",3,"disabled","ngModel","ngModelChange","change"],[1,"pl-2",3,"ngClass"],[1,"flex","col-span-1"],[1,"font-semibold","mt-3","mr-2","text-sm"],["rows","2","type","textarea","placeholder","remarks",1,"input","placeholder-slate-400","placeholder:italic",3,"disabled","ngModel","ngModelChange"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(o,i){1&o&&(t._UZ(0,"hr",0),t.TgZ(1,"div",1)(2,"div",2),t._uU(3," Physical Exam "),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"span",5),t._uU(7," Observations "),t.TgZ(8,"button",6),t.NdJ("click",function(){return i.show_content=!i.show_content}),t._UZ(9,"fa-icon",7),t.qZA()(),t.YNc(10,Qt,14,6,"div",8),t.qZA()()()),2&o&&(t.xp6(6),t.Q6J("ngClass",t.VKq(3,Ft,!i.show_content)),t.xp6(3),t.Q6J("icon",i.show_content?i.faChevronCircleUp:i.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",i.show_content))},dependencies:[d.mk,d.sg,d.O5,g.BN,a.Fj,a.Wl,a.JJ,a.On,d.gd,d.rS,d.Nd]}),s})();var j=p(3146);function Ot(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",27)(1,"button",28),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.showLibDrugs())}),t._uU(2," Show Library "),t.qZA()()}}function Yt(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td",23)(2,"div",24)(3,"div",25),t._uU(4," No records found... "),t.qZA(),t.YNc(5,Ot,3,0,"div",26),t.qZA()()()),2&n){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",!e.lib_drug_table)}}function Et(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t._UZ(2,"br"),t._uU(3),t._UZ(4,"br"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.konsulta_medicine?e.konsulta_medicine.generic.desc:""," "),t.xp6(2),t.hij(" ",e.konsulta_medicine?e.konsulta_medicine.desc:""," ")}}function St(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t._UZ(2,"br"),t.qZA()),2&n){const e=t.oxw().$implicit;let o;t.xp6(1),t.hij("",null!==(o=e.added_medicine)&&void 0!==o?o:""," ")}}function Pt(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.generic_desc," ")}}function Ht(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.lnq(" ",e.dosage_quantity," ",e.unit_of_measurement.desc," (",e.unit_of_measurement.code,") ")}}function jt(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.desc," ")}}function Kt(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t._UZ(2,"br"),t._uU(3),t._UZ(4,"br"),t._uU(5),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.regimen.desc," "),t.xp6(2),t.AsE(" ",e.duration_intake," ",e.frequency.desc," "),t.xp6(2),t.AsE(" ",e.quantity," ",e.preparation.desc," ")}}function Lt(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t._UZ(2,"br"),t._uU(3),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.AsE(" ",e.unit_desc," ",e.package_desc," "),t.xp6(2),t.hij(" ",e.form_desc," ")}}const Gt=function(n){return{"bg-gray-50":n}};function Rt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr",29),t.NdJ("click",function(){const l=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.selectDrugs(l))}),t.TgZ(1,"th",30)(2,"span"),t._uU(3),t._UZ(4,"br"),t.qZA(),t.YNc(5,Et,5,2,"span",18),t.YNc(6,St,3,1,"span",18),t.YNc(7,Pt,2,1,"span",18),t.qZA(),t.TgZ(8,"td",31),t.YNc(9,Ht,2,3,"span",18),t.YNc(10,jt,2,1,"span",18),t.qZA(),t.TgZ(11,"td",31),t.YNc(12,Kt,6,5,"span",18),t.YNc(13,Lt,4,3,"span",18),t.qZA(),t._UZ(14,"td",31),t.qZA()}if(2&n){const e=s.$implicit;t.Q6J("ngClass",t.VKq(9,Gt,s.odd)),t.xp6(3),t.Oqu(e.brand_name),t.xp6(2),t.Q6J("ngIf",e.konsulta_medicine),t.xp6(1),t.Q6J("ngIf",e.added_medicine),t.xp6(1),t.Q6J("ngIf",!e.id),t.xp6(2),t.Q6J("ngIf",e.id),t.xp6(1),t.Q6J("ngIf",!e.id),t.xp6(2),t.Q6J("ngIf",e.id),t.xp6(1),t.Q6J("ngIf",!e.id)}}function $t(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",32)(1,"div",33)(2,"div",34)(3,"p",35),t._uU(4," Showing "),t.TgZ(5,"span",36),t._uU(6),t.qZA(),t._uU(7," to "),t.TgZ(8,"span",36),t._uU(9),t.qZA(),t._uU(10," of "),t.TgZ(11,"span",36),t._uU(12),t.qZA(),t._uU(13," results "),t.qZA()(),t.TgZ(14,"div")(15,"nav",37)(16,"button",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.loadMedicineList(1))}),t._UZ(17,"fa-icon",39),t.qZA(),t.TgZ(18,"button",40),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.loadMedicineList(i.current_page-1))}),t._UZ(19,"fa-icon",39),t._uU(20,"Previous "),t.qZA(),t.TgZ(21,"button",40),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.loadMedicineList(i.current_page+1))}),t._uU(22," Next"),t._UZ(23,"fa-icon",41),t.qZA(),t.TgZ(24,"button",42),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.loadMedicineList(i.last_page))}),t._UZ(25,"fa-icon",41),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(6),t.Oqu(e.from),t.xp6(3),t.Oqu(e.to),t.xp6(3),t.Oqu(e.total),t.xp6(4),t.Q6J("disabled",1===e.current_page),t.xp6(1),t.Q6J("icon",e.faAnglesLeft),t.xp6(1),t.Q6J("disabled",1===e.current_page),t.xp6(1),t.Q6J("icon",e.faChevronLeft),t.xp6(2),t.Q6J("disabled",e.current_page===e.last_page),t.xp6(2),t.Q6J("icon",e.faChevronRight),t.xp6(1),t.Q6J("disabled",e.current_page===e.last_page),t.xp6(1),t.Q6J("icon",e.faAnglesRight)}}let Vt=(()=>{var n;class s{selectDrugs(o){delete o.id,o.new_drug=this.lib_drug_table,this.openAddForm.emit(o),this.toggleList.emit()}closeModal(){this.toggleList.emit()}showLibDrugs(){this.lib_drug_table=!0,this.loadMedicineList(1)}addNewDrug(o){this.openAddForm.emit(o),this.toggleList.emit()}loadMedicineList(o){let i=this.lib_drug_table?"libraries/konsulta-medicines":"medicine/list",l={params:{}};this.search_item&&(l.params["filter[search]"]=this.search_item),o&&(l.params.page=o),l.params.per_page=this.per_page,this.http.get(i,l).subscribe({next:r=>{this.drug_list=r.data,this.current_page=r.meta.current_page,this.last_page=r.meta.last_page,this.from=r.meta.from,this.to=r.meta.to,this.total=r.meta.total},error:r=>console.log(r)})}constructor(o){this.http=o,this.openAddForm=new t.vpe,this.toggleList=new t.vpe,this.faAnglesLeft=_._Wx,this.faChevronLeft=_.A35,this.faChevronRight=_._tD,this.faAnglesRight=_.ccb,this.faSearch=_.wn1,this.faEdit=_.Xcf,this.faAdd=_.XSk,this.faCircleXmark=_.WA2,this.is_updating=!1,this.show_lib_drug=!1,this.per_page=10,this.lib_drug_table=!1}ngOnInit(){this.loadMedicineList()}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(u.O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-drug-list"]],outputs:{openAddForm:"openAddForm",toggleList:"toggleList"},decls:30,vars:6,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-5xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"flex","justify-end"],[1,"border","border-gray-400","rounded-md","bg-white"],["type","text","placeholder","Search drugs",1,"form-input","border-0","text-sm","p-1","m-1","border-r","border-gray-400",3,"ngModel","ngModelChange","keyup.enter"],["type","button",1,"text-blue-500","w-9","h-9",3,"click"],[1,"-ml-1",3,"icon"],["type","button",1,"text-white","w-9","h-9",3,"click"],[1,"-mr-4",3,"icon"],[1,"h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"overflow-x-auto","relative","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400","mb-5"],[1,"sticky","top-0","text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6"],[1,"overflow-y-auto"],[4,"ngIf"],["class","bg-white border-t","class","hover:bg-blue-200 cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"flex","justify-end","py-4","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["class","bg-white py-3 flex items-center justify-between sm:px-6",4,"ngIf"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],["colspan","9"],[1,"grid","grid-cols-1","w-full","mt-10"],[1,"text-center","italic"],["class","flex justify-center mt-3",4,"ngIf"],[1,"flex","justify-center","mt-3"],["type","button",1,"btn-save",3,"click"],[1,"hover:bg-blue-200","cursor-pointer",3,"ngClass","click"],["scope","row",1,"py-4","px-6","font-medium","whitespace-nowrap"],[1,"py-4","px-6"],[1,"bg-white","py-3","flex","items-center","justify-between","sm:px-6"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"mr-3"],[1,"text-sm","text-gray-700"],[1,"font-medium"],["aria-label","Pagination",1,"relative","z-0","inline-flex","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"disabled","click"],[1,"block","h-15","w-15","text-gray-500","pr-1",3,"icon"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","bg-white","text-sm","font-medium","text-gray-700","hover:bg-gray-50",3,"disabled","click"],[1,"h-5","w-5","text-gray-500",3,"icon"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"disabled","click"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5," Drugs library "),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"input",7),t.NdJ("ngModelChange",function(r){return i.search_item=r})("keyup.enter",function(){return i.loadMedicineList()}),t.qZA(),t.TgZ(9,"button",8),t.NdJ("click",function(){return i.loadMedicineList()}),t._UZ(10,"fa-icon",9),t.qZA()(),t.TgZ(11,"button",10),t.NdJ("click",function(){return i.closeModal()}),t._UZ(12,"fa-icon",11),t.qZA()()(),t.TgZ(13,"div",12)(14,"div",13)(15,"table",14)(16,"thead",15)(17,"tr")(18,"th",16),t._uU(19,"Drug Name"),t.qZA(),t.TgZ(20,"th",16),t._uU(21,"Dosage"),t.qZA(),t.TgZ(22,"th",16),t._uU(23,"Package"),t.qZA()()(),t.TgZ(24,"tbody",17),t.YNc(25,Yt,6,1,"tr",18),t.YNc(26,Rt,15,11,"tr",19),t.qZA()()()(),t.TgZ(27,"div",20),t.YNc(28,$t,26,11,"div",21),t.qZA()()()(),t._UZ(29,"div",22)),2&o&&(t.xp6(8),t.Q6J("ngModel",i.search_item),t.xp6(2),t.Q6J("icon",i.faSearch),t.xp6(2),t.Q6J("icon",i.faCircleXmark),t.xp6(13),t.Q6J("ngIf",0===(null==i.drug_list?null:i.drug_list.length)||!i.drug_list),t.xp6(1),t.Q6J("ngForOf",i.drug_list),t.xp6(2),t.Q6J("ngIf",(null==i.drug_list?null:i.drug_list.length)>=1))},dependencies:[d.mk,d.sg,d.O5,g.BN,a.Fj,a.JJ,a.On]}),s})();function Bt(n,s){1&n&&(t.TgZ(0,"div",42)(1,"strong"),t._uU(2,"Note: "),t.qZA(),t._uU(3,"Saving this prescription will automatically add new item in your drug list. "),t.qZA())}function zt(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.required_message," ")}}function Wt(n,s){if(1&n&&(t.TgZ(0,"div",46),t.YNc(1,zt,2,1,"div",47),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.f.brand_name.errors?null:e.f.brand_name.errors.required)}}const h=function(n){return{"text-red-500":n}},f=function(n){return{"invalid-input":n}};function Xt(n,s){if(1&n&&(t.TgZ(0,"div",43)(1,"label",44),t._uU(2,"Brand Name"),t.qZA(),t._UZ(3,"input",45),t.YNc(4,Wt,2,1,"div",14),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(3,h,e.is_saving&&e.f.brand_name.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(5,f,e.is_saving&&e.f.brand_name.errors)),t.xp6(1),t.Q6J("ngIf",e.is_saving&&e.f.brand_name.errors)}}function te(n,s){if(1&n&&(t.TgZ(0,"div",43)(1,"span",48),t._uU(2,"Drug description:"),t.qZA(),t._uU(3),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.hij(" ",e.selected_drug.konsulta_medicine?e.selected_drug.konsulta_medicine.desc:e.selected_drug.desc," ")}}function ee(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.required_message," ")}}function ne(n,s){if(1&n&&(t.TgZ(0,"div",46),t.YNc(1,ee,2,1,"div",47),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.f.added_medicine.errors?null:e.f.added_medicine.errors.required)}}function ie(n,s){if(1&n&&(t.TgZ(0,"div",30)(1,"label",49),t._uU(2,"Drug name"),t.qZA(),t._UZ(3,"input",50),t.YNc(4,ne,2,1,"div",14),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(3,h,e.is_saving&&e.f.added_medicine.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(5,f,e.is_saving&&e.f.added_medicine.errors)),t.xp6(1),t.Q6J("ngIf",e.is_saving&&e.f.added_medicine.errors)}}function oe(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function se(n,s){if(1&n&&(t.TgZ(0,"div",46),t.YNc(1,oe,2,1,"div",47),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.dosage_quantity.errors?null:e.f.dosage_quantity.errors.required)}}function le(n,s){if(1&n&&(t.TgZ(0,"option",51),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function ae(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function re(n,s){if(1&n&&(t.TgZ(0,"div",46),t.YNc(1,ae,2,1,"div",47),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.dosage_uom.errors?null:e.f.dosage_uom.errors.required)}}function _e(n,s){if(1&n&&(t.TgZ(0,"option",51),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function de(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function ce(n,s){if(1&n&&(t.TgZ(0,"div",46),t.YNc(1,de,2,1,"div",47),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.dose_regimen.errors?null:e.f.dose_regimen.errors.required)}}function pe(n,s){if(1&n&&(t.TgZ(0,"option",51),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function ue(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function ge(n,s){if(1&n&&(t.TgZ(0,"div",46),t.YNc(1,ue,2,1,"div",47),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.medicine_route_code.errors?null:e.f.medicine_route_code.errors.required)}}function me(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function he(n,s){if(1&n&&(t.TgZ(0,"div",46),t.YNc(1,me,2,1,"div",47),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.duration_intake.errors?null:e.f.duration_intake.errors.required)}}function fe(n,s){if(1&n&&(t.TgZ(0,"option",51),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function xe(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function be(n,s){if(1&n&&(t.TgZ(0,"div",46),t.YNc(1,xe,2,1,"div",47),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.duration_frequency.errors?null:e.f.duration_frequency.errors.required)}}function ve(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function ye(n,s){if(1&n&&(t.TgZ(0,"div",46),t.YNc(1,ve,2,1,"div",47),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.quantity.errors?null:e.f.quantity.errors.required)}}function Ze(n,s){if(1&n&&(t.TgZ(0,"option",51),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function Ce(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function we(n,s){if(1&n&&(t.TgZ(0,"div",46),t.YNc(1,Ce,2,1,"div",47),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.quantity_preparation.errors?null:e.f.quantity_preparation.errors.required)}}function Te(n,s){if(1&n&&(t.TgZ(0,"option",51),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function qe(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function Ae(n,s){if(1&n&&(t.TgZ(0,"div",46),t.YNc(1,qe,2,1,"div",47),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.medicine_purpose.errors?null:e.f.medicine_purpose.errors.required)}}function ke(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.required_message," ")}}function Ue(n,s){if(1&n&&(t.TgZ(0,"div",46),t.YNc(1,ke,2,1,"div",47),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.f.purpose_other.errors?null:e.f.purpose_other.errors.required)}}function Je(n,s){if(1&n&&(t.TgZ(0,"div",30)(1,"label",52),t._uU(2,"Purpose remarks"),t.qZA(),t._UZ(3,"input",53),t.YNc(4,Ue,2,1,"div",14),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(3,h,e.is_saving&&e.f.purpose_other.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(5,f,e.is_saving&&e.f.purpose_other.errors)),t.xp6(1),t.Q6J("ngIf",e.is_saving&&e.f.purpose_other.errors)}}function Me(n,s){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.Oqu(e.value)}}function Ne(n,s){if(1&n&&(t.TgZ(0,"div",54)(1,"div",55)(2,"ul",56),t.YNc(3,Me,2,1,"li",57),t.ALo(4,"keyvalue"),t.qZA()()()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",t.lcZ(4,1,e.submit_errors))}}let Ie=(()=>{var n;class s{get f(){return this.prescriptionForm.controls}closeModal(){this.toggleForm.emit()}onSubmit(){this.is_loading=!0,console.log(this.prescriptionForm),this.prescriptionForm.valid&&(this.selected_drug.new_drug?this.http.post("medicine/list",this.prescriptionForm.value).subscribe({next:o=>{this.savePrescription()},error:o=>{this.is_loading=!1,this.http.showError(o.error.message,"Medicine List")}}):(this.is_loading=!1,this.savePrescription()))}savePrescription(){let o;o=this.selected_drug&&this.selected_drug.id?this.http.update("medicine/prescriptions/",this.selected_drug.id,this.prescriptionForm.value):this.http.post("medicine/prescriptions",this.prescriptionForm.value),o.subscribe({next:i=>{this.is_loading=!1,this.toastr.success("Successfully added","Prescription"),this.closeModal()},error:i=>{this.is_loading=!1,this.http.showError(i.error.message,"Prescription")}})}loadLibraries(){this.libraries.forEach(o=>{this.http.get("libraries/"+o.location).subscribe({next:i=>{this[o.var_name]=i.data},error:i=>console.log(i),complete:()=>this.show_form=!0})})}constructor(o,i,l){this.http=o,this.toastr=i,this.formBuilder=l,this.toggleForm=new t.vpe,this.faCircleNotch=_.IJ7,this.faSave=v.r6l,this.is_saving=!1,this.show_form=!1,this.membership_types=[],this.prescriptionForm=new a.cw({brand_name:new a.NI(null),medicine_name:new a.NI(null),medicine_code:new a.NI(null),patient_id:new a.NI(null),prescribed_by:new a.NI(null),consult_id:new a.NI(null),prescription_date:new a.NI(null),konsulta_medicine_code:new a.NI(null),added_medicine:new a.NI(null),dosage_quantity:new a.NI(null),dosage_uom:new a.NI(null),dose_regimen:new a.NI(null),medicine_purpose:new a.NI(null),purpose_other:new a.NI(null),duration_intake:new a.NI(null),duration_frequency:new a.NI(null),quantity:new a.NI(null),quantity_preparation:new a.NI(null),instruction_quantity:new a.NI(null),medicine_route_code:new a.NI(null),remarks:new a.NI(null)}),this.is_loading=!1,this.libraries=[{var_name:"drug_uom",location:"unit-of-measurements"},{var_name:"drug_regimen",location:"dose-regimens"},{var_name:"drug_purpose",location:"purposes"},{var_name:"drug_frequency",location:"duration-frequencies"},{var_name:"drug_preparation",location:"preparations"},{var_name:"drug_route",location:"medicine-route"}],this.add_drug=!1}checkPurpose(){"99"===this.prescriptionForm.value.medicine_purpose?this.prescriptionForm.controls.purpose_other.enable():this.prescriptionForm.controls.purpose_other.disable()}patchValue(){this.prescriptionForm.patchValue({konsulta_medicine_code:this.selected_drug.konsulta_medicine?this.selected_drug.konsulta_medicine.code:null,added_medicine:this.selected_drug.added_medicine?this.selected_drug.added_medicine:null,dosage_quantity:this.selected_drug.dosage_quantity,dosage_uom:this.selected_drug.unit_of_measurement?this.selected_drug.unit_of_measurement.code:null,dose_regimen:this.selected_drug.regimen?this.selected_drug.regimen.code:null,medicine_purpose:this.selected_drug.purpose?this.selected_drug.purpose.code:null,duration_intake:this.selected_drug.duration_intake,duration_frequency:this.selected_drug.frequency?this.selected_drug.frequency.code:null,quantity:this.selected_drug.quantity,quantity_preparation:this.selected_drug.preparation?this.selected_drug.preparation.code:null,instruction_quantity:this.selected_drug.instruction_quantity??1,medicine_route_code:this.selected_drug.medicine_route?this.selected_drug.medicine_route.code:null,remarks:this.selected_drug.remarks}),this.selected_drug&&this.selected_drug.new_drug&&this.prescriptionForm.patchValue({konsulta_medicine_code:this.selected_drug.code}),this.selected_drug.konsulta_medicine?this.prescriptionForm.controls.added_medicine.disable():this.selected_drug.added_medicine&&(this.prescriptionForm.controls.added_medicine.enable(),this.prescriptionForm.controls.konsulta_medicine_code.disable()),this.checkPurpose()}ngOnChanges(o){this.prescriptionForm=this.formBuilder.nonNullable.group({brand_name:[null],patient_id:[this.consult_details.patient.id],prescribed_by:[this.consult_details.physician.id,[a.kI.required]],consult_id:[this.consult_details.id,[a.kI.required]],prescription_date:[(0,d.p6)(this.consult_details.consult_date,"yyyy-MM-dd","en","Asia/Manila"),[a.kI.required]],konsulta_medicine_code:[null,[a.kI.required]],added_medicine:[null],dosage_quantity:[null,[a.kI.required]],dosage_uom:[null,[a.kI.required]],dose_regimen:[null,[a.kI.required]],medicine_purpose:[null,[a.kI.required]],purpose_other:[null,[a.kI.required]],duration_intake:[null,[a.kI.required]],duration_frequency:[null,[a.kI.required]],quantity:[null,[a.kI.required]],quantity_preparation:[null,[a.kI.required]],instruction_quantity:[1],medicine_route_code:[null,[a.kI.required]],remarks:[null]}),this.selected_drug?this.patchValue():this.prescriptionForm.controls.konsulta_medicine_code.disable()}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(u.O),t.Y36(x._W),t.Y36(a.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-drug-form"]],inputs:{selected_drug:"selected_drug",consult_details:"consult_details",drug_uom:"drug_uom",drug_regimen:"drug_regimen",drug_purpose:"drug_purpose",drug_frequency:"drug_frequency",drug_preparation:"drug_preparation",drug_route:"drug_route"},outputs:{toggleForm:"toggleForm"},features:[t.TTD],decls:77,vars:87,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white","pl-5"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"w-full","max-w-3xl","text-left","text-gray-500","dark:text-gray-400",3,"formGroup"],[1,"grid","grid-cols-3","gap-4","pb-5","px-10"],["class","col-span-3 mt-5 mx-5 px-5 py-3 rounded-md border border-yellow-500 bg-yellow-100",4,"ngIf"],["class","col-span-3 mt-5 mx-5",4,"ngIf"],["class","col-span-3 text-sm ",4,"ngIf"],[1,"col-span-1","text-sm"],["for","dosage_quantity",1,"font-semibold",3,"ngClass"],["name","dosage_quantity","id","dosage_quantity","formControlName","dosage_quantity","type","number",1,"input",3,"ngClass"],["class","invalid-alert",4,"ngIf"],["for","dosage_uom",1,"font-semibold",3,"ngClass"],["name","dosage_uom","id","dosage_uom","formControlName","dosage_uom",1,"input",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["for","dose_regimen",1,"font-semibold",3,"ngClass"],["name","dose_regimen","id","dose_regimen","formControlName","dose_regimen",1,"input",3,"ngClass"],["for","medicine_route_code",1,"font-semibold",3,"ngClass"],["name","route","id","medicine_route_code","formControlName","medicine_route_code",1,"input",3,"ngClass"],["for","duration_intake",1,"font-semibold",3,"ngClass"],["name","duration_intake","id","duration_intake","formControlName","duration_intake","type","number",1,"input",3,"ngClass"],["for","duration_frequency",1,"font-semibold",3,"ngClass"],["name","duration_frequency","id","duration_frequency","formControlName","duration_frequency",1,"input",3,"ngClass"],["for","quantity",1,"font-semibold",3,"ngClass"],["name","quantity","id","quantity","formControlName","quantity","type","number",1,"input",3,"ngClass"],["for","quantity_preparation",1,"font-semibold",3,"ngClass"],["name","quantity_preparation","id","quantity_preparation","formControlName","quantity_preparation",1,"input",3,"ngClass"],[1,"col-span-3","text-sm"],["for","medicine_purpose",1,"font-semibold",3,"ngClass"],["name","medicine_purpose","id","medicine_purpose","formControlName","medicine_purpose",1,"input",3,"ngClass","change"],["class","col-span-3 text-sm",4,"ngIf"],["for","remarks",1,"font-semibold",3,"ngClass"],["name","remarks","id","remarks","formControlName","remarks","type","text",1,"input",3,"ngClass"],["id","show_errors","class","relative mx-10 col-span-8 bg-red-200 rounded border border-red-300 text-red-900 text-sm mb-5",4,"ngIf"],[1,"flex","justify-end","mr-10","py-3","rounded-b"],["type","button",1,"btn-save","px-10","bg-gray-400","mr-5",3,"disabled","click"],["type","button",1,"btn-save","px-10","disabled:bg-gray-300",3,"disabled","click"],[3,"icon","spin"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"col-span-3","mt-5","mx-5","px-5","py-3","rounded-md","border","border-yellow-500","bg-yellow-100"],[1,"col-span-3","mt-5","mx-5"],["for","brand_name",1,"font-semibold",3,"ngClass"],["name","brand_name","id","brand_name","formControlName","brand_name","type","text",1,"input",3,"ngClass"],[1,"invalid-alert"],[4,"ngIf"],[1,"font-semibold"],["for","added_medicine",1,"font-semibold",3,"ngClass"],["name","added_medicine","id","added_medicine","formControlName","added_medicine","type","text",1,"input",3,"ngClass"],[3,"value"],["for","purpose_other",1,"font-semibold",3,"ngClass"],["name","purpose_other","id","purpose_other","formControlName","purpose_other","type","text",1,"input",3,"ngClass"],["id","show_errors",1,"relative","mx-10","col-span-8","bg-red-200","rounded","border","border-red-300","text-red-900","text-sm","mb-5"],[1,"block","p-3","pl-10"],[1,"list-disc"],[4,"ngFor","ngForOf"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5," Prescribe medicine "),t.qZA()(),t.TgZ(6,"div",5)(7,"form",6)(8,"div",7),t.YNc(9,Bt,4,0,"div",8),t.YNc(10,Xt,5,7,"div",9),t.YNc(11,te,4,1,"div",9),t.YNc(12,ie,5,7,"div",10),t.TgZ(13,"div",11)(14,"label",12),t._uU(15,"Dosage Qty."),t.qZA(),t._UZ(16,"input",13),t.YNc(17,se,2,1,"div",14),t.qZA(),t.TgZ(18,"div",11)(19,"label",15),t._uU(20,"Dosage unit"),t.qZA(),t.TgZ(21,"select",16),t.YNc(22,le,2,2,"option",17),t.qZA(),t.YNc(23,re,2,1,"div",14),t.qZA(),t.TgZ(24,"div",11)(25,"label",18),t._uU(26,"Dosage regimen"),t.qZA(),t.TgZ(27,"select",19),t.YNc(28,_e,2,2,"option",17),t.qZA(),t.YNc(29,ce,2,1,"div",14),t.qZA(),t.TgZ(30,"div",11)(31,"label",20),t._uU(32,"Medicine Route"),t.qZA(),t.TgZ(33,"select",21),t.YNc(34,pe,2,2,"option",17),t.qZA(),t.YNc(35,ge,2,1,"div",14),t.qZA(),t.TgZ(36,"div",11)(37,"label",22),t._uU(38,"Duration"),t.qZA(),t._UZ(39,"input",23),t.YNc(40,he,2,1,"div",14),t.qZA(),t.TgZ(41,"div",11)(42,"label",24),t._uU(43,"Duration frequency"),t.qZA(),t.TgZ(44,"select",25),t.YNc(45,fe,2,2,"option",17),t.qZA(),t.YNc(46,be,2,1,"div",14),t.qZA(),t.TgZ(47,"div",11)(48,"label",26),t._uU(49,"Quantity"),t.qZA(),t._UZ(50,"input",27),t.YNc(51,ye,2,1,"div",14),t.qZA(),t.TgZ(52,"div",11)(53,"label",28),t._uU(54,"Preparation"),t.qZA(),t.TgZ(55,"select",29),t.YNc(56,Ze,2,2,"option",17),t.qZA(),t.YNc(57,we,2,1,"div",14),t.qZA(),t.TgZ(58,"div",30)(59,"label",31),t._uU(60,"Medicine purpose"),t.qZA(),t.TgZ(61,"select",32),t.NdJ("change",function(){return i.checkPurpose()}),t.YNc(62,Te,2,2,"option",17),t.qZA(),t.YNc(63,Ae,2,1,"div",14),t.qZA(),t.YNc(64,Je,5,7,"div",33),t.TgZ(65,"div",30)(66,"label",34),t._uU(67,"Remarks"),t.qZA(),t._UZ(68,"input",35),t.qZA()(),t.YNc(69,Ne,5,3,"div",36),t.qZA()(),t.TgZ(70,"div",37)(71,"button",38),t.NdJ("click",function(){return i.closeModal()}),t._uU(72,"Close"),t.qZA(),t.TgZ(73,"button",39),t.NdJ("click",function(){return i.onSubmit()}),t._UZ(74,"fa-icon",40),t._uU(75),t.qZA()()()()(),t._UZ(76,"div",41)),2&o&&(t.xp6(7),t.Q6J("formGroup",i.prescriptionForm),t.xp6(2),t.Q6J("ngIf",i.selected_drug.new_drug),t.xp6(1),t.Q6J("ngIf",i.selected_drug.new_drug),t.xp6(1),t.Q6J("ngIf",!i.add_drug&&!i.f.added_medicine.value),t.xp6(1),t.Q6J("ngIf",i.f.added_medicine.value),t.xp6(2),t.Q6J("ngClass",t.VKq(47,h,i.is_saving&&i.f.dosage_quantity.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(49,f,i.is_saving&&i.f.dosage_quantity.errors)),t.xp6(1),t.Q6J("ngIf",i.is_saving&&i.f.dosage_quantity.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(51,h,i.is_saving&&i.f.dosage_uom.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(53,f,i.is_saving&&i.f.dosage_uom.errors)),t.xp6(1),t.Q6J("ngForOf",i.drug_uom),t.xp6(1),t.Q6J("ngIf",i.is_saving&&i.f.dosage_uom.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(55,h,i.is_saving&&i.f.dose_regimen.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(57,f,i.is_saving&&i.f.dose_regimen.errors)),t.xp6(1),t.Q6J("ngForOf",i.drug_regimen),t.xp6(1),t.Q6J("ngIf",i.is_saving&&i.f.dose_regimen.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(59,h,i.is_saving&&i.f.medicine_route_code.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(61,f,i.is_saving&&i.f.medicine_route_code.errors)),t.xp6(1),t.Q6J("ngForOf",i.drug_route),t.xp6(1),t.Q6J("ngIf",i.is_saving&&i.f.medicine_route_code.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(63,h,i.is_saving&&i.f.duration.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(65,f,i.is_saving&&i.f.duration_intake.errors)),t.xp6(1),t.Q6J("ngIf",i.is_saving&&i.f.duration_intake.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(67,h,i.is_saving&&i.f.duration_frequency.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(69,f,i.is_saving&&i.f.duration_frequency.errors)),t.xp6(1),t.Q6J("ngForOf",i.drug_frequency),t.xp6(1),t.Q6J("ngIf",i.is_saving&&i.f.duration_frequency.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(71,h,i.is_saving&&i.f.quantity.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(73,f,i.is_saving&&i.f.quantity.errors)),t.xp6(1),t.Q6J("ngIf",i.is_saving&&i.f.quantity.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(75,h,i.is_saving&&i.f.quantity_preparation.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(77,f,i.is_saving&&i.f.quantity_preparation.errors)),t.xp6(1),t.Q6J("ngForOf",i.drug_preparation),t.xp6(1),t.Q6J("ngIf",i.is_saving&&i.f.quantity_preparation.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(79,h,i.is_saving&&i.f.medicine_purpose.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(81,f,i.is_saving&&i.f.medicine_purpose.errors)),t.xp6(1),t.Q6J("ngForOf",i.drug_purpose),t.xp6(1),t.Q6J("ngIf",i.is_saving&&i.f.medicine_purpose.errors),t.xp6(1),t.Q6J("ngIf","99"===i.prescriptionForm.value.medicine_purpose),t.xp6(2),t.Q6J("ngClass",t.VKq(83,h,i.is_saving&&i.f.remarks.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(85,f,i.is_saving&&i.f.remarks.errors)),t.xp6(1),t.Q6J("ngIf",i.submit_errors),t.xp6(2),t.Q6J("disabled",i.is_loading),t.xp6(2),t.Q6J("disabled",i.is_loading||i.prescriptionForm.invalid),t.xp6(1),t.Q6J("icon",i.is_loading?i.faCircleNotch:i.faSave)("spin",i.is_loading),t.xp6(1),t.hij(" ",i.is_loading?"Saving":"Save"," "))},dependencies:[d.mk,d.sg,d.O5,g.BN,a._Y,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.sg,a.u,d.Nd]}),s})();function Qe(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleModal())}),t._UZ(1,"fa-icon",20),t._uU(2," epress "),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faReceipt)}}function Fe(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.navigateTo("dispensing"))}),t._UZ(1,"fa-icon",20),t._uU(2," dispensing "),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faPrescriptionBottleMedical)}}function De(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleList())}),t._UZ(1,"fa-icon",20),t._uU(2," add drugs "),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faAdd)}}function Oe(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr",29)(1,"td",30),t._uU(2),t._UZ(3,"br")(4,"br"),t.qZA(),t.TgZ(5,"td",31),t._uU(6),t._UZ(7,"br")(8,"br"),t._uU(9),t.qZA(),t.TgZ(10,"td",31),t._uU(11),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"td",31),t._uU(14),t.qZA(),t.TgZ(15,"td",31),t._uU(16),t.qZA(),t.TgZ(17,"td",32)(18,"button",33),t.NdJ("click",function(){const l=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.openAddForm(l))}),t._UZ(19,"fa-icon",34),t.qZA(),t.TgZ(20,"button",35),t.NdJ("click",function(){const l=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.toggleModal("delete-item",l))}),t._UZ(21,"fa-icon",36),t.qZA()()()}if(2&n){const e=s.$implicit,o=t.oxw(2);t.xp6(2),t.AsE(" ",e.konsulta_medicine?e.konsulta_medicine.desc:e.added_medicine," ",e.medicine?e.medicine.gen_name:""," "),t.xp6(4),t.xDo(" ",e.dosage_quantity," ",e.unit_of_measurement.desc," ",e.regimen.desc," ",e.duration_intake," ",e.frequency.desc," "),t.xp6(3),t.hij(" Remarks: ",e.remarks," "),t.xp6(2),t.hij(" ",t.Dn7(12,13,e.prescription_date,"MM/dd/yyyy","Asia/Manila")," "),t.xp6(3),t.hij(" ",e.quantity," "),t.xp6(2),t.hij(" ",e.preparation.desc," "),t.xp6(3),t.Q6J("icon",o.faEdit),t.xp6(2),t.Q6J("icon",o.faTrashCan)}}function Ye(n,s){if(1&n&&(t.TgZ(0,"table",23)(1,"thead")(2,"tr",24)(3,"th",25),t._uU(4,"Medicine"),t.qZA(),t.TgZ(5,"th",25),t._uU(6,"Intake"),t.qZA(),t.TgZ(7,"th",26),t._uU(8,"Prescription Date"),t.qZA(),t.TgZ(9,"th",26),t._uU(10,"Quantity"),t.qZA(),t.TgZ(11,"th",26),t._uU(12,"Unit of Measurement"),t.qZA(),t.TgZ(13,"th",27),t._uU(14,"Action"),t.qZA()()(),t.TgZ(15,"tbody"),t.YNc(16,Oe,22,17,"tr",28),t.qZA()()),2&n){const e=t.oxw();t.xp6(16),t.Q6J("ngForOf",e.prescriptions)("ngForTrackBy",e.identify)}}function Ee(n,s){if(1&n&&t._UZ(0,"fa-icon",44),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSpinner)}}function Se(n,s){if(1&n&&t._UZ(0,"fa-icon",45),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSave)}}function Pe(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",41),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onSubmit())}),t.YNc(1,Ee,1,1,"fa-icon",42),t.YNc(2,Se,1,1,"fa-icon",43),t._uU(3),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("ngIf",e.is_saving),t.xp6(1),t.Q6J("ngIf",!e.is_saving),t.xp6(1),t.hij(" ",e.is_saving?"Saving":"Save"," ")}}function He(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",37)(2,"textarea",38),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.consult_notes.plan=i)}),t.qZA()(),t.TgZ(3,"div",39),t.YNc(4,Pe,4,4,"button",40),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("disabled",e.consult_done||!e.allowed_to_edit)("ngModel",e.consult_notes.plan),t.xp6(2),t.Q6J("ngIf",!e.consult_done&&e.allowed_to_edit)}}function je(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-drug-list",46),t.NdJ("openAddForm",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.openAddForm(i))})("toggleList",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleList())}),t.qZA()}}function Ke(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-drug-form",47),t.NdJ("toggleForm",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleForm())}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("selected_drug",e.selected_drug)("consult_details",e.consult_details)("drug_uom",e.drug_uom)("drug_regimen",e.drug_regimen)("drug_purpose",e.drug_purpose)("drug_frequency",e.drug_frequency)("drug_preparation",e.drug_preparation)("drug_route",e.drug_route)}}function Le(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-epres",48),t.NdJ("toggleModal",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleModal())}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("prescriptions",e.prescriptions)("consult_details",e.consult_details)}}function Ge(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-delete-item",49),t.NdJ("toggleModal",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.toggleModal(i))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("delete_id",e.delete_id)("delete_desc",e.delete_desc)("url",e.url)}}const K=function(n){return{"rounded-b":n}};let Re=(()=>{var n;class s{navigateTo(o){this.router.navigate(["/patient/"+o,{id:this.consult_details.patient.id,consult_id:this.consult_details.id}])}openDeleteForm(o){this.selected_drug=o,this.toggleDeleteForm()}onSubmit(){this.is_saving=!0,this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,plan:this.consult_notes.plan}).subscribe({next:i=>{this.is_saving=!1,this.showToastr()},error:i=>console.log(i)})}showToastr(){this.toastr.success("Successfully recorded!","Treatment plan")}openEditForm(o){this.selected_drug=o}openAddForm(o){this.selected_drug=o,this.toggleForm()}openDeleteModal(o){this.delete_id=o.id,this.modal["delete-item"]=!this.modal["delete-item"]}toggleDeleteForm(){this.show_delete_form=!this.show_delete_form,!1===this.show_delete_form&&this.loadPrescriptions()}toggleForm(){this.drug_uom&&this.drug_uom&&this.drug_purpose&&this.drug_frequency&&this.drug_preparation?this.show_form=!this.show_form:this.loadLibraries(),!1===this.show_form&&this.loadPrescriptions()}ngOnChanges(o){this.show_content=this.toggle_content,this.show_content_tx=this.toggle_content,!1===this.consult_details.consult_done&&(this.show_actions=!0),this.consult_details&&(this.consult_notes=this.consult_details.consult_notes,this.consult_done=this.consult_details.consult_done)}loadLibraries(){this.libraries.forEach((o,i)=>{this.http.get("libraries/"+o.location).subscribe({next:l=>{this[o.var_name]=l.data,this.libraries.length-1===i&&(this.show_form=!0)},error:l=>console.log(l)})})}toggleModal(o,i){o?(i&&(this.delete_id=i.id),this.modal[o]=!this.modal[o],this.loadPrescriptions()):this.show_epress=!this.show_epress}toggleList(){this.show_list=!this.show_list}identify(o,i){return i.id}loadPrescriptions(){this.http.get("medicine/prescriptions",{params:{sort:"-prescription_date",consult_id:this.consult_details.id}}).subscribe({next:i=>{console.log(i.data),i.data.length>0&&(this.prescriptions=i.data)},error:i=>console.log(i)})}constructor(o,i,l){this.http=o,this.toastr=i,this.router=l,this.show_content=!0,this.show_list=!1,this.show_form=!1,this.show_delete_form=!1,this.show_actions=!1,this.show_content_tx=!1,this.is_saving=!1,this.consult_done=!1,this.faChevronCircleUp=_._qI,this.faChevronCircleDown=_.yh$,this.faAdd=_.XSk,this.faSave=_.r6l,this.faSpinner=_.LM3,this.faEdit=_.Xcf,this.faTrash=_.$aW,this.faPrescriptionBottleMedical=_.v0s,this.faReceipt=_.dLy,this.faTrashCan=_.Vui,this.consult_notes={plan:null},this.modal=[],this.delete_desc="Prescription",this.url="medicine/prescriptions/",this.libraries=[{var_name:"drug_uom",location:"unit-of-measurements"},{var_name:"drug_regimen",location:"dose-regimens"},{var_name:"drug_purpose",location:"purposes"},{var_name:"drug_frequency",location:"duration-frequencies"},{var_name:"drug_preparation",location:"preparations"},{var_name:"drug_route",location:"medicine-route"}],this.show_epress=!1}ngOnInit(){this.loadPrescriptions()}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(u.O),t.Y36(x._W),t.Y36(b.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-prescription"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",with_credentials:"with_credentials",allowed_to_edit:"allowed_to_edit"},features:[t.TTD],decls:23,vars:16,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","flex","justify-between"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-amber-500","flex","justify-between",3,"ngClass"],["type","button","class","ml-3 text-sm bg-white text-green-500 px-3 rounded-full",3,"click",4,"ngIf"],["type","button","class","text-sm bg-white text-amber-500 px-3 rounded-full",3,"click",4,"ngIf"],["type","button","class","ml-3 text-sm bg-white text-blue-500 px-3 rounded-full",3,"click",4,"ngIf"],["class","w-full table-auto p-5",4,"ngIf"],[1,"rounded-md","border","border-solid","border-gray-300","mt-5"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[3,"openAddForm","toggleList",4,"ngIf"],[3,"selected_drug","consult_details","drug_uom","drug_regimen","drug_purpose","drug_frequency","drug_preparation","drug_route","toggleForm",4,"ngIf"],[3,"prescriptions","consult_details","toggleModal",4,"ngIf"],[3,"delete_id","delete_desc","url","toggleModal",4,"ngIf"],["type","button",1,"ml-3","text-sm","bg-white","text-green-500","px-3","rounded-full",3,"click"],[1,"pr-1",3,"icon"],["type","button",1,"text-sm","bg-white","text-amber-500","px-3","rounded-full",3,"click"],["type","button",1,"ml-3","text-sm","bg-white","text-blue-500","px-3","rounded-full",3,"click"],[1,"w-full","table-auto","p-5"],[1,"align-top"],["scope","col",1,"text-center","py-3","px-3","w-3/12"],["scope","col",1,"text-center","py-3","px-3","w-1/12"],["scope","col",1,"text-center","py-3","px-3","w-2/12"],["class","bg-white border-b last:border-0 text-sm align-top",4,"ngFor","ngForOf","ngForTrackBy"],[1,"bg-white","border-b","last:border-0","text-sm","align-top"],[1,"py-4","px-3"],["scope","row",1,"py-4","px-3","font-medium","text-gray-900"],[1,"text-sm","text-center","mb-5","align-middle"],[1,"mr-3",3,"click"],[1,"text-amber-500",3,"icon"],[3,"click"],[1,"text-rose-500",3,"icon"],[1,"grid","grid-cols-1","px-4","pb-4","mt-4"],["rows","3","id","plan","placeholder","Treatment plan",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"disabled","ngModel","ngModelChange"],[1,"flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"],[3,"openAddForm","toggleList"],[3,"selected_drug","consult_details","drug_uom","drug_regimen","drug_purpose","drug_frequency","drug_preparation","drug_route","toggleForm"],[3,"prescriptions","consult_details","toggleModal"],[3,"delete_id","delete_desc","url","toggleModal"]],template:function(o,i){1&o&&(t._UZ(0,"hr",0),t.TgZ(1,"div",1)(2,"div",2),t._uU(3," Prescription "),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"span",5),t._uU(7," Prescriptions "),t.TgZ(8,"div"),t.YNc(9,Qe,3,1,"button",6),t.YNc(10,Fe,3,1,"button",7),t.YNc(11,De,3,1,"button",8),t.qZA()(),t.YNc(12,Ye,17,2,"table",9),t.qZA(),t.TgZ(13,"div",10)(14,"span",11),t._uU(15," Treatment Plan "),t.TgZ(16,"button",12),t.NdJ("click",function(){return i.show_content_tx=!i.show_content_tx}),t._UZ(17,"fa-icon",13),t.qZA()(),t.YNc(18,He,5,3,"div",14),t.qZA()()(),t.YNc(19,je,1,0,"app-drug-list",15),t.YNc(20,Ke,1,8,"app-drug-form",16),t.YNc(21,Le,1,2,"app-epres",17),t.YNc(22,Ge,1,3,"app-delete-item",18)),2&o&&(t.xp6(6),t.Q6J("ngClass",t.VKq(12,K,!i.show_content)),t.xp6(3),t.Q6J("ngIf",(null==i.consult_details?null:i.consult_details.is_konsulta)&&i.with_credentials&&i.prescriptions),t.xp6(1),t.Q6J("ngIf",i.prescriptions),t.xp6(1),t.Q6J("ngIf",i.show_actions),t.xp6(1),t.Q6J("ngIf",i.show_content),t.xp6(2),t.Q6J("ngClass",t.VKq(14,K,!i.show_content_tx)),t.xp6(3),t.Q6J("icon",i.show_content_tx?i.faChevronCircleUp:i.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",i.show_content_tx),t.xp6(1),t.Q6J("ngIf",i.show_list),t.xp6(1),t.Q6J("ngIf",i.show_form),t.xp6(1),t.Q6J("ngIf",i.show_epress),t.xp6(1),t.Q6J("ngIf",i.modal["delete-item"]))},dependencies:[d.mk,d.sg,d.O5,M,g.BN,a.Fj,a.JJ,a.On,j.N,Vt,Ie,d.uU]}),s})();var $e=p(9315);function Ve(n,s){if(1&n&&(t.TgZ(0,"option",28),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.facility.code),t.xp6(1),t.AsE("",e.last_name,", ",e.first_name,"")}}function Be(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"input",29),t.NdJ("ngModelChange",function(i){const r=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.patient_complaints[r.complaint_id]=i)}),t.qZA(),t.TgZ(2,"label",30),t._uU(3),t.qZA()()}if(2&n){const e=s.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngModel",o.patient_complaints[e.complaint_id]),t.xp6(2),t.Oqu(e.complaint_desc)}}function ze(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"input",29),t.NdJ("ngModelChange",function(i){const r=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.patient_behavior[r.id]=i)}),t.qZA(),t.TgZ(2,"label",30),t._uU(3),t.qZA()()}if(2&n){const e=s.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngModel",o.patient_behavior[e.id]),t.xp6(2),t.Oqu(e.desc)}}function We(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"input",29),t.NdJ("ngModelChange",function(i){const r=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.patient_neglect[r.id]=i)}),t.qZA(),t.TgZ(2,"label",30),t._uU(3),t.qZA()()}if(2&n){const e=s.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngModel",o.patient_neglect[e.id]),t.xp6(2),t.Oqu(e.desc)}}function Xe(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"label",15),t._uU(4,"Date"),t.qZA(),t.TgZ(5,"input",16),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.patient_gbv.gbv_date=i)}),t.qZA()(),t.TgZ(6,"div",14)(7,"label",17),t._uU(8,"Refer to"),t.qZA(),t.TgZ(9,"select",18),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.patient_gbv.referral_facility_code=i)}),t.YNc(10,Ve,2,3,"option",19),t.qZA()(),t.TgZ(11,"div",20),t._uU(12," Complaints "),t.qZA(),t.TgZ(13,"div",21),t.YNc(14,Be,4,2,"div",22),t.qZA(),t.TgZ(15,"div",23)(16,"label",24),t._uU(17,"Remarks"),t.qZA(),t.TgZ(18,"input",25),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.patient_gbv.gbv_complaint_remarks=i)}),t.qZA()(),t.TgZ(19,"div",20),t._uU(20," Behavioral Changes "),t.qZA(),t.TgZ(21,"div",21),t.YNc(22,ze,4,2,"div",22),t.qZA(),t.TgZ(23,"div",23)(24,"label",24),t._uU(25,"Remarks"),t.qZA(),t.TgZ(26,"input",26),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.patient_gbv.gbv_behavioral_remarks=i)}),t.qZA()(),t.TgZ(27,"div",20),t._uU(28," Neglects "),t.qZA(),t.TgZ(29,"div",21),t.YNc(30,We,4,2,"div",22),t.qZA(),t.TgZ(31,"div",23)(32,"label",24),t._uU(33,"Remarks"),t.qZA(),t.TgZ(34,"input",27),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.patient_gbv.gbv_neglect_remarks=i)}),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(5),t.Q6J("ngModel",e.patient_gbv.gbv_date),t.xp6(4),t.Q6J("ngModel",e.patient_gbv.referral_facility_code),t.xp6(1),t.Q6J("ngForOf",e.gbv_mdts),t.xp6(4),t.Q6J("ngForOf",e.complaints),t.xp6(4),t.Q6J("ngModel",e.patient_gbv.gbv_complaint_remarks),t.xp6(4),t.Q6J("ngForOf",e.behavioral_changes),t.xp6(4),t.Q6J("ngModel",e.patient_gbv.gbv_behavioral_remarks),t.xp6(4),t.Q6J("ngForOf",e.neglects),t.xp6(4),t.Q6J("ngModel",e.patient_gbv.gbv_neglect_remarks)}}function tn(n,s){if(1&n&&(t.TgZ(0,"div",31)(1,"div",32),t._UZ(2,"fa-icon",33),t.qZA(),t.TgZ(3,"div",34),t._uU(4," Loading... "),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("icon",e.faCircleNotch)}}let en=(()=>{var n;class s{onSubmit(){let o=[],i=[],l=[];this.patient_gbv.patient_id=this.patient_id,this.patient_gbv.referral_date=this.patient_gbv.gbv_date,Object.entries(this.patient_complaints).forEach(([r,c],m)=>{!0===c&&o.push({complaint_id:r})}),Object.entries(this.patient_behavior).forEach(([r,c],m)=>{!0===c&&i.push({behavioral_id:r})}),Object.entries(this.patient_neglect).forEach(([r,c],m)=>{!0===c&&l.push({neglect_id:r})}),this.patient_gbv.complaint=o,this.patient_gbv.behavior=i,this.patient_gbv.neglect=l,console.log(this.patient_gbv),this.http.post("gender-based-violence/patient-gbv",this.patient_gbv).subscribe({next:r=>{console.log(r),this.toastr.success("Successfully recorded!","GBV Referral"),this.closeModal()},error:r=>console.log(r)})}loadLibraries(){const o=this.http.get("libraries/gbv-neglect"),i=this.http.get("libraries/gbv-behavioral"),l=this.http.get("libraries/complaint",{params:{query_type:"gbv_complaints"}}),r=this.http.get("gender-based-violence/patient-gbv-user",{params:{per_page:"all"}});(0,$e.D)([o,i,l,r]).subscribe({next:([c,m,T,yi])=>{this.neglects=c.data,this.behavioral_changes=m.data,this.complaints=T.data,this.gbv_mdts=yi.data,this.loadDefaultComplaint(),this.show_form=!0},error:c=>console.log(c)})}loadDefaultComplaint(){this.gbv_complaints&&Object.entries(this.gbv_complaints).forEach(([o,i],l)=>{this.patient_complaints[i]=!0})}closeModal(){this.toggleModal.emit("gbv_referral")}constructor(o,i){this.http=o,this.toastr=i,this.getPatientTbHistory=new t.vpe,this.toggleModal=new t.vpe,this.switchPage=new t.vpe,this.faSave=v.r6l,this.faCircleNotch=_.IJ7,this.is_saving=!1,this.show_form=!1,this.gbv_mdts=[],this.patient_complaints=[],this.patient_behavior=[],this.patient_neglect=[],this.patient_gbv={patient_id:"",gbv_date:"",gbv_complaint_remarks:"",gbv_behavioral_remarks:"",gbv_neglect_remarks:"",referral_facility_code:"",referral_reason:"For GBV Assessment",service_remarks:"",referral_remarks:"",referral_date:"",complaint:[],behavior:[],neglect:[]}}ngOnInit(){this.loadLibraries()}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(u.O),t.Y36(x._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-gbv-referral"]],inputs:{patient_id:"patient_id",max_date:"max_date",gbv_complaints:"gbv_complaints"},outputs:{getPatientTbHistory:"getPatientTbHistory",toggleModal:"toggleModal",switchPage:"switchPage"},decls:15,vars:3,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-sky-500"],[1,"text-sm","font-bold","text-white"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],["class","text-left text-gray-500 m-5",4,"ngIf"],["class","grid grid-cols-1 mt-20",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-gray-400",3,"click"],["type","submit",1,"btn-save","px-10","disabled:bg-gray-300",3,"disabled","click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"text-left","text-gray-500","m-5"],[1,"grid","grid-cols-4","gap-4"],[1,"col-span-2"],["for","gbv_date"],["type","date","name","gbv_date","id","gbv_date",1,"input",3,"ngModel","ngModelChange"],["for","case_number"],[1,"input",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-span-4"],[1,"col-span-4","grid","grid-cols-2","gap-4"],[4,"ngFor","ngForOf"],[1,"col-span-4","flex"],[1,"mt-2","pr-3"],["type","text","name","gbv_complaint_remarks","id","gbv_complaint_remarks",1,"input",3,"ngModel","ngModelChange"],["type","text","name","gbv_behavioral_remarks","id","gbv_behavioral_remarks",1,"input",3,"ngModel","ngModelChange"],["type","text","name","gbv_neglect_remarks","id","gbv_neglect_remarks",1,"input",3,"ngModel","ngModelChange"],[3,"value"],["type","checkbox",1,"input-checkbox",3,"ngModel","ngModelChange"],[1,"pl-3","py-0.5"],[1,"grid","grid-cols-1","mt-20"],[1,"flex","justify-center","text-blue-500"],["spin","true",3,"icon"],[1,"flex","justify-center"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5," Referral "),t.qZA()(),t.TgZ(6,"div",5),t.YNc(7,Xe,35,9,"div",6),t.YNc(8,tn,5,1,"div",7),t.qZA(),t.TgZ(9,"div",8)(10,"button",9),t.NdJ("click",function(){return i.closeModal()}),t._uU(11,"Close"),t.qZA(),t.TgZ(12,"button",10),t.NdJ("click",function(){return i.onSubmit()}),t._uU(13," Refer "),t.qZA()()()()(),t._UZ(14,"div",11)),2&o&&(t.xp6(7),t.Q6J("ngIf",i.show_form),t.xp6(1),t.Q6J("ngIf",!i.show_form),t.xp6(4),t.Q6J("disabled",i.is_saving||!i.patient_gbv.gbv_date||!i.patient_gbv.referral_facility_code))},dependencies:[d.sg,d.O5,g.BN,a.YN,a.Kr,a.Fj,a.Wl,a.EJ,a.JJ,a.On]}),s})();function nn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"span",22)(1,"span")(2,"fa-icon",23),t.NdJ("click",function(){const i=t.CHM(e);return t.KtG((0,i.clear)(i.item))}),t.qZA()(),t.TgZ(3,"span"),t._uU(4),t.qZA()()}if(2&n){const e=s.item,o=t.oxw(2);t.xp6(2),t.Q6J("icon",o.faXmark),t.xp6(2),t.Oqu(e.complaint_desc)}}function on(n,s){if(1&n&&(t.TgZ(0,"div",24)(1,"div")(2,"h5",25),t._uU(3),t.qZA()()()),2&n){const e=s.item,o=s.searchTerm;t.xp6(2),t.Q6J("ngOptionHighlight",o),t.xp6(1),t.Oqu(e.complaint_desc)}}function sn(n,s){if(1&n&&t._UZ(0,"fa-icon",29),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSpinner)}}function ln(n,s){if(1&n&&t._UZ(0,"fa-icon",30),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSave)}}function an(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onSubmit())}),t.YNc(1,sn,1,1,"fa-icon",27),t.YNc(2,ln,1,1,"fa-icon",28),t._uU(3),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("ngIf",e.is_saving),t.xp6(1),t.Q6J("ngIf",!e.is_saving),t.xp6(1),t.hij(" ",e.is_saving?"Saving":"Save"," ")}}function rn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",9)(2,"button",10),t._UZ(3,"fa-icon",11),t.qZA(),t.TgZ(4,"div",12)(5,"ng-select",13),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.selectedComplaint=i)}),t.YNc(6,nn,5,2,"ng-template",14),t.YNc(7,on,4,2,"ng-template",15),t.qZA()()(),t.TgZ(8,"div",16)(9,"label",17),t._uU(10,"Complaint notes"),t.qZA(),t.TgZ(11,"textarea",18),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.consult_notes.complaint=i)}),t.qZA()(),t.TgZ(12,"div",16)(13,"label",17),t._uU(14,"History notes"),t.qZA(),t.TgZ(15,"textarea",19),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.consult_notes.history=i)}),t.qZA()(),t.TgZ(16,"div",20),t.YNc(17,an,4,4,"button",21),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("icon",e.faPlusSquare),t.xp6(2),t.Q6J("disabled",e.consult_done||!e.allowed_to_edit)("items",e.complaints)("multiple",!0)("closeOnSelect",!1)("hideSelected",!0)("clearable",!1)("ngModel",e.selectedComplaint),t.xp6(6),t.Q6J("disabled",e.consult_done||!e.allowed_to_edit)("ngModel",e.consult_notes.complaint),t.xp6(4),t.Q6J("disabled",e.consult_done||!e.allowed_to_edit)("ngModel",e.consult_notes.history),t.xp6(2),t.Q6J("ngIf",!e.consult_done&&e.allowed_to_edit)}}function _n(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-gbv-referral",31),t.NdJ("toggleModal",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.toggleModal(i))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("gbv_complaints",e.gbv_complaints)("patient_id",e.consult_details.patient.id)}}const dn=function(n){return{"rounded-b":n}};let cn=(()=>{var n;class s{onSubmit(){this.is_saving=!0,this.selectedComplaint&&Object.keys(this.selectedComplaint).length>0?this.http.post("consultation/complaint",{notes_id:this.consult_details.consult_notes.id,consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,complaints:this.selectedComplaint}).subscribe({next:i=>{this.saveNotes()},error:i=>console.log(i)}):this.saveNotes()}saveNotes(){this.consult_notes.complaint||this.consult_notes.history?this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,complaint:this.consult_notes.complaint,history:this.consult_notes.history}).subscribe({next:i=>{this.is_saving=!1,this.showToastr(),this.loadConsult.emit()},error:i=>console.log(i)}):(this.is_saving=!1,this.showToastr(),this.loadConsult.emit())}checkGbvCoplaint(){}showToastr(){this.toastr.success("Successfully updated!","Complaint")}loadLib(){this.http.get("libraries/complaint").subscribe(o=>{this.complaints=o.data,this.loadSelected(),this.show_form=!0})}loadSelected(){this.gbv_complaints=[],this.show_gbv_form=!1,this.possible_gbv_case=!1,this.have_open_gbv=!1;let o=[];this.consult_details.consult_notes&&this.consult_details.consult_notes.complaints&&Object.entries(this.consult_details.consult_notes.complaints).forEach(([i,l],r)=>{let c=l;o.push(c.complaint_id),1===c.lib_complaints.gbv_library_status&&(this.possible_gbv_case=!0,this.gbv_complaints.push(c.complaint_id)),Object.keys(this.consult_details.consult_notes.complaints).length-1===r&&this.possible_gbv_case&&this.getPatientGbv()}),this.selectedComplaint=o}getPatientGbv(){this.http.get("gender-based-violence/patient-gbv",{params:{patient_id:this.consult_details.patient.id}}).subscribe({next:i=>{i.data.length>0&&!i.data[0].outcome_date&&(this.have_open_gbv=!0),this.show_gbv_form=!0},error:i=>console.log(i)})}ngOnChanges(o){this.show_content=this.toggle_content,this.consult_details&&(this.complaints&&this.loadSelected(),this.consult_notes=this.consult_details.consult_notes,this.consult_done=this.consult_details.consult_done)}toggleModal(o){this.modals[o]=!this.modals[o],"gbv_referral"===o&&this.getPatientGbv()}constructor(o,i){this.http=o,this.toastr=i,this.loadConsult=new t.vpe,this.faPlusSquare=_.CPW,this.faSave=_.r6l,this.faChevronCircleUp=_._qI,this.faChevronCircleDown=_.yh$,this.faSpinner=_.LM3,this.faXmark=_.g82,this.selectedComplaint=[],this.consult_notes={complaint:null,history:null},this.modals=[],this.show_content=!0,this.is_saving=!1,this.consult_done=!1,this.show_form=!1,this.possible_gbv_case=!1,this.enable_edit=!1,this.show_gbv_form=!1,this.have_open_gbv=!1}ngOnInit(){this.loadLib()}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(u.O),t.Y36(x._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-complaint-history"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",have_complaint:"have_complaint",allowed_to_edit:"allowed_to_edit"},outputs:{loadConsult:"loadConsult"},features:[t.TTD],decls:11,vars:6,consts:[[1,"grid","grid-cols-10","mb-5"],[1,"col-span-2","pt-2","pr-5","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[3,"gbv_complaints","patient_id","toggleModal",4,"ngIf"],[1,"flex","mb-2","p-4"],["type","submit",1,"inline-flex","p-1","items-center","text-gray-50","bg-sky-400","rounded-l-md","border","border-gray-300"],[1,"text-white","fa-xl",3,"icon"],[1,"chips-container"],["placeholder","search","bindLabel","complaint_desc","bindValue","complaint_id","placeholder","Select Complaint",1,"select-chips",3,"disabled","items","multiple","closeOnSelect","hideSelected","clearable","ngModel","ngModelChange"],["ng-label-tmp",""],["ng-option-tmp",""],[1,"grid","grid-cols-1","px-4","pb-4"],["for","complaint_notes",1,"font-semibold","pl-1"],["rows","3","id","complaint_notes","placeholder","Complaint Notes",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"disabled","ngModel","ngModelChange"],["rows","3","id","history_notes","placeholder","History of Current Illness",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"disabled","ngModel","ngModelChange"],[1,"flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[1,"px-2","py-1","rounded-md","text-sm"],[1,"text-xs","mr-1","hover:text-slate-100","hover:cursor-pointer",3,"icon","click"],[1,"grid","grid-flow-col","auto-cols-max"],[3,"ngOptionHighlight"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"],[3,"gbv_complaints","patient_id","toggleModal"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2," Chief Complaint and History of Current Illness "),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"span",4),t._uU(6," Complaints "),t.TgZ(7,"button",5),t.NdJ("click",function(){return i.show_content=!i.show_content}),t._UZ(8,"fa-icon",6),t.qZA()(),t.YNc(9,rn,18,13,"div",7),t.qZA()()(),t.YNc(10,_n,1,2,"app-gbv-referral",8)),2&o&&(t.xp6(5),t.Q6J("ngClass",t.VKq(4,dn,!i.show_content)),t.xp6(3),t.Q6J("icon",i.show_content?i.faChevronCircleUp:i.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",i.show_content&&i.show_form),t.xp6(1),t.Q6J("ngIf",i.modals.gbv_referral))},dependencies:[d.mk,d.O5,g.BN,Z.w9,Z.ir,Z.mR,a.Fj,a.JJ,a.On,en]}),s})();function pn(n,s){if(1&n&&(t.TgZ(0,"ul",28)(1,"li"),t._uU(2),t.qZA()()),2&n){const e=s.$implicit;t.xp6(2),t.Oqu(null==e.lib_complaints?null:e.lib_complaints.complaint_desc)}}function un(n,s){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.hij(" ",e.diagnosis.class_name," ")}}function gn(n,s){if(1&n&&(t.TgZ(0,"div",29)(1,"span",30),t._uU(2,"remarks:"),t.qZA(),t._uU(3),t.qZA()),2&n){const e=t.oxw().$implicit;let o;t.xp6(3),t.hij(" ",null!==(o=e.consult_notes.idx_remarks)&&void 0!==o?o:"-"," ")}}function mn(n,s){if(1&n&&(t.TgZ(0,"li")(1,"span",31),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&n){const e=s.$implicit;t.xp6(2),t.hij("",e.lib_icd10.icd10_code,":"),t.xp6(1),t.hij(" ",e.lib_icd10.icd10_desc," ")}}function hn(n,s){if(1&n&&(t.TgZ(0,"div",29)(1,"span",30),t._uU(2,"remarks:"),t.qZA(),t._uU(3),t.qZA()),2&n){const e=t.oxw().$implicit;let o;t.xp6(3),t.hij(" ",null!==(o=e.consult_notes.fdx_remarks)&&void 0!==o?o:"-"," ")}}function fn(n,s){if(1&n&&(t.TgZ(0,"li")(1,"span",31),t._uU(2),t._UZ(3,"br"),t._uU(4),t._UZ(5,"br"),t._uU(6),t._UZ(7,"br"),t._uU(8),t._UZ(9,"br"),t._uU(10),t.qZA()()),2&n){const e=s.$implicit;t.xp6(2),t.hij(" ",e.konsulta_medicine?e.konsulta_medicine.generic.desc:e.medicine?e.medicine.drug_name:e.added_medicine," "),t.xp6(2),t.lnq(" ",e.dosage_quantity," ",e.dosage_uom?e.dosage_uom.desc:""," (",e.dosage_uom?e.dosage_uom.code:"",") "),t.xp6(2),t.hij(" ",e.dose_regimen.desc," "),t.xp6(2),t.AsE(" ",e.duration_intake," ",e.duration_frequency.desc," "),t.xp6(2),t.lnq(" ",e.quantity," ",e.quantity_preparation.desc,"",e.quantity>1?"s":""," ")}}function xn(n,s){if(1&n&&(t.TgZ(0,"tr",13)(1,"td",14)(2,"div",15)(3,"span",16),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"span",17),t._uU(7),t.ALo(8,"date"),t.qZA()()(),t.TgZ(9,"td",18)(10,"div",15)(11,"span",19)(12,"span",20),t._uU(13,"Complaint notes:"),t.qZA(),t._uU(14),t.qZA(),t.YNc(15,pn,3,1,"ul",21),t.TgZ(16,"span",22)(17,"span",20),t._uU(18,"History notes:"),t.qZA(),t._uU(19),t.qZA()(),t.TgZ(20,"div",23)(21,"span",20),t._uU(22,"Initial Diagnosis:"),t.qZA(),t.TgZ(23,"ul",24),t.YNc(24,un,2,1,"li",25),t.qZA(),t.YNc(25,gn,4,1,"div",26),t.qZA(),t.TgZ(26,"div",27)(27,"span",20),t._uU(28,"Final Diagnosis:"),t.qZA(),t.TgZ(29,"ul",24),t.YNc(30,mn,4,2,"li",25),t.qZA(),t.YNc(31,hn,4,1,"div",26),t.qZA(),t.TgZ(32,"div",27)(33,"span",19)(34,"span",20),t._uU(35,"Prescription:"),t.qZA(),t.TgZ(36,"ul",24),t.YNc(37,fn,11,10,"li",25),t.qZA()()(),t.TgZ(38,"div",27)(39,"span",19)(40,"span",20),t._uU(41,"Treatment Plan:"),t.qZA(),t._uU(42),t.qZA()()()()),2&n){const e=s.$implicit;let o,i,l;t.xp6(4),t.Oqu(t.Dn7(5,11,e.consult_date,"MM/dd/yyyy","Asia/Manila")),t.xp6(3),t.Oqu(t.xi3(8,15,e.consult_date,"hh:mm:ss a")),t.xp6(7),t.hij(" ",null!==(o=e.consult_notes.complaint)&&void 0!==o?o:"-"," "),t.xp6(1),t.Q6J("ngForOf",e.consult_notes.complaints),t.xp6(4),t.hij(" ",null!==(i=e.consult_notes.history)&&void 0!==i?i:"-"," "),t.xp6(5),t.Q6J("ngForOf",e.consult_notes.initialdx),t.xp6(1),t.Q6J("ngIf",e.consult_notes.idx_remarks),t.xp6(5),t.Q6J("ngForOf",e.consult_notes.finaldx),t.xp6(1),t.Q6J("ngIf",e.consult_notes.fdx_remarks),t.xp6(6),t.Q6J("ngForOf",e.prescriptions),t.xp6(5),t.hij(" ",null!==(l=e.consult_notes.plan)&&void 0!==l?l:"-"," ")}}function bn(n,s){if(1&n&&(t.TgZ(0,"table",10)(1,"thead")(2,"tr",11)(3,"th"),t._uU(4,"Date"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Details"),t.qZA()()(),t.TgZ(7,"tbody"),t.YNc(8,xn,43,18,"tr",12),t.qZA()()),2&n){const e=t.oxw();t.xp6(8),t.Q6J("ngForOf",e.visit_list)}}function vn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"nav",36)(2,"button",37),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.loadPreviousVisit(1))}),t._UZ(3,"fa-icon",38),t.qZA(),t.TgZ(4,"button",39),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.loadPreviousVisit(i.current_page-1))}),t._UZ(5,"fa-icon",38),t._uU(6,"Previous "),t.qZA(),t.TgZ(7,"button",39),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.loadPreviousVisit(i.current_page+1))}),t._uU(8," Next"),t._UZ(9,"fa-icon",40),t.qZA(),t.TgZ(10,"button",41),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.loadPreviousVisit(i.last_page))}),t._UZ(11,"fa-icon",40),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("disabled",1===e.current_page),t.xp6(1),t.Q6J("icon",e.faAnglesLeft),t.xp6(1),t.Q6J("disabled",1===e.current_page),t.xp6(1),t.Q6J("icon",e.faChevronLeft),t.xp6(2),t.Q6J("disabled",e.current_page===e.last_page),t.xp6(2),t.Q6J("icon",e.faChevronRight),t.xp6(1),t.Q6J("disabled",e.current_page===e.last_page),t.xp6(1),t.Q6J("icon",e.faAnglesRight)}}function yn(n,s){if(1&n&&(t.TgZ(0,"div")(1,"div",32)(2,"div",33)(3,"div")(4,"p",34),t._uU(5," Showing "),t.TgZ(6,"span",35),t._uU(7),t.qZA(),t._uU(8," to "),t.TgZ(9,"span",35),t._uU(10),t.qZA(),t._uU(11," of "),t.TgZ(12,"span",35),t._uU(13),t.qZA(),t._uU(14," results "),t.qZA()(),t.YNc(15,vn,12,8,"div",9),t.qZA()()()),2&n){const e=t.oxw();t.xp6(7),t.Oqu(e.from),t.xp6(3),t.Oqu(e.to),t.xp6(3),t.Oqu(e.total),t.xp6(2),t.Q6J("ngIf",e.total>=6)}}const Zn=function(n){return{"rounded-b":n}};let Cn=(()=>{var n;class s{loadPreviousVisit(o){this.http.get("consultation/records",{params:{patient_id:this.patient_id,per_page:this.per_page,sort:"-consult_date",pt_group:"cn",page:o,not_consult_id:this.consult_id}}).subscribe({next:l=>{this.visit_list=l.data,this.current_page=l.meta.current_page,this.last_page=l.meta.last_page,this.from=l.meta.from,this.to=l.meta.to,this.total=l.meta.total},error:l=>console.log(l)})}ngOnChanges(o){this.show_content=this.toggle_content}constructor(o,i){this.route=o,this.http=i,this.show_content=!1,this.faChevronCircleUp=_._qI,this.faChevronCircleDown=_.yh$,this.faChevronLeft=_.A35,this.faChevronRight=_._tD,this.faAnglesLeft=_._Wx,this.faAnglesRight=_.ccb,this.per_page=5}ngOnInit(){this.patient_id=this.route.snapshot.paramMap.get("id"),this.consult_id=this.route.snapshot.paramMap.get("consult_id"),this.loadPreviousVisit(1)}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(b.gz),t.Y36(u.O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-consult-history"]],inputs:{toggle_content:"toggle_content",allowed_to_edit:"allowed_to_edit"},features:[t.TTD],decls:12,vars:6,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-green-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],["class","w-full table-auto",4,"ngIf"],[4,"ngIf"],[1,"w-full","table-auto"],[1,"border-b","border-solid","border-gray-200"],["class","text-left mt-3 align-top border-t border-slate-200 text-sm",4,"ngFor","ngForOf"],[1,"text-left","mt-3","align-top","border-t","border-slate-200","text-sm"],[1,"p-3","w-2/12"],[1,"grid","grid-cols-1"],[1,"font-semibold","w-full"],[1,"text-sm","w-full"],[1,"p-3","w-7/12"],[1,"w-full","mb-3"],[1,"font-semibold"],["class","list-disc last:mb-3 ml-10",4,"ngFor","ngForOf"],[1,"w-full","my-2","py-2"],[1,"grid","grid-cols-1","text-left"],[1,"list-disc","ml-10"],[4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],[1,"grid","grid-cols-1","text-left","mt-2","pt-2"],[1,"list-disc","last:mb-3","ml-10"],[1,"mt-2"],[1,"text-sm","italic"],[1,"font-semibold","text-sm"],[1,"bg-white","px-4","py-4","flex","items-center","justify-between","border-t","border-gray-200","sm:px-6"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"text-sm","text-gray-700"],[1,"font-medium"],["aria-label","Pagination",1,"relative","z-0","inline-flex","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"disabled","click"],[1,"block","h-15","w-15","text-gray-500","pr-1",3,"icon"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","bg-white","text-sm","font-medium","text-gray-700","hover:bg-gray-50",3,"disabled","click"],[1,"h-5","w-5","text-gray-500",3,"icon"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"disabled","click"]],template:function(o,i){1&o&&(t._UZ(0,"hr",0),t.TgZ(1,"div",1)(2,"div",2),t._uU(3," Diagnosis History "),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"span",5),t._uU(7," Previous History "),t.TgZ(8,"button",6),t.NdJ("click",function(){return i.show_content=!i.show_content}),t._UZ(9,"fa-icon",7),t.qZA()(),t.YNc(10,bn,9,1,"table",8),t.YNc(11,yn,16,4,"div",9),t.qZA()()()),2&o&&(t.xp6(6),t.Q6J("ngClass",t.VKq(4,Zn,!i.show_content)),t.xp6(3),t.Q6J("icon",i.show_content?i.faChevronCircleUp:i.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",i.show_content),t.xp6(1),t.Q6J("ngIf",i.total>=1))},dependencies:[d.mk,d.sg,d.O5,g.BN,d.uU]}),s})(),wn=(()=>{var n;class s{constructor(){}ngOnInit(){}}return(n=s).\u0275fac=function(o){return new(o||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-consult-summary"]],decls:34,vars:0,consts:[[1,"flex","justify-center"],[1,"w-4/6"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between"],[1,"grid","grid-cols-5","m-5"],[1,"col-span-1","font-semibold"],[1,"col-span-4","ml-5"],[1,"col-span-1","font-semibold","mt-5"],[1,"col-span-4","mt-5","ml-5"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),t._uU(4," Consultation Summary (Date here) "),t.qZA(),t.TgZ(5,"div",4)(6,"div",5),t._uU(7," Chief Complaint: "),t.qZA(),t.TgZ(8,"div",6),t._uU(9," test "),t.qZA(),t.TgZ(10,"div",7),t._uU(11," Complaint Notes: "),t.qZA(),t.TgZ(12,"div",8),t._uU(13," test "),t.qZA(),t.TgZ(14,"div",7),t._uU(15," History of Current Illness "),t.qZA(),t.TgZ(16,"div",8),t._uU(17," test "),t.qZA(),t.TgZ(18,"div",7),t._uU(19," Physical Exam "),t.qZA(),t.TgZ(20,"div",8),t._uU(21," test "),t.qZA(),t.TgZ(22,"div",7),t._uU(23," Initial Diagnosis "),t.qZA(),t.TgZ(24,"div",8),t._uU(25," test "),t.qZA(),t.TgZ(26,"div",7),t._uU(27," Final Diagnosis "),t.qZA(),t.TgZ(28,"div",8),t._uU(29," test "),t.qZA(),t.TgZ(30,"div",7),t._uU(31," Prescription "),t.qZA(),t.TgZ(32,"div",8),t._uU(33," test "),t.qZA()()()()())}}),s})();function Tn(n,s){if(1&n&&(t.TgZ(0,"option",17),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function qn(n,s){if(1&n&&t._UZ(0,"fa-icon",21),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSpinner)}}function An(n,s){if(1&n&&t._UZ(0,"fa-icon",22),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSave)}}function kn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onSubmit())}),t.YNc(1,qn,1,1,"fa-icon",19),t.YNc(2,An,1,1,"fa-icon",20),t._uU(3),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("ngIf",e.is_saving),t.xp6(1),t.Q6J("ngIf",!e.is_saving),t.xp6(1),t.hij(" ",e.is_saving?"Saving":"Save"," ")}}function Un(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"label",11),t._uU(4,"General Survey"),t.qZA(),t.TgZ(5,"select",12),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.general_survey_code=i)}),t.YNc(6,Tn,2,2,"option",13),t.qZA()(),t.TgZ(7,"div",10)(8,"label",11),t._uU(9,"Remarks"),t.qZA(),t.TgZ(10,"input",14),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.general_survey_remarks=i)}),t.qZA()()(),t.TgZ(11,"div",15),t.YNc(12,kn,4,4,"button",16),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(5),t.Q6J("disabled",e.consult_done||!e.allowed_to_edit)("ngModel",e.general_survey_code),t.xp6(1),t.Q6J("ngForOf",e.survey_list),t.xp6(4),t.Q6J("disabled",e.consult_done||!e.allowed_to_edit)("ngModel",e.general_survey_remarks),t.xp6(2),t.Q6J("ngIf",!e.consult_done&&e.allowed_to_edit)}}const Jn=function(n){return{"rounded-b":n}};let Mn=(()=>{var n;class s{onSubmit(){this.general_survey_code?this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,general_survey_code:this.general_survey_code,general_survey_remarks:this.general_survey_remarks}).subscribe({next:i=>{this.toastr.success("Successfully recorded!","General Survey")}}):this.toastr.error("Missing general survey!")}loadLib(){this.http.get("libraries/general-survey").subscribe(o=>{this.survey_list=o.data})}constructor(o,i){this.http=o,this.toastr=i,this.loadConsult=new t.vpe,this.faSave=_.r6l,this.faChevronCircleUp=_._qI,this.faChevronCircleDown=_.yh$,this.faSpinner=_.LM3,this.show_content=!0,this.is_saving=!1,this.consult_done=!1}ngOnInit(){this.loadLib()}ngOnChanges(o){this.show_content=this.toggle_content,this.consult_details&&(this.consult_notes=this.consult_details.consult_notes,this.consult_done=this.consult_details.consult_done,this.general_survey_code=this.consult_notes.general_survey_code,this.general_survey_remarks=this.consult_notes.general_survey_remarks)}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(u.O),t.Y36(x._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-general-survey"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",allowed_to_edit:"allowed_to_edit"},outputs:{loadConsult:"loadConsult"},features:[t.TTD],decls:10,vars:5,consts:[[1,"grid","grid-cols-10","my-5","pt-5","border-t","border-slate-200"],[1,"col-span-2","pt-2","pr-5","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-blue-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],["class","grid grid-cols-1",4,"ngIf"],[1,"grid","grid-cols-1"],[1,"col-span-1","flex","mt-3"],[1,"w-1/2","grid","grid-cols-1","px-4","pb-4"],["for","complaint_notes",1,"font-semibold","pl-1"],["rows","3","id","general_survey_code",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["rows","3","id","general_survey_remarks","type","text","placeholder","General Survey Remarks",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"disabled","ngModel","ngModelChange"],[1,"col-span-1","flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[3,"value"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2," General Survey "),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"span",4),t._uU(6," General Survey "),t.TgZ(7,"button",5),t.NdJ("click",function(){return i.show_content=!i.show_content}),t._UZ(8,"fa-icon",6),t.qZA()(),t.YNc(9,Un,13,6,"div",7),t.qZA()()()),2&o&&(t.xp6(5),t.Q6J("ngClass",t.VKq(3,Jn,!i.show_content)),t.xp6(3),t.Q6J("icon",i.show_content?i.faChevronCircleUp:i.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",i.show_content))},dependencies:[d.mk,d.sg,d.O5,g.BN,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.On]}),s})();function Nn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",13)(2,"input",14),t.NdJ("ngModelChange",function(i){const r=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.management_list.management_code[r.code]=i)}),t.qZA(),t.TgZ(3,"label",15),t._uU(4),t.qZA()(),t.TgZ(5,"div",16)(6,"input",17),t.NdJ("ngModelChange",function(i){const r=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.management_list.remarks[r.code]=i)}),t.qZA()()()}if(2&n){const e=s.$implicit,o=t.oxw(2);t.xp6(2),t.Q2q("id","management_list",e.code,""),t.Q6J("disabled",o.consult_done||!o.allowed_to_edit)("ngModel",o.management_list.management_code[e.code]),t.xp6(1),t.Q2q("for","management_list",e.code,""),t.xp6(1),t.Oqu(e.desc),t.xp6(2),t.Q6J("disabled",!o.management_list.management_code[e.code])("ngModel",o.management_list.remarks[e.code])}}function In(n,s){if(1&n&&t._UZ(0,"fa-icon",21),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSpinner)}}function Qn(n,s){if(1&n&&t._UZ(0,"fa-icon",22),2&n){const e=t.oxw(3);t.Q6J("icon",e.faSave)}}function Fn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onSubmit())}),t.YNc(1,In,1,1,"fa-icon",19),t.YNc(2,Qn,1,1,"fa-icon",20),t._uU(3),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("ngIf",e.is_saving),t.xp6(1),t.Q6J("ngIf",!e.is_saving),t.xp6(1),t.hij(" ",e.is_saving?"Saving":"Save"," ")}}function Dn(n,s){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,Nn,7,7,"div",9),t.TgZ(2,"div",10),t.YNc(3,Fn,4,4,"button",11),t.qZA()()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.management_codes),t.xp6(2),t.Q6J("ngIf",!e.consult_done&&e.allowed_to_edit)}}const On=function(n){return{"rounded-b":n}};let Yn=(()=>{var n;class s{onSubmit(){this.is_saving=!0;var o=[];Object.entries(this.management_list.management_code).forEach(([l,r],c)=>{!0===r&&o.push({management_code:l,remarks:this.management_list.remarks[l]?this.management_list.remarks[l]:null})}),o.length>0&&this.http.post("consultation/management",{notes_id:this.consult_notes.id,patient_id:this.consult_details.patient.id,management:o}).subscribe({next:l=>{this.is_saving=!1,this.toastr.success("Successfully recorded!","Management record")},error:l=>console.log(l)})}loadLibraries(){this.http.get("libraries/management").subscribe({next:o=>{this.management_codes=o.data},error:o=>console.log(o)})}patchData(){this.consult_management&&Object.entries(this.consult_management).forEach(([o,i],l)=>{let r=i;this.management_list.management_code[r.management_code]=!0,r.remarks&&(this.management_list.remarks[r.management_code]=r.remarks)})}ngOnChanges(o){this.show_content=this.toggle_content,this.consult_details&&(this.consult_notes=this.consult_details.consult_notes,this.consult_done=this.consult_details.consult_done,this.consult_management=this.consult_details.management,this.patchData())}constructor(o,i){this.http=o,this.toastr=i,this.faChevronCircleUp=_._qI,this.faChevronCircleDown=_.yh$,this.faSpinner=_.LM3,this.faSave=_.r6l,this.show_content=!1,this.is_saving=!1,this.management_list={management_code:[],remarks:[]}}ngOnInit(){this.loadLibraries()}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(u.O),t.Y36(x._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-management"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",allowed_to_edit:"allowed_to_edit"},features:[t.TTD],decls:11,vars:5,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],["class","flex item-start flex-wrap pt-3 px-5 first:mt-5 last:mb-10",4,"ngFor","ngForOf"],[1,"flex","text-right","mt-5"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[1,"flex","item-start","flex-wrap","pt-3","px-5","first:mt-5","last:mb-10"],[1,"w-4/12","flex","mb-2"],["type","checkbox",1,"disabled:bg-gray-300","flex-none","mt-2","mr-2","border","border-gray-300","sm:text-sm","rounded-md","focus:ring-blue-500","focus:border-blue-500","block","p-2.5",3,"disabled","ngModel","ngModelChange"],[1,"flex-1","mt-2","text-gray-800"],[1,"w-8/12"],["type","text",1,"input","disabled:bg-gray-300",3,"disabled","ngModel","ngModelChange"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(o,i){1&o&&(t._UZ(0,"hr",0),t.TgZ(1,"div",1)(2,"div",2),t._uU(3," Management "),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"span",5),t._uU(7," Management/Counselling "),t.TgZ(8,"button",6),t.NdJ("click",function(){return i.show_content=!i.show_content}),t._UZ(9,"fa-icon",7),t.qZA()(),t.YNc(10,Dn,4,2,"div",8),t.qZA()()()),2&o&&(t.xp6(6),t.Q6J("ngClass",t.VKq(3,On,!i.show_content)),t.xp6(3),t.Q6J("icon",i.show_content?i.faChevronCircleUp:i.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",i.show_content))},dependencies:[d.mk,d.sg,d.O5,g.BN,a.Fj,a.Wl,a.JJ,a.On]}),s})();function En(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",20)(1,"input",26),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw(2);return t.KtG(l.is_walk_in=i)}),t.qZA(),t.TgZ(2,"label",27),t._uU(3,"Check if patient is Walk-in"),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.is_checking_atc)("ngModel",e.is_walk_in)}}function Sn(n,s){1&n&&(t.TgZ(0,"div",37),t._uU(1," Please check if the ATC is valid before you proceed. Invalid ATC will not be saved. "),t.qZA())}function Pn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",28)(1,"div",29)(2,"label",30),t._uU(3,"Konsulta ATC"),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"input",31),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw(2);return t.KtG(l.pATC=i)}),t.qZA(),t.TgZ(6,"input",32),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw(2);return t.KtG(l.pATC_date=i)}),t.ALo(7,"date"),t.qZA()(),t.TgZ(8,"div",33)(9,"button",34),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.isATCValid())}),t._UZ(10,"fa-icon",35),t._uU(11,"Check ATC "),t.qZA()(),t.YNc(12,Sn,2,0,"div",36),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(5),t.Q6J("ngModel",e.pATC),t.xp6(1),t.s9C("max",t.xi3(7,7,e.date,"yyyy-MM-dd HH:mm:ss")),t.Q6J("ngModel",e.pATC_date),t.xp6(3),t.Q6J("disabled",!e.pATC||!e.pATC_date||e.is_saving||e.is_checking_atc),t.xp6(1),t.Q6J("icon",e.is_checking_atc?e.faSpinner:e.faCheck)("spin",e.is_checking_atc),t.xp6(2),t.Q6J("ngIf",e.pATC&&!e.is_atc_valid)}}const Hn=function(n){return{"bg-red-100 text-red-900":n}};function jn(n,s){if(1&n&&(t.TgZ(0,"div",38),t._UZ(1,"fa-icon",39),t._uU(2),t.qZA()),2&n){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(3,Hn,!e.is_atc_valid)),t.xp6(1),t.Q6J("icon",e.faCircleInfo),t.xp6(1),t.hij(" ",e.is_atc_valid?"ATC is valid":"ATC is not valid"," ")}}function Kn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",19)(1,"div",20)(2,"input",21),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.is_konsulta=i)}),t.qZA(),t.TgZ(3,"label",22),t._uU(4,"Check if this visit is for Konsulta"),t.qZA()(),t.YNc(5,En,4,2,"div",23),t.YNc(6,Pn,13,10,"div",24),t.YNc(7,jn,3,5,"div",25),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("disabled",e.is_checking_atc)("ngModel",e.is_konsulta),t.xp6(3),t.Q6J("ngIf",e.is_konsulta&&"cn"===e.consult_details.pt_group),t.xp6(1),t.Q6J("ngIf",!e.is_walk_in),t.xp6(1),t.Q6J("ngIf",void 0!==e.is_atc_valid)}}function Ln(n,s){1&n&&(t.TgZ(0,"div",40)(1,"div",41),t._uU(2," ATC checking is not available. Philhealth pin not found. "),t.qZA()())}let Gn=(()=>{var n;class s{isATCValid(){this.is_checking_atc=!0;let o={pPIN:this.philhealth_details.philhealth_id,pATC:this.pATC,pEffectivityDate:(0,d.p6)(this.pATC_date,"MM/dd/yyyy","en","Asia/Manila")};this.http.get("konsulta/check-atc",{params:o}).subscribe({next:i=>{this.is_checking_atc=!1,this.is_atc_valid="YES"===i.return},error:i=>console.log(i)})}getPhilhealth(){this.http.get("patient-philhealth/philhealth",{params:{"filter[patient_id]":this.consult_details.patient.id,per_page:"1",sort:"-enlistment_date"}}).subscribe({next:o=>{console.log(o),this.philhealth_details=o.data[0]},error:o=>console.log(o)})}onSubmit(){this.is_saving=!0;let o={patient_id:this.consult_details.patient.id,user_id:this.consult_details.user_id,consult_date:this.consult_date+" "+this.consult_time,consult_done:this.consult_details.consult_done,pt_group:this.consult_details.pt_group,authorization_transaction_code:this.is_atc_valid?this.is_walk_in?"WALKEDIN":this.pATC||""!==this.pATC?this.pATC:"WALKEDIN":"WALKEDIN",walkedin_status:!this.is_atc_valid,is_konsulta:this.is_konsulta};console.log(o.consult_date),this.http.update("consultation/records/",this.consult_details.id,o).subscribe({next:i=>{this.toastr.success("Successfully updated!","Consultation"),this.closeModal()},error:i=>console.log(i.error.message)})}closeModal(){this.is_saving=!1,this.toggleModal.emit("update_date")}constructor(o,i,l,r){this.router=o,this.http=i,this.toastr=l,this.dateHelper=r,this.toggleModal=new t.vpe,this.faCircleInfo=_.DBf,this.faCheck=_.LEp,this.faSpinner=_.LM3,this.is_saving=!1,this.show_form=!1,this.is_checking_atc=!1,this.selected_module="",this.is_konsulta=!1}ngOnInit(){this.getPhilhealth(),this.max_date=this.dateHelper.dateFormat(new Date),this.consult_date=this.dateHelper.dateFormat(this.consult_details.consult_date),this.consult_time=this.dateHelper.timeFormat(this.consult_details.consult_date),this.is_walk_in="WALKEDIN"===this.consult_details.authorization_transaction_code,this.pATC="WALKEDIN"===this.consult_details.authorization_transaction_code?null:this.consult_details.authorization_transaction_code,this.is_konsulta=this.consult_details.is_konsulta,console.log(this.consult_time)}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(b.F0),t.Y36(u.O),t.Y36(x._W),t.Y36(A.Y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-update-date"]],inputs:{patient_info:"patient_info",patient_age:"patient_age",consult_details:"consult_details"},outputs:{toggleModal:"toggleModal"},decls:24,vars:7,consts:[[1,"overflow-x-hidden","overflow-y-auto","fixed","inset-0","z-50","outline-none","focus:outline-none","justify-center","items-center","flex"],["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"overflow-y-auto","overflow-x-hidden","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"grid","grid-cols-1","item-start","flex-wrap","pb-5"],[1,"flex","flex-col"],[1,"flex","justify-start","pb-3","w-full","ml-10"],["for","consult_date",1,"input-label","pr-5","inline-block","align-middle","pt-3","w-1/4"],["type","date","name","consult_date","id","consult_date","placeholder","mm/dd/yyyy",1,"input","w-52",3,"max","ngModel","ngModelChange"],["type","time","name","consult_time","id","consult_time","placeholder","hh:mm AM/PM",1,"input","w-52",3,"ngModel","ngModelChange"],["class","border border-slate-200 rounded-md mx-10 shadow-md",4,"ngIf"],["class","border border-yellow-400 text-yellow-700 rounded-md mx-10 bg-yellow-100",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"btn-save","px-5","bg-gray-400",3,"disabled","click"],[1,"btn-save",3,"disabled","click"],[1,"opacity-25","fixed","inset-0","z-40","bg-black"],[1,"border","border-slate-200","rounded-md","mx-10","shadow-md"],[1,"flex","justify-start","w-full","ml-5","my-3"],["id","is_konsulta","type","checkbox",1,"border","border-gray-400","rounded-md","h-5","w-5","mr-2","disabled:bg-gray-300",3,"disabled","ngModel","ngModelChange"],["for","is_konsulta"],["class","flex justify-start w-full ml-5 my-3",4,"ngIf"],["class","grid grid-cols-1 w-full mb-3",4,"ngIf"],["class","flex mx-16 my-3 p-2 rounded-md bg-green-100 text-green-900 shadow-sm",3,"ngClass",4,"ngIf"],["id","is_walk_in","type","checkbox",1,"border","border-gray-400","rounded-md","h-5","w-5","mr-2","disabled:bg-gray-300",3,"disabled","ngModel","ngModelChange"],["for","is_walk_in"],[1,"grid","grid-cols-1","w-full","mb-3"],[1,"flex","justify-center","mx-5","mb-3"],["for","pATC",1,"input-label","pr-5","inline-block","align-middle","pt-3","w-1/4"],["type","text","name","pATC","id","pATC","placeholder","Patient ATC",1,"input","w-52",3,"ngModel","ngModelChange"],["type","date","name","pATC_date","id","pATC_date","placeholder","mm/dd/yyyy",1,"input","w-52",3,"max","ngModel","ngModelChange"],[1,"align-middle","text-center"],["type","button",1,"btn-save","w-44",3,"disabled","click"],[1,"py-1","px-2",3,"icon","spin"],["class","flex-1 flex text-xs text-red-500 italic text-center",4,"ngIf"],[1,"flex-1","flex","text-xs","text-red-500","italic","text-center"],[1,"flex","mx-16","my-3","p-2","rounded-md","bg-green-100","text-green-900","shadow-sm",3,"ngClass"],["size","lg",1,"flex-none","my-0","m-2",3,"icon"],[1,"border","border-yellow-400","text-yellow-700","rounded-md","mx-10","bg-yellow-100"],[1,"p-3"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),t._uU(6," Update Consultation Date and ATC "),t.qZA()(),t.TgZ(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"label",10),t._uU(12,"Consultation Date"),t.qZA(),t._UZ(13,"br"),t.TgZ(14,"input",11),t.NdJ("ngModelChange",function(r){return i.consult_date=r}),t.qZA(),t.TgZ(15,"input",12),t.NdJ("ngModelChange",function(r){return i.consult_time=r}),t.qZA()(),t.YNc(16,Kn,8,5,"div",13),t.YNc(17,Ln,3,0,"div",14),t.qZA()()(),t.TgZ(18,"div",15)(19,"button",16),t.NdJ("click",function(){return i.closeModal()}),t._uU(20,"Close"),t.qZA(),t.TgZ(21,"button",17),t.NdJ("click",function(){return i.onSubmit()}),t._uU(22,"Update"),t.qZA()()()()()(),t._UZ(23,"div",18)),2&o&&(t.xp6(14),t.Q6J("max",i.max_date)("ngModel",i.consult_date),t.xp6(1),t.Q6J("ngModel",i.consult_time),t.xp6(1),t.Q6J("ngIf",i.philhealth_details),t.xp6(1),t.Q6J("ngIf",!i.philhealth_details),t.xp6(2),t.Q6J("disabled",i.is_saving),t.xp6(2),t.Q6J("disabled",i.is_saving))},dependencies:[d.mk,d.O5,g.BN,a.Fj,a.Wl,a.JJ,a.On,d.uU]}),s})();function Rn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.openEkas())}),t._UZ(1,"fa-icon",11),t._uU(2," eKAS "),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faFile)}}function $n(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleModal("show_end"))}),t._UZ(1,"fa-icon",11),t._uU(2," End Visit "),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faDoorClosed)}}function Vn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleModal("show_open"))}),t._uU(1," Open Visit "),t.qZA()}}function Bn(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" | ATC: ",null==e.consult_details?null:e.consult_details.authorization_transaction_code,"")}}function zn(n,s){if(1&n&&(t.TgZ(0,"option",29),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.lnq("",e.last_name,", ",e.first_name," ",e.middle_name,"")}}const Wn=function(n){return{"bg-orange-500 hover:ring-orange-400":n}};function Xn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",24)(1,"div",25)(2,"select",26),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw(2);return t.KtG(l.referred_to.id=i)}),t.YNc(3,zn,2,4,"option",27),t.qZA(),t.TgZ(4,"button",28),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.referTo())}),t._uU(5),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("disabled",e.enable_edit)("ngModel",e.referred_to.id),t.xp6(1),t.Q6J("ngForOf",e.physicians),t.xp6(1),t.Q6J("disabled",!e.referred_to.id)("ngClass",t.VKq(6,Wn,e.enable_edit)),t.xp6(1),t.hij(" ",e.enable_edit?"Update":"Refer"," ")}}function ti(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-pregnant-tag",37),t.NdJ("loadConsult",function(i){t.CHM(e);const l=t.oxw(3);return t.KtG(l.loadConsult(i))}),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("consult_details",e.consult_details)("have_complaint",e.have_complaint)("allowed_to_edit",e.allowed_to_edit)}}function ei(n,s){if(1&n&&t._UZ(0,"app-physical-exam",32),2&n){const e=t.oxw(3);t.Q6J("allowed_to_edit",e.allowed_to_edit)("toggle_content",e.toggle_content)("consult_details",e.consult_details)}}function ni(n,s){if(1&n&&t._UZ(0,"app-management",32),2&n){const e=t.oxw(3);t.Q6J("allowed_to_edit",e.allowed_to_edit)("toggle_content",e.toggle_content)("consult_details",e.consult_details)}}function ii(n,s){if(1&n&&t._UZ(0,"app-initial-dx",32),2&n){const e=t.oxw(3);t.Q6J("allowed_to_edit",e.allowed_to_edit)("toggle_content",e.toggle_content)("consult_details",e.consult_details)}}function oi(n,s){if(1&n&&t._UZ(0,"app-final-dx",32),2&n){const e=t.oxw(3);t.Q6J("allowed_to_edit",e.allowed_to_edit)("toggle_content",e.toggle_content)("consult_details",e.consult_details)}}function si(n,s){if(1&n&&t._UZ(0,"app-prescription",38),2&n){const e=t.oxw(3);t.Q6J("allowed_to_edit",e.allowed_to_edit)("toggle_content",e.toggle_content)("consult_details",e.consult_details)("with_credentials",e.with_credentials)}}function li(n,s){if(1&n&&(t.TgZ(0,"option",29),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.lnq("",e.last_name,", ",e.first_name," ",e.middle_name,"")}}function ai(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",39)(1,"div",40)(2,"label",41),t._uU(3,"To open final diagnosis & prescription you must refer this patient to a physician"),t.qZA(),t.TgZ(4,"select",42),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw(3);return t.KtG(l.referred_to.id=i)}),t.YNc(5,li,2,4,"option",27),t.qZA(),t.TgZ(6,"div",43)(7,"button",44),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.referTo())}),t._uU(8),t.qZA()()()()}if(2&n){const e=t.oxw(3);t.xp6(4),t.Q6J("disabled",e.enable_edit)("ngModel",e.referred_to.id),t.xp6(1),t.Q6J("ngForOf",e.physicians),t.xp6(2),t.Q6J("disabled",!e.referred_to.id),t.xp6(1),t.hij(" ",e.enable_edit?"Update":"Refer"," ")}}function ri(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.YNc(1,ti,1,3,"app-pregnant-tag",30),t.TgZ(2,"app-complaint-history",31),t.NdJ("loadConsult",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.loadConsult())}),t.qZA(),t._UZ(3,"app-general-survey",32),t.YNc(4,ei,1,3,"app-physical-exam",33),t.YNc(5,ni,1,3,"app-management",33),t._UZ(6,"app-consult-history",34),t.YNc(7,ii,1,3,"app-initial-dx",33),t.YNc(8,oi,1,3,"app-final-dx",33),t.YNc(9,si,1,4,"app-prescription",35),t.YNc(10,ai,9,5,"div",36),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf","F"===e.consult_details.patient.gender),t.xp6(1),t.Q6J("allowed_to_edit",e.allowed_to_edit)("toggle_content",e.toggle_content)("consult_details",e.consult_details)("have_complaint",e.have_complaint),t.xp6(1),t.Q6J("allowed_to_edit",e.allowed_to_edit)("toggle_content",e.toggle_content)("consult_details",e.consult_details),t.xp6(1),t.Q6J("ngIf",e.have_complaint),t.xp6(1),t.Q6J("ngIf",e.have_complaint),t.xp6(1),t.Q6J("toggle_content",e.toggle_content),t.xp6(1),t.Q6J("ngIf",e.have_complaint),t.xp6(1),t.Q6J("ngIf",e.have_complaint&&e.consult_details.physician),t.xp6(1),t.Q6J("ngIf",e.have_complaint&&e.consult_details.physician),t.xp6(1),t.Q6J("ngIf",!(null!=e.consult_details&&e.consult_details.consult_done)&&e.have_complaint&&!e.consult_details.physician&&e.allowed_to_edit)}}function _i(n,s){1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-consult-summary"),t.qZA())}function di(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"span",13)(2,"span",14)(3,"div",15)(4,"button",16),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleAll())}),t._UZ(5,"fa-icon",17),t.qZA(),t.TgZ(6,"span",18),t._uU(7," CONSULTATION "),t.TgZ(8,"span",19),t._uU(9),t.ALo(10,"date"),t.YNc(11,Bn,2,1,"span",6),t._uU(12,") "),t.TgZ(13,"button",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleModal("update_date"))}),t._UZ(14,"fa-icon",21),t.qZA()()(),t._UZ(15,"br"),t.TgZ(16,"span",22),t._uU(17),t.qZA()(),t.YNc(18,Xn,6,8,"div",23),t.qZA()(),t.YNc(19,ri,11,15,"div",6),t.YNc(20,_i,2,0,"div",6),t.qZA()}if(2&n){const e=t.oxw();t.xp6(5),t.Q6J("icon",e.toggle_content?e.faChevronUp:e.faChevronDown),t.xp6(4),t.AsE(" (",t.xi3(10,9,null==e.consult_details?null:e.consult_details.consult_date,"MM/dd/yyyy hh:mm a")," | ID:",null==e.consult_details?null:e.consult_details.id,""),t.xp6(2),t.Q6J("ngIf",null==e.consult_details?null:e.consult_details.is_konsulta),t.xp6(3),t.Q6J("icon",e.faEdit),t.xp6(3),t.hij("Facilty: ",null==e.consult_details||null==e.consult_details.facility?null:e.consult_details.facility.facility_name,""),t.xp6(1),t.Q6J("ngIf",e.consult_details&&e.open_consult&&e.have_complaint&&!(null!=e.consult_details&&e.consult_details.consult_done)&&e.allowed_to_edit),t.xp6(1),t.Q6J("ngIf",e.consult_details&&e.open_consult),t.xp6(1),t.Q6J("ngIf",e.consult_details&&!e.open_consult)}}function ci(n,s){1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-konsulta"),t.qZA())}function pi(n,s){1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-eclaims"),t.qZA())}function ui(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-end-visit",45),t.NdJ("toggleModal",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleModal("show_end"))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("consult_id",null==e.consult_details?null:e.consult_details.id)("consult_date",null==e.consult_details?null:e.consult_details.consult_date)("patient_id",null==e.consult_details?null:e.consult_details.patient.id)("pt_group","cn")}}function gi(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-open-consult",45),t.NdJ("toggleModal",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleModal("show_open"))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("consult_id",null==e.consult_details?null:e.consult_details.id)("consult_date",null==e.consult_details?null:e.consult_details.consult_date)("patient_id",null==e.consult_details?null:e.consult_details.patient.id)("pt_group","cn")}}function mi(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-update-date",46),t.NdJ("toggleModal",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleModal("update_date"))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("consult_details",e.consult_details)}}function hi(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-ekas",47),t.NdJ("toggleModal",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleEkas())}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("lab_list",e.lab_list)("consult_details",e.consult_details)}}const fi=[{path:"",component:(()=>{var n;class s{switchTabs(o){this.modules=0,this.modules=o}toggleAll(){this.toggle_content=!this.toggle_content}patientVitals(o){this.graph.patientVitals(o)}patientInfo(o){this.patient_details=o}toggleModal(o){console.log(o),this[o]=!this[o],("show_open"===o&&!this.show_open||"update_date"===o&&!this.update_date)&&this.loadConsult()}openEkas(){this.http.get("laboratory/consult-laboratories",{params:{patient_id:this.patient_id,sort:"-request_date",include:"laboratory"}}).subscribe({next:i=>{this.lab_list=i.data,this.show_ekas=!this.show_ekas},error:i=>console.log(i)})}toggleEkas(){this.show_ekas=!this.show_ekas}loadVisitHistory(){this.http.get("consultation/records",{params:{patient_id:this.patient_id,per_page:"all",sort:"-consult_date"}}).subscribe({next:o=>{this.visit_list=o.data,console.log(o.data)},error:o=>console.log(o)})}loadConsult(){this.consult_id=this.route.snapshot.paramMap.get("consult_id"),this.http.get("consultation/records",{params:{id:this.consult_id,pt_group:"cn",disable_filter:1}}).subscribe({next:l=>{this.consult_details=l.data[0],this.allowed_to_edit=this.http.getUserFacility()===this.consult_details.facility.code,(this.consult_details.consult_notes.complaint||this.consult_details.consult_notes.complaints.length>0||this.consult_details.consult_notes.history)&&(this.have_complaint=!0,this.consult_details.physician&&(this.referred_to=this.consult_details.physician,this.enable_edit=!0))},error:l=>console.log(l)});let i=this.http.getUserFromJSON();this.with_credentials=!!i.konsulta_credential}referTo(){this.enable_edit?this.enable_edit=!1:this.http.update("consultation/records/",this.consult_details.id,{patient_id:this.consult_details.patient.id,consult_date:this.consult_details.consult_date,pt_group:"cn",consult_done:!1,physician_id:this.referred_to.id}).subscribe({next:i=>{this.toastr.success("Patient was referred","Referral"),this.consult_details.physician=this.referred_to},error:i=>console.log(i)})}loadUsers(){this.http.get("users",{params:{per_page:"all",designation_code:"MD"}}).subscribe({next:o=>{this.physicians=o.data},error:o=>console.log(o)})}constructor(o,i,l,r){this.http=o,this.route=i,this.toastr=l,this.router=r,this.faChevronUp=_.mTx,this.faChevronDown=_.ptq,this.faDoorClosed=_.TH0,this.faFile=_.gMD,this.faEdit=v.Xcf,this.is_saving=!1,this.show_item=!0,this.toggle_content=!0,this.open_consult=!0,this.have_complaint=!1,this.show_end=!1,this.show_open=!1,this.enable_edit=!1,this.show_ekas=!1,this.update_date=!1,this.referred_to={id:""},this.with_credentials=!1,this.allowed_to_edit=!1,this.navigationEnd$=this.router.events.pipe((0,q.h)(c=>c instanceof b.m2),(0,C.b)(()=>{this.loadConsult()}))}ngOnInit(){this.patient_id=this.route.snapshot.paramMap.get("id"),this.modules=1,this.loadUsers(),this.loadConsult(),this.navigationEnd$.subscribe()}}return(n=s).\u0275fac=function(o){return new(o||n)(t.Y36(u.O),t.Y36(b.gz),t.Y36(x._W),t.Y36(b.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-consultation"]],viewQuery:function(o,i){if(1&o&&t.Gf(B,5),2&o){let l;t.iGM(l=t.CRH())&&(i.graph=l.first)}},decls:16,vars:12,consts:[[1,"block","shadow","p-4","mt-4","rounded-xl","text-gray-600","border","border-slate-100"],[1,"flex"],[1,"flex","justify-between","text-sm","w-full"],[1,"text-gray-600","border-b-2","border-gray-200","block","hover:text-blue-500","hover:border-blue-500","mr-6","pb-2",3,"click"],["type","button","class","btn-end-visit bg-green-500 mr-3 hover:ring-green-400",3,"click",4,"ngIf"],["type","button","class","btn-end-visit ml-auto",3,"click",4,"ngIf"],[4,"ngIf"],[3,"consult_id","consult_date","patient_id","pt_group","toggleModal",4,"ngIf"],[3,"consult_details","toggleModal",4,"ngIf"],[3,"lab_list","consult_details","toggleModal",4,"ngIf"],["type","button",1,"btn-end-visit","bg-green-500","mr-3","hover:ring-green-400",3,"click"],[1,"mr-1",3,"icon"],["type","button",1,"btn-end-visit","ml-auto",3,"click"],[1,"text-sky-500","flex","justify-between","py-2"],[1,"flex","justify-between","w-full"],[1,"w-2/3","mt-2"],["type","button",1,"font-normal","text-sky-500","px-2","py-1","text-sm","mr-2",3,"click"],["size","lg",3,"icon"],[1,"mt-2","font-bold"],[1,"text-gray-500","text-sm"],["type","button",1,"text-orange-400",3,"click"],[3,"icon"],[1,"text-gray-500","text-sm","font-semibold"],["class","w-1/3 flex justify-end",4,"ngIf"],[1,"w-1/3","flex","justify-end"],[1,"flex","text-gray-700"],[1,"input","px-2","mr-3","disabled:bg-gray-300",3,"disabled","ngModel","ngModelChange"],["class","pr-3",3,"value",4,"ngFor","ngForOf"],[1,"disabled:bg-gray-300","bg-blue-500","text-xs","text-white","px-5","py-1","rounded-md","hover:ring-2","hover:ring-blue-400","h-10","mt-1","w-24",3,"disabled","ngClass","click"],[1,"pr-3",3,"value"],[3,"consult_details","have_complaint","allowed_to_edit","loadConsult",4,"ngIf"],[3,"allowed_to_edit","toggle_content","consult_details","have_complaint","loadConsult"],[3,"allowed_to_edit","toggle_content","consult_details"],[3,"allowed_to_edit","toggle_content","consult_details",4,"ngIf"],[3,"toggle_content"],[3,"allowed_to_edit","toggle_content","consult_details","with_credentials",4,"ngIf"],["class","grid grid-cols-10",4,"ngIf"],[3,"consult_details","have_complaint","allowed_to_edit","loadConsult"],[3,"allowed_to_edit","toggle_content","consult_details","with_credentials"],[1,"grid","grid-cols-10"],[1,"col-start-3","col-span-8","text-gray-700","p-10","border","border-slate-300","shadow-md","rounded-md","mt-5"],["for","referred_to"],["name","referred_to",1,"input","px-2","mr-3","disabled:bg-gray-300","mb-3",3,"disabled","ngModel","ngModelChange"],[1,"w-full","text-right"],[1,"btn-save","px-5","disabled:bg-gray-300",3,"disabled","click"],[3,"consult_id","consult_date","patient_id","pt_group","toggleModal"],[3,"consult_details","toggleModal"],[3,"lab_list","consult_details","toggleModal"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"nav",2)(3,"button",3),t.NdJ("click",function(){return i.switchTabs(1)}),t._uU(4," CONSULTATION "),t.qZA(),t.TgZ(5,"div"),t.YNc(6,Rn,3,1,"button",4),t.YNc(7,$n,3,1,"button",5),t.YNc(8,Vn,2,0,"button",5),t.qZA()()(),t.YNc(9,di,21,12,"div",6),t.YNc(10,ci,2,0,"div",6),t.YNc(11,pi,2,0,"div",6),t.qZA(),t.YNc(12,ui,1,4,"app-end-visit",7),t.YNc(13,gi,1,4,"app-open-consult",7),t.YNc(14,mi,1,1,"app-update-date",8),t.YNc(15,hi,1,2,"app-ekas",9)),2&o&&(t.xp6(3),t.Tol(1===i.modules?"text-blue-500 border-b-2 border-blue-500 font-bold":"hover:-translate-y-1 hover:scale-110 transition ease-in-out delay-400 duration-300"),t.xp6(3),t.Q6J("ngIf",(null==i.consult_details?null:i.consult_details.is_konsulta)&&i.consult_details&&i.with_credentials),t.xp6(1),t.Q6J("ngIf",!(null!=i.consult_details&&i.consult_details.consult_done)&&i.allowed_to_edit),t.xp6(1),t.Q6J("ngIf",(null==i.consult_details?null:i.consult_details.consult_done)&&i.allowed_to_edit),t.xp6(1),t.Q6J("ngIf",1===i.modules),t.xp6(1),t.Q6J("ngIf",2===i.modules),t.xp6(1),t.Q6J("ngIf",3===i.modules),t.xp6(1),t.Q6J("ngIf",i.show_end),t.xp6(1),t.Q6J("ngIf",i.show_open),t.xp6(1),t.Q6J("ngIf",i.update_date),t.xp6(1),t.Q6J("ngIf",i.show_ekas))},dependencies:[d.mk,d.sg,d.O5,_t,dt.h,N,g.BN,a.YN,a.Kr,a.EJ,a.JJ,a.On,I.F,Q,F.a,ht,Ct,Dt,Re,cn,Cn,wn,Mn,Yn,Gn,d.uU],styles:["td[_ngcontent-%COMP%]{padding:1em 0}"]}),s})()}];let xi=(()=>{var n;class s{}return(n=s).\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[b.Bz.forChild(fi),b.Bz]}),s})();var bi=p(8048);let vi=(()=>{var n;class s{}return(n=s).\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.ez,xi,bi.q,U.X,g.uH,Z.A0,a.u5,a.UX,j.N,I.F,Q,F.a]}),s})()}}]);