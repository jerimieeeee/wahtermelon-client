"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[4815],{4815:(N,f,l)=>{l.r(f),l.d(f,{CalendarAppointmentModule:()=>A});var r=l(177),m=l(1317),h=l(5383),c=l(7367),u=l(1679),g=l(1447),e=l(4438),_=l(3318),v=l(60);function y(n,d){if(1&n){const t=e.RV6();e.j41(0,"tr",14)(1,"td",15)(2,"button",16),e.bIt("click",function(){const a=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.openItr(a.patient_id))}),e.EFF(3),e.k0s()(),e.j41(4,"td",15),e.EFF(5),e.k0s()()}if(2&n){const t=d.$implicit;e.R7$(3),e.SpI(" ",t.name," "),e.R7$(2),e.SpI(" ",t.appointment_desc," ")}}let w=(()=>{class n{openItr(t){this.router.navigate(["/patient/itr",{id:t}])}closeModal(){this.toggleModal.emit()}constructor(t){this.router=t,this.toggleModal=new e.bkB}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(m.Ix))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-name-list"]],inputs:{name_list:"name_list"},outputs:{toggleModal:"toggleModal"},standalone:!1,decls:22,vars:6,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-7xl","h-full","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"overflow-x-auto","relative","shadow-md","sm:rounded-lg","m-4"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6"],["class","bg-white border-b",4,"ngFor","ngForOf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"text-white","bg-red-500","hover:ring-2","focus:outline-none","hover:ring-red-300","rounded","text-sm","font-medium","px-6","py-2.5","transition","duration-150","ease-in-out","transform","hover:scale-110",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"bg-white","border-b"],[1,"py-4","px-6"],[1,"hover:cursor-pointer","hover:text-white","hover:bg-blue-500","px-3","py-2","rounded-md",3,"click"]],template:function(i,a){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e.EFF(5),e.nI1(6,"date"),e.k0s()(),e.j41(7,"div",5)(8,"div",6)(9,"table",7)(10,"thead",8)(11,"tr")(12,"th",9),e.EFF(13,"Name"),e.k0s(),e.j41(14,"th",9),e.EFF(15,"Appointment Type"),e.k0s()()(),e.j41(16,"tbody"),e.DNE(17,y,6,2,"tr",10),e.k0s()()()(),e.j41(18,"div",11)(19,"button",12),e.bIt("click",function(){return a.closeModal()}),e.EFF(20,"Close"),e.k0s()()()()(),e.nrm(21,"div",13)),2&i&&(e.R7$(5),e.SpI(" List of patients ",e.brH(6,2,a.name_list[0].appointment_date,"MM/dd/yyyy","Asia/Manila")," "),e.R7$(12),e.Y8G("ngForOf",a.name_list))},dependencies:[r.Sq,r.vh],encapsulation:2})}}return n})();function C(n,d){if(1&n){const t=e.RV6();e.j41(0,"mwl-calendar-month-view",12),e.bIt("dayClicked",function(a){e.eBV(t);const o=e.XpG(2);return e.Njj(o.handleEvent("Clicked",a))})("eventClicked",function(a){e.eBV(t);const o=e.XpG(2);return e.Njj(o.handleEvent("Clicked",a.event))}),e.k0s()}if(2&n){const t=e.XpG(2),i=e.sdS(18);e.Y8G("viewDate",t.viewDate)("events",t.events)("cellTemplate",i)}}function b(n,d){if(1&n&&(e.j41(0,"div",10),e.DNE(1,C,1,3,"mwl-calendar-month-view",11),e.k0s()),2&n){const t=e.XpG();e.Y8G("ngSwitch",t.view),e.R7$(),e.Y8G("ngSwitchCase","month")}}function x(n,d){if(1&n&&(e.j41(0,"div",13)(1,"div",14),e.nrm(2,"fa-icon",15),e.k0s(),e.j41(3,"div",16),e.EFF(4),e.nI1(5,"date"),e.k0s()()),2&n){const t=e.XpG();e.R7$(2),e.Y8G("icon",t.faCircleNotch),e.R7$(2),e.SpI(" Fetching schedule for ",e.i5U(5,2,t.viewDate,"MMMM y")," ")}}function D(n,d){if(1&n&&(e.j41(0,"span",20),e.EFF(1),e.k0s()),2&n){const t=e.XpG().day;e.R7$(),e.SpI(" ",t.events[0].data.length," ")}}function j(n,d){if(1&n&&(e.j41(0,"div",17),e.DNE(1,D,2,1,"span",18),e.j41(2,"span",19),e.EFF(3),e.nI1(4,"calendarDate"),e.k0s()()),2&n){const t=d.day,i=d.locale;e.R7$(),e.Y8G("ngIf",t.badgeTotal>0),e.R7$(2),e.SpI(" ",e.brH(4,2,t.date,"monthViewDayNumber",i)," ")}}function k(n,d){if(1&n){const t=e.RV6();e.j41(0,"app-name-list",21),e.bIt("toggleModal",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.toggleModal())}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("name_list",t.name_list)}}const F={red:{primary:"#ad2121",secondary:"#FAE3E3"},blue:{primary:"#1e90ff",secondary:"#D1E8FF"},yellow:{primary:"#e3bc08",secondary:"#FDF1BA"}},I=[{path:"",component:(()=>{class n{handleEvent(t,i){let a=i;a.data?(this.name_list=a.data?a.data:a.day.events[0].data,this.modal["name-list"]=!this.modal["name-list"]):a.day.events.length>0&&(this.name_list=a.day.events[0].data,this.modal["name-list"]=!this.modal["name-list"])}toggleModal(){this.modal["name-list"]=!this.modal["name-list"]}dayClicked({date:t,events:i}){(0,u.A)(t,this.viewDate)&&(this.activeDayIsOpen=!((0,g.A)(this.viewDate,t)&&!0===this.activeDayIsOpen||0===i.length),this.viewDate=t)}loadSchedules(){this.activeDayIsOpen=!1,this.calendar_loading=!0,this.selected_month=(0,r.Yq)(this.viewDate,"MM","en-us"),this.selected_year=(0,r.Yq)(this.viewDate,"yyyy","en-us"),this.http.get("appointment/schedule",{params:{month:this.selected_month,year:this.selected_year,disable_filter:1,per_page:"all",facility_code:this.facility_code,referral_facility_code:this.facility_code,filter_type:"calendar"}}).subscribe({next:i=>{console.log(i);let a=[];Object.entries(i[0]).forEach(([o,p])=>{let s=p,G={start:new Date(o),title:s.length,color:F.yellow,data:s};a.push(G)}),this.calendar_loading=!1,this.events=a}})}constructor(t){this.http=t,this.view=c.St.Month,this.viewDate=new Date,this.faChevronLeft=h.Wzs,this.faChevronRight=h.XkK,this.faCircleNotch=h.s4k,this.calendar_loading=!1,this.activeDayIsOpen=!1,this.events=[],this.name_list=[],this.modal=[]}ngOnInit(){this.facility_code=this.http.getUserFacility(),console.log(this.facility_code),this.loadSchedules()}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(_.k))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-calendar-appointment"]],standalone:!1,decls:20,vars:13,consts:[["customCellTemplate",""],[1,"flex","flex-col","pt-5"],[1,"flex","justify-center","mt-3"],[1,"flex","justify-between","text-xl","font-semibold","w-3/5"],["type","button","mwlCalendarPreviousView","",1,"bg-blue-500","rounded-full","px-4","py-1","text-sm","text-white","font-normal",3,"viewDateChange","view","viewDate"],[3,"icon"],["type","button","mwlCalendarNextView","",1,"bg-blue-500","rounded-full","px-4","py-1","text-sm","text-white","font-normal",3,"viewDateChange","view","viewDate"],["class","w-3/5",3,"ngSwitch",4,"ngIf"],["class","w-3/5 flex flex-col",4,"ngIf"],[3,"name_list","toggleModal",4,"ngIf"],[1,"w-3/5",3,"ngSwitch"],[3,"viewDate","events","cellTemplate","dayClicked","eventClicked",4,"ngSwitchCase"],[3,"dayClicked","eventClicked","viewDate","events","cellTemplate"],[1,"w-3/5","flex","flex-col"],[1,"flex","justify-center","text-blue-500"],["animation","spin",3,"icon"],[1,"flex","justify-center"],[1,"cal-cell-top"],["class","cal-day-badge",4,"ngIf"],[1,"cal-day-number"],[1,"cal-day-badge"],[3,"toggleModal","name_list"]],template:function(i,a){if(1&i){const o=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"button",4),e.mxI("viewDateChange",function(s){return e.eBV(o),e.DH7(a.viewDate,s)||(a.viewDate=s),e.Njj(s)}),e.bIt("viewDateChange",function(){return e.eBV(o),e.Njj(a.loadSchedules())}),e.nrm(5,"fa-icon",5),e.EFF(6," Previous "),e.k0s()(),e.j41(7,"div"),e.EFF(8),e.nI1(9,"date"),e.k0s(),e.j41(10,"div")(11,"button",6),e.mxI("viewDateChange",function(s){return e.eBV(o),e.DH7(a.viewDate,s)||(a.viewDate=s),e.Njj(s)}),e.bIt("viewDateChange",function(){return e.eBV(o),e.Njj(a.loadSchedules())}),e.EFF(12," Next "),e.nrm(13,"fa-icon",5),e.k0s()()()(),e.j41(14,"div",2),e.DNE(15,b,2,2,"div",7)(16,x,6,5,"div",8),e.k0s()(),e.DNE(17,j,5,6,"ng-template",null,0,e.C5r)(19,k,1,1,"app-name-list",9)}2&i&&(e.R7$(4),e.Y8G("view",a.view),e.R50("viewDate",a.viewDate),e.R7$(),e.Y8G("icon",a.faChevronLeft),e.R7$(3),e.SpI(" ",e.i5U(9,10,a.viewDate,"MMMM y")," "),e.R7$(3),e.Y8G("view",a.view),e.R50("viewDate",a.viewDate),e.R7$(2),e.Y8G("icon",a.faChevronRight),e.R7$(2),e.Y8G("ngIf",!a.calendar_loading),e.R7$(),e.Y8G("ngIf",a.calendar_loading),e.R7$(3),e.Y8G("ngIf",a.modal["name-list"]))},dependencies:[r.bT,r.ux,r.e1,v.aY,c.xt,c.Nl,c.jD,w,r.vh,c.Sz],styles:["h3[_ngcontent-%COMP%]{margin:0 0 10px}pre[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:15px}"]})}}return n})()}];let M=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[m.iI.forChild(I),m.iI]})}}return n})();var R=l(2558),T=l(9417);let A=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[r.MD,M,v.dX,T.X1,c.rO.forRoot({provide:c.MJ,useFactory:R.a})]})}}return n})()}}]);