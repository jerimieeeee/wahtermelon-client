"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[1778],{1778:(A,Z,_)=>{_.r(Z),_.d(Z,{DentalModule:()=>se});var a=_(6814),d=_(3602),c=_(590),t=_(5879),h=_(265),g=_(5597),b=_(1449),C=_(8316),s=_(6223),f=_(2425);function y(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"span",21)(1,"span")(2,"fa-icon",22),t.NdJ("click",function(){const o=t.CHM(e);return t.KtG((0,o.clear)(o.item))}),t.qZA()(),t.TgZ(3,"span"),t._uU(4),t.qZA()()}if(2&i){const e=r.item,n=t.oxw(2);t.xp6(2),t.Q6J("icon",n.faXmark),t.xp6(2),t.Oqu(e.complaint_desc)}}function m(i,r){if(1&i&&(t.TgZ(0,"div",23)(1,"div")(2,"h5",24),t._uU(3),t.qZA()()()),2&i){const e=r.item,n=r.searchTerm;t.xp6(2),t.Q6J("ngOptionHighlight",n),t.xp6(1),t.Oqu(e.complaint_desc)}}function u(i,r){if(1&i&&t._UZ(0,"fa-icon",28),2&i){const e=t.oxw(3);t.Q6J("icon",e.faCircleNotch)}}function v(i,r){if(1&i&&t._UZ(0,"fa-icon",29),2&i){const e=t.oxw(3);t.Q6J("icon",e.faSave)}}function w(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.onSubmit())}),t.YNc(1,u,1,1,"fa-icon",26),t.YNc(2,v,1,1,"fa-icon",27),t._uU(3),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("ngIf",e.is_saving),t.xp6(1),t.Q6J("ngIf",!e.is_saving),t.xp6(1),t.hij(" ",e.is_saving?"Saving":"Save"," ")}}function k(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"div",8)(2,"button",9),t._UZ(3,"fa-icon",10),t.qZA(),t.TgZ(4,"div",11)(5,"ng-select",12),t.NdJ("ngModelChange",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.selectedComplaint=o)}),t.YNc(6,y,5,2,"ng-template",13),t.YNc(7,m,4,2,"ng-template",14),t.qZA()()(),t.TgZ(8,"div",15)(9,"label",16),t._uU(10,"Complaint notes"),t.qZA(),t.TgZ(11,"textarea",17),t.NdJ("ngModelChange",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.consult_notes.complaint=o)}),t.qZA()(),t.TgZ(12,"div",15)(13,"label",16),t._uU(14,"History notes"),t.qZA(),t.TgZ(15,"textarea",18),t.NdJ("ngModelChange",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.consult_notes.history=o)}),t.qZA()(),t.TgZ(16,"div",19),t.YNc(17,w,4,4,"button",20),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(3),t.Q6J("icon",e.faPlusSquare),t.xp6(2),t.Q6J("disabled",e.consult_done||!e.allowed_to_edit)("items",e.complaints)("multiple",!0)("closeOnSelect",!1)("hideSelected",!0)("clearable",!1)("ngModel",e.selectedComplaint),t.xp6(6),t.Q6J("ngModel",e.consult_notes.complaint),t.xp6(4),t.Q6J("ngModel",e.consult_notes.history),t.xp6(2),t.Q6J("ngIf",!e.consult_done&&e.allowed_to_edit)}}const O=function(i){return{"rounded-b":i}};let N=(()=>{var i;class r{onSubmit(){this.is_saving=!0,this.http.post("consultation/complaint",{notes_id:this.consult_details.consult_notes.id,consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,complaints:this.selectedComplaint}).subscribe({next:o=>{this.saveNotes()},error:o=>{this.http.showError(o.error.message,"Complaint History")}})}saveNotes(){this.http.update("consultation/notes/",this.consult_details.consult_notes.id,{consult_id:this.consult_details.id,patient_id:this.consult_details.patient.id,complaint:this.consult_notes.complaint,history:this.consult_notes.history}).subscribe({next:()=>{this.is_saving=!1,this.showToastr(),this.loadConsult.emit()},error:o=>{this.http.showError(o.error.message,"Complaint History")}})}showToastr(){this.toastr.success("Successfully updated!","Complaint")}loadLib(){this.http.get("libraries/complaint").subscribe(n=>{this.complaints=n.data,this.loadSelected(),this.show_form=!0})}loadSelected(){this.gbv_complaints=[],this.show_gbv_form=!1,this.have_open_gbv=!1;let n=[];this.consult_details.consult_notes&&this.consult_details.consult_notes.complaints&&Object.entries(this.consult_details.consult_notes.complaints).forEach(([o,l],p)=>{n.push(l.complaint_id)}),this.selectedComplaint=n}getPatientGbv(){this.http.get("gender-based-violence/patient-gbv",{params:{patient_id:this.consult_details.patient.id}}).subscribe({next:o=>{o.data.length>0&&!o.data[0].outcome_date&&(this.have_open_gbv=!0),this.show_gbv_form=!0},error:o=>console.log(o)})}ngOnChanges(n){this.show_content=this.toggle_content,this.consult_details&&(this.complaints&&this.loadSelected(),this.consult_notes=this.consult_details.consult_notes,this.consult_done=this.consult_details.consult_done)}toggleModal(n){this.modals[n]=!this.modals[n],"gbv_referral"===n&&this.getPatientGbv()}constructor(n,o){this.http=n,this.toastr=o,this.loadConsult=new t.vpe,this.faPlusSquare=b.CPW,this.faSave=b.r6l,this.faChevronCircleUp=c._qI,this.faChevronCircleDown=c.yh$,this.faCircleNotch=c.IJ7,this.faXmark=c.g82,this.selectedComplaint=[],this.consult_notes={complaint:null,history:null},this.modals=[],this.show_content=!0,this.is_saving=!1,this.consult_done=!1,this.show_form=!1,this.enable_edit=!1,this.show_gbv_form=!1,this.have_open_gbv=!1}ngOnInit(){this.loadLib(),this.allowed_to_edit=!0}}return(i=r).\u0275fac=function(n){return new(n||i)(t.Y36(h.O),t.Y36(f._W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-complaint-history"]],inputs:{toggle_content:"toggle_content",consult_details:"consult_details",have_complaint:"have_complaint",allowed_to_edit:"allowed_to_edit"},outputs:{loadConsult:"loadConsult"},standalone:!0,features:[t.TTD,t.jDz],decls:10,vars:5,consts:[[1,"grid","grid-cols-10","mb-5"],[1,"col-span-2","pt-2","pr-5","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-cyan-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],[4,"ngIf"],[1,"flex","mb-2","p-4"],["type","submit",1,"inline-flex","p-1","items-center","text-gray-50","bg-sky-400","rounded-l-md","border","border-gray-300"],[1,"text-white","fa-xl",3,"icon"],[1,"chips-container"],["placeholder","search","bindLabel","complaint_desc","bindValue","complaint_id","placeholder","Select Complaint",1,"select-chips",3,"disabled","items","multiple","closeOnSelect","hideSelected","clearable","ngModel","ngModelChange"],["ng-label-tmp",""],["ng-option-tmp",""],[1,"grid","grid-cols-1","px-4","pb-4"],["for","complaint_notes",1,"font-semibold","pl-1"],["rows","3","id","complaint_notes","placeholder","Complaint Notes",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"ngModel","ngModelChange"],["rows","3","id","history_notes","placeholder","History of Current Illness",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50",3,"ngModel","ngModelChange"],[1,"flex","text-right"],["type","button","class","btn-save ml-auto mr-5 mb-5 px-10 disabled:bg-gray-300",3,"disabled","click",4,"ngIf"],[1,"px-2","py-1","rounded-md","text-sm"],[1,"text-xs","mr-1","hover:text-slate-100","hover:cursor-pointer",3,"icon","click"],[1,"grid","grid-flow-col","auto-cols-max"],[3,"ngOptionHighlight"],["type","button",1,"btn-save","ml-auto","mr-5","mb-5","px-10","disabled:bg-gray-300",3,"disabled","click"],["class","mr-2","spin","true",3,"icon",4,"ngIf"],["class","mr-2",3,"icon",4,"ngIf"],["spin","true",1,"mr-2",3,"icon"],[1,"mr-2",3,"icon"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2," Chief Complaint and History of Current Illness "),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"span",4),t._uU(6," Complaints "),t.TgZ(7,"button",5),t.NdJ("click",function(){return o.show_content=!o.show_content}),t._UZ(8,"fa-icon",6),t.qZA()(),t.YNc(9,k,18,11,"div",7),t.qZA()()()),2&n&&(t.xp6(5),t.Q6J("ngClass",t.VKq(3,O,!o.show_content)),t.xp6(3),t.Q6J("icon",o.show_content?o.faChevronCircleUp:o.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",o.show_content&&o.show_form))},dependencies:[a.ez,a.mk,a.O5,g.uH,g.BN,C.A0,C.w9,C.ir,C.mR,s.u5,s.Fj,s.JJ,s.On]}),r})();function D(i,r){if(1&i&&(t.TgZ(0,"ul",28)(1,"li"),t._uU(2),t.qZA()()),2&i){const e=r.$implicit;t.xp6(2),t.Oqu(null==e.lib_complaints?null:e.lib_complaints.complaint_desc)}}function Q(i,r){if(1&i&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",e.diagnosis.class_name," ")}}function E(i,r){if(1&i&&(t.TgZ(0,"div",29)(1,"span",30),t._uU(2,"remarks:"),t.qZA(),t._uU(3),t.qZA()),2&i){const e=t.oxw().$implicit;let n;t.xp6(3),t.hij(" ",null!==(n=e.consult_notes.idx_remarks)&&void 0!==n?n:"-"," ")}}function Y(i,r){if(1&i&&(t.TgZ(0,"li")(1,"span",31),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&i){const e=r.$implicit;t.xp6(2),t.hij("",e.lib_icd10.icd10_code,":"),t.xp6(1),t.hij(" ",e.lib_icd10.icd10_desc," ")}}function j(i,r){if(1&i&&(t.TgZ(0,"div",29)(1,"span",30),t._uU(2,"remarks:"),t.qZA(),t._uU(3),t.qZA()),2&i){const e=t.oxw().$implicit;let n;t.xp6(3),t.hij(" ",null!==(n=e.consult_notes.fdx_remarks)&&void 0!==n?n:"-"," ")}}function G(i,r){if(1&i&&(t.TgZ(0,"tr",13)(1,"td",14)(2,"div",15)(3,"span",16),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"span",17),t._uU(7),t.ALo(8,"date"),t.qZA()()(),t.TgZ(9,"td",18)(10,"div",15)(11,"span",19)(12,"span",20),t._uU(13,"Complaint notes:"),t.qZA(),t._uU(14),t.qZA(),t.YNc(15,D,3,1,"ul",21),t.TgZ(16,"span",22)(17,"span",20),t._uU(18,"History notes:"),t.qZA(),t._uU(19),t.qZA()(),t.TgZ(20,"div",23)(21,"span",20),t._uU(22,"Initial Diagnosis:"),t.qZA(),t.TgZ(23,"ul",24),t.YNc(24,Q,2,1,"li",25),t.qZA(),t.YNc(25,E,4,1,"div",26),t.qZA(),t.TgZ(26,"div",27)(27,"span",20),t._uU(28,"Final Diagnosis:"),t.qZA(),t.TgZ(29,"ul",24),t.YNc(30,Y,4,2,"li",25),t.qZA(),t.YNc(31,j,4,1,"div",26),t.qZA(),t.TgZ(32,"div",27)(33,"span",19)(34,"span",20),t._uU(35,"Treatment Plan:"),t.qZA(),t._uU(36),t.qZA()()()()),2&i){const e=r.$implicit;let n,o,l;t.xp6(4),t.Oqu(t.Dn7(5,10,e.consult_date,"MM/dd/yyyy","Asia/Manila")),t.xp6(3),t.Oqu(t.xi3(8,14,e.consult_date,"hh:mm:ss a")),t.xp6(7),t.hij(" ",null!==(n=e.consult_notes.complaint)&&void 0!==n?n:"-"," "),t.xp6(1),t.Q6J("ngForOf",e.consult_notes.complaints),t.xp6(4),t.hij(" ",null!==(o=e.consult_notes.history)&&void 0!==o?o:"-"," "),t.xp6(5),t.Q6J("ngForOf",e.consult_notes.initialdx),t.xp6(1),t.Q6J("ngIf",e.consult_notes.idx_remarks),t.xp6(5),t.Q6J("ngForOf",e.consult_notes.finaldx),t.xp6(1),t.Q6J("ngIf",e.consult_notes.fdx_remarks),t.xp6(5),t.hij(" ",null!==(l=e.consult_notes.plan)&&void 0!==l?l:"-"," ")}}function K(i,r){if(1&i&&(t.TgZ(0,"table",10)(1,"thead")(2,"tr",11)(3,"th"),t._uU(4,"Date"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Details"),t.qZA()()(),t.TgZ(7,"tbody"),t.YNc(8,G,37,17,"tr",12),t.qZA()()),2&i){const e=t.oxw();t.xp6(8),t.Q6J("ngForOf",e.visit_list)}}function L(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"nav",36)(2,"button",37),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.loadPreviousVisit(1))}),t._UZ(3,"fa-icon",38),t.qZA(),t.TgZ(4,"button",39),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.loadPreviousVisit(o.current_page-1))}),t._UZ(5,"fa-icon",38),t._uU(6,"Previous "),t.qZA(),t.TgZ(7,"button",39),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.loadPreviousVisit(o.current_page+1))}),t._uU(8," Next"),t._UZ(9,"fa-icon",40),t.qZA(),t.TgZ(10,"button",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.loadPreviousVisit(o.last_page))}),t._UZ(11,"fa-icon",40),t.qZA()()()}if(2&i){const e=t.oxw(2);t.xp6(2),t.Q6J("disabled",1===e.current_page),t.xp6(1),t.Q6J("icon",e.faAnglesLeft),t.xp6(1),t.Q6J("disabled",1===e.current_page),t.xp6(1),t.Q6J("icon",e.faChevronLeft),t.xp6(2),t.Q6J("disabled",e.current_page===e.last_page),t.xp6(2),t.Q6J("icon",e.faChevronRight),t.xp6(1),t.Q6J("disabled",e.current_page===e.last_page),t.xp6(1),t.Q6J("icon",e.faAnglesRight)}}function P(i,r){if(1&i&&(t.TgZ(0,"div")(1,"div",32)(2,"div",33)(3,"div")(4,"p",34),t._uU(5," Showing "),t.TgZ(6,"span",35),t._uU(7),t.qZA(),t._uU(8," to "),t.TgZ(9,"span",35),t._uU(10),t.qZA(),t._uU(11," of "),t.TgZ(12,"span",35),t._uU(13),t.qZA(),t._uU(14," results "),t.qZA()(),t.YNc(15,L,12,8,"div",9),t.qZA()()()),2&i){const e=t.oxw();t.xp6(7),t.Oqu(e.from),t.xp6(3),t.Oqu(e.to),t.xp6(3),t.Oqu(e.total),t.xp6(2),t.Q6J("ngIf",e.total>=6)}}const z=function(i){return{"rounded-b":i}};let q=(()=>{var i;class r{loadPreviousVisit(n){this.http.get("consultation/records",{params:{patient_id:this.patient_id,per_page:this.per_page,sort:"-consult_date",pt_group:this.pt_group,page:n,not_consult_id:this.consult_id}}).subscribe({next:l=>{this.visit_list=l.data,this.current_page=l.meta.current_page,this.last_page=l.meta.last_page,this.from=l.meta.from,this.to=l.meta.to,this.total=l.meta.total},error:l=>console.log(l)})}constructor(n,o){this.route=n,this.http=o,this.show_content=!1,this.faChevronCircleUp=c._qI,this.faChevronCircleDown=c.yh$,this.faChevronLeft=c.A35,this.faChevronRight=c._tD,this.faAnglesLeft=c._Wx,this.faAnglesRight=c.ccb,this.per_page=5}ngOnInit(){this.patient_id=this.route.snapshot.paramMap.get("id"),this.consult_id=this.route.snapshot.paramMap.get("consult_id"),this.show_content=!0,this.loadPreviousVisit(1)}}return(i=r).\u0275fac=function(n){return new(n||i)(t.Y36(d.gz),t.Y36(h.O))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-consult-history"]],inputs:{toggle_content:"toggle_content",allowed_to_edit:"allowed_to_edit",pt_group:"pt_group"},standalone:!0,features:[t.jDz],decls:12,vars:6,consts:[[1,"my-4"],[1,"grid","grid-cols-10"],[1,"col-span-2","pt-2","font-semibold"],[1,"col-span-8"],[1,"rounded-md","border","border-solid","border-gray-300"],[1,"rounded-t-md","m-0","p-2","font-semibold","text-gray-50","bg-green-500","flex","justify-between",3,"ngClass"],["type","button",3,"click"],["size","lg",1,"pr-2",3,"icon"],["class","w-full table-auto",4,"ngIf"],[4,"ngIf"],[1,"w-full","table-auto"],[1,"border-b","border-solid","border-gray-200"],["class","text-left mt-3 align-top border-t border-slate-200 text-sm",4,"ngFor","ngForOf"],[1,"text-left","mt-3","align-top","border-t","border-slate-200","text-sm"],[1,"p-3","w-2/12"],[1,"grid","grid-cols-1"],[1,"font-semibold","w-full"],[1,"text-sm","w-full"],[1,"p-3","w-7/12"],[1,"w-full","mb-3"],[1,"font-semibold"],["class","list-disc last:mb-3 ml-10",4,"ngFor","ngForOf"],[1,"w-full","my-2","py-2"],[1,"grid","grid-cols-1","text-left"],[1,"list-disc","ml-10"],[4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],[1,"grid","grid-cols-1","text-left","mt-2","pt-2"],[1,"list-disc","last:mb-3","ml-10"],[1,"mt-2"],[1,"text-sm","italic"],[1,"font-semibold","text-sm"],[1,"bg-white","px-4","py-4","flex","items-center","justify-between","border-t","border-gray-200","sm:px-6"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"text-sm","text-gray-700"],[1,"font-medium"],["aria-label","Pagination",1,"relative","z-0","inline-flex","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"disabled","click"],[1,"block","h-15","w-15","text-gray-500","pr-1",3,"icon"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","bg-white","text-sm","font-medium","text-gray-700","hover:bg-gray-50",3,"disabled","click"],[1,"h-5","w-5","text-gray-500",3,"icon"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"disabled","click"]],template:function(n,o){1&n&&(t._UZ(0,"hr",0),t.TgZ(1,"div",1)(2,"div",2),t._uU(3," Diagnosis History "),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"span",5),t._uU(7," Previous History "),t.TgZ(8,"button",6),t.NdJ("click",function(){return o.show_content=!o.show_content}),t._UZ(9,"fa-icon",7),t.qZA()(),t.YNc(10,K,9,1,"table",8),t.YNc(11,P,16,4,"div",9),t.qZA()()()),2&n&&(t.xp6(6),t.Q6J("ngClass",t.VKq(4,z,!o.show_content)),t.xp6(3),t.Q6J("icon",o.show_content?o.faChevronCircleUp:o.faChevronCircleDown),t.xp6(1),t.Q6J("ngIf",o.show_content),t.xp6(1),t.Q6J("ngIf",o.total>=1))},dependencies:[a.ez,a.mk,a.sg,a.O5,a.uU,g.uH,g.BN]}),r})();var J=_(53),S=_(6094),U=_(279),I=_(6719),M=_(9315);function B(i,r){if(1&i&&(t.TgZ(0,"div",14),t._UZ(1,"input",15),t.TgZ(2,"label",16),t._uU(3),t.qZA()()),2&i){const e=r.$implicit;t.xp6(1),t.Q6J("formControlName",e.column_name),t.uIk("id",e.column_name),t.xp6(1),t.uIk("for",e.column_name),t.xp6(1),t.Oqu(e.desc)}}function R(i,r){if(1&i&&(t.TgZ(0,"div",14),t._UZ(1,"input",15),t.TgZ(2,"label",16),t._uU(3),t.qZA()()),2&i){const e=r.$implicit;t.xp6(1),t.Q6J("formControlName",e.column_name),t.xp6(2),t.Oqu(e.desc)}}let W=(()=>{var i;class r{onSubmit(){this.is_saving=!0,this.http.post("dental/medical-social",this.medicalSocialForm.value).subscribe({next:n=>{this.toastr.success("Successfully "+(this.medicalSocialForm.value.id?"updated":"recorded"),"Medical & Social History"),this.loadSelectedConsult.emit(),this.is_saving=!1},error:n=>{this.http.showError(n.error.message,"Dental Medical and Social History")}})}loadLibraries(){const n=this.http.get("libraries/dental-medical-history"),o=this.http.get("libraries/dental-social-history");(0,M.D)([n,o]).subscribe({next:([l,p])=>{this.lib_medical_history=l.data,this.lib_social_history=p.data,this.show_form=!0},error:l=>{this.http.showError(l.error.message,"Dental History Library")}}),this.patchData()}patchData(){this.medicalSocialForm.patchValue(this.selected_visit.dentalMedicalSocials?{...this.selected_visit.dentalMedicalSocials}:{patient_id:this.selected_visit.patient.id})}addHospHistory(){}constructor(n,o){this.http=n,this.toastr=o,this.loadSelectedConsult=new t.vpe,this.faSpinner=c.LM3,this.faSave=b.r6l,this.faPlus=c.r8p,this.is_saving=!1,this.show_form=!1,this.medicalSocialForm=function $(){return new s.cw({id:new s.NI(null),patient_id:new s.NI(null),allergies_flag:new s.NI(!1),hypertension_flag:new s.NI(!1),diabetes_flag:new s.NI(!1),blood_disorder_flag:new s.NI(!1),heart_disease_flag:new s.NI(!1),thyroid_flag:new s.NI(!1),hepatitis_flag:new s.NI(!1),malignancy_flag:new s.NI(!1),blood_transfusion_flag:new s.NI(!1),tattoo_flag:new s.NI(!1),medical_others_flag:new s.NI(!1),medical_remarks:new s.NI(""),sweet_flag:new s.NI(!1),tabacco_flag:new s.NI(!1),alcohol_flag:new s.NI(!1),nut_flag:new s.NI(!1),social_others_flag:new s.NI(!1),social_remarks:new s.NI("")})}()}ngOnInit(){this.loadLibraries()}}return(i=r).\u0275fac=function(n){return new(n||i)(t.Y36(h.O),t.Y36(f._W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-history"]],inputs:{selected_visit:"selected_visit"},outputs:{loadSelectedConsult:"loadSelectedConsult"},decls:23,vars:7,consts:[[1,"pt-5"],[1,"border","border-solid","border-gray-200","rounded-lg"],[1,"bg-blue-500","w-full","text-white","p-3","rounded-t-lg","font-semibold"],[3,"formGroup","ngSubmit"],[1,"col-span-1","px-5"],[1,"border-b","border-slate-200","my-3","text-gray-800","uppercase","text-sm"],[1,"grid","grid-cols-3","pl-3"],["class","col-span-1 mb-2",4,"ngFor","ngForOf"],[1,"block","m-3"],["rows","2","id","medical_remarks","formControlName","medical_remarks","placeholder","Remarks",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50"],["rows","2","id","social_remarks","formControlName","social_remarks","placeholder","Remarks",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50"],[1,"text-right","m-5"],["type","submit",1,"btn-save",3,"disabled"],[1,"mr-3",3,"icon","spin"],[1,"col-span-1","mb-2"],["type","checkbox",1,"input-checkbox",3,"formControlName"],[1,"pl-2","text-sm"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3," History "),t.qZA(),t.TgZ(4,"form",3),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(5,"div",4)(6,"div",5),t._uU(7," Medical History "),t.qZA(),t.TgZ(8,"div",6),t.YNc(9,B,4,4,"div",7),t.qZA(),t.TgZ(10,"div",8),t._UZ(11,"textarea",9),t.qZA()(),t.TgZ(12,"div",4)(13,"div",5),t._uU(14," Dietary/Social History "),t.qZA(),t.TgZ(15,"div",6),t.YNc(16,R,4,2,"div",7),t.qZA(),t.TgZ(17,"div",8),t._UZ(18,"textarea",10),t.qZA()(),t.TgZ(19,"div",11)(20,"button",12),t._UZ(21,"fa-icon",13),t._uU(22),t.qZA()()()()()),2&n&&(t.xp6(4),t.Q6J("formGroup",o.medicalSocialForm),t.xp6(5),t.Q6J("ngForOf",o.lib_medical_history),t.xp6(7),t.Q6J("ngForOf",o.lib_social_history),t.xp6(4),t.Q6J("disabled",o.is_saving),t.xp6(1),t.Q6J("icon",o.is_saving?o.faSpinner:o.faSave)("spin",o.is_saving),t.xp6(1),t.hij(" ",o.is_saving?"Saving":"Save"," "))},dependencies:[a.sg,g.BN,s._Y,s.Fj,s.Wl,s.JJ,s.JL,s.sg,s.u]}),r})();const V=[11,12,13,14,15,16,17,18,21,22,23,24,25,26,27,28,31,32,33,34,35,36,37,38,41,42,43,44,45,46,47,48],X=[51,52,53,54,55,61,62,63,64,65,71,72,73,74,75,81,82,83,84,85],tt=[{id:"D",desc:"Decayed"},{id:"F",desc:"Filled"},{id:"JC",desc:"Jacket Crown"},{id:"M",desc:"Missing"},{id:"P",desc:"Pontic"},{id:"S",desc:"Supernumerary"},{id:"Un",desc:"Unerupted"},{id:"Dx",desc:"For Extraction"},{id:"Y",desc:"Sound/Sealed"}],H=[[{tooth_number:18,condition:null},{tooth_number:17,condition:null},{tooth_number:16,condition:null},{tooth_number:15,condition:null},{tooth_number:14,condition:null},{tooth_number:13,condition:null},{tooth_number:12,condition:null},{tooth_number:11,condition:null},{tooth_number:21,condition:null},{tooth_number:22,condition:null},{tooth_number:23,condition:null},{tooth_number:24,condition:null},{tooth_number:25,condition:null},{tooth_number:26,condition:null},{tooth_number:27,condition:null},{tooth_number:28,condition:null}],[{tooth_number:48,condition:null},{tooth_number:47,condition:null},{tooth_number:46,condition:null},{tooth_number:45,condition:null},{tooth_number:44,condition:null},{tooth_number:43,condition:null},{tooth_number:42,condition:null},{tooth_number:41,condition:null},{tooth_number:31,condition:null},{tooth_number:32,condition:null},{tooth_number:33,condition:null},{tooth_number:34,condition:null},{tooth_number:35,condition:null},{tooth_number:36,condition:null},{tooth_number:37,condition:null},{tooth_number:38,condition:null}]],F=[[{tooth_number:55,condition:null},{tooth_number:54,condition:null},{tooth_number:53,condition:null},{tooth_number:52,condition:null},{tooth_number:51,condition:null},{tooth_number:61,condition:null},{tooth_number:62,condition:null},{tooth_number:63,condition:null},{tooth_number:64,condition:null},{tooth_number:65,condition:null}],[{tooth_number:85,condition:null},{tooth_number:84,condition:null},{tooth_number:83,condition:null},{tooth_number:82,condition:null},{tooth_number:81,condition:null},{tooth_number:71,condition:null},{tooth_number:72,condition:null},{tooth_number:73,condition:null},{tooth_number:74,condition:null},{tooth_number:75,condition:null}]];var T=_(3146);function ot(i,r){if(1&i&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}let it=(()=>{var i;class r{get f(){return this.toothServiceForm.controls}onSubmit(){this.is_saving=!0,this.http.post("dental/tooth-service",this.toothServiceForm.value).subscribe({next:n=>{this.toastr.success("Successfully recorded","Tooth Service"),this.is_saving=!1,this.closeModal()},error:n=>{this.http.showError(n.error.message,"Tooth Service")}})}createForm(){this.toothServiceForm=this.formBuilder.nonNullable.group({id:[""],consult_id:[this.selected_visit.id,[s.kI.required]],patient_id:[this.selected_visit.patient.id,[s.kI.required]],tooth_number:[this.selected_tooth.tooth_number,[s.kI.required]],service_code:[null,[s.kI.required]],remarks:[null]})}loadLibraries(){this.http.get("libraries/dental-tooth-service").subscribe({next:n=>{this.tooth_services=n.data,this.createForm()},error:n=>{this.http.showError(n.error.message,"Tooth Services Library")}})}closeModal(){this.toggleModal.emit("tooth_services")}constructor(n,o,l){this.http=n,this.toastr=o,this.formBuilder=l,this.toggleModal=new t.vpe,this.faSave=b.r6l,this.faCircleNotch=c.IJ7,this.tooth_services=[],this.is_saving=!1,this.toothServiceForm=new s.cw({consult_id:new s.NI(""),patient_id:new s.NI(""),tooth_number:new s.NI(null),service_code:new s.NI(null),remarks:new s.NI(null)})}ngOnInit(){this.loadLibraries()}}return(i=r).\u0275fac=function(n){return new(n||i)(t.Y36(h.O),t.Y36(f._W),t.Y36(s.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-tooth-services"]],inputs:{selected_tooth:"selected_tooth",selected_visit:"selected_visit"},outputs:{toggleModal:"toggleModal"},decls:25,vars:7,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"overflow-y-auto","h-auto","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"w-full","max-w-3xl","text-left","text-gray-500","dark:text-gray-400"],[3,"formGroup","submit"],[1,"m-5"],["for","service_code"],["id","service_code","formControlName","service_code",1,"input"],[3,"value",4,"ngFor","ngForOf"],["for","remarks"],["type","text","id","remarks","formControlName","remarks",1,"input"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"btn-save","bg-gray-400",3,"click"],["type","button h-10",1,"btn-save",3,"disabled","click"],[3,"icon","spin"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[3,"value"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5),t.qZA()(),t.TgZ(6,"div",5)(7,"div",6)(8,"form",7),t.NdJ("submit",function(){return o.onSubmit()}),t.TgZ(9,"div",8)(10,"label",9),t._uU(11,"Service Done"),t.qZA(),t.TgZ(12,"select",10),t.YNc(13,ot,2,2,"option",11),t.qZA()(),t.TgZ(14,"div",8)(15,"label",12),t._uU(16,"Remarks"),t.qZA(),t._UZ(17,"input",13),t.qZA()()()(),t.TgZ(18,"div",14)(19,"button",15),t.NdJ("click",function(){return o.closeModal()}),t._uU(20,"Cancel"),t.qZA(),t.TgZ(21,"button",16),t.NdJ("click",function(){return o.onSubmit()}),t._UZ(22,"fa-icon",17),t._uU(23),t.qZA()()()()(),t._UZ(24,"div",18)),2&n&&(t.xp6(5),t.hij(" Service for Tooth (#",o.selected_tooth.tooth_number,") "),t.xp6(3),t.Q6J("formGroup",o.toothServiceForm),t.xp6(5),t.Q6J("ngForOf",o.tooth_services),t.xp6(8),t.Q6J("disabled",o.toothServiceForm.invalid||o.is_saving),t.xp6(1),t.Q6J("icon",o.is_saving?o.faCircleNotch:o.faSave)("spin",o.is_saving),t.xp6(1),t.hij(" ",o.is_saving?"Saving":"Save"," "))},dependencies:[a.sg,g.BN,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.sg,s.u]}),r})();function nt(i,r){1&i&&(t.TgZ(0,"span",34),t._uU(1," (from previous visit) "),t.qZA())}function st(i,r){if(1&i&&(t.TgZ(0,"option",43),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.desc)}}function lt(i,r){if(1&i&&(t.TgZ(0,"option",43),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ","Y"===e.id?"\u2713":e.id," ")}}function rt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",52)(1,"button",53),t.NdJ("click",function(o){t.CHM(e);const l=t.oxw(2).$implicit,p=t.oxw(4);return t.KtG(p.toggleModal("tooth_services",l,o))}),t._UZ(2,"fa-icon",54),t.qZA()()}if(2&i){const e=t.oxw(6);t.xp6(2),t.Q6J("icon",e.faAdd)}}function at(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"button",55),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,l=t.oxw(6);return t.KtG(l.toggleModal("delete-service",o))}),t._UZ(2,"fa-icon",56),t.qZA(),t._uU(3),t.qZA()}if(2&i){const e=t.oxw().$implicit,n=t.oxw(6);t.xp6(2),t.Q6J("icon",n.faTrash),t.xp6(1),t.hij(" ",e.service_code," ")}}function dt(i,r){1&i&&t._UZ(0,"br")}function _t(i,r){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,at,4,2,"div",33),t.YNc(2,dt,1,0,"br",33),t.qZA()),2&i){const e=r.$implicit,n=r.last;t.xp6(1),t.Q6J("ngIf",e),t.xp6(1),t.Q6J("ngIf",!n)}}function ct(i,r){if(1&i&&(t.TgZ(0,"div",50),t.YNc(1,rt,3,1,"div",51),t.YNc(2,_t,3,2,"div",6),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw(4);t.xp6(1),t.Q6J("ngIf",!n.current_services[e.tooth_number]),t.xp6(1),t.Q6J("ngForOf",n.current_services[e.tooth_number])}}function ut(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",46)(1,"span",47),t._uU(2),t.qZA(),t.TgZ(3,"div")(4,"select",48),t.NdJ("ngModelChange",function(o){const p=t.CHM(e).$implicit,x=t.oxw(4);return t.KtG(x.tooth_condition[p.tooth_number]=o)}),t.YNc(5,lt,2,2,"option",38),t.qZA()(),t.YNc(6,ct,3,2,"div",49),t.qZA()}if(2&i){const e=r.$implicit,n=t.oxw(4);t.xp6(2),t.Oqu(e.tooth_number),t.xp6(2),t.Q6J("ngModel",n.tooth_condition[e.tooth_number]),t.xp6(1),t.Q6J("ngForOf",n.tooth_condition_legend),t.xp6(1),t.Q6J("ngIf",n.consultCondition)}}function pt(i,r){if(1&i&&(t.TgZ(0,"div",44),t.YNc(1,ut,7,4,"div",45),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.Q6J("ngForOf",e)}}function mt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"div",35)(2,"span",36),t._uU(3,"Tooth Condition"),t.qZA(),t.TgZ(4,"select",37),t.NdJ("ngModelChange",function(o){t.CHM(e);const l=t.oxw().$implicit,p=t.oxw();return t.KtG(p.condition[l.title]=o)})("change",function(){t.CHM(e);const o=t.oxw().$implicit,l=t.oxw();return t.KtG(l.updateConditions(o.title))}),t.YNc(5,st,2,2,"option",38),t.qZA()(),t.YNc(6,pt,2,1,"div",39),t.TgZ(7,"div",40)(8,"button",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,l=t.oxw();return t.KtG(l.onSubmit(o.title))}),t._UZ(9,"fa-icon",42),t._uU(10),t.qZA()()()}if(2&i){const e=t.oxw().$implicit,n=t.oxw();t.xp6(4),t.Q6J("ngModel",n.condition[e.title]),t.xp6(1),t.Q6J("ngForOf",n.tooth_condition_legend),t.xp6(1),t.Q6J("ngForOf",e.chart),t.xp6(2),t.Q6J("disabled",n.is_saving),t.xp6(1),t.Q6J("icon",n.is_saving?n.faCircleNotch:n.faSave)("spin",n.is_saving),t.xp6(1),t.hij(" ",n.is_saving?"Saving ":"Save "," Tooth Condition ")}}function gt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"fieldset",28)(1,"legend",29)(2,"button",30),t.NdJ("click",function(){const l=t.CHM(e).$implicit,p=t.oxw();return t.KtG(p.toggleChart(l.title))}),t._UZ(3,"fa-icon",31),t.qZA(),t._uU(4),t.YNc(5,nt,2,0,"span",32),t.qZA(),t.YNc(6,mt,11,7,"div",33),t.qZA()}if(2&i){const e=r.$implicit,n=t.oxw();t.xp6(3),t.Q6J("icon",n.show_chart[e.title]?n.faChevronCircleUp:n.faChevronCircleDown),t.xp6(1),t.hij(" ",e.title," TOOTH CHART "),t.xp6(1),t.Q6J("ngIf",!n.consultCondition),t.xp6(1),t.Q6J("ngIf",n.show_chart[e.title])}}function ht(i,r){if(1&i&&(t.TgZ(0,"div",57)(1,"strong"),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&i){const e=r.$implicit;t.xp6(2),t.Oqu("Y"===e.id?"\u2713":e.id),t.xp6(1),t.hij(": ",e.desc," ")}}function ft(i,r){if(1&i&&(t.TgZ(0,"div")(1,"strong"),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&i){const e=r.$implicit;t.xp6(2),t.Oqu(e.code),t.xp6(1),t.hij(": ",e.desc," ")}}function vt(i,r){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.tooth_number," ")}}function bt(i,r){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.consult.consult_date,"MM/dd/yyyy"))}}function xt(i,r){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.tooth_service.desc)}}function Ct(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"td")(1,"button",58),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,l=t.oxw();return t.KtG(l.toggleModal("delete-service",o))}),t._UZ(2,"fa-icon",54),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(2),t.Q6J("icon",e.faTrash)}}function yt(i,r){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,vt,2,1,"td",33),t.YNc(2,bt,3,4,"td",33),t.YNc(3,xt,2,1,"td",33),t.YNc(4,Ct,3,1,"td",33),t.qZA()),2&i){const e=r.$implicit,n=t.oxw();t.Tol(e.consult_id===n.selected_visit.id?"bg-yellow-100":""),t.xp6(1),t.Q6J("ngIf",e),t.xp6(1),t.Q6J("ngIf",e),t.xp6(1),t.Q6J("ngIf",e),t.xp6(1),t.Q6J("ngIf",e)}}function Zt(i,r){if(1&i&&(t.TgZ(0,"div",59),t._UZ(1,"input",60),t.TgZ(2,"label",61),t._uU(3),t.qZA()()),2&i){const e=r.$implicit;t.xp6(1),t.Q6J("formControlName",e.column_name),t.uIk("id",e.column_name),t.xp6(1),t.uIk("for",e.column_name),t.xp6(1),t.Oqu(e.desc)}}function Tt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"app-delete-item",62),t.NdJ("toggleModal",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.toggleModal("delete-service"))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("url",e.url)("delete_id",e.delete_id)("delete_desc",e.delete_desc)}}function wt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"app-tooth-services",63),t.NdJ("toggleModal",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.toggleModal(o))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("selected_tooth",e.selected_tooth)("selected_visit",e.selected_visit)}}let At=(()=>{var i;class r{toggleChart(n){this.show_chart[n]=!this.show_chart[n]}submitCondition(){this.saving_oralCondition=!0,this.http.post("dental/oral-condition",this.oralConditionForm.value).subscribe({next:()=>{this.saving_oralCondition=!1,this.loadSelectedConsult.emit(),this.toastr.success("Successfully Recorded","Oral Health Condition")},error:n=>{this.http.showError(n.error.message,"Oral Health Condition")}})}onSubmit(n){this.is_saving=!0;let o=[];("adult"===n?this.adult_tooth_arr:this.temp_tooth_arr).forEach(x=>{o.push({tooth_number:x,tooth_condition:this.tooth_condition[x]})}),this.http.post("dental/tooth-condition",{patient_id:this.selected_visit.patient.id,consult_id:this.selected_visit.id,tooth_arr:o}).subscribe({next:()=>{this.is_saving=!1,this.loadSelectedConsult.emit(),this.toastr.success("Successfully Recorded","Tooth Condition")},error:x=>{this.http.showError(x.error.message,"Tooth Condition"),this.is_saving=!1}})}patchToothCondition(){this.consultCondition=Object.keys(this.selected_visit.consultToothCondition).length>0,Object.entries(this.consultCondition?this.selected_visit.consultToothCondition:this.selected_visit.latestToothCondition).forEach(([o,l],p)=>{this.tooth_condition[l.tooth_number]=l.tooth_condition}),this.selected_visit.dentalOralHealthCondition&&this.oralConditionForm.patchValue({...this.selected_visit.dentalOralHealthCondition})}toggleModal(n,o,l){l&&l.preventDefault(),"delete-service"===n&&o&&(this.url="dental/tooth-service/",this.delete_desc="Tooth Service",this.delete_id=o.id),this.selected_tooth=o,this.modals[n]=!this.modals[n],this.modals[n]||this.loadSelectedConsult.emit()}iterateServices(n){this.service_list=this.selected_visit.dentalToothService,this.current_services=[],Object.keys(this.selected_visit.dentalToothService).length>0&&Object.entries(this.selected_visit.dentalToothService).forEach(([o,l],p)=>{this.selected_visit.id===l.consult_id&&(this.current_services[l.tooth_number]?this.current_services[l.tooth_number].push({service_code:l.service_code,id:l.id}):this.current_services[l.tooth_number]=[{service_code:l.service_code,id:l.id}])}),this.createForm()}createForm(){this.oralConditionForm=this.formBuilder.nonNullable.group({patient_id:[this.selected_visit.patient.id,[s.kI.required]],consult_id:[this.selected_visit.id,[s.kI.required]],healthy_gums_flag:[!1],orally_fit_flag:[!1],oral_rehab_flag:[!1],dental_caries_flag:[!1],gingivitis_flag:[!1],periodontal_flag:[!1],debris_flag:[!1],calculus_flag:[!1],abnormal_growth_flag:[!1],cleft_lip_flag:[!1],supernumerary_flag:[!1],dento_facial_flag:[!1],others_flag:[!1],remarks:[null]}),this.patchToothCondition()}loadLibraries(){const n=this.http.get("libraries/dental-tooth-service"),o=this.http.get("libraries/dental-oral-condition");(0,M.D)([n,o]).subscribe({next:([l,p])=>{this.tooth_service_legend=l.data,this.oral_health_condition=p.data,this.iterateServices(!1)},error:l=>{this.http.showError(l.error.message,"Condition and Service Library")}})}updateConditions(n){("adult"===n?this.adult_tooth_arr:this.temp_tooth_arr).forEach(l=>{delete this.tooth_condition[l],this.tooth_condition[l]||(this.tooth_condition[l]=this.condition[n])})}constructor(n,o,l){this.http=n,this.toastr=o,this.formBuilder=l,this.loadSelectedConsult=new t.vpe,this.oralConditionForm=function et(){return new s.cw({id:new s.NI(null),patient_id:new s.NI(null),consult_id:new s.NI(null),healthy_gums_flag:new s.NI(!1),orally_fit_flag:new s.NI(!1),oral_rehab_flag:new s.NI(!1),dental_caries_flag:new s.NI(!1),gingivitis_flag:new s.NI(!1),periodontal_flag:new s.NI(!1),debris_flag:new s.NI(!1),calculus_flag:new s.NI(!1),abnormal_growth_flag:new s.NI(!1),cleft_lip_flag:new s.NI(!1),supernumerary_flag:new s.NI(!1),dento_facial_flag:new s.NI(""),others_flag:new s.NI(""),remarks:new s.NI("")})}(),this.adult_tooth_conditions=H,this.temp_tooth_condition=F,this.adult_tooth_arr=V,this.temp_tooth_arr=X,this.tooth_condition_legend=tt,this.faTrash=c.$aW,this.faAdd=c.XSk,this.faCheck=c.LEp,this.faSave=b.r6l,this.faCircleNotch=c.IJ7,this.faChevronCircleDown=c.yh$,this.faChevronCircleUp=c._qI,this.modals=[],this.condition=[],this.service_list=[],this.current_services=[],this.tooth_condition=[],this.tooth_service_legend=[],this.is_saving=!1,this.show_form=!1,this.consultCondition=!1,this.show_chart={adult:!0,temporary:!0},this.tooth_chart=[{chart:H,title:"adult"},{chart:F,title:"temporary"}],this.saving_oralCondition=!1}ngOnChanges(n){this.iterateServices(!0)}ngOnInit(){this.loadLibraries()}}return(i=r).\u0275fac=function(n){return new(n||i)(t.Y36(h.O),t.Y36(f._W),t.Y36(s.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-condition"]],inputs:{selected_visit:"selected_visit"},outputs:{loadSelectedConsult:"loadSelectedConsult"},features:[t.TTD],decls:45,vars:12,consts:[["class","border border-slate-200 w-full rounded-md my-2",4,"ngFor","ngForOf"],[1,"border","border-slate-200","w-full","rounded-md","mb-2"],[1,"ml-5","font-semibold","text-xs"],[1,"grid","grid-cols-3","m-5","text-sm"],["class","flex",4,"ngFor","ngForOf"],[1,"border","border-slate-200","w-full","rounded-md"],[4,"ngFor","ngForOf"],[1,"mt-5","border","border-solid","border-gray-200","rounded-lg"],[1,"bg-blue-500","w-full","text-white","p-3","rounded-t-lg","justify-between","flex"],[1,"flex","flex-col","justify-center"],[1,"table-auto","w-11/12","text-center","m-5","mx-auto","border","border-slate-300","rounded-lg","shadow-md"],[1,"border-b"],[1,"px-3"],[3,"class",4,"ngFor","ngForOf"],[1,"pt-5"],[1,"border","border-solid","border-gray-200","rounded-lg"],[1,"bg-blue-500","w-full","text-white","p-3","rounded-t-lg","font-semibold"],[3,"formGroup","ngSubmit"],[1,"col-span-1","p-3"],[1,"grid","grid-cols-3","pl-3"],["class","col-span-1 mb-1",4,"ngFor","ngForOf"],[1,"block","m-3"],["rows","2","id","remarks","formControlName","remarks","placeholder","Remarks",1,"placeholder-slate-400","w-full","rounded-md","border-gray-300","bg-gray-50"],[1,"text-right","m-5"],["type","submit",1,"btn-save",3,"disabled"],[1,"mr-3",3,"icon","spin"],[3,"url","delete_id","delete_desc","toggleModal",4,"ngIf"],[3,"selected_tooth","selected_visit","toggleModal",4,"ngIf"],[1,"border","border-slate-200","w-full","rounded-md","my-2"],[1,"ml-3","text-sm","bg-blue-200","px-5","py-1","rounded-md","uppercase"],["type","button",3,"click"],[1,"mr-1","text-blue-500",3,"icon"],["class","text-red-500 text-sm lowercase",4,"ngIf"],[4,"ngIf"],[1,"text-red-500","text-sm","lowercase"],[1,"flex","justify-center","w-full","mt-3"],[1,"text-sm","mt-3"],[1,"input","w-32","mx-3",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["class","flex flex-wrap justify-center my-3 first:mt-24 mx-auto",4,"ngFor","ngForOf"],[1,"flex","justify-center","w-full","mb-3"],[1,"btn-save","h-9","mt-1",3,"disabled","click"],[3,"icon","spin"],[3,"value"],[1,"flex","flex-wrap","justify-center","my-3","first:mt-24","mx-auto"],["class","w-14",4,"ngFor","ngForOf"],[1,"w-14"],[1,"ml-5"],[1,"input",3,"ngModel","ngModelChange"],["class","text-xs bg-gray-100 w-full border border-gray-300 px-0.5 mt-1",4,"ngIf"],[1,"text-xs","bg-gray-100","w-full","border","border-gray-300","px-0.5","mt-1"],["class","flex justify-center",4,"ngIf"],[1,"flex","justify-center"],["type","button",1,"text-xs","bg-blue-400","text-white","w-5","m-0.5","pb-0.5","rounded-full",3,"click"],[3,"icon"],[3,"click"],[1,"text-red-500",3,"icon"],[1,"flex"],["type","button",1,"text-red-500",3,"click"],[1,"col-span-1","mb-1"],["type","checkbox",1,"input-checkbox",3,"formControlName"],[1,"pl-2","text-sm"],[3,"url","delete_id","delete_desc","toggleModal"],[3,"selected_tooth","selected_visit","toggleModal"]],template:function(n,o){1&n&&(t.YNc(0,gt,7,4,"fieldset",0),t.TgZ(1,"fieldset",1)(2,"legend",2),t._uU(3,"TOOTH CONDITION LEGEND"),t.qZA(),t.TgZ(4,"div",3),t.YNc(5,ht,4,2,"div",4),t.qZA()(),t.TgZ(6,"fieldset",5)(7,"legend",2),t._uU(8,"TOOTH SERVICE LEGEND"),t.qZA(),t.TgZ(9,"div",3),t.YNc(10,ft,4,2,"div",6),t.qZA()(),t.TgZ(11,"div",7)(12,"div",8)(13,"span"),t._uU(14,"Tooth Services"),t.qZA()(),t.TgZ(15,"div",9)(16,"table",10)(17,"thead",11)(18,"tr")(19,"th",12),t._uU(20,"Tooth Number"),t.qZA(),t.TgZ(21,"th",12),t._uU(22,"Date of Service"),t.qZA(),t.TgZ(23,"th",12),t._uU(24,"Service Done"),t.qZA(),t.TgZ(25,"th",12),t._uU(26,"Action"),t.qZA()()(),t.TgZ(27,"tbody"),t.YNc(28,yt,5,6,"tr",13),t.qZA()()()(),t.TgZ(29,"div",14)(30,"div",15)(31,"div",16),t._uU(32," Oral Health Condition "),t.qZA(),t.TgZ(33,"form",17),t.NdJ("ngSubmit",function(){return o.submitCondition()}),t.TgZ(34,"div",18)(35,"div",19),t.YNc(36,Zt,4,4,"div",20),t.qZA(),t.TgZ(37,"div",21),t._UZ(38,"textarea",22),t.qZA()(),t.TgZ(39,"div",23)(40,"button",24),t._UZ(41,"fa-icon",25),t._uU(42),t.qZA()()()()(),t.YNc(43,Tt,1,3,"app-delete-item",26),t.YNc(44,wt,1,2,"app-tooth-services",27)),2&n&&(t.Q6J("ngForOf",o.tooth_chart),t.xp6(5),t.Q6J("ngForOf",o.tooth_condition_legend),t.xp6(5),t.Q6J("ngForOf",o.tooth_service_legend),t.xp6(18),t.Q6J("ngForOf",o.service_list),t.xp6(5),t.Q6J("formGroup",o.oralConditionForm),t.xp6(3),t.Q6J("ngForOf",o.oral_health_condition),t.xp6(4),t.Q6J("disabled",o.saving_oralCondition),t.xp6(1),t.Q6J("icon",o.saving_oralCondition?o.faCircleNotch:o.faSave)("spin",o.saving_oralCondition),t.xp6(1),t.hij(" ",o.saving_oralCondition?"Saving":"Save"," "),t.xp6(1),t.Q6J("ngIf",o.modals["delete-service"]),t.xp6(1),t.Q6J("ngIf",o.modals.tooth_services))},dependencies:[a.sg,a.O5,g.BN,s._Y,s.YN,s.Kr,s.Fj,s.Wl,s.EJ,s.JJ,s.JL,s.On,s.sg,s.u,T.N,it,a.uU]}),r})();function Nt(i,r){if(1&i&&(t.TgZ(0,"option",20),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.desc)}}function qt(i,r){if(1&i&&(t.TgZ(0,"span"),t._UZ(1,"br"),t._uU(2),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.remarks)}}function Jt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.YNc(3,qt,3,1,"span",21),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"date"),t.qZA(),t.TgZ(7,"td")(8,"button",22),t.NdJ("click",function(){const l=t.CHM(e).$implicit,p=t.oxw();return t.KtG(p.toggleModal("delete-item",l))}),t._UZ(9,"fa-icon",23),t.qZA()()()}if(2&i){const e=r.$implicit,n=t.oxw();t.xp6(2),t.hij(" ",e.service.desc," "),t.xp6(1),t.Q6J("ngIf",e.remarks),t.xp6(2),t.Oqu(t.xi3(6,4,e.service_date,"MM/dd/yyyy")),t.xp6(4),t.Q6J("icon",n.faTrash)}}function St(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"app-delete-item",24),t.NdJ("toggleModal",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.toggleModal(o))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("url",e.url)("delete_id",e.delete_id)("delete_desc",e.delete_desc)}}let Ut=(()=>{var i;class r{onSubmit(){this.is_saving=!0,this.http.post("dental/service",this.dentalServiceForm.value).subscribe({next:n=>{this.is_saving=!1,this.loadSelectedConsult.emit(),this.createForm(),this.toastr.success("Successfully "+(this.dentalServiceForm.value.id?"updated":"recorded"),"Dental Service")},error:n=>{this.http.showError(n.error.message,"Dental Service"),this.is_saving=!1}})}createForm(){this.dentalServiceForm=this.formBuilder.group({id:[""],consult_id:[this.selected_visit.id,[s.kI.required]],patient_id:[this.selected_visit.patient.id,[s.kI.required]],service_date:["",[s.kI.required]],service_id:["",[s.kI.required]]})}toggleModal(n,o){o&&(this.delete_id=o.id),this.modals[n]=!this.modals[n],!1===this.modals[n]&&this.loadSelectedConsult.emit()}loadLibraries(){this.http.get("libraries/dental-service").subscribe({next:n=>{this.service_list=n.data,this.createForm()},error:n=>{this.http.showError(n.error.message,"Dental Services")}})}constructor(n,o,l){this.http=n,this.toastr=o,this.formBuilder=l,this.loadSelectedConsult=new t.vpe,this.faCircleNotch=c.IJ7,this.faPlus=c.r8p,this.faTrash=c.$aW,this.is_saving=!1,this.modals=[],this.url="dental/service/",this.delete_desc="Dental Service",this.dentalServiceForm=new s.cw({id:new s.NI(null),consult_id:new s.NI(null),patient_id:new s.NI(null),service_date:new s.NI(null),service_id:new s.NI(null)}),this.service_list=[]}ngOnInit(){this.loadLibraries()}}return(i=r).\u0275fac=function(n){return new(n||i)(t.Y36(h.O),t.Y36(f._W),t.Y36(s.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-services"]],inputs:{selected_visit:"selected_visit"},outputs:{loadSelectedConsult:"loadSelectedConsult"},decls:34,vars:8,consts:[[1,"mt-5","border","border-solid","border-gray-200","rounded-lg"],[1,"bg-blue-500","w-full","text-white","p-3","rounded-t-lg","justify-between","flex"],[1,"flex","flex-col","justify-center"],[3,"formGroup","submit"],[1,"grid","grid-cols-5","m-3","p-3","gap-x-3","border","border-slate-300","shadow-md","rounded-md","bg-slate-100"],[1,"col-span-2"],["for","service_date"],["id","service_date","type","date","formControlName","service_date","placeholder","Service date",1,"input"],[1,"col-span-3"],["for","service_id"],["id","service_id","type","text","formControlName","service_id","placeholder","service",1,"input"],[3,"value",4,"ngFor","ngForOf"],[1,"col-span-5","flex","justify-end","mt-3"],["type","submit",1,"btn-save","text-xs",3,"disabled"],[1,"mr-2",3,"icon","spin"],[1,"table-auto","w-11/12","text-center","m-5","mx-auto","border","border-slate-300","rounded-lg","shadow-md"],[1,"border-b"],[1,"px-3"],[4,"ngFor","ngForOf"],[3,"url","delete_id","delete_desc","toggleModal",4,"ngIf"],[3,"value"],[4,"ngIf"],["type","button",1,"text-red-500",3,"click"],[3,"icon"],[3,"url","delete_id","delete_desc","toggleModal"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span"),t._uU(3,"Dental Services"),t.qZA()(),t.TgZ(4,"div",2)(5,"form",3),t.NdJ("submit",function(){return o.onSubmit()}),t.TgZ(6,"fieldset",4)(7,"legend"),t._uU(8,"New service detail"),t.qZA(),t.TgZ(9,"div",5)(10,"label",6),t._uU(11,"Service Date"),t.qZA(),t._UZ(12,"input",7),t.qZA(),t.TgZ(13,"div",8)(14,"label",9),t._uU(15,"Service done"),t.qZA(),t.TgZ(16,"select",10),t.YNc(17,Nt,2,2,"option",11),t.qZA()(),t.TgZ(18,"div",12)(19,"button",13),t._UZ(20,"fa-icon",14),t._uU(21),t.qZA()()()(),t.TgZ(22,"table",15)(23,"thead",16)(24,"tr")(25,"th",17),t._uU(26,"Dental Service"),t.qZA(),t.TgZ(27,"th",17),t._uU(28,"Date of Service"),t.qZA(),t.TgZ(29,"th",17),t._uU(30,"Action"),t.qZA()()(),t.TgZ(31,"tbody"),t.YNc(32,Jt,10,7,"tr",18),t.qZA()()()(),t.YNc(33,St,1,3,"app-delete-item",19)),2&n&&(t.xp6(5),t.Q6J("formGroup",o.dentalServiceForm),t.xp6(12),t.Q6J("ngForOf",o.service_list),t.xp6(2),t.Q6J("disabled",o.dentalServiceForm.invalid||o.is_saving),t.xp6(1),t.Q6J("icon",o.is_saving?o.faCircleNotch:o.faPlus)("spin",o.is_saving),t.xp6(1),t.hij(" ",o.is_saving?"Saving":"Add"," "),t.xp6(11),t.Q6J("ngForOf",null==o.selected_visit?null:o.selected_visit.dentalService),t.xp6(1),t.Q6J("ngIf",o.modals["delete-item"]))},dependencies:[a.sg,a.O5,g.BN,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.sg,s.u,T.N,a.uU]}),r})();function It(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"date"),t.qZA(),t.TgZ(9,"td")(10,"button",20),t.NdJ("click",function(){const l=t.CHM(e).$implicit,p=t.oxw();return t.KtG(p.toggleModal("delete-item",l))}),t._UZ(11,"fa-icon",21),t.qZA()()()}if(2&i){const e=r.$implicit,n=t.oxw();t.xp6(2),t.Oqu(e.cause),t.xp6(2),t.Oqu(t.xi3(5,4,e.admission_date,"MM/dd/yyyy")),t.xp6(3),t.Oqu(t.xi3(8,7,e.discharge_date,"MM/dd/yyyy")),t.xp6(4),t.Q6J("icon",n.faTrash)}}function Mt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"app-delete-item",22),t.NdJ("toggleModal",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.toggleModal(o))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("url",e.url)("delete_id",e.delete_id)("delete_desc",e.delete_desc)}}let Ht=(()=>{var i;class r{onSubmit(){this.is_saving=!0,this.http.post("patient-hospitalizaion-history/history",this.hospitalizationHistoryForm.value).subscribe({next:n=>{this.is_saving=!1,this.loadSelectedConsult.emit(),this.createForm(),this.toastr.success("Successfully "+(this.hospitalizationHistoryForm.value.id?"updated":"recorded"),"Hospitalization History")},error:n=>{this.http.showError(n.error.message,"Hospitalization History"),this.is_saving=!1}})}toggleModal(n,o){o&&(this.delete_id=o.id),this.modals[n]=!this.modals[n],!1===this.modals[n]&&this.loadSelectedConsult.emit()}createForm(){this.hospitalizationHistoryForm=this.formBuilder.nonNullable.group({id:[""],patient_id:[this.selected_visit.patient.id,[s.kI.required]],admission_date:["",[s.kI.required]],discharge_date:["",[s.kI.required]],cause:["",[s.kI.required,s.kI.minLength(3)]]})}constructor(n,o,l){this.http=n,this.toastr=o,this.formBuilder=l,this.loadSelectedConsult=new t.vpe,this.faPlus=c.r8p,this.faCircleNotch=c.IJ7,this.faSave=b.r6l,this.faTrash=c.$aW,this.modals=[],this.is_saving=!1,this.hospitalizationHistoryForm=new s.cw({id:new s.NI(null),patient_id:new s.NI(null),admission_date:new s.NI(null),discharge_date:new s.NI(null),cause:new s.NI(null)}),this.url="patient-hospitalizaion-history/history/",this.delete_desc="Hospitalization history"}ngOnInit(){this.createForm()}}return(i=r).\u0275fac=function(n){return new(n||i)(t.Y36(h.O),t.Y36(f._W),t.Y36(s.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-hospitalization-history"]],inputs:{selected_visit:"selected_visit"},outputs:{loadSelectedConsult:"loadSelectedConsult"},decls:39,vars:7,consts:[[1,"mt-5","border","border-solid","border-gray-200","rounded-lg"],[1,"bg-blue-500","w-full","text-white","p-3","rounded-t-lg","justify-between","flex"],[1,"flex","flex-col","justify-center"],[3,"formGroup","submit"],[1,"grid","grid-cols-2","m-3","p-3","gap-x-3","border","border-slate-300","shadow-md","rounded-md","bg-slate-100"],["for","admission_date"],["id","admission_date","type","date","formControlName","admission_date","placeholder","admission date",1,"input"],["for","discharge_date"],["id","discharge_date","type","date","formControlName","discharge_date","placeholder","discharge date",1,"input"],[1,"col-span-2"],["for","cause"],["id","cause","type","text","formControlName","cause","placeholder","Cause",1,"input"],[1,"col-span-2","flex","justify-end","mt-3"],["type","submit",1,"btn-save","text-xs",3,"disabled"],[1,"mr-2",3,"icon","spin"],[1,"table-auto","w-11/12","text-center","m-5","mx-auto","border","border-slate-300","rounded-lg","shadow-md"],[1,"border-b"],[1,"px-3"],[4,"ngFor","ngForOf"],[3,"url","delete_id","delete_desc","toggleModal",4,"ngIf"],["type","button",1,"text-red-500",3,"click"],[3,"icon"],[3,"url","delete_id","delete_desc","toggleModal"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span"),t._uU(3,"Hospitalization History"),t.qZA()(),t.TgZ(4,"div",2)(5,"form",3),t.NdJ("submit",function(){return o.onSubmit()}),t.TgZ(6,"fieldset",4)(7,"legend"),t._uU(8,"Hopitalization Details"),t.qZA(),t.TgZ(9,"div")(10,"label",5),t._uU(11,"Admission Date"),t.qZA(),t._UZ(12,"input",6),t.qZA(),t.TgZ(13,"div")(14,"label",7),t._uU(15,"Discharge Date"),t.qZA(),t._UZ(16,"input",8),t.qZA(),t.TgZ(17,"div",9)(18,"label",10),t._uU(19,"Cause of hospitalization"),t.qZA(),t._UZ(20,"input",11),t.qZA(),t.TgZ(21,"div",12)(22,"button",13),t._UZ(23,"fa-icon",14),t._uU(24),t.qZA()()()(),t.TgZ(25,"table",15)(26,"thead",16)(27,"tr")(28,"th",17),t._uU(29,"Cause of hospitalization"),t.qZA(),t.TgZ(30,"th",17),t._uU(31,"Admission date"),t.qZA(),t.TgZ(32,"th",17),t._uU(33,"Discharge date"),t.qZA(),t.TgZ(34,"th",17),t._uU(35,"Action"),t.qZA()()(),t.TgZ(36,"tbody"),t.YNc(37,It,12,10,"tr",18),t.qZA()()()(),t.YNc(38,Mt,1,3,"app-delete-item",19)),2&n&&(t.xp6(5),t.Q6J("formGroup",o.hospitalizationHistoryForm),t.xp6(17),t.Q6J("disabled",o.hospitalizationHistoryForm.invalid||o.is_saving),t.xp6(1),t.Q6J("icon",o.is_saving?o.faCircleNotch:o.faPlus)("spin",o.is_saving),t.xp6(1),t.hij(" ",o.is_saving?"Saving":"Add"," "),t.xp6(13),t.Q6J("ngForOf",null==o.selected_visit?null:o.selected_visit.dentalHospitalizationHistory),t.xp6(1),t.Q6J("ngIf",o.modals["delete-item"]))},dependencies:[a.sg,a.O5,g.BN,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,T.N,a.uU]}),r})();function Ft(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td")(7,"button",19),t.NdJ("click",function(){const l=t.CHM(e).$implicit,p=t.oxw();return t.KtG(p.toggleModal("delete-item",l))}),t._UZ(8,"fa-icon",20),t.qZA()()()}if(2&i){const e=r.$implicit,n=t.oxw();t.xp6(2),t.Oqu(e.operation),t.xp6(2),t.Oqu(t.xi3(5,3,e.operation_date,"MM/dd/yyyy")),t.xp6(4),t.Q6J("icon",n.faTrash)}}function kt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"app-delete-item",21),t.NdJ("toggleModal",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.toggleModal(o))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("url",e.url)("delete_id",e.delete_id)("delete_desc",e.delete_desc)}}let Ot=(()=>{var i;class r{onSubmit(){this.is_saving=!0,this.http.post("patient-surgical-history/history",this.surgicalHistoryForm.value).subscribe({next:n=>{this.is_saving=!1,this.loadSelectedConsult.emit(),this.createForm(),this.toastr.success("Successfully "+(this.surgicalHistoryForm.value.id?"updated":"recorded"),"Surgical History")},error:n=>{this.http.showError(n.error.message,"Surgical History"),this.is_saving=!1}})}get f(){return this.surgicalHistoryForm.controls}toggleModal(n,o){o&&(this.delete_id=o.id),this.modals[n]=!this.modals[n],!1===this.modals[n]&&this.loadSelectedConsult.emit()}createForm(){this.surgicalHistoryForm=this.formBuilder.nonNullable.group({id:[""],patient_id:[this.selected_visit.patient.id,[s.kI.required,s.kI.minLength(2)]],operation_date:["",[s.kI.required,s.kI.minLength(2)]],operation:["",[s.kI.required,s.kI.minLength(2)]]})}constructor(n,o,l){this.http=n,this.toastr=o,this.formBuilder=l,this.loadSelectedConsult=new t.vpe,this.faEdit=b.Xcf,this.faPlus=c.r8p,this.faTrash=c.$aW,this.faCircleNotch=c.IJ7,this.modals=[],this.is_saving=!1,this.surgicalHistoryForm=new s.cw({id:new s.NI(null),patient_id:new s.NI(null),operation_date:new s.NI(null),operation:new s.NI(null)}),this.url="patient-surgical-history/history/",this.delete_desc="Surgical history"}ngOnInit(){this.createForm()}}return(i=r).\u0275fac=function(n){return new(n||i)(t.Y36(h.O),t.Y36(f._W),t.Y36(s.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-surgical-history"]],inputs:{selected_visit:"selected_visit"},outputs:{loadSelectedConsult:"loadSelectedConsult"},decls:33,vars:7,consts:[[1,"my-5","border","border-solid","border-gray-200","rounded-lg"],[1,"bg-blue-500","w-full","text-white","p-3","rounded-t-lg","justify-between","flex"],[1,"flex","flex-col","justify-center"],[3,"formGroup","submit"],[1,"grid","grid-cols-5","m-3","p-3","gap-x-3","border","border-slate-300","shadow-md","rounded-md","bg-slate-100"],[1,"col-span-2"],["for","operation_date"],["id","operation_date","type","date","formControlName","operation_date","placeholder","admission date",1,"input"],[1,"col-span-3"],["for","operation"],["id","operation","type","text","formControlName","operation","placeholder","Operation",1,"input"],[1,"col-span-5","flex","justify-end","mt-3"],["type","submit",1,"btn-save","text-xs",3,"disabled"],[1,"mr-2",3,"icon","spin"],[1,"table-auto","w-11/12","text-center","m-5","mx-auto","border","border-slate-300","rounded-lg","shadow-md"],[1,"border-b"],[1,"px-3"],[4,"ngFor","ngForOf"],[3,"url","delete_id","delete_desc","toggleModal",4,"ngIf"],["type","button",1,"text-red-500",3,"click"],[3,"icon"],[3,"url","delete_id","delete_desc","toggleModal"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span"),t._uU(3,"Surgical History"),t.qZA()(),t.TgZ(4,"div",2)(5,"form",3),t.NdJ("submit",function(){return o.onSubmit()}),t.TgZ(6,"fieldset",4)(7,"legend"),t._uU(8,"Surgery Details"),t.qZA(),t.TgZ(9,"div",5)(10,"label",6),t._uU(11,"Date of Operation"),t.qZA(),t._UZ(12,"input",7),t.qZA(),t.TgZ(13,"div",8)(14,"label",9),t._uU(15,"Operation"),t.qZA(),t._UZ(16,"input",10),t.qZA(),t.TgZ(17,"div",11)(18,"button",12),t._UZ(19,"fa-icon",13),t._uU(20),t.qZA()()()(),t.TgZ(21,"table",14)(22,"thead",15)(23,"tr")(24,"th",16),t._uU(25,"Operation Done"),t.qZA(),t.TgZ(26,"th",16),t._uU(27,"Operation Date"),t.qZA(),t.TgZ(28,"th",16),t._uU(29,"Action"),t.qZA()()(),t.TgZ(30,"tbody"),t.YNc(31,Ft,9,6,"tr",17),t.qZA()()()(),t.YNc(32,kt,1,3,"app-delete-item",18)),2&n&&(t.xp6(5),t.Q6J("formGroup",o.surgicalHistoryForm),t.xp6(13),t.Q6J("disabled",o.surgicalHistoryForm.invalid||o.is_saving),t.xp6(1),t.Q6J("icon",o.is_saving?o.faCircleNotch:o.faPlus)("spin",o.is_saving),t.xp6(1),t.hij(" ",o.is_saving?"Saving":"Add"," "),t.xp6(11),t.Q6J("ngForOf",null==o.selected_visit?null:o.selected_visit.dentalSurgicalHistory),t.xp6(1),t.Q6J("ngIf",o.modals["delete-item"]))},dependencies:[a.sg,a.O5,g.BN,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,T.N,a.uU]}),r})();function Dt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",2),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.switchPage(1))}),t._uU(1," VISIT DETAILS "),t.qZA()}if(2&i){const e=t.oxw();t.Tol(2===e.pages?"tabs-main-true rounded-t-md":"tabs-main-false")}}function Qt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.toggleModal("end_visit"))}),t._UZ(1,"fa-icon",12),t._uU(2," End Visit "),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faDoorClosed)}}function Et(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"nav",13)(1,"div",14)(2,"button",15),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.switchTab(1))}),t._uU(3," COMPLAINTS "),t.qZA(),t.TgZ(4,"button",15),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.switchTab(2))}),t._uU(5," HISTORY "),t.qZA(),t.TgZ(6,"button",15),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.switchTab(3))}),t._uU(7," TOOTH CONDITION & SERVICES "),t.qZA(),t.TgZ(8,"button",15),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.switchTab(4))}),t._uU(9," DIAGNOSIS & TREATMENT "),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(2),t.Tol(1===e.module?"tabs-main-true":"tabs-main-false"),t.xp6(2),t.Tol(2===e.module?"tabs-main-true":"tabs-main-false"),t.xp6(2),t.Tol(3===e.module?"tabs-main-true":"tabs-main-false"),t.xp6(2),t.Tol(4===e.module?"tabs-main-true":"tabs-main-false")}}function Yt(i,r){1&i&&(t.TgZ(0,"div",20),t._uU(1," There is an ongoing TB treatment for this patient on another facility. You are not allowed to create a new treatment or view previous treatment from other facilities. "),t.qZA())}function jt(i,r){if(1&i&&(t.TgZ(0,"div",21)(1,"div",22),t._UZ(2,"fa-icon",23),t.qZA(),t.TgZ(3,"div",24),t._uU(4,"Fetching history..."),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(2),t.Q6J("icon",e.faCircleNotch)}}function Gt(i,r){1&i&&(t.TgZ(0,"td",33)(1,"div",34),t._uU(2," No records to show... "),t.qZA()())}function Kt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(),l=o.$implicit,p=o.index,x=t.oxw(3);return t.KtG(x.switchPage(2,l,p))}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.consult_done?"View":"Open"," ")}}function Lt(i,r){if(1&i&&(t.TgZ(0,"tr",29),t.YNc(1,Gt,3,0,"td",30),t.TgZ(2,"td",31),t._uU(3),t.ALo(4,"date"),t.qZA(),t.TgZ(5,"td",31),t._uU(6),t.qZA(),t.TgZ(7,"td",31),t.YNc(8,Kt,2,1,"button",32),t.qZA()()),2&i){const e=r.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("ngIf",!n.consult_details),t.xp6(2),t.hij(" ",t.Dn7(4,4,e.consult_date,"MM/dd/yyyy","Asia/Manila")," "),t.xp6(3),t.hij(" ",e.consult_done?"Done":"Ongoing"," "),t.xp6(2),t.Q6J("ngIf",n.user_facility===e.facility.code)}}function Pt(i,r){if(1&i&&(t.TgZ(0,"table",25)(1,"thead",26)(2,"tr")(3,"th",27),t._uU(4,"Consult Date"),t.qZA(),t.TgZ(5,"th",27),t._uU(6,"Status"),t.qZA(),t.TgZ(7,"th",27),t._uU(8,"Action"),t.qZA()()(),t.TgZ(9,"tbody"),t.YNc(10,Lt,9,8,"tr",28),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(10),t.Q6J("ngForOf",e.consult_details)}}function zt(i,r){if(1&i&&(t.TgZ(0,"div",16),t.YNc(1,Yt,2,0,"div",17),t.YNc(2,jt,5,1,"div",18),t.YNc(3,Pt,11,1,"table",19),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.selected_dental_consult&&(null==e.selected_dental_consult?null:e.selected_dental_consult.facility_code)!==e.user_facility),t.xp6(1),t.Q6J("ngIf",e.fetching_history),t.xp6(1),t.Q6J("ngIf",!e.fetching_history&&e.patient_dental_history)}}function $t(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"app-pregnant-tag",40),t.NdJ("loadConsult",function(o){t.CHM(e);const l=t.oxw(2);return t.KtG(l.loadSelectedConsult(o))}),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("consult_details",e.selected_visit)("have_complaint",e.have_complaint)("allowed_to_edit",e.allowed_to_edit)}}function Bt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",36),t.YNc(1,$t,1,3,"app-pregnant-tag",37),t.TgZ(2,"app-complaint-history",38),t.NdJ("loadConsult",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.loadSelectedConsult(o))}),t.qZA(),t._UZ(3,"app-consult-history",39),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf","F"===e.selected_visit.patient.gender),t.xp6(1),t.Q6J("toggle_content",e.toggle_content)("consult_details",e.selected_visit)("have_complaint",e.have_complaint)("allowed_to_edit",e.allowed_to_edit),t.xp6(1),t.Q6J("pt_group","dn")}}function Rt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"app-history",41),t.NdJ("loadSelectedConsult",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.loadSelectedConsult(o))}),t.qZA(),t.TgZ(2,"app-hospitalization-history",41),t.NdJ("loadSelectedConsult",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.loadSelectedConsult(o))}),t.qZA(),t.TgZ(3,"app-surgical-history",41),t.NdJ("loadSelectedConsult",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.loadSelectedConsult(o))}),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("selected_visit",e.selected_visit),t.xp6(1),t.Q6J("selected_visit",e.selected_visit),t.xp6(1),t.Q6J("selected_visit",e.selected_visit)}}function Wt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"app-condition",41),t.NdJ("loadSelectedConsult",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.loadSelectedConsult(o))}),t.qZA(),t.TgZ(2,"app-services",41),t.NdJ("loadSelectedConsult",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.loadSelectedConsult(o))}),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("selected_visit",e.selected_visit),t.xp6(1),t.Q6J("selected_visit",e.selected_visit)}}function Vt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"app-final-dx",38),t.NdJ("loadConsult",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.loadSelectedConsult(o))}),t.qZA(),t.TgZ(2,"app-prescription",42),t.NdJ("loadConsult",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.loadSelectedConsult(o))}),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("toggle_content",e.toggle_content)("consult_details",e.selected_visit)("have_complaint",e.have_complaint)("allowed_to_edit",e.allowed_to_edit),t.xp6(1),t.Q6J("toggle_content",e.toggle_content)("consult_details",e.selected_visit)("have_complaint",e.have_complaint)("allowed_to_edit",e.allowed_to_edit)("user_id",e.user_id)}}function Xt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"app-end-visit",43),t.NdJ("toggleModal",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.toggleModal(o))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("consult_id",null==e.selected_visit?null:e.selected_visit.id)("consult_date",null==e.selected_visit?null:e.selected_visit.consult_date)("patient_id",null==e.selected_visit?null:e.selected_visit.patient.id)("pt_group","tb")}}const te=[{path:"",component:(()=>{var i;class r{loadSelectedConsult(){this.http.get("consultation/records",{params:{id:this.selected_visit.id,pt_group:"dn",disable_filter:1}}).subscribe({next:o=>{this.consult_details[this.item_index]=o.data[0],this.selected_visit=o.data[0]},error:o=>{this.http.showError(o.error.message,"Dental Consult")}})}loadConsult(){let o={pt_group:"dn",disable_filter:1,patient_id:this.route.snapshot.paramMap.get("id"),sort:"-consult_date"};this.http.get("consultation/records",{params:o}).subscribe({next:l=>{this.consult_details=l.data},error:l=>{this.http.showError(l.error.message,"Dental Consult")}})}toggleModal(n){this.modals[n]=!this.modals[n]}switchPage(n,o,l){2===n?(this.item_index=l,this.router.navigate(["/patient/dn",{id:o.patient.id,consult_id:o.id}])):this.module=1,this.pages=n,this.selected_visit=o||null}switchTab(n){this.module=n}constructor(n,o,l){this.http=n,this.router=o,this.route=l,this.selected_visit=null,this.pages=1,this.module=1,this.faDoorClosed=c.TH0,this.faCircleNotch=c.IJ7,this.patient_dental_history=[],this.enable_edit=!1,this.allowed_to_edit=!0,this.have_complaint=!1,this.toggle_content=!0,this.modals=[],this.item_index=null}ngOnInit(){this.user_id=this.http.getUserID(),this.module=1,this.loadConsult(),this.user_facility=this.http.getUserFacility()}}return(i=r).\u0275fac=function(n){return new(n||i)(t.Y36(h.O),t.Y36(d.F0),t.Y36(d.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-dental"]],decls:14,vars:11,consts:[[1,"flex"],[1,"mt-4","flex","flex-row","border-b","border-slate-300","text-xs"],[1,"tabs-main","w-36",3,"click"],["class","tabs-main w-36",3,"class","click",4,"ngIf"],[1,"ml-auto"],["type","button","class","btn-end-visit ml-auto mt-5",3,"click",4,"ngIf"],["class","mt-2 flex justify-between border-b border-slate-300 text-xs",4,"ngIf"],["class","my-5 w-full border border-gray-200 shadow-md rounded-xl",4,"ngIf"],["class","m-3",4,"ngIf"],[4,"ngIf"],[3,"consult_id","consult_date","patient_id","pt_group","toggleModal",4,"ngIf"],["type","button",1,"btn-end-visit","ml-auto","mt-5",3,"click"],[1,"mr-1",3,"icon"],[1,"mt-2","flex","justify-between","border-b","border-slate-300","text-xs"],[1,"flex","flex-row"],[1,"tabs-main","px-3",3,"click"],[1,"my-5","w-full","border","border-gray-200","shadow-md","rounded-xl"],["class","text-orange-800 border border-orange-400 bg-orange-100 rounded-md p-3 mb-2 w-full",4,"ngIf"],["class","flex flex-col",4,"ngIf"],["class","w-full text-sm text-left",4,"ngIf"],[1,"text-orange-800","border","border-orange-400","bg-orange-100","rounded-md","p-3","mb-2","w-full"],[1,"flex","flex-col"],[1,"w-full","flex","justify-center"],["spin","true",1,"pt-10",3,"icon"],[1,"w-full","flex","justify-center","pb-10","font-semibold"],[1,"w-full","text-sm","text-left"],[1,"text-xs","text-white","uppercase","bg-blue-500"],["scope","col",1,"py-3","px-6"],["class","bg-white border-b",4,"ngFor","ngForOf"],[1,"bg-white","border-b"],["colspan","3",4,"ngIf"],[1,"py-4","px-6"],["type","button","class","rounded-md bg-blue-500 text-white py-1 px-2",3,"click",4,"ngIf"],["colspan","3"],[1,"text-center"],["type","button",1,"rounded-md","bg-blue-500","text-white","py-1","px-2",3,"click"],[1,"m-3"],[3,"consult_details","have_complaint","allowed_to_edit","loadConsult",4,"ngIf"],[3,"toggle_content","consult_details","have_complaint","allowed_to_edit","loadConsult"],[3,"pt_group"],[3,"consult_details","have_complaint","allowed_to_edit","loadConsult"],[3,"selected_visit","loadSelectedConsult"],[3,"toggle_content","consult_details","have_complaint","allowed_to_edit","user_id","loadConsult"],[3,"consult_id","consult_date","patient_id","pt_group","toggleModal"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"nav",1)(2,"button",2),t.NdJ("click",function(){return o.switchPage(1)}),t._uU(3," DENTAL VISITS "),t.qZA(),t.YNc(4,Dt,2,2,"button",3),t.qZA(),t.TgZ(5,"div",4),t.YNc(6,Qt,3,1,"button",5),t.qZA()(),t.YNc(7,Et,10,8,"nav",6),t.YNc(8,zt,4,3,"div",7),t.YNc(9,Bt,4,6,"div",8),t.YNc(10,Rt,4,3,"div",9),t.YNc(11,Wt,3,2,"div",9),t.YNc(12,Vt,3,9,"div",9),t.YNc(13,Xt,1,4,"app-end-visit",10)),2&n&&(t.xp6(2),t.Tol(1===o.pages?"tabs-main-true rounded-t-md":"tabs-main-false"),t.xp6(2),t.Q6J("ngIf",o.selected_visit||(null==o.selected_visit||null==o.selected_visit.facility?null:o.selected_visit.facility.code)===o.user_facility),t.xp6(2),t.Q6J("ngIf",o.selected_visit&&!(null!=o.selected_visit&&o.selected_visit.consult_done)),t.xp6(1),t.Q6J("ngIf",2===o.pages),t.xp6(1),t.Q6J("ngIf",1===o.pages),t.xp6(1),t.Q6J("ngIf",2===o.pages&&1===o.module),t.xp6(1),t.Q6J("ngIf",2===o.pages&&2===o.module),t.xp6(1),t.Q6J("ngIf",2===o.pages&&3===o.module),t.xp6(1),t.Q6J("ngIf",2===o.pages&&4===o.module),t.xp6(1),t.Q6J("ngIf",o.modals.end_visit))},dependencies:[a.sg,a.O5,g.BN,N,q,J.d,S.w,U.F,I.a,W,At,Ut,Ht,Ot,a.uU]}),r})()}];let ee=(()=>{var i;class r{}return(i=r).\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[d.Bz.forChild(te),d.Bz]}),r})(),oe=(()=>{var i;class r{}return(i=r).\u0275fac=function(n){return new(n||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-general-survey"]],standalone:!0,features:[t.jDz],decls:2,vars:0,template:function(n,o){1&n&&(t.TgZ(0,"p"),t._uU(1,"general-survey works!"),t.qZA())},dependencies:[a.ez]}),r})();var ie=_(8549);let ne=(()=>{var i;class r{}return(i=r).\u0275fac=function(n){return new(n||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-management"]],standalone:!0,features:[t.jDz],decls:2,vars:0,template:function(n,o){1&n&&(t.TgZ(0,"p"),t._uU(1,"management works!"),t.qZA())},dependencies:[a.ez]}),r})(),se=(()=>{var i;class r{}return(i=r).\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[a.ez,ee,g.uH,s.u5,s.UX,N,q,J.d,S.w,oe,ie.t,ne,T.N,U.F,I.a]}),r})()},3146:(A,Z,_)=>{_.d(Z,{N:()=>C});var a=_(5879),d=_(6223),c=_(5597),t=_(590),h=_(265),g=_(2425);const b=["confirmCode"];let C=(()=>{var s;class f{generateCode(){this.is_loading=!1,this.confirmation_code=null,this.confirm_code=Math.floor(1e3*Math.random()).toString().padStart(4,"0")}onSubmit(){this.is_loading=!0,this.confirm_code===this.confirmation_code?this.http.delete(this.url,this.delete_id).subscribe({next:()=>{this.is_loading=!1,this.toastr.error("Record was deleted!"),this.closeModal()},error:m=>{console.log(m),this.is_loading=!1,this.generateCode()}}):(this.generateCode(),this.toastr.info("Code mismatch, please try again","Incorrect Code"))}closeModal(){this.toggleModal.emit("delete-item")}constructor(m,u){this.http=m,this.toastr=u,this.toggleModal=new a.vpe,this.faTrash=t.$aW,this.confirm_code="0000",this.is_loading=!1}ngOnChanges(m){this.generateCode()}ngAfterViewInit(){this.inputElement.nativeElement.focus()}}return(s=f).\u0275fac=function(m){return new(m||s)(a.Y36(h.O),a.Y36(g._W))},s.\u0275cmp=a.Xpm({type:s,selectors:[["app-delete-item"]],viewQuery:function(m,u){if(1&m&&a.Gf(b,5),2&m){let v;a.iGM(v=a.CRH())&&(u.inputElement=v.first)}},inputs:{url:"url",delete_id:"delete_id",delete_desc:"delete_desc"},outputs:{toggleModal:"toggleModal"},standalone:!0,features:[a.TTD,a.jDz],decls:29,vars:8,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-red-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"flex","item-start","flex-wrap","pb-5"],[1,"grid","grid-cols-3","px-5","py-5","mt-10","mx-10","w-full","bg-red-50","rounded-lg","text-center"],[1,"col-span-3","text-left","mb-2","pb-2","border-b","border-slate-200"],[1,"col-span-1","text-sm","px-5","py-2","mt-2"],[1,"block","mb-3"],[1,"font-bold","text-2xl","select-none"],["for","confirmCode"],["name","confirmCode","type","text",1,"mt-2","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","pl-3","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModel","keyup.enter","ngModelChange"],["confirmCode",""],[1,"col-span-1","mt-11"],["type","button",1,"my-auto","text-white","bg-red-500","enabled:hover:ring-2","enabled:focus:outline-none","enabled:hover:ring-red-300","disabled:bg-gray-300","font-medium","rounded","text-sm","px-6","py-2.5","text-center","transition","duration-150","ease-in-out",3,"disabled","click"],[1,"mx-0","my-0","text-white",3,"icon"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-200","rounded","text-sm","font-medium","my-2","px-6","py-2.5","transition","duration-150","ease-in-out",3,"disabled","click"],[1,"opacity-50","fixed","inset-0","z-[59]","bg-black"]],template:function(m,u){1&m&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),a._uU(5),a.qZA()(),a.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),a._uU(10),a.qZA(),a.TgZ(11,"div",9)(12,"span",10),a._uU(13,"Delete Code"),a.qZA(),a.TgZ(14,"span",11),a._uU(15),a.qZA()(),a.TgZ(16,"div",9)(17,"label",12),a._uU(18,"Enter Code"),a.qZA(),a.TgZ(19,"input",13,14),a.NdJ("keyup.enter",function(){return u.onSubmit()})("ngModelChange",function(w){return u.confirmation_code=w}),a.qZA()(),a.TgZ(21,"div",15)(22,"button",16),a.NdJ("click",function(){return u.onSubmit()}),a._UZ(23,"fa-icon",17),a._uU(24," Delete "),a.qZA()()()()(),a.TgZ(25,"div",18)(26,"button",19),a.NdJ("click",function(){return u.closeModal()}),a._uU(27,"Cancel"),a.qZA()()()()(),a._UZ(28,"div",20)),2&m&&(a.xp6(5),a.AsE(" Delete ",u.delete_desc,": ",u.delete_id," "),a.xp6(5),a.hij(" Your are about to delete a ",u.delete_desc," record for this patient. Please enter the generated delete code in order to proceed. "),a.xp6(5),a.Oqu(u.confirm_code),a.xp6(4),a.Q6J("ngModel",u.confirmation_code),a.xp6(3),a.Q6J("disabled",!u.confirmation_code||u.is_loading),a.xp6(1),a.Q6J("icon",u.faTrash),a.xp6(3),a.Q6J("disabled",u.is_loading))},dependencies:[c.uH,c.BN,d.u5,d.Fj,d.JJ,d.On],changeDetection:0}),f})()},279:(A,Z,_)=>{_.d(Z,{F:()=>C});var a=_(6814),d=_(5879),c=_(6223),t=_(5597),h=_(265),g=_(3602),b=_(2425);let C=(()=>{var s;class f{onSubmit(){let m;this.is_saving=!0,m=this.consult_date&&this.pt_group?{patient_id:this.patient_id,consult_date:this.consult_date,pt_group:this.pt_group,consult_done:!0}:{},this.http.update("consultation/records/",this.consult_id,m).subscribe({next:u=>{this.is_saving=!1,this.toastr.info("Visit was ended"),this.router.navigate(["/patient/itr",{id:this.patient_id}])},error:u=>console.log(u)})}constructor(m,u,v){this.http=m,this.router=u,this.toastr=v,this.toggleModal=new d.vpe,this.is_saving=!1}closeModal(){this.toggleModal.emit("end_visit")}}return(s=f).\u0275fac=function(m){return new(m||s)(d.Y36(h.O),d.Y36(g.F0),d.Y36(b._W))},s.\u0275cmp=d.Xpm({type:s,selectors:[["app-end-visit"]],inputs:{consult_id:"consult_id",consult_date:"consult_date",patient_id:"patient_id",pt_group:"pt_group"},outputs:{toggleModal:"toggleModal"},standalone:!0,features:[d.jDz],decls:20,vars:5,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"h-40"],[1,"flex","item-start","flex-wrap","pb-5"],[1,"grid","grid-cols-3","px-3","py-3","mt-10","mx-10","w-full","rounded-lg","text-center"],[1,"col-span-3","text-left","mb-2","pb-2","border-b","border-slate-200","font-semibold","text-lg"],[1,"col-span-3","text-left","mb-2","pb-2","text-sm"],[1,"flex","justify-end","py-2","px-5","space-x-4","rounded-b"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-300","rounded","text-sm","font-medium","my-2","px-6","py-2.5","transition","duration-150","ease-in-out",3,"click"],["type","button",1,"text-white","bg-rose-500","enabled:hover:ring-2","enabled:focus:outline-none","enabled:hover:ring-rose-300","disabled:opacity-75","font-medium","rounded","text-sm","my-2","px-6","py-2.5","text-center","transition","duration-150","ease-in-out",3,"disabled","click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"]],template:function(m,u){1&m&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),d._uU(5," End Visit "),d.qZA()(),d.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),d._uU(10," Do you really want to end this visit? "),d.qZA(),d.TgZ(11,"div",9),d._uU(12),d.ALo(13,"date"),d.qZA()()()(),d.TgZ(14,"div",10)(15,"button",11),d.NdJ("click",function(){return u.closeModal()}),d._uU(16,"Cancel"),d.qZA(),d.TgZ(17,"button",12),d.NdJ("click",function(){return u.onSubmit()}),d._uU(18,"End Visit"),d.qZA()()()()(),d._UZ(19,"div",13)),2&m&&(d.xp6(12),d.hij(" Visit date & time: ",d.xi3(13,2,u.consult_date,"MM/dd/yyyy hh:mm:ss a")," "),d.xp6(5),d.Q6J("disabled",u.is_saving))},dependencies:[t.uH,c.u5,a.ez,a.uU],changeDetection:0}),f})()}}]);