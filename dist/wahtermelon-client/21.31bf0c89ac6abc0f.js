"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[21],{6021:(st,b,l)=>{l.r(b),l.d(b,{PatientRegistrationModule:()=>f,options:()=>rt});var d=l(6895),x=l(2325),o=l(433),c=l(2687),q=l(3396),C=l(4163),e=l(1571),y=l(4691),h=l(2216),Z=l(7533);function T(i,n){1&i&&(e.TgZ(0,"tr")(1,"th",20),e._uU(2,"No records found."),e.qZA()())}function w(i,n){if(1&i&&(e.TgZ(0,"span",28),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.HOy(" ",t.patient.last_name,", ",t.patient.first_name," ","NA"===t.patient.middle_name?"":t.patient.middle_name," ","NA"===t.patient.suffix_name?"":t.patient.suffix_name," ")}}function J(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"tr",21)(1,"th",22),e._uU(2),e.qZA(),e.TgZ(3,"td",23),e.YNc(4,w,2,4,"span",24),e.qZA(),e.TgZ(5,"td",25)(6,"button",26),e.NdJ("click",function(){const m=e.CHM(t).$implicit,v=e.oxw();return e.KtG(v.selectFolder(m))}),e._UZ(7,"fa-icon",27),e._uU(8," Select Folder "),e.qZA()()()}if(2&i){const t=n.$implicit,r=e.oxw();e.xp6(2),e.HOy(" ",t.address,", ","Brgy. "+t.barangay.name,", ",t.barangay.municipality.name,", ",t.barangay.province.name," "),e.xp6(2),e.Q6J("ngForOf",t.household_member),e.xp6(3),e.Q6J("icon",r.faCheck)}}class g{searchFamily(){console.log("attempt search"),this.http.get("households/household-folders",{params:{"filter[search]":this.search_item,per_page:"all",include:"barangay"}}).subscribe({next:n=>{this.family_list=n.data},error:n=>console.log(n)})}selectFolder(n){this.transaction.emit({type:"select",data:n}),this.closeModal()}closeModal(){this.toggleModal.emit("family-folder-moodal")}createNewFolder(){this.transaction.emit({type:"new"}),this.closeModal()}constructor(n){this.http=n,this.toggleModal=new e.vpe,this.transaction=new e.vpe,this.faSearch=c.wn1,this.faCheck=c.LEp}ngOnInit(){this.last_name&&(this.search_item=this.last_name,this.searchFamily())}}function A(i,n){1&i&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10),e._UZ(3,"div",11),e.TgZ(4,"div",12),e._UZ(5,"div",13)(6,"div",11)(7,"div",13)(8,"div",11)(9,"div",13)(10,"div",11)(11,"div",13)(12,"div",11)(13,"div",13)(14,"div",11)(15,"div",13)(16,"div",11),e.qZA()()()())}function N(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.required_message," ")}}function Q(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Minimum of 2 character. "),e.qZA())}function I(i,n){if(1&i&&(e.TgZ(0,"div",78),e.YNc(1,N,2,1,"div",7),e.YNc(2,Q,2,0,"div",7),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.f.last_name.errors?null:t.f.last_name.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.f.last_name.errors?null:t.f.last_name.errors.minlength)}}function U(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.required_message," ")}}function F(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Minimum of 2 character. "),e.qZA())}function P(i,n){if(1&i&&(e.TgZ(0,"div",78),e.YNc(1,U,2,1,"div",7),e.YNc(2,F,2,0,"div",7),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.f.first_name.errors?null:t.f.first_name.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.f.first_name.errors?null:t.f.first_name.errors.minlength)}}function R(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.required_message," ")}}function Y(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Minimum of 2 character. "),e.qZA())}function M(i,n){if(1&i&&(e.TgZ(0,"div",78),e.YNc(1,R,2,1,"div",7),e.YNc(2,Y,2,0,"div",7),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.f.middle_name.errors?null:t.f.middle_name.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.f.middle_name.errors?null:t.f.middle_name.errors.minlength)}}function k(i,n){if(1&i&&(e.TgZ(0,"option",79),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.suffix_desc)}}function K(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.required_message," ")}}function V(i,n){if(1&i&&(e.TgZ(0,"div",78),e.YNc(1,K,2,1,"div",7),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.f.gender.errors?null:t.f.gender.errors.required)}}function O(i,n){if(1&i&&(e.TgZ(0,"option",79),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.status_desc)}}function j(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.required_message," ")}}function S(i,n){if(1&i&&(e.TgZ(0,"div",78),e.YNc(1,j,2,1,"div",7),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.f.civil_status_code.errors?null:t.f.civil_status_code.errors.required)}}function E(i,n){if(1&i&&(e.TgZ(0,"option",79),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.code)}}function H(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.required_message," ")}}function D(i,n){if(1&i&&(e.TgZ(0,"div",78),e.YNc(1,H,2,1,"div",7),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.f.blood_type_code.errors?null:t.f.blood_type_code.errors.required)}}function $(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.required_message," ")}}function G(i,n){if(1&i&&(e.TgZ(0,"div",78),e.YNc(1,$,2,1,"div",7),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.f.birthdate.errors?null:t.f.birthdate.errors.required)}}function B(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.required_message," ")}}function L(i,n){if(1&i&&(e.TgZ(0,"div",78),e.YNc(1,B,2,1,"div",7),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.f.mobile_number.errors?null:t.f.mobile_number.errors.required)}}function z(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.required_message," ")}}function X(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Minimum of 2 character. "),e.qZA())}function W(i,n){if(1&i&&(e.TgZ(0,"div",78),e.YNc(1,z,2,1,"div",7),e.YNc(2,X,2,0,"div",7),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.f.mothers_name.errors?null:t.f.mothers_name.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.f.mothers_name.errors?null:t.f.mothers_name.errors.minlength)}}function ee(i,n){if(1&i&&(e.TgZ(0,"option",79),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.education_desc)}}function te(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.required_message," ")}}function ie(i,n){if(1&i&&(e.TgZ(0,"div",78),e.YNc(1,te,2,1,"div",7),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.f.education_code.errors?null:t.f.education_code.errors.required)}}function ne(i,n){if(1&i&&(e.TgZ(0,"option",79),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.religion_desc)}}function oe(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.required_message," ")}}function ae(i,n){if(1&i&&(e.TgZ(0,"div",78),e.YNc(1,oe,2,1,"div",7),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.f.religion_code.errors?null:t.f.religion_code.errors.required)}}function re(i,n){if(1&i&&(e.TgZ(0,"option",79),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.occupation_desc)}}function se(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.required_message," ")}}function _e(i,n){if(1&i&&(e.TgZ(0,"div",78),e.YNc(1,se,2,1,"div",7),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.f.occupation_code.errors?null:t.f.occupation_code.errors.required)}}function le(i,n){if(1&i&&(e.TgZ(0,"option",79),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.type_desc)}}function de(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.required_message," ")}}function ce(i,n){if(1&i&&(e.TgZ(0,"div",78),e.YNc(1,de,2,1,"div",7),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.f.pwd_type_code.errors?null:t.f.pwd_type_code.errors.required)}}function me(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.required_message," ")}}function pe(i,n){if(1&i&&(e.TgZ(0,"div",78),e.YNc(1,me,2,1,"div",7),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.f.indegenous_flag.errors?null:t.f.indegenous_flag.errors.required)}}function fe(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",80),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.isDisabled(!!a.f.family.enabled,"edit_folder"))}),e._UZ(1,"fa-icon",67),e._uU(2),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("icon",t.faPenToSquare),e.xp6(1),e.hij(" ",t.f.family.enabled?"Cancel":"Edit"," ")}}function ge(i,n){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.HOy(" ",t.patient.last_name,", ",t.patient.first_name," ","NA"===t.patient.middle_name?"":t.patient.middle_name," ","NA"===t.patient.suffix_name?"":t.patient.suffix_name," ")}}function ue(i,n){if(1&i&&(e.TgZ(0,"div",81)(1,"div",82),e._uU(2),e.qZA(),e.TgZ(3,"div",83),e.YNc(4,ge,2,4,"span",84),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(2),e.hij("Selected Family: ",t.selected_family_folder,""),e.xp6(2),e.Q6J("ngForOf",t.selected_members)}}function ve(i,n){if(1&i&&(e.TgZ(0,"option",79),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.name)}}function xe(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(5);e.xp6(1),e.hij(" ",t.required_message," ")}}function he(i,n){if(1&i&&(e.TgZ(0,"div",78),e.YNc(1,xe,2,1,"div",7),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("ngIf",null==t.f.family.controls.region.errors?null:t.f.family.controls.region.errors.required)}}g.\u0275fac=function(n){return new(n||g)(e.Y36(y.O))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-family-folder-modal"]],inputs:{last_name:"last_name"},outputs:{toggleModal:"toggleModal",transaction:"transaction"},decls:29,vars:4,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-6xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"bg-white","border","border-gray-400","rounded-md"],["type","text","placeholder","Search family",1,"form-input","border-0","text-sm","p-1","m-1","border-r","border-gray-400",3,"ngModel","ngModelChange","keyup.enter"],["type","button",1,"text-blue-500","w-9","h-9",3,"click"],[1,"-ml-1",3,"icon"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400","table-fixed"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6"],["scope","col",1,"py-3","px-6","w-48","text-center"],[4,"ngIf"],["class","bg-white border-b",4,"ngFor","ngForOf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","borde","r-gray-200","dark:border-gray-600"],["type","button",1,"text-white","bg-red-500","hover:ring-2","focus:outline-none","hover:ring-red-300","rounded","text-sm","font-medium","px-6","py-2.5","transition","duration-150","ease-in-out","transform","hover:scale-110",3,"click"],["type","button",1,"text-white","bg-blue-500","hover:ring-2","focus:outline-none","hover:ring-blue-300","font-medium","rounded","text-sm","px-6","py-2.5","text-center","transition","duration-150","ease-in-out","transform","hover:scale-110",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],["colspan","3",1,"italic","text-center"],[1,"bg-white","border-b"],["scope","row",1,"py-4","px-6","font-medium","text-gray-900","align-top"],[1,"py-4","px-6"],["class","block",4,"ngFor","ngForOf"],[1,"py-4","px-6","text-center"],["type","button",1,"bg-green-500","text-white","px-3","py-2","rounded-full",3,"click"],[1,"mx-0","my-0","mr-2",3,"icon"],[1,"block"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5," Search Family Folder "),e.qZA(),e.TgZ(6,"div",5)(7,"input",6),e.NdJ("ngModelChange",function(a){return t.search_item=a})("keyup.enter",function(){return t.searchFamily()}),e.qZA(),e.TgZ(8,"button",7),e.NdJ("click",function(){return t.searchFamily()}),e._UZ(9,"fa-icon",8),e.qZA()()(),e.TgZ(10,"div",9)(11,"table",10)(12,"thead",11)(13,"tr")(14,"th",12),e._uU(15,"Address"),e.qZA(),e.TgZ(16,"th",12),e._uU(17,"Members"),e.qZA(),e.TgZ(18,"th",13),e._uU(19,"Action"),e.qZA()()(),e.TgZ(20,"tbody"),e.YNc(21,T,3,0,"tr",14),e.YNc(22,J,9,6,"tr",15),e.qZA()()(),e.TgZ(23,"div",16)(24,"button",17),e.NdJ("click",function(){return t.closeModal()}),e._uU(25,"Close"),e.qZA(),e.TgZ(26,"button",18),e.NdJ("click",function(){return t.createNewFolder()}),e._uU(27,"New"),e.qZA()()()()(),e._UZ(28,"div",19)),2&n&&(e.xp6(7),e.Q6J("ngModel",t.search_item),e.xp6(2),e.Q6J("icon",t.faSearch),e.xp6(12),e.Q6J("ngIf",0===(null==t.family_list?null:t.family_list.length)),e.xp6(1),e.Q6J("ngForOf",t.family_list))},dependencies:[d.sg,d.O5,o.Fj,o.JJ,o.On,h.BN]});const s=function(i){return{"text-red-500":i}},_=function(i){return{"invalid-input":i}};function be(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",27)(1,"label",85),e._uU(2,"Region"),e.qZA(),e.TgZ(3,"select",86),e.NdJ("change",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.loadDemog("regions",a.patientForm.value.family.region,"provinces"))}),e.YNc(4,ve,2,2,"option",37),e.qZA(),e.YNc(5,he,2,1,"div",30),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.VKq(4,s,t.is_saving&&t.f.family.controls.region.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(6,_,t.is_saving&&t.f.family.controls.region.errors)),e.xp6(1),e.Q6J("ngForOf",t.regions),e.xp6(1),e.Q6J("ngIf",t.is_saving&&t.f.family.controls.region.errors)}}function ye(i,n){if(1&i&&(e.TgZ(0,"option",79),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.name)}}function Ze(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(5);e.xp6(1),e.hij(" ",t.required_message," ")}}function qe(i,n){if(1&i&&(e.TgZ(0,"div",78),e.YNc(1,Ze,2,1,"div",7),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("ngIf",null==t.f.family.controls.province.errors?null:t.f.family.controls.province.errors.required)}}function Ce(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",27)(1,"label",87),e._uU(2,"Province"),e.qZA(),e.TgZ(3,"select",88),e.NdJ("change",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.loadDemog("provinces",a.patientForm.value.family.province,"municipalities"))}),e.YNc(4,ye,2,2,"option",37),e.qZA(),e.YNc(5,qe,2,1,"div",30),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.VKq(4,s,t.is_saving&&t.f.family.controls.province.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(6,_,t.is_saving&&t.f.family.controls.province.errors)),e.xp6(1),e.Q6J("ngForOf",t.provinces),e.xp6(1),e.Q6J("ngIf",t.is_saving&&t.f.family.controls.province.errors)}}function Te(i,n){if(1&i&&(e.TgZ(0,"option",79),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.name)}}function we(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(5);e.xp6(1),e.hij(" ",t.required_message," ")}}function Je(i,n){if(1&i&&(e.TgZ(0,"div",78),e.YNc(1,we,2,1,"div",7),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("ngIf",null==t.f.family.controls.municipality.errors?null:t.f.family.controls.municipality.errors.required)}}function Ae(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",27)(1,"label",89),e._uU(2,"Municipality/City"),e.qZA(),e.TgZ(3,"select",90),e.NdJ("change",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.loadDemog("municipalities",a.patientForm.value.family.municipality,"barangays"))}),e.YNc(4,Te,2,2,"option",37),e.qZA(),e.YNc(5,Je,2,1,"div",30),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.VKq(4,s,t.is_saving&&t.f.family.controls.municipality.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(6,_,t.is_saving&&t.f.family.controls.municipality.errors)),e.xp6(1),e.Q6J("ngForOf",t.municipalities),e.xp6(1),e.Q6J("ngIf",t.is_saving&&t.f.family.controls.municipality.errors)}}function Ne(i,n){if(1&i&&(e.TgZ(0,"option",79),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.code),e.xp6(1),e.Oqu(t.name)}}function Qe(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(5);e.xp6(1),e.hij(" ",t.required_message," ")}}function Ie(i,n){if(1&i&&(e.TgZ(0,"div",78),e.YNc(1,Qe,2,1,"div",7),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("ngIf",null==t.f.family.controls.brgy.errors?null:t.f.family.controls.brgy.errors.required)}}function Ue(i,n){if(1&i&&(e.TgZ(0,"div",27)(1,"label",91),e._uU(2,"Brgy"),e.qZA(),e.TgZ(3,"select",92),e.YNc(4,Ne,2,2,"option",37),e.qZA(),e.YNc(5,Ie,2,1,"div",30),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.VKq(4,s,t.is_saving&&t.f.family.controls.brgy.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(6,_,t.is_saving&&t.f.family.controls.brgy.errors)),e.xp6(1),e.Q6J("ngForOf",t.barangays),e.xp6(1),e.Q6J("ngIf",t.is_saving&&t.f.family.controls.brgy.errors)}}function Fe(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(5);e.xp6(1),e.hij(" ",t.required_message," ")}}function Pe(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Minimum of 2 character. "),e.qZA())}function Re(i,n){if(1&i&&(e.TgZ(0,"div",78),e.YNc(1,Fe,2,1,"div",7),e.YNc(2,Pe,2,0,"div",7),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("ngIf",null==t.f.family.controls.address.errors?null:t.f.family.controls.address.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.f.family.controls.address.errors?null:t.f.family.controls.address.errors.minlength)}}function Ye(i,n){if(1&i&&(e.TgZ(0,"div",27)(1,"label",93),e._uU(2,"Address"),e.qZA(),e._UZ(3,"input",94),e.YNc(4,Re,3,2,"div",30),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.VKq(3,s,t.is_saving&&t.f.family.controls.address.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(5,_,t.is_saving&&t.f.family.controls.address.errors)),e.xp6(1),e.Q6J("ngIf",t.is_saving&&t.f.family.controls.address.errors)}}function Me(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.required_message," ")}}function ke(i,n){if(1&i&&(e.TgZ(0,"div",78),e.YNc(1,Me,2,1,"div",7),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.f.family.controls.is_head.errors?null:t.f.family.controls.is_head.errors.required)}}function Ke(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(5);e.xp6(1),e.hij(" ",t.required_message," ")}}function Ve(i,n){if(1&i&&(e.TgZ(0,"div",78),e.YNc(1,Ke,2,1,"div",7),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("ngIf",null==t.f.family.controls.cct_id.errors?null:t.f.family.controls.cct_id.errors.required)}}function Oe(i,n){if(1&i&&(e.TgZ(0,"div",72)(1,"label",95),e._uU(2,"CCT ID "),e.TgZ(3,"span",96),e._uU(4,"(optional)"),e.qZA()(),e._UZ(5,"input",97),e.YNc(6,Ve,2,1,"div",30),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.VKq(3,s,t.is_saving&&t.f.family.controls.cct_id.errors)),e.xp6(4),e.Q6J("ngClass",e.VKq(5,_,t.is_saving&&t.f.family.controls.cct_id.errors)),e.xp6(1),e.Q6J("ngIf",t.is_saving&&t.f.family.controls.cct_id.errors)}}function je(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(5);e.xp6(1),e.hij(" ",t.required_message," ")}}function Se(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Minimum of 2 character. "),e.qZA())}function Ee(i,n){if(1&i&&(e.TgZ(0,"div",78),e.YNc(1,je,2,1,"div",7),e.YNc(2,Se,2,0,"div",7),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("ngIf",null==t.f.family.controls.cct_date.errors?null:t.f.family.controls.cct_date.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.f.family.controls.cct_date.errors?null:t.f.family.controls.cct_date.errors.minlength)}}function He(i,n){if(1&i&&(e.TgZ(0,"div",27)(1,"label",98),e._uU(2,"CCT Registration date"),e.qZA(),e._UZ(3,"input",99),e.YNc(4,Ee,3,2,"div",30),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.VKq(4,s,t.is_saving&&t.f.family.controls.cct_date.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(6,_,t.is_saving&&t.f.family.controls.cct_date.errors))("required",t.f.family.controls.cct_id.value||""!==t.f.family.controls.cct_id.value),e.xp6(1),e.Q6J("ngIf",t.is_saving&&t.f.family.controls.cct_date.errors)}}function De(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",17)(2,"div",24)(3,"span",25),e._uU(4,"Basic Information"),e.qZA()()(),e.TgZ(5,"div",26)(6,"div",27)(7,"label",28),e._uU(8,"Last name"),e.qZA(),e._UZ(9,"input",29),e.YNc(10,I,3,2,"div",30),e.qZA(),e.TgZ(11,"div",27)(12,"label",31),e._uU(13,"First name"),e.qZA(),e._UZ(14,"input",32),e.YNc(15,P,3,2,"div",30),e.qZA(),e.TgZ(16,"div",27)(17,"label",33),e._uU(18,"Middle name"),e.qZA(),e._UZ(19,"input",34),e.YNc(20,M,3,2,"div",30),e.qZA(),e.TgZ(21,"div",27)(22,"label",35),e._uU(23,"Suffix Name"),e.qZA(),e.TgZ(24,"select",36),e.YNc(25,k,2,2,"option",37),e.qZA()(),e.TgZ(26,"div",27)(27,"label",38),e._uU(28,"Sex"),e.qZA(),e.TgZ(29,"select",39)(30,"option",40),e._uU(31,"Male"),e.qZA(),e.TgZ(32,"option",41),e._uU(33,"Female"),e.qZA(),e.TgZ(34,"option",42),e._uU(35,"Intersex"),e.qZA()(),e.YNc(36,V,2,1,"div",30),e.qZA(),e.TgZ(37,"div",27)(38,"label",43),e._uU(39,"Civil Status"),e.qZA(),e.TgZ(40,"select",44),e.YNc(41,O,2,2,"option",37),e.qZA(),e.YNc(42,S,2,1,"div",30),e.qZA(),e.TgZ(43,"div",27)(44,"label",45),e._uU(45,"Blood Type"),e.qZA(),e.TgZ(46,"select",46),e.YNc(47,E,2,2,"option",37),e.qZA(),e.YNc(48,D,2,1,"div",30),e.qZA(),e.TgZ(49,"div",27)(50,"label",47),e._uU(51,"Birthdate"),e.qZA(),e._UZ(52,"input",48),e.ALo(53,"date"),e.YNc(54,G,2,1,"div",30),e.qZA(),e.TgZ(55,"div",27)(56,"label",49),e._uU(57,"Mobile Number (0912) 354-6789"),e.qZA(),e._UZ(58,"input",50),e.YNc(59,L,2,1,"div",30),e.qZA(),e.TgZ(60,"div",27)(61,"label",51),e._uU(62,"Mothers Maiden Name"),e.qZA(),e._UZ(63,"input",52),e.YNc(64,W,3,2,"div",30),e.qZA(),e.TgZ(65,"div",27)(66,"label",53),e._uU(67,"Education"),e.qZA(),e.TgZ(68,"select",54),e.YNc(69,ee,2,2,"option",37),e.qZA(),e.YNc(70,ie,2,1,"div",30),e.qZA(),e.TgZ(71,"div",27)(72,"label",55),e._uU(73,"Religion"),e.qZA(),e.TgZ(74,"select",56),e.YNc(75,ne,2,2,"option",37),e.qZA(),e.YNc(76,ae,2,1,"div",30),e.qZA(),e.TgZ(77,"div",27)(78,"label",57),e._uU(79,"Occupation"),e.qZA(),e.TgZ(80,"select",58),e.YNc(81,re,2,2,"option",37),e.qZA(),e.YNc(82,_e,2,1,"div",30),e.qZA(),e.TgZ(83,"div",27)(84,"label",59),e._uU(85,"Person with Disabililties"),e.qZA(),e.TgZ(86,"select",60),e.YNc(87,le,2,2,"option",37),e.qZA(),e.YNc(88,ce,2,1,"div",30),e.qZA(),e.TgZ(89,"div",27)(90,"label",61),e._uU(91,"Indigenous People"),e.qZA(),e.TgZ(92,"select",62)(93,"option",21),e._uU(94,"N"),e.qZA(),e.TgZ(95,"option",21),e._uU(96,"Y"),e.qZA()(),e.YNc(97,pe,2,1,"div",30),e.qZA()(),e.TgZ(98,"div",63),e._UZ(99,"div",64),e.TgZ(100,"div",24)(101,"span",65),e._uU(102,"Address Information"),e.qZA(),e.TgZ(103,"button",66),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.toggleModal("family-folder-modal"))}),e._UZ(104,"fa-icon",67),e._uU(105," Search "),e.qZA(),e.YNc(106,fe,3,2,"button",68),e.qZA()(),e.TgZ(107,"div",69),e.YNc(108,ue,5,2,"div",70),e.YNc(109,be,6,8,"div",71),e.YNc(110,Ce,6,8,"div",71),e.YNc(111,Ae,6,8,"div",71),e.YNc(112,Ue,6,8,"div",71),e.YNc(113,Ye,5,7,"div",71),e.TgZ(114,"div",72)(115,"label",73),e._uU(116,"Family Role"),e.qZA(),e.TgZ(117,"select",74)(118,"option",75),e._uU(119,"Member"),e.qZA(),e.TgZ(120,"option",76),e._uU(121,"Head"),e.qZA()(),e.YNc(122,ke,2,1,"div",30),e.qZA(),e.YNc(123,Oe,7,7,"div",77),e.YNc(124,He,5,8,"div",71),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(7),e.Q6J("ngClass",e.VKq(69,s,t.is_saving&&t.f.last_name.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(71,_,t.is_saving&&t.f.last_name.errors)),e.xp6(1),e.Q6J("ngIf",t.is_saving&&t.f.last_name.errors),e.xp6(2),e.Q6J("ngClass",e.VKq(73,s,t.is_saving&&t.f.first_name.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(75,_,t.is_saving&&t.f.first_name.errors)),e.xp6(1),e.Q6J("ngIf",t.is_saving&&t.f.first_name.errors),e.xp6(2),e.Q6J("ngClass",e.VKq(77,s,t.is_saving&&t.f.middle_name.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(79,_,t.is_saving&&t.f.middle_name.errors)),e.xp6(1),e.Q6J("ngIf",t.is_saving&&t.f.middle_name.errors),e.xp6(5),e.Q6J("ngForOf",t.suffix_names),e.xp6(2),e.Q6J("ngClass",e.VKq(81,s,t.is_saving&&t.f.gender.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(83,_,t.is_saving&&t.f.gender.errors)),e.xp6(7),e.Q6J("ngIf",t.is_saving&&t.f.gender.errors),e.xp6(2),e.Q6J("ngClass",e.VKq(85,s,t.is_saving&&t.f.civil_status_code.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(87,_,t.is_saving&&t.f.civil_status_code.errors)),e.xp6(1),e.Q6J("ngForOf",t.civil_statuses),e.xp6(1),e.Q6J("ngIf",t.is_saving&&t.f.civil_status_code.errors),e.xp6(2),e.Q6J("ngClass",e.VKq(89,s,t.is_saving&&t.f.blood_type_code.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(91,_,t.is_saving&&t.f.blood_type_code.errors)),e.xp6(1),e.Q6J("ngForOf",t.blood_types),e.xp6(1),e.Q6J("ngIf",t.is_saving&&t.f.blood_type_code.errors),e.xp6(2),e.Q6J("ngClass",e.VKq(93,s,t.is_saving&&t.f.birthdate.errors)),e.xp6(2),e.s9C("max",e.xi3(53,66,t.date,"yyyy-MM-dd")),e.Q6J("ngClass",e.VKq(95,_,t.is_saving&&t.f.birthdate.errors)),e.xp6(2),e.Q6J("ngIf",t.is_saving&&t.f.birthdate.errors),e.xp6(2),e.Q6J("ngClass",e.VKq(97,s,t.is_saving&&t.f.mobile_number.errors)),e.xp6(2),e.Q6J("showMaskTyped",!0)("ngClass",e.VKq(99,_,t.is_saving&&t.f.mobile_number.errors)),e.xp6(1),e.Q6J("ngIf",t.is_saving&&t.f.mobile_number.errors),e.xp6(2),e.Q6J("ngClass",e.VKq(101,s,t.is_saving&&t.f.mothers_name.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(103,_,t.is_saving&&t.f.mothers_name.errors)),e.xp6(1),e.Q6J("ngIf",t.is_saving&&t.f.mothers_name.errors),e.xp6(2),e.Q6J("ngClass",e.VKq(105,s,t.is_saving&&t.f.education_code.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(107,_,t.is_saving&&t.f.education_code.errors)),e.xp6(1),e.Q6J("ngForOf",t.educations),e.xp6(1),e.Q6J("ngIf",t.is_saving&&t.f.education_code.errors),e.xp6(2),e.Q6J("ngClass",e.VKq(109,s,t.is_saving&&t.f.religion_code.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(111,_,t.is_saving&&t.f.religion_code.errors)),e.xp6(1),e.Q6J("ngForOf",t.religions),e.xp6(1),e.Q6J("ngIf",t.is_saving&&t.f.religion_code.errors),e.xp6(2),e.Q6J("ngClass",e.VKq(113,s,t.is_saving&&t.f.occupation_code.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(115,_,t.is_saving&&t.f.occupation_code.errors)),e.xp6(1),e.Q6J("ngForOf",t.occupations),e.xp6(1),e.Q6J("ngIf",t.is_saving&&t.f.occupation_code.errors),e.xp6(2),e.Q6J("ngClass",e.VKq(117,s,t.is_saving&&t.f.pwd_type_code.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(119,_,t.is_saving&&t.f.pwd_type_code.errors)),e.xp6(1),e.Q6J("ngForOf",t.pwd_types),e.xp6(1),e.Q6J("ngIf",t.is_saving&&t.f.pwd_type_code.errors),e.xp6(2),e.Q6J("ngClass",e.VKq(121,s,t.is_saving&&t.f.indegenous_flag.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(123,_,t.is_saving&&t.f.indegenous_flag.errors)),e.xp6(1),e.Q6J("ngValue",!1),e.xp6(2),e.Q6J("ngValue",!0),e.xp6(2),e.Q6J("ngIf",t.is_saving&&t.f.indegenous_flag.errors),e.xp6(7),e.Q6J("icon",t.faSearch),e.xp6(2),e.Q6J("ngIf",t.show_edit),e.xp6(2),e.Q6J("ngIf",!t.show_demog_input),e.xp6(1),e.Q6J("ngIf",t.show_demog_input),e.xp6(1),e.Q6J("ngIf",t.show_demog_input),e.xp6(1),e.Q6J("ngIf",t.show_demog_input),e.xp6(1),e.Q6J("ngIf",t.show_demog_input),e.xp6(1),e.Q6J("ngIf",t.show_demog_input),e.xp6(2),e.Q6J("ngClass",e.VKq(125,s,t.is_saving&&t.f.family.controls.is_head.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(127,_,t.is_saving&&t.f.family.controls.is_head.errors)),e.xp6(5),e.Q6J("ngIf",t.is_saving&&t.f.family.controls.is_head.errors),e.xp6(1),e.Q6J("ngIf",t.show_demog_input),e.xp6(1),e.Q6J("ngIf",t.show_demog_input&&t.f.family.controls.cct_id.value)}}function $e(i,n){if(1&i&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Oqu(t.value)}}function Ge(i,n){if(1&i&&(e.TgZ(0,"div",100)(1,"div",101)(2,"ul",102),e.YNc(3,$e,2,1,"li",84),e.ALo(4,"keyvalue"),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("ngForOf",e.lcZ(4,1,t.submit_errors))}}function Be(i,n){if(1&i&&e._UZ(0,"fa-icon",107),2&i){const t=e.oxw(3);e.Q6J("icon",t.faSpinner)("spin",!0)}}function Le(i,n){if(1&i&&e._UZ(0,"fa-icon",108),2&i){const t=e.oxw(3);e.Q6J("icon",t.faSave)}}function ze(i,n){if(1&i&&(e.TgZ(0,"div",103)(1,"button",104),e.YNc(2,Be,1,2,"fa-icon",105),e.YNc(3,Le,1,1,"fa-icon",106),e._uU(4),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("disabled",t.loading||t.patientForm.invalid),e.xp6(1),e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("ngIf",!t.loading),e.xp6(1),e.hij(" ",t.loading?"Save"===t.button_function?"Saving":"Updating":t.button_function," ")}}function Xe(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"form",14),e.NdJ("ngSubmit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onSubmit())}),e.TgZ(1,"div",15)(2,"div",16)(3,"div",17)(4,"div",18)(5,"label",19),e._uU(6,"Has the patient signed the consent?"),e.qZA(),e.TgZ(7,"select",20)(8,"option",21),e._uU(9,"N"),e.qZA(),e.TgZ(10,"option",21),e._uU(11,"Y"),e.qZA()()()(),e.YNc(12,De,125,129,"div",7),e.qZA(),e.YNc(13,Ge,5,3,"div",22),e.YNc(14,ze,5,4,"div",23),e.qZA()()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.patientForm),e.xp6(5),e.Q6J("ngClass",e.VKq(8,s,t.is_saving&&t.f.consent_flag.errors)),e.xp6(2),e.Q6J("ngClass",e.VKq(10,_,t.is_saving&&t.f.consent_flag.errors)),e.xp6(1),e.Q6J("ngValue",!1),e.xp6(2),e.Q6J("ngValue",!0),e.xp6(2),e.Q6J("ngIf",!0===t.patientForm.value.consent_flag),e.xp6(1),e.Q6J("ngIf",t.submit_errors),e.xp6(1),e.Q6J("ngIf",!0===t.patientForm.value.consent_flag)}}function We(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",116),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.newPatient())}),e._UZ(1,"fa-icon",108),e._uU(2,"New Patient "),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("icon",t.faFolderPlus)}}function et(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",117),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.proceedItr())}),e._UZ(1,"fa-icon",108),e._uU(2,"Open ITR "),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("icon",t.faClipboard)}}function tt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",116),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.toggleModal("save-modal"))}),e._uU(1," Ok "),e.qZA()}}function it(i,n){if(1&i&&(e.TgZ(0,"div",109)(1,"div",110)(2,"div",111)(3,"div",112)(4,"span"),e._uU(5,"Record was saved/updated succesfully."),e.qZA()(),e.TgZ(6,"div",113),e.YNc(7,We,3,1,"button",114),e.YNc(8,et,3,1,"button",115),e.YNc(9,tt,2,0,"button",114),e.qZA()()()()),2&i){const t=e.oxw();e.Q6J("@myInsertRemoveTrigger",void 0),e.xp6(7),e.Q6J("ngIf",!t.patient_to_update),e.xp6(1),e.Q6J("ngIf",!t.patient_to_update),e.xp6(1),e.Q6J("ngIf",t.patient_to_update)}}function nt(i,n){1&i&&e._UZ(0,"div",118)}function ot(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"app-family-folder-modal",119),e.NdJ("toggleModal",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleModal("family-folder-modal"))})("transaction",function(a){e.CHM(t);const m=e.oxw();return e.KtG(m.transaction(a))}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("last_name",t.patientForm.value.last_name)}}class u{constructor(n,t,r){this.http=n,this.formBuilder=t,this.router=r,this.faSpinner=c.LM3,this.faClipboard=q.Yjj,this.faFolderPlus=c.x58,this.faSave=c.r6l,this.faSearch=c.wn1,this.faPenToSquare=c.Yai,this.required_message="Required field",this.button_function="Save",this.patientForm=new o.cw({last_name:new o.NI(""),first_name:new o.NI(""),middle_name:new o.NI(""),suffix_name:new o.NI(""),birthdate:new o.NI(""),mothers_name:new o.NI(""),gender:new o.NI(""),mobile_number:new o.NI(""),pwd_type_code:new o.NI(""),indegenous_flag:new o.NI(!1),blood_type_code:new o.NI(""),religion_code:new o.NI(""),occupation_code:new o.NI(""),education_code:new o.NI(""),civil_status_code:new o.NI(""),consent_flag:new o.NI(!1),user_id:new o.NI(""),facility_code:new o.NI(""),family:new o.cw({region:new o.NI(""),province:new o.NI(""),municipality:new o.NI(""),brgy:new o.NI(""),address:new o.NI(""),cct_id:new o.NI(""),cct_date:new o.NI(""),is_head:new o.NI("")})}),this.libraries=[{var_name:"blood_types",location:"blood-types"},{var_name:"suffix_names",location:"suffix-names"},{var_name:"occupations",location:"occupations"},{var_name:"civil_statuses",location:"civil-statuses"},{var_name:"educations",location:"education"},{var_name:"religions",location:"religions"},{var_name:"regions",location:"regions"},{var_name:"pwd_types",location:"pwd-types"}],this.showModal=!1,this.is_saving=!1,this.loading=!1,this.familyFolderModal=!1,this.show_form=!1,this.show_demog_input=!0,this.show_edit=!1}get f(){return this.patientForm.controls}onSubmit(){if(this.patientForm.controls.family.disable(),this.is_saving=!0,this.loading=!0,this.patientForm.invalid)this.loading=!1;else{let n;n="Update"===this.button_function?this.http.update("patient/",this.patient_to_update,this.patientForm.value):this.http.post("patient",this.patientForm.value),n.subscribe({next:t=>{this.new_patient_id="Update"===this.button_function?this.patient_to_update:t.data.id,this.saveFolder(this.new_patient_id)},error:t=>{console.log(t),this.loading=!1,this.submit_errors=t.error.errors},complete:()=>{}})}}saveFolder(n){let m,t=this.http.getUserID(),r=this.http.getUserFacility(),a={facility_code:this.show_demog_input?r:this.selected_facility,user_id:t,patient_id:n,address:this.show_demog_input?this.patientForm.controls.family.controls.address.value:this.selected_address,barangay_code:this.show_demog_input?this.patientForm.controls.family.controls.brgy.value:this.selected_barangay_code,cct_date:this.show_demog_input?this.patientForm.controls.family.controls.cct_date.value:this.selected_cct_date,cct_id:this.show_demog_input?this.patientForm.controls.family.controls.cct_id.value:this.selected_cct_id,family_role_code:this.patientForm.controls.family.controls.is_head.value};this.show_demog_input&&!this.selected_family_folder?(a.status="new",m=this.http.post("households/household-folders",a)):m=this.http.update("households/household-folders/",this.selected_family_folder,a),m.subscribe({next:v=>{this.is_saving=!1,this.loading=!1,this.showModal=!0},error:v=>{console.log(v),this.loading=!1,this.submit_errors=v.error.errors}})}transaction(n){this.selected_family_folder=n.data?n.data.id:null,this.selected_barangay_code=n.data?n.data.barangay.code:null,this.selected_address=n.data?n.data.address:null,this.selected_cct_date=n.data?n.data.cct_date:null,this.selected_cct_id=n.data?n.data.cct_id:null,this.selected_facility=n.data?n.data.facility_code:null,this.selected_members=n.data?n.data.household_member:null,"new"===n.type?(this.isDisabled(!1),this.show_edit=!1,this.show_demog_input=!0):(this.show_edit=!1,this.patientForm.controls.family.controls.is_head.enable(),this.show_demog_input=!1)}isDisabled(n,t){n?(this.patientForm.controls.family.disable(),"edit_folder"===t&&(this.selected_family_folder=null,this.patchAddress(this.orig_data.household_folder,this.orig_data.household_member))):this.patientForm.controls.family.enable()}newPatient(){this.patientForm.reset(),this.showModal=!1,this.is_saving=!1}proceedItr(){this.router.navigate(["/patient/itr",{id:this.new_patient_id}])}toggleModal(n){switch(n){case"family-folder-modal":this.familyFolderModal=!this.familyFolderModal;break;case"save-modal":this.showModal=!this.showModal}}loadDemog(n,t,r){"regions"==n?(this.municipalities=null,this.barangays=null):"provinces"==n&&(this.barangays=null),this.http.get("libraries/"+n+"/"+t,{params:{include:r}}).subscribe({next:a=>{this[r]=a.data[r]},error:a=>console.log(a)})}loadLibraries(){this.libraries.forEach(n=>{this.http.get("libraries/"+n.location).subscribe({next:t=>this[n.var_name]=t.data,error:t=>console.log(t),complete:()=>this.show_form=!0})})}loadPatient(n){this.http.get("patient/"+n).subscribe({next:t=>{this.patientForm.patchValue({...t.data}),this.patient_to_update=t.data.id,this.button_function="Update",this.orig_data=t.data,this.patchAddress(this.orig_data.household_folder,this.orig_data.household_member)},error:t=>console.log(t)})}patchAddress(n,t){n&&(this.patientForm.patchValue({family:{address:n.address}}),this.loadDemog("regions",n.barangay.region.code,"provinces"),this.patientForm.patchValue({family:{region:n.barangay.region.code}}),this.loadDemog("provinces",n.barangay.province.code,"municipalities"),this.patientForm.patchValue({family:{province:n.barangay.province.code}}),this.loadDemog("municipalities",n.barangay.municipality.code,"barangays"),this.patientForm.patchValue({family:{municipality:n.barangay.municipality.code}}),this.patientForm.patchValue({family:{brgy:n.barangay.code}}),this.patientForm.patchValue({family:{cct_id:n.cct_id}}),n.cct_id&&this.patientForm.patchValue({family:{cct_date:n.cct_date}}),this.patientForm.patchValue({family:{brgy:n.barangay.code}}),this.patientForm.patchValue({family:{is_head:t.family_role_code}}),this.selected_family_folder=n.id),this.isDisabled(!0)}ngOnInit(){let n=this.http.getUserID(),t=this.http.getUserFacility();this.patientForm=this.formBuilder.nonNullable.group({facility_code:[t],user_id:[n],last_name:["",[o.kI.required,o.kI.minLength(2)]],first_name:["",[o.kI.required,o.kI.minLength(2)]],middle_name:["",[o.kI.required,o.kI.minLength(1)]],suffix_name:["NA"],birthdate:["",o.kI.required],mothers_name:["",[o.kI.required,o.kI.minLength(2)]],gender:["",o.kI.required],mobile_number:["",o.kI.required],pwd_type_code:["NA",o.kI.required],indegenous_flag:[!1],blood_type_code:["NA",o.kI.required],religion_code:["UNKNO",o.kI.required],occupation_code:["UNSP001",o.kI.required],education_code:["6",o.kI.required],civil_status_code:["",o.kI.required],consent_flag:[!1],family:this.formBuilder.group({region:["",o.kI.required],province:["",o.kI.required],municipality:["",o.kI.required],brgy:["",o.kI.required],address:["",[o.kI.required,o.kI.minLength(2)]],cct_id:["",[o.kI.minLength(2)]],cct_date:[""],is_head:[!1,[o.kI.required]]})}),this.date=(new Date).toISOString().slice(0,10),this.loadLibraries(),"/edit-patient"===this.router.url.split(";")[0]?(this.show_edit=!0,this.loadPatient(this.router.url.split("=")[1])):this.isDisabled(!0)}}u.\u0275fac=function(n){return new(n||u)(e.Y36(y.O),e.Y36(o.qu),e.Y36(x.F0))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-patient-registration"]],decls:9,vars:5,consts:[[1,"mt-10","flex","justify-center","w-full"],[1,"w-5/6","bg-white","border","border-solid","border-slate-100","rounded-xl","shadow-md"],[1,"border","border-solid","border-slate-100","rounded-t-xl","bg-blue-500","text-white","text-lg","p-3","font-semibold"],["class","shadow rounded-md p-4 m-5 w-5/6 mx-auto",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],["class","overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none justify-center items-center flex",4,"ngIf"],["class","opacity-25 fixed inset-0 z-40 bg-black",4,"ngIf"],[4,"ngIf"],[1,"shadow","rounded-md","p-4","m-5","w-5/6","mx-auto"],[1,"animate-pulse","flex","space-x-4"],[1,"flex-1","space-y-6","py-1"],[1,"h-2","bg-slate-200","rounded"],[1,"space-y-4"],[1,"h-2","bg-slate-200","rounded","w-1/5"],[3,"formGroup","ngSubmit"],[1,"mx-10","mb-10"],[1,"px-4","py-5","bg-white","sm:p-6"],[1,"grid","grid-cols-8","gap-x-4","mb-3"],[1,"col-span-8","sm:col-span-4","grid","grid-cols-2"],["for","consent_flag",1,"input-label","col-span-1","mt-3",3,"ngClass"],["id","consent_flag","name","consent_flag","formControlName","consent_flag",1,"input","col-span-1",3,"ngClass"],[3,"ngValue"],["class","col-span-8 bg-red-200 rounded border border-red-300 text-red-900 text-sm mb-5",4,"ngIf"],["class","text-right",4,"ngIf"],[1,"col-span-8","font-semibold","text-blue-500"],[1,"-ml-5"],[1,"grid","grid-cols-8","gap-x-4","gap-y-6"],[1,"col-span-6","sm:col-span-2"],["for","last_name",1,"input-label",3,"ngClass"],["type","text","name","last_name","id","last_name","formControlName","last_name","required","",1,"input","capitalize",3,"ngClass"],["class","invalid-alert",4,"ngIf"],["for","first_name",1,"input-label",3,"ngClass"],["type","text","name","first_name","id","first_name","formControlName","first_name",1,"input","capitalize",3,"ngClass"],["for","middle_name",1,"input-label",3,"ngClass"],["type","text","name","middle_name","id","middle_name","formControlName","middle_name",1,"input","capitalize",3,"ngClass"],["for","suffix_name",1,"input-label"],["id","suffix_name","name","suffix_name","formControlName","suffix_name",1,"input"],[3,"value",4,"ngFor","ngForOf"],["for","gender",1,"input-label",3,"ngClass"],["id","gender","name","gender","formControlName","gender",1,"input",3,"ngClass"],["value","M"],["value","F"],["value","I"],["for","civil_status_code",1,"input-label",3,"ngClass"],["id","civil_status_code","name","civil_status_code","formControlName","civil_status_code",1,"input",3,"ngClass"],["for","blood_type_code",1,"input-label",3,"ngClass"],["id","blood_type_code","name","blood_type_code","formControlName","blood_type_code",1,"input",3,"ngClass"],["for","birthdate",1,"input-label",3,"ngClass"],["type","date","name","birthdate","id","birthdate","placeholder","mm/dd/yyyy","formControlName","birthdate",1,"input",3,"max","ngClass"],["for","mobile_number",1,"input-label",3,"ngClass"],["type","text","mask","(9999) 999-9999","name","mobile_number","id","mobile_number","formControlName","mobile_number",1,"input",3,"showMaskTyped","ngClass"],["for","mothers_name",1,"input-label",3,"ngClass"],["type","text","name","mothers_name","id","mothers_name","formControlName","mothers_name",1,"input",3,"ngClass"],["for","education_code",1,"input-label",3,"ngClass"],["id","education_code","name","education_code","formControlName","education_code",1,"input",3,"ngClass"],["for","religion_code",1,"input-label",3,"ngClass"],["id","religion_code","name","religion_code","formControlName","religion_code",1,"input",3,"ngClass"],["for","occupation_code",1,"input-label",3,"ngClass"],["id","occupation_code","name","occupation_code","formControlName","occupation_code",1,"input",3,"ngClass"],["for","pwd_type_code",1,"input-label",3,"ngClass"],["id","pwd_type_code","name","pwd_type_code","formControlName","pwd_type_code",1,"input",3,"ngClass"],["for","indegenous_flag",1,"input-label",3,"ngClass"],["id","indegenous_flag","name","indegenous_flag","formControlName","indegenous_flag",1,"input",3,"ngClass"],[1,"grid","grid-cols-8","gap-x-4","gap-y-4","pt-6"],[1,"col-span-8","border-b-2","border-slate-100"],[1,"-ml-5","mr-5"],["type","button",1,"col-span-8","w-24","rounded-md","text-white","bg-sky-500","hover:bg-sky-600","active:bg-sky-400","focus:bg-sky-600","px-2","py-1","text-sm",3,"click"],[1,"mr-1",3,"icon"],["type","button","class","ml-2 w-24 col-span-8 rounded-md text-white bg-amber-500 hover:bg-amber-600 active:bg-amber-400 focus:bg-amber-600 px-2 py-1 text-sm",3,"click",4,"ngIf"],["formGroupName","family",1,"grid","grid-cols-8","gap-x-4","gap-y-6"],["class","col-span-8 grid grid-cols-8 bg-amber-100 border border-amber-200 rounded-lg px-5 mt-4 text-gray-700",4,"ngIf"],["class","col-span-6 sm:col-span-2",4,"ngIf"],[1,"col-span-8","sm:col-span-2"],["for","is_head",1,"input-label",3,"ngClass"],["id","is_head","name","is_head","formControlName","is_head",1,"input","disabled:bg-gray-300",3,"ngClass"],["value","MEMBER"],["value","HEAD"],["class","col-span-8 sm:col-span-2",4,"ngIf"],[1,"invalid-alert"],[3,"value"],["type","button",1,"ml-2","w-24","col-span-8","rounded-md","text-white","bg-amber-500","hover:bg-amber-600","active:bg-amber-400","focus:bg-amber-600","px-2","py-1","text-sm",3,"click"],[1,"col-span-8","grid","grid-cols-8","bg-amber-100","border","border-amber-200","rounded-lg","px-5","mt-4","text-gray-700"],[1,"col-span-4","mt-2","mb-2"],[1,"col-span-4","mt-2","mb-2","grid","grid-cols-1"],[4,"ngFor","ngForOf"],["for","region",1,"input-label",3,"ngClass"],["id","region","name","region","formControlName","region",1,"input","disabled:bg-gray-300",3,"ngClass","change"],["for","province",1,"input-label",3,"ngClass"],["id","province","name","province","formControlName","province",1,"input","disabled:bg-gray-300",3,"ngClass","change"],["for","muncity",1,"input-label",3,"ngClass"],["id","muncity","name","muncity","formControlName","municipality",1,"input","disabled:bg-gray-300",3,"ngClass","change"],["for","brgy",1,"input-label",3,"ngClass"],["id","brgy","name","brgy","formControlName","brgy",1,"input","disabled:bg-gray-300",3,"ngClass"],["for","address",1,"input-label",3,"ngClass"],["type","text","name","address","id","address","formControlName","address",1,"input","disabled:bg-gray-300",3,"ngClass"],["for","cct_id",1,"input-label",3,"ngClass"],[1,"text-sm"],["type","text","name","cct_id","id","cct_id","formControlName","cct_id",1,"input","disabled:bg-gray-300",3,"ngClass"],["for","cct_date",1,"input-label",3,"ngClass"],["type","date","name","cct_date","id","cct_date","formControlName","cct_date",1,"input","disabled:bg-gray-300",3,"ngClass","required"],[1,"col-span-8","bg-red-200","rounded","border","border-red-300","text-red-900","text-sm","mb-5"],[1,"block","p-3","pl-10"],[1,"list-disc"],[1,"text-right"],["type","submit",1,"btn-save","mr-5","w-48","disabled:bg-gray-400",3,"disabled"],["class","mr-3",3,"icon","spin",4,"ngIf"],["class","mr-3",3,"icon",4,"ngIf"],[1,"mr-3",3,"icon","spin"],[1,"mr-3",3,"icon"],[1,"overflow-x-hidden","overflow-y-auto","fixed","inset-0","z-50","outline-none","focus:outline-none","justify-center","items-center","flex"],[1,"relative","w-auto","my-6","mx-auto","max-w-6xl"],[1,"border-0","rounded-lg","shadow-lg","relative","flex","flex-col","w-full","bg-white","outline-none","focus:outline-none"],[1,"relative","p-6","pb-10","pr-40","flex-auto"],[1,"flex","items-center","justify-end","p-3","rounded-b"],["class","bg-blue-500 text-white active:bg-blue-500 hover:bg-blue-600 text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150","type","button",3,"click",4,"ngIf"],["class","bg-amber-500 text-white active:bg-amber-500 hover:bg-amber-600 text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150","type","button",3,"click",4,"ngIf"],["type","button",1,"bg-blue-500","text-white","active:bg-blue-500","hover:bg-blue-600","text-sm","px-6","py-3","rounded","shadow","hover:shadow-lg","outline-none","focus:outline-none","mr-1","mb-1","ease-linear","transition-all","duration-150",3,"click"],["type","button",1,"bg-amber-500","text-white","active:bg-amber-500","hover:bg-amber-600","text-sm","px-6","py-3","rounded","shadow","hover:shadow-lg","outline-none","focus:outline-none","mr-1","mb-1","ease-linear","transition-all","duration-150",3,"click"],[1,"opacity-25","fixed","inset-0","z-40","bg-black"],[3,"last_name","toggleModal","transaction"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3," Patient Registration "),e.qZA(),e.YNc(4,A,17,0,"div",3),e.YNc(5,Xe,15,12,"form",4),e.qZA()(),e.YNc(6,it,10,4,"div",5),e.YNc(7,nt,1,0,"div",6),e.YNc(8,ot,2,1,"div",7)),2&n&&(e.xp6(4),e.Q6J("ngIf",!t.show_form),e.xp6(1),e.Q6J("ngIf",t.show_form),e.xp6(1),e.Q6J("ngIf",t.showModal),e.xp6(1),e.Q6J("ngIf",t.showModal),e.xp6(1),e.Q6J("ngIf",t.familyFolderModal))},dependencies:[d.mk,d.sg,d.O5,o._Y,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.JL,o.Q7,h.BN,o.sg,o.u,o.x0,Z.Z6,g,d.uU,d.Nd],data:{animation:[C.K]}});const at=[{path:"",component:u}];class p{}p.\u0275fac=function(n){return new(n||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[x.Bz.forChild(at),x.Bz]});const rt=null;class f{}f.\u0275fac=function(n){return new(n||f)},f.\u0275mod=e.oAB({type:f}),f.\u0275inj=e.cJS({providers:[(0,Z.e$)()],imports:[d.ez,p,o.u5,h.uH,o.UX]})}}]);