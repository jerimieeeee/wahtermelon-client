"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[2999],{2999:(K,b,_)=>{_.r(b),_.d(b,{EclaimsModule:()=>z});var p=_(177),g=_(5237),R=_(467),T=_(614),m=_(5383),E=_(2288),y=_(2578),e=_(4438),k=_(3318),x=_(5794),C=_(60),u=_(9417),I=_(8917),N=_(6929);function F(a,l){if(1&a&&(e.j41(0,"option",31),e.EFF(1),e.k0s()),2&a){const t=l.$implicit,i=e.XpG();e.Y8G("value",t)("ngClass",i.toggleColorStatus(t)),e.R7$(),e.JRh(t)}}function A(a,l){if(1&a&&(e.j41(0,"option",32),e.EFF(1),e.nI1(2,"uppercase"),e.k0s()),2&a){const t=l.$implicit;e.Y8G("value",t),e.R7$(),e.JRh(e.bMT(2,2,t))}}function M(a,l){if(1&a&&(e.j41(0,"option",32),e.EFF(1),e.nI1(2,"uppercase"),e.k0s()),2&a){const t=l.$implicit;e.Y8G("value",t),e.R7$(),e.JRh(e.bMT(2,2,t))}}function S(a,l){if(1&a){const t=e.RV6();e.j41(0,"select",33),e.mxI("ngModelChange",function(s){e.eBV(t);const n=e.XpG();return e.DH7(n.code,s)||(n.code=s),e.Njj(s)}),e.j41(1,"option",6),e.EFF(2,"ALL"),e.k0s(),e.DNE(3,M,3,4,"option",10),e.k0s()}if(2&a){const t=e.XpG();e.R50("ngModel",t.code),e.R7$(),e.Y8G("ngValue",null),e.R7$(2),e.Y8G("ngForOf",t.code_list)}}function j(a,l){if(1&a&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.SpI(" Printing ",t.total_print_page>0?t.current_print_page+" of "+t.total_print_page+" pages":""," ")}}function G(a,l){if(1&a&&e.nrm(0,"fa-icon",41),2&a){const t=e.XpG(2);e.Y8G("icon",t.faRotate)}}function Y(a,l){if(1&a){const t=e.RV6();e.j41(0,"div",35)(1,"div",36)(2,"span"),e.EFF(3),e.k0s(),e.j41(4,"span",37),e.EFF(5),e.k0s(),e.j41(6,"span",38),e.EFF(7),e.k0s()(),e.j41(8,"button",39),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.getStatuses())}),e.DNE(9,G,1,1,"fa-icon",40),e.EFF(10),e.k0s()()}if(2&a){const t=e.XpG();e.R7$(3),e.JRh(t.retrieved_claims+"/"+t.claims_count),e.R7$(2),e.SpI("Sucess: ",t.success_count,""),e.R7$(2),e.SpI("Failed: ",t.error_count,""),e.R7$(),e.Y8G("disabled",t.is_refreshing||t.batch_refresh&&t.claims_count!==t.retrieved_claims),e.R7$(),e.Y8G("ngIf",t.is_refreshing||t.batch_refresh&&t.claims_count!==t.retrieved_claims),e.R7$(),e.Lme(" ",t.is_refreshing||t.batch_refresh&&t.claims_count!==t.retrieved_claims?"Checking Claims ":"Check Claims"," (",t.is_refreshing||t.batch_refresh&&t.claims_count!==t.retrieved_claims?t.retrieved_claims+"/"+t.eclaims_list.length:t.eclaims_list.length,") ")}}function L(a,l){if(1&a&&e.nrm(0,"fa-icon",55),2&a){const t=e.XpG().index,i=e.XpG(2);e.Y8G("icon",i.item_status[t].icon)("ngClass","success"===i.item_status[t].status?"text-green-500":"text-red-500")}}function v(a,l){if(1&a&&e.nrm(0,"fa-icon",56),2&a){const t=e.XpG(3);e.Y8G("icon",t.faCircleNotch)}}function D(a,l){if(1&a){const t=e.RV6();e.j41(0,"button",57),e.bIt("click",function(){e.eBV(t);const s=e.XpG().$implicit,n=e.XpG(2);return e.Njj(n.toggleModal("upload-claims",s))}),e.EFF(1),e.k0s()}if(2&a){const t=e.XpG().$implicit,i=e.XpG(2);e.Y8G("disabled",i.is_refreshing||i.batch_refresh&&i.claims_count!==i.retrieved_claims),e.R7$(),e.SpI(" ",t.pReceiptTicketNumber?"Reupload Docs":"Upload Claim"," ")}}function $(a,l){if(1&a){const t=e.RV6();e.j41(0,"button",57),e.bIt("click",function(){e.eBV(t);const s=e.XpG().$implicit,n=e.XpG(2);return e.Njj(n.toggleModal("upload-required-claims",s))}),e.EFF(1," Upload Required Docs "),e.k0s()}if(2&a){const t=e.XpG(3);e.Y8G("disabled",t.is_refreshing||t.batch_refresh&&t.claims_count!==t.retrieved_claims)}}function P(a,l){if(1&a){const t=e.RV6();e.j41(0,"button",58),e.bIt("click",function(){e.eBV(t);const s=e.XpG().$implicit,n=e.XpG(2);return e.Njj(n.checkSeries(s))}),e.EFF(1," Get Series Lhio "),e.k0s()}if(2&a){const t=e.XpG(3);e.Y8G("disabled",t.is_refreshing||t.batch_refresh&&t.claims_count!==t.retrieved_claims)}}function O(a,l){if(1&a){const t=e.RV6();e.j41(0,"button",58),e.bIt("click",function(){e.eBV(t);const s=e.XpG(),n=s.$implicit,o=s.index,r=e.XpG(2);return e.Njj(r.getClaimStatus(n,n.pStatus,o))}),e.EFF(1),e.k0s()}if(2&a){const t=e.XpG().$implicit,i=e.XpG(2);e.Y8G("disabled",i.is_refreshing||i.batch_refresh&&i.claims_count!==i.retrieved_claims),e.R7$(),e.SpI(" Check ","DENIED"===t.pStatus?"Reason":"Status"," ")}}function w(a,l){if(1&a){const t=e.RV6();e.j41(0,"tr",44)(1,"td",36),e.DNE(2,L,1,2,"fa-icon",45)(3,v,1,1,"fa-icon",46),e.EFF(4),e.k0s(),e.j41(5,"td",47),e.EFF(6),e.nI1(7,"uppercase"),e.nrm(8,"br"),e.EFF(9),e.nrm(10,"br"),e.EFF(11),e.nrm(12,"br"),e.EFF(13),e.nrm(14,"br"),e.k0s(),e.j41(15,"td",48),e.EFF(16),e.nrm(17,"br"),e.EFF(18),e.nI1(19,"number"),e.k0s(),e.j41(20,"td",48)(21,"span",49),e.EFF(22),e.k0s()(),e.j41(23,"td",48),e.nrm(24,"span",50)(25,"span",50),e.k0s(),e.j41(26,"td",51)(27,"button",52),e.bIt("click",function(){const s=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.navigateRoute("itr",s))}),e.EFF(28," Open ITR "),e.k0s(),e.DNE(29,D,2,2,"button",53)(30,$,2,1,"button",53)(31,P,2,1,"button",54)(32,O,2,2,"button",54),e.k0s()()}if(2&a){let t,i,s,n;const o=l.$implicit,r=l.index,c=e.XpG(2);e.R7$(2),e.Y8G("ngIf",c.item_status[r]&&c.item_status[r].icon),e.R7$(),e.Y8G("ngIf",c.batch_refresh&&(!c.item_status[r]||c.item_status[r]&&!c.item_status[r].icon)&&(c.checking_index===r||null===c.checking_index)),e.R7$(),e.E5c(" ",o.patient.last_name,", ",o.patient.first_name," ",o.patient.middle_name," "),e.R7$(2),e.E5c(" 1. ",o.caserate.caserate_code," | ",o.caserate.code," (",e.bMT(7,22,o.caserate.program_desc),")"),e.R7$(3),e.SpI(" 2. ",o.pHospitalTransmittalNo," "),e.R7$(2),e.SpI(" 3. ",null!==(t=o.pReceiptTicketNumber)&&void 0!==t?t:"-"," "),e.R7$(2),e.SpI(" 4. ",null!==(i=o.pClaimSeriesLhio)&&void 0!==i?i:"-"," "),e.R7$(3),e.SpI(" 1. ",null!==(s=o.pTransmissionDate)&&void 0!==s?s:"-"," "),e.R7$(2),e.SpI(" 2. ",e.i5U(19,24,o.caserate.caserate_fee,"1.2-2")," "),e.R7$(3),e.Y8G("ngClass",c.toggleColorStatus(o.pStatus)),e.R7$(),e.JRh(null!==(n=o.pStatus)&&void 0!==n?n:"IN QUEUE"),e.R7$(2),e.Y8G("innerHTML",c.parseReason(o.denied_reason),e.npT),e.R7$(),e.Y8G("innerHTML",c.parseReason(o.return_reason),e.npT),e.R7$(2),e.Y8G("disabled",c.is_refreshing||c.batch_refresh&&c.claims_count!==c.retrieved_claims),e.R7$(2),e.Y8G("ngIf","IN PROCESS"===o.pStatus||""===o.pStatus),e.R7$(),e.Y8G("ngIf","RETURN"===o.pStatus),e.R7$(),e.Y8G("ngIf",o.pReceiptTicketNumber&&!o.pClaimSeriesLhio),e.R7$(),e.Y8G("ngIf",o.pClaimSeriesLhio&&!o.denied_reason)}}function V(a,l){1&a&&(e.j41(0,"tr")(1,"td",59),e.EFF(2," No record found "),e.k0s()())}function H(a,l){if(1&a&&(e.j41(0,"tbody",42),e.DNE(1,w,33,27,"tr",43)(2,V,3,0,"tr",28),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.eclaims_list),e.R7$(),e.Y8G("ngIf",0===t.eclaims_list.length)}}function X(a,l){if(1&a&&(e.j41(0,"tbody")(1,"tr")(2,"td",60)(3,"div",61)(4,"div",62),e.nrm(5,"fa-icon",41),e.k0s(),e.j41(6,"div",63),e.EFF(7," Fetching claims... "),e.k0s()()()()()),2&a){const t=e.XpG();e.R7$(5),e.Y8G("icon",t.faCircleNotch)}}function U(a,l){if(1&a){const t=e.RV6();e.j41(0,"div")(1,"div",64)(2,"div",65)(3,"div")(4,"p",66),e.EFF(5," Showing "),e.j41(6,"span",67),e.EFF(7),e.k0s(),e.EFF(8," to "),e.j41(9,"span",67),e.EFF(10),e.k0s(),e.EFF(11," of "),e.j41(12,"span",67),e.EFF(13),e.k0s(),e.EFF(14," results "),e.k0s()(),e.j41(15,"div")(16,"nav",68)(17,"button",69),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.getEclaimsList(1))}),e.nrm(18,"fa-icon",70),e.k0s(),e.j41(19,"button",71),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.getEclaimsList(s.current_page-1))}),e.nrm(20,"fa-icon",70),e.EFF(21,"Previous "),e.k0s(),e.j41(22,"button",71),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.getEclaimsList(s.current_page+1))}),e.EFF(23," Next"),e.nrm(24,"fa-icon",72),e.k0s(),e.j41(25,"button",73),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.getEclaimsList(s.last_page))}),e.nrm(26,"fa-icon",72),e.k0s()()()()()()}if(2&a){const t=e.XpG();e.R7$(7),e.JRh(t.from),e.R7$(3),e.JRh(t.to),e.R7$(3),e.JRh(t.total),e.R7$(4),e.Y8G("disabled",1===t.current_page),e.R7$(),e.Y8G("icon",t.faAnglesLeft),e.R7$(),e.Y8G("disabled",1===t.current_page),e.R7$(),e.Y8G("icon",t.faChevronLeft),e.R7$(2),e.Y8G("disabled",t.current_page===t.last_page),e.R7$(2),e.Y8G("icon",t.faChevronRight),e.R7$(),e.Y8G("disabled",t.current_page===t.last_page),e.R7$(),e.Y8G("icon",t.faAnglesRight)}}function B(a,l){if(1&a){const t=e.RV6();e.j41(0,"app-upload-claims",74),e.bIt("modalToggle",function(s){e.eBV(t);const n=e.XpG();return e.Njj(n.toggleModal(s))}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("patient",t.patient)("program_name",t.program_name)("selected_pHospitalTransmittalNo",t.selected_pHospitalTransmittalNo)("caserate_code",t.selected_caserate_code)("selected_ticket_number",t.selected_ticket_number)}}function q(a,l){if(1&a){const t=e.RV6();e.j41(0,"app-upload-required-claims",75),e.bIt("modalToggle",function(s){e.eBV(t);const n=e.XpG();return e.Njj(n.toggleModal(s))}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("patient",t.patient)("program_name",t.program_name)("selected_pHospitalTransmittalNo",t.selected_pHospitalTransmittalNo)("caserate_code",t.selected_caserate_code)("selected_ticket_number",t.selected_ticket_number)("selected_series_lhio",t.selected_series_lhio)}}const J=[{path:"",component:(()=>{class a{printFile(){this.getAllData()}exportToExcel(t){const i=E.Wp.json_to_sheet(t),s=Object.keys(t[0]||{}).map(r=>({wch:Math.max(r.length,...t.map(h=>h[r]?h[r].toString().length:0))+2}));i["!cols"]=s;const o=E.M9({Sheets:{data:i},SheetNames:["data"]},{bookType:"xlsx",type:"array"});this.saveAsExcelFile(o,"E-Claims Summary Report")}saveAsExcelFile(t,i){const n=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});(0,y.saveAs)(n,`${i}.xlsx`)}changeCodeList(){switch(this.program_desc){case"ab":this.code_list=this.code_list_ab;break;case"cc":this.code_list=this.code_list_cc;break;case"tb":this.code_list=this.code_list_tb;break;case"mc":this.code_list=this.code_list_mc;break;case"fp":this.code_list=this.code_list_fp;break;default:this.code_list=null}}getAllData(){this.printing=!0;let t={pStatus:this.pStatus??"",program_desc:this.program_desc??"",code:this.code??"","filter[search]":this.patient_search??"",per_page:50,for_print:"1"};this.start_date&&(t.start_date=this.start_date),this.end_date&&(t.end_date=this.end_date),this.allEclaimsArray=[];let i=0;const s=n=>{t.page=n,this.http.get("eclaims/eclaims-upload",{params:t}).subscribe({next:o=>{this.total_print_page=o.meta.last_page,this.current_print_page=n;const r=o.data.map((c,h)=>{const d=this.getDates(c);return i+=1,{"No.":i,"Series No":c.pClaimSeriesLhio,Name:c.patient.first_name+" "+c.patient.middle_name+" "+c.patient.last_name,"Admission Date":d.admission_date,"Discharge Date":d.discharge_date,"Received Date":c.pTransmissionDate,"Caserate Amount":c.caserate.caserate_fee,Status:c.pStatus}});this.allEclaimsArray.push(...r),n<o.meta.last_page?s(n+1):(this.exportToExcel(this.allEclaimsArray),this.printing=!1)}})};s(1)}getDates(t){let i=t.caserate?.caserate_date||"",s=t.caserate?.caserate_date||"";switch(t.program_desc){case"ab":i=t.caserate.patient_ab.ab_post_exposure.day0_date,s=t.caserate.patient_ab.ab_post_exposure.day7_date;break;case"cc":i=(0,p.Yq)(t.caserate.patient_cc.admission_date,"yyyy-MM-dd","en"),s=(0,p.Yq)(t.caserate.patient_cc.discharge_date,"yyyy-MM-dd","en");break;case"mc":if("ANC01"===t.caserate.code||"ANC02"===t.caserate.code){let n=null,o=null,r=null,c=null;Object.entries(t.caserate.patient_mc.prenatal).reverse().forEach(([h,d],f)=>{if(0===f&&!n&&(n=d.prenatal_date),1===f&&!o&&(o=d.prenatal_date),2===f&&!r&&(r=d.prenatal_date),f>2&&!c&&3===d.trimester)return c=d.prenatal_date,!0}),i=n,s=c}else i=(0,p.Yq)(t.caserate.patient_mc.post_register.admission_date,"yyyy-MM-dd","en"),s=(0,p.Yq)(t.caserate.patient_mc.post_register.discharge_date,"yyyy-MM-dd","en");break;case"tb":if("89221"===t.caserate.code){let n=new Date(t.caserate.patient_tb.tb_case_holding.continuation_start);n.setDate(n.getDate()-1),i=(0,p.Yq)(t.caserate.patient_tb.tb_case_holding.treatment_start,"yyyy-MM-dd","en"),s=(0,p.Yq)(n,"yyyy-MM-dd","en")}else i=(0,p.Yq)(t.caserate.patient_tb.tb_case_holding.continuation_start,"yyyy-MM-dd","en"),s=(0,p.Yq)(t.caserate.patient_tb.tb_case_holding.treatment_end,"yyyy-MM-dd","en");break;default:i=t.caserate.caserate_date,s=t.caserate.caserate_date}return{admission_date:i,discharge_date:s}}getEclaimsList(t){this.item_status=[],this.success_count=0,this.error_count=0,this.retrieved_claims=0,this.show_form=!1,this.checking_index=null;let i={pStatus:this.pStatus??"",program_desc:this.program_desc??"",code:this.code??"","filter[search]":this.patient_search??"",page:t||(this.current_page?this.current_page:1),per_page:this.per_page};this.start_date&&(i.start_date=this.start_date),this.end_date&&(i.end_date=this.end_date),this.http.get("eclaims/eclaims-upload",{params:i}).subscribe({next:s=>{this.eclaims_list=s.data,this.show_form=!0,this.current_page=s.meta.current_page,this.last_page=s.meta.last_page,this.from=s.meta.from,this.to=s.meta.to,this.total=s.meta.total},error:s=>console.log(s)})}getStatuses(){var t=this;return(0,R.A)(function*(){t.item_status=[],t.batch_refresh=!0,t.success_count=0,t.error_count=0,t.retrieved_claims=0,t.claims_count=Object.entries(t.eclaims_list).length;for(const[i,s]of Object.entries(t.eclaims_list)){const n=s;try{n.pClaimSeriesLhio?yield t.asyncGetClaimsStatus(n,n.pStatus):t.checkSeries(s),t.item_status[i]={icon:m.SGM,status:"success"},t.success_count+=1}catch{t.item_status[i]={icon:m.rfe,status:"failed"},t.error_count+=1}}})()}asyncGetClaimsStatus(t,i){this.is_refreshing=!0,this.checking_index=null;let s={series_lhio:t.pClaimSeriesLhio,program_code:"cc"===t.program_desc||"fp"===t.program_desc?"mc":t.program_desc};return new Promise((n,o)=>{this.http.post("eclaims/get-claim-status",s).subscribe({next:r=>{this.iterateMessage(r,t,i),this.addRetrieved(),n()},error:r=>{this.is_refreshing=!1,this.http.showError(r.error.message,"Claims Status - "+t.pHospitalTransmittalNo),this.addRetrieved(),o(r)}})})}getClaimStatus(t,i,s){this.claims_count=1,this.success_count=0,this.error_count=0,this.retrieved_claims=0,s>=0?(this.checking_index=s,this.item_status[s]&&(this.item_status[s]={icon:null,status:null})):s||(this.item_status=[]),this.batch_refresh=!0,this.http.post("eclaims/get-claim-status",{series_lhio:t.pClaimSeriesLhio,program_code:"cc"===t.program_desc||"fp"===t.program_desc?"mc":t.program_desc}).subscribe({next:o=>{s>=0&&(this.item_status[s]={icon:m.SGM,status:"success"}),this.iterateMessage(o,t,i),this.addRetrieved(),this.batch_refresh=!1},error:o=>{s>=0&&(this.item_status[s]={icon:m.rfe,status:"failed"}),this.http.showError(o.error.message,"Claims Status - "+t.pHospitalTransmittalNo),this.addRetrieved(),this.batch_refresh=!1}})}addRetrieved(){this.retrieved_claims+=1,this.claims_count===this.retrieved_claims&&(this.batch_refresh=!1)}navigateRoute(t,i){this.router.navigate(["/patient/"+t,{id:i.patient.id}])}refreshClaims(){this.is_refreshing=!0}checkSeries(t){this.is_refreshing=!0,this.http.post("eclaims/get-claims-map",{pReceiptTicketNumber:t.pReceiptTicketNumber,program_code:"cc"===t.program_desc||"fp"===t.program_desc?"mc":t.program_desc}).subscribe({next:s=>{t.pClaimSeriesLhio=s.MAPPING.pClaimSeriesLhio,t.pStatus="IN PROCESS",this.showInfoToastr(s.MAPPING.pClaimSeriesLhio,"Series LHIO Number"),this.updateUploadClaim(t),this.addRetrieved()},error:s=>{this.is_refreshing=!1,this.toastr.error(s.error.message,"Series LHIO",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0}),this.addRetrieved()}})}parseReason(t){if(t){let i="object"==typeof t?JSON.stringify(t):t,s="";if("["===i.charAt(0))i=JSON.parse(i);else{if("{"!==i.charAt(0))return i;i=JSON.parse(i)}const n=o=>{Object.entries(o).forEach(([r,c])=>{"object"==typeof c&&null!==c?n(c):s+=`<b>${r}</b>: ${c}<br>`})};return n(i),s}return""}iterateMessage(t,i,s){let n;switch(i.pStatus=t.CLAIM.pStatus,t.CLAIM.pStatus){case"DENIED":i.denied_reason=t.CLAIM.DENIED.REASON,n="As of: "+t.pAsOf+" "+t.pAsOfTime+"<br />"+t.CLAIM.DENIED.REASON.pReason;break;case"VOUCHERING":n="As of: "+t.pAsOf+" "+t.pAsOfTime,t.CLAIM.PAYMENT.PAYEE.length>0?Object.entries(t.CLAIM.PAYMENT.PAYEE).forEach(([o,r],c)=>{n+="<br />Claim Amount: "+r.pClaimAmount}):n+="<br />Claim Amount: "+t.CLAIM.PAYMENT.PAYEE.pClaimAmount;break;case"WITH VOUCHER":n="As of: "+t.pAsOf+" "+t.pAsOfTime,t.CLAIM.PAYMENT.PAYEE.length>0?Object.entries(t.CLAIM.PAYMENT.PAYEE).forEach(([o,r],c)=>{n+="<br />Voucher No: "+r.pVoucherNo,n+="<br />Voucher Date: "+r.pVoucherDate,n+="<br />Claim Amount: "+r.pClaimAmount}):(n+="<br />Voucher No: "+t.CLAIM.PAYMENT.PAYEE.pVoucherNo,n+="<br />Voucher Date: "+t.CLAIM.PAYMENT.PAYEE.pVoucherDate,n+="<br />Claim Amount: "+t.CLAIM.PAYMENT.PAYEE.pClaimAmount);break;case"WITH CHEQUE":n="As of: "+t.pAsOf+" "+t.pAsOfTime,t.CLAIM.PAYMENT.PAYEE.length>0?Object.entries(t.CLAIM.PAYMENT.PAYEE).forEach(([o,r],c)=>{n+="<br />Voucher No: "+r.pVoucherNo,n+="<br />Check No: "+r.pCheckNo,n+="<br />Check Date: "+r.pCheckDate,n+="<br />Claim Amount: "+r.pClaimAmount}):(n+="<br />Voucher No: "+t.CLAIM.PAYMENT.PAYEE.pVoucherNo,n+="<br />Check No: "+t.CLAIM.PAYMENT.PAYEE.pCheckNo,n+="<br />Check Date: "+t.CLAIM.PAYMENT.PAYEE.pCheckDate,n+="<br />Claim Amount: "+t.CLAIM.PAYMENT.PAYEE.pClaimAmount);break;case"RETURN":n="As of: "+t.pAsOf+" "+t.pAsOfTime,t.CLAIM.RETURN&&t.CLAIM.RETURN.DEFECTS&&(i.return_reason=t.CLAIM.RETURN.DEFECTS,Object.entries(t.CLAIM.RETURN.DEFECTS).forEach(([o,r],c)=>{r.REQUIREMENT&&Object.entries(r.REQUIREMENT).forEach(([h,d],f)=>{n+="<br />Requirement: "+(d.pRequirement?d.pRequirement:d)}),"string"==typeof r&&(n+="<br />Deficiency: "+r),r.pDeficiency&&(n+="<br />Deficiency: "+r.pDeficiency),r.pRequirement&&(n+="<br />Requirement: "+r.pRequirement)}));break;case"IN PROCESS":n="As of: "+t.pAsOf+" "+t.pAsOfTime,t.CLAIM.TRAIL?t.CLAIM.TRAIL.PROCESS.length>0?Object.entries(t.CLAIM.TRAIL.PROCESS).forEach(([o,r],c)=>{n+="<br />Process Stage: "+r.pProcessStage,n+="<br />Process Date: "+r.pProcessDate+"<br />"}):(n+="<br />Process Stage: "+t.CLAIM.TRAIL.PROCESS.pProcessStage,n+="<br />Process Date: "+t.CLAIM.TRAIL.PROCESS.pProcessDate+"<br />"):t.CLAIM.RETURN&&t.CLAIM.RETURN.DEFECTS&&Object.entries(t.CLAIM.RETURN.DEFECTS).forEach(([o,r],c)=>{r.pRequirement||(n+="<br />Deficiency: "+r),r.pRequirement&&(n+="<br />Requirement: "+r.pRequirement)});break;default:n="As of: "+t.pAsOf+" "+t.pAsOfTime}this.showInfoToastr(n,t.CLAIM.pStatus+" - "+i.pHospitalTransmittalNo),this.updateUploadClaim(i),this.is_refreshing=!1}showInfoToastr(t,i){this.toastr.info(t,i,{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0,enableHtml:!0})}updateUploadClaim(t){this.http.post("eclaims/eclaims-upload",t).subscribe({next:i=>{this.is_refreshing=!1},error:i=>{this.http.showError(i.error.message,"eClaims")}})}reopenCf2(t,i){this.caserate_list=[i.caserate],this.selected_transmittalNumber=i.pHospitalTransmittalNo,this.modal[t]=!this.modal[t]}toggleColorStatus(t){let i="";switch(t){case"IN PROCESS":i="text-blue-500 font-semibold";break;case"RETURN":i="text-orange-500 font-semibold";break;case"DENIED":i="text-red-500 font-semibold";break;case"VOUCHERING":i="text-green-500 font-semibold";break;case"WITH VOUCHER":i="text-green-500 font-semibold";case"WITH CHEQUE":i="text-green-500 font-semibold"}return i}toggleModal(t,i){this.selected_pHospitalTransmittalNo=i?.pHospitalTransmittalNo??null,this.selected_caserate_code=i?.caserate.caserate_code??null,this.selected_ticket_number=i?.pReceiptTicketNumber??null,this.selected_series_lhio=i?.pClaimSeriesLhio??null,"cf2"===t&&!this.modal.cf2&&this.getEclaimsList(),"upload-claims"===t&&!this.modal["upload-claims"]&&(this.patient=i.patient),this.getEclaimsList(),"upload-required-claims"===t&&!this.modal["upload-required-claims"]&&(this.patient=i.patient),this.getEclaimsList(),this.modal[t]=!this.modal[t]}constructor(t,i,s){this.http=t,this.toastr=i,this.router=s,this.faRotate=m.BF2,this.faUpload=m.JmV,this.faCircleNotch=m.s4k,this.faReceipt=m.Mf0,this.faClipboardQuestion=m.iFU,this.faPenToSquare=m.LFz,this.faFilter=m.mRM,this.faChevronLeft=m.Wzs,this.faChevronRight=m.XkK,this.faAnglesLeft=m.rNr,this.faAnglesRight=m.up_,this.faFileExcel=T.fny,this.pending_list=[],this.modal=[],this.is_refreshing=!1,this.show_form=!1,this.show_cf2=!1,this.start_date=null,this.end_date=null,this.pStatus=null,this.program_desc=null,this.patient_search=null,this.code=null,this.code_list=[],this.status_lists=["IN PROCESS","VOUCHERING","WITH VOUCHER","WITH CHEQUE","DENIED","RETURN"],this.program_list=["ab","cc","tb","mc","fp"],this.code_list_ab=["90375"],this.code_list_cc=["99432","99460"],this.code_list_tb=["89221","89222"],this.code_list_mc=["MCP01","NSD01","ANC01","ANC02"],this.code_list_fp=["FP001","58300"],this.per_page=10,this.printing=!1,this.total_print_page=0,this.current_print_page=1,this.claims_count=0,this.retrieved_claims=0,this.success_count=0,this.error_count=0,this.batch_refresh=!1,this.item_status=[]}ngOnInit(){this.getEclaimsList()}static{this.\u0275fac=function(i){return new(i||a)(e.rXU(k.k),e.rXU(x.tw),e.rXU(g.Ix))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-eclaims"]],standalone:!1,decls:59,vars:21,consts:[[1,"border","border-slate-200","shadow-md","rounded-xl"],[1,"w-full","bg-blue-500","text-white","rounded-t-xl","p-3","font-semibold","flex","justify-between","text-sm"],[1,"mt-2"],[1,"text-slate-800","flex","justify-end","text-xs"],["type","text","placeholder","search...",1,"col-span-3","input","rounded-r-none","w-52",3,"ngModelChange","keyup.enter","ngModel"],[1,"input","rounded-none","w-32","text-xs",3,"ngModelChange","change","ngModel"],[3,"ngValue"],["value","TRANSMITTED"],[3,"value","ngClass",4,"ngFor","ngForOf"],[1,"input","rounded-none","w-20","text-xs",3,"change","ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","date",1,"input","rounded-none","w-32","text-xs",3,"ngModelChange","ngModel"],["class","input rounded-none w-24",3,"ngModel","ngModelChange",4,"ngIf"],["type","button",1,"px-3","bg-white","text-blue-500","rounded-r-md","h-10","mt-1","w-24",3,"click"],[3,"icon"],[1,"w-full","p-5","overflow-x-auto"],[1,"flex","justify-end"],["class","flex justify-center font-semibold text-green-500",4,"ngIf"],[1,"pl-4","pr-2","bg-green-500","text-white","align-middle","rounded-md","ml-2","mt-1","hover:opacity-90",3,"click"],[1,"text-xl","mt-1",3,"icon","animation"],["class","flex justify-between w-full",4,"ngIf"],[1,"table-auto","w-full","text-sm","text-left","text-gray-500"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700"],["scope","col",1,"py-3","px-3","w-2/12","text-center"],["scope","col",1,"py-3","w-2/12"],["scope","col",1,"py-3","px-3","w-3/12","text-center"],["scope","col",1,"py-3","px-3","w-1/12","text-center"],["class","h-4/5 overflow-y-auto text-xs",4,"ngIf"],[4,"ngIf"],[3,"patient","program_name","selected_pHospitalTransmittalNo","caserate_code","selected_ticket_number","modalToggle",4,"ngIf"],[3,"patient","program_name","selected_pHospitalTransmittalNo","caserate_code","selected_ticket_number","selected_series_lhio","modalToggle",4,"ngIf"],[3,"value","ngClass"],[3,"value"],[1,"input","rounded-none","w-24",3,"ngModelChange","ngModel"],[1,"flex","justify-center","font-semibold","text-green-500"],[1,"flex","justify-between","w-full"],[1,"font-semibold"],[1,"ml-3","text-green-600"],[1,"ml-3","text-red-500"],[1,"btn-save","px-10","disabled:bg-gray-500",3,"click","disabled"],["animation","spin",3,"icon",4,"ngIf"],["animation","spin",3,"icon"],[1,"h-4/5","overflow-y-auto","text-xs"],["class","bg-white border-b last:border-0",4,"ngFor","ngForOf"],[1,"bg-white","border-b","last:border-0"],[3,"icon","ngClass",4,"ngIf"],["animation","spin","class","text-blue-600",3,"icon",4,"ngIf"],[1,"py-4","px-3","text-xs"],[1,"py-4","px-3"],[3,"ngClass"],[3,"innerHTML"],[1,"py-4","px-3","text-center","grid","grid-cols-1","text-xs"],["type","button",1,"bg-gray-300","rounded-md","p-0.5","mb-3","disabled:opacity-75",3,"click","disabled"],["class","bg-blue-500 text-white rounded-md p-0.5 mb-3 disabled:opacity-75","type","button",3,"disabled","click",4,"ngIf"],["class","bg-green-500 text-white rounded-md p-0.5 mb-3 disabled:opacity-75","type","button",3,"disabled","click",4,"ngIf"],[3,"icon","ngClass"],["animation","spin",1,"text-blue-600",3,"icon"],["type","button",1,"bg-blue-500","text-white","rounded-md","p-0.5","mb-3","disabled:opacity-75",3,"click","disabled"],["type","button",1,"bg-green-500","text-white","rounded-md","p-0.5","mb-3","disabled:opacity-75",3,"click","disabled"],["colspan","6",1,"text-center","italic"],["colspan","7"],[1,"grid","grid-cols-1","my-16"],[1,"flex","justify-center","text-blue-500"],[1,"flex","justify-center"],[1,"bg-white","px-4","py-3","flex","items-center","justify-between","border-t","border-gray-200","sm:px-6"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"text-sm","text-gray-700"],[1,"font-medium"],["aria-label","Pagination",1,"relative","z-0","inline-flex","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","disabled"],[1,"block","h-15","w-15","text-gray-500","pr-1",3,"icon"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","bg-white","text-sm","font-medium","text-gray-700","hover:bg-gray-50",3,"click","disabled"],[1,"h-5","w-5","text-gray-500",3,"icon"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","disabled"],[3,"modalToggle","patient","program_name","selected_pHospitalTransmittalNo","caserate_code","selected_ticket_number"],[3,"modalToggle","patient","program_name","selected_pHospitalTransmittalNo","caserate_code","selected_ticket_number","selected_series_lhio"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.EFF(3,"ECLAIMS LIST"),e.k0s(),e.j41(4,"div",3)(5,"input",4),e.mxI("ngModelChange",function(o){return e.DH7(s.patient_search,o)||(s.patient_search=o),o}),e.bIt("keyup.enter",function(){return s.getEclaimsList()}),e.k0s(),e.j41(6,"select",5),e.mxI("ngModelChange",function(o){return e.DH7(s.pStatus,o)||(s.pStatus=o),o}),e.bIt("change",function(){return s.getEclaimsList()}),e.j41(7,"option",6),e.EFF(8,"ALL"),e.k0s(),e.j41(9,"option",7),e.EFF(10,"TRANSMITTED"),e.k0s(),e.DNE(11,F,2,3,"option",8),e.k0s(),e.j41(12,"select",9),e.bIt("change",function(){return s.changeCodeList()}),e.mxI("ngModelChange",function(o){return e.DH7(s.program_desc,o)||(s.program_desc=o),o}),e.j41(13,"option",6),e.EFF(14,"ALL"),e.k0s(),e.DNE(15,A,3,4,"option",10),e.k0s(),e.j41(16,"input",11),e.mxI("ngModelChange",function(o){return e.DH7(s.start_date,o)||(s.start_date=o),o}),e.k0s(),e.j41(17,"input",11),e.mxI("ngModelChange",function(o){return e.DH7(s.end_date,o)||(s.end_date=o),o}),e.k0s(),e.DNE(18,S,4,3,"select",12),e.j41(19,"button",13),e.bIt("click",function(){return s.getEclaimsList()}),e.nrm(20,"fa-icon",14),e.EFF(21," Filter "),e.k0s()()(),e.j41(22,"div",15)(23,"div",16),e.DNE(24,j,2,1,"div",17),e.j41(25,"button",18),e.bIt("click",function(){return s.printFile()}),e.nrm(26,"fa-icon",19),e.EFF(27),e.k0s()(),e.DNE(28,Y,11,7,"div",20),e.j41(29,"table",21)(30,"thead",22)(31,"tr")(32,"th",23),e.EFF(33," Name "),e.nrm(34,"br"),e.k0s(),e.j41(35,"th",24),e.EFF(36," 1. Caserate (Program)"),e.nrm(37,"br"),e.EFF(38," 2. Transmittal Number "),e.nrm(39,"br"),e.EFF(40," 3. Ticket Number "),e.nrm(41,"br"),e.EFF(42," 4. Claim Series Lhio "),e.nrm(43,"br"),e.k0s(),e.j41(44,"th",23),e.EFF(45," 1. Transmittal Date "),e.nrm(46,"br"),e.EFF(47," 2. Caserate Amount "),e.k0s(),e.j41(48,"th",23),e.EFF(49,"Claim Status"),e.k0s(),e.j41(50,"th",25),e.EFF(51,"Details"),e.k0s(),e.j41(52,"th",26),e.EFF(53,"Action"),e.k0s()()(),e.DNE(54,H,3,2,"tbody",27)(55,X,8,1,"tbody",28),e.k0s()(),e.DNE(56,U,27,11,"div",28),e.k0s(),e.DNE(57,B,1,5,"app-upload-claims",29)(58,q,1,6,"app-upload-required-claims",30)),2&i&&(e.R7$(5),e.R50("ngModel",s.patient_search),e.R7$(),e.R50("ngModel",s.pStatus),e.R7$(),e.Y8G("ngValue",null),e.R7$(4),e.Y8G("ngForOf",s.status_lists),e.R7$(),e.R50("ngModel",s.program_desc),e.R7$(),e.Y8G("ngValue",null),e.R7$(2),e.Y8G("ngForOf",s.program_list),e.R7$(),e.R50("ngModel",s.start_date),e.R7$(),e.R50("ngModel",s.end_date),e.R7$(),e.Y8G("ngIf",null!==s.program_desc),e.R7$(2),e.Y8G("icon",s.faFilter),e.R7$(4),e.Y8G("ngIf",s.printing||s.total_print_page),e.R7$(2),e.Y8G("icon",s.printing?s.faCircleNotch:s.faFileExcel)("animation",s.printing?"spin":""),e.R7$(),e.SpI(" ",s.printing?"Printing":"Print"," "),e.R7$(),e.Y8G("ngIf",("IN PROCESS"===s.pStatus||"WITH VOUCHER"===s.pStatus||"VOUCHERING"===s.pStatus)&&s.eclaims_list),e.R7$(26),e.Y8G("ngIf",s.show_form),e.R7$(),e.Y8G("ngIf",!s.show_form),e.R7$(),e.Y8G("ngIf",(null==s.eclaims_list?null:s.eclaims_list.length)>=1),e.R7$(),e.Y8G("ngIf",s.modal["upload-claims"]),e.R7$(),e.Y8G("ngIf",s.modal["upload-required-claims"]))},dependencies:[p.YU,p.Sq,p.bT,C.aY,u.xH,u.y7,u.me,u.wz,u.BC,u.vS,I.q,N.L,p.Pc,p.QX],encapsulation:2})}}return a})()}];let W=(()=>{class a{static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[g.iI.forChild(J),g.iI]})}}return a})();var Q=_(4959);let z=(()=>{class a{static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[p.MD,W,C.dX,u.YN,Q.u]})}}return a})()}}]);