"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[996],{3523:(v,b,a)=>{a.d(b,{j:()=>l});var e=a(6895),t=a(4650),f=a(3396),p=a(2687),h=a(4691),r=a(7185),d=a(2216),c=a(4006),g=a(6491);function x(n,i){if(1&n){const o=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(o);const _=t.oxw();return t.KtG(_.getEncryptedXml())}),t._UZ(1,"fa-icon",17),t._uU(2," Upload Claim "),t.qZA()}if(2&n){const o=t.oxw();t.Q6J("disabled",o.is_uploading||!o.show_form||o.show_confirm_form),t.xp6(1),t.Q6J("icon",o.faUpload)}}function m(n,i){if(1&n&&(t.TgZ(0,"option",25),t._uU(1),t.qZA()),2&n){const o=i.$implicit;t.Q6J("value",o.code),t.xp6(1),t.Oqu(o.desc)}}function u(n,i){if(1&n){const o=t.EpF();t.TgZ(0,"div",18)(1,"div")(2,"select",19),t.NdJ("ngModelChange",function(_){t.CHM(o);const y=t.oxw();return t.KtG(y.doc_type=_)}),t.YNc(3,m,2,2,"option",20),t.qZA()(),t.TgZ(4,"div",21)(5,"input",22),t.NdJ("change",function(_){t.CHM(o);const y=t.oxw();return t.KtG(y.readXML(_.target.files[0]))}),t.qZA()(),t.TgZ(6,"div")(7,"button",23),t.NdJ("click",function(){t.CHM(o);const _=t.oxw();return t.KtG(_.uploadDocs(_.file_to_upload))}),t._UZ(8,"fa-icon",24),t._uU(9," Upload Document "),t.qZA()()()}if(2&n){const o=t.oxw();t.xp6(2),t.Q6J("ngModel",o.doc_type),t.xp6(1),t.Q6J("ngForOf",o.doc_list),t.xp6(4),t.Q6J("disabled",!o.file_to_upload||!o.doc_type||o.is_uploading||!o.show_form),t.xp6(1),t.Q6J("icon",o.is_uploading?o.faCircleNotch:o.faFileArrowUp)("spin",o.is_uploading)}}function C(n,i){if(1&n){const o=t.EpF();t.TgZ(0,"tr",34)(1,"td",35),t._uU(2),t.qZA(),t.TgZ(3,"td",36),t._uU(4),t.qZA(),t.TgZ(5,"td",37)(6,"fa-icon",38),t.NdJ("click",function(){const y=t.CHM(o).$implicit,S=t.oxw(3);return t.KtG(S.toggleModal("delete-item",y))}),t.qZA()()()}if(2&n){const o=i.$implicit,s=t.oxw(3);t.xp6(2),t.hij(" ",o.doc_type_code," "),t.xp6(2),t.hij(" ",s.getFileName(o.doc_url)," "),t.xp6(2),t.Q6J("icon",s.faTrash)}}function T(n,i){if(1&n&&(t.TgZ(0,"tbody"),t.YNc(1,C,7,3,"tr",33),t.qZA()),2&n){const o=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",o.uploaded_docs)}}function w(n,i){if(1&n&&(t.TgZ(0,"tbody")(1,"tr")(2,"td",39)(3,"div",40)(4,"div",41),t._UZ(5,"fa-icon",42),t.qZA(),t.TgZ(6,"div",43),t._uU(7," Fetching uploaded documents... "),t.qZA()()()()()),2&n){const o=t.oxw(2);t.xp6(5),t.Q6J("icon",o.faCircleNotch)}}function U(n,i){if(1&n&&(t.TgZ(0,"div",26)(1,"table",27)(2,"thead",28)(3,"tr")(4,"th",29),t._uU(5,"Document Type"),t.qZA(),t.TgZ(6,"th",30),t._uU(7,"Document URL"),t.qZA(),t.TgZ(8,"th",31),t._uU(9,"Action"),t.qZA()()(),t.YNc(10,T,2,1,"tbody",32),t.YNc(11,w,8,1,"tbody",32),t.qZA()()),2&n){const o=t.oxw();t.xp6(10),t.Q6J("ngIf",o.show_form),t.xp6(1),t.Q6J("ngIf",!o.show_form)}}function M(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,","),t.qZA())}function Z(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.YNc(2,M,2,0,"span",32),t.qZA()),2&n){const o=i.$implicit,s=i.last;t.xp6(1),t.hij(" ",o.doc_type_code,""),t.xp6(1),t.Q6J("ngIf",!s)}}function A(n,i){if(1&n&&t._UZ(0,"fa-icon",50),2&n){const o=t.oxw(2);t.Q6J("icon",o.faCircleNotch)}}function E(n,i){if(1&n){const o=t.EpF();t.TgZ(0,"div",44)(1,"div",45),t._uU(2," Are you sure all required documents have been uploaded and want to proceed on uploading this claim? "),t.qZA(),t.TgZ(3,"div",45)(4,"strong"),t._uU(5,"Uploaded documents:\xa0"),t.qZA(),t.YNc(6,Z,3,2,"span",12),t.qZA(),t.TgZ(7,"div",46)(8,"div")(9,"button",47),t.NdJ("click",function(){t.CHM(o);const _=t.oxw();return t.KtG(_.confirmUpload())}),t._uU(10," Cancel "),t.qZA(),t.TgZ(11,"button",48),t.NdJ("click",function(){t.CHM(o);const _=t.oxw();return t.KtG(_.uploadClaim())}),t.YNc(12,A,1,1,"fa-icon",49),t._uU(13),t.qZA()()()()}if(2&n){const o=t.oxw();t.xp6(6),t.Q6J("ngForOf",o.uploaded_docs),t.xp6(3),t.Q6J("disabled",o.is_uploading_claim),t.xp6(2),t.Q6J("disabled",o.is_uploading_claim),t.xp6(1),t.Q6J("ngIf",o.is_uploading_claim),t.xp6(1),t.hij(" ",o.is_uploading_claim?"Uploading":"Upload"," ")}}function D(n,i){if(1&n&&(t.TgZ(0,"div",51)(1,"div",41),t._UZ(2,"fa-icon",42),t.qZA(),t.TgZ(3,"div",43),t._uU(4," Retrieving XML... "),t.qZA()()),2&n){const o=t.oxw();t.xp6(2),t.Q6J("icon",o.faCircleNotch)}}function O(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,","),t.qZA())}function F(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.YNc(2,O,2,0,"span",32),t.qZA()),2&n){const o=i.$implicit,s=i.last;t.xp6(1),t.hij(" ",o,""),t.xp6(1),t.Q6J("ngIf",!s)}}function N(n,i){if(1&n){const o=t.EpF();t.TgZ(0,"app-delete-item",52),t.NdJ("toggleModal",function(_){t.CHM(o);const y=t.oxw();return t.KtG(y.toggleModal(_))}),t.qZA()}if(2&n){const o=t.oxw();t.Q6J("url",o.delete_url)("delete_id",o.selected_doc_id)("delete_desc",o.delete_desc)}}let l=(()=>{class n{confirmUpload(){this.show_confirm_form=!this.show_confirm_form}getFileName(o){return o.split("/")[6]}getEncryptedXml(){this.is_retrieving_xml=!0,this.http.post("eclaims/create-enc-xml",{pHospitalTransmittalNo:this.selected_pHospitalTransmittalNo,program_desc:this.program_name}).subscribe({next:s=>{this.is_retrieving_xml=!1,this.confirmUpload(),this.encryptedXml=s.xml},error:s=>console.log(s)})}uploadClaim(){this.is_uploading_claim=!0,this.http.post("eclaims/upload-claim",{encryptedXml:this.encryptedXml,program_code:"cc"===this.program_name||"fp"===this.program_name?"mc":this.program_name}).subscribe({next:s=>{this.updateUploadData(s)},error:s=>{this.is_uploading_claim=!1,this.toastr.error(s.error.message,"Upload Claim",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0})}})}updateUploadData(o){let s={pHospitalTransmittalNo:this.selected_pHospitalTransmittalNo,pTransmissionControlNumber:o.pTransmissionControlNumber,pReceiptTicketNumber:o.pReceiptTicketNumber,pStatus:"IN PROCESS",pTransmissionDate:(0,e.p6)(o.pTransmissionDate,"yyyy-MM-dd","en","Asia/Manila"),pTransmissionTime:(0,e.p6)(new Date,"HH:mm:ss","en","Asia/Manila"),isSuccess:"Y",program_desc:this.program_name};this.http.post("eclaims/eclaims-upload",s).subscribe({next:_=>{this.ticket_number=_.data.pReceiptTicketNumber,this.toastr.success("Ticket Number: "+this.ticket_number,"Claim Uploaded!",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0}),this.is_uploading_claim=!1,this.closeModal()},error:_=>console.log(_)})}deleteDocs(o){}loadDocs(){this.show_form=!1,this.http.get("eclaims/eclaims-doc",{params:{pHospitalTransmittalNo:this.selected_pHospitalTransmittalNo,required:"N"}}).subscribe({next:s=>{this.uploaded_docs=s.data,this.show_form=!0},error:s=>console.log(s)})}uploadDocs(o){this.is_uploading=!0;const s=new FormData;this.file_to_upload.size>2097152?(this.is_uploading=!1,this.toastr.error("File size exceeds the allowed limit 2MB","File Upload",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0})):(s.append("doc",this.file_to_upload),s.append("doc_type_code",this.doc_type),s.append("pHospitalTransmittalNo",this.selected_pHospitalTransmittalNo),s.append("program_desc",this.program_name),s.append("patient_id",this.patient.id),s.append("required","N"),this.http.post("eclaims/eclaims-doc",s).subscribe({next:_=>{this.loadDocs(),this.resetForm(),this.is_uploading=!1,this.toastr.success("Successfully uploaded.","EClaims Docs")},error:_=>console.log(_)}))}resetForm(){this.doc_type=null,this.file_to_upload=null}readXML(o){this.file_to_upload=o}getLibraries(){this.http.get("libraries/eclaims-doc-type").subscribe({next:o=>{this.doc_list=o.data,this.loadDocs()},error:o=>console.log(o)})}closeModal(){this.modalToggle.emit("upload-claims")}toggleModal(o,s){this.selected_doc_id=s?s.id:null,this.delete_desc=this.delete_desc+" "+(s?s.doc_type_code:""),this.modals[o]=!this.modals[o],!1===this.modals["delete-item"]&&this.loadDocs()}constructor(o,s){this.http=o,this.toastr=s,this.modalToggle=new t.vpe,this.faPenToSquare=f.Yai,this.faUpload=p.cf$,this.faTrash=p.$aW,this.faFileArrowUp=p.PQh,this.faCircleNotch=p.IJ7,this.file_to_upload=null,this.doc_type=null,this.is_uploading=!1,this.uploading_claim=!1,this.modals=[],this.arr_CR4652=["CF2","CSF","CF3","SOA w/ CTC"],this.arr_CR4651=["CF2","CSF","CF3","SOA w/ CTC"],this.arr_CR4683=["CF2","CSF","CF3","SOA w/ CTC","Pink Card"],this.arr_CR4684=["CF2","CSF","CF3","SOA w/ CTC","Pink Card"],this.arr_CR4687=["CF2","CSF + NBS Sticker","PMRF","SOA w/ CTC","Birth Certificate"],this.arr_CR4656=["CF2","CSF","Treatment Card","SOA w/ CTC"],this.arr_CR4657=["CF2","CSF","Treatment Card","SOA w/ CTC"],this.arr_CR4658=["CF2","CSF","Treatment Card","SOA w/ CTC","Summary Report"],this.arr_CR4685=["CF2","CSF + Serial Sticker","SOA w/ CTC"],this.arr_CR0385=["CF2","CSF + Serial Number of Box","SOA w/ CTC"],this.arr_CR0456=["CF2","CSF","SOA"],this.arr_CR4655=["CF2","CSF","Smear Test for OMP"],this.is_retrieving_xml=!1,this.confirm_upload=!1,this.show_confirm_form=!1,this.is_uploading_claim=!1,this.show_ticket_number=!1,this.show_form=!1,this.delete_url="eclaims/eclaims-doc/",this.delete_desc="eClaims Document"}ngOnInit(){this.getLibraries(),this.required_docs=this["arr_"+this.caserate_code]}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(h.O),t.Y36(r._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-upload-claims"]],inputs:{selected_pHospitalTransmittalNo:"selected_pHospitalTransmittalNo",program_name:"program_name",patient:"patient",caserate_code:"caserate_code",selected_ticket_number:"selected_ticket_number"},outputs:{modalToggle:"modalToggle"},decls:22,vars:8,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","55"],[1,"relative","p-4","w-full","max-w-4xl","h-full","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],["type","button","class","disabled:bg-gray-400 bg-white px-3 py-1 text-blue-500 rounded-md",3,"disabled","click",4,"ngIf"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],["class","grid grid-cols-3 gap-x-4 mx-5 my-2",4,"ngIf"],["class","shadow-md sm:rounded-lg m-4",4,"ngIf"],["class","grid grid-cols-1 m-8 rounded-md border border-rose-500 bg-rose-100 text-rose-700 p-5",4,"ngIf"],["class","grid grid-cols-1 mt-16",4,"ngIf"],[1,"flex","justify-between","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],[4,"ngFor","ngForOf"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-300","rounded","text-sm","font-medium","px-6","py-2.5","transition","duration-150","ease-in-out","transform","hover:scale-110",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[3,"url","delete_id","delete_desc","toggleModal",4,"ngIf"],["type","button",1,"disabled:bg-gray-400","bg-white","px-3","py-1","text-blue-500","rounded-md",3,"disabled","click"],[1,"pr-2",3,"icon"],[1,"grid","grid-cols-3","gap-x-4","mx-5","my-2"],["id","suffix_name","name","suffix_name",1,"input","mt-5",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","justify-center","mx-auto","py-5"],["type","file","id","formFile",1,"form-control","w-full","px-3","py-1.5","text-base","font-normal","text-gray-700","bg-white","bg-clip-padding","border","border-solid","border-gray-300","rounded-lg","transition","ease-in-out","m-0","focus:text-gray-700","focus:bg-white","focus:border-blue-600","focus:outline-none",3,"change"],["type","button",1,"mt-5","disabled:bg-gray-400","py-2","px-3","mb-5","bg-blue-500","text-white","rounded-lg","text-sm",3,"disabled","click"],[3,"icon","spin"],[3,"value"],[1,"shadow-md","sm:rounded-lg","m-4"],[1,"table-fixed","w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6","text-center","w-3/12"],["scope","col",1,"py-3","px-6","text-center","w-7/12"],["scope","col",1,"py-3","px-6","text-center","w-2/12"],[4,"ngIf"],["class","bg-white border-b",4,"ngFor","ngForOf"],[1,"bg-white","border-b"],[1,"py-4","px-6","text-center","w-3/12"],[1,"py-4","px-6","w-7/12","whitespace-normal"],[1,"py-4","px-6","text-center","w-2/12"],[1,"mx-0","my-0","text-rose-500","hover:cursor-pointer","flex-none","mr-2",3,"icon","click"],["colspan","3"],[1,"grid","grid-cols-1","my-14"],[1,"flex","justify-center","text-blue-500"],["spin","true",3,"icon"],[1,"flex","justify-center"],[1,"grid","grid-cols-1","m-8","rounded-md","border","border-rose-500","bg-rose-100","text-rose-700","p-5"],[1,"flex","mb-5"],[1,"flex","justify-end"],["type","button",1,"btn-save","bg-gray-400",3,"disabled","click"],["type","button",1,"btn-save","bg-rose-500","ml-5",3,"disabled","click"],["spin","true","class","pr-2",3,"icon",4,"ngIf"],["spin","true",1,"pr-2",3,"icon"],[1,"grid","grid-cols-1","mt-16"],[3,"url","delete_id","delete_desc","toggleModal"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5),t.qZA(),t.TgZ(6,"div"),t.YNc(7,x,3,2,"button",5),t.qZA()(),t.TgZ(8,"div",6),t.YNc(9,u,10,5,"div",7),t.YNc(10,U,12,2,"div",8),t.YNc(11,E,14,5,"div",9),t.YNc(12,D,5,1,"div",10),t.qZA(),t.TgZ(13,"div",11)(14,"div")(15,"strong"),t._uU(16,"Required documents:"),t.qZA(),t.YNc(17,F,3,2,"span",12),t.qZA(),t.TgZ(18,"button",13),t.NdJ("click",function(){return s.closeModal()}),t._uU(19,"Close"),t.qZA()()()()(),t._UZ(20,"div",14),t.YNc(21,N,1,3,"app-delete-item",15)),2&o&&(t.xp6(5),t.hij(" CLAIM: ",s.selected_pHospitalTransmittalNo," "),t.xp6(2),t.Q6J("ngIf",!s.selected_ticket_number),t.xp6(2),t.Q6J("ngIf",!s.is_retrieving_xml&&!s.show_confirm_form),t.xp6(1),t.Q6J("ngIf",!s.is_retrieving_xml&&!s.show_confirm_form),t.xp6(1),t.Q6J("ngIf",!s.is_retrieving_xml&&s.show_confirm_form),t.xp6(1),t.Q6J("ngIf",s.is_retrieving_xml),t.xp6(5),t.Q6J("ngForOf",s.required_docs),t.xp6(4),t.Q6J("ngIf",s.modals["delete-item"]))},dependencies:[e.sg,e.O5,d.BN,c.YN,c.Kr,c.EJ,c.JJ,c.On,g.N]}),n})()},1575:(v,b,a)=>{a.d(b,{W:()=>N});var e=a(4650),t=a(3396),f=a(2687),p=a(4691),h=a(7185),r=a(6895),d=a(2216),c=a(4006),g=a(6491);function x(l,n){if(1&l&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&l){const i=n.$implicit;e.Q6J("value",i.code),e.xp6(1),e.Oqu(i.desc)}}function m(l,n){if(1&l){const i=e.EpF();e.TgZ(0,"div",17)(1,"div")(2,"select",18),e.NdJ("ngModelChange",function(s){e.CHM(i);const _=e.oxw();return e.KtG(_.doc_type=s)}),e.YNc(3,x,2,2,"option",19),e.qZA()(),e.TgZ(4,"div",20)(5,"input",21),e.NdJ("change",function(s){e.CHM(i);const _=e.oxw();return e.KtG(_.readXML(s.target.files[0]))}),e.qZA()(),e.TgZ(6,"div")(7,"button",22),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.uploadDocs(s.file_to_upload))}),e._UZ(8,"fa-icon",23),e._uU(9," Upload Document "),e.qZA()()()}if(2&l){const i=e.oxw();e.xp6(2),e.Q6J("ngModel",i.doc_type),e.xp6(1),e.Q6J("ngForOf",i.doc_list),e.xp6(4),e.Q6J("disabled",!i.file_to_upload||!i.doc_type||i.is_uploading||!i.show_form),e.xp6(1),e.Q6J("icon",i.is_uploading?i.faCircleNotch:i.faFileArrowUp)("spin",i.is_uploading)}}function u(l,n){if(1&l){const i=e.EpF();e.TgZ(0,"tr",33)(1,"td",34),e._uU(2),e.qZA(),e.TgZ(3,"td",35),e._uU(4),e.qZA(),e.TgZ(5,"td",36)(6,"fa-icon",37),e.NdJ("click",function(){const _=e.CHM(i).$implicit,y=e.oxw(3);return e.KtG(y.toggleModal("delete-item",_))}),e.qZA()()()}if(2&l){const i=n.$implicit,o=e.oxw(3);e.xp6(2),e.hij(" ",i.doc_type_code," "),e.xp6(2),e.hij(" ",o.getFileName(i.doc_url)," "),e.xp6(2),e.Q6J("icon",o.faTrash)}}function C(l,n){if(1&l&&(e.TgZ(0,"tbody"),e.YNc(1,u,7,3,"tr",32),e.qZA()),2&l){const i=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",i.uploaded_docs)}}function T(l,n){if(1&l&&(e.TgZ(0,"tbody")(1,"tr")(2,"td",38)(3,"div",39)(4,"div",40),e._UZ(5,"fa-icon",41),e.qZA(),e.TgZ(6,"div",42),e._uU(7," Fetching uploaded documents... "),e.qZA()()()()()),2&l){const i=e.oxw(2);e.xp6(5),e.Q6J("icon",i.faCircleNotch)}}function w(l,n){if(1&l&&(e.TgZ(0,"div",25)(1,"table",26)(2,"thead",27)(3,"tr")(4,"th",28),e._uU(5,"Document Type"),e.qZA(),e.TgZ(6,"th",29),e._uU(7,"Document URL"),e.qZA(),e.TgZ(8,"th",30),e._uU(9,"Action"),e.qZA()()(),e.YNc(10,C,2,1,"tbody",31),e.YNc(11,T,8,1,"tbody",31),e.qZA()()),2&l){const i=e.oxw();e.xp6(10),e.Q6J("ngIf",i.show_form),e.xp6(1),e.Q6J("ngIf",!i.show_form)}}function U(l,n){1&l&&(e.TgZ(0,"span"),e._uU(1,","),e.qZA())}function M(l,n){if(1&l&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,U,2,0,"span",31),e.qZA()),2&l){const i=n.$implicit,o=n.last;e.xp6(1),e.hij(" ",i.doc_type_code,""),e.xp6(1),e.Q6J("ngIf",!o)}}function Z(l,n){if(1&l&&e._UZ(0,"fa-icon",49),2&l){const i=e.oxw(2);e.Q6J("icon",i.faCircleNotch)}}function A(l,n){if(1&l){const i=e.EpF();e.TgZ(0,"div",43)(1,"div",44),e._uU(2," Are you sure all required documents have been uploaded and want to proceed on uploading this claim? "),e.qZA(),e.TgZ(3,"div",44)(4,"strong"),e._uU(5,"Uploaded documents:\xa0"),e.qZA(),e.YNc(6,M,3,2,"span",13),e.qZA(),e.TgZ(7,"div",45)(8,"div")(9,"button",46),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.confirmUpload())}),e._uU(10," Cancel "),e.qZA(),e.TgZ(11,"button",47),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.uploadClaim())}),e.YNc(12,Z,1,1,"fa-icon",48),e._uU(13),e.qZA()()()()}if(2&l){const i=e.oxw();e.xp6(6),e.Q6J("ngForOf",i.uploaded_docs),e.xp6(3),e.Q6J("disabled",i.is_uploading_claim),e.xp6(2),e.Q6J("disabled",i.is_uploading_claim),e.xp6(1),e.Q6J("ngIf",i.is_uploading_claim),e.xp6(1),e.hij(" ",i.is_uploading_claim?"Uploading":"Upload"," ")}}function E(l,n){if(1&l&&(e.TgZ(0,"div",50)(1,"div",40),e._UZ(2,"fa-icon",41),e.qZA(),e.TgZ(3,"div",42),e._uU(4," Retrieving XML... "),e.qZA()()),2&l){const i=e.oxw();e.xp6(2),e.Q6J("icon",i.faCircleNotch)}}function D(l,n){1&l&&(e.TgZ(0,"span"),e._uU(1,","),e.qZA())}function O(l,n){if(1&l&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,D,2,0,"span",31),e.qZA()),2&l){const i=n.$implicit,o=n.last;e.xp6(1),e.hij(" ",i,""),e.xp6(1),e.Q6J("ngIf",!o)}}function F(l,n){if(1&l){const i=e.EpF();e.TgZ(0,"app-delete-item",51),e.NdJ("toggleModal",function(s){e.CHM(i);const _=e.oxw();return e.KtG(_.toggleModal(s))}),e.qZA()}if(2&l){const i=e.oxw();e.Q6J("url",i.delete_url)("delete_id",i.selected_doc_id)("delete_desc",i.delete_desc)}}let N=(()=>{class l{confirmUpload(){this.show_confirm_form=!this.show_confirm_form}getFileName(i){return i.split("/")[6]}getEncryptedXml(){this.is_retrieving_xml=!0,this.http.post("eclaims/create-required-xml",{pHospitalTransmittalNo:this.selected_pHospitalTransmittalNo,program_desc:this.program_name}).subscribe({next:o=>{this.is_retrieving_xml=!1,this.confirmUpload(),this.encryptedXml=o.xml},error:o=>console.log(o)})}uploadClaim(){this.is_uploading_claim=!0,this.http.post("eclaims/add-required-docs",{encryptedXml:this.encryptedXml,program_code:"cc"===this.program_name||"fp"===this.program_name?"mc":this.program_name,pClaimSeriesLhio:this.selected_series_lhio}).subscribe({next:o=>{this.updateUploadData()},error:o=>{this.is_uploading_claim=!1,this.toastr.error(o.error.message,"Upload Claim",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0})}})}updateUploadData(){this.http.post("eclaims/eclaims-upload",{pHospitalTransmittalNo:this.selected_pHospitalTransmittalNo,pStatus:"IN PROCESS"}).subscribe({next:o=>{this.ticket_number=o.data.pReceiptTicketNumber,this.toastr.success("Ticket Number: "+this.ticket_number,"Claim Uploaded!",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0}),this.is_uploading_claim=!1,this.closeModal()},error:o=>console.log(o)})}deleteDocs(i){}loadDocs(){this.show_form=!1,this.http.get("eclaims/eclaims-doc",{params:{pHospitalTransmittalNo:this.selected_pHospitalTransmittalNo,required:"Y"}}).subscribe({next:o=>{this.uploaded_docs=o.data,this.show_form=!0},error:o=>console.log(o)})}uploadDocs(i){this.is_uploading=!0;const o=new FormData;this.file_to_upload.size>2097152?(this.is_uploading=!1,this.toastr.error("File size exceeds the allowed limit 2MB","File Upload",{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0})):(o.append("doc",this.file_to_upload),o.append("doc_type_code",this.doc_type),o.append("pHospitalTransmittalNo",this.selected_pHospitalTransmittalNo),o.append("program_desc",this.program_name),o.append("patient_id",this.patient.id),o.append("required","Y"),this.http.post("eclaims/eclaims-doc",o).subscribe({next:s=>{this.loadDocs(),this.resetForm(),this.is_uploading=!1,this.toastr.success("Successfully uploaded.","EClaims Docs")},error:s=>console.log(s)}))}resetForm(){this.doc_type=null,this.file_to_upload=null}readXML(i){this.file_to_upload=i}getLibraries(){this.http.get("libraries/eclaims-doc-type").subscribe({next:i=>{this.doc_list=i.data,this.loadDocs()},error:i=>console.log(i)})}closeModal(){this.modalToggle.emit("upload-required-claims")}toggleModal(i,o){this.selected_doc_id=o?o.id:null,this.delete_desc=this.delete_desc+" "+(o?o.doc_type_code:""),this.modals[i]=!this.modals[i],!1===this.modals["delete-item"]&&this.loadDocs()}constructor(i,o){this.http=i,this.toastr=o,this.modalToggle=new e.vpe,this.faPenToSquare=t.Yai,this.faUpload=f.cf$,this.faTrash=f.$aW,this.faFileArrowUp=f.PQh,this.faCircleNotch=f.IJ7,this.file_to_upload=null,this.doc_type=null,this.is_uploading=!1,this.uploading_claim=!1,this.modals=[],this.arr_CR4652=["CF2","CSF","CF3","SOA w/ CTC"],this.arr_CR4651=["CF2","CSF","CF3","SOA w/ CTC"],this.arr_CR4683=["CF2","CSF","CF3","SOA w/ CTC","Pink Card"],this.arr_CR4684=["CF2","CSF","CF3","SOA w/ CTC","Pink Card"],this.arr_CR4687=["CF2","CSF + NBS Sticker","PMRF","SOA w/ CTC","Birth Certificate"],this.arr_CR4656=["CF2","CSF","Treatment Card","SOA w/ CTC"],this.arr_CR4657=["CF2","CSF","Treatment Card","SOA w/ CTC"],this.arr_CR4658=["CF2","CSF","Treatment Card","SOA w/ CTC","Summary Report"],this.arr_CR4685=["CF2","CSF + Serial Sticker","SOA w/ CTC"],this.arr_CR0385=["CF2","CSF + Serial Number of Box","SOA w/ CTC"],this.arr_CR0456=["CF2","CSF","SOA"],this.arr_CR4655=["CF2","CSF","Smear Test for OMP"],this.is_retrieving_xml=!1,this.confirm_upload=!1,this.show_confirm_form=!1,this.is_uploading_claim=!1,this.show_ticket_number=!1,this.show_form=!1,this.delete_url="eclaims/eclaims-doc/",this.delete_desc="eClaims Document"}ngOnInit(){this.getLibraries(),this.required_docs=this["arr_"+this.caserate_code]}}return l.\u0275fac=function(i){return new(i||l)(e.Y36(p.O),e.Y36(h._W))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-upload-required-claims"]],inputs:{selected_pHospitalTransmittalNo:"selected_pHospitalTransmittalNo",program_name:"program_name",patient:"patient",caserate_code:"caserate_code",selected_ticket_number:"selected_ticket_number",selected_series_lhio:"selected_series_lhio",selected_transmission_control_no:"selected_transmission_control_no"},outputs:{modalToggle:"modalToggle"},decls:24,vars:9,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","55"],[1,"relative","p-4","w-full","max-w-4xl","h-full","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],["type","button",1,"disabled:bg-gray-400","bg-white","px-3","py-1","text-blue-500","rounded-md",3,"disabled","click"],[1,"pr-2",3,"icon"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],["class","grid grid-cols-3 gap-x-4 mx-5 my-2",4,"ngIf"],["class","shadow-md sm:rounded-lg m-4",4,"ngIf"],["class","grid grid-cols-1 m-8 rounded-md border border-rose-500 bg-rose-100 text-rose-700 p-5",4,"ngIf"],["class","grid grid-cols-1 mt-16",4,"ngIf"],[1,"flex","justify-between","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],[4,"ngFor","ngForOf"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-300","rounded","text-sm","font-medium","px-6","py-2.5","transition","duration-150","ease-in-out","transform","hover:scale-110",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[3,"url","delete_id","delete_desc","toggleModal",4,"ngIf"],[1,"grid","grid-cols-3","gap-x-4","mx-5","my-2"],["id","suffix_name","name","suffix_name",1,"input","mt-5",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","justify-center","mx-auto","py-5"],["type","file","id","formFile",1,"form-control","w-full","px-3","py-1.5","text-base","font-normal","text-gray-700","bg-white","bg-clip-padding","border","border-solid","border-gray-300","rounded-lg","transition","ease-in-out","m-0","focus:text-gray-700","focus:bg-white","focus:border-blue-600","focus:outline-none",3,"change"],["type","button",1,"mt-5","disabled:bg-gray-400","py-2","px-3","mb-5","bg-blue-500","text-white","rounded-lg","text-sm",3,"disabled","click"],[3,"icon","spin"],[3,"value"],[1,"shadow-md","sm:rounded-lg","m-4"],[1,"table-fixed","w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6","text-center","w-3/12"],["scope","col",1,"py-3","px-6","text-center","w-7/12"],["scope","col",1,"py-3","px-6","text-center","w-2/12"],[4,"ngIf"],["class","bg-white border-b",4,"ngFor","ngForOf"],[1,"bg-white","border-b"],[1,"py-4","px-6","text-center","w-3/12"],[1,"py-4","px-6","w-7/12","whitespace-normal"],[1,"py-4","px-6","text-center","w-2/12"],[1,"mx-0","my-0","text-rose-500","hover:cursor-pointer","flex-none","mr-2",3,"icon","click"],["colspan","3"],[1,"grid","grid-cols-1","my-14"],[1,"flex","justify-center","text-blue-500"],["spin","true",3,"icon"],[1,"flex","justify-center"],[1,"grid","grid-cols-1","m-8","rounded-md","border","border-rose-500","bg-rose-100","text-rose-700","p-5"],[1,"flex","mb-5"],[1,"flex","justify-end"],["type","button",1,"btn-save","bg-gray-400",3,"disabled","click"],["type","button",1,"btn-save","bg-rose-500","ml-5",3,"disabled","click"],["spin","true","class","pr-2",3,"icon",4,"ngIf"],["spin","true",1,"pr-2",3,"icon"],[1,"grid","grid-cols-1","mt-16"],[3,"url","delete_id","delete_desc","toggleModal"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5),e.qZA(),e.TgZ(6,"div")(7,"button",5),e.NdJ("click",function(){return o.getEncryptedXml()}),e._UZ(8,"fa-icon",6),e._uU(9," Upload Required Docs "),e.qZA()()(),e.TgZ(10,"div",7),e.YNc(11,m,10,5,"div",8),e.YNc(12,w,12,2,"div",9),e.YNc(13,A,14,5,"div",10),e.YNc(14,E,5,1,"div",11),e.qZA(),e.TgZ(15,"div",12)(16,"div")(17,"strong"),e._uU(18,"Required documents:"),e.qZA(),e.YNc(19,O,3,2,"span",13),e.qZA(),e.TgZ(20,"button",14),e.NdJ("click",function(){return o.closeModal()}),e._uU(21,"Close"),e.qZA()()()()(),e._UZ(22,"div",15),e.YNc(23,F,1,3,"app-delete-item",16)),2&i&&(e.xp6(5),e.hij(" CLAIM: ",o.selected_pHospitalTransmittalNo," "),e.xp6(2),e.Q6J("disabled",o.is_uploading||!o.show_form||o.show_confirm_form),e.xp6(1),e.Q6J("icon",o.faUpload),e.xp6(3),e.Q6J("ngIf",!o.is_retrieving_xml&&!o.show_confirm_form),e.xp6(1),e.Q6J("ngIf",!o.is_retrieving_xml&&!o.show_confirm_form),e.xp6(1),e.Q6J("ngIf",!o.is_retrieving_xml&&o.show_confirm_form),e.xp6(1),e.Q6J("ngIf",o.is_retrieving_xml),e.xp6(5),e.Q6J("ngForOf",o.required_docs),e.xp6(4),e.Q6J("ngIf",o.modals["delete-item"]))},dependencies:[r.sg,r.O5,d.BN,c.YN,c.Kr,c.EJ,c.JJ,c.On,g.N]}),l})()},9366:(v,b,a)=>{a.d(b,{q:()=>x});var e=a(6895),t=a(2216),f=a(6205),p=a(4006),h=a(2965),r=a(4346),d=a(7966),c=a(6491),g=a(4650);let x=(()=>{class m{}return m.\u0275fac=function(C){return new(C||m)},m.\u0275mod=g.oAB({type:m}),m.\u0275inj=g.cJS({imports:[e.ez,t.uH,f.X,p.UX,p.u5,h.Tm,r.K,d.a,c.N]}),m})()},6491:(v,b,a)=>{a.d(b,{N:()=>c});var e=a(4650),t=a(4006),f=a(2216),p=a(2687),h=a(4691),r=a(7185);const d=["confirmCode"];let c=(()=>{class g{generateCode(){this.is_loading=!1,this.confirmation_code=null,this.confirm_code=Math.floor(1e3*Math.random()).toString().padStart(4,"0")}onSubmit(){this.is_loading=!0,this.confirm_code===this.confirmation_code?this.http.delete(this.url,this.delete_id).subscribe({next:()=>{this.is_loading=!1,this.toastr.error("Record was deleted!"),this.closeModal()},error:m=>{console.log(m),this.is_loading=!1,this.generateCode()}}):(this.generateCode(),this.toastr.info("Code mismatch, please try again","Incorrect Code"))}closeModal(){this.toggleModal.emit("delete-item")}constructor(m,u){this.http=m,this.toastr=u,this.toggleModal=new e.vpe,this.faTrash=p.$aW,this.confirm_code="0000",this.is_loading=!1}ngOnChanges(m){this.generateCode()}ngAfterViewInit(){this.inputElement.nativeElement.focus()}}return g.\u0275fac=function(m){return new(m||g)(e.Y36(h.O),e.Y36(r._W))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-delete-item"]],viewQuery:function(m,u){if(1&m&&e.Gf(d,5),2&m){let C;e.iGM(C=e.CRH())&&(u.inputElement=C.first)}},inputs:{url:"url",delete_id:"delete_id",delete_desc:"delete_desc"},outputs:{toggleModal:"toggleModal"},standalone:!0,features:[e.TTD,e.jDz],decls:29,vars:8,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-red-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"flex","item-start","flex-wrap","pb-5"],[1,"grid","grid-cols-3","px-5","py-5","mt-10","mx-10","w-full","bg-red-50","rounded-lg","text-center"],[1,"col-span-3","text-left","mb-2","pb-2","border-b","border-slate-200"],[1,"col-span-1","text-sm","px-5","py-2","mt-2"],[1,"block","mb-3"],[1,"font-bold","text-2xl","select-none"],["for","confirmCode"],["name","confirmCode","type","text",1,"mt-2","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","pl-3","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModel","keyup.enter","ngModelChange"],["confirmCode",""],[1,"col-span-1","mt-11"],["type","button",1,"my-auto","text-white","bg-red-500","enabled:hover:ring-2","enabled:focus:outline-none","enabled:hover:ring-red-300","disabled:bg-gray-300","font-medium","rounded","text-sm","px-6","py-2.5","text-center","transition","duration-150","ease-in-out",3,"disabled","click"],[1,"mx-0","my-0","text-white",3,"icon"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"text-white","bg-gray-400","hover:ring-2","focus:outline-none","hover:ring-gray-200","rounded","text-sm","font-medium","my-2","px-6","py-2.5","transition","duration-150","ease-in-out",3,"disabled","click"],[1,"opacity-50","fixed","inset-0","z-[59]","bg-black"]],template:function(m,u){1&m&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5),e.qZA()(),e.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),e._uU(10),e.qZA(),e.TgZ(11,"div",9)(12,"span",10),e._uU(13,"Delete Code"),e.qZA(),e.TgZ(14,"span",11),e._uU(15),e.qZA()(),e.TgZ(16,"div",9)(17,"label",12),e._uU(18,"Enter Code"),e.qZA(),e.TgZ(19,"input",13,14),e.NdJ("keyup.enter",function(){return u.onSubmit()})("ngModelChange",function(T){return u.confirmation_code=T}),e.qZA()(),e.TgZ(21,"div",15)(22,"button",16),e.NdJ("click",function(){return u.onSubmit()}),e._UZ(23,"fa-icon",17),e._uU(24," Delete "),e.qZA()()()()(),e.TgZ(25,"div",18)(26,"button",19),e.NdJ("click",function(){return u.closeModal()}),e._uU(27,"Cancel"),e.qZA()()()()(),e._UZ(28,"div",20)),2&m&&(e.xp6(5),e.AsE(" Delete ",u.delete_desc,": ",u.delete_id," "),e.xp6(5),e.hij(" Your are about to delete a ",u.delete_desc," record for this patient. Please enter the generated delete code in order to proceed. "),e.xp6(5),e.Oqu(u.confirm_code),e.xp6(4),e.Q6J("ngModel",u.confirmation_code),e.xp6(3),e.Q6J("disabled",!u.confirmation_code||u.is_loading),e.xp6(1),e.Q6J("icon",u.faTrash),e.xp6(3),e.Q6J("disabled",u.is_loading))},dependencies:[f.uH,f.BN,t.u5,t.Fj,t.JJ,t.On],changeDetection:0}),g})()},4346:(v,b,a)=>{a.d(b,{I:()=>t,K:()=>f});var e=a(4650);let t=(()=>{class p{constructor(){this._printStyle=[],this.previewOnly=!1,this.useExistingCss=!1,this.printDelay=0,this._styleSheetFile=""}set printStyle(r){for(let d in r)r.hasOwnProperty(d)&&this._printStyle.push((d+JSON.stringify(r[d])).replace(/['"]+/g,""));this.returnStyleValues()}returnStyleValues(){return`<style> ${this._printStyle.join(" ").replace(/,/g,";")} </style>`}set styleSheetFile(r){let d=function(c){return`<link rel="stylesheet" type="text/css" href="${c}">`};if(-1!==r.indexOf(",")){const c=r.split(",");for(let g of c)this._styleSheetFile=this._styleSheetFile+d(g)}else this._styleSheetFile=d(r)}returnStyleSheetLinkTags(){return this._styleSheetFile}getElementTag(r){const d=[],c=document.getElementsByTagName(r);for(let g=0;g<c.length;g++)d.push(c[g].outerHTML);return d.join("\r\n")}getFormData(r){for(var d=0;d<r.length;d++)r[d].defaultValue=r[d].value,r[d].checked&&(r[d].defaultChecked=!0)}getHtmlContents(){let r=document.getElementById(this.printSectionId),d=r.getElementsByTagName("input");this.getFormData(d);let c=r.getElementsByTagName("textarea");return this.getFormData(c),r.innerHTML}print(){let r,d,c="",g="";const x=this.getElementTag("base");this.useExistingCss&&(c=this.getElementTag("style"),g=this.getElementTag("link")),r=this.getHtmlContents(),d=window.open("","_blank","top=0,left=0,height=auto,width=auto"),d.document.open(),d.document.write(`\n      <html>\n        <head>\n          <title>${this.printTitle?this.printTitle:""}</title>\n          ${x}\n          ${this.returnStyleValues()}\n          ${this.returnStyleSheetLinkTags()}\n          ${c}\n          ${g}\n        </head>\n        <body>\n          ${r}\n          <script defer>\n            function triggerPrint(event) {\n              window.removeEventListener('load', triggerPrint, false);\n              ${this.previewOnly?"":`setTimeout(function() {\n                closeWindow(window.print());\n              }, ${this.printDelay});`}\n            }\n            function closeWindow(){\n                window.close();\n            }\n            window.addEventListener('load', triggerPrint, false);\n          <\/script>\n        </body>\n      </html>`),d.document.close()}}return p.\u0275fac=function(r){return new(r||p)},p.\u0275dir=e.lG2({type:p,selectors:[["button","ngxPrint",""]],hostBindings:function(r,d){1&r&&e.NdJ("click",function(){return d.print()})},inputs:{previewOnly:"previewOnly",printSectionId:"printSectionId",printTitle:"printTitle",useExistingCss:"useExistingCss",printDelay:"printDelay",printStyle:"printStyle",styleSheetFile:"styleSheetFile"}}),p})(),f=(()=>{class p{}return p.\u0275fac=function(r){return new(r||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({}),p})()}}]);