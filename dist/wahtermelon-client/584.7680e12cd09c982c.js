"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[584],{6584:(I,u,s)=>{s.r(u),s.d(u,{CalendarAppointmentModule:()=>F});var r=s(6814),c=s(3602),m=s(590),d=s(4535),g=s(8832),_=s(3166),e=s(5879),f=s(265),h=s(5597);function w(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"tr",14)(1,"td",15)(2,"button",16),e.NdJ("click",function(){const l=e.CHM(n).$implicit,p=e.oxw();return e.KtG(p.openItr(l.patient_id))}),e._uU(3),e.qZA()(),e.TgZ(4,"td",15),e._uU(5),e.qZA()()}if(2&t){const n=i.$implicit;e.xp6(3),e.hij(" ",n.name," "),e.xp6(2),e.hij(" ",n.appointment_desc," ")}}let C=(()=>{var t;class i{openItr(a){this.router.navigate(["/patient/itr",{id:a}])}closeModal(){this.toggleModal.emit()}constructor(a){this.router=a,this.toggleModal=new e.vpe}}return(t=i).\u0275fac=function(a){return new(a||t)(e.Y36(c.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-name-list"]],inputs:{name_list:"name_list"},outputs:{toggleModal:"toggleModal"},decls:22,vars:6,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-7xl","h-full","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"overflow-x-auto","relative","shadow-md","sm:rounded-lg","m-4"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"py-3","px-6"],["class","bg-white border-b",4,"ngFor","ngForOf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"text-white","bg-red-500","hover:ring-2","focus:outline-none","hover:ring-red-300","rounded","text-sm","font-medium","px-6","py-2.5","transition","duration-150","ease-in-out","transform","hover:scale-110",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"bg-white","border-b"],[1,"py-4","px-6"],[1,"hover:cursor-pointer","hover:text-white","hover:bg-blue-500","px-3","py-2","rounded-md",3,"click"]],template:function(a,o){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5),e.ALo(6,"date"),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6)(9,"table",7)(10,"thead",8)(11,"tr")(12,"th",9),e._uU(13,"Name"),e.qZA(),e.TgZ(14,"th",9),e._uU(15,"Appointment Type"),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,w,6,2,"tr",10),e.qZA()()()(),e.TgZ(18,"div",11)(19,"button",12),e.NdJ("click",function(){return o.closeModal()}),e._uU(20,"Close"),e.qZA()()()()(),e._UZ(21,"div",13)),2&a&&(e.xp6(5),e.hij(" List of patients ",e.Dn7(6,2,o.name_list[0].appointment_date,"MM/dd/yyyy","Asia/Manila")," "),e.xp6(12),e.Q6J("ngForOf",o.name_list))},dependencies:[r.sg,r.uU]}),i})();function y(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"mwl-calendar-month-view",12),e.NdJ("dayClicked",function(o){e.CHM(n);const l=e.oxw(2);return e.KtG(l.handleEvent("Clicked",o))})("eventClicked",function(o){e.CHM(n);const l=e.oxw(2);return e.KtG(l.handleEvent("Clicked",o.event))}),e.qZA()}if(2&t){const n=e.oxw(2),a=e.MAs(18);e.Q6J("viewDate",n.viewDate)("events",n.events)("cellTemplate",a)}}function x(t,i){if(1&t&&(e.TgZ(0,"div",10),e.YNc(1,y,1,3,"mwl-calendar-month-view",11),e.qZA()),2&t){const n=e.oxw();e.Q6J("ngSwitch",n.view),e.xp6(1),e.Q6J("ngSwitchCase","month")}}function A(t,i){if(1&t&&(e.TgZ(0,"div",13)(1,"div",14),e._UZ(2,"fa-icon",15),e.qZA(),e.TgZ(3,"div",16),e._uU(4),e.ALo(5,"date"),e.qZA()()),2&t){const n=e.oxw();e.xp6(2),e.Q6J("icon",n.faCircleNotch),e.xp6(2),e.hij(" Fetching schedule for ",e.xi3(5,2,n.viewDate,"MMMM y")," ")}}function b(t,i){if(1&t&&(e.TgZ(0,"span",20),e._uU(1),e.qZA()),2&t){const n=e.oxw().day;e.xp6(1),e.hij(" ",n.events[0].data.length," ")}}function D(t,i){if(1&t&&(e.TgZ(0,"div",17),e.YNc(1,b,2,1,"span",18),e.TgZ(2,"span",19),e._uU(3),e.ALo(4,"calendarDate"),e.qZA()()),2&t){const n=i.day,a=i.locale;e.xp6(1),e.Q6J("ngIf",n.badgeTotal>0),e.xp6(2),e.hij(" ",e.Dn7(4,2,n.date,"monthViewDayNumber",a)," ")}}function M(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"app-name-list",21),e.NdJ("toggleModal",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.toggleModal())}),e.qZA()}if(2&t){const n=e.oxw();e.Q6J("name_list",n.name_list)}}const T={red:{primary:"#ad2121",secondary:"#FAE3E3"},blue:{primary:"#1e90ff",secondary:"#D1E8FF"},yellow:{primary:"#e3bc08",secondary:"#FDF1BA"}},Z=[{path:"",component:(()=>{var t;class i{handleEvent(a,o){let l=o;l.data?(this.name_list=l.data?l.data:l.day.events[0].data,this.modal["name-list"]=!this.modal["name-list"]):l.day.events.length>0&&(this.name_list=l.day.events[0].data,this.modal["name-list"]=!this.modal["name-list"])}toggleModal(){this.modal["name-list"]=!this.modal["name-list"]}dayClicked({date:a,events:o}){(0,g.Z)(a,this.viewDate)&&(this.activeDayIsOpen=!((0,_.Z)(this.viewDate,a)&&!0===this.activeDayIsOpen||0===o.length),this.viewDate=a)}loadSchedules(){this.activeDayIsOpen=!1,this.calendar_loading=!0,this.selected_month=(0,r.p6)(this.viewDate,"MM","en-us"),this.selected_year=(0,r.p6)(this.viewDate,"yyyy","en-us"),this.http.get("appointment/schedule",{params:{month:this.selected_month,year:this.selected_year,disable_filter:1,per_page:"all"}}).subscribe({next:o=>{console.log(o);let l=[];Object.entries(o[0]).forEach(([p,U])=>{let v=U,j={start:new Date(p),title:v.length,color:T.yellow,data:v};l.push(j)}),this.calendar_loading=!1,this.events=l}})}constructor(a){this.http=a,this.view=d.wr.Month,this.viewDate=new Date,this.faChevronLeft=m.A35,this.faChevronRight=m._tD,this.faCircleNotch=m.IJ7,this.calendar_loading=!1,this.activeDayIsOpen=!1,this.events=[],this.name_list=[],this.modal=[]}ngOnInit(){this.loadSchedules()}}return(t=i).\u0275fac=function(a){return new(a||t)(e.Y36(f.O))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-calendar-appointment"]],decls:20,vars:13,consts:[[1,"flex","flex-col","pt-5"],[1,"flex","justify-center","mt-3"],[1,"flex","justify-between","text-xl","font-semibold","w-3/5"],["type","button","mwlCalendarPreviousView","",1,"bg-blue-500","rounded-full","px-4","py-1","text-sm","text-white","font-normal",3,"view","viewDate","viewDateChange"],[3,"icon"],["type","button","mwlCalendarNextView","",1,"bg-blue-500","rounded-full","px-4","py-1","text-sm","text-white","font-normal",3,"view","viewDate","viewDateChange"],["class","w-3/5",3,"ngSwitch",4,"ngIf"],["class","w-3/5 flex flex-col",4,"ngIf"],["customCellTemplate",""],[3,"name_list","toggleModal",4,"ngIf"],[1,"w-3/5",3,"ngSwitch"],[3,"viewDate","events","cellTemplate","dayClicked","eventClicked",4,"ngSwitchCase"],[3,"viewDate","events","cellTemplate","dayClicked","eventClicked"],[1,"w-3/5","flex","flex-col"],[1,"flex","justify-center","text-blue-500"],["spin","true",3,"icon"],[1,"flex","justify-center"],[1,"cal-cell-top"],["class","cal-day-badge",4,"ngIf"],[1,"cal-day-number"],[1,"cal-day-badge"],[3,"name_list","toggleModal"]],template:function(a,o){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"button",3),e.NdJ("viewDateChange",function(p){return o.viewDate=p})("viewDateChange",function(){return o.loadSchedules()}),e._UZ(5,"fa-icon",4),e._uU(6," Previous "),e.qZA()(),e.TgZ(7,"div"),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"div")(11,"button",5),e.NdJ("viewDateChange",function(p){return o.viewDate=p})("viewDateChange",function(){return o.loadSchedules()}),e._uU(12," Next "),e._UZ(13,"fa-icon",4),e.qZA()()()(),e.TgZ(14,"div",1),e.YNc(15,x,2,2,"div",6),e.YNc(16,A,6,5,"div",7),e.qZA()(),e.YNc(17,D,5,6,"ng-template",null,8,e.W1O),e.YNc(19,M,1,1,"app-name-list",9)),2&a&&(e.xp6(4),e.Q6J("view",o.view)("viewDate",o.viewDate),e.xp6(1),e.Q6J("icon",o.faChevronLeft),e.xp6(3),e.hij(" ",e.xi3(9,10,o.viewDate,"MMMM y")," "),e.xp6(3),e.Q6J("view",o.view)("viewDate",o.viewDate),e.xp6(2),e.Q6J("icon",o.faChevronRight),e.xp6(2),e.Q6J("ngIf",!o.calendar_loading),e.xp6(1),e.Q6J("ngIf",o.calendar_loading),e.xp6(3),e.Q6J("ngIf",o.modal["name-list"]))},dependencies:[r.O5,r.RF,r.n9,h.BN,d.YX,d.MG,d.GH,C,r.uU,d.vk],styles:["h3[_ngcontent-%COMP%]{margin:0 0 10px}pre[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:15px}"]}),i})()}];let N=(()=>{var t;class i{}return(t=i).\u0275fac=function(a){return new(a||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.Bz.forChild(Z),c.Bz]}),i})();var J=s(7801),k=s(6223);let F=(()=>{var t;class i{}return(t=i).\u0275fac=function(a){return new(a||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[r.ez,N,h.uH,k.UX,d._8.forRoot({provide:d._A,useFactory:J.x})]}),i})()}}]);