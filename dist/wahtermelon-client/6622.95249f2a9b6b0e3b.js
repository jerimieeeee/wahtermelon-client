"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[6622],{6622:(q,m,s)=>{s.r(m),s.d(m,{MentalHealthModule:()=>K});var c=s(177),p=s(2517),r=s(5383),t=s(4438),h=s(3318),d=s(5794),f=s(9217),G=s(8588),u=s(60),g=s(8437),b=s(2038),v=s(2505),M=s(9596),x=s(9932),_=s(9417);function j(n,a){if(1&n&&t.nrm(0,"fa-icon",13),2&n){const e=t.XpG();t.Y8G("icon",e.faCircleNotch)}}function C(n,a){if(1&n&&t.nrm(0,"fa-icon",14),2&n){const e=t.XpG();t.Y8G("icon",e.faSave)}}let I=(()=>{class n{saveRegistration(){this.is_saving=!0,this.http.post("mental-health/records",this.treatmentForm.value).subscribe({next:e=>{console.log(e),this.toastr.success("Mental Health successfully saved.","Success"),this.updateSelectedMh.emit(e.data),this.is_saving=!1},error:e=>{console.log(e.error)}})}patchValue(){this.treatmentForm=this.formBuilder.nonNullable.group({id:[this.selected_mh_consult?this.selected_mh_consult.id:null],patient_id:[this.patient_id],treatment_done:[!!this.selected_mh_consult&&this.selected_mh_consult.treatment_done],treatment_start:[this.selected_mh_consult?this.selected_mh_consult.treatment_start:null,_.k0.required],treatment_end:[this.selected_mh_consult?this.selected_mh_consult.treatment_end:null,_.k0.required]})}constructor(e,o,l){this.http=e,this.formBuilder=o,this.toastr=l,this.updateSelectedMh=new t.bkB,this.patient_id=this.http.getUrlParams().patient_id,this.faSave=r.hSh,this.faCircleNotch=r.s4k,this.is_saving=!1,this.max_date=(0,c.Yq)(new Date,"yyyy-MM-dd","en-US","Asia/Manila"),this.treatmentForm=new _.gE({id:new _.MJ(""),patient_id:new _.MJ(""),treatment_done:new _.MJ(!1),treatment_start:new _.MJ(""),treatment_end:new _.MJ("")})}ngOnInit(){this.patchValue()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(h.k),t.rXU(_.ok),t.rXU(d.tw))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-registration"]],inputs:{selected_mh_consult:"selected_mh_consult"},outputs:{updateSelectedMh:"updateSelectedMh"},standalone:!1,decls:16,vars:7,consts:[[1,"flex-col","w-full","p-5"],[3,"ngSubmit","formGroup"],[1,"flex","w-full","justify-center"],[1,"w-1/2","mr-5"],["for","treatment_start"],["type","date","name","treatment_start","id","treatment_start","formControlName","treatment_start",1,"input",3,"max"],[1,"w-1/2"],["for","treatment_end"],["type","date","name","treatment_end","id","treatment_end","formControlName","treatment_end",1,"input",3,"max"],[1,"flex","w-full","justify-end","pt-5"],["type","submit",1,"btn-save","w-40",3,"disabled"],["animation","spin",3,"icon",4,"ngIf"],[3,"icon",4,"ngIf"],["animation","spin",3,"icon"],[3,"icon"]],template:function(o,l){1&o&&(t.j41(0,"div",0)(1,"form",1),t.bIt("ngSubmit",function(){return l.saveRegistration()}),t.j41(2,"div",2)(3,"div",3)(4,"label",4),t.EFF(5,"Start Date"),t.k0s(),t.nrm(6,"input",5),t.k0s(),t.j41(7,"div",6)(8,"label",7),t.EFF(9,"End Date"),t.k0s(),t.nrm(10,"input",8),t.k0s()(),t.j41(11,"div",9)(12,"button",10),t.DNE(13,j,1,1,"fa-icon",11)(14,C,1,1,"fa-icon",12),t.EFF(15),t.k0s()()()()),2&o&&(t.R7$(),t.Y8G("formGroup",l.treatmentForm),t.R7$(5),t.Y8G("max",l.max_date),t.R7$(4),t.Y8G("max",l.max_date),t.R7$(2),t.Y8G("disabled",l.is_saving||!l.treatmentForm.valid),t.R7$(),t.Y8G("ngIf",l.is_saving),t.R7$(),t.Y8G("ngIf",!l.is_saving),t.R7$(),t.SpI(" ",l.selected_mh_consult&&l.selected_mh_consult.id?l.is_saving?"Updating":"Update":l.is_saving?"Saving":"Save"," "))},dependencies:[c.bT,u.aY,_.qT,_.me,_.BC,_.cb,_.j4,_.JD],encapsulation:2})}}return n})();function R(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",2),t.bIt("click",function(){t.eBV(e);const l=t.XpG();return t.Njj(l.switchPage(2))}),t.EFF(1," TREATMENT "),t.k0s()}if(2&n){const e=t.XpG();t.HbH(2===e.page?"tabs-main-true rounded-t-md":"tabs-main-false")}}function H(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",2),t.bIt("click",function(){t.eBV(e);const l=t.XpG();return t.Njj(l.switchPage(3))}),t.EFF(1," ECLAIMS "),t.k0s()}if(2&n){const e=t.XpG();t.HbH(3===e.page?"tabs-main-true rounded-t-md":"tabs-main-false")}}function T(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",11),t.bIt("click",function(){t.eBV(e);const l=t.XpG();return t.Njj(l.toggleModal("end_visit"))}),t.nrm(1,"fa-icon",12),t.EFF(2," End Visit "),t.k0s()}if(2&n){const e=t.XpG();t.R7$(),t.Y8G("icon",e.faDoorClosed)}}function k(n,a){if(1&n){const e=t.RV6();t.j41(0,"tr")(1,"td",20),t.EFF(2),t.nI1(3,"date"),t.nI1(4,"date"),t.k0s(),t.j41(5,"td",20)(6,"button",21),t.bIt("click",function(){const l=t.eBV(e),i=l.$implicit,z=l.index,Q=t.XpG(3);return t.Njj(Q.switchPage(2,i,z))}),t.EFF(7,"View Details"),t.k0s()()()}if(2&n){const e=a.$implicit;t.R7$(2),t.Lme("",t.i5U(3,2,e.treatment_start,"MM/dd/yyyy")," - ",t.i5U(4,5,e.treatment_end,"MM/dd/yyyy"),"")}}function w(n,a){if(1&n){const e=t.RV6();t.j41(0,"tr")(1,"td",22)(2,"span",23),t.EFF(3,"No treatment found."),t.k0s(),t.nrm(4,"br")(5,"br"),t.j41(6,"button",24),t.bIt("click",function(){t.eBV(e);const l=t.XpG(3);return t.Njj(l.switchPage(2))}),t.EFF(7,"Create new"),t.k0s()()()}}function y(n,a){if(1&n&&(t.j41(0,"table",16)(1,"thead")(2,"tr",17)(3,"th",18),t.EFF(4,"Start Date - End Date"),t.k0s(),t.j41(5,"th",18),t.EFF(6,"Actions"),t.k0s()()(),t.j41(7,"tbody"),t.DNE(8,k,8,8,"tr",19)(9,w,8,0,"tr",8),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(8),t.Y8G("ngForOf",e.treatments),t.R7$(),t.Y8G("ngIf",0===e.treatments.length)}}function F(n,a){if(1&n&&(t.j41(0,"div",25)(1,"div",26),t.nrm(2,"fa-icon",27),t.k0s(),t.j41(3,"div",28),t.EFF(4," Loading list... "),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(2),t.Y8G("icon",e.faCircleNotch)}}function X(n,a){if(1&n&&(t.j41(0,"div",13),t.DNE(1,y,10,2,"table",14)(2,F,5,1,"div",15),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("ngIf",!e.is_loading),t.R7$(),t.Y8G("ngIf",e.is_loading)}}function E(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",31),t.bIt("click",function(){t.eBV(e);const l=t.XpG(2);return t.Njj(l.switchTab(17))}),t.EFF(1," COMPLAINT AND HISTORY "),t.k0s()}if(2&n){const e=t.XpG(2);t.HbH(17===e.module?"tabs-main-true":"tabs-main-false")}}function Y(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",31),t.bIt("click",function(){t.eBV(e);const l=t.XpG(2);return t.Njj(l.switchTab(18))}),t.EFF(1," DIAGNOSIS & PRESCRIPTION "),t.k0s()}if(2&n){const e=t.XpG(2);t.HbH(18===e.module?"tabs-main-true":"tabs-main-false")}}function $(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",31),t.bIt("click",function(){t.eBV(e);const l=t.XpG(2);return t.Njj(l.switchTab(19))}),t.EFF(1," SUPPLIES "),t.k0s()}if(2&n){const e=t.XpG(2);t.HbH(19===e.module?"tabs-main-true":"tabs-main-false")}}function N(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",31),t.bIt("click",function(){t.eBV(e);const l=t.XpG(2);return t.Njj(l.switchTab(20))}),t.EFF(1," CASE RATE "),t.k0s()}if(2&n){const e=t.XpG(2);t.HbH(20===e.module?"tabs-main-true":"tabs-main-false")}}function V(n,a){if(1&n){const e=t.RV6();t.j41(0,"nav",29)(1,"div",30)(2,"button",31),t.bIt("click",function(){t.eBV(e);const l=t.XpG();return t.Njj(l.switchTab(1))}),t.EFF(3," REGISTRATION "),t.k0s(),t.DNE(4,E,2,2,"button",32)(5,Y,2,2,"button",32)(6,$,2,2,"button",32)(7,N,2,2,"button",32),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(2),t.HbH(1===e.module?"tabs-main-true":"tabs-main-false"),t.R7$(2),t.Y8G("ngIf",null==e.selected_mh_consult?null:e.selected_mh_consult.id),t.R7$(),t.Y8G("ngIf",null==e.selected_mh_consult?null:e.selected_mh_consult.id),t.R7$(),t.Y8G("ngIf",null==e.selected_mh_consult?null:e.selected_mh_consult.id),t.R7$(),t.Y8G("ngIf",null==e.selected_mh_consult?null:e.selected_mh_consult.id)}}function S(n,a){if(1&n&&(t.j41(0,"div"),t.nrm(1,"app-eclaims",33),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("program_id",e.selected_mh_consult.id)("program_name","mh")("max_date",e.max_date)("selected_case",e.selected_mh_consult)}}function B(n,a){if(1&n){const e=t.RV6();t.j41(0,"app-registration",37),t.bIt("updateSelectedMh",function(l){t.eBV(e);const i=t.XpG(2);return t.Njj(i.updateSelectedMh(l))}),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("selected_mh_consult",e.selected_mh_consult)}}function D(n,a){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"app-complaint-history",38),t.bIt("switchPage",function(l){t.eBV(e);const i=t.XpG(2);return t.Njj(i.switchPage(l))})("toggleModal",function(l){t.eBV(e);const i=t.XpG(2);return t.Njj(i.toggleModal(l))}),t.k0s()()}if(2&n){const e=t.XpG(2);t.R7$(),t.Y8G("toggle_content",e.toggle_content)("consult_details",e.consult_details)}}function P(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",39)(1,"app-final-dx",40),t.bIt("loadConsult",function(l){t.eBV(e);const i=t.XpG(2);return t.Njj(i.loadConsult(l))}),t.k0s(),t.j41(2,"app-prescription",41),t.bIt("loadConsult",function(l){t.eBV(e);const i=t.XpG(2);return t.Njj(i.loadConsult(l))}),t.k0s()()}if(2&n){const e=t.XpG(2);t.R7$(),t.Y8G("toggle_content",e.toggle_content)("consult_details",e.consult_details)("have_complaint",e.have_complaint)("allowed_to_edit",e.allowed_to_edit),t.R7$(),t.Y8G("toggle_content",e.toggle_content)("consult_details",e.consult_details)("have_complaint",e.have_complaint)("allowed_to_edit",e.allowed_to_edit)("user_id",e.user_id)}}function U(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",39)(1,"app-supplies",41),t.bIt("loadConsult",function(l){t.eBV(e);const i=t.XpG(2);return t.Njj(i.loadConsult(l))}),t.k0s()()}if(2&n){const e=t.XpG(2);t.R7$(),t.Y8G("toggle_content",e.toggle_content)("consult_details",e.consult_details)("have_complaint",e.have_complaint)("allowed_to_edit",e.allowed_to_edit)("user_id",e.user_id)}}function A(n,a){if(1&n&&(t.j41(0,"div",39),t.nrm(1,"app-caserate",42),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.Y8G("patient_id",e.selected_mh_consult.patient_id)("program_id",e.selected_mh_consult.id)("program_name","mh")("max_date",e.max_date)}}function O(n,a){if(1&n&&(t.j41(0,"div",34),t.DNE(1,B,1,1,"app-registration",35)(2,D,2,2,"div",8)(3,P,3,9,"div",36)(4,U,2,5,"div",36)(5,A,2,4,"div",36),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("ngIf",1===e.module),t.R7$(),t.Y8G("ngIf",17===e.module),t.R7$(),t.Y8G("ngIf",18===e.module),t.R7$(),t.Y8G("ngIf",19===e.module),t.R7$(),t.Y8G("ngIf",20===e.module)}}function J(n,a){if(1&n){const e=t.RV6();t.j41(0,"app-end-visit",43),t.bIt("toggleModal",function(l){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleModal(l))}),t.k0s()}if(2&n){const e=t.XpG();t.Y8G("consult_id",null==e.consult_details?null:e.consult_details.id)("consult_date",null==e.consult_details?null:e.consult_details.consult_date)("patient_id",null==e.consult_details?null:e.consult_details.patient.id)("pt_group","mh")}}const L=[{path:"",component:(()=>{class n{updateSelectedMh(e){e&&(this.selected_mh_consult=e,this.treatments[this.index_ofSelectedMh]=e)}switchPage(e,o,l){this.page=e||1,2===e&&(this.module=1),o&&(this.selected_mh_consult=o,this.index_ofSelectedMh=l)}switchTab(e){this.page=2,this.module=e||1}toggleModal(e){this.modals[e]=!this.modals[e]}getMentalHealthRecords(){this.http.get("mental-health/records",{params:{patient_id:this.http.getUrlParams().patient_id}}).subscribe({next:e=>{console.log(e),this.treatments=e.data,this.user_facility=e.user_facility,this.is_loading=!1},error:e=>{this.toastr.error(e.error.message,"Error")}})}loadConsult(){this.http.get("consultation/records",{params:{id:this.http.getUrlParams().consult_id}}).subscribe({next:e=>{console.log(e),this.consult_details=e.data[0],this.getMentalHealthRecords()},error:e=>{this.toastr.error(e.error.message,"Error")}})}constructor(e,o){this.http=e,this.toastr=o,this.faDoorClosed=r.K_I,this.faCircleNotch=r.s4k,this.page=1,this.treatments=[],this.modals=[],this.show_form=!1,this.allowed_to_edit=!0,this.have_complaint=!1,this.toggle_content=!0,this.is_loading=!0}ngOnInit(){this.is_loading=!0,this.loadConsult()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(h.k),t.rXU(d.tw))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-mental-health"]],standalone:!1,decls:13,vars:10,consts:[[1,"flex"],[1,"mt-4","flex","flex-row","border-b","border-slate-300","text-xs"],[1,"tabs-main","w-36",3,"click"],["class","tabs-main w-36",3,"class","click",4,"ngIf"],[1,"ml-auto"],["type","button","class","btn-end-visit ml-auto mt-5",3,"click",4,"ngIf"],["class","flex w-full",4,"ngIf"],["class","mt-2 flex justify-between border-b border-slate-300 text-xs",4,"ngIf"],[4,"ngIf"],["class","flex w-full justify-center",4,"ngIf"],[3,"consult_id","consult_date","patient_id","pt_group","toggleModal",4,"ngIf"],["type","button",1,"btn-end-visit","ml-auto","mt-5",3,"click"],[1,"mr-1",3,"icon"],[1,"flex","w-full"],["class","w-full table-auto border-collapse border border-gray-200 shadow-md rounded-xl mt-3",4,"ngIf"],["class","flex flex-col w-full",4,"ngIf"],[1,"w-full","table-auto","border-collapse","border","border-gray-200","shadow-md","rounded-xl","mt-3"],[1,"bg-blue-500","text-white"],[1,"px-4","py-2"],[4,"ngFor","ngForOf"],[1,"border","px-4","py-2"],[1,"btn-save","px-3","py-1",3,"click"],["colspan","3",1,"text-center","py-4"],[1,"italic"],[1,"btn-add",3,"click"],[1,"flex","flex-col","w-full"],[1,"flex","justify-center","items-center","mt-20","text-blue-500"],["animaton","spin",3,"icon"],[1,"flex","justify-center","items-center"],[1,"mt-2","flex","justify-between","border-b","border-slate-300","text-xs"],[1,"flex","flex-row"],[1,"tabs-main","w-28",3,"click"],["class","tabs-main w-28",3,"class","click",4,"ngIf"],[1,"w-full",3,"program_id","program_name","max_date","selected_case"],[1,"flex","w-full","justify-center"],["class","w-1/2 justify-center m-3",3,"selected_mh_consult","updateSelectedMh",4,"ngIf"],["class","w-full",4,"ngIf"],[1,"w-1/2","justify-center","m-3",3,"updateSelectedMh","selected_mh_consult"],[3,"switchPage","toggleModal","toggle_content","consult_details"],[1,"w-full"],[3,"loadConsult","toggle_content","consult_details","have_complaint","allowed_to_edit"],[3,"loadConsult","toggle_content","consult_details","have_complaint","allowed_to_edit","user_id"],[3,"patient_id","program_id","program_name","max_date"],[3,"toggleModal","consult_id","consult_date","patient_id","pt_group"]],template:function(o,l){1&o&&(t.j41(0,"div",0)(1,"nav",1)(2,"button",2),t.bIt("click",function(){return l.switchPage(1)}),t.EFF(3," TREATMENT ARCHIVE "),t.k0s(),t.DNE(4,R,2,2,"button",3)(5,H,2,2,"button",3),t.k0s(),t.j41(6,"div",4),t.DNE(7,T,3,1,"button",5),t.k0s()(),t.DNE(8,X,3,2,"div",6)(9,V,8,6,"nav",7)(10,S,2,4,"div",8)(11,O,6,5,"div",9)(12,J,1,4,"app-end-visit",10)),2&o&&(t.R7$(2),t.HbH(1===l.page?"tabs-main-true rounded-t-md":"tabs-main-false"),t.R7$(2),t.Y8G("ngIf",l.selected_mh_consult||(null==l.selected_mh_consult?null:l.selected_mh_consult.facility_code)===l.user_facility),t.R7$(),t.Y8G("ngIf",l.selected_mh_consult||(null==l.selected_mh_consult?null:l.selected_mh_consult.facility_code)===l.user_facility),t.R7$(2),t.Y8G("ngIf",l.consult_details&&!(null!=l.consult_details&&l.consult_details.consult_done)),t.R7$(),t.Y8G("ngIf",1===l.page),t.R7$(),t.Y8G("ngIf",2===l.page),t.R7$(),t.Y8G("ngIf",3===l.page),t.R7$(),t.Y8G("ngIf",2===l.page),t.R7$(),t.Y8G("ngIf",l.modals.end_visit))},dependencies:[c.Sq,c.bT,f.u,G.i,u.aY,g.Z,b.W,v._,M.G,x.H,I,c.vh],encapsulation:2})}}return n})()}];let W=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[p.iI.forChild(L),p.iI]})}}return n})();var Z=s(4959);let K=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[c.MD,W,f.u,Z.u,u.dX,g.Z,_.X1,b.W,v._,M.G,x.H,d._B]})}}return n})()}}]);