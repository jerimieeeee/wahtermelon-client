"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[732],{1732:(ao,N,l)=>{l.r(N),l.d(N,{TbdotsModule:()=>so});var c=l(6895),w=l(5749),p=l(2687),t=l(4650),b=l(4691),h=l(2216),U=l(8696),i=l(4006),C=l(3396),v=l(7185);function O(o,s){if(1&o&&t._UZ(0,"fa-icon",34),2&o){const e=t.oxw();t.Q6J("icon",e.faCircleNotch)}}const g=function(o,s){return{"border-b-0":o,"border-t-0":s}};function M(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td",42),t._uU(2),t.qZA(),t.TgZ(3,"td",43),t._uU(4),t.qZA(),t.TgZ(5,"td",44),t.NdJ("click",function(){const a=t.CHM(e).$implicit,_=t.oxw(2).$implicit,d=t.oxw();return t.KtG(d.closeModal(_,a))}),t._uU(6),t.qZA(),t.TgZ(7,"td",43),t._uU(8),t.qZA(),t.TgZ(9,"td",43),t._uU(10),t.qZA(),t.TgZ(11,"td",43),t._uU(12),t.qZA(),t.TgZ(13,"td",45),t._uU(14),t.qZA(),t.TgZ(15,"td",45),t._uU(16),t.qZA(),t.TgZ(17,"td",45),t._uU(18),t.qZA(),t.TgZ(19,"td",45),t._uU(20),t.qZA(),t.TgZ(21,"td",45),t._uU(22),t.qZA(),t.TgZ(23,"td",45),t._uU(24),t.qZA(),t.TgZ(25,"td",46),t._uU(26),t.qZA()()}if(2&o){const e=s.$implicit,n=s.last,r=s.first;t.xp6(1),t.Q6J("ngClass",t.WLB(26,g,n,r)),t.xp6(1),t.Oqu(e.pPrimaryHCIFee),t.xp6(1),t.Q6J("ngClass",t.WLB(29,g,n,r)),t.xp6(1),t.Oqu(e.pPrimaryProfFee),t.xp6(1),t.Q6J("ngClass",t.WLB(32,g,n,r)),t.xp6(1),t.Oqu(e.pPrimaryCaseRate),t.xp6(1),t.Q6J("ngClass",t.WLB(35,g,n,r)),t.xp6(1),t.Oqu(e.pSecondaryHCIFee),t.xp6(1),t.Q6J("ngClass",t.WLB(38,g,n,r)),t.xp6(1),t.Oqu(e.pSecondaryProfFee),t.xp6(1),t.Q6J("ngClass",t.WLB(41,g,n,r)),t.xp6(1),t.Oqu(e.pSecondaryCaseRate),t.xp6(1),t.Q6J("ngClass",t.WLB(44,g,n,r)),t.xp6(1),t.Oqu(e.pCheckFacilityH1),t.xp6(1),t.Q6J("ngClass",t.WLB(47,g,n,r)),t.xp6(1),t.Oqu(e.pCheckFacilityH2),t.xp6(1),t.Q6J("ngClass",t.WLB(50,g,n,r)),t.xp6(1),t.Oqu(e.pCheckFacilityH3),t.xp6(1),t.Q6J("ngClass",t.WLB(53,g,n,r)),t.xp6(1),t.Oqu(e.pCheckFacilityASC),t.xp6(1),t.Q6J("ngClass",t.WLB(56,g,n,r)),t.xp6(1),t.Oqu(e.pCheckFacilityPCF),t.xp6(1),t.Q6J("ngClass",t.WLB(59,g,n,r)),t.xp6(1),t.Oqu(e.pCheckFacilityMAT),t.xp6(1),t.Q6J("ngClass",t.WLB(62,g,n,r)),t.xp6(1),t.Oqu(e.pCheckFacilityFSDC)}}function k(o,s){if(1&o&&(t.TgZ(0,"table",40),t.YNc(1,M,27,65,"tr",41),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.AMOUNT)}}function H(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"table",47)(1,"tr",48)(2,"td",49),t._uU(3),t.qZA(),t.TgZ(4,"td",50),t._uU(5),t.qZA(),t.TgZ(6,"td",51),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,a=t.oxw();return t.KtG(a.closeModal(r,r.AMOUNT))}),t._uU(7),t.qZA(),t.TgZ(8,"td",50),t._uU(9),t.qZA(),t.TgZ(10,"td",50),t._uU(11),t.qZA(),t.TgZ(12,"td",50),t._uU(13),t.qZA(),t.TgZ(14,"td",52),t._uU(15),t.qZA(),t.TgZ(16,"td",52),t._uU(17),t.qZA(),t.TgZ(18,"td",52),t._uU(19),t.qZA(),t.TgZ(20,"td",52),t._uU(21),t.qZA(),t.TgZ(22,"td",52),t._uU(23),t.qZA(),t.TgZ(24,"td",52),t._uU(25),t.qZA(),t.TgZ(26,"td",53),t._uU(27),t.qZA()()()}if(2&o){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(e.AMOUNT.pPrimaryHCIFee),t.xp6(2),t.Oqu(e.AMOUNT.pPrimaryProfFee),t.xp6(2),t.Oqu(e.AMOUNT.pPrimaryCaseRate),t.xp6(2),t.Oqu(e.AMOUNT.pSecondaryHCIFee),t.xp6(2),t.Oqu(e.AMOUNT.pSecondaryProfFee),t.xp6(2),t.Oqu(e.AMOUNT.pSecondaryCaseRate),t.xp6(2),t.Oqu(e.AMOUNT.pCheckFacilityH1),t.xp6(2),t.Oqu(e.AMOUNT.pCheckFacilityH2),t.xp6(2),t.Oqu(e.AMOUNT.pCheckFacilityH3),t.xp6(2),t.Oqu(e.AMOUNT.pCheckFacilityASC),t.xp6(2),t.Oqu(e.AMOUNT.pCheckFacilityPCF),t.xp6(2),t.Oqu(e.AMOUNT.pCheckFacilityMAT),t.xp6(2),t.Oqu(e.AMOUNT.pCheckFacilityFSDC)}}function S(o,s){if(1&o&&(t.TgZ(0,"tr",35)(1,"td",36),t._uU(2),t.qZA(),t.TgZ(3,"td",36),t._uU(4),t.qZA(),t.TgZ(5,"td",37),t.YNc(6,k,2,1,"table",38),t.YNc(7,H,28,13,"table",39),t.qZA()()),2&o){const e=s.$implicit;t.xp6(1),t.Q6J("rowSpan",e.AMOUNT.length),t.xp6(1),t.Oqu(e.pItemCode),t.xp6(1),t.Q6J("rowSpan",e.AMOUNT.length),t.xp6(1),t.Oqu(e.pCaseRateDescription),t.xp6(2),t.Q6J("ngIf",e.AMOUNT.length),t.xp6(1),t.Q6J("ngIf",!e.AMOUNT.length)}}let Y=(()=>{class o{get f(){return this.searchForm.controls}onSubmit(){this.caserate_result=[],this.is_searching=!0,this.searchForm.patchValue({program_code:this.program_name}),this.http.post("eclaims/case-rate",this.searchForm.value).subscribe({next:e=>{this.is_searching=!1,this.caserate_result.push(e.CASERATES),console.log(typeof this.caserate_result,this.caserate_result)},error:e=>console.log(e)})}closeModal(e,n){let r;r=e?{name:"search-caserate",amount:n,data:e}:"search-caserate",this.toggleModal.emit(r)}constructor(e,n,r){this.formBuilder=e,this.http=n,this.toastr=r,this.toggleModal=new t.vpe,this.faSave=C.r6l,this.faCircleNotch=p.IJ7,this.faSearch=p.wn1,this.faMagnifyingGlass=p.Y$T,this.is_searching=!1,this.show_error=!1,this.required_message="Required field",this.searchForm=new i.cw({program_code:new i.NI(""),description:new i.NI(""),icd10:new i.NI(""),rvs:new i.NI("")}),this.caserate_result=[]}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(i.qu),t.Y36(b.O),t.Y36(v._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-search-caserate"]],inputs:{selected_tb_consult:"selected_tb_consult",program_name:"program_name"},outputs:{toggleModal:"toggleModal"},standalone:!0,features:[t.jDz],decls:94,vars:4,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-5xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-orange-400"],[1,"text-sm","font-bold","text-white"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"text-left","text-gray-500","m-5",3,"formGroup","submit"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-4"],["for","description"],["type","text","name","description","id","description","formControlName","description",1,"input"],[1,"col-span-3"],["for","icd10"],["type","text","name","icd10","id","icd10","formControlName","icd10",1,"input"],["for","rvs"],["type","text","name","rvs","id","rvs","formControlName","rvs",1,"input"],[1,"col-span-2","justify-end"],["type","submit",1,"btn-save","mt-6","-py-0.5"],["spin","true",3,"icon",4,"ngIf"],[1,"flex","mx-3","justify-center"],[1,"table-auto","text-xs","border","border-slate-300","border-collapse"],["colspan","15",1,"w-[900px]"],["rowspan","3",1,"border","border-slate-300","w-[70px]"],["rowspan","3",1,"border","border-slate-300","w-[198px]"],["colspan","3",1,"border","border-slate-300","w-[216px]"],["colspan","7",1,"border","border-slate-300","w-[200px]"],["rowspan","2",1,"border","border-slate-300","w-[72px]"],["colspan","3",1,"border","border-slate-300","text-[0.7rem]","w-[100px]"],["rowspan","2",1,"border","border-slate-300"],[1,"border","border-slate-300","text-[0.7rem]"],["class","border border-slate-300",4,"ngFor","ngForOf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-gray-400",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],["spin","true",3,"icon"],[1,"border","border-slate-300"],[1,"border","border-slate-300",3,"rowSpan"],["colspan","13",1,"p-0","m-0"],["class","table-auto p-0 m-0 w-full border-0",4,"ngIf"],["class","table-auto p-0 m-0 w-full",4,"ngIf"],[1,"table-auto","p-0","m-0","w-full","border-0"],[4,"ngFor","ngForOf"],[1,"px-1","border","border-slate-300","w-[72px]","border-l-0",3,"ngClass"],[1,"px-1","border","border-slate-300","w-[72px]",3,"ngClass"],[1,"px-1","border","border-slate-300","w-[72px]","text-blue-500","font-semibold","hover:cursor-pointer",3,"ngClass","click"],[1,"px-1","border","border-slate-300",3,"ngClass"],[1,"px-1","border","border-slate-300","border-r-0",3,"ngClass"],[1,"table-auto","p-0","m-0","w-full"],[1,"h-full","py-8"],[1,"px-1","border","border-slate-300","border-y-0","border-l-0","w-[72px]"],[1,"px-1","border","border-slate-300","border-y-0","w-[72px]"],[1,"px-1","border","border-slate-300","border-y-0","w-[72px]","text-blue-500","font-semibold","hover:cursor-pointer",3,"click"],[1,"px-1","border","border-slate-300","border-y-0"],[1,"px-1","border","border-slate-300","border-y-0","border-r-0"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5," Search Case Rate "),t.qZA()(),t.TgZ(6,"div",5)(7,"form",6),t.NdJ("submit",function(){return n.onSubmit()}),t.TgZ(8,"div",7)(9,"div",8)(10,"label",9),t._uU(11,"Description"),t.qZA(),t._UZ(12,"input",10),t.qZA(),t.TgZ(13,"div",11)(14,"label",12),t._uU(15,"ICD10 Code"),t.qZA(),t._UZ(16,"input",13),t.qZA(),t.TgZ(17,"div",11)(18,"label",14),t._uU(19,"RVS Code"),t.qZA(),t._UZ(20,"input",15),t.qZA(),t.TgZ(21,"div",16)(22,"button",17),t.YNc(23,O,1,1,"fa-icon",18),t._uU(24),t.qZA()()()(),t.TgZ(25,"div",19)(26,"table",20)(27,"thead")(28,"tr")(29,"th",21),t._uU(30,"Case Rate Group"),t.qZA()(),t.TgZ(31,"tr")(32,"th",22),t._uU(33,"ICD10/ "),t._UZ(34,"br"),t._uU(35,"RVS Code"),t.qZA(),t.TgZ(36,"th",23),t._uU(37,"Description"),t.qZA(),t.TgZ(38,"th",24),t._uU(39,"First Case Rate"),t.qZA(),t.TgZ(40,"th",24),t._uU(41,"Second Case Rate"),t.qZA(),t.TgZ(42,"th",25),t._uU(43,"Applicable Health Care Institutions "),t._UZ(44,"br"),t._uU(45,"Note: If licensed and capable to perform the procedure"),t.qZA()(),t.TgZ(46,"tr")(47,"th",26),t._uU(48,"HCI "),t._UZ(49,"br"),t._uU(50," Fee"),t.qZA(),t.TgZ(51,"th",26),t._uU(52,"Prof "),t._UZ(53,"br"),t._uU(54," Fee"),t.qZA(),t.TgZ(55,"th",26),t._uU(56,"Case"),t._UZ(57,"br"),t._uU(58," Rate"),t.qZA(),t.TgZ(59,"th",26),t._uU(60,"HCI "),t._UZ(61,"br"),t._uU(62," Fee"),t.qZA(),t.TgZ(63,"th",26),t._uU(64,"Prof "),t._UZ(65,"br"),t._uU(66," Fee"),t.qZA(),t.TgZ(67,"th",26),t._uU(68,"Case "),t._UZ(69,"br"),t._uU(70," Rate"),t.qZA(),t.TgZ(71,"th",27),t._uU(72,"Level"),t.qZA(),t.TgZ(73,"th",28),t._uU(74,"ASC"),t.qZA(),t.TgZ(75,"th",28),t._uU(76,"PCF"),t.qZA(),t.TgZ(77,"th",28),t._uU(78,"MCP"),t.qZA(),t.TgZ(79,"th",28),t._uU(80,"FSDC"),t.qZA()(),t.TgZ(81,"tr")(82,"th",29),t._uU(83,"1"),t.qZA(),t.TgZ(84,"th",29),t._uU(85,"2"),t.qZA(),t.TgZ(86,"th",29),t._uU(87,"3"),t.qZA()()(),t.TgZ(88,"tbody"),t.YNc(89,S,8,6,"tr",30),t.qZA()()()(),t.TgZ(90,"div",31)(91,"button",32),t.NdJ("click",function(){return n.closeModal()}),t._uU(92,"Close"),t.qZA()()()()(),t._UZ(93,"div",33)),2&e&&(t.xp6(7),t.Q6J("formGroup",n.searchForm),t.xp6(16),t.Q6J("ngIf",n.is_searching),t.xp6(1),t.hij(" ",n.is_searching?"":"Search"," "),t.xp6(65),t.Q6J("ngForOf",n.caserate_result))},dependencies:[c.ez,c.mk,c.sg,c.O5,i.UX,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,h.uH,h.BN]}),o})();var P=l(7272),J=l(9646),D=l(9300),E=l(1884),K=l(8372),I=l(8505),j=l(3900),V=l(262),$=l(4004),G=l(7579),Z=l(1079);function B(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",13)(1,"div",14)(2,"strong"),t._uU(3),t.qZA(),t._UZ(4,"br"),t._uU(5),t.ALo(6,"date"),t._UZ(7,"br"),t._uU(8),t._UZ(9,"br"),t.qZA(),t.TgZ(10,"div",15)(11,"button",16),t.NdJ("click",function(){const a=t.CHM(e).index,_=t.oxw();return t.KtG(_.selectCaserate(a))}),t._UZ(12,"fa-icon",17),t.qZA()()()}if(2&o){const e=s.$implicit,n=t.oxw();t.xp6(3),t.Oqu(e.caserate_code),t.xp6(2),t.hij(" ",t.xi3(6,4,e.caserate_date,"MM/dd/yyyy")," "),t.xp6(3),t.hij(" ",e.description," "),t.xp6(4),t.Q6J("icon",n.faEdit)}}function L(o,s){if(1&o&&(t.TgZ(0,"div",48)(1,"h5",49)(2,"strong"),t._uU(3),t.qZA(),t._uU(4),t.qZA()()),2&o){const e=s.item,n=s.searchTerm;t.xp6(1),t.Q6J("ngOptionHighlight",n),t.xp6(2),t.hij("",e.icd10_code,":"),t.xp6(1),t.hij(" ",e.icd10_desc,"")}}function R(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=s.item;t.xp6(1),t.AsE(" ",e.icd10_code,": ",e.icd10_desc," ")}}function W(o,s){if(1&o&&(t.TgZ(0,"option",50),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.AsE("",e.last_name,", ",e.first_name,"")}}function z(o,s){if(1&o&&(t.TgZ(0,"div",18)(1,"div")(2,"label",19),t._uU(3,"Caserate date"),t.qZA(),t._UZ(4,"input",20),t.qZA(),t.TgZ(5,"div")(6,"label",21),t._uU(7,"Admission Diagnosis"),t.qZA(),t._UZ(8,"input",22),t.qZA(),t.TgZ(9,"div")(10,"label",23),t._uU(11,"Discharge Diagnosis"),t.qZA(),t._UZ(12,"input",24),t.qZA(),t.TgZ(13,"div")(14,"label",25),t._uU(15,"ICD10 Code"),t.qZA(),t.TgZ(16,"ng-select",26),t.ALo(17,"async"),t.YNc(18,L,5,3,"ng-template",27),t.YNc(19,R,2,2,"ng-template",28),t.qZA()(),t.TgZ(20,"div")(21,"label",29),t._uU(22,"Case Rate Code"),t.qZA(),t._UZ(23,"input",30),t.qZA(),t.TgZ(24,"div")(25,"label",31),t._uU(26,"RVS Code"),t.qZA(),t._UZ(27,"input",32),t.qZA(),t.TgZ(28,"div")(29,"label",33),t._uU(30,"Description"),t.qZA(),t._UZ(31,"input",34),t.qZA(),t.TgZ(32,"div")(33,"label",35),t._uU(34,"HCI Fee"),t.qZA(),t._UZ(35,"input",36),t.qZA(),t.TgZ(36,"div")(37,"label",37),t._uU(38,"Prof Fee"),t.qZA(),t._UZ(39,"input",38),t.qZA(),t.TgZ(40,"div")(41,"label",39),t._uU(42,"Case Rate Fee"),t.qZA(),t._UZ(43,"input",40),t.qZA(),t.TgZ(44,"div")(45,"label",41),t._uU(46,"Caserate attendant"),t.qZA(),t.TgZ(47,"select",42),t.YNc(48,W,2,3,"option",43),t.qZA()(),t.TgZ(49,"div",44)(50,"div",45)(51,"button",46),t._UZ(52,"fa-icon",47),t._uU(53),t.qZA()()()()),2&o){const e=t.oxw();t.xp6(16),t.Q6J("items",t.lcZ(17,10,e.fdx$))("multiple",!0)("loading",e.fdxLoading)("typeahead",e.searchInput$)("multiple",!1),t.xp6(32),t.Q6J("ngForOf",e.attendant),t.xp6(3),t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("icon",e.is_saving?e.faCircleNotch:e.faSave)("spin",e.is_saving),t.xp6(1),t.hij(" ",e.caserateForm.value.id?e.is_saving?"Updating":"Update":e.is_saving?"Saving":"Save"," ")}}function X(o,s){if(1&o&&(t.TgZ(0,"div",51)(1,"div",52),t._UZ(2,"fa-icon",53),t.qZA(),t.TgZ(3,"div",45),t._uU(4," Fetching caserate details... "),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("icon",e.faCircleNotch)}}function tt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"app-search-caserate",54),t.NdJ("toggleModal",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.toggleModal(r))}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("program_name",e.program_name)}}let F=(()=>{class o{selectCaserate(e){this.patchData(this.caserate_list[e])}onSubmit(){this.is_saving=!0,this.http.post("eclaims/eclaims-caserate",this.caserateForm.value).subscribe({next:e=>{this.toastr.success("Successfuly recorded.","Caserate"),this.is_saving=!1,this.getCaserate()},error:e=>{console.log(e),this.is_saving=!1}})}getCaserate(){this.show_form=!1,this.http.get("eclaims/eclaims-caserate",{params:{program_id:this.program_id,program_desc:this.program_name}}).subscribe({next:n=>{this.caserate_list=n.data,this.createForm()},error:n=>console.log(n)})}createForm(e){this.caserateForm=this.formBuilder.nonNullable.group({id:[null],patient_id:[this.patient_id],program_desc:[this.program_name],program_id:[this.program_id],caserate_date:[null,i.kI.required],admit_dx:[null,i.kI.required],caserate_code:[null,i.kI.required],code:[null,i.kI.required],description:[null,i.kI.required],discharge_dx:[null,i.kI.required],icd10_code:[null,i.kI.required],hci_fee:[null,i.kI.required],prof_fee:[null,i.kI.required],caserate_fee:[null,i.kI.required],caserate_attendant:[null,i.kI.required]}),e&&this.patchData(e),this.show_form=!0}loadFdx(e){this.fdx$=(0,P.z)((0,J.of)(e),this.searchInput$.pipe((0,D.h)(n=>null!==n&&n.length>=this.minLengthTerm),(0,E.x)(),(0,K.b)(800),(0,I.b)(()=>this.fdxLoading=!0),(0,j.w)(n=>this.getFdx(n).pipe((0,V.K)(()=>(0,J.of)([])),(0,I.b)(()=>this.fdxLoading=!1)))))}getFdx(e=null){return this.http.get("libraries/icd10",{params:{"filter[search]":e}}).pipe((0,$.U)(n=>n.data))}loadSelected(){let e=[],n=[];this.final_dx&&Object.keys(this.final_dx).length>0?(Object.entries(this.final_dx).forEach(([r,a],_)=>{let d=a;e.push(d.icd10_code.toString()),n.push(d.lib_icd10)}),this.loadFdx(n),this.selectedFdx=e):this.loadFdx([])}patchData(e){this.caserateForm.patchValue({...e})}loadContent(e){this.caserateForm.patchValue({id:null,caserate_date:null,admit_dx:"",caserate_code:e.data.pCaseRateCode,code:e.data.pItemCode,description:e.data.pCaseRateDescription,hci_fee:e.amount.pPrimaryHCIFee,prof_fee:e.amount.pPrimaryProfFee,caserate_fee:e.amount.pPrimaryCaseRate,caserate_attendant:""})}toggleModal(e){let n;e.data?(n=e.name,this.loadContent(e)):n=e,this.modals[n]=!this.modals[n]}get f(){return this.caserateForm.controls}loadLibraries(){this.http.get("users",{params:{attendant_flag:"tb"}}).subscribe({next:e=>{this.attendant=e.data,this.getCaserate()}})}constructor(e,n,r){this.http=e,this.toastr=n,this.formBuilder=r,this.faSave=C.r6l,this.faCircleNotch=p.IJ7,this.faSearch=p.wn1,this.faEdit=C.Xcf,this.modals=[],this.show_form=!1,this.is_saving=!1,this.caserateForm=new i.cw({id:new i.NI(""),patient_id:new i.NI(""),program_desc:new i.NI(""),program_id:new i.NI(""),caserate_date:new i.NI(""),admit_dx:new i.NI(""),caserate_code:new i.NI(""),code:new i.NI(""),description:new i.NI(""),discharge_dx:new i.NI(""),icd10_code:new i.NI(""),hci_fee:new i.NI(null),prof_fee:new i.NI(null),caserate_fee:new i.NI(null),caserate_attendant:new i.NI(null)}),this.searchInput$=new G.x,this.minLengthTerm=3,this.fdxLoading=!1}ngOnInit(){this.loadLibraries(),this.loadSelected()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b.O),t.Y36(v._W),t.Y36(i.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-caserate"]],inputs:{program_id:"program_id",program_name:"program_name",patient_id:"patient_id"},standalone:!0,features:[t.jDz],decls:19,vars:6,consts:[[1,"grid","grid-cols-3","gap-4","mt-4"],[1,"shadow-md","rounded-md","col-span-1"],[1,"bg-blue-500","text-white","rounded-t-md","p-3","flex","justify-between"],[1,"rounded-b-md","grid","grid-cols-1"],["class","grid grid-cols-6 border-t border-slate-200",4,"ngFor","ngForOf"],[1,"shadow-md","rounded-md","col-span-2"],[1,"bg-gray-100","text-blue-500","px-3","rounded-md",3,"click"],[1,"text-sm","font-semibold",3,"icon"],[1,"rounded-b-md","border-x","border-b","border-slate-200","flex"],[1,"w-full","m-5",3,"formGroup","ngSubmit"],["class","grid grid-cols-1 gap-2 w-full",4,"ngIf"],["class","grid grid-cols-1 my-20",4,"ngIf"],[3,"program_name","toggleModal",4,"ngIf"],[1,"grid","grid-cols-6","border-t","border-slate-200"],[1,"col-span-5","m-2","text-sm"],[1,"col-span-1","text-orange-500","m-2"],["type","button",3,"click"],[3,"icon"],[1,"grid","grid-cols-1","gap-2","w-full"],["for","caserate_date"],["type","date","name","caserate_date","id","caserate_date","formControlName","caserate_date",1,"input"],["for","admit_dx"],["type","text","name","admit_dx","id","admit_dx","formControlName","admit_dx",1,"input"],["for","discharge_dx"],["type","text","name","discharge_dx","id","discharge_dx","formControlName","discharge_dx",1,"input"],["for","icd10_code"],["placeholder","search","typeToSearchText","search...","formControlName","icd10_code","bindValue","icd10_code","bindLabel","icd10_desc","notFoundText","No records found",1,"select-chips",3,"items","multiple","loading","typeahead"],["ng-option-tmp",""],["ng-label-tmp",""],["for","caserate_code"],["type","text","name","caserate_code","id","caserate_code","formControlName","caserate_code",1,"input"],["for","code"],["type","text","name","code","id","code","formControlName","code",1,"input"],["for","description"],["type","text","name","description","id","description","formControlName","description",1,"input"],["for","hci_fee"],["type","number","name","hci_fee","id","hci_fee","formControlName","hci_fee",1,"input"],["for","prof_fee"],["type","number","name","prof_fee","id","prof_fee","formControlName","prof_fee",1,"input"],["for","caserate_fee"],["type","number","name","caserate_fee","id","caserate_fee","formControlName","caserate_fee",1,"input"],["for","caserate_attendant"],["name","caserate_attendant","id","caserate_attendant","formControlName","caserate_attendant",1,"input"],[3,"value",4,"ngFor","ngForOf"],[1,"my-5"],[1,"flex","justify-center"],["type","submit",1,"btn-save","font-semibold","px-10",3,"disabled"],[1,"pr-2",3,"icon","spin"],[1,"whitespace-normal"],[1,"text-gray-700",3,"ngOptionHighlight"],[3,"value"],[1,"grid","grid-cols-1","my-20"],[1,"flex","justify-center","text-blue-500"],["spin","true",3,"icon"],[3,"program_name","toggleModal"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span"),t._uU(4,"Caserate List"),t.qZA()(),t.TgZ(5,"div",3),t.YNc(6,B,13,7,"div",4),t.qZA()(),t.TgZ(7,"div",5)(8,"div",2)(9,"span"),t._uU(10,"Caserate"),t.qZA(),t.TgZ(11,"button",6),t.NdJ("click",function(){return n.toggleModal("search-caserate")}),t._UZ(12,"fa-icon",7),t._uU(13," search "),t.qZA()(),t.TgZ(14,"div",8)(15,"form",9),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.YNc(16,z,54,12,"div",10),t.YNc(17,X,5,1,"div",11),t.qZA()()()(),t.YNc(18,tt,1,1,"app-search-caserate",12)),2&e&&(t.xp6(6),t.Q6J("ngForOf",n.caserate_list),t.xp6(6),t.Q6J("icon",n.faSearch),t.xp6(3),t.Q6J("formGroup",n.caserateForm),t.xp6(1),t.Q6J("ngIf",n.show_form),t.xp6(1),t.Q6J("ngIf",!n.show_form),t.xp6(1),t.Q6J("ngIf",n.modals["search-caserate"]))},dependencies:[c.ez,c.sg,c.O5,c.Ov,c.uU,i.UX,i._Y,i.YN,i.Kr,i.Fj,i.wV,i.EJ,i.JJ,i.JL,i.sg,i.u,h.uH,h.BN,Y,Z.A0,Z.w9,Z.ir,Z.mR]}),o})();var et=l(1305),ot=l(4128),Q=l(6491);function nt(o,s){if(1&o&&(t.TgZ(0,"option",20),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function it(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.clearPreviousTreatmentForm())}),t._UZ(1,"fa-icon",13),t._uU(2," Cancel "),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("icon",e.faXmark)}}function st(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr",22)(1,"td",23),t._uU(2),t.qZA(),t.TgZ(3,"td",23),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td",23)(7,"fa-icon",24),t.NdJ("click",function(){const a=t.CHM(e).$implicit,_=t.oxw(2);return t.KtG(_.editPreviousTreatment(a))}),t.qZA(),t.TgZ(8,"fa-icon",25),t.NdJ("click",function(){const a=t.CHM(e).$implicit,_=t.oxw(2);return t.KtG(_.toggleModal("delete-item",a))}),t.qZA()()()}if(2&o){const e=s.$implicit,n=t.oxw(2);t.xp6(2),t.hij(" ",e.outcome.desc," "),t.xp6(2),t.hij(" ",t.xi3(5,4,e.treatment_date,"MM/dd/yyyy")," "),t.xp6(3),t.Q6J("icon",n.faEdit),t.xp6(1),t.Q6J("icon",n.faTrashCan)}}function rt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3),t._uU(2," History of TB Treatment "),t.qZA(),t.TgZ(3,"div",4)(4,"form",5),t.NdJ("ngSubmit",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.savePreviousTreatment())}),t.TgZ(5,"div",6)(6,"div")(7,"label",7),t._uU(8,"Treatment Outcome"),t.qZA(),t.TgZ(9,"select",8),t.YNc(10,nt,2,2,"option",9),t.qZA()(),t.TgZ(11,"div")(12,"label",10),t._uU(13,"Treatment Date"),t.qZA(),t._UZ(14,"input",11),t.qZA(),t.TgZ(15,"div")(16,"button",12),t._UZ(17,"fa-icon",13),t._uU(18),t.qZA(),t.YNc(19,it,3,1,"button",14),t.qZA()()(),t.TgZ(20,"div",15)(21,"table",16)(22,"thead",17)(23,"tr")(24,"th",18),t._uU(25,"Treatment Outcome"),t.qZA(),t.TgZ(26,"th",18),t._uU(27,"Treatment Date"),t.qZA(),t.TgZ(28,"th",18),t._uU(29,"Action"),t.qZA()()(),t.TgZ(30,"tbody"),t.YNc(31,st,9,7,"tr",19),t.qZA()()()()()}if(2&o){const e=t.oxw();t.xp6(4),t.Q6J("formGroup",e.previousTreatmentForm),t.xp6(6),t.Q6J("ngForOf",e.treatment_outcomes),t.xp6(4),t.Q6J("max",e.max_date),t.xp6(3),t.Q6J("icon",e.previousTreatmentForm.value.id?e.faEdit:e.faAdd),t.xp6(1),t.hij(" ",e.previousTreatmentForm.value.id?"Update":"Add"," "),t.xp6(1),t.Q6J("ngIf",e.previousTreatmentForm.value.id),t.xp6(12),t.Q6J("ngForOf",e.previous_treatments)("ngForTrackBy",e.identify)}}function at(o,s){if(1&o&&(t.TgZ(0,"option",20),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function _t(o,s){if(1&o&&(t.TgZ(0,"option",20),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function ct(o,s){if(1&o&&(t.TgZ(0,"option",20),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function lt(o,s){if(1&o&&(t.TgZ(0,"option",55),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("ngValue","N"===e.code?0:1),t.xp6(1),t.Oqu(e.desc)}}function dt(o,s){if(1&o&&(t.TgZ(0,"option",55),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("ngValue","N"===e.code?0:1),t.xp6(1),t.Oqu(e.desc)}}function pt(o,s){if(1&o&&(t.TgZ(0,"div",56),t._UZ(1,"input",57),t.TgZ(2,"label",58),t._uU(3),t.qZA()()),2&o){const e=s.$implicit;t.xp6(1),t.Q6J("id",e.code)("formControlName",e.code),t.xp6(1),t.uIk("for",e.code),t.xp6(1),t.Oqu(e.desc)}}function ut(o,s){if(1&o&&(t.TgZ(0,"option",20),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function mt(o,s){if(1&o&&(t.TgZ(0,"div")(1,"label"),t._uU(2),t.qZA(),t.TgZ(3,"select",59),t.YNc(4,ut,2,2,"option",9),t.qZA()()),2&o){const e=s.$implicit,n=t.oxw(2);t.xp6(1),t.uIk("for",e.code),t.xp6(1),t.Oqu(e.desc),t.xp6(1),t.Q6J("id",e.code)("formControlName",e.code),t.xp6(1),t.Q6J("ngForOf",n.pe_answers)}}function gt(o,s){if(1&o&&(t.TgZ(0,"div",60),t._UZ(1,"input",57),t.TgZ(2,"label",58),t._uU(3),t.qZA()()),2&o){const e=s.$implicit,n=s.index;t.xp6(1),t.Q6J("id","risk_factor"+(n+1))("formControlName","risk_factor"+(n+1)),t.xp6(1),t.uIk("for","risk_factor"+(n+1)),t.xp6(1),t.Oqu(e.desc)}}function ft(o,s){if(1&o&&(t.TgZ(0,"div",61)(1,"button",62),t._UZ(2,"fa-icon",63),t._uU(3),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.casefindingForm.invalid||e.is_saving),t.xp6(1),t.Q6J("icon",e.is_saving?e.faSpinner:e.faSave)("spin",!!e.is_saving),t.xp6(1),t.hij(" ",e.casefindingForm.value.id?e.is_saving?"Updating":"Update":e.is_saving?"Saving":"Save"," ")}}function ht(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3),t._uU(2," Case Findings "),t.qZA(),t.TgZ(3,"div",26)(4,"form",27),t.NdJ("ngSubmit",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.saveCaseFindings())}),t.TgZ(5,"div",28)(6,"div",29),t._uU(7," Registration Details "),t.qZA(),t.TgZ(8,"div",6)(9,"div")(10,"label",30),t._uU(11,"Patient Source"),t.qZA(),t.TgZ(12,"select",31),t.YNc(13,at,2,2,"option",9),t.qZA()(),t.TgZ(14,"div")(15,"label",32),t._uU(16,"Registration Group"),t.qZA(),t.TgZ(17,"select",33),t.YNc(18,_t,2,2,"option",9),t.qZA()(),t.TgZ(19,"div")(20,"label",34),t._uU(21,"Consultation Date"),t.qZA(),t._UZ(22,"input",35),t.qZA()()(),t.TgZ(23,"div",36)(24,"div",37),t._uU(25," Screening Data "),t.qZA(),t.TgZ(26,"div",6)(27,"div")(28,"label",38),t._uU(29,"Previous TB Treatment"),t.qZA(),t.TgZ(30,"select",39),t.YNc(31,ct,2,2,"option",9),t.qZA()(),t.TgZ(32,"div")(33,"label",40),t._uU(34,"Exposure to TB"),t.qZA(),t.TgZ(35,"select",41),t.YNc(36,lt,2,2,"option",42),t.qZA()(),t.TgZ(37,"div")(38,"label",43),t._uU(39,"Presumptive DR-TB"),t.qZA(),t.TgZ(40,"select",44),t.YNc(41,dt,2,2,"option",42),t.qZA()()()(),t.TgZ(42,"div",36)(43,"div",37),t._uU(44," Symptoms "),t.qZA(),t.TgZ(45,"div",45),t.YNc(46,pt,4,4,"div",46),t.qZA(),t.TgZ(47,"div",47)(48,"label",48),t._uU(49,"Symptoms Remarks"),t.qZA(),t._UZ(50,"input",49),t.qZA()(),t.TgZ(51,"div",36)(52,"div",37),t._uU(53," Physical Exam "),t.qZA(),t.TgZ(54,"div",50),t.YNc(55,mt,5,5,"div",51),t.qZA()(),t.TgZ(56,"div",36)(57,"div",37),t._uU(58," Risk Factor "),t.qZA(),t.TgZ(59,"div",52),t.YNc(60,gt,4,4,"div",53),t.qZA()(),t.YNc(61,ft,4,4,"div",54),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(4),t.Q6J("formGroup",e.casefindingForm),t.xp6(9),t.Q6J("ngForOf",e.patient_sources),t.xp6(5),t.Q6J("ngForOf",e.reg_groups),t.xp6(4),t.Q6J("max",e.max_date),t.xp6(9),t.Q6J("ngForOf",e.previous_tb_treatments),t.xp6(5),t.Q6J("ngForOf",e.answers_yn),t.xp6(5),t.Q6J("ngForOf",e.answers_yn),t.xp6(5),t.Q6J("ngForOf",e.symptoms),t.xp6(9),t.Q6J("ngForOf",e.pes),t.xp6(5),t.Q6J("ngForOf",e.risk_factors),t.xp6(1),t.Q6J("ngIf",!e.selected_tb_consult||0===e.selected_tb_consult.treatment_done)}}function bt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"app-delete-item",64),t.NdJ("toggleModal",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.toggleModal(r))}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("delete_id",e.delete_id)("delete_desc",e.delete_desc)("url",e.url)}}let xt=(()=>{class o{createForm(){this.previousTreatmentForm=this.formBuilder.nonNullable.group({id:[null],patient_id:[this.patient_id],outcome_code:[null,i.kI.required],treatment_date:[null,i.kI.required]}),this.casefindingForm=this.formBuilder.nonNullable.group({id:[null],patient_id:[this.patient_id],source_code:["",i.kI.required],reg_group_code:["",i.kI.required],consult_date:["",i.kI.required],previous_tb_treatment_code:["",i.kI.required],exposetb_flag:["",i.kI.required],drtb_flag:["",i.kI.required],risk_factor1:[!1],risk_factor2:[!1],risk_factor3:[!1],symptom:this.formBuilder.group({bcpain:[!1],cough:[!1],drest:[!1],dexertion:[!1],fever:[!1],hemoptysis:[!1],nsweats:[!1],pedema:[!1],wloss:[!1]}),symptom_remarks:[null],physical_exam:this.formBuilder.group({abdomen:["ND",i.kI.required],amuscles:["ND",i.kI.required],bcg:["ND",i.kI.required],cardiovascular:["ND",i.kI.required],endocrine:["ND",i.kI.required],extremities:["ND",i.kI.required],ghealth:["ND",i.kI.required],gurinary:["ND",i.kI.required],lnodes:["ND",i.kI.required],neurological:["ND",i.kI.required],oropharynx:["ND",i.kI.required],skin:["ND",i.kI.required],thoraxlungs:["ND",i.kI.required]})}),this.loadPreviousTreatment(),this.loadCaseFinding()}identify(e,n){return n.id}loadPreviousTreatment(){this.http.get("tbdots/patient-tb-history",{params:{patient_id:this.patient_id,per_page:"all"}}).subscribe({next:n=>{this.previous_treatments=n.data},error:n=>console.log(n)})}loadCaseFinding(){if(this.selected_tb_consult){let e=this.selected_tb_consult;this.case_finding_id=e.case_finding.id,this.casefindingForm.patchValue({...e.case_finding}),this.casefindingForm.patchValue({symptom:e.symptom?{...e.symptom}:null,physical_exam:e.physical_exam?{...e.physical_exam}:null,id:e.id,source_code:e.case_finding.source_code.code,reg_group_code:e.case_finding.reg_group.code,previous_tb_treatment_code:e.case_finding.previous_tb_treatment_code.code})}}savePreviousTreatment(){let e;e=this.previousTreatmentForm.value.id?this.http.update("tbdots/patient-tb-history/",this.previousTreatmentForm.value.id,this.previousTreatmentForm.value):this.http.post("tbdots/patient-tb-history",this.previousTreatmentForm.value),e.subscribe({next:n=>{this.loadPreviousTreatment(),this.previousTreatmentForm.reset()},error:n=>console.log(n)})}clearPreviousTreatmentForm(){this.previousTreatmentForm.reset()}editPreviousTreatment(e){this.previousTreatmentForm.patchValue({id:e.id,patient_id:e.patient_id,outcome_code:e.outcome.code,treatment_date:e.treatment_date})}saveCaseFindings(){if(this.is_saving=!0,this.casefindingForm.dirty){let e;e=this.casefindingForm.value.id?this.http.update("tbdots/patient-tb-casefinding/",this.case_finding_id,this.casefindingForm.value):this.http.post("tbdots/patient-tb",this.casefindingForm.value),e.subscribe({next:n=>{this.saveSymptomsPe(this.casefindingForm.value.id?this.casefindingForm.value.id:n.data.patient_tb_id,this.casefindingForm.value.patient_id)},error:n=>{console.log(n),this.is_saving=!1}})}else this.toastr.info("No changes were made."),this.is_saving=!1}saveSymptomsPe(e,n){let r={...this.casefindingForm.value.symptom};r.patient_id=n,r.patient_tb_id=e;const a=this.http.post("tbdots/patient-tb-symptom",r);let _={...this.casefindingForm.value.physical_exam};_.patient_id=n,_.patient_tb_id=e;const d=this.http.post("tbdots/patient-tb-pe",_);(0,ot.D)([a,d]).subscribe(([f,x])=>{this.is_saving=!1,this.toastr.success("Case findings was "+(this.casefindingForm.value.id?"updated":"saved")+" successuly","Success"),this.getPatientTbHistory.emit()})}loadLibraries(){this.http.get("tbdots/tb-libraries").subscribe({next:e=>{this.answers_yn=e.tb_answers_yn,this.patient_sources=e.tb_patient_sources,this.pe_answers=e.tb_pe_answers,this.pes=e.tb_pes,this.previous_tb_treatments=e.tb_previous_tb_treatments,this.reg_groups=e.tb_reg_groups,this.risk_factors=e.tb_risk_factors,this.symptoms=e.tb_symptoms,this.treatment_outcomes=e.tb_treatment_outcomes,this.show_form=!0,this.createForm()},error:e=>console.log(e)})}toggleModal(e,n){this.modals[e]=!this.modals[e],"delete-item"===e&&(!0===this.modals[e]?(this.delete_id=n.id,this.delete_desc="Previous Treatment Record",this.url="tbdots/patient-tb-history/"):(this.delete_id=null,this.delete_desc=null,this.url=null,this.loadPreviousTreatment()))}constructor(e,n,r){this.http=e,this.formBuilder=n,this.toastr=r,this.getPatientTbHistory=new t.vpe,this.faSave=p.r6l,this.faAdd=p.XSk,this.faEdit=p.Xcf,this.faXmark=p.g82,this.faTrashCan=p.Vui,this.faSpinner=p.LM3,this.is_saving=!1,this.modals=[],this.previousTreatmentForm=new i.cw({id:new i.NI(""),patient_id:new i.NI(""),outcome_code:new i.NI(""),treatment_date:new i.NI("")}),this.casefindingForm=new i.cw({id:new i.NI(""),patient_id:new i.NI(""),patient_source:new i.NI(""),reg_group:new i.NI(""),consult_date:new i.NI(""),previous_tb_treatment:new i.NI(""),tb_exposure:new i.NI(""),presumptive_drtb:new i.NI(""),C:new i.NI(!1),H:new i.NI(!1),NC:new i.NI(!1),symptom:new i.cw({bcpain:new i.NI(!1),cough:new i.NI(!1),drest:new i.NI(!1),dexertion:new i.NI(!1),fever:new i.NI(!1),hemoptysis:new i.NI(!1),nsweats:new i.NI(!1),pedema:new i.NI(!1),wloss:new i.NI(!1)}),symptom_remarks:new i.NI(""),physical_exam:new i.cw({abdomen:new i.NI("ND"),amuscles:new i.NI("ND"),bcg:new i.NI("ND"),cardiovascular:new i.NI("ND"),endocrine:new i.NI("ND"),extremities:new i.NI("ND"),ghealth:new i.NI("ND"),gurinary:new i.NI("ND"),lnodes:new i.NI("ND"),neurological:new i.NI("ND"),oropharynx:new i.NI("ND"),skin:new i.NI("ND"),thoraxlungs:new i.NI("ND")})}),this.previous_treatments=[],this.answers_yn=[],this.patient_sources=[],this.pe_answers=[],this.pes=[],this.previous_tb_treatments=[],this.reg_groups=[],this.risk_factors=[],this.symptoms=[],this.treatment_outcomes=[],this.show_form=!1}ngOnInit(){this.loadLibraries()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b.O),t.Y36(i.qu),t.Y36(v._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-casefindings"]],inputs:{patient_id:"patient_id",selected_tb_consult:"selected_tb_consult",max_date:"max_date"},outputs:{getPatientTbHistory:"getPatientTbHistory"},decls:3,vars:3,consts:[["class","m-5 border border-slate-200 rounded-lg",4,"ngIf"],[3,"delete_id","delete_desc","url","toggleModal",4,"ngIf"],[1,"m-5","border","border-slate-200","rounded-lg"],[1,"bg-blue-500","text-white","rounded-t-md","py-2","pl-3","font-semibold"],[1,"m-5"],[1,"grid","grid-cols-3","gap-x-4","w-4/5","mx-auto",3,"formGroup","ngSubmit"],[1,"mx-5","col-span-3","grid","grid-cols-3","gap-x-4"],["for","outcome_code"],["name","outcome_code","id","outcome_code","formControlName","outcome_code",1,"input"],[3,"value",4,"ngFor","ngForOf"],["for","treatment_date"],["type","date","name","treatment_date","id","treatment_date","formControlName","treatment_date",1,"input",3,"max"],["type","submit",1,"bg-blue-500","rounded","text-white","px-5","py-2","mt-7","text-sm"],[3,"icon"],["type","button","class","ml-3 bg-orange-500 rounded text-white px-5 py-2 mt-7 text-sm",3,"click",4,"ngIf"],[1,"w-full","flex","justify-center"],[1,"w-4/5","text-sm","text-left","mt-5","mx-10"],[1,"text-xs","text-white","uppercase","bg-blue-500"],["scope","col",1,"py-3","px-6"],["class","bg-white border-b",4,"ngFor","ngForOf","ngForTrackBy"],[3,"value"],["type","button",1,"ml-3","bg-orange-500","rounded","text-white","px-5","py-2","mt-7","text-sm",3,"click"],[1,"bg-white","border-b"],[1,"py-4","px-6"],[1,"mx-0","my-0","text-orange-400","hover:cursor-pointer","flex-none","mr-2",3,"icon","click"],[1,"mx-0","my-0","text-red-500","hover:cursor-pointer","flex-none","mr-2",3,"icon","click"],[1,"mx-5","mb-5"],[3,"formGroup","ngSubmit"],[1,"grid","grid-cols-3","gap-x-4","w-full"],[1,"col-span-3","border-b","border-slate-200","w-full","my-2","font-semibold","text-sky-500"],["for","source_code"],["name","source_code","id","source_code","formControlName","source_code",1,"input"],["for","reg_group_code"],["name","reg_group_code","id","reg_group_code","formControlName","reg_group_code",1,"input"],["for","consult_date"],["type","date","name","consult_date","id","consult_date","formControlName","consult_date",1,"input",3,"max"],[1,"mt-1","grid","grid-cols-3","gap-x-4","w-full"],[1,"col-span-3","border-b","border-slate-200","w-full","my-2","pt-3","font-semibold","text-sky-500"],["for","previous_tb_treatment_code"],["name","previous_tb_treatment_code","id","previous_tb_treatment_code","formControlName","previous_tb_treatment_code",1,"input"],["for","exposetb_flag"],["name","exposetb_flag","id","exposetb_flag","formControlName","exposetb_flag",1,"input"],[3,"ngValue",4,"ngFor","ngForOf"],["for","drtb_flag"],["name","drtb_flag","id","drtb_flag","formControlName","drtb_flag",1,"input"],["formGroupName","symptom",1,"col-span-3","grid","grid-cols-3","gap-x-4","mx-5"],["class","col-span-1",4,"ngFor","ngForOf"],[1,"col-span-3","mx-5","mt-3"],["for","symptom_remarks"],["type","text","name","symptom_remarks","id","symptom_remarks","formControlName","symptom_remarks",1,"input"],["formGroupName","physical_exam",1,"col-span-3","grid","grid-cols-3","gap-x-4","mx-5"],[4,"ngFor","ngForOf"],[1,"col-span-3","grid","grid-cols-3","gap-x-4","mx-5"],["class","col-span-3",4,"ngFor","ngForOf"],["class","flex justify-center mt-5",4,"ngIf"],[3,"ngValue"],[1,"col-span-1"],["type","checkbox",1,"border","border-slate-500","rounded","mr-3",3,"id","formControlName"],[1,"font-normal"],[1,"input",3,"id","formControlName"],[1,"col-span-3"],[1,"flex","justify-center","mt-5"],["type","submit",1,"btn-save","mr-5","mt-4",3,"disabled"],[1,"mr-2",3,"icon","spin"],[3,"delete_id","delete_desc","url","toggleModal"]],template:function(e,n){1&e&&(t.YNc(0,rt,32,8,"div",0),t.YNc(1,ht,62,11,"div",0),t.YNc(2,bt,1,3,"app-delete-item",1)),2&e&&(t.Q6J("ngIf",n.show_form),t.xp6(1),t.Q6J("ngIf",n.show_form),t.xp6(1),t.Q6J("ngIf",n.modals["delete-item"]))},dependencies:[c.sg,c.O5,h.BN,i._Y,i.YN,i.Kr,i.Fj,i.Wl,i.EJ,i.JJ,i.JL,i.sg,i.u,i.x0,Q.N,c.uU],styles:[".date-style[_ngcontent-%COMP%], .drop_btn[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{padding-right:12px;padding-left:12px;height:2.25rem;width:100%}.icon-height[_ngcontent-%COMP%]{height:2.25rem}.colButton[_ngcontent-%COMP%]{padding-bottom:-500px}.remarks[_ngcontent-%COMP%]{min-height:6rem;max-height:12rem;width:100%}label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#5c5c5c}label[_ngcontent-%COMP%]{padding-top:.15rem;padding-bottom:.25rem;font-size:.875rem;line-height:1.25rem;font-weight:700;-webkit-user-select:none;user-select:none;color:#5c5c5c}input[type=radio][_ngcontent-%COMP%]:indeterminate + h2[_ngcontent-%COMP%]{color:orange}.containers[_ngcontent-%COMP%]{max-height:100vh}h3[_ngcontent-%COMP%]{color:#5c5c5c;padding-top:.15rem;padding-bottom:.25rem;font-size:.875rem;line-height:1.25rem;font-weight:700}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(-5%);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:translateY(5%);animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes _ngcontent-%COMP%_type_in{0%{width:0}to{width:100%}}@keyframes _ngcontent-%COMP%_button_in{0%{width:22%}to{width:100%}}@keyframes _ngcontent-%COMP%_type_out{0%{width:100%}to{width:0}}.typed-out[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;animation:_ngcontent-%COMP%_type_in .68s ease-in-out forwards;width:0}.button-out[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;animation:_ngcontent-%COMP%_button_in .68s ease-in-out forwards}.parent[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap}.parent[_ngcontent-%COMP%] > .wife[_ngcontent-%COMP%]{flex:1 1 100%}.parent[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1 1 33.3333%}"]}),o})();function vt(o,s){if(1&o&&(t.TgZ(0,"option",20),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function Ct(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.required_message," ")}}function Tt(o,s){if(1&o&&(t.TgZ(0,"div",21),t.YNc(1,Ct,2,1,"div",16),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.f.enroll_as_code.errors?null:e.f.enroll_as_code.errors.required)}}function Zt(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.required_message," ")}}function wt(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1," Only letters and numbers are allowed. "),t.qZA())}function qt(o,s){if(1&o&&(t.TgZ(0,"div",21),t.YNc(1,Zt,2,1,"div",16),t.YNc(2,wt,2,0,"div",16),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.f.case_number.errors?null:e.f.case_number.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.f.case_number.errors?null:e.f.case_number.errors.pattern)}}function yt(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.required_message," ")}}function At(o,s){if(1&o&&(t.TgZ(0,"div",21),t.YNc(1,yt,2,1,"div",16),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.f.registration_date.errors?null:e.f.registration_date.errors.required)}}function Nt(o,s){if(1&o&&(t.TgZ(0,"option",20),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function Ut(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=t.oxw(4);t.xp6(1),t.hij(" ",e.required_message," ")}}function Jt(o,s){if(1&o&&(t.TgZ(0,"div",21),t.YNc(1,Ut,2,1,"div",16),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",null==e.f.ipt_type_code.errors?null:e.f.ipt_type_code.errors.required)}}const u=function(o){return{"text-red-500":o}},m=function(o){return{"invalid-input":o}};function It(o,s){if(1&o&&(t.TgZ(0,"div")(1,"label",22),t._uU(2,"Exposure or Infection"),t.qZA(),t.TgZ(3,"select",23),t.YNc(4,Nt,2,2,"option",10),t.qZA(),t.YNc(5,Jt,2,1,"div",11),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.VKq(4,u,e.show_error&&e.f.ipt_type_code.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(6,m,e.show_error&&e.f.ipt_type_code.errors)),t.xp6(1),t.Q6J("ngForOf",e.tb_ipt_types),t.xp6(1),t.Q6J("ngIf",e.show_error&&e.f.ipt_type_code.errors)}}function Ft(o,s){if(1&o&&(t.TgZ(0,"option",20),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function Qt(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=t.oxw(4);t.xp6(1),t.hij(" ",e.required_message," ")}}function Ot(o,s){if(1&o&&(t.TgZ(0,"div",21),t.YNc(1,Qt,2,1,"div",16),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",null==e.f.treatment_regimen_code.errors?null:e.f.treatment_regimen_code.errors.required)}}function Mt(o,s){if(1&o&&(t.TgZ(0,"div")(1,"label",24),t._uU(2,"Treatment Regimen"),t.qZA(),t.TgZ(3,"select",25),t.YNc(4,Ft,2,2,"option",10),t.qZA(),t.YNc(5,Ot,2,1,"div",11),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.VKq(4,u,e.show_error&&e.f.treatment_regimen_code.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(6,m,e.show_error&&e.f.treatment_regimen_code.errors)),t.xp6(1),t.Q6J("ngForOf",e.tb_treatment_regimens),t.xp6(1),t.Q6J("ngIf",e.show_error&&e.f.treatment_regimen_code.errors)}}function kt(o,s){if(1&o&&(t.TgZ(0,"option",20),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function Ht(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=t.oxw(4);t.xp6(1),t.hij(" ",e.required_message," ")}}function St(o,s){if(1&o&&(t.TgZ(0,"div",21),t.YNc(1,Ht,2,1,"div",16),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",null==e.f.bacteriological_status_code.errors?null:e.f.bacteriological_status_code.errors.required)}}function Yt(o,s){if(1&o&&(t.TgZ(0,"div",26)(1,"label",27),t._uU(2,"Bacteriological Status"),t.qZA(),t.TgZ(3,"select",28),t.YNc(4,kt,2,2,"option",10),t.qZA(),t.YNc(5,St,2,1,"div",11),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.VKq(4,u,e.show_error&&e.f.bacteriological_status_code.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(6,m,e.show_error&&e.f.bacteriological_status_code.errors)),t.xp6(1),t.Q6J("ngForOf",e.tb_bacteriological_statuses),t.xp6(1),t.Q6J("ngIf",e.show_error&&e.f.bacteriological_status_code.errors)}}function Pt(o,s){if(1&o&&(t.TgZ(0,"option",20),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function Dt(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=t.oxw(4);t.xp6(1),t.hij(" ",e.required_message," ")}}function Et(o,s){if(1&o&&(t.TgZ(0,"div",21),t.YNc(1,Dt,2,1,"div",16),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",null==e.f.anatomical_site_code.errors?null:e.f.anatomical_site_code.errors.required)}}function Kt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"label",29),t._uU(2,"Anatomical Site"),t.qZA(),t.TgZ(3,"select",30),t.NdJ("change",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.eptbSite())}),t.YNc(4,Pt,2,2,"option",10),t.qZA(),t.YNc(5,Et,2,1,"div",11),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.VKq(4,u,e.show_error&&e.f.anatomical_site_code.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(6,m,e.show_error&&e.f.anatomical_site_code.errors)),t.xp6(1),t.Q6J("ngForOf",e.tb_anatomical_sites),t.xp6(1),t.Q6J("ngIf",e.show_error&&e.f.anatomical_site_code.errors)}}function jt(o,s){if(1&o&&(t.TgZ(0,"option",20),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.desc)}}function Vt(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=t.oxw(4);t.xp6(1),t.hij(" ",e.required_message," ")}}function $t(o,s){if(1&o&&(t.TgZ(0,"div",21),t.YNc(1,Vt,2,1,"div",16),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",null==e.f.eptb_site_id.errors?null:e.f.eptb_site_id.errors.required)}}function Gt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"label",31),t._uU(2,"EPTB Site"),t.qZA(),t.TgZ(3,"select",32),t.NdJ("change",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.specificSite())}),t.YNc(4,jt,2,2,"option",10),t.qZA(),t.YNc(5,$t,2,1,"div",11),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.VKq(4,u,e.show_error&&e.f.eptb_site_id.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(6,m,e.show_error&&e.f.eptb_site_id.errors)),t.xp6(1),t.Q6J("ngForOf",e.tb_eptb_sites),t.xp6(1),t.Q6J("ngIf",e.show_error&&e.f.eptb_site_id.errors)}}function Bt(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=t.oxw(4);t.xp6(1),t.hij(" ",e.required_message," ")}}function Lt(o,s){if(1&o&&(t.TgZ(0,"div",21),t.YNc(1,Bt,2,1,"div",16),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",null==e.f.specific_site.errors?null:e.f.specific_site.errors.required)}}function Rt(o,s){if(1&o&&(t.TgZ(0,"div")(1,"label",33),t._uU(2,"EPTB Site Specific"),t.qZA(),t._UZ(3,"input",34),t.YNc(4,Lt,2,1,"div",11),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.VKq(3,u,e.show_error&&e.f.specific_site.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(5,m,e.show_error&&e.f.specific_site.errors)),t.xp6(1),t.Q6J("ngIf",e.show_error&&e.f.specific_site.errors)}}function Wt(o,s){if(1&o&&(t.TgZ(0,"option",38),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("ngValue","N"===e.code?0:1),t.xp6(1),t.Oqu(e.desc)}}function zt(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=t.oxw(4);t.xp6(1),t.hij(" ",e.required_message," ")}}function Xt(o,s){if(1&o&&(t.TgZ(0,"div",21),t.YNc(1,zt,2,1,"div",16),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",null==e.f.drug_resistant_flag.errors?null:e.f.drug_resistant_flag.errors.required)}}function te(o,s){if(1&o&&(t.TgZ(0,"div")(1,"label",35),t._uU(2,"Drug Resistant (RR/MDR-TB)"),t.qZA(),t.TgZ(3,"select",36),t.YNc(4,Wt,2,2,"option",37),t.qZA(),t.YNc(5,Xt,2,1,"div",11),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.VKq(4,u,e.show_error&&e.f.drug_resistant_flag.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(6,m,e.show_error&&e.f.drug_resistant_flag.errors)),t.xp6(1),t.Q6J("ngForOf",e.tb_answers_yn),t.xp6(1),t.Q6J("ngIf",e.show_error&&e.f.drug_resistant_flag.errors)}}function ee(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=t.oxw(4);t.xp6(1),t.hij(" ",e.required_message," ")}}function oe(o,s){if(1&o&&(t.TgZ(0,"div",21),t.YNc(1,ee,2,1,"div",16),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",null==e.f.treatment_start.errors?null:e.f.treatment_start.errors.required)}}function ne(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=t.oxw(4);t.xp6(1),t.hij(" ",e.required_message," ")}}function ie(o,s){if(1&o&&(t.TgZ(0,"div",21),t.YNc(1,ne,2,1,"div",16),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",null==e.f.continuation_start.errors?null:e.f.continuation_start.errors.required)}}function se(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=t.oxw(4);t.xp6(1),t.hij(" ",e.required_message," ")}}function re(o,s){if(1&o&&(t.TgZ(0,"div",21),t.YNc(1,se,2,1,"div",16),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",null==e.f.treatment_end.errors?null:e.f.treatment_end.errors.required)}}function ae(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=t.oxw(5);t.xp6(1),t.hij(" ",e.required_message," ")}}function _e(o,s){if(1&o&&(t.TgZ(0,"div",21),t.YNc(1,ae,2,1,"div",16),t.qZA()),2&o){const e=t.oxw(4);t.xp6(1),t.Q6J("ngIf",null==e.f.pict_date.errors?null:e.f.pict_date.errors.required)}}function ce(o,s){if(1&o&&(t.TgZ(0,"div")(1,"label",48),t._uU(2,"PICT Date"),t.qZA(),t._UZ(3,"input",49),t.YNc(4,_e,2,1,"div",11),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngClass",t.VKq(3,u,e.show_error&&e.f.pict_date.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(5,m,e.show_error&&e.f.pict_date.errors)),t.xp6(1),t.Q6J("ngIf",e.show_error&&e.f.pict_date.errors)}}function le(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",39)(1,"div",40),t._uU(2," Important Dates "),t.qZA(),t.TgZ(3,"div",41)(4,"div")(5,"label",42),t._uU(6,"Treatment Start Date"),t.qZA(),t.TgZ(7,"input",43),t.NdJ("change",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.getContinuationDate())}),t.qZA(),t.YNc(8,oe,2,1,"div",11),t.qZA(),t.TgZ(9,"div")(10,"label",44),t._uU(11,"Continuation Date"),t.qZA(),t._UZ(12,"input",45),t.YNc(13,ie,2,1,"div",11),t.qZA(),t.TgZ(14,"div")(15,"label",46),t._uU(16,"Treatment End Date"),t.qZA(),t._UZ(17,"input",47),t.YNc(18,re,2,1,"div",11),t.qZA(),t.YNc(19,ce,5,7,"div",16),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(5),t.Q6J("ngClass",t.VKq(10,u,e.show_error&&e.f.treatment_start.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(12,m,e.show_error&&e.f.treatment_start.errors)),t.xp6(1),t.Q6J("ngIf",e.show_error&&e.f.treatment_start.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(14,u,e.show_error&&e.f.continuation_start.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(16,m,e.show_error&&e.f.continuation_start.errors)),t.xp6(1),t.Q6J("ngIf",e.show_error&&e.f.continuation_start.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(18,u,e.show_error&&e.f.treatment_end.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(20,m,e.show_error&&e.f.treatment_end.errors)),t.xp6(1),t.Q6J("ngIf",e.show_error&&e.f.treatment_end.errors),t.xp6(1),t.Q6J("ngIf",e.f.pict_date.enabled)}}function de(o,s){if(1&o&&(t.TgZ(0,"div",50)(1,"button",51),t._UZ(2,"fa-icon",52),t._uU(3),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.is_saving),t.xp6(1),t.Q6J("icon",e.is_saving?e.faCircleNotch:e.faSave)("spin",!!e.is_saving),t.xp6(1),t.hij(" ",e.caseHoldingForm.value.id?e.is_saving?"Updating":"Update":e.is_saving?"Saving":"Save"," ")}}function pe(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2),t._uU(2," Treatment Form "),t.qZA(),t.TgZ(3,"div",3)(4,"form",4),t.NdJ("ngSubmit",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.saveCaseFindings())}),t.TgZ(5,"div",5)(6,"div",6),t._uU(7," Enrollment Details "),t.qZA(),t.TgZ(8,"div",7)(9,"div")(10,"label",8),t._uU(11,"Enrolled As"),t.qZA(),t.TgZ(12,"select",9),t.NdJ("change",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.checkForm())}),t.YNc(13,vt,2,2,"option",10),t.qZA(),t.YNc(14,Tt,2,1,"div",11),t.qZA(),t.TgZ(15,"div")(16,"label",12),t._uU(17,"Case Number"),t.qZA(),t._UZ(18,"input",13),t.YNc(19,qt,3,2,"div",11),t.qZA(),t.TgZ(20,"div")(21,"label",14),t._uU(22,"Registration Date"),t.qZA(),t._UZ(23,"input",15),t.YNc(24,At,2,1,"div",11),t.qZA(),t.YNc(25,It,6,8,"div",16),t.YNc(26,Mt,6,8,"div",16),t.YNc(27,Yt,6,8,"div",17),t.YNc(28,Kt,6,8,"div",16),t.YNc(29,Gt,6,8,"div",16),t.YNc(30,Rt,5,7,"div",16),t.YNc(31,te,6,8,"div",16),t.qZA()(),t.YNc(32,le,20,22,"div",18),t.YNc(33,de,4,4,"div",19),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(4),t.Q6J("formGroup",e.caseHoldingForm),t.xp6(6),t.Q6J("ngClass",t.VKq(21,u,e.show_error&&e.f.enroll_as_code.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(23,m,e.show_error&&e.f.enroll_as_code.errors)),t.xp6(1),t.Q6J("ngForOf",e.tb_enroll_as),t.xp6(1),t.Q6J("ngIf",e.show_error&&e.f.enroll_as_code.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(25,u,e.show_error&&e.f.case_number.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(27,m,e.show_error&&e.f.case_number.errors)),t.xp6(1),t.Q6J("ngIf",e.show_error&&e.f.case_number.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(29,u,e.show_error&&e.f.registration_date.errors)),t.xp6(2),t.Q6J("max",e.max_date)("ngClass",t.VKq(31,m,e.show_error&&e.f.registration_date.errors)),t.xp6(1),t.Q6J("ngIf",e.show_error&&e.f.registration_date.errors),t.xp6(1),t.Q6J("ngIf",e.f.ipt_type_code.enabled),t.xp6(1),t.Q6J("ngIf",e.f.treatment_regimen_code.enabled),t.xp6(1),t.Q6J("ngIf",e.f.bacteriological_status_code.enabled),t.xp6(1),t.Q6J("ngIf",e.f.anatomical_site_code.enabled),t.xp6(1),t.Q6J("ngIf",e.f.eptb_site_id.enabled),t.xp6(1),t.Q6J("ngIf",e.f.specific_site.enabled),t.xp6(1),t.Q6J("ngIf",e.f.drug_resistant_flag.enabled),t.xp6(1),t.Q6J("ngIf",e.f.enroll_as_code.value),t.xp6(1),t.Q6J("ngIf",!e.selected_tb_consult||0===e.selected_tb_consult.treatment_done)}}let ue=(()=>{class o{saveCaseFindings(){this.is_saving=!0,this.caseHoldingForm.valid?this.http.post("tbdots/patient-tb-caseholding",this.caseHoldingForm.value).subscribe({next:()=>{this.showToastr("success","Recorded successfully","Case Holding"),this.getPatientTbHistory.emit()},error:e=>console.log(e)}):(this.show_error=!0,this.showToastr("error","Form invalid or incomplete","Error"))}showToastr(e,n,r){this.toastr[e](n,r),this.is_saving=!1}getContinuationDate(){let e=new Date(this.caseHoldingForm.value.treatment_start);e.setDate(e.getDate()+56),this.caseHoldingForm.patchValue({continuation_start:(0,c.p6)(e,"yyyy-MM-dd","en")}),this.getTreatmentEnd()}getTreatmentEnd(){let e=new Date(this.caseHoldingForm.value.continuation_start);e.setDate(e.getDate()+111),this.caseHoldingForm.patchValue({treatment_end:(0,c.p6)(e,"yyyy-MM-dd","en")})}get f(){return this.caseHoldingForm.controls}loadCaseHolding(){if(this.selected_tb_consult){let e=this.selected_tb_consult;e.case_holding&&(this.caseHoldingForm.patchValue({...e.case_holding}),this.caseHoldingForm.patchValue({id:e.id,enroll_as_code:e.case_holding.enroll_as.code,treatment_regimen_code:e.case_holding.treatment_regimen?e.case_holding.treatment_regimen.code:null,bacteriological_status_code:e.case_holding.bacteriological_status?e.case_holding.bacteriological_status.code:null,anatomical_site_code:e.case_holding.anatomical_site?e.case_holding.anatomical_site.code:null,eptb_site_id:e.case_holding.eptb_site?e.case_holding.eptb_site.id:null}))}this.show_form=!0,this.checkForm()}createForm(){this.caseHoldingForm=this.formBuilder.nonNullable.group({id:[null],patient_id:[this.patient_id],patient_tb_id:[this.selected_tb_consult.id],case_number:["",[i.kI.required,i.kI.pattern("^[a-zA-Z0-9]*$")]],enroll_as_code:["",i.kI.required],treatment_regimen_code:["",i.kI.required],registration_date:["",i.kI.required],treatment_start:["",i.kI.required],continuation_start:["",i.kI.required],treatment_end:["",i.kI.required],bacteriological_status_code:["",i.kI.required],anatomical_site_code:["",i.kI.required],eptb_site_id:["",i.kI.required],specific_site:["",i.kI.required],drug_resistant_flag:[0],ipt_type_code:["",i.kI.required],transfer_flag:[0],pict_date:[""]}),this.loadCaseHolding()}checkForm(){"IPT"===this.caseHoldingForm.value.enroll_as_code?(this.iptDisabled.forEach(e=>{this.f[e].disable()}),this.f.ipt_type_code.enable()):"DSTB"===this.caseHoldingForm.value.enroll_as_code?(this.iptDisabled.forEach(e=>{this.f[e].enable()}),this.f.eptb_site_id.disable(),this.f.specific_site.disable(),this.f.ipt_type_code.disable()):(this.iptDisabled.forEach(e=>{this.f[e].disable()}),this.f.eptb_site_id.disable(),this.f.specific_site.disable(),this.f.ipt_type_code.disable(),this.f.drug_resistant_flag.disable())}eptbSite(){"EP"===this.caseHoldingForm.value.anatomical_site_code?this.f.eptb_site_id.enable():this.f.eptb_site_id.disable()}specificSite(){"9"===this.caseHoldingForm.value.eptb_site_id?this.f.specific_site.enable():this.f.specific_site.disable()}loadLibraries(){this.http.get("tbdots/tb-libraries-caseholding").subscribe({next:e=>{this.tb_anatomical_sites=e.tb_anatomical_sites,this.tb_answers_yn=e.tb_answers_yn,this.tb_bacteriological_statuses=e.tb_bacteriological_statuses,this.tb_enroll_as=e.tb_enroll_as,this.tb_eptb_sites=e.tb_eptb_sites,this.tb_ipt_types=e.tb_ipt_types,this.tb_treatment_regimens=e.tb_treatment_regimens,this.createForm()},error:e=>console.log(e)})}constructor(e,n,r){this.http=e,this.toastr=n,this.formBuilder=r,this.getPatientTbHistory=new t.vpe,this.faSave=p.r6l,this.faAdd=p.XSk,this.faCircleNotch=p.IJ7,this.required_message="Required field",this.caseHoldingForm=new i.cw({id:new i.NI(""),patient_id:new i.NI(""),patient_tb_id:new i.NI(""),case_number:new i.NI(""),enroll_as_code:new i.NI(""),treatment_regimen_code:new i.NI(""),registration_date:new i.NI(""),treatment_start:new i.NI(""),continuation_start:new i.NI(""),treatment_end:new i.NI(""),bacteriological_status_code:new i.NI(""),anatomical_site_code:new i.NI(""),eptb_site_id:new i.NI(""),specific_site:new i.NI(""),drug_resistant_flag:new i.NI(!1),ipt_type_code:new i.NI(""),transfer_flag:new i.NI(!1),pict_date:new i.NI("")}),this.show_form=!1,this.is_saving=!1,this.show_error=!1,this.tb_anatomical_sites=[],this.tb_answers_yn=[],this.tb_bacteriological_statuses=[],this.tb_enroll_as=[],this.tb_eptb_sites=[],this.tb_ipt_types=[],this.iptDisabled=["treatment_regimen_code","bacteriological_status_code","anatomical_site_code","pict_date","eptb_site_id","specific_site","drug_resistant_flag"]}ngOnInit(){this.loadLibraries()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b.O),t.Y36(v._W),t.Y36(i.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-case-holding"]],inputs:{patient_id:"patient_id",selected_tb_consult:"selected_tb_consult",max_date:"max_date"},outputs:{getPatientTbHistory:"getPatientTbHistory"},decls:1,vars:1,consts:[["class","m-5 border border-slate-200 rounded-lg",4,"ngIf"],[1,"m-5","border","border-slate-200","rounded-lg"],[1,"bg-blue-500","text-white","rounded-t-md","py-2","pl-3","font-semibold"],[1,"mx-5","mb-5"],[3,"formGroup","ngSubmit"],[1,"grid","grid-cols-3","gap-4","w-full"],[1,"col-span-3","border-b","border-slate-200","w-full","my-2","font-semibold","text-sky-500"],[1,"mx-5","col-span-3","grid","grid-cols-3","gap-x-4"],["for","enroll_as_code",3,"ngClass"],["name","enroll_as_code","id","enroll_as_code","formControlName","enroll_as_code",1,"input",3,"ngClass","change"],[3,"value",4,"ngFor","ngForOf"],["class","invalid-alert",4,"ngIf"],["for","case_number",3,"ngClass"],["type","text","name","case_number","id","case_number","formControlName","case_number",1,"input",3,"ngClass"],["for","registration_date",3,"ngClass"],["type","date","name","registration_date","id","registration_date","formControlName","registration_date",1,"input",3,"max","ngClass"],[4,"ngIf"],["class","col-span-2",4,"ngIf"],["class","mt-1 grid grid-cols-3 gap-x-4 w-full",4,"ngIf"],["class","flex justify-center mt-5",4,"ngIf"],[3,"value"],[1,"invalid-alert"],["for","ipt_type_code",3,"ngClass"],["name","ipt_type_code","id","ipt_type_code","formControlName","ipt_type_code",1,"input",3,"ngClass"],["for","treatment_regimen_code",3,"ngClass"],["name","treatment_regimen_code","id","treatment_regimen_code","formControlName","treatment_regimen_code",1,"input",3,"ngClass"],[1,"col-span-2"],["for","bacteriological_status_code",3,"ngClass"],["name","bacteriological_status_code","id","bacteriological_status_code","formControlName","bacteriological_status_code",1,"input",3,"ngClass"],["for","anatomical_site_code",3,"ngClass"],["name","anatomical_site_code","id","anatomical_site_code","formControlName","anatomical_site_code",1,"input",3,"ngClass","change"],["for","eptb_site_id",3,"ngClass"],["name","eptb_site_id","id","eptb_site_id","formControlName","eptb_site_id",1,"input",3,"ngClass","change"],["for","specific_site",3,"ngClass"],["type","text","name","specific_site","id","specific_site","formControlName","specific_site",1,"input",3,"ngClass"],["for","drug_resistant_flag",3,"ngClass"],["name","drug_resistant_flag","id","drug_resistant_flag","formControlName","drug_resistant_flag",1,"input",3,"ngClass"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"mt-1","grid","grid-cols-3","gap-x-4","w-full"],[1,"col-span-3","border-b","border-slate-200","w-full","my-2","pt-3","font-semibold","text-sky-500"],[1,"mx-5","col-span-3","grid","grid-cols-4","gap-x-4"],["for","treatment_start",3,"ngClass"],["type","date","name","treatment_start","id","treatment_start","formControlName","treatment_start",1,"input",3,"ngClass","change"],["for","continuation_start",3,"ngClass"],["type","date","name","continuation_start","id","continuation_start","formControlName","continuation_start",1,"input",3,"ngClass"],["for","treatment_end",3,"ngClass"],["type","date","name","treatment_end","id","treatment_end","formControlName","treatment_end",1,"input",3,"ngClass"],["for","pict_date",3,"ngClass"],["type","date","name","pict_date","id","pict_date","formControlName","pict_date",1,"input",3,"ngClass"],[1,"flex","justify-center","mt-5"],["type","submit",1,"btn-save","mr-5","mt-4",3,"disabled"],[1,"mr-2",3,"icon","spin"]],template:function(e,n){1&e&&t.YNc(0,pe,34,33,"div",0),2&e&&t.Q6J("ngIf",n.show_form)},dependencies:[c.mk,c.sg,c.O5,h.BN,i._Y,i.YN,i.Kr,i.Fj,i.EJ,i.JJ,i.JL,i.sg,i.u]}),o})();function me(o,s){if(1&o&&(t.TgZ(0,"th",10),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.Oqu(e)}}function ge(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"input",15),t.NdJ("ngModelChange",function(r){t.CHM(e);const a=t.oxw().$implicit,_=t.oxw(),d=_.index,f=_.$implicit,x=t.oxw();return t.KtG(x.intensiveForm[d+"-"+f.year+"-"+f.month[0].toString().padStart(2,"0")+"-"+a.toString().padStart(2,"0")]=r)}),t.qZA()}if(2&o){const e=t.oxw().$implicit,n=t.oxw(),r=n.index,a=n.$implicit,_=t.oxw();t.Q6J("ngModel",_.intensiveForm[r+"-"+a.year+"-"+a.month[0].toString().padStart(2,"0")+"-"+e.toString().padStart(2,"0")])}}function fe(o,s){if(1&o&&(t.TgZ(0,"td",13),t.YNc(1,ge,1,1,"input",14),t.qZA()),2&o){const e=s.$implicit,n=t.oxw(),r=n.$implicit,a=n.index,_=t.oxw();t.xp6(1),t.Q6J("ngIf",_.compareDate(_.treatment_start,_.continuation_start,r.month[0],e,r.year,"ip",a))}}function he(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"input",11),t.NdJ("ngModelChange",function(r){const _=t.CHM(e).index,d=t.oxw();return t.KtG(d.intensiveAll[_]=r)})("click",function(){const a=t.CHM(e).index,_=t.oxw();return t.KtG(_.checkAll("ip",a))}),t.qZA()(),t.TgZ(3,"td",4),t._uU(4),t.qZA(),t.TgZ(5,"td",4),t._uU(6),t.qZA(),t.YNc(7,fe,2,1,"td",12),t.qZA()}if(2&o){const e=s.$implicit,n=s.index,r=t.oxw();t.xp6(2),t.Q6J("ngModel",r.intensiveAll[n]),t.xp6(2),t.hij(" ",e.month[1]," "),t.xp6(2),t.hij(" ",e.year," "),t.xp6(1),t.Q6J("ngForOf",r.days)}}function be(o,s){if(1&o&&(t.TgZ(0,"th",10),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.Oqu(e)}}function xe(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"input",15),t.NdJ("ngModelChange",function(r){t.CHM(e);const a=t.oxw().$implicit,_=t.oxw(),d=_.index,f=_.$implicit,x=t.oxw();return t.KtG(x.continuationForm[d+"-"+f.year+"-"+f.month[0].toString().padStart(2,"0")+"-"+a.toString().padStart(2,"0")]=r)}),t.qZA()}if(2&o){const e=t.oxw().$implicit,n=t.oxw(),r=n.index,a=n.$implicit,_=t.oxw();t.Q6J("ngModel",_.continuationForm[r+"-"+a.year+"-"+a.month[0].toString().padStart(2,"0")+"-"+e.toString().padStart(2,"0")])}}function ve(o,s){if(1&o&&(t.TgZ(0,"td",13),t.YNc(1,xe,1,1,"input",14),t.qZA()),2&o){const e=s.$implicit,n=t.oxw(),r=n.$implicit,a=n.index,_=t.oxw();t.xp6(1),t.Q6J("ngIf",_.compareDate(_.continuation_start,_.treatment_end,r.month[0],e,r.year,"cp",a))}}function Ce(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"input",11),t.NdJ("ngModelChange",function(r){const _=t.CHM(e).index,d=t.oxw();return t.KtG(d.continuationAll[_]=r)})("click",function(){const a=t.CHM(e).index,_=t.oxw();return t.KtG(_.checkAll("cp",a))}),t.qZA()(),t.TgZ(3,"td",4),t._uU(4),t.qZA(),t.TgZ(5,"td",4),t._uU(6),t.qZA(),t.YNc(7,ve,2,1,"td",12),t.qZA()}if(2&o){const e=s.$implicit,n=s.index,r=t.oxw();t.xp6(2),t.Q6J("ngModel",r.continuationAll[n]),t.xp6(2),t.hij(" ",e.month[1]," "),t.xp6(2),t.hij(" ",e.year," "),t.xp6(1),t.Q6J("ngForOf",r.days)}}let Te=(()=>{class o{checkAll(e,n){"ip"===e?Object.entries(this.intensiveForm).forEach(([r,a],_)=>{let d=r;n.toString()===d.split("-")[0].toString()&&(this.intensiveForm[r]=!this.intensiveAll[n])}):(console.log("test"),Object.entries(this.continuationForm).forEach(([r,a],_)=>{let d=r;n.toString()===d.split("-")[0].toString()&&(this.continuationForm[r]=!this.continuationAll[n])}))}modelClick(){}generateChart(){if(this.selected_tb_consult.case_holding){console.log(this.selected_tb_consult.case_holding),this.treatment_start=new Date(this.selected_tb_consult.case_holding.treatment_start),this.continuation_start=new Date(this.selected_tb_consult.case_holding.continuation_start),this.treatment_end=new Date(this.selected_tb_consult.case_holding.treatment_end);for(let n=new Date(this.selected_tb_consult.case_holding.treatment_start);n<=new Date(this.selected_tb_consult.case_holding.continuation_start);n.setMonth(n.getMonth()+1))this.intensive_phase.push({month:[n.getMonth()+1,n.toLocaleString("default",{month:"long"})],year:n.getFullYear()});for(let n=new Date(new Date(this.selected_tb_consult.case_holding.continuation_start).getFullYear()+"-"+(new Date(this.selected_tb_consult.case_holding.continuation_start).getMonth()+1)+"-01");n<=new Date(this.selected_tb_consult.case_holding.treatment_end);n.setMonth(n.getMonth()+1))this.continuation_phase.push({month:[n.getMonth()+1,n.toLocaleString("default",{month:"long"})],year:n.getFullYear()})}}onSubmit(){console.log(this.intensiveForm)}compareDate(e,n,r,a,_,d,f){if(this.isValidDate(`${_}-${r.toString().padStart(2,"0")}-${a.toString().padStart(2,"0")}`)){let x=new Date(`${_}-${r.toString().padStart(2,"0")}-${a.toString().padStart(2,"0")}`),ro=new Date(e),T=new Date(n),A=x>=ro&&x<=T;return"ip"===d?(T.setDate(T.getDate()-1),A&&(this.intensiveForm[f+"-"+_+"-"+r.toString().padStart(2,"0")+"-"+a.toString().padStart(2,"0")]||(this.intensiveForm[f+"-"+_+"-"+r.toString().padStart(2,"0")+"-"+a.toString().padStart(2,"0")]=!1))):(T.setDate(T.getDate()),A&&(this.continuationForm[f+"-"+_+"-"+r.toString().padStart(2,"0")+"-"+a.toString().padStart(2,"0")]||(this.continuationForm[f+"-"+_+"-"+r.toString().padStart(2,"0")+"-"+a.toString().padStart(2,"0")]=!1))),A}return!1}isValidDate(e){const n=new Date(e);return n.getFullYear()===Number(e.substr(0,4))&&n.getMonth()===Number(e.substr(5,2))-1&&n.getDate()===Number(e.substr(8,2))}constructor(e,n){this.http=e,this.toastr=n,this.getPatientTbHistory=new t.vpe,this.faCircleNotch=p.IJ7,this.faSave=C.r6l,this.days=Array.from({length:31},(r,a)=>a+1),this.intensive_phase=[],this.continuation_phase=[],this.intensiveForm=[],this.intensiveAll=[],this.continuationForm=[],this.continuationAll=[],this.ip_count=[],this.cp_count=[],this.is_saving=!1}ngOnInit(){this.ip_count=[],this.cp_count=[],this.generateChart()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b.O),t.Y36(v._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-dots-chart"]],inputs:{patient_id:"patient_id",consult_id:"consult_id",selected_tb_consult:"selected_tb_consult"},outputs:{getPatientTbHistory:"getPatientTbHistory"},decls:36,vars:8,consts:[[1,"flex","overflow-x-auto"],[1,"flex","flex-col","p-5","mt-10","border","border-slate-200","rouned-md","shadow-md"],[1,"text-center","font-semibold"],[1,"bg-blue-500","text-white"],[1,"px-2"],["class","w-12 font-normal px-1",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"flex","justify-center","mt-5"],["type","button",1,"btn-save","mr-5","mt-4",3,"disabled","click"],[1,"mr-2",3,"icon","spin"],[1,"w-12","font-normal","px-1"],["type","checkbox",1,"input-checkbox",3,"ngModel","ngModelChange","click"],["class","px-1",4,"ngFor","ngForOf"],[1,"px-1"],["type","checkbox","class","input-checkbox",3,"ngModel","ngModelChange",4,"ngIf"],["type","checkbox",1,"input-checkbox",3,"ngModel","ngModelChange"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3," Intensive Phase "),t.qZA(),t.TgZ(4,"div")(5,"table")(6,"thead")(7,"tr",3),t._UZ(8,"th"),t.TgZ(9,"th",4),t._uU(10,"Month"),t.qZA(),t.TgZ(11,"th",4),t._uU(12,"Year"),t.qZA(),t.YNc(13,me,2,1,"th",5),t.qZA()(),t.TgZ(14,"tbody"),t.YNc(15,he,8,4,"tr",6),t.qZA()()()()(),t.TgZ(16,"div",0)(17,"div",1)(18,"div",2),t._uU(19," Continuation Phase "),t.qZA(),t.TgZ(20,"div")(21,"table")(22,"thead")(23,"tr",3),t._UZ(24,"th"),t.TgZ(25,"th",4),t._uU(26,"Month"),t.qZA(),t.TgZ(27,"th",4),t._uU(28,"Year"),t.qZA(),t.YNc(29,be,2,1,"th",5),t.qZA()(),t.TgZ(30,"tbody"),t.YNc(31,Ce,8,4,"tr",6),t.qZA()()()()(),t.TgZ(32,"div",7)(33,"button",8),t.NdJ("click",function(){return n.onSubmit()}),t._UZ(34,"fa-icon",9),t._uU(35),t.qZA()()),2&e&&(t.xp6(13),t.Q6J("ngForOf",n.days),t.xp6(2),t.Q6J("ngForOf",n.intensive_phase),t.xp6(14),t.Q6J("ngForOf",n.days),t.xp6(2),t.Q6J("ngForOf",n.continuation_phase),t.xp6(2),t.Q6J("disabled",n.is_saving),t.xp6(1),t.Q6J("icon",n.is_saving?n.faCircleNotch:n.faSave)("spin",!!n.is_saving),t.xp6(1),t.hij(" ",n.intensiveForm?n.is_saving?"Updating":"Update":n.is_saving?"Saving":"Save"," "))},dependencies:[c.sg,c.O5,h.BN,i.Wl,i.JJ,i.On]}),o})();function Ze(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function we(o,s){if(1&o&&(t.TgZ(0,"div",25),t.YNc(1,Ze,2,1,"div",26),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.outcome_date.errors?null:e.f.outcome_date.errors.required)}}function qe(o,s){if(1&o&&(t.TgZ(0,"option",27),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e.code),t.xp6(1),t.Oqu(e.desc)}}function ye(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.required_message," ")}}function Ae(o,s){if(1&o&&(t.TgZ(0,"div",25),t.YNc(1,ye,2,1,"div",26),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.tb_treatment_outcome_code.errors?null:e.f.tb_treatment_outcome_code.errors.required)}}const Ne=function(o){return{hidden:o}};function Ue(o,s){if(1&o&&(t.TgZ(0,"option",31),t._uU(1),t.qZA()),2&o){const e=s.$implicit,n=t.oxw(2);t.Q6J("ngClass",t.VKq(3,Ne,n.checkReason(e.id)))("value",e.id),t.xp6(1),t.Oqu(e.desc)}}function Je(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.required_message," ")}}function Ie(o,s){if(1&o&&(t.TgZ(0,"div",25),t.YNc(1,Je,2,1,"div",26),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.f.lib_tb_outcome_reason_id.errors?null:e.f.lib_tb_outcome_reason_id.errors.required)}}const q=function(o){return{"text-red-500":o}},y=function(o){return{"invalid-input":o}};function Fe(o,s){if(1&o&&(t.TgZ(0,"div",15)(1,"label",28),t._uU(2,"Treatment Outcome"),t.qZA(),t.TgZ(3,"select",29),t.YNc(4,Ue,2,5,"option",30),t.qZA(),t.YNc(5,Ie,2,1,"div",10),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(4,q,e.show_error&&e.f.outcome_date.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(6,y,e.show_error&&e.f.lib_tb_outcome_reason_id.errors)),t.xp6(1),t.Q6J("ngForOf",e.outcome_reasons),t.xp6(1),t.Q6J("ngIf",e.show_error&&e.f.lib_tb_outcome_reason_id.errors)}}let Qe=(()=>{class o{get f(){return this.tbForm.controls}onSubmit(){this.is_saving=!0,this.http.update("tbdots/patient-tb/",this.selected_tb_consult.id,this.tbForm.value).subscribe({next:e=>{this.saveComplete()},error:e=>console.log(e)})}saveComplete(){this.is_saving=!1,this.toastr.success("Successfully recorded!","Treatment Outcome"),this.switchPage.emit(1),this.closeModal()}disableFields(){"D"===this.tbForm.value.tb_treatment_outcome_code||"LTFU"===this.tbForm.value.tb_treatment_outcome_code||"NE"===this.tbForm.value.tb_treatment_outcome_code?this.tbForm.controls.lib_tb_outcome_reason_id.enable():this.tbForm.controls.lib_tb_outcome_reason_id.disable()}loadLibraries(){this.http.get("libraries/tb-treatment-outcome").subscribe({next:e=>this.treatment_outcomes=e.data,error:e=>console.log(e)}),this.http.get("libraries/tb-outcome-reason").subscribe({next:e=>this.outcome_reasons=e.data,error:e=>console.log(e)})}checkReason(e){let n=!1;return"D"===this.f.tb_treatment_outcome_code.value?n=!(e>=10&&e<=11):("LTFU"===this.f.tb_treatment_outcome_code.value||"NE"===this.f.tb_treatment_outcome_code.value)&&(n=e>=10&&e<=11),n}createForm(){this.selected_tb_consult&&(this.tbForm=this.formBuilder.nonNullable.group({patient_id:[this.selected_tb_consult.patient_id],tb_treatment_outcome_code:["",i.kI.required],lib_tb_outcome_reason_id:["",i.kI.required],outcome_date:["",i.kI.required],treatment_done:[!1],outcome_remarks:[""]})),this.loadLibraries(),this.disableFields(),this.tbForm.patchValue({tb_treatment_outcome_code:this.selected_tb_consult.tb_treatment_outcome?this.selected_tb_consult.tb_treatment_outcome.code:null,lib_tb_outcome_reason_id:this.selected_tb_consult.outcome_reason?this.selected_tb_consult.outcome_reason.id:null,outcome_date:this.selected_tb_consult.outcome_date?(0,c.p6)(this.selected_tb_consult.outcome_date,"yyyy-MM-dd","en"):null,treatment_done:this.selected_tb_consult.treatment_done,outcome_remarks:this.selected_tb_consult.outcome_remarks}),this.disableFields()}closeModal(){this.toggleModal.emit("treatment_outcome")}constructor(e,n,r){this.formBuilder=e,this.http=n,this.toastr=r,this.getPatientTbHistory=new t.vpe,this.toggleModal=new t.vpe,this.switchPage=new t.vpe,this.faSave=C.r6l,this.faCircleNotch=p.IJ7,this.is_saving=!1,this.show_error=!1,this.required_message="Required field",this.tbForm=new i.cw({patient_id:new i.NI(""),tb_treatment_outcome_code:new i.NI(""),lib_tb_outcome_reason_id:new i.NI(""),outcome_date:new i.NI(""),treatment_done:new i.NI(""),outcome_remarks:new i.NI("")})}ngOnInit(){this.createForm()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(i.qu),t.Y36(b.O),t.Y36(v._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-treatment-outcome"]],inputs:{selected_tb_consult:"selected_tb_consult",max_date:"max_date"},outputs:{getPatientTbHistory:"getPatientTbHistory",toggleModal:"toggleModal",switchPage:"switchPage"},decls:37,vars:20,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-3xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-orange-500"],[1,"text-sm","font-bold","text-white"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100"],[1,"text-left","text-gray-500","m-5",3,"formGroup","submit"],[1,"grid","grid-cols-2","gap-4"],["for","outcome_date",3,"ngClass"],["type","date","name","outcome_date","id","outcome_date","formControlName","outcome_date",1,"input",3,"max","ngClass"],["class","invalid-alert",4,"ngIf"],["for","tb_treatment_outcome_code",3,"ngClass"],["name","tb_treatment_outcome_code","id","tb_treatment_outcome_code","formControlName","tb_treatment_outcome_code",1,"input",3,"ngClass","change"],[3,"value",4,"ngFor","ngForOf"],["class","col-span-2",4,"ngIf"],[1,"col-span-2"],["for","outcome_remarks"],["name","outcome_remarks","id","outcome_remarks","formControlName","outcome_remarks",1,"input"],[1,"flex","justify-center"],["type","checkbox","id","treatment_done","formControlName","treatment_done",1,"border","border-slate-500","rounded","mr-3"],["for","treatment_done",1,"font-normal"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200"],["type","button",1,"btn-save","bg-gray-400",3,"click"],["type","submit",1,"btn-save","px-10","disabled:bg-gray-300",3,"disabled","click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"invalid-alert"],[4,"ngIf"],[3,"value"],["for","lib_tb_outcome_reason_id",3,"ngClass"],["name","lib_tb_outcome_reason_id","id","lib_tb_outcome_reason_id","formControlName","lib_tb_outcome_reason_id",1,"input",3,"ngClass"],[3,"ngClass","value",4,"ngFor","ngForOf"],[3,"ngClass","value"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5," Treatment Outcome/Status Form "),t.qZA()(),t.TgZ(6,"div",5)(7,"form",6),t.NdJ("submit",function(){return n.onSubmit()}),t.TgZ(8,"div",7)(9,"div")(10,"label",8),t._uU(11,"Outcome Date"),t.qZA(),t._UZ(12,"input",9),t.YNc(13,we,2,1,"div",10),t.qZA(),t.TgZ(14,"div")(15,"label",11),t._uU(16,"Treatment Outcome"),t.qZA(),t.TgZ(17,"select",12),t.NdJ("change",function(){return n.disableFields()}),t.YNc(18,qe,2,2,"option",13),t.qZA(),t.YNc(19,Ae,2,1,"div",10),t.qZA(),t.YNc(20,Fe,6,8,"div",14),t.TgZ(21,"div",15)(22,"label",16),t._uU(23,"Brief Explanation/Remarks"),t.qZA(),t._UZ(24,"textarea",17),t.qZA(),t.TgZ(25,"div",15)(26,"div",18),t._UZ(27,"input",19),t.TgZ(28,"label",20),t._uU(29,"Check to end this treatment"),t.qZA()()()()()(),t.TgZ(30,"div",21)(31,"button",22),t.NdJ("click",function(){return n.closeModal()}),t._uU(32,"Close"),t.qZA(),t.TgZ(33,"button",23),t.NdJ("click",function(){return n.onSubmit()}),t._UZ(34,"fa-icon"),t._uU(35),t.qZA()()()()(),t._UZ(36,"div",24)),2&e&&(t.xp6(7),t.Q6J("formGroup",n.tbForm),t.xp6(3),t.Q6J("ngClass",t.VKq(12,q,n.show_error&&n.f.outcome_date.errors)),t.xp6(2),t.Q6J("max",n.max_date)("ngClass",t.VKq(14,y,n.show_error&&n.f.outcome_date.errors)),t.xp6(1),t.Q6J("ngIf",n.show_error&&n.f.outcome_date.errors),t.xp6(2),t.Q6J("ngClass",t.VKq(16,q,n.show_error&&n.f.outcome_date.errors)),t.xp6(2),t.Q6J("ngClass",t.VKq(18,y,n.show_error&&n.f.tb_treatment_outcome_code.errors)),t.xp6(1),t.Q6J("ngForOf",n.treatment_outcomes),t.xp6(1),t.Q6J("ngIf",n.show_error&&n.f.tb_treatment_outcome_code.errors),t.xp6(1),t.Q6J("ngIf",n.f.lib_tb_outcome_reason_id.enabled),t.xp6(13),t.Q6J("disabled",n.is_saving||n.tbForm.invalid),t.xp6(2),t.hij(" ",n.is_saving?"Saving":"Save"," "))},dependencies:[c.mk,c.sg,c.O5,h.BN,i._Y,i.YN,i.Kr,i.Fj,i.Wl,i.EJ,i.JJ,i.JL,i.sg,i.u]}),o})();function Oe(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",2),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.switchPage(2))}),t._uU(1," TREATMENT "),t.qZA()}if(2&o){const e=t.oxw();t.Tol(2===e.pages?"tabs-main-true rounded-t-md":"tabs-main-false")}}function Me(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",2),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.switchPage(3))}),t._uU(1," ECLAIMS "),t.qZA()}if(2&o){const e=t.oxw();t.Tol(3===e.pages?"tabs-main-true rounded-t-md":"tabs-main-false")}}function ke(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.toggleModal("end_visit"))}),t._UZ(1,"fa-icon",15),t._uU(2," End Visit "),t.qZA()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faDoorClosed)}}function He(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.switchTab(3))}),t._uU(1," CASE HOLDING "),t.qZA()}if(2&o){const e=t.oxw(2);t.Tol(3===e.module?"tabs-main-true":"tabs-main-false")}}function Se(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.switchTab(8))}),t._uU(1," CASE RATE "),t.qZA()}if(2&o){const e=t.oxw(2);t.Tol(8===e.module?"tabs-main-true":"tabs-main-false")}}function Ye(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.toggleModal("treatment_outcome"))}),t._uU(1," Treatment Outome "),t.qZA()}}function Pe(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"nav",16)(1,"div",17)(2,"button",18),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.switchTab(1))}),t._uU(3," FINDINGS "),t.qZA(),t.YNc(4,He,2,2,"button",19),t.YNc(5,Se,2,2,"button",19),t.qZA(),t.TgZ(6,"div",17),t.YNc(7,Ye,2,0,"button",20),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(2),t.Tol(1===e.module?"tabs-main-true":"tabs-main-false"),t.xp6(2),t.Q6J("ngIf",null==e.selected_tb_consult?null:e.selected_tb_consult.id),t.xp6(1),t.Q6J("ngIf",null==e.selected_tb_consult?null:e.selected_tb_consult.id),t.xp6(2),t.Q6J("ngIf",e.selected_tb_consult&&0===e.selected_tb_consult.treatment_done)}}function De(o,s){1&o&&(t.TgZ(0,"div",26),t._uU(1," There is an ongoing TB treatment for this patient on another facility. You are not allowed to create a new treatment or view previous treatment from other facilities. "),t.qZA())}function Ee(o,s){if(1&o&&(t.TgZ(0,"div",27)(1,"div",28),t._UZ(2,"fa-icon",29),t.qZA(),t.TgZ(3,"div",30),t._uU(4,"Fetching history..."),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("icon",e.faCircleNotch)}}function Ke(o,s){1&o&&(t.TgZ(0,"td",40)(1,"div",41),t._uU(2," No records to show... "),t.qZA()())}function je(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",42),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,a=t.oxw(3);return t.KtG(a.openTbConsult(r))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",0===e.treatment_done?"Open":"View"," ")}}function Ve(o,s){if(1&o&&(t.TgZ(0,"tr",36),t.YNc(1,Ke,3,0,"td",37),t.TgZ(2,"td",38),t._uU(3),t.ALo(4,"date"),t.qZA(),t.TgZ(5,"td",38),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td",38),t._uU(9),t.qZA(),t.TgZ(10,"td",38),t._uU(11),t.qZA(),t.TgZ(12,"td",38),t._uU(13),t.qZA(),t.TgZ(14,"td",38),t._uU(15),t.qZA(),t.TgZ(16,"td",38),t.YNc(17,je,2,1,"button",39),t.qZA()()),2&o){const e=s.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("ngIf",!n.patient_tb_history),t.xp6(2),t.hij(" ",t.xi3(4,8,e.case_finding.consult_date,"MM/dd/yyyy")," "),t.xp6(3),t.hij(" ",e.case_holding?t.xi3(7,11,null==e.case_holding?null:e.case_holding.registration_date,"MM/dd/yyyy"):"-"," "),t.xp6(3),t.hij(" ",e.case_holding?null==e.case_holding?null:e.case_holding.case_number:"-"," "),t.xp6(2),t.hij(" ",e.case_holding?null==e.case_holding?null:e.case_holding.enroll_as.desc:"-"," "),t.xp6(2),t.hij(" ",e.tb_treatment_outcome?e.tb_treatment_outcome.desc:"-"," "),t.xp6(2),t.hij(" ",0===e.treatment_done?"Open":"Closed"," "),t.xp6(2),t.Q6J("ngIf",n.user_facility===e.facility_code)}}function $e(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr",36)(1,"td",40)(2,"div",43)(3,"div",44),t._uU(4,"No records to show..."),t.qZA(),t.TgZ(5,"div",44)(6,"button",45),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(3);return t.KtG(r.switchPage(2))}),t._uU(7," create record "),t.qZA()()()()()}}function Ge(o,s){if(1&o&&(t.TgZ(0,"table",31)(1,"thead",32)(2,"tr")(3,"th",33),t._uU(4,"Case Finding Date"),t.qZA(),t.TgZ(5,"th",33),t._uU(6,"Enrollment Date"),t.qZA(),t.TgZ(7,"th",33),t._uU(8,"Case number"),t.qZA(),t.TgZ(9,"th",33),t._uU(10,"Enrolled as"),t.qZA(),t.TgZ(11,"th",33),t._uU(12,"Treatment outcome"),t.qZA(),t.TgZ(13,"th",33),t._uU(14,"Treatment status"),t.qZA(),t.TgZ(15,"th",33),t._uU(16,"Action"),t.qZA()()(),t.TgZ(17,"tbody"),t.YNc(18,Ve,18,14,"tr",34),t.YNc(19,$e,8,0,"tr",35),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(18),t.Q6J("ngForOf",e.patient_tb_history),t.xp6(1),t.Q6J("ngIf",!e.patient_tb_history[0])}}function Be(o,s){if(1&o&&(t.TgZ(0,"div",22),t.YNc(1,De,2,0,"div",23),t.YNc(2,Ee,5,1,"div",24),t.YNc(3,Ge,20,2,"table",25),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.selected_tb_consult&&(null==e.selected_tb_consult?null:e.selected_tb_consult.facility_code)!==e.user_facility),t.xp6(1),t.Q6J("ngIf",e.fetching_history),t.xp6(1),t.Q6J("ngIf",!e.fetching_history&&e.patient_tb_history)}}function Le(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"app-casefindings",46),t.NdJ("getPatientTbHistory",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.getPatientTbHistory())}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("patient_id",e.patient_id)("selected_tb_consult",e.selected_tb_consult)("max_date",e.max_date)}}function Re(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"app-case-holding",46),t.NdJ("getPatientTbHistory",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.getPatientTbHistory())}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("patient_id",e.patient_id)("selected_tb_consult",e.selected_tb_consult)("max_date",e.max_date)}}function We(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"app-dots-chart",47),t.NdJ("getPatientTbHistory",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.getPatientTbHistory())}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("patient_id",e.patient_id)("selected_tb_consult",e.selected_tb_consult)}}function ze(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"app-end-visit",48),t.NdJ("toggleModal",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.toggleModal(r))}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("consult_id",null==e.consult_details?null:e.consult_details.id)("consult_date",null==e.consult_details?null:e.consult_details.consult_date)("patient_id",null==e.consult_details?null:e.consult_details.patient.id)("pt_group","tb")}}function Xe(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"app-treatment-outcome",49),t.NdJ("toggleModal",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.toggleModal(r))})("switchPage",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.switchPage(r))})("getPatientTbHistory",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.getPatientTbHistory())}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("selected_tb_consult",e.selected_tb_consult)("max_date",e.max_date)}}function to(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"app-caserate",50),t.NdJ("switchPage",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.switchPage(r))}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("patient_id",e.selected_tb_consult.patient_id)("program_id",e.selected_tb_consult.id)("program_name","tb")("max_date",e.max_date)}}function eo(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"app-eclaims",51),t.NdJ("switchPage",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.switchPage(r))}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("program_id",e.selected_tb_consult.id)("program_name","tb")("max_date",e.max_date)("selected_case",e.selected_tb_consult)}}const oo=[{path:"",component:(()=>{class o{openTbConsult(e){this.selected_tb_consult=e,1===e.treatment_done&&(this.consult_details=null),this.pages=2}getPatientTbHistory(){this.selected_tb_consult=null,this.fetching_history=!0,this.http.get("tbdots/patient-tb",{params:{patient_id:this.patient_id,per_page:"all"}}).subscribe({next:n=>{this.patient_tb_history=n.data,this.patient_tb_history[0]&&0===this.patient_tb_history[0].treatment_done&&(this.selected_tb_consult=n.data[0]),console.log(this.selected_tb_consult),this.fetching_history=!1},error:n=>console.log(n)})}switchPage(e){1===e&&this.getPatientTbHistory(),this.pages=e}switchTab(e){this.module=e}toggleModal(e){this.modals[e]=!this.modals[e]}loadConsult(){this.http.get("consultation/records",{params:{id:this.consult_id,pt_group:"tb"}}).subscribe({next:n=>{this.consult_details=n.data[0],this.getPatientTbHistory()},error:n=>console.log(n)})}constructor(e,n){this.http=e,this.route=n,this.faPersonWalking=p.EiI,this.faDoorClosed=p.TH0,this.faCircleNotch=p.IJ7,this.pages=1,this.module=1,this.show_end=!1,this.fetching_history=!0,this.patient_tb_history=[],this.max_date=(0,c.p6)(new Date,"yyyy-MM-dd","en"),this.modals=[]}ngOnInit(){this.user_facility=this.http.getUserFacility(),this.patient_id=this.route.snapshot.paramMap.get("id"),this.consult_id=this.route.snapshot.paramMap.get("consult_id"),this.loadConsult()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b.O),t.Y36(w.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-tbdots"]],decls:17,vars:14,consts:[[1,"flex"],[1,"mt-4","flex","flex-row","border-b","border-slate-300","text-xs"],[1,"tabs-main","w-36",3,"click"],["class","tabs-main w-36",3,"class","click",4,"ngIf"],[1,"ml-auto"],["type","button","class","btn-end-visit ml-auto mt-5",3,"click",4,"ngIf"],["class","mt-2 flex justify-between border-b border-slate-300 text-xs",4,"ngIf"],["class","my-5 w-full border border-gray-200 shadow-md rounded-xl",4,"ngIf"],[3,"patient_id","selected_tb_consult","max_date","getPatientTbHistory",4,"ngIf"],[3,"patient_id","selected_tb_consult","getPatientTbHistory",4,"ngIf"],[3,"consult_id","consult_date","patient_id","pt_group","toggleModal",4,"ngIf"],[3,"selected_tb_consult","max_date","toggleModal","switchPage","getPatientTbHistory",4,"ngIf"],[3,"patient_id","program_id","program_name","max_date","switchPage",4,"ngIf"],[3,"program_id","program_name","max_date","selected_case","switchPage",4,"ngIf"],["type","button",1,"btn-end-visit","ml-auto","mt-5",3,"click"],[1,"mr-1",3,"icon"],[1,"mt-2","flex","justify-between","border-b","border-slate-300","text-xs"],[1,"flex","flex-row"],[1,"tabs-main","w-28",3,"click"],["class","tabs-main w-28",3,"class","click",4,"ngIf"],["type","button","class","bg-rose-500 px-3 py-2  rounded text-white hover:opacity-75",3,"click",4,"ngIf"],["type","button",1,"bg-rose-500","px-3","py-2","rounded","text-white","hover:opacity-75",3,"click"],[1,"my-5","w-full","border","border-gray-200","shadow-md","rounded-xl"],["class","text-orange-800 border border-orange-400 bg-orange-100 rounded-md p-3 mb-2 w-full",4,"ngIf"],["class","flex flex-col",4,"ngIf"],["class","w-full text-sm text-left",4,"ngIf"],[1,"text-orange-800","border","border-orange-400","bg-orange-100","rounded-md","p-3","mb-2","w-full"],[1,"flex","flex-col"],[1,"w-full","flex","justify-center"],["spin","true",1,"pt-10",3,"icon"],[1,"w-full","flex","justify-center","pb-10","font-semibold"],[1,"w-full","text-sm","text-left"],[1,"text-xs","text-white","uppercase","bg-blue-500"],["scope","col",1,"py-3","px-6"],["class","bg-white border-b",4,"ngFor","ngForOf"],["class","bg-white border-b",4,"ngIf"],[1,"bg-white","border-b"],["colspan","7",4,"ngIf"],[1,"py-4","px-6"],["type","button","class","rounded-md bg-blue-500 text-white py-1 px-2",3,"click",4,"ngIf"],["colspan","7"],[1,"text-center"],["type","button",1,"rounded-md","bg-blue-500","text-white","py-1","px-2",3,"click"],[1,"text-center","py-3","flex","flex-col"],[1,"flex","justify-center"],["type","button",1,"mt-3","bg-blue-500","px-3","py-1","rounded-md","text-white","hover:opacity-75",3,"click"],[3,"patient_id","selected_tb_consult","max_date","getPatientTbHistory"],[3,"patient_id","selected_tb_consult","getPatientTbHistory"],[3,"consult_id","consult_date","patient_id","pt_group","toggleModal"],[3,"selected_tb_consult","max_date","toggleModal","switchPage","getPatientTbHistory"],[3,"patient_id","program_id","program_name","max_date","switchPage"],[3,"program_id","program_name","max_date","selected_case","switchPage"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"nav",1)(2,"button",2),t.NdJ("click",function(){return n.switchPage(1)}),t._uU(3," TREATMENT ARCHIVE "),t.qZA(),t.YNc(4,Oe,2,2,"button",3),t.YNc(5,Me,2,2,"button",3),t.qZA(),t.TgZ(6,"div",4),t.YNc(7,ke,3,1,"button",5),t.qZA()(),t.YNc(8,Pe,8,5,"nav",6),t.YNc(9,Be,4,3,"div",7),t.YNc(10,Le,1,3,"app-casefindings",8),t.YNc(11,Re,1,3,"app-case-holding",8),t.YNc(12,We,1,2,"app-dots-chart",9),t.YNc(13,ze,1,4,"app-end-visit",10),t.YNc(14,Xe,1,2,"app-treatment-outcome",11),t.YNc(15,to,1,4,"app-caserate",12),t.YNc(16,eo,1,4,"app-eclaims",13)),2&e&&(t.xp6(2),t.Tol(1===n.pages?"tabs-main-true rounded-t-md":"tabs-main-false"),t.xp6(2),t.Q6J("ngIf",!n.selected_tb_consult||(null==n.selected_tb_consult?null:n.selected_tb_consult.facility_code)===n.user_facility),t.xp6(1),t.Q6J("ngIf",!n.selected_tb_consult||(null==n.selected_tb_consult?null:n.selected_tb_consult.facility_code)===n.user_facility),t.xp6(2),t.Q6J("ngIf",!(null!=n.consult_details&&n.consult_details.consult_done)&&(null==n.selected_tb_consult?null:n.selected_tb_consult.facility_code)===n.user_facility),t.xp6(1),t.Q6J("ngIf",2===n.pages),t.xp6(1),t.Q6J("ngIf",1===n.pages),t.xp6(1),t.Q6J("ngIf",2===n.pages&&1===n.module),t.xp6(1),t.Q6J("ngIf",2===n.pages&&3===n.module),t.xp6(1),t.Q6J("ngIf",2===n.pages&&4===n.module),t.xp6(1),t.Q6J("ngIf",n.modals.end_visit),t.xp6(1),t.Q6J("ngIf",n.modals.treatment_outcome),t.xp6(1),t.Q6J("ngIf",2===n.pages&&8===n.module),t.xp6(1),t.Q6J("ngIf",3===n.pages))},dependencies:[c.sg,c.O5,h.BN,U.F,F,et.h,xt,ue,Te,Qe,c.uU]}),o})()}];let no=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[w.Bz.forChild(oo),w.Bz]}),o})();var io=l(9366);let so=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[c.ez,no,h.uH,i.u5,i.UX,U.F,Q.N,F,io.q]}),o})()}}]);