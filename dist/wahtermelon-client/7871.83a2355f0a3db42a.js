"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[7871],{7871:(z,d,n)=>{n.r(d),n.d(d,{StatisticsModule:()=>_});var c=n(177),u=n(3895),r=n(9417),t=n(3953),p=n(3318);const b=[{name:"tableau",src:"https://public.tableau.com/javascripts/api/tableau-2.9.1.min.js"}];let h=(()=>{class e{scripts={};constructor(){b.forEach(i=>{this.scripts[i.name]={loaded:!1,src:i.src}})}load(...i){const s=[];return i.forEach(a=>s.push(this.loadScript(a))),Promise.all(s)}loadScript(i){return new Promise((s,a)=>{if(this.scripts[i].loaded)s({script:i,loaded:!0,status:"Already Loaded"});else{const o=document.createElement("script");o.type="text/javascript",o.src=this.scripts[i].src,o.readyState?o.onreadystatechange=()=>{("loaded"===o.readyState||"complete"===o.readyState)&&(o.onreadystatechange=null,this.scripts[i].loaded=!0,s({script:i,loaded:!0,status:"Loaded"}))}:o.onload=()=>{this.scripts[i].loaded=!0,s({script:i,loaded:!0,status:"Loaded"})},o.onerror=F=>s({script:i,loaded:!1,status:"Loaded"}),document.getElementsByTagName("head")[0].appendChild(o)}})}static \u0275fac=function(s){return new(s||e)};static \u0275prov=t.jDH({token:e,factory:e.\u0275fac})}return e})(),g=(()=>{class e{scriptService;tableauViz;loaded=new t.bkB;tableauVizLoaded=new t.bkB;tableauJsApiUrl;tableauVizUrl;serverUrl;ticket;site;report;filters;options;debugMode=!1;constructor(i){this.scriptService=i}debug(i,s={}){this.debugMode&&(s?console.log(i):console.log(i,s))}ngOnInit(){if(this.tableauJsApiUrl){this.debug(`Loading custom Tableau JavaScript API file from ${this.tableauJsApiUrl}`);const i=document.createElement("script");i.type="text/javascript",i.src=this.tableauJsApiUrl,document.getElementsByTagName("head")[0].appendChild(i),i.onload=()=>{this.debug(`Custom Tableau JavaScript API successful loaded from ${this.tableauJsApiUrl}`),this.renderTableauViz(),this.loaded.emit(!0)},i.onerror=s=>console.error("Error loading custom Tableau JavaScript API",s)}else this.debug("Loading default Tableau JavaScript API file"),this.scriptService.load("tableau").then(i=>{this.debug("Default Tableau JavaScript API successful loaded",i),this.renderTableauViz(),this.loaded.emit(i)}).catch(i=>console.error("Error loading default Tableau JavaScript API",i))}renderTableauViz(){const i=document.getElementById("tableauViz"),s={...this.options,...this.filters};this.checkRequiredInputs()&&(this.tableauViz=new tableau.Viz(i,this.tableauVizUrl,s),this.tableauVizLoaded.emit(this.tableauViz))}checkRequiredInputs(){return this.tableauVizUrl?(this.debug(`Using Tableau visualization URL: ${this.tableauVizUrl}`),!0):this.createUrlFromInputs()}multisiteUrlOrNot(){return this.site?`/t/${this.site}/views/${this.report}`:`/views/${this.report}`}createUrlFromInputs(){if(this.ticket&&this.serverUrl&&this.report){const i=this.multisiteUrlOrNot();return this.tableauVizUrl=`${this.serverUrl}/trusted/${this.ticket}${i}`,this.debug(`Using Tableau visualization URL for private site: ${this.tableauVizUrl}`),!0}if(this.serverUrl&&this.report){const i=this.multisiteUrlOrNot();return this.tableauVizUrl=`${this.serverUrl}${i}`,this.debug(`Using Tableau visualization URL for public site: ${this.tableauVizUrl}`),!0}return console.error("One or both of the following parameters are missing: serverUrl or report"),!1}ngOnDestroy(){this.tableauViz&&this.tableauViz.dispose()}static \u0275fac=function(s){return new(s||e)(t.rXU(h))};static \u0275cmp=t.VBU({type:e,selectors:[["ngx-tableau"]],inputs:{tableauJsApiUrl:"tableauJsApiUrl",tableauVizUrl:"tableauVizUrl",serverUrl:"serverUrl",ticket:"ticket",site:"site",report:"report",filters:"filters",options:"options",debugMode:"debugMode"},outputs:{loaded:"loaded",tableauVizLoaded:"tableauVizLoaded"},decls:1,vars:0,consts:[["id","tableauViz",1,"ngx-tableau-viz"]],template:function(s,a){1&s&&t.nrm(0,"div",0)},styles:[".ngx-tableau-viz[_ngcontent-%COMP%]{z-index:1;height:calc(100vh - 20px)}"]})}return e})(),v=(()=>{class e{static \u0275fac=function(s){return new(s||e)};static \u0275mod=t.$C({type:e});static \u0275inj=t.G2t({providers:[h]})}return e})();const l=e=>({facility_code:e});let y=(()=>{class e{tabloid(){this.options={hideTabs:!0,hideToolbar:!0,disableUrlActionsPopups:!0,width:"1225px",height:"1100px"}}constructor(i,s){this.formBuilder=i,this.http=s}ngOnInit(){this.tabloid(),this.userInfo=this.http.getUserFromJSON(),console.log(this.userInfo)}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(r.ok),t.rXU(p.k))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-health-financing"]],decls:12,vars:20,consts:[[1,"flex","justify-center","items-center","mt-10","mb-10"],[1,"justify-center","items-center"],[1,""],["tableauVizUrl","https://public.tableau.com/views/ECLAIMSEXPERIMENTALNATIONALDASHBOARDv3/Dashboard1",3,"filters","options"],["tableauVizUrl","https://public.tableau.com/views/NATIONALKONSULTADASHBOARDv3/Dashboard3",3,"filters","options"],["tableauVizUrl","https://public.tableau.com/views/PATIENTREGISTRATIONv2/Dashboard1",3,"filters","options"],["tableauVizUrl","https://public.tableau.com/views/PATIENTCONSULTATIONv2/Dashboard1",3,"filters","options"],["tableauVizUrl","https://public.tableau.com/views/USERLOGINDASHBOARDv2/Dashboard1",3,"filters","options"]],template:function(s,a){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.nrm(3,"ngx-tableau",3),t.k0s(),t.j41(4,"div",2),t.nrm(5,"ngx-tableau",4),t.k0s(),t.j41(6,"div",2),t.nrm(7,"ngx-tableau",5),t.k0s(),t.j41(8,"div",2),t.nrm(9,"ngx-tableau",6),t.k0s(),t.j41(10,"div",2),t.nrm(11,"ngx-tableau",7),t.k0s()()()),2&s&&(t.R7$(3),t.Y8G("filters",t.eq3(10,l,a.userInfo.facility_code))("options",a.options),t.R7$(2),t.Y8G("filters",t.eq3(12,l,a.userInfo.facility_code))("options",a.options),t.R7$(2),t.Y8G("filters",t.eq3(14,l,a.userInfo.facility_code))("options",a.options),t.R7$(2),t.Y8G("filters",t.eq3(16,l,a.userInfo.facility_code))("options",a.options),t.R7$(2),t.Y8G("filters",t.eq3(18,l,a.userInfo.facility_code))("options",a.options))},dependencies:[g]})}return e})();function S(e,f){if(1&e&&(t.j41(0,"option",10),t.EFF(1),t.k0s()),2&e){const i=f.$implicit,s=t.XpG();t.Y8G("ngValue",i)("selected","1"===s.dashboard_type.id),t.R7$(),t.JRh(i.desc)}}function I(e,f){if(1&e&&t.nrm(0,"app-health-financing",11),2&e){const i=t.XpG();t.Y8G("dashboardForm",i.dashboardForm)("facility",i.userInfo.facility)("submit_flag",i.submit_flag)("dashboard_type",i.dashboard_type)}}const T=[{path:"",component:(()=>{class e{onSubmit(){console.log("submit ng dashboard type")}constructor(i,s){this.formBuilder=i,this.http=s,this.dashboardForm=new r.gE({dashboard_type:new r.MJ("")}),this.dashboard_type=[{id:"1",desc:"Facility Statistics"}]}ngOnInit(){this.userInfo=this.http.getUserFromJSON(),console.log(this.userInfo)}static#t=this.\u0275fac=function(s){return new(s||e)(t.rXU(r.ok),t.rXU(p.k))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-statistics"]],decls:12,vars:3,consts:[[1,"flex","grid","grid-cols-1","m-5"],[1,"flex","my-3","space-x-3",3,"ngSubmit","formGroup"],[1,"w-40"],["for","dashboard_type",1,"input-label"],["id","dashboard_type","name","dashboard_type","formControlName","dashboard_type",1,"input"],["selected","true","disabled","disabled"],["label","WAHTermelon Dashboard",1,"text-gray-500"],[3,"ngValue","selected",4,"ngFor","ngForOf"],[1,"border","border-slate-300","rounded-xl","px-5"],[3,"dashboardForm","facility","submit_flag","dashboard_type",4,"ngIf"],[3,"ngValue","selected"],[3,"dashboardForm","facility","submit_flag","dashboard_type"]],template:function(s,a){1&s&&(t.j41(0,"div",0)(1,"form",1),t.bIt("ngSubmit",function(){return a.onSubmit()}),t.j41(2,"div",2)(3,"label",3),t.EFF(4,"Dashboard"),t.k0s(),t.j41(5,"select",4)(6,"option",5),t.EFF(7,"Select report type"),t.k0s(),t.j41(8,"optgroup",6),t.DNE(9,S,2,3,"option",7),t.k0s()()()(),t.nrm(10,"div",8),t.DNE(11,I,1,4,"app-health-financing",9),t.k0s()),2&s&&(t.R7$(),t.Y8G("formGroup",a.dashboardForm),t.R7$(8),t.Y8G("ngForOf",a.dashboard_type),t.R7$(2),t.Y8G("ngIf","1"===(null==a.dashboardForm.value?null:a.dashboardForm.value.dashboard_type.id)))},dependencies:[c.Sq,c.bT,r.qT,r.xH,r.y7,r.wz,r.BC,r.cb,r.j4,r.JD,y]})}return e})()}];let A=(()=>{class e{static#t=this.\u0275fac=function(s){return new(s||e)};static#e=this.\u0275mod=t.$C({type:e});static#i=this.\u0275inj=t.G2t({imports:[u.iI.forChild(T),u.iI]})}return e})();var V=n(8761);let _=(()=>{class e{static#t=this.\u0275fac=function(s){return new(s||e)};static#e=this.\u0275mod=t.$C({type:e});static#i=this.\u0275inj=t.G2t({imports:[c.MD,A,r.X1,r.YN,V.MQ,v]})}return e})()}}]);