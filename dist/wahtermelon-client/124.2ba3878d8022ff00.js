"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[124],{2124:(it,r,_)=>{_.r(r),_.d(r,{XmlUploadModule:()=>lt});var p=_(6895),s=_(5749),a=_(2687),t=_(4650),u=_(4691),f=_(7185),c=_(4006),m=_(2216);function g(e,l){if(1&e&&(t.TgZ(0,"div",22)(1,"span",23),t._uU(2),t.qZA(),t._uU(3),t.ALo(4,"json"),t.qZA()),2&e){const o=l.$implicit;t.xp6(2),t.hij("",o.key,":"),t.xp6(1),t.hij(" ",t.lcZ(4,2,o.value)," ")}}function v(e,l){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,g,5,4,"div",21),t.ALo(2,"keyvalue"),t.qZA()),2&e){const o=l.$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,o.value))}}function x(e,l){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,v,3,3,"div",19),t.ALo(2,"keyvalue"),t.qZA()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,o.value))}}function Z(e,l){if(1&e&&(t.TgZ(0,"div",22)(1,"span",23),t._uU(2),t.qZA(),t._uU(3),t.ALo(4,"json"),t.qZA()),2&e){const o=l.$implicit;t.xp6(2),t.hij("",o.key,":"),t.xp6(1),t.hij(" ",t.lcZ(4,2,o.value)," ")}}function h(e,l){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,Z,5,4,"div",21),t.ALo(2,"keyvalue"),t.qZA()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,o.value))}}function b(e,l){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,x,3,3,"div",20),t.YNc(2,h,3,3,"div",20),t.qZA()),2&e){const o=l.$implicit;t.xp6(1),t.Q6J("ngIf",o.value.length>0),t.xp6(1),t.Q6J("ngIf",!o.value.length)}}function T(e,l){if(1&e&&(t.TgZ(0,"tr",18),t.YNc(1,b,3,2,"div",19),t.ALo(2,"keyvalue"),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,o.xml_to_view.ENLISTMENTS))}}function A(e,l){if(1&e&&(t.TgZ(0,"div",22)(1,"span",23),t._uU(2),t.qZA(),t._uU(3),t.ALo(4,"json"),t.qZA()),2&e){const o=l.$implicit;t.xp6(2),t.hij("",o.key,":"),t.xp6(1),t.hij(" ",t.lcZ(4,2,o.value)," ")}}function U(e,l){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,A,5,4,"div",21),t.ALo(2,"keyvalue"),t.qZA()),2&e){const o=l.$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,o.value))}}function y(e,l){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,U,3,3,"div",19),t.ALo(2,"keyvalue"),t.qZA()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,o.value))}}function C(e,l){if(1&e&&(t.TgZ(0,"div",22)(1,"span",23),t._uU(2),t.qZA(),t._uU(3),t.ALo(4,"json"),t.qZA()),2&e){const o=l.$implicit;t.xp6(2),t.hij("",o.key,":"),t.xp6(1),t.hij(" ",t.lcZ(4,2,o.value)," ")}}function w(e,l){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,C,5,4,"div",21),t.ALo(2,"keyvalue"),t.qZA()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,o.value))}}function X(e,l){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,y,3,3,"div",20),t.YNc(2,w,3,3,"div",20),t.qZA()),2&e){const o=l.$implicit;t.xp6(1),t.Q6J("ngIf",o.value.length>0),t.xp6(1),t.Q6J("ngIf",!o.value.length)}}function N(e,l){if(1&e&&(t.TgZ(0,"tr",18),t.YNc(1,X,3,2,"div",19),t.ALo(2,"keyvalue"),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,o.xml_to_view.PROFILING))}}function J(e,l){if(1&e&&(t.TgZ(0,"div",22)(1,"span",23),t._uU(2),t.qZA(),t._uU(3),t.ALo(4,"json"),t.qZA()),2&e){const o=l.$implicit;t.xp6(2),t.hij("",o.key,":"),t.xp6(1),t.hij(" ",t.lcZ(4,2,o.value)," ")}}function k(e,l){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,J,5,4,"div",21),t.ALo(2,"keyvalue"),t.qZA()),2&e){const o=l.$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,o.value))}}function q(e,l){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,k,3,3,"div",19),t.ALo(2,"keyvalue"),t.qZA()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,o.value))}}function M(e,l){if(1&e&&(t.TgZ(0,"div",22)(1,"span",23),t._uU(2),t.qZA(),t._uU(3),t.ALo(4,"json"),t.qZA()),2&e){const o=l.$implicit;t.xp6(2),t.hij("",o.key,":"),t.xp6(1),t.hij(" ",t.lcZ(4,2,o.value)," ")}}function L(e,l){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,M,5,4,"div",21),t.ALo(2,"keyvalue"),t.qZA()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,o.value))}}function j(e,l){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,q,3,3,"div",20),t.YNc(2,L,3,3,"div",20),t.qZA()),2&e){const o=l.$implicit;t.xp6(1),t.Q6J("ngIf",o.value.length>0),t.xp6(1),t.Q6J("ngIf",!o.value.length)}}function Q(e,l){if(1&e&&(t.TgZ(0,"tr",18),t.YNc(1,j,3,2,"div",19),t.ALo(2,"keyvalue"),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,o.xml_to_view.SOAPS))}}function I(e,l){if(1&e&&(t.TgZ(0,"div",22)(1,"span",23),t._uU(2),t.qZA(),t._uU(3),t.ALo(4,"json"),t.qZA()),2&e){const o=l.$implicit;t.xp6(2),t.hij("",o.key,":"),t.xp6(1),t.hij(" ",t.lcZ(4,2,o.value)," ")}}function F(e,l){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,I,5,4,"div",21),t.ALo(2,"keyvalue"),t.qZA()),2&e){const o=l.$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,o.value))}}function Y(e,l){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,F,3,3,"div",19),t.ALo(2,"keyvalue"),t.qZA()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,o.value))}}function O(e,l){if(1&e&&(t.TgZ(0,"div",22)(1,"span",23),t._uU(2),t.qZA(),t._uU(3),t.ALo(4,"json"),t.qZA()),2&e){const o=l.$implicit;t.xp6(2),t.hij("",o.key,":"),t.xp6(1),t.hij(" ",t.lcZ(4,2,o.value)," ")}}function $(e,l){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,O,5,4,"div",21),t.ALo(2,"keyvalue"),t.qZA()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,o.value))}}function S(e,l){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,Y,3,3,"div",20),t.YNc(2,$,3,3,"div",20),t.qZA()),2&e){const o=l.$implicit;t.xp6(1),t.Q6J("ngIf",o.value.length>0),t.xp6(1),t.Q6J("ngIf",!o.value.length)}}function E(e,l){if(1&e&&(t.TgZ(0,"tr",18),t.YNc(1,S,3,2,"div",19),t.ALo(2,"keyvalue"),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,o.xml_to_view.DIAGNOSTICEXAMRESULTS))}}function G(e,l){if(1&e&&(t.TgZ(0,"div",22)(1,"span",23),t._uU(2),t.qZA(),t._uU(3),t.ALo(4,"json"),t.qZA()),2&e){const o=l.$implicit;t.xp6(2),t.hij("",o.key,":"),t.xp6(1),t.hij(" ",t.lcZ(4,2,o.value)," ")}}function H(e,l){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,G,5,4,"div",21),t.ALo(2,"keyvalue"),t.qZA()),2&e){const o=l.$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,o.value))}}function R(e,l){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,H,3,3,"div",19),t.ALo(2,"keyvalue"),t.qZA()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,o.value))}}function B(e,l){if(1&e&&(t.TgZ(0,"div",22)(1,"span",23),t._uU(2),t.qZA(),t._uU(3),t.ALo(4,"json"),t.qZA()),2&e){const o=l.$implicit;t.xp6(2),t.hij("",o.key,":"),t.xp6(1),t.hij(" ",t.lcZ(4,2,o.value)," ")}}function D(e,l){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,B,5,4,"div",21),t.ALo(2,"keyvalue"),t.qZA()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,o.value))}}function K(e,l){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,R,3,3,"div",20),t.YNc(2,D,3,3,"div",20),t.qZA()),2&e){const o=l.$implicit;t.xp6(1),t.Q6J("ngIf",o.value.length>0),t.xp6(1),t.Q6J("ngIf",!o.value.length)}}function P(e,l){if(1&e&&(t.TgZ(0,"tr",18),t.YNc(1,K,3,2,"div",19),t.ALo(2,"keyvalue"),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,o.xml_to_view.MEDICINES))}}function z(e,l){if(1&e){const o=t.EpF();t.TgZ(0,"table",10)(1,"tbody")(2,"tr",11),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.toggleAccordion("enlistment"))}),t.TgZ(3,"td",12),t._uU(4,"ENLISTMENTS"),t.qZA()(),t.YNc(5,T,3,3,"tr",13),t.TgZ(6,"tr",11),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.toggleAccordion("profiling"))}),t.TgZ(7,"td",14),t._uU(8,"PROFILING"),t.qZA()(),t.YNc(9,N,3,3,"tr",13),t.TgZ(10,"tr",11),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.toggleAccordion("soaps"))}),t.TgZ(11,"td",15),t._uU(12,"SOAPS"),t.qZA()(),t.YNc(13,Q,3,3,"tr",13),t.TgZ(14,"tr",11),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.toggleAccordion("diagnostic"))}),t.TgZ(15,"td",16),t._uU(16,"DIAGNOSTIC EXAM RESULTS"),t.qZA()(),t.YNc(17,E,3,3,"tr",13),t.TgZ(18,"tr",11),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.toggleAccordion("medicines"))}),t.TgZ(19,"td",17),t._uU(20,"MEDICINE"),t.qZA()(),t.YNc(21,P,3,3,"tr",13),t.qZA()()}if(2&e){const o=t.oxw();t.xp6(5),t.Q6J("ngIf",o.accordion.enlistment),t.xp6(4),t.Q6J("ngIf",o.accordion.profiling),t.xp6(4),t.Q6J("ngIf",o.accordion.soaps),t.xp6(4),t.Q6J("ngIf",o.accordion.diagnostic),t.xp6(4),t.Q6J("ngIf",o.accordion.medicines)}}let W=(()=>{class e{toggleAccordion(o){this.accordion[o]=!this.accordion[o]}closeModal(){this.toggleModal.emit({name:"uploaded-xml",data:null})}constructor(){this.toggleModal=new t.vpe,this.is_loading=!1,this.faSpinner=a.LM3,this.show_form=!1,this.enlistments=[],this.accordion=[]}ngOnInit(){this.show_form=!0}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-uploaded-xml"]],inputs:{xml_to_view:"xml_to_view"},outputs:{toggleModal:"toggleModal"},decls:12,vars:1,consts:[["id","defaultModal","tabindex","-1","aria-modal","true","role","dialog",1,"overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","w-full","md:inset-0","h-modal","md:h-full","justify-center","items-center","flex",2,"z-index","60"],[1,"relative","p-4","w-full","max-w-4xl","h-auto","md:h-auto"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","justify-between","items-start","py-3","px-5","rounded-t","border-b","bg-blue-500","dark:border-gray-600"],[1,"mt-2","text-sm","font-bold","text-white","dark:text-white"],[1,"overflow-y-auto","h-96","scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-100","flex","justify-center"],["class","w-10/12 border border-slate-300 rounded-lg",4,"ngIf"],[1,"flex","justify-end","py-4","px-5","space-x-4","rounded-b","border-t","border-gray-200","dark:border-gray-600"],["type","button",1,"btn-save","bg-gray-400","px-10",3,"click"],[1,"opacity-50","fixed","inset-0","z-50","bg-black"],[1,"w-10/12","border","border-slate-300","rounded-lg"],[1,"cursor-pointer","h-10",3,"click"],[1,"font-bold","text-center","bg-green-300","w-full"],["class","border-b border-slate-200",4,"ngIf"],[1,"font-bold","text-center","bg-blue-300","w-full"],[1,"font-bold","text-center","bg-yellow-300","w-full"],[1,"font-bold","text-center","bg-red-300","w-full"],[1,"font-bold","text-center","bg-orange-300","w-full"],[1,"border-b","border-slate-200"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","pb-5 text-sm",4,"ngFor","ngForOf"],[1,"pb-5","text-sm"],[1,"font-semibold"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5," XML CONTENT "),t.qZA()(),t.TgZ(6,"div",5),t.YNc(7,z,22,5,"table",6),t.qZA(),t.TgZ(8,"div",7)(9,"button",8),t.NdJ("click",function(){return i.closeModal()}),t._uU(10,"Close"),t.qZA()()()()(),t._UZ(11,"div",9)),2&o&&(t.xp6(7),t.Q6J("ngIf",i.show_form))},dependencies:[p.sg,p.O5,p.Ts,p.Nd]}),e})();function V(e,l){if(1&e&&(t.TgZ(0,"tr")(1,"td",16)(2,"div",17)(3,"div",18),t._UZ(4,"fa-icon",19),t.TgZ(5,"div",20),t._uU(6," Uploading XML... "),t.qZA()()()()()),2&e){const o=t.oxw();t.xp6(4),t.Q6J("icon",o.faCircleNotch)}}function tt(e,l){if(1&e){const o=t.EpF();t.TgZ(0,"app-uploaded-xml",21),t.NdJ("toggleModal",function(n){t.CHM(o);const d=t.oxw();return t.KtG(d.toggleModal(n))}),t.qZA()}if(2&e){const o=t.oxw();t.Q6J("xml_to_view",o.xml_to_view)}}const et=[{path:"",component:(()=>{class e{toggleModal(o){this.modals[o.name]=!this.modals[o.name],o.data&&(Object.entries(o.data).forEach(([i,n],d)=>{this.uploaded_list.push(n)}),localStorage.setItem("uploaded-xml",JSON.stringify(this.uploaded_list)))}openModal(){this.toggleModal({name:"uploaded-xml"})}readXML(o){this.file_to_upload=o}uploadFile(o){this.is_uploading=!0;const i=new FormData;this.file_upload_count=o.length,this.uploaded_count=0;for(let n=0;n<o.length;n++){let d=o[n].name.split(".");"enc"===d[d.length-1]&&(this.uploaded_count+=1,i.append("xml[]",o[n]))}i.append("cipher_key",this.cipher_key),this.http.post("konsulta/upload-xml",i).subscribe({next:n=>{this.resetInput(),this.showToast("success","Uploaded "+this.uploaded_count+" of "+this.file_upload_count+" files","Upload Success")},error:n=>{this.resetInput()}})}showToast(o,i,n){this.toastr[o](i,n,{closeButton:!0,positionClass:"toast-top-center",disableTimeOut:!0})}resetInput(){this.is_uploading=!1,this.file_to_upload=null,this.xmlFile=null}viewContent(o){this.xml_to_view=o,this.openModal()}constructor(o,i){this.http=o,this.toastr=i,this.faCircleNotch=a.IJ7,this.faSearch=a.wn1,this.faCalendarDays=a.WRo,this.faArrowsRotate=a.T80,this.faUpload=a.cf$,this.faClipboardList=a.OGB,this.per_page=10,this.xml_list=[],this.modals=[],this.uploaded_list=[],this.file_to_upload=null,this.xmlFile=null,this.cipher_key="PHilheaLthDuMmyciPHerKeyS",this.uploaded_count=0,this.is_uploading=!1}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(u.O),t.Y36(f._W))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-xml-upload"]],decls:24,vars:6,consts:[[1,"bg-white","border","border-solid","border-slate-100","rounded-xl","shadow-md","h-full"],[1,"border","border-solid","border-slate-100","rounded-t-xl","font-semibold","justify-between","h-full"],[1,"flex","flex-col","justify-center","w-2/5","rounded-lg","border","border-slate-200","mx-auto","my-28"],[1,"bg-blue-500","text-white","text-lg","rounded-t-lg","p-2"],[1,"w-3/4","flex","justify-center","mx-auto","py-5"],["type","file","id","formFile",1,"form-control","w-full","px-3","py-1.5","text-base","font-normal","text-gray-700","bg-white","bg-clip-padding","border","border-solid","border-gray-300","rounded-lg","transition","ease-in-out","m-0","focus:text-gray-700","focus:bg-white","focus:border-blue-600","focus:outline-none",3,"ngModel","change","ngModelChange"],[1,"w-3/4","flex","justify-center","mx-auto","pb-5"],["type","text","placeholder","enter cipher key",1,"rounded-lg","w-full","px-3","py-2","border","border-solid","border-gray-300","text-sm","placeholder-gray-400",3,"ngModel","ngModelChange"],[1,"w-3/4","flex","justify-center","mx-auto"],["type","button",1,"disabled:bg-gray-400","w-full","py-2","mb-5","bg-blue-500","text-white","rounded-lg","text-sm",3,"disabled","click"],[1,"",3,"icon"],[1,"w-full"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400","mb-5","hidden"],[1,"text-center"],[4,"ngIf"],[3,"xml_to_view","toggleModal",4,"ngIf"],["colspan","2"],[1,"grid","grid-cols-1","w-full","mt-10"],[1,"flex","justify-center","mt-3"],["spin","true",1,"text-lg","mr-2","text-blue-500",3,"icon"],[1,"text-center","italic","pt-1"],[3,"xml_to_view","toggleModal"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4," Upload XMLs "),t.qZA(),t.TgZ(5,"div",4)(6,"input",5),t.NdJ("change",function(d){return i.readXML(d.target.files)})("ngModelChange",function(d){return i.xmlFile=d}),t.qZA()(),t.TgZ(7,"div",6)(8,"input",7),t.NdJ("ngModelChange",function(d){return i.cipher_key=d}),t.qZA()(),t.TgZ(9,"div",8)(10,"button",9),t.NdJ("click",function(){return i.uploadFile(i.file_to_upload)}),t._UZ(11,"fa-icon",10),t._uU(12," Upload XML "),t.qZA()()(),t.TgZ(13,"div",11)(14,"table",12)(15,"thead")(16,"tr")(17,"th",13),t._uU(18,"Name"),t.qZA(),t.TgZ(19,"th",13),t._uU(20,"Birthdate"),t.qZA()()(),t.TgZ(21,"tbody"),t.YNc(22,V,7,1,"tr",14),t.qZA()()()()(),t.YNc(23,tt,1,1,"app-uploaded-xml",15)),2&o&&(t.xp6(6),t.Q6J("ngModel",i.xmlFile),t.xp6(2),t.Q6J("ngModel",i.cipher_key),t.xp6(2),t.Q6J("disabled",!i.file_to_upload||!i.cipher_key),t.xp6(1),t.Q6J("icon",i.faUpload),t.xp6(11),t.Q6J("ngIf",i.is_uploading),t.xp6(1),t.Q6J("ngIf",i.modals["uploaded-xml"]))},dependencies:[p.O5,c.Fj,c.JJ,c.On,m.BN,W]}),e})()}];let ot=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[s.Bz.forChild(et),s.Bz]}),e})(),lt=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.ez,ot,c.u5,m.uH]}),e})()}}]);