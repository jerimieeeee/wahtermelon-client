"use strict";(self.webpackChunkwahtermelon_client=self.webpackChunkwahtermelon_client||[]).push([[978],{4978:(H,b,i)=>{i.r(b),i.d(b,{DashboardModule:()=>p});var g=i(6895),v=i(2216),x=i(2325),t=i(1571),a=i(2687),Z=i(4986),A=i(5963),T=i(4691),u=i(433);function U(s,n){if(1&s&&(t.TgZ(0,"option",9),t._uU(1),t.qZA()),2&s){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.lnq("",e.last_name,", ",e.first_name," ",e.middle_name,"")}}function q(s,n){if(1&s&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&s){const e=t.oxw().$implicit;t.xp6(1),t.AsE(" Dr. ",e.physician.first_name," ",e.physician.last_name," ")}}function J(s,n){1&s&&(t.TgZ(0,"span"),t._uU(1," - "),t.qZA())}function D(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",13),t.NdJ("click",function(){const r=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.openItr(null==r?null:r.patient.id,"itr"))}),t.TgZ(2,"a",14)(3,"div",15)(4,"span",16),t._uU(5),t.qZA()()(),t.TgZ(6,"div",17)(7,"span",18),t._uU(8),t.qZA(),t.TgZ(9,"span",19),t._uU(10," -"),t.qZA()()(),t.TgZ(11,"div",20)(12,"div",21),t.NdJ("click",function(){const r=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.openItr(null==r?null:r.patient.id,null==r?null:r.pt_group,null==r?null:r.id))}),t.TgZ(13,"button",22)(14,"span",23),t._uU(15),t.qZA(),t.TgZ(16,"span",24),t._uU(17),t.qZA()()(),t.TgZ(18,"div",25),t.YNc(19,q,2,2,"span",8),t.YNc(20,J,2,0,"span",8),t.qZA(),t.TgZ(21,"div",26),t._uU(22),t.qZA()()()}if(2&s){const e=n.$implicit,o=t.oxw(2);t.xp6(5),t.Oqu(o.getInitials((null==e||null==e.patient?null:e.patient.first_name)+" "+(null==e||null==e.patient?null:e.patient.last_name))),t.xp6(3),t.HOy(" ",null==e||null==e.patient?null:e.patient.last_name,", ",null==e||null==e.patient?null:e.patient.first_name," ","NA"===(null==e||null==e.patient?null:e.patient.middle_name)?"":null==e||null==e.patient?null:e.patient.middle_name," ","NA"===(null==e||null==e.patient?null:e.patient.suffix_name)?"":null==e||null==e.patient?null:e.patient.suffix_name," "),t.xp6(7),t.Oqu(o.getVisitType(null==e?null:e.pt_group)),t.xp6(2),t.Oqu(null==e?null:e.pt_group),t.xp6(2),t.Q6J("ngIf",e.physician),t.xp6(1),t.Q6J("ngIf",!e.physician),t.xp6(2),t.hij(" ",o.getDataDiff(null==e?null:e.consult_date)," ")}}function N(s,n){if(1&s&&(t.TgZ(0,"div",10),t.YNc(1,D,23,10,"div",11),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.today_consults)}}function M(s,n){1&s&&(t.TgZ(0,"div",10)(1,"div",27),t._uU(2," No record to show "),t.qZA()())}function O(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"div")(1,"div",28)(2,"div",29)(3,"div")(4,"p",30),t._uU(5," Showing "),t.TgZ(6,"span",31),t._uU(7),t.qZA(),t._uU(8," to "),t.TgZ(9,"span",31),t._uU(10),t.qZA(),t._uU(11," of "),t.TgZ(12,"span",31),t._uU(13),t.qZA(),t._uU(14," results "),t.qZA()(),t.TgZ(15,"div")(16,"nav",32)(17,"button",33),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.getTodaysConsult(1))}),t._UZ(18,"fa-icon",34),t.qZA(),t.TgZ(19,"button",35),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.getTodaysConsult(l.current_page-1))}),t._UZ(20,"fa-icon",34),t._uU(21,"Previous "),t.qZA(),t.TgZ(22,"button",35),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.getTodaysConsult(l.current_page+1))}),t._uU(23," Next"),t._UZ(24,"fa-icon",36),t.qZA(),t.TgZ(25,"button",37),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.getTodaysConsult(l.last_page))}),t._UZ(26,"fa-icon",36),t.qZA()()()()()()}if(2&s){const e=t.oxw();t.xp6(7),t.Oqu(e.from),t.xp6(3),t.Oqu(e.to),t.xp6(3),t.Oqu(e.total),t.xp6(4),t.Q6J("disabled",1===e.current_page),t.xp6(1),t.Q6J("icon",e.faAnglesLeft),t.xp6(1),t.Q6J("disabled",1===e.current_page),t.xp6(1),t.Q6J("icon",e.faChevronLeft),t.xp6(2),t.Q6J("disabled",e.current_page===e.last_page),t.xp6(2),t.Q6J("icon",e.faChevronRight),t.xp6(1),t.Q6J("disabled",e.current_page===e.last_page),t.xp6(1),t.Q6J("icon",e.faAnglesRight)}}const j=function(s){return{"text-blue-500":s}};class m{getTodaysConsult(n){let e={params:{}};n&&(e.params.page=n),"all"!==this.selected_physician&&(e.params.physician_id=this.selected_physician),e.params.per_page=this.per_page,e.params.consult_done=0,this.http.get("consultation/records",e).subscribe({next:o=>{this.today_consults=o.data,this.current_page=o.meta.current_page,this.last_page=o.meta.last_page,this.from=o.meta.from,this.to=o.meta.to,this.total=o.meta.total},error:o=>console.log(o)})}subscribeRefresh(){this.updateList=function w(s=0,n=Z.z){return s<0&&(s=0),(0,A.H)(s,s,n)}(1e4).subscribe(()=>{this.getTodaysConsult()})}loadPhysicians(){this.http.get("users",{params:{per_page:"all",designation_code:"MD"}}).subscribe({next:n=>{this.physicians=n.data;let e=this.http.getUserFromJSON();this.selected_physician="MD"===e.designation_code?e.id:"all",this.getTodaysConsult(),this.subscribeRefresh()},error:n=>console.log(n)})}openItr(n,e,o){this.router.navigate("itr"===e?["/patient/"+e,{id:n}]:["/patient/"+e,{id:n,consult_id:o}])}getDataDiff(n){let e=new Date,o=new Date(n);e.getTime(),o.getTime();var d=e.getTime()-o.getTime(),h=Math.floor(d/864e5),y=Math.floor(d/36e5)-24*h,C=Math.floor(d/6e4)-(24*h*60+60*y);return(h?h+" days":"")+" "+(y?y+" hours":"")+" "+(C?C+" minutes":"")}getVisitType(n){switch(n){case"cn":return"Consultation";case"cc":return"Child Care";case"mc":return"Maternal Care";case"dn":return"Dental";case"ncd":return"Non Communicable Disease"}}getInitials(n){return[...n.matchAll(/\b\w/g)].join("")}constructor(n,e){this.http=n,this.router=e,this.faQuestionCircle=a.Fuz,this.faChevronDown=a.ptq,this.faFolderOpen=a.cC_,this.faHeart=a.m6i,this.faFlask=a.jZZ,this.faNotesMedical=a.AKf,this.faExclamationCircle=a.RLE,this.faChevronRight=a._tD,this.faChevronLeft=a.A35,this.faAnglesLeft=a._Wx,this.faAnglesRight=a.ccb,this.per_page=5,this.physicians=[]}ngOnInit(){this.loadPhysicians()}ngOnDestroy(){this.updateList.unsubscribe()}}m.\u0275fac=function(n){return new(n||m)(t.Y36(T.O),t.Y36(x.F0))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-todays-consult"]],decls:12,vars:9,consts:[[1,"px-4","py-2","mb-10","rounded-xl","text-gray-600","h-100","border","border-slate-100"],[1,"md:flex","md:justify-between","md:items-center","pb-2","border-b-2"],[1,"font-semibold","pt-2",3,"ngClass"],[1,"flex","items-center"],[1,"input","px-2","mr-3","disabled:bg-gray-300","w-72",3,"ngModel","change","ngModelChange"],["value","all"],["class","pr-",3,"value",4,"ngFor","ngForOf"],["class","pt-3",4,"ngIf"],[4,"ngIf"],[1,"pr-",3,"value"],[1,"pt-3"],["class","flex justify-between items-center mb-3  pb-3 border-b border-gray-200",4,"ngFor","ngForOf"],[1,"flex","justify-between","items-center","mb-3","pb-3","border-b","border-gray-200"],[1,"flex","cursor-pointer","w-2/5","hover:opacity-75",3,"click"],[1,"justify-center","mx-auto"],[1,"inline-flex","overflow-hidden","relative","justify-center","items-center","w-16","h-16","bg-gray-200","rounded-full","dark:bg-gray-600"],[1,"font-medium","text-gray-600","text-sm","xl:text-lg"],[1,"flex","justify-center","text-blue-500","md:block","leading-tight","mx-2","my-1","w-full","hover:bg-blue-500","hover:text-white","p-1","rounded-md"],[1,"w-full","block","font-medium","my-0","py-0","text-sm"],[1,"w-full","block","text-xs"],[1,"grid","grid-cols-12","text-left","w-3/5"],[1,"col-span-6","text-gray-700","hover:bg-green-500","hover:text-white","hover:cursor-pointer","p-3","rounded-md","text-[.85em]",3,"click"],["type","button",1,"flex","justify-between"],[1,"hidden","xl:inline-block"],[1,"xl:hidden","uppercase","text-xs"],[1,"col-span-3","px-3","text-sm"],[1,"col-span-3","px-3","text-[.8em]"],[1,"text-center","items-center","mb-3","italic"],[1,"bg-white","px-4","py-3","flex","items-center","justify-between","border-t","border-gray-200","sm:px-6"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"text-sm","text-gray-700"],[1,"font-medium"],["aria-label","Pagination",1,"relative","z-0","inline-flex","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"disabled","click"],[1,"block","h-15","w-15","text-gray-500","pr-1",3,"icon"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","bg-white","text-sm","font-medium","text-gray-700","hover:bg-gray-50",3,"disabled","click"],[1,"h-5","w-5","text-gray-500",3,"icon"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","enabled:bg-white","disabled:bg-gray-300","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"disabled","click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span",2),t._uU(3),t.qZA(),t.TgZ(4,"div",3)(5,"select",4),t.NdJ("change",function(){return e.getTodaysConsult()})("ngModelChange",function(l){return e.selected_physician=l}),t.TgZ(6,"option",5),t._uU(7,"All"),t.qZA(),t.YNc(8,U,2,4,"option",6),t.qZA()()(),t.YNc(9,N,2,1,"div",7),t.YNc(10,M,3,0,"div",7),t.YNc(11,O,27,11,"div",8),t.qZA()),2&n&&(t.xp6(2),t.Q6J("ngClass",t.VKq(7,j,0===(null==e.today_consults?null:e.today_consults.length))),t.xp6(1),t.hij("Todays Consult ",(null==e.today_consults?null:e.today_consults.length)>=1?"("+e.total+")":"",""),t.xp6(2),t.Q6J("ngModel",e.selected_physician),t.xp6(3),t.Q6J("ngForOf",e.physicians),t.xp6(1),t.Q6J("ngIf",(null==e.today_consults?null:e.today_consults.length)>=1),t.xp6(1),t.Q6J("ngIf",0===(null==e.today_consults?null:e.today_consults.length)),t.xp6(1),t.Q6J("ngIf",(null==e.today_consults?null:e.today_consults.length)>=1))},dependencies:[g.mk,g.sg,g.O5,v.BN,u.YN,u.Kr,u.EJ,u.JJ,u.On]});var k=i(5657);function F(s,n){if(1&s&&(t.TgZ(0,"div",8)(1,"div",15),t._uU(2),t.qZA(),t.TgZ(3,"div",16),t._uU(4),t.qZA()()),2&s){const e=n.$implicit;t.xp6(2),t.hij(" ",e["Patient Group"]," "),t.xp6(2),t.hij(" ",null==e?null:e.count," ")}}class _{constructor(n,e){this.http=n,this.cookieService=e,this.faChevronDown=a.ptq}loadStats(){this.http.get("consultation/stats").subscribe({next:n=>{this.side_stats=n},error:n=>console.log(n)})}ngOnInit(){this.loadStats()}}_.\u0275fac=function(n){return new(n||_)(t.Y36(T.O),t.Y36(k.N))},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-todays-stats"]],decls:27,vars:3,consts:[[1,"block"],[1,"mb-4","py-3","px-2","text-gray-600","border","border-slate-200","rounded-xl"],[1,"border-b-2","border-slate-200","font-semibold","text-sm","text-left"],[1,"mb-3"],[1,"mt-3","font-semibold","text-sm","text-left"],[1,"mb-3","text-xl","font-bold","text-right","text-cyan-400"],[1,"mb-4","py-3","px-2","text-gray-600","border","border-slate-100","rounded-xl"],[1,"mt-2","font-semibold","text-sm","text-left"],[1,"mb-3","flex","justify-between"],[1,"text-md","font-semibold","text-left"],[1,"text-xl","font-bold","text-right","text-orange-400"],[1,"flex","justify-between"],[1,"font-semibold","text-md","text-left"],[1,"text-xl","font-bold","text-right","text-cyan-400"],["class","mb-3 flex justify-between",4,"ngFor","ngForOf"],[1,"font-semibold","text-sm","text-left","uppercase","ml-5"],[1,"text-lg","font-bold","text-right","text-cyan-400"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Appointment Today"),t.qZA(),t.TgZ(4,"div",3)(5,"div",4),t._uU(6," - "),t.qZA(),t._UZ(7,"div",5),t.qZA()(),t.TgZ(8,"div",6)(9,"div",2),t._uU(10,"Birthday Celebrants"),t.qZA(),t.TgZ(11,"div",7),t._uU(12," - "),t.qZA()(),t.TgZ(13,"div",6)(14,"div",2),t._uU(15,"Stats Summary Today"),t.qZA(),t.TgZ(16,"div",8)(17,"div",9),t._uU(18," Patients "),t.qZA(),t.TgZ(19,"div",10),t._uU(20),t.qZA()(),t.TgZ(21,"div",11)(22,"div",12),t._uU(23," All visits "),t.qZA(),t.TgZ(24,"div",13),t._uU(25),t.qZA()(),t.YNc(26,F,5,2,"div",14),t.qZA()()),2&n&&(t.xp6(20),t.hij(" ",null==e.side_stats?null:e.side_stats.patient_registered," "),t.xp6(5),t.hij(" ",null==e.side_stats?null:e.side_stats.consult_count," "),t.xp6(1),t.Q6J("ngForOf",null==e.side_stats?null:e.side_stats.program_count))},dependencies:[g.sg]});class f{constructor(){}ngOnInit(){}}f.\u0275fac=function(n){return new(n||f)},f.\u0275cmp=t.Xpm({type:f,selectors:[["app-dashboard"]],decls:3,vars:0,consts:[[1,"grid","grid-cols-11","mt-4","gap-4","w-full"],[1,"col-span-12","lg:col-span-9"],[1,"hidden","lg:block","lg:col-span-2","lg:overflow-auto"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"app-todays-consult",1)(2,"app-todays-stats",2),t.qZA())},dependencies:[m,_]});const Q=[{path:"",component:f}];class c{}c.\u0275fac=function(n){return new(n||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[x.Bz.forChild(Q),x.Bz]});class p{}p.\u0275fac=function(n){return new(n||p)},p.\u0275mod=t.oAB({type:p}),p.\u0275inj=t.cJS({imports:[g.ez,c,v.uH,u.u5]})}}]);